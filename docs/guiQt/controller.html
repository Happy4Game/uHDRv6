<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 15.0.3"/>
    <title>guiQt.controller API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;z-index:999;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent; z-index:1}nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:.75rem center;margin-bottom:1rem;}.pdoc .alert > em{display:none;}.pdoc .alert > *:last-child{margin-bottom:0;}.pdoc .alert.note{color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .alert.tip{color:#0a3622;background-color:#d1e7dd;border-color:#a3cfbb;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%230a3622%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M2%206a6%206%200%201%201%2010.174%204.31c-.203.196-.359.4-.453.619l-.762%201.769A.5.5%200%200%201%2010.5%2013a.5.5%200%200%201%200%201%20.5.5%200%200%201%200%201l-.224.447a1%201%200%200%201-.894.553H6.618a1%201%200%200%201-.894-.553L5.5%2015a.5.5%200%200%201%200-1%20.5.5%200%200%201%200-1%20.5.5%200%200%201-.46-.302l-.761-1.77a2%202%200%200%200-.453-.618A5.98%205.98%200%200%201%202%206m6-5a5%205%200%200%200-3.479%208.592c.263.254.514.564.676.941L5.83%2012h4.342l.632-1.467c.162-.377.413-.687.676-.941A5%205%200%200%200%208%201%22/%3E%3C/svg%3E");}.pdoc .alert.important{color:#055160;background-color:#cff4fc;border-color:#9eeaf9;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23055160%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M2%200a2%202%200%200%200-2%202v12a2%202%200%200%200%202%202h12a2%202%200%200%200%202-2V2a2%202%200%200%200-2-2zm6%204c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%204.995A.905.905%200%200%201%208%204m.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2%22/%3E%3C/svg%3E");}.pdoc .alert.warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .alert.caution{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M11.46.146A.5.5%200%200%200%2011.107%200H4.893a.5.5%200%200%200-.353.146L.146%204.54A.5.5%200%200%200%200%204.893v6.214a.5.5%200%200%200%20.146.353l4.394%204.394a.5.5%200%200%200%20.353.146h6.214a.5.5%200%200%200%20.353-.146l4.394-4.394a.5.5%200%200%200%20.146-.353V4.893a.5.5%200%200%200-.146-.353zM8%204c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%204.995A.905.905%200%200%201%208%204m.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2%22/%3E%3C/svg%3E");}.pdoc .alert.danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--accent);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .decorator-deprecated{color:#842029;}.pdoc .decorator-deprecated ~ span{filter:grayscale(1) opacity(0.8);}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>            <a class="pdoc-button module-list-button" href="../guiQt.html">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-left" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0v-2z"/>
  <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
</svg>                &nbsp;guiQt</a>


            <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                   pattern=".+" required>



            <h2>API Documentation</h2>
                <ul class="memberlist">
            <li>
                    <a class="function" href="#getScreenSize">getScreenSize</a>
            </li>
            <li>
                    <a class="class" href="#GalleryMode">GalleryMode</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#GalleryMode.nbRow">nbRow</a>
                        </li>
                        <li>
                                <a class="function" href="#GalleryMode.nbCol">nbCol</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#ImageWidgetController">ImageWidgetController</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#ImageWidgetController.__init__">ImageWidgetController</a>
                        </li>
                        <li>
                                <a class="variable" href="#ImageWidgetController.model">model</a>
                        </li>
                        <li>
                                <a class="variable" href="#ImageWidgetController.view">view</a>
                        </li>
                        <li>
                                <a class="function" href="#ImageWidgetController.setImage">setImage</a>
                        </li>
                        <li>
                                <a class="function" href="#ImageWidgetController.setQPixmap">setQPixmap</a>
                        </li>
                        <li>
                                <a class="function" href="#ImageWidgetController.id">id</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#ImageGalleryController">ImageGalleryController</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#ImageGalleryController.__init__">ImageGalleryController</a>
                        </li>
                        <li>
                                <a class="variable" href="#ImageGalleryController.parent">parent</a>
                        </li>
                        <li>
                                <a class="variable" href="#ImageGalleryController.view">view</a>
                        </li>
                        <li>
                                <a class="variable" href="#ImageGalleryController.model">model</a>
                        </li>
                        <li>
                                <a class="function" href="#ImageGalleryController.setImages">setImages</a>
                        </li>
                        <li>
                                <a class="function" href="#ImageGalleryController.updateImages">updateImages</a>
                        </li>
                        <li>
                                <a class="function" href="#ImageGalleryController.callBackButton_previousPage">callBackButton_previousPage</a>
                        </li>
                        <li>
                                <a class="function" href="#ImageGalleryController.callBackButton_nextPage">callBackButton_nextPage</a>
                        </li>
                        <li>
                                <a class="function" href="#ImageGalleryController.computePageNumberOnGalleryModeChange">computePageNumberOnGalleryModeChange</a>
                        </li>
                        <li>
                                <a class="function" href="#ImageGalleryController.callBackButton_1x1">callBackButton_1x1</a>
                        </li>
                        <li>
                                <a class="function" href="#ImageGalleryController.callBackButton_3x2">callBackButton_3x2</a>
                        </li>
                        <li>
                                <a class="function" href="#ImageGalleryController.callBackButton_6x4">callBackButton_6x4</a>
                        </li>
                        <li>
                                <a class="function" href="#ImageGalleryController.callBackButton_9x6">callBackButton_9x6</a>
                        </li>
                        <li>
                                <a class="function" href="#ImageGalleryController.callBackButton_2x1">callBackButton_2x1</a>
                        </li>
                        <li>
                                <a class="function" href="#ImageGalleryController.selectImage">selectImage</a>
                        </li>
                        <li>
                                <a class="function" href="#ImageGalleryController.getSelectedProcessPipe">getSelectedProcessPipe</a>
                        </li>
                        <li>
                                <a class="function" href="#ImageGalleryController.setProcessPipeWidgetQPixmap">setProcessPipeWidgetQPixmap</a>
                        </li>
                        <li>
                                <a class="function" href="#ImageGalleryController.save">save</a>
                        </li>
                        <li>
                                <a class="function" href="#ImageGalleryController.currentPage">currentPage</a>
                        </li>
                        <li>
                                <a class="function" href="#ImageGalleryController.pageIdx">pageIdx</a>
                        </li>
                        <li>
                                <a class="function" href="#ImageGalleryController.getFilenamesOfCurrentPage">getFilenamesOfCurrentPage</a>
                        </li>
                        <li>
                                <a class="function" href="#ImageGalleryController.getProcessPipeById">getProcessPipeById</a>
                        </li>
                        <li>
                                <a class="function" href="#ImageGalleryController.getProcessPipes">getProcessPipes</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#AppController">AppController</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#AppController.__init__">AppController</a>
                        </li>
                        <li>
                                <a class="variable" href="#AppController.screenSize">screenSize</a>
                        </li>
                        <li>
                                <a class="variable" href="#AppController.hdrDisplay">hdrDisplay</a>
                        </li>
                        <li>
                                <a class="variable" href="#AppController.view">view</a>
                        </li>
                        <li>
                                <a class="variable" href="#AppController.model">model</a>
                        </li>
                        <li>
                                <a class="variable" href="#AppController.dirName">dirName</a>
                        </li>
                        <li>
                                <a class="variable" href="#AppController.imagesName">imagesName</a>
                        </li>
                        <li>
                                <a class="function" href="#AppController.callBackSelectDir">callBackSelectDir</a>
                        </li>
                        <li>
                                <a class="function" href="#AppController.callBackSave">callBackSave</a>
                        </li>
                        <li>
                                <a class="function" href="#AppController.callBackQuit">callBackQuit</a>
                        </li>
                        <li>
                                <a class="function" href="#AppController.callBackDisplayHDR">callBackDisplayHDR</a>
                        </li>
                        <li>
                                <a class="function" href="#AppController.callBackEndDisplay">callBackEndDisplay</a>
                        </li>
                        <li>
                                <a class="function" href="#AppController.callBackCloseDisplayHDR">callBackCloseDisplayHDR</a>
                        </li>
                        <li>
                                <a class="function" href="#AppController.callBackCompareRawEditedHDR">callBackCompareRawEditedHDR</a>
                        </li>
                        <li>
                                <a class="function" href="#AppController.callBackExportHDR">callBackExportHDR</a>
                        </li>
                        <li>
                                <a class="function" href="#AppController.callBackEndExportHDR">callBackEndExportHDR</a>
                        </li>
                        <li>
                                <a class="function" href="#AppController.callBackExportAllHDR">callBackExportAllHDR</a>
                        </li>
                        <li>
                                <a class="function" href="#AppController.callBackEndAllExportHDR">callBackEndAllExportHDR</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#MultiDockController">MultiDockController</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#MultiDockController.__init__">MultiDockController</a>
                        </li>
                        <li>
                                <a class="variable" href="#MultiDockController.parent">parent</a>
                        </li>
                        <li>
                                <a class="variable" href="#MultiDockController.view">view</a>
                        </li>
                        <li>
                                <a class="variable" href="#MultiDockController.model">model</a>
                        </li>
                        <li>
                                <a class="function" href="#MultiDockController.activateEDIT">activateEDIT</a>
                        </li>
                        <li>
                                <a class="function" href="#MultiDockController.activateINFO">activateINFO</a>
                        </li>
                        <li>
                                <a class="function" href="#MultiDockController.activateMIAM">activateMIAM</a>
                        </li>
                        <li>
                                <a class="function" href="#MultiDockController.switch">switch</a>
                        </li>
                        <li>
                                <a class="function" href="#MultiDockController.setProcessPipe">setProcessPipe</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#EditImageController">EditImageController</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#EditImageController.__init__">EditImageController</a>
                        </li>
                        <li>
                                <a class="variable" href="#EditImageController.parent">parent</a>
                        </li>
                        <li>
                                <a class="variable" href="#EditImageController.previewHDR">previewHDR</a>
                        </li>
                        <li>
                                <a class="variable" href="#EditImageController.controllerHDR">controllerHDR</a>
                        </li>
                        <li>
                                <a class="variable" href="#EditImageController.view">view</a>
                        </li>
                        <li>
                                <a class="variable" href="#EditImageController.model">model</a>
                        </li>
                        <li>
                                <a class="function" href="#EditImageController.setProcessPipe">setProcessPipe</a>
                        </li>
                        <li>
                                <a class="function" href="#EditImageController.getProcessPipe">getProcessPipe</a>
                        </li>
                        <li>
                                <a class="function" href="#EditImageController.buildView">buildView</a>
                        </li>
                        <li>
                                <a class="function" href="#EditImageController.autoExposure">autoExposure</a>
                        </li>
                        <li>
                                <a class="function" href="#EditImageController.changeExposure">changeExposure</a>
                        </li>
                        <li>
                                <a class="function" href="#EditImageController.changeContrast">changeContrast</a>
                        </li>
                        <li>
                                <a class="function" href="#EditImageController.changeToneCurve">changeToneCurve</a>
                        </li>
                        <li>
                                <a class="function" href="#EditImageController.changeLightnessMask">changeLightnessMask</a>
                        </li>
                        <li>
                                <a class="function" href="#EditImageController.changeSaturation">changeSaturation</a>
                        </li>
                        <li>
                                <a class="function" href="#EditImageController.changeColorEditor">changeColorEditor</a>
                        </li>
                        <li>
                                <a class="function" href="#EditImageController.changeGeometry">changeGeometry</a>
                        </li>
                        <li>
                                <a class="function" href="#EditImageController.updateImage">updateImage</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#ImageInfoController">ImageInfoController</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#ImageInfoController.__init__">ImageInfoController</a>
                        </li>
                        <li>
                                <a class="variable" href="#ImageInfoController.parent">parent</a>
                        </li>
                        <li>
                                <a class="variable" href="#ImageInfoController.view">view</a>
                        </li>
                        <li>
                                <a class="variable" href="#ImageInfoController.model">model</a>
                        </li>
                        <li>
                                <a class="variable" href="#ImageInfoController.callBackActive">callBackActive</a>
                        </li>
                        <li>
                                <a class="function" href="#ImageInfoController.setProcessPipe">setProcessPipe</a>
                        </li>
                        <li>
                                <a class="function" href="#ImageInfoController.buildView">buildView</a>
                        </li>
                        <li>
                                <a class="function" href="#ImageInfoController.metadataChange">metadataChange</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#AdvanceSliderController">AdvanceSliderController</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#AdvanceSliderController.__init__">AdvanceSliderController</a>
                        </li>
                        <li>
                                <a class="variable" href="#AdvanceSliderController.parent">parent</a>
                        </li>
                        <li>
                                <a class="variable" href="#AdvanceSliderController.view">view</a>
                        </li>
                        <li>
                                <a class="variable" href="#AdvanceSliderController.model">model</a>
                        </li>
                        <li>
                                <a class="variable" href="#AdvanceSliderController.step">step</a>
                        </li>
                        <li>
                                <a class="variable" href="#AdvanceSliderController.defaultValue">defaultValue</a>
                        </li>
                        <li>
                                <a class="variable" href="#AdvanceSliderController.range">range</a>
                        </li>
                        <li>
                                <a class="variable" href="#AdvanceSliderController.callBackActive">callBackActive</a>
                        </li>
                        <li>
                                <a class="variable" href="#AdvanceSliderController.callBackValueChange">callBackValueChange</a>
                        </li>
                        <li>
                                <a class="variable" href="#AdvanceSliderController.callBackAutoPush">callBackAutoPush</a>
                        </li>
                        <li>
                                <a class="function" href="#AdvanceSliderController.sliderChange">sliderChange</a>
                        </li>
                        <li>
                                <a class="function" href="#AdvanceSliderController.setValue">setValue</a>
                        </li>
                        <li>
                                <a class="function" href="#AdvanceSliderController.reset">reset</a>
                        </li>
                        <li>
                                <a class="function" href="#AdvanceSliderController.auto">auto</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#ToneCurveController">ToneCurveController</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#ToneCurveController.__init__">ToneCurveController</a>
                        </li>
                        <li>
                                <a class="variable" href="#ToneCurveController.parent">parent</a>
                        </li>
                        <li>
                                <a class="variable" href="#ToneCurveController.model">model</a>
                        </li>
                        <li>
                                <a class="variable" href="#ToneCurveController.view">view</a>
                        </li>
                        <li>
                                <a class="variable" href="#ToneCurveController.callBackActive">callBackActive</a>
                        </li>
                        <li>
                                <a class="variable" href="#ToneCurveController.showInput">showInput</a>
                        </li>
                        <li>
                                <a class="variable" href="#ToneCurveController.showbefore">showbefore</a>
                        </li>
                        <li>
                                <a class="variable" href="#ToneCurveController.showAfter">showAfter</a>
                        </li>
                        <li>
                                <a class="variable" href="#ToneCurveController.showOutput">showOutput</a>
                        </li>
                        <li>
                                <a class="variable" href="#ToneCurveController.weightFile">weightFile</a>
                        </li>
                        <li>
                                <a class="variable" href="#ToneCurveController.networkModel">networkModel</a>
                        </li>
                        <li>
                                <a class="function" href="#ToneCurveController.sliderChange">sliderChange</a>
                        </li>
                        <li>
                                <a class="function" href="#ToneCurveController.setValues">setValues</a>
                        </li>
                        <li>
                                <a class="function" href="#ToneCurveController.autoCurve">autoCurve</a>
                        </li>
                        <li>
                                <a class="function" href="#ToneCurveController.reset">reset</a>
                        </li>
                        <li>
                                <a class="function" href="#ToneCurveController.plotCurve">plotCurve</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#LightnessMaskController">LightnessMaskController</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#LightnessMaskController.__init__">LightnessMaskController</a>
                        </li>
                        <li>
                                <a class="variable" href="#LightnessMaskController.parent">parent</a>
                        </li>
                        <li>
                                <a class="variable" href="#LightnessMaskController.model">model</a>
                        </li>
                        <li>
                                <a class="variable" href="#LightnessMaskController.view">view</a>
                        </li>
                        <li>
                                <a class="variable" href="#LightnessMaskController.callBackActive">callBackActive</a>
                        </li>
                        <li>
                                <a class="function" href="#LightnessMaskController.maskChange">maskChange</a>
                        </li>
                        <li>
                                <a class="function" href="#LightnessMaskController.setValues">setValues</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#HDRviewerController">HDRviewerController</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#HDRviewerController.__init__">HDRviewerController</a>
                        </li>
                        <li>
                                <a class="variable" href="#HDRviewerController.parent">parent</a>
                        </li>
                        <li>
                                <a class="variable" href="#HDRviewerController.model">model</a>
                        </li>
                        <li>
                                <a class="variable" href="#HDRviewerController.view">view</a>
                        </li>
                        <li>
                                <a class="variable" href="#HDRviewerController.viewerProcess">viewerProcess</a>
                        </li>
                        <li>
                                <a class="function" href="#HDRviewerController.setView">setView</a>
                        </li>
                        <li>
                                <a class="function" href="#HDRviewerController.callBackUpdate">callBackUpdate</a>
                        </li>
                        <li>
                                <a class="function" href="#HDRviewerController.callBackAuto">callBackAuto</a>
                        </li>
                        <li>
                                <a class="function" href="#HDRviewerController.callBackCompare">callBackCompare</a>
                        </li>
                        <li>
                                <a class="function" href="#HDRviewerController.displayFile">displayFile</a>
                        </li>
                        <li>
                                <a class="function" href="#HDRviewerController.displayIMG">displayIMG</a>
                        </li>
                        <li>
                                <a class="function" href="#HDRviewerController.displaySplash">displaySplash</a>
                        </li>
                        <li>
                                <a class="function" href="#HDRviewerController.close">close</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#LchColorSelectorController">LchColorSelectorController</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#LchColorSelectorController.__init__">LchColorSelectorController</a>
                        </li>
                        <li>
                                <a class="variable" href="#LchColorSelectorController.parent">parent</a>
                        </li>
                        <li>
                                <a class="variable" href="#LchColorSelectorController.model">model</a>
                        </li>
                        <li>
                                <a class="variable" href="#LchColorSelectorController.view">view</a>
                        </li>
                        <li>
                                <a class="variable" href="#LchColorSelectorController.idName">idName</a>
                        </li>
                        <li>
                                <a class="variable" href="#LchColorSelectorController.callBackActive">callBackActive</a>
                        </li>
                        <li>
                                <a class="function" href="#LchColorSelectorController.sliderHueChange">sliderHueChange</a>
                        </li>
                        <li>
                                <a class="function" href="#LchColorSelectorController.sliderChromaChange">sliderChromaChange</a>
                        </li>
                        <li>
                                <a class="function" href="#LchColorSelectorController.sliderLightnessChange">sliderLightnessChange</a>
                        </li>
                        <li>
                                <a class="function" href="#LchColorSelectorController.sliderExposureChange">sliderExposureChange</a>
                        </li>
                        <li>
                                <a class="function" href="#LchColorSelectorController.sliderSaturationChange">sliderSaturationChange</a>
                        </li>
                        <li>
                                <a class="function" href="#LchColorSelectorController.sliderContrastChange">sliderContrastChange</a>
                        </li>
                        <li>
                                <a class="function" href="#LchColorSelectorController.sliderHueShiftChange">sliderHueShiftChange</a>
                        </li>
                        <li>
                                <a class="function" href="#LchColorSelectorController.checkboxMaskChange">checkboxMaskChange</a>
                        </li>
                        <li>
                                <a class="function" href="#LchColorSelectorController.setValues">setValues</a>
                        </li>
                        <li>
                                <a class="function" href="#LchColorSelectorController.resetSelection">resetSelection</a>
                        </li>
                        <li>
                                <a class="function" href="#LchColorSelectorController.resetEdit">resetEdit</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#GeometryController">GeometryController</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#GeometryController.__init__">GeometryController</a>
                        </li>
                        <li>
                                <a class="variable" href="#GeometryController.parent">parent</a>
                        </li>
                        <li>
                                <a class="variable" href="#GeometryController.model">model</a>
                        </li>
                        <li>
                                <a class="variable" href="#GeometryController.view">view</a>
                        </li>
                        <li>
                                <a class="variable" href="#GeometryController.callBackActive">callBackActive</a>
                        </li>
                        <li>
                                <a class="function" href="#GeometryController.sliderCroppingVerticalAdjustementChange">sliderCroppingVerticalAdjustementChange</a>
                        </li>
                        <li>
                                <a class="function" href="#GeometryController.sliderRotationChange">sliderRotationChange</a>
                        </li>
                        <li>
                                <a class="function" href="#GeometryController.setValues">setValues</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#ImageAestheticsController">ImageAestheticsController</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#ImageAestheticsController.__init__">ImageAestheticsController</a>
                        </li>
                        <li>
                                <a class="variable" href="#ImageAestheticsController.parent">parent</a>
                        </li>
                        <li>
                                <a class="variable" href="#ImageAestheticsController.model">model</a>
                        </li>
                        <li>
                                <a class="variable" href="#ImageAestheticsController.view">view</a>
                        </li>
                        <li>
                                <a class="function" href="#ImageAestheticsController.buildView">buildView</a>
                        </li>
                        <li>
                                <a class="function" href="#ImageAestheticsController.setProcessPipe">setProcessPipe</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="function" href="#messageBox">messageBox</a>
            </li>
            <li>
                    <a class="function" href="#okCancelBox">okCancelBox</a>
            </li>
            <li>
                    <a class="class" href="#ColorEditorsAutoController">ColorEditorsAutoController</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#ColorEditorsAutoController.__init__">ColorEditorsAutoController</a>
                        </li>
                        <li>
                                <a class="variable" href="#ColorEditorsAutoController.parent">parent</a>
                        </li>
                        <li>
                                <a class="variable" href="#ColorEditorsAutoController.controlled">controlled</a>
                        </li>
                        <li>
                                <a class="variable" href="#ColorEditorsAutoController.stepName">stepName</a>
                        </li>
                        <li>
                                <a class="variable" href="#ColorEditorsAutoController.model">model</a>
                        </li>
                        <li>
                                <a class="variable" href="#ColorEditorsAutoController.view">view</a>
                        </li>
                        <li>
                                <a class="variable" href="#ColorEditorsAutoController.callBackActive">callBackActive</a>
                        </li>
                        <li>
                                <a class="function" href="#ColorEditorsAutoController.auto">auto</a>
                        </li>
                </ul>

            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
<a href="./../guiQt.html">guiQt</a><wbr>.controller    </h1>

                        <div class="docstring"><p>uHDR GUI Controller Module</p>

<p>This module implements the Model-View-Controller (MVC) pattern for the uHDR
graphical user interface. It provides comprehensive controller classes that
manage user interactions, coordinate between GUI components, and handle
image processing workflows.</p>

<p>The controller system manages multiple aspects of the HDR editing interface:</p>

<ul>
<li>Image gallery navigation and display</li>
<li>HDR image editing controls and parameters</li>
<li>Processing pipeline management</li>
<li>File operations and metadata handling</li>
<li>Multi-monitor HDR display support</li>
</ul>

<p>Classes:
    - GalleryMode: Enumeration for gallery display layouts
    - ImageWidgetController: Individual image widget management
    - ImageGalleryController: Image gallery navigation and selection
    - AppController: Main application controller and workflow coordination
    - MultiDockController: Multi-panel interface management
    - EditImageController: HDR image editing controls and parameters
    - ImageInfoController: Image metadata and information display
    - AdvanceSliderController: Advanced slider control with auto-adjustment
    - ToneCurveController: Tone curve editing and B-spline management
    - LightnessMaskController: Lightness mask controls for tone range selection
    - HDRviewerController: HDR image display and comparison
    - LchColorSelectorController: LCH color space editing interface
    - GeometryController: Geometric transformation controls
    - ImageAestheticsController: Image aesthetics analysis and display</p>

<p>Key Features:
    - Complete MVC architecture for HDR image editing
    - Multi-threaded processing with progress indicators
    - HDR display management and calibration
    - Advanced color editing with LCH color space support
    - Tone curve editing with B-spline interpolation
    - Batch processing and export capabilities
    - Real-time preview and comparison tools</p>
</div>

                        <input id="mod-controller-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-controller-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos">   1</span></a><span class="c1"># uHDR: HDR image editing software</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos">   2</span></a><span class="c1">#   Copyright (C) 2021  remi cozot </span>
</span><span id="L-3"><a href="#L-3"><span class="linenos">   3</span></a><span class="c1">#</span>
</span><span id="L-4"><a href="#L-4"><span class="linenos">   4</span></a><span class="c1">#    This program is free software: you can redistribute it and/or modify</span>
</span><span id="L-5"><a href="#L-5"><span class="linenos">   5</span></a><span class="c1">#    it under the terms of the GNU General Public License as published by</span>
</span><span id="L-6"><a href="#L-6"><span class="linenos">   6</span></a><span class="c1">#    the Free Software Foundation, either version 3 of the License, or</span>
</span><span id="L-7"><a href="#L-7"><span class="linenos">   7</span></a><span class="c1">#    (at your option) any later version.</span>
</span><span id="L-8"><a href="#L-8"><span class="linenos">   8</span></a><span class="c1">#</span>
</span><span id="L-9"><a href="#L-9"><span class="linenos">   9</span></a><span class="c1">#    This program is distributed in the hope that it will be useful,</span>
</span><span id="L-10"><a href="#L-10"><span class="linenos">  10</span></a><span class="c1">#    but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
</span><span id="L-11"><a href="#L-11"><span class="linenos">  11</span></a><span class="c1">#    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
</span><span id="L-12"><a href="#L-12"><span class="linenos">  12</span></a><span class="c1">#    GNU General Public License for more details.</span>
</span><span id="L-13"><a href="#L-13"><span class="linenos">  13</span></a><span class="c1">#</span>
</span><span id="L-14"><a href="#L-14"><span class="linenos">  14</span></a><span class="c1"># hdrCore project 2020</span>
</span><span id="L-15"><a href="#L-15"><span class="linenos">  15</span></a><span class="c1"># author: remi.cozot@univ-littoral.fr</span>
</span><span id="L-16"><a href="#L-16"><span class="linenos">  16</span></a>
</span><span id="L-17"><a href="#L-17"><span class="linenos">  17</span></a>
</span><span id="L-18"><a href="#L-18"><span class="linenos">  18</span></a>
</span><span id="L-19"><a href="#L-19"><span class="linenos">  19</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-20"><a href="#L-20"><span class="linenos">  20</span></a><span class="c1"># --- Package hdrGUI ---------------------------------------------------------</span>
</span><span id="L-21"><a href="#L-21"><span class="linenos">  21</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-22"><a href="#L-22"><span class="linenos">  22</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-23"><a href="#L-23"><span class="linenos">  23</span></a><span class="sd">uHDR GUI Controller Module</span>
</span><span id="L-24"><a href="#L-24"><span class="linenos">  24</span></a>
</span><span id="L-25"><a href="#L-25"><span class="linenos">  25</span></a><span class="sd">This module implements the Model-View-Controller (MVC) pattern for the uHDR</span>
</span><span id="L-26"><a href="#L-26"><span class="linenos">  26</span></a><span class="sd">graphical user interface. It provides comprehensive controller classes that</span>
</span><span id="L-27"><a href="#L-27"><span class="linenos">  27</span></a><span class="sd">manage user interactions, coordinate between GUI components, and handle</span>
</span><span id="L-28"><a href="#L-28"><span class="linenos">  28</span></a><span class="sd">image processing workflows.</span>
</span><span id="L-29"><a href="#L-29"><span class="linenos">  29</span></a>
</span><span id="L-30"><a href="#L-30"><span class="linenos">  30</span></a><span class="sd">The controller system manages multiple aspects of the HDR editing interface:</span>
</span><span id="L-31"><a href="#L-31"><span class="linenos">  31</span></a><span class="sd">- Image gallery navigation and display</span>
</span><span id="L-32"><a href="#L-32"><span class="linenos">  32</span></a><span class="sd">- HDR image editing controls and parameters</span>
</span><span id="L-33"><a href="#L-33"><span class="linenos">  33</span></a><span class="sd">- Processing pipeline management</span>
</span><span id="L-34"><a href="#L-34"><span class="linenos">  34</span></a><span class="sd">- File operations and metadata handling</span>
</span><span id="L-35"><a href="#L-35"><span class="linenos">  35</span></a><span class="sd">- Multi-monitor HDR display support</span>
</span><span id="L-36"><a href="#L-36"><span class="linenos">  36</span></a>
</span><span id="L-37"><a href="#L-37"><span class="linenos">  37</span></a><span class="sd">Classes:</span>
</span><span id="L-38"><a href="#L-38"><span class="linenos">  38</span></a><span class="sd">    - GalleryMode: Enumeration for gallery display layouts</span>
</span><span id="L-39"><a href="#L-39"><span class="linenos">  39</span></a><span class="sd">    - ImageWidgetController: Individual image widget management</span>
</span><span id="L-40"><a href="#L-40"><span class="linenos">  40</span></a><span class="sd">    - ImageGalleryController: Image gallery navigation and selection</span>
</span><span id="L-41"><a href="#L-41"><span class="linenos">  41</span></a><span class="sd">    - AppController: Main application controller and workflow coordination</span>
</span><span id="L-42"><a href="#L-42"><span class="linenos">  42</span></a><span class="sd">    - MultiDockController: Multi-panel interface management</span>
</span><span id="L-43"><a href="#L-43"><span class="linenos">  43</span></a><span class="sd">    - EditImageController: HDR image editing controls and parameters</span>
</span><span id="L-44"><a href="#L-44"><span class="linenos">  44</span></a><span class="sd">    - ImageInfoController: Image metadata and information display</span>
</span><span id="L-45"><a href="#L-45"><span class="linenos">  45</span></a><span class="sd">    - AdvanceSliderController: Advanced slider control with auto-adjustment</span>
</span><span id="L-46"><a href="#L-46"><span class="linenos">  46</span></a><span class="sd">    - ToneCurveController: Tone curve editing and B-spline management</span>
</span><span id="L-47"><a href="#L-47"><span class="linenos">  47</span></a><span class="sd">    - LightnessMaskController: Lightness mask controls for tone range selection</span>
</span><span id="L-48"><a href="#L-48"><span class="linenos">  48</span></a><span class="sd">    - HDRviewerController: HDR image display and comparison</span>
</span><span id="L-49"><a href="#L-49"><span class="linenos">  49</span></a><span class="sd">    - LchColorSelectorController: LCH color space editing interface</span>
</span><span id="L-50"><a href="#L-50"><span class="linenos">  50</span></a><span class="sd">    - GeometryController: Geometric transformation controls</span>
</span><span id="L-51"><a href="#L-51"><span class="linenos">  51</span></a><span class="sd">    - ImageAestheticsController: Image aesthetics analysis and display</span>
</span><span id="L-52"><a href="#L-52"><span class="linenos">  52</span></a>
</span><span id="L-53"><a href="#L-53"><span class="linenos">  53</span></a><span class="sd">Key Features:</span>
</span><span id="L-54"><a href="#L-54"><span class="linenos">  54</span></a><span class="sd">    - Complete MVC architecture for HDR image editing</span>
</span><span id="L-55"><a href="#L-55"><span class="linenos">  55</span></a><span class="sd">    - Multi-threaded processing with progress indicators</span>
</span><span id="L-56"><a href="#L-56"><span class="linenos">  56</span></a><span class="sd">    - HDR display management and calibration</span>
</span><span id="L-57"><a href="#L-57"><span class="linenos">  57</span></a><span class="sd">    - Advanced color editing with LCH color space support</span>
</span><span id="L-58"><a href="#L-58"><span class="linenos">  58</span></a><span class="sd">    - Tone curve editing with B-spline interpolation</span>
</span><span id="L-59"><a href="#L-59"><span class="linenos">  59</span></a><span class="sd">    - Batch processing and export capabilities</span>
</span><span id="L-60"><a href="#L-60"><span class="linenos">  60</span></a><span class="sd">    - Real-time preview and comparison tools</span>
</span><span id="L-61"><a href="#L-61"><span class="linenos">  61</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-62"><a href="#L-62"><span class="linenos">  62</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-63"><a href="#L-63"><span class="linenos">  63</span></a><span class="c1"># --- Import ------------------------------------------------------------------</span>
</span><span id="L-64"><a href="#L-64"><span class="linenos">  64</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-65"><a href="#L-65"><span class="linenos">  65</span></a>
</span><span id="L-66"><a href="#L-66"><span class="linenos">  66</span></a><span class="kn">import</span><span class="w"> </span><span class="nn">enum</span><span class="o">,</span><span class="w"> </span><span class="nn">sys</span><span class="o">,</span><span class="w"> </span><span class="nn">subprocess</span><span class="o">,</span><span class="w"> </span><span class="nn">copy</span><span class="o">,</span><span class="w"> </span><span class="nn">colour</span><span class="o">,</span><span class="w"> </span><span class="nn">time</span><span class="o">,</span><span class="w"> </span><span class="nn">os</span><span class="o">,</span><span class="w"> </span><span class="nn">shutil</span><span class="o">,</span><span class="w"> </span><span class="nn">datetime</span><span class="o">,</span><span class="w"> </span><span class="nn">ctypes</span>
</span><span id="L-67"><a href="#L-67"><span class="linenos">  67</span></a><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
</span><span id="L-68"><a href="#L-68"><span class="linenos">  68</span></a><span class="c1"># pyQT5 import</span>
</span><span id="L-69"><a href="#L-69"><span class="linenos">  69</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">PyQt5.QtWidgets</span><span class="w"> </span><span class="kn">import</span> <span class="n">QFileDialog</span><span class="p">,</span> <span class="n">QApplication</span>
</span><span id="L-70"><a href="#L-70"><span class="linenos">  70</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">PyQt5.QtWidgets</span><span class="w"> </span><span class="kn">import</span> <span class="n">QMessageBox</span>
</span><span id="L-71"><a href="#L-71"><span class="linenos">  71</span></a>
</span><span id="L-72"><a href="#L-72"><span class="linenos">  72</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">.</span><span class="w"> </span><span class="kn">import</span> <span class="n">model</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="n">thread</span>
</span><span id="L-73"><a href="#L-73"><span class="linenos">  73</span></a><span class="kn">import</span><span class="w"> </span><span class="nn">hdrCore.image</span><span class="o">,</span><span class="w"> </span><span class="nn">hdrCore.processing</span><span class="o">,</span><span class="w"> </span><span class="nn">hdrCore.utils</span>
</span><span id="L-74"><a href="#L-74"><span class="linenos">  74</span></a><span class="kn">import</span><span class="w"> </span><span class="nn">hdrCore.coreC</span>
</span><span id="L-75"><a href="#L-75"><span class="linenos">  75</span></a><span class="kn">import</span><span class="w"> </span><span class="nn">preferences.preferences</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pref</span>
</span><span id="L-76"><a href="#L-76"><span class="linenos">  76</span></a>
</span><span id="L-77"><a href="#L-77"><span class="linenos">  77</span></a><span class="c1"># zj add for semi-auto curve </span>
</span><span id="L-78"><a href="#L-78"><span class="linenos">  78</span></a><span class="kn">import</span><span class="w"> </span><span class="nn">torch</span>
</span><span id="L-79"><a href="#L-79"><span class="linenos">  79</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">hdrCore.net</span><span class="w"> </span><span class="kn">import</span> <span class="n">Net</span>
</span><span id="L-80"><a href="#L-80"><span class="linenos">  80</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">torch.autograd</span><span class="w"> </span><span class="kn">import</span> <span class="n">Variable</span>
</span><span id="L-81"><a href="#L-81"><span class="linenos">  81</span></a>
</span><span id="L-82"><a href="#L-82"><span class="linenos">  82</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-83"><a href="#L-83"><span class="linenos">  83</span></a><span class="c1"># --- package methods ---------------------------------------------------------</span>
</span><span id="L-84"><a href="#L-84"><span class="linenos">  84</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-85"><a href="#L-85"><span class="linenos">  85</span></a><span class="k">def</span><span class="w"> </span><span class="nf">getScreenSize</span><span class="p">(</span><span class="n">app</span><span class="p">):</span>
</span><span id="L-86"><a href="#L-86"><span class="linenos">  86</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-87"><a href="#L-87"><span class="linenos">  87</span></a><span class="sd">    Get screen resolution information for multi-monitor support.</span>
</span><span id="L-88"><a href="#L-88"><span class="linenos">  88</span></a><span class="sd">    </span>
</span><span id="L-89"><a href="#L-89"><span class="linenos">  89</span></a><span class="sd">    Queries the application for all available screens and returns their</span>
</span><span id="L-90"><a href="#L-90"><span class="linenos">  90</span></a><span class="sd">    dimensions for HDR display configuration and window management.</span>
</span><span id="L-91"><a href="#L-91"><span class="linenos">  91</span></a><span class="sd">    </span>
</span><span id="L-92"><a href="#L-92"><span class="linenos">  92</span></a><span class="sd">    Args:</span>
</span><span id="L-93"><a href="#L-93"><span class="linenos">  93</span></a><span class="sd">        app (QApplication): PyQt5 application instance</span>
</span><span id="L-94"><a href="#L-94"><span class="linenos">  94</span></a><span class="sd">        </span>
</span><span id="L-95"><a href="#L-95"><span class="linenos">  95</span></a><span class="sd">    Returns:</span>
</span><span id="L-96"><a href="#L-96"><span class="linenos">  96</span></a><span class="sd">        list: List of QSize objects representing screen dimensions</span>
</span><span id="L-97"><a href="#L-97"><span class="linenos">  97</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-98"><a href="#L-98"><span class="linenos">  98</span></a>    <span class="n">screens</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">screens</span><span class="p">()</span>
</span><span id="L-99"><a href="#L-99"><span class="linenos">  99</span></a>    <span class="n">res</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">size</span><span class="p">(),</span> <span class="n">screens</span><span class="p">))</span>
</span><span id="L-100"><a href="#L-100"><span class="linenos"> 100</span></a>    <span class="k">return</span> <span class="n">res</span>
</span><span id="L-101"><a href="#L-101"><span class="linenos"> 101</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-102"><a href="#L-102"><span class="linenos"> 102</span></a><span class="c1"># --- Class GalleryMode -------------------------------------------------------</span>
</span><span id="L-103"><a href="#L-103"><span class="linenos"> 103</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-104"><a href="#L-104"><span class="linenos"> 104</span></a><span class="k">class</span><span class="w"> </span><span class="nc">GalleryMode</span><span class="p">(</span><span class="n">enum</span><span class="o">.</span><span class="n">Enum</span><span class="p">):</span>
</span><span id="L-105"><a href="#L-105"><span class="linenos"> 105</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-106"><a href="#L-106"><span class="linenos"> 106</span></a><span class="sd">    Enumeration for gallery display layout configurations.</span>
</span><span id="L-107"><a href="#L-107"><span class="linenos"> 107</span></a><span class="sd">    </span>
</span><span id="L-108"><a href="#L-108"><span class="linenos"> 108</span></a><span class="sd">    Defines different grid layouts for the image gallery, allowing users</span>
</span><span id="L-109"><a href="#L-109"><span class="linenos"> 109</span></a><span class="sd">    to view multiple images simultaneously in various arrangements.</span>
</span><span id="L-110"><a href="#L-110"><span class="linenos"> 110</span></a><span class="sd">    Each mode specifies the number of rows and columns for image display.</span>
</span><span id="L-111"><a href="#L-111"><span class="linenos"> 111</span></a><span class="sd">    </span>
</span><span id="L-112"><a href="#L-112"><span class="linenos"> 112</span></a><span class="sd">    Attributes:</span>
</span><span id="L-113"><a href="#L-113"><span class="linenos"> 113</span></a><span class="sd">        - _1x1 (int): Single image view (1 row, 1 column)</span>
</span><span id="L-114"><a href="#L-114"><span class="linenos"> 114</span></a><span class="sd">        - _3x2 (int): 3×2 grid layout (2 rows, 3 columns)</span>
</span><span id="L-115"><a href="#L-115"><span class="linenos"> 115</span></a><span class="sd">        - _6x4 (int): 6×4 grid layout (4 rows, 6 columns)</span>
</span><span id="L-116"><a href="#L-116"><span class="linenos"> 116</span></a><span class="sd">        - _9x6 (int): 9×6 grid layout (6 rows, 9 columns)</span>
</span><span id="L-117"><a href="#L-117"><span class="linenos"> 117</span></a><span class="sd">        - _2x1 (int): 2×1 layout (1 row, 2 columns) for side-by-side comparison</span>
</span><span id="L-118"><a href="#L-118"><span class="linenos"> 118</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-119"><a href="#L-119"><span class="linenos"> 119</span></a>
</span><span id="L-120"><a href="#L-120"><span class="linenos"> 120</span></a>    <span class="n">_1x1</span>         <span class="o">=</span> <span class="mi">0</span>         <span class="c1"># </span>
</span><span id="L-121"><a href="#L-121"><span class="linenos"> 121</span></a>    <span class="n">_3x2</span>         <span class="o">=</span> <span class="mi">1</span>         <span class="c1"># </span>
</span><span id="L-122"><a href="#L-122"><span class="linenos"> 122</span></a>    <span class="n">_6x4</span>         <span class="o">=</span> <span class="mi">2</span>         <span class="c1"># </span>
</span><span id="L-123"><a href="#L-123"><span class="linenos"> 123</span></a>    <span class="n">_9x6</span>         <span class="o">=</span> <span class="mi">3</span>         <span class="c1">#</span>
</span><span id="L-124"><a href="#L-124"><span class="linenos"> 124</span></a>    
</span><span id="L-125"><a href="#L-125"><span class="linenos"> 125</span></a>    <span class="n">_2x1</span>        <span class="o">=</span>  <span class="mi">4</span>
</span><span id="L-126"><a href="#L-126"><span class="linenos"> 126</span></a>
</span><span id="L-127"><a href="#L-127"><span class="linenos"> 127</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">nbRow</span><span class="p">(</span><span class="n">m</span><span class="p">):</span>
</span><span id="L-128"><a href="#L-128"><span class="linenos"> 128</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-129"><a href="#L-129"><span class="linenos"> 129</span></a><span class="sd">        Get the number of rows for a gallery mode.</span>
</span><span id="L-130"><a href="#L-130"><span class="linenos"> 130</span></a><span class="sd">        </span>
</span><span id="L-131"><a href="#L-131"><span class="linenos"> 131</span></a><span class="sd">        Args:</span>
</span><span id="L-132"><a href="#L-132"><span class="linenos"> 132</span></a><span class="sd">            m (GalleryMode): Gallery mode enumeration value</span>
</span><span id="L-133"><a href="#L-133"><span class="linenos"> 133</span></a><span class="sd">            </span>
</span><span id="L-134"><a href="#L-134"><span class="linenos"> 134</span></a><span class="sd">        Returns:</span>
</span><span id="L-135"><a href="#L-135"><span class="linenos"> 135</span></a><span class="sd">            int: Number of rows in the gallery layout</span>
</span><span id="L-136"><a href="#L-136"><span class="linenos"> 136</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-137"><a href="#L-137"><span class="linenos"> 137</span></a>        <span class="k">if</span> <span class="n">m</span> <span class="o">==</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_1x1</span><span class="p">:</span> <span class="k">return</span> <span class="mi">1</span>
</span><span id="L-138"><a href="#L-138"><span class="linenos"> 138</span></a>        <span class="k">if</span> <span class="n">m</span> <span class="o">==</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_3x2</span><span class="p">:</span> <span class="k">return</span> <span class="mi">2</span>
</span><span id="L-139"><a href="#L-139"><span class="linenos"> 139</span></a>        <span class="k">if</span> <span class="n">m</span> <span class="o">==</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_6x4</span><span class="p">:</span> <span class="k">return</span> <span class="mi">4</span>
</span><span id="L-140"><a href="#L-140"><span class="linenos"> 140</span></a>        <span class="k">if</span> <span class="n">m</span> <span class="o">==</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_9x6</span><span class="p">:</span> <span class="k">return</span> <span class="mi">6</span>
</span><span id="L-141"><a href="#L-141"><span class="linenos"> 141</span></a>
</span><span id="L-142"><a href="#L-142"><span class="linenos"> 142</span></a>        <span class="k">if</span> <span class="n">m</span> <span class="o">==</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_2x1</span><span class="p">:</span> <span class="k">return</span> <span class="mi">1</span>
</span><span id="L-143"><a href="#L-143"><span class="linenos"> 143</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">nbCol</span><span class="p">(</span><span class="n">m</span><span class="p">):</span>
</span><span id="L-144"><a href="#L-144"><span class="linenos"> 144</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-145"><a href="#L-145"><span class="linenos"> 145</span></a><span class="sd">        Get the number of columns for a gallery mode.</span>
</span><span id="L-146"><a href="#L-146"><span class="linenos"> 146</span></a><span class="sd">        </span>
</span><span id="L-147"><a href="#L-147"><span class="linenos"> 147</span></a><span class="sd">        Args:</span>
</span><span id="L-148"><a href="#L-148"><span class="linenos"> 148</span></a><span class="sd">            m (GalleryMode): Gallery mode enumeration value</span>
</span><span id="L-149"><a href="#L-149"><span class="linenos"> 149</span></a><span class="sd">            </span>
</span><span id="L-150"><a href="#L-150"><span class="linenos"> 150</span></a><span class="sd">        Returns:</span>
</span><span id="L-151"><a href="#L-151"><span class="linenos"> 151</span></a><span class="sd">            int: Number of columns in the gallery layout</span>
</span><span id="L-152"><a href="#L-152"><span class="linenos"> 152</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-153"><a href="#L-153"><span class="linenos"> 153</span></a>        <span class="k">if</span> <span class="n">m</span> <span class="o">==</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_1x1</span><span class="p">:</span> <span class="k">return</span> <span class="mi">1</span>
</span><span id="L-154"><a href="#L-154"><span class="linenos"> 154</span></a>        <span class="k">if</span> <span class="n">m</span> <span class="o">==</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_3x2</span><span class="p">:</span> <span class="k">return</span> <span class="mi">3</span>
</span><span id="L-155"><a href="#L-155"><span class="linenos"> 155</span></a>        <span class="k">if</span> <span class="n">m</span> <span class="o">==</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_6x4</span><span class="p">:</span> <span class="k">return</span> <span class="mi">6</span>
</span><span id="L-156"><a href="#L-156"><span class="linenos"> 156</span></a>        <span class="k">if</span> <span class="n">m</span> <span class="o">==</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_9x6</span><span class="p">:</span> <span class="k">return</span> <span class="mi">9</span>
</span><span id="L-157"><a href="#L-157"><span class="linenos"> 157</span></a>
</span><span id="L-158"><a href="#L-158"><span class="linenos"> 158</span></a>        <span class="k">if</span> <span class="n">m</span> <span class="o">==</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_2x1</span><span class="p">:</span> <span class="k">return</span> <span class="mi">2</span>
</span><span id="L-159"><a href="#L-159"><span class="linenos"> 159</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-160"><a href="#L-160"><span class="linenos"> 160</span></a><span class="c1"># --- Class ImageWidgetController ---------------------------------------------</span>
</span><span id="L-161"><a href="#L-161"><span class="linenos"> 161</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-162"><a href="#L-162"><span class="linenos"> 162</span></a><span class="k">class</span><span class="w"> </span><span class="nc">ImageWidgetController</span><span class="p">:</span>
</span><span id="L-163"><a href="#L-163"><span class="linenos"> 163</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-164"><a href="#L-164"><span class="linenos"> 164</span></a><span class="sd">    Controller for individual image widget components.</span>
</span><span id="L-165"><a href="#L-165"><span class="linenos"> 165</span></a><span class="sd">    </span>
</span><span id="L-166"><a href="#L-166"><span class="linenos"> 166</span></a><span class="sd">    Manages the display and interaction of individual image widgets within</span>
</span><span id="L-167"><a href="#L-167"><span class="linenos"> 167</span></a><span class="sd">    the gallery and editing interface. Handles image loading, display</span>
</span><span id="L-168"><a href="#L-168"><span class="linenos"> 168</span></a><span class="sd">    updates, and user interactions for single image components.</span>
</span><span id="L-169"><a href="#L-169"><span class="linenos"> 169</span></a><span class="sd">    </span>
</span><span id="L-170"><a href="#L-170"><span class="linenos"> 170</span></a><span class="sd">    Attributes:</span>
</span><span id="L-171"><a href="#L-171"><span class="linenos"> 171</span></a><span class="sd">        - model (model.ImageWidgetModel): Data model for the image widget</span>
</span><span id="L-172"><a href="#L-172"><span class="linenos"> 172</span></a><span class="sd">        - view (view.ImageWidgetView): View component for image display</span>
</span><span id="L-173"><a href="#L-173"><span class="linenos"> 173</span></a><span class="sd">        - _id (int): Unique identifier for the widget</span>
</span><span id="L-174"><a href="#L-174"><span class="linenos"> 174</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-175"><a href="#L-175"><span class="linenos"> 175</span></a>
</span><span id="L-176"><a href="#L-176"><span class="linenos"> 176</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="nb">id</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
</span><span id="L-177"><a href="#L-177"><span class="linenos"> 177</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-178"><a href="#L-178"><span class="linenos"> 178</span></a><span class="sd">        Initialize an image widget controller.</span>
</span><span id="L-179"><a href="#L-179"><span class="linenos"> 179</span></a><span class="sd">        </span>
</span><span id="L-180"><a href="#L-180"><span class="linenos"> 180</span></a><span class="sd">        Args:</span>
</span><span id="L-181"><a href="#L-181"><span class="linenos"> 181</span></a><span class="sd">            image (numpy.ndarray or hdrCore.image.Image, optional): Initial image to display</span>
</span><span id="L-182"><a href="#L-182"><span class="linenos"> 182</span></a><span class="sd">            id (int, optional): Unique identifier for the widget (default: -1)</span>
</span><span id="L-183"><a href="#L-183"><span class="linenos"> 183</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-184"><a href="#L-184"><span class="linenos"> 184</span></a>
</span><span id="L-185"><a href="#L-185"><span class="linenos"> 185</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">ImageWidgetModel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="L-186"><a href="#L-186"><span class="linenos"> 186</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">ImageWidgetView</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="L-187"><a href="#L-187"><span class="linenos"> 187</span></a>
</span><span id="L-188"><a href="#L-188"><span class="linenos"> 188</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_id</span> <span class="o">=</span> <span class="nb">id</span> <span class="c1"># store an (unique) id </span>
</span><span id="L-189"><a href="#L-189"><span class="linenos"> 189</span></a>
</span><span id="L-190"><a href="#L-190"><span class="linenos"> 190</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">hdrCore</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">Image</span><span class="p">)):</span>
</span><span id="L-191"><a href="#L-191"><span class="linenos"> 191</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setImage</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
</span><span id="L-192"><a href="#L-192"><span class="linenos"> 192</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">setPixmap</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getColorData</span><span class="p">())</span>
</span><span id="L-193"><a href="#L-193"><span class="linenos"> 193</span></a>
</span><span id="L-194"><a href="#L-194"><span class="linenos"> 194</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setImage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image</span><span class="p">):</span>
</span><span id="L-195"><a href="#L-195"><span class="linenos"> 195</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-196"><a href="#L-196"><span class="linenos"> 196</span></a><span class="sd">        Update the image displayed in the widget.</span>
</span><span id="L-197"><a href="#L-197"><span class="linenos"> 197</span></a><span class="sd">        </span>
</span><span id="L-198"><a href="#L-198"><span class="linenos"> 198</span></a><span class="sd">        Args:</span>
</span><span id="L-199"><a href="#L-199"><span class="linenos"> 199</span></a><span class="sd">            image (numpy.ndarray or hdrCore.image.Image): New image to display</span>
</span><span id="L-200"><a href="#L-200"><span class="linenos"> 200</span></a><span class="sd">            </span>
</span><span id="L-201"><a href="#L-201"><span class="linenos"> 201</span></a><span class="sd">        Returns:</span>
</span><span id="L-202"><a href="#L-202"><span class="linenos"> 202</span></a><span class="sd">            QPixmap: Updated pixmap for the display</span>
</span><span id="L-203"><a href="#L-203"><span class="linenos"> 203</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-204"><a href="#L-204"><span class="linenos"> 204</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setImage</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
</span><span id="L-205"><a href="#L-205"><span class="linenos"> 205</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">setPixmap</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getColorData</span><span class="p">())</span>
</span><span id="L-206"><a href="#L-206"><span class="linenos"> 206</span></a>
</span><span id="L-207"><a href="#L-207"><span class="linenos"> 207</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setQPixmap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qPixmap</span><span class="p">):</span>
</span><span id="L-208"><a href="#L-208"><span class="linenos"> 208</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-209"><a href="#L-209"><span class="linenos"> 209</span></a><span class="sd">        Set the display pixmap directly.</span>
</span><span id="L-210"><a href="#L-210"><span class="linenos"> 210</span></a><span class="sd">        </span>
</span><span id="L-211"><a href="#L-211"><span class="linenos"> 211</span></a><span class="sd">        Args:</span>
</span><span id="L-212"><a href="#L-212"><span class="linenos"> 212</span></a><span class="sd">            qPixmap (QPixmap): Pixmap to display in the widget</span>
</span><span id="L-213"><a href="#L-213"><span class="linenos"> 213</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-214"><a href="#L-214"><span class="linenos"> 214</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">setQPixmap</span><span class="p">(</span><span class="n">qPixmap</span><span class="p">)</span>
</span><span id="L-215"><a href="#L-215"><span class="linenos"> 215</span></a>
</span><span id="L-216"><a href="#L-216"><span class="linenos"> 216</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
</span><span id="L-217"><a href="#L-217"><span class="linenos"> 217</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-218"><a href="#L-218"><span class="linenos"> 218</span></a><span class="sd">        Get the widget&#39;s unique identifier.</span>
</span><span id="L-219"><a href="#L-219"><span class="linenos"> 219</span></a><span class="sd">        </span>
</span><span id="L-220"><a href="#L-220"><span class="linenos"> 220</span></a><span class="sd">        Returns:</span>
</span><span id="L-221"><a href="#L-221"><span class="linenos"> 221</span></a><span class="sd">            int: Unique identifier for this widget</span>
</span><span id="L-222"><a href="#L-222"><span class="linenos"> 222</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-223"><a href="#L-223"><span class="linenos"> 223</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_id</span>
</span><span id="L-224"><a href="#L-224"><span class="linenos"> 224</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-225"><a href="#L-225"><span class="linenos"> 225</span></a><span class="c1"># --- Class ImageGalleryController --------------------------------------------</span>
</span><span id="L-226"><a href="#L-226"><span class="linenos"> 226</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-227"><a href="#L-227"><span class="linenos"> 227</span></a><span class="k">class</span><span class="w"> </span><span class="nc">ImageGalleryController</span><span class="p">():</span>
</span><span id="L-228"><a href="#L-228"><span class="linenos"> 228</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-229"><a href="#L-229"><span class="linenos"> 229</span></a><span class="sd">    Controller for the image gallery interface.</span>
</span><span id="L-230"><a href="#L-230"><span class="linenos"> 230</span></a><span class="sd">    </span>
</span><span id="L-231"><a href="#L-231"><span class="linenos"> 231</span></a><span class="sd">    Manages the gallery view that displays multiple images in grid layouts,</span>
</span><span id="L-232"><a href="#L-232"><span class="linenos"> 232</span></a><span class="sd">    handles pagination, gallery mode switching, and image selection. Provides</span>
</span><span id="L-233"><a href="#L-233"><span class="linenos"> 233</span></a><span class="sd">    the main interface for browsing and selecting images for editing.</span>
</span><span id="L-234"><a href="#L-234"><span class="linenos"> 234</span></a><span class="sd">    </span>
</span><span id="L-235"><a href="#L-235"><span class="linenos"> 235</span></a><span class="sd">    The gallery supports multiple display modes (1×1, 3×2, 6×4, 9×6, 2×1) and</span>
</span><span id="L-236"><a href="#L-236"><span class="linenos"> 236</span></a><span class="sd">    handles pagination when there are more images than can fit in the current view.</span>
</span><span id="L-237"><a href="#L-237"><span class="linenos"> 237</span></a><span class="sd">    </span>
</span><span id="L-238"><a href="#L-238"><span class="linenos"> 238</span></a><span class="sd">    Attributes:</span>
</span><span id="L-239"><a href="#L-239"><span class="linenos"> 239</span></a><span class="sd">        - parent: Parent controller (typically AppController)</span>
</span><span id="L-240"><a href="#L-240"><span class="linenos"> 240</span></a><span class="sd">        - view (view.ImageGalleryView): Gallery view component</span>
</span><span id="L-241"><a href="#L-241"><span class="linenos"> 241</span></a><span class="sd">        - model (model.ImageGalleryModel): Gallery data model</span>
</span><span id="L-242"><a href="#L-242"><span class="linenos"> 242</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-243"><a href="#L-243"><span class="linenos"> 243</span></a>
</span><span id="L-244"><a href="#L-244"><span class="linenos"> 244</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
</span><span id="L-245"><a href="#L-245"><span class="linenos"> 245</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-246"><a href="#L-246"><span class="linenos"> 246</span></a><span class="sd">        Initialize the image gallery controller.</span>
</span><span id="L-247"><a href="#L-247"><span class="linenos"> 247</span></a><span class="sd">        </span>
</span><span id="L-248"><a href="#L-248"><span class="linenos"> 248</span></a><span class="sd">        Args:</span>
</span><span id="L-249"><a href="#L-249"><span class="linenos"> 249</span></a><span class="sd">            parent: Parent controller that manages this gallery</span>
</span><span id="L-250"><a href="#L-250"><span class="linenos"> 250</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-251"><a href="#L-251"><span class="linenos"> 251</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; ImageGalleryController.__init__()&quot;</span><span class="p">)</span>
</span><span id="L-252"><a href="#L-252"><span class="linenos"> 252</span></a>
</span><span id="L-253"><a href="#L-253"><span class="linenos"> 253</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>    <span class="c1"># AppView</span>
</span><span id="L-254"><a href="#L-254"><span class="linenos"> 254</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">ImageGalleryView</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="L-255"><a href="#L-255"><span class="linenos"> 255</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">ImageGalleryModel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="L-256"><a href="#L-256"><span class="linenos"> 256</span></a>
</span><span id="L-257"><a href="#L-257"><span class="linenos"> 257</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setImages</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">imageFiles</span><span class="p">):</span> 
</span><span id="L-258"><a href="#L-258"><span class="linenos"> 258</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-259"><a href="#L-259"><span class="linenos"> 259</span></a><span class="sd">        Load a list of image files into the gallery.</span>
</span><span id="L-260"><a href="#L-260"><span class="linenos"> 260</span></a><span class="sd">        </span>
</span><span id="L-261"><a href="#L-261"><span class="linenos"> 261</span></a><span class="sd">        Args:</span>
</span><span id="L-262"><a href="#L-262"><span class="linenos"> 262</span></a><span class="sd">            imageFiles (list): List of image file paths to load</span>
</span><span id="L-263"><a href="#L-263"><span class="linenos"> 263</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-264"><a href="#L-264"><span class="linenos"> 264</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setImages</span><span class="p">(</span><span class="n">imageFiles</span><span class="p">)</span>
</span><span id="L-265"><a href="#L-265"><span class="linenos"> 265</span></a>
</span><span id="L-266"><a href="#L-266"><span class="linenos"> 266</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">updateImages</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-267"><a href="#L-267"><span class="linenos"> 267</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-268"><a href="#L-268"><span class="linenos"> 268</span></a><span class="sd">        Refresh the gallery display with current images.</span>
</span><span id="L-269"><a href="#L-269"><span class="linenos"> 269</span></a><span class="sd">        </span>
</span><span id="L-270"><a href="#L-270"><span class="linenos"> 270</span></a><span class="sd">        Called by the model when image data changes to update the view.</span>
</span><span id="L-271"><a href="#L-271"><span class="linenos"> 271</span></a><span class="sd">        Resets the page number and refreshes the display.</span>
</span><span id="L-272"><a href="#L-272"><span class="linenos"> 272</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-273"><a href="#L-273"><span class="linenos"> 273</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">pageNumber</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># reset page number</span>
</span><span id="L-274"><a href="#L-274"><span class="linenos"> 274</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">updateImages</span><span class="p">()</span>
</span><span id="L-275"><a href="#L-275"><span class="linenos"> 275</span></a>
</span><span id="L-276"><a href="#L-276"><span class="linenos"> 276</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackButton_previousPage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>  
</span><span id="L-277"><a href="#L-277"><span class="linenos"> 277</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-278"><a href="#L-278"><span class="linenos"> 278</span></a><span class="sd">        Navigate to the previous page in the gallery.</span>
</span><span id="L-279"><a href="#L-279"><span class="linenos"> 279</span></a><span class="sd">        </span>
</span><span id="L-280"><a href="#L-280"><span class="linenos"> 280</span></a><span class="sd">        Handles pagination when there are more images than can fit in the</span>
</span><span id="L-281"><a href="#L-281"><span class="linenos"> 281</span></a><span class="sd">        current gallery view. In single image mode, also selects the image.</span>
</span><span id="L-282"><a href="#L-282"><span class="linenos"> 282</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-283"><a href="#L-283"><span class="linenos"> 283</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">changePageNumber</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-284"><a href="#L-284"><span class="linenos"> 284</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">shapeMode</span> <span class="o">==</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_1x1</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">selectImage</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="L-285"><a href="#L-285"><span class="linenos"> 285</span></a>
</span><span id="L-286"><a href="#L-286"><span class="linenos"> 286</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackButton_nextPage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>      
</span><span id="L-287"><a href="#L-287"><span class="linenos"> 287</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-288"><a href="#L-288"><span class="linenos"> 288</span></a><span class="sd">        Navigate to the next page in the gallery.</span>
</span><span id="L-289"><a href="#L-289"><span class="linenos"> 289</span></a><span class="sd">        </span>
</span><span id="L-290"><a href="#L-290"><span class="linenos"> 290</span></a><span class="sd">        Handles pagination when there are more images than can fit in the</span>
</span><span id="L-291"><a href="#L-291"><span class="linenos"> 291</span></a><span class="sd">        current gallery view. In single image mode, also selects the image.</span>
</span><span id="L-292"><a href="#L-292"><span class="linenos"> 292</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-293"><a href="#L-293"><span class="linenos"> 293</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">changePageNumber</span><span class="p">(</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-294"><a href="#L-294"><span class="linenos"> 294</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">shapeMode</span> <span class="o">==</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_1x1</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">selectImage</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="L-295"><a href="#L-295"><span class="linenos"> 295</span></a>
</span><span id="L-296"><a href="#L-296"><span class="linenos"> 296</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">computePageNumberOnGalleryModeChange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">newGalleryMode</span><span class="p">):</span>
</span><span id="L-297"><a href="#L-297"><span class="linenos"> 297</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-298"><a href="#L-298"><span class="linenos"> 298</span></a><span class="sd">        Calculate the appropriate page number when changing gallery modes.</span>
</span><span id="L-299"><a href="#L-299"><span class="linenos"> 299</span></a><span class="sd">        </span>
</span><span id="L-300"><a href="#L-300"><span class="linenos"> 300</span></a><span class="sd">        When switching between different gallery layouts, this method ensures</span>
</span><span id="L-301"><a href="#L-301"><span class="linenos"> 301</span></a><span class="sd">        the currently selected or viewed image remains visible by calculating</span>
</span><span id="L-302"><a href="#L-302"><span class="linenos"> 302</span></a><span class="sd">        the correct page number for the new layout.</span>
</span><span id="L-303"><a href="#L-303"><span class="linenos"> 303</span></a><span class="sd">        </span>
</span><span id="L-304"><a href="#L-304"><span class="linenos"> 304</span></a><span class="sd">        Args:</span>
</span><span id="L-305"><a href="#L-305"><span class="linenos"> 305</span></a><span class="sd">            newGalleryMode (GalleryMode): Target gallery layout mode</span>
</span><span id="L-306"><a href="#L-306"><span class="linenos"> 306</span></a><span class="sd">            </span>
</span><span id="L-307"><a href="#L-307"><span class="linenos"> 307</span></a><span class="sd">        Returns:</span>
</span><span id="L-308"><a href="#L-308"><span class="linenos"> 308</span></a><span class="sd">            int: Calculated page number for the new gallery mode</span>
</span><span id="L-309"><a href="#L-309"><span class="linenos"> 309</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-310"><a href="#L-310"><span class="linenos"> 310</span></a>        <span class="n">currentPage</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">pageNumber</span>
</span><span id="L-311"><a href="#L-311"><span class="linenos"> 311</span></a>        <span class="n">nbImagePerPage</span> <span class="o">=</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">nbRow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">shapeMode</span><span class="p">)</span><span class="o">*</span><span class="n">GalleryMode</span><span class="o">.</span><span class="n">nbCol</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">shapeMode</span><span class="p">)</span>
</span><span id="L-312"><a href="#L-312"><span class="linenos"> 312</span></a>        <span class="n">selectedImage</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">selectedImage</span><span class="p">()</span> <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">selectedImage</span><span class="p">()</span><span class="o">!=-</span><span class="mi">1</span><span class="p">)</span> <span class="k">else</span> <span class="n">currentPage</span><span class="o">*</span><span class="n">nbImagePerPage</span>
</span><span id="L-313"><a href="#L-313"><span class="linenos"> 313</span></a>        <span class="n">newNbImagePerPage</span> <span class="o">=</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">nbRow</span><span class="p">(</span><span class="n">newGalleryMode</span><span class="p">)</span><span class="o">*</span><span class="n">GalleryMode</span><span class="o">.</span><span class="n">nbCol</span><span class="p">(</span><span class="n">newGalleryMode</span><span class="p">)</span>
</span><span id="L-314"><a href="#L-314"><span class="linenos"> 314</span></a>
</span><span id="L-315"><a href="#L-315"><span class="linenos"> 315</span></a>        <span class="n">newPageNumber</span> <span class="o">=</span> <span class="n">selectedImage</span><span class="o">//</span><span class="n">newNbImagePerPage</span>
</span><span id="L-316"><a href="#L-316"><span class="linenos"> 316</span></a>
</span><span id="L-317"><a href="#L-317"><span class="linenos"> 317</span></a>        <span class="k">return</span> <span class="n">newPageNumber</span>
</span><span id="L-318"><a href="#L-318"><span class="linenos"> 318</span></a>
</span><span id="L-319"><a href="#L-319"><span class="linenos"> 319</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackButton_1x1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-320"><a href="#L-320"><span class="linenos"> 320</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-321"><a href="#L-321"><span class="linenos"> 321</span></a><span class="sd">        Switch gallery to single image view mode (1×1).</span>
</span><span id="L-322"><a href="#L-322"><span class="linenos"> 322</span></a><span class="sd">        </span>
</span><span id="L-323"><a href="#L-323"><span class="linenos"> 323</span></a><span class="sd">        Changes the gallery layout to display one image at a time, suitable</span>
</span><span id="L-324"><a href="#L-324"><span class="linenos"> 324</span></a><span class="sd">        for detailed viewing and editing. Recalculates pagination and updates</span>
</span><span id="L-325"><a href="#L-325"><span class="linenos"> 325</span></a><span class="sd">        the display.</span>
</span><span id="L-326"><a href="#L-326"><span class="linenos"> 326</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-327"><a href="#L-327"><span class="linenos"> 327</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">shapeMode</span> <span class="o">!=</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_1x1</span><span class="p">:</span>
</span><span id="L-328"><a href="#L-328"><span class="linenos"> 328</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">resetGridLayoutWidgets</span><span class="p">()</span>
</span><span id="L-329"><a href="#L-329"><span class="linenos"> 329</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">pageNumber</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computePageNumberOnGalleryModeChange</span><span class="p">(</span><span class="n">GalleryMode</span><span class="o">.</span><span class="n">_1x1</span><span class="p">)</span>
</span><span id="L-330"><a href="#L-330"><span class="linenos"> 330</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">shapeMode</span> <span class="o">=</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_1x1</span>
</span><span id="L-331"><a href="#L-331"><span class="linenos"> 331</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">buildGridLayoutWidgets</span><span class="p">()</span>
</span><span id="L-332"><a href="#L-332"><span class="linenos"> 332</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">updateImages</span><span class="p">()</span>
</span><span id="L-333"><a href="#L-333"><span class="linenos"> 333</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">loadPage</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">pageNumber</span><span class="p">)</span>
</span><span id="L-334"><a href="#L-334"><span class="linenos"> 334</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">repaint</span><span class="p">()</span>
</span><span id="L-335"><a href="#L-335"><span class="linenos"> 335</span></a>
</span><span id="L-336"><a href="#L-336"><span class="linenos"> 336</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackButton_3x2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
</span><span id="L-337"><a href="#L-337"><span class="linenos"> 337</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-338"><a href="#L-338"><span class="linenos"> 338</span></a><span class="sd">        Switch gallery to 3×2 grid view mode.</span>
</span><span id="L-339"><a href="#L-339"><span class="linenos"> 339</span></a><span class="sd">        </span>
</span><span id="L-340"><a href="#L-340"><span class="linenos"> 340</span></a><span class="sd">        Changes the gallery layout to display 6 images in a 3×2 grid,</span>
</span><span id="L-341"><a href="#L-341"><span class="linenos"> 341</span></a><span class="sd">        suitable for browsing multiple images while maintaining reasonable</span>
</span><span id="L-342"><a href="#L-342"><span class="linenos"> 342</span></a><span class="sd">        image size for preview.</span>
</span><span id="L-343"><a href="#L-343"><span class="linenos"> 343</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-344"><a href="#L-344"><span class="linenos"> 344</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">shapeMode</span> <span class="o">!=</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_3x2</span><span class="p">:</span>
</span><span id="L-345"><a href="#L-345"><span class="linenos"> 345</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">resetGridLayoutWidgets</span><span class="p">()</span>
</span><span id="L-346"><a href="#L-346"><span class="linenos"> 346</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">pageNumber</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computePageNumberOnGalleryModeChange</span><span class="p">(</span><span class="n">GalleryMode</span><span class="o">.</span><span class="n">_3x2</span><span class="p">)</span>
</span><span id="L-347"><a href="#L-347"><span class="linenos"> 347</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">shapeMode</span> <span class="o">=</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_3x2</span>
</span><span id="L-348"><a href="#L-348"><span class="linenos"> 348</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">buildGridLayoutWidgets</span><span class="p">()</span>
</span><span id="L-349"><a href="#L-349"><span class="linenos"> 349</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">updateImages</span><span class="p">()</span>
</span><span id="L-350"><a href="#L-350"><span class="linenos"> 350</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">loadPage</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">pageNumber</span><span class="p">)</span>
</span><span id="L-351"><a href="#L-351"><span class="linenos"> 351</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">repaint</span><span class="p">()</span>
</span><span id="L-352"><a href="#L-352"><span class="linenos"> 352</span></a>
</span><span id="L-353"><a href="#L-353"><span class="linenos"> 353</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackButton_6x4</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
</span><span id="L-354"><a href="#L-354"><span class="linenos"> 354</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-355"><a href="#L-355"><span class="linenos"> 355</span></a><span class="sd">        Switch gallery to 6×4 grid view mode.</span>
</span><span id="L-356"><a href="#L-356"><span class="linenos"> 356</span></a><span class="sd">        </span>
</span><span id="L-357"><a href="#L-357"><span class="linenos"> 357</span></a><span class="sd">        Changes the gallery layout to display 24 images in a 6×4 grid,</span>
</span><span id="L-358"><a href="#L-358"><span class="linenos"> 358</span></a><span class="sd">        suitable for quick browsing of large image collections with</span>
</span><span id="L-359"><a href="#L-359"><span class="linenos"> 359</span></a><span class="sd">        smaller thumbnail sizes.</span>
</span><span id="L-360"><a href="#L-360"><span class="linenos"> 360</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-361"><a href="#L-361"><span class="linenos"> 361</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">shapeMode</span> <span class="o">!=</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_6x4</span><span class="p">:</span>
</span><span id="L-362"><a href="#L-362"><span class="linenos"> 362</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">resetGridLayoutWidgets</span><span class="p">()</span>
</span><span id="L-363"><a href="#L-363"><span class="linenos"> 363</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">pageNumber</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computePageNumberOnGalleryModeChange</span><span class="p">(</span><span class="n">GalleryMode</span><span class="o">.</span><span class="n">_6x4</span><span class="p">)</span>
</span><span id="L-364"><a href="#L-364"><span class="linenos"> 364</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">shapeMode</span> <span class="o">=</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_6x4</span>
</span><span id="L-365"><a href="#L-365"><span class="linenos"> 365</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">buildGridLayoutWidgets</span><span class="p">()</span>
</span><span id="L-366"><a href="#L-366"><span class="linenos"> 366</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">updateImages</span><span class="p">()</span>
</span><span id="L-367"><a href="#L-367"><span class="linenos"> 367</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">loadPage</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">pageNumber</span><span class="p">)</span>
</span><span id="L-368"><a href="#L-368"><span class="linenos"> 368</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">repaint</span><span class="p">()</span>
</span><span id="L-369"><a href="#L-369"><span class="linenos"> 369</span></a>
</span><span id="L-370"><a href="#L-370"><span class="linenos"> 370</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackButton_9x6</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-371"><a href="#L-371"><span class="linenos"> 371</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-372"><a href="#L-372"><span class="linenos"> 372</span></a><span class="sd">        Switch gallery to 9×6 grid view mode.</span>
</span><span id="L-373"><a href="#L-373"><span class="linenos"> 373</span></a><span class="sd">        </span>
</span><span id="L-374"><a href="#L-374"><span class="linenos"> 374</span></a><span class="sd">        Changes the gallery layout to display 54 images in a 9×6 grid,</span>
</span><span id="L-375"><a href="#L-375"><span class="linenos"> 375</span></a><span class="sd">        suitable for overview browsing of very large image collections</span>
</span><span id="L-376"><a href="#L-376"><span class="linenos"> 376</span></a><span class="sd">        with small thumbnail sizes.</span>
</span><span id="L-377"><a href="#L-377"><span class="linenos"> 377</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-378"><a href="#L-378"><span class="linenos"> 378</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">shapeMode</span> <span class="o">!=</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_9x6</span><span class="p">:</span>
</span><span id="L-379"><a href="#L-379"><span class="linenos"> 379</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">resetGridLayoutWidgets</span><span class="p">()</span>
</span><span id="L-380"><a href="#L-380"><span class="linenos"> 380</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">pageNumber</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computePageNumberOnGalleryModeChange</span><span class="p">(</span><span class="n">GalleryMode</span><span class="o">.</span><span class="n">_9x6</span><span class="p">)</span>
</span><span id="L-381"><a href="#L-381"><span class="linenos"> 381</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">shapeMode</span> <span class="o">=</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_9x6</span>
</span><span id="L-382"><a href="#L-382"><span class="linenos"> 382</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">buildGridLayoutWidgets</span><span class="p">()</span>
</span><span id="L-383"><a href="#L-383"><span class="linenos"> 383</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">updateImages</span><span class="p">()</span>
</span><span id="L-384"><a href="#L-384"><span class="linenos"> 384</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">loadPage</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">pageNumber</span><span class="p">)</span>
</span><span id="L-385"><a href="#L-385"><span class="linenos"> 385</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">repaint</span><span class="p">()</span>
</span><span id="L-386"><a href="#L-386"><span class="linenos"> 386</span></a>
</span><span id="L-387"><a href="#L-387"><span class="linenos"> 387</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackButton_2x1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-388"><a href="#L-388"><span class="linenos"> 388</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-389"><a href="#L-389"><span class="linenos"> 389</span></a><span class="sd">        Switch gallery to 2×1 comparison view mode.</span>
</span><span id="L-390"><a href="#L-390"><span class="linenos"> 390</span></a><span class="sd">        </span>
</span><span id="L-391"><a href="#L-391"><span class="linenos"> 391</span></a><span class="sd">        Changes the gallery layout to display 2 images side by side,</span>
</span><span id="L-392"><a href="#L-392"><span class="linenos"> 392</span></a><span class="sd">        ideal for comparing different processing results or comparing</span>
</span><span id="L-393"><a href="#L-393"><span class="linenos"> 393</span></a><span class="sd">        before/after versions of images.</span>
</span><span id="L-394"><a href="#L-394"><span class="linenos"> 394</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-395"><a href="#L-395"><span class="linenos"> 395</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">shapeMode</span> <span class="o">!=</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_2x1</span><span class="p">:</span>
</span><span id="L-396"><a href="#L-396"><span class="linenos"> 396</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">resetGridLayoutWidgets</span><span class="p">()</span>
</span><span id="L-397"><a href="#L-397"><span class="linenos"> 397</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">pageNumber</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computePageNumberOnGalleryModeChange</span><span class="p">(</span><span class="n">GalleryMode</span><span class="o">.</span><span class="n">_2x1</span><span class="p">)</span>
</span><span id="L-398"><a href="#L-398"><span class="linenos"> 398</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">shapeMode</span> <span class="o">=</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_2x1</span>
</span><span id="L-399"><a href="#L-399"><span class="linenos"> 399</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">buildGridLayoutWidgets</span><span class="p">()</span>
</span><span id="L-400"><a href="#L-400"><span class="linenos"> 400</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">updateImages</span><span class="p">()</span>
</span><span id="L-401"><a href="#L-401"><span class="linenos"> 401</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">loadPage</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">pageNumber</span><span class="p">)</span>
</span><span id="L-402"><a href="#L-402"><span class="linenos"> 402</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">repaint</span><span class="p">()</span>
</span><span id="L-403"><a href="#L-403"><span class="linenos"> 403</span></a>
</span><span id="L-404"><a href="#L-404"><span class="linenos"> 404</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">selectImage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
</span><span id="L-405"><a href="#L-405"><span class="linenos"> 405</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-406"><a href="#L-406"><span class="linenos"> 406</span></a><span class="sd">        Handle selection of an image in the gallery.</span>
</span><span id="L-407"><a href="#L-407"><span class="linenos"> 407</span></a><span class="sd">        </span>
</span><span id="L-408"><a href="#L-408"><span class="linenos"> 408</span></a><span class="sd">        Processes user selection of an image and updates the editing interface</span>
</span><span id="L-409"><a href="#L-409"><span class="linenos"> 409</span></a><span class="sd">        to work with the selected image&#39;s processing pipeline.</span>
</span><span id="L-410"><a href="#L-410"><span class="linenos"> 410</span></a><span class="sd">        </span>
</span><span id="L-411"><a href="#L-411"><span class="linenos"> 411</span></a><span class="sd">        Args:</span>
</span><span id="L-412"><a href="#L-412"><span class="linenos"> 412</span></a><span class="sd">            id (int): Index of the selected image within the current page</span>
</span><span id="L-413"><a href="#L-413"><span class="linenos"> 413</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-414"><a href="#L-414"><span class="linenos"> 414</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; ImageGalleryController.selectImage()&quot;</span><span class="p">)</span>
</span><span id="L-415"><a href="#L-415"><span class="linenos"> 415</span></a>
</span><span id="L-416"><a href="#L-416"><span class="linenos"> 416</span></a>        <span class="n">nbImagePage</span> <span class="o">=</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">nbRow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">shapeMode</span><span class="p">)</span><span class="o">*</span><span class="n">GalleryMode</span><span class="o">.</span><span class="n">nbCol</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">shapeMode</span><span class="p">)</span>
</span><span id="L-417"><a href="#L-417"><span class="linenos"> 417</span></a>        <span class="n">idxImage</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">pageNumber</span><span class="o">*</span><span class="n">nbImagePage</span><span class="o">+</span><span class="nb">id</span>
</span><span id="L-418"><a href="#L-418"><span class="linenos"> 418</span></a>        <span class="c1"># check id</span>
</span><span id="L-419"><a href="#L-419"><span class="linenos"> 419</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">idxImage</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">processPipes</span><span class="p">)):</span>
</span><span id="L-420"><a href="#L-420"><span class="linenos"> 420</span></a>            <span class="c1"># update selected image</span>
</span><span id="L-421"><a href="#L-421"><span class="linenos"> 421</span></a>            <span class="n">processPipe</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">processPipes</span><span class="p">[</span><span class="n">idxImage</span><span class="p">]</span>
</span><span id="L-422"><a href="#L-422"><span class="linenos"> 422</span></a>            <span class="k">if</span> <span class="n">processPipe</span><span class="p">:</span>
</span><span id="L-423"><a href="#L-423"><span class="linenos"> 423</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">dock</span><span class="o">.</span><span class="n">setProcessPipe</span><span class="p">(</span><span class="n">processPipe</span><span class="p">):</span>
</span><span id="L-424"><a href="#L-424"><span class="linenos"> 424</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setSelectedImage</span><span class="p">(</span><span class="n">idxImage</span><span class="p">)</span>
</span><span id="L-425"><a href="#L-425"><span class="linenos"> 425</span></a>
</span><span id="L-426"><a href="#L-426"><span class="linenos"> 426</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getSelectedProcessPipe</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-427"><a href="#L-427"><span class="linenos"> 427</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>  <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; ImageGalleryController.getSelectedProcessPipe()&quot;</span><span class="p">)</span>
</span><span id="L-428"><a href="#L-428"><span class="linenos"> 428</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getSelectedProcessPipe</span><span class="p">()</span>
</span><span id="L-429"><a href="#L-429"><span class="linenos"> 429</span></a>
</span><span id="L-430"><a href="#L-430"><span class="linenos"> 430</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setProcessPipeWidgetQPixmap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qPixmap</span><span class="p">):</span>
</span><span id="L-431"><a href="#L-431"><span class="linenos"> 431</span></a>        <span class="n">idxProcessPipe</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">selectedImage</span><span class="p">()</span>
</span><span id="L-432"><a href="#L-432"><span class="linenos"> 432</span></a>        <span class="n">nbImagePage</span> <span class="o">=</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">nbRow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">shapeMode</span><span class="p">)</span><span class="o">*</span><span class="n">GalleryMode</span><span class="o">.</span><span class="n">nbCol</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">shapeMode</span><span class="p">)</span>
</span><span id="L-433"><a href="#L-433"><span class="linenos"> 433</span></a>        <span class="n">idxImageWidget</span> <span class="o">=</span> <span class="n">idxProcessPipe</span><span class="o">%</span><span class="n">nbImagePage</span>
</span><span id="L-434"><a href="#L-434"><span class="linenos"> 434</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>  <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; &gt;&gt; ImageGalleryController.setProcessPipeWidgetQPixmap(...)[ image id:&quot;</span><span class="p">,</span><span class="n">idxProcessPipe</span><span class="p">,</span><span class="s2">&quot;&gt;&gt; image widget controller:&quot;</span><span class="p">,</span><span class="n">idxImageWidget</span><span class="p">,</span><span class="s2">&quot;]&quot;</span><span class="p">)</span>
</span><span id="L-435"><a href="#L-435"><span class="linenos"> 435</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">imagesControllers</span><span class="p">[</span><span class="n">idxImageWidget</span><span class="p">]</span><span class="o">.</span><span class="n">setQPixmap</span><span class="p">(</span><span class="n">qPixmap</span><span class="p">)</span>
</span><span id="L-436"><a href="#L-436"><span class="linenos"> 436</span></a>
</span><span id="L-437"><a href="#L-437"><span class="linenos"> 437</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-438"><a href="#L-438"><span class="linenos"> 438</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; ImageGalleryController.save()&quot;</span><span class="p">)</span>
</span><span id="L-439"><a href="#L-439"><span class="linenos"> 439</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span id="L-440"><a href="#L-440"><span class="linenos"> 440</span></a>
</span><span id="L-441"><a href="#L-441"><span class="linenos"> 441</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">currentPage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">currentPage</span><span class="p">()</span>
</span><span id="L-442"><a href="#L-442"><span class="linenos"> 442</span></a>
</span><span id="L-443"><a href="#L-443"><span class="linenos"> 443</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pageIdx</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-444"><a href="#L-444"><span class="linenos"> 444</span></a>        <span class="n">nb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentPage</span><span class="p">()</span>
</span><span id="L-445"><a href="#L-445"><span class="linenos"> 445</span></a>        <span class="n">nbImagePage</span> <span class="o">=</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">nbRow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">shapeMode</span><span class="p">)</span><span class="o">*</span><span class="n">GalleryMode</span><span class="o">.</span><span class="n">nbCol</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">shapeMode</span><span class="p">)</span>
</span><span id="L-446"><a href="#L-446"><span class="linenos"> 446</span></a>        <span class="k">return</span> <span class="p">(</span><span class="n">nb</span><span class="o">*</span><span class="n">nbImagePage</span><span class="p">),</span> <span class="p">((</span><span class="n">nb</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="n">nbImagePage</span><span class="p">)</span>
</span><span id="L-447"><a href="#L-447"><span class="linenos"> 447</span></a>
</span><span id="L-448"><a href="#L-448"><span class="linenos"> 448</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getFilenamesOfCurrentPage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getFilenamesOfCurrentPage</span><span class="p">()</span>
</span><span id="L-449"><a href="#L-449"><span class="linenos"> 449</span></a>
</span><span id="L-450"><a href="#L-450"><span class="linenos"> 450</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getProcessPipeById</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">i</span><span class="p">)</span> <span class="p">:</span> <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getProcessPipeById</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</span><span id="L-451"><a href="#L-451"><span class="linenos"> 451</span></a>
</span><span id="L-452"><a href="#L-452"><span class="linenos"> 452</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getProcessPipes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">processPipes</span>
</span><span id="L-453"><a href="#L-453"><span class="linenos"> 453</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-454"><a href="#L-454"><span class="linenos"> 454</span></a><span class="c1"># --- Class AppController -----------------------------------------------------</span>
</span><span id="L-455"><a href="#L-455"><span class="linenos"> 455</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-456"><a href="#L-456"><span class="linenos"> 456</span></a><span class="k">class</span><span class="w"> </span><span class="nc">AppController</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
</span><span id="L-457"><a href="#L-457"><span class="linenos"> 457</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-458"><a href="#L-458"><span class="linenos"> 458</span></a><span class="sd">    Main application controller implementing the MVC pattern.</span>
</span><span id="L-459"><a href="#L-459"><span class="linenos"> 459</span></a><span class="sd">    </span>
</span><span id="L-460"><a href="#L-460"><span class="linenos"> 460</span></a><span class="sd">    This class serves as the central controller for the uHDR application,</span>
</span><span id="L-461"><a href="#L-461"><span class="linenos"> 461</span></a><span class="sd">    managing the main window, coordinating between different components,</span>
</span><span id="L-462"><a href="#L-462"><span class="linenos"> 462</span></a><span class="sd">    and handling high-level application operations like file management,</span>
</span><span id="L-463"><a href="#L-463"><span class="linenos"> 463</span></a><span class="sd">    HDR display, and image export functionality.</span>
</span><span id="L-464"><a href="#L-464"><span class="linenos"> 464</span></a><span class="sd">    </span>
</span><span id="L-465"><a href="#L-465"><span class="linenos"> 465</span></a><span class="sd">    The AppController orchestrates interactions between the image gallery,</span>
</span><span id="L-466"><a href="#L-466"><span class="linenos"> 466</span></a><span class="sd">    editing interface, HDR viewer, and manages the application&#39;s workflow</span>
</span><span id="L-467"><a href="#L-467"><span class="linenos"> 467</span></a><span class="sd">    from image loading to final export operations.</span>
</span><span id="L-468"><a href="#L-468"><span class="linenos"> 468</span></a><span class="sd">    </span>
</span><span id="L-469"><a href="#L-469"><span class="linenos"> 469</span></a><span class="sd">    Attributes:</span>
</span><span id="L-470"><a href="#L-470"><span class="linenos"> 470</span></a><span class="sd">        - screenSize (list): Available screen dimensions for multi-monitor support</span>
</span><span id="L-471"><a href="#L-471"><span class="linenos"> 471</span></a><span class="sd">        - hdrDisplay (HDRviewerController): HDR image display controller</span>
</span><span id="L-472"><a href="#L-472"><span class="linenos"> 472</span></a><span class="sd">        - view (view.AppView): Main application view component</span>
</span><span id="L-473"><a href="#L-473"><span class="linenos"> 473</span></a><span class="sd">        - model (model.AppModel): Main application data model</span>
</span><span id="L-474"><a href="#L-474"><span class="linenos"> 474</span></a><span class="sd">        - dirName (str): Currently selected directory path</span>
</span><span id="L-475"><a href="#L-475"><span class="linenos"> 475</span></a><span class="sd">        - imagesName (list): List of image filenames in current directory</span>
</span><span id="L-476"><a href="#L-476"><span class="linenos"> 476</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-477"><a href="#L-477"><span class="linenos"> 477</span></a>
</span><span id="L-478"><a href="#L-478"><span class="linenos"> 478</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app</span><span class="p">):</span>
</span><span id="L-479"><a href="#L-479"><span class="linenos"> 479</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-480"><a href="#L-480"><span class="linenos"> 480</span></a><span class="sd">        Initialize the main application controller.</span>
</span><span id="L-481"><a href="#L-481"><span class="linenos"> 481</span></a><span class="sd">        </span>
</span><span id="L-482"><a href="#L-482"><span class="linenos"> 482</span></a><span class="sd">        Sets up the application&#39;s core components including screen detection,</span>
</span><span id="L-483"><a href="#L-483"><span class="linenos"> 483</span></a><span class="sd">        HDR display initialization, and main view creation. Establishes the</span>
</span><span id="L-484"><a href="#L-484"><span class="linenos"> 484</span></a><span class="sd">        foundation for the complete HDR editing workflow.</span>
</span><span id="L-485"><a href="#L-485"><span class="linenos"> 485</span></a><span class="sd">        </span>
</span><span id="L-486"><a href="#L-486"><span class="linenos"> 486</span></a><span class="sd">        Args:</span>
</span><span id="L-487"><a href="#L-487"><span class="linenos"> 487</span></a><span class="sd">            app (QApplication): PyQt5 application instance for screen detection</span>
</span><span id="L-488"><a href="#L-488"><span class="linenos"> 488</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-489"><a href="#L-489"><span class="linenos"> 489</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; AppController.__init__()&quot;</span><span class="p">)</span>
</span><span id="L-490"><a href="#L-490"><span class="linenos"> 490</span></a>
</span><span id="L-491"><a href="#L-491"><span class="linenos"> 491</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">screenSize</span> <span class="o">=</span> <span class="n">getScreenSize</span><span class="p">(</span><span class="n">app</span><span class="p">)</span><span class="c1"># get screens size</span>
</span><span id="L-492"><a href="#L-492"><span class="linenos"> 492</span></a>
</span><span id="L-493"><a href="#L-493"><span class="linenos"> 493</span></a>        <span class="c1"># attributes</span>
</span><span id="L-494"><a href="#L-494"><span class="linenos"> 494</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">hdrDisplay</span> <span class="o">=</span> <span class="n">HDRviewerController</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="L-495"><a href="#L-495"><span class="linenos"> 495</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span>  <span class="n">view</span><span class="o">.</span><span class="n">AppView</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">HDRcontroller</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hdrDisplay</span><span class="p">)</span>                         
</span><span id="L-496"><a href="#L-496"><span class="linenos"> 496</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">AppModel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="L-497"><a href="#L-497"><span class="linenos"> 497</span></a>
</span><span id="L-498"><a href="#L-498"><span class="linenos"> 498</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">dirName</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-499"><a href="#L-499"><span class="linenos"> 499</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">imagesName</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-500"><a href="#L-500"><span class="linenos"> 500</span></a>        
</span><span id="L-501"><a href="#L-501"><span class="linenos"> 501</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span><span id="L-502"><a href="#L-502"><span class="linenos"> 502</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-503"><a href="#L-503"><span class="linenos"> 503</span></a>
</span><span id="L-504"><a href="#L-504"><span class="linenos"> 504</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackSelectDir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-505"><a href="#L-505"><span class="linenos"> 505</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-506"><a href="#L-506"><span class="linenos"> 506</span></a><span class="sd">        Open directory selection dialog and load HDR images.</span>
</span><span id="L-507"><a href="#L-507"><span class="linenos"> 507</span></a><span class="sd">        </span>
</span><span id="L-508"><a href="#L-508"><span class="linenos"> 508</span></a><span class="sd">        Presents a file dialog for directory selection, discovers all supported</span>
</span><span id="L-509"><a href="#L-509"><span class="linenos"> 509</span></a><span class="sd">        image files in the chosen directory, and loads them into the gallery.</span>
</span><span id="L-510"><a href="#L-510"><span class="linenos"> 510</span></a><span class="sd">        Automatically saves any pending metadata before switching directories.</span>
</span><span id="L-511"><a href="#L-511"><span class="linenos"> 511</span></a><span class="sd">        </span>
</span><span id="L-512"><a href="#L-512"><span class="linenos"> 512</span></a><span class="sd">        The method handles the complete workflow of:</span>
</span><span id="L-513"><a href="#L-513"><span class="linenos"> 513</span></a><span class="sd">        1. Directory selection via QFileDialog</span>
</span><span id="L-514"><a href="#L-514"><span class="linenos"> 514</span></a><span class="sd">        2. Saving current image metadata</span>
</span><span id="L-515"><a href="#L-515"><span class="linenos"> 515</span></a><span class="sd">        3. Discovering supported image formats</span>
</span><span id="L-516"><a href="#L-516"><span class="linenos"> 516</span></a><span class="sd">        4. Loading images into the gallery view</span>
</span><span id="L-517"><a href="#L-517"><span class="linenos"> 517</span></a><span class="sd">        5. Resetting HDR display to splash screen</span>
</span><span id="L-518"><a href="#L-518"><span class="linenos"> 518</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-519"><a href="#L-519"><span class="linenos"> 519</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; AppController.callBackSelectDir()&quot;</span><span class="p">)</span>
</span><span id="L-520"><a href="#L-520"><span class="linenos"> 520</span></a>        <span class="n">dirName</span> <span class="o">=</span> <span class="n">QFileDialog</span><span class="o">.</span><span class="n">getExistingDirectory</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Select Directory&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">directory</span><span class="p">)</span>
</span><span id="L-521"><a href="#L-521"><span class="linenos"> 521</span></a>        <span class="k">if</span> <span class="n">dirName</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
</span><span id="L-522"><a href="#L-522"><span class="linenos"> 522</span></a>            <span class="c1"># save current images (metadata)</span>
</span><span id="L-523"><a href="#L-523"><span class="linenos"> 523</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">imageGalleryController</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span id="L-524"><a href="#L-524"><span class="linenos"> 524</span></a>            <span class="c1"># get images in the selected directory</span>
</span><span id="L-525"><a href="#L-525"><span class="linenos"> 525</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">imagesName</span> <span class="o">=</span> <span class="p">[];</span> <span class="bp">self</span><span class="o">.</span><span class="n">imagesName</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setDirectory</span><span class="p">(</span><span class="n">dirName</span><span class="p">))</span>
</span><span id="L-526"><a href="#L-526"><span class="linenos"> 526</span></a>
</span><span id="L-527"><a href="#L-527"><span class="linenos"> 527</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">imageGalleryController</span><span class="o">.</span><span class="n">setImages</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">imagesName</span><span class="p">)</span>
</span><span id="L-528"><a href="#L-528"><span class="linenos"> 528</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">hdrDisplay</span><span class="o">.</span><span class="n">displaySplash</span><span class="p">()</span>
</span><span id="L-529"><a href="#L-529"><span class="linenos"> 529</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-530"><a href="#L-530"><span class="linenos"> 530</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackSave</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
</span><span id="L-531"><a href="#L-531"><span class="linenos"> 531</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-532"><a href="#L-532"><span class="linenos"> 532</span></a><span class="sd">        Save current processing state and metadata.</span>
</span><span id="L-533"><a href="#L-533"><span class="linenos"> 533</span></a><span class="sd">        </span>
</span><span id="L-534"><a href="#L-534"><span class="linenos"> 534</span></a><span class="sd">        Triggers the gallery controller to save all current image metadata</span>
</span><span id="L-535"><a href="#L-535"><span class="linenos"> 535</span></a><span class="sd">        and processing pipeline states to persistent storage.</span>
</span><span id="L-536"><a href="#L-536"><span class="linenos"> 536</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-537"><a href="#L-537"><span class="linenos"> 537</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">imageGalleryController</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span id="L-538"><a href="#L-538"><span class="linenos"> 538</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-539"><a href="#L-539"><span class="linenos"> 539</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackQuit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-540"><a href="#L-540"><span class="linenos"> 540</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-541"><a href="#L-541"><span class="linenos"> 541</span></a><span class="sd">        Handle application shutdown with proper cleanup.</span>
</span><span id="L-542"><a href="#L-542"><span class="linenos"> 542</span></a><span class="sd">        </span>
</span><span id="L-543"><a href="#L-543"><span class="linenos"> 543</span></a><span class="sd">        Performs clean application exit by saving all metadata, closing</span>
</span><span id="L-544"><a href="#L-544"><span class="linenos"> 544</span></a><span class="sd">        HDR display processes, and terminating the application gracefully.</span>
</span><span id="L-545"><a href="#L-545"><span class="linenos"> 545</span></a><span class="sd">        Ensures no data loss during application closure.</span>
</span><span id="L-546"><a href="#L-546"><span class="linenos"> 546</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-547"><a href="#L-547"><span class="linenos"> 547</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CB] &gt;&gt; AppController.callBackQuit()&quot;</span><span class="p">)</span>
</span><span id="L-548"><a href="#L-548"><span class="linenos"> 548</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">imageGalleryController</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span id="L-549"><a href="#L-549"><span class="linenos"> 549</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">hdrDisplay</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="L-550"><a href="#L-550"><span class="linenos"> 550</span></a>        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
</span><span id="L-551"><a href="#L-551"><span class="linenos"> 551</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-552"><a href="#L-552"><span class="linenos"> 552</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackDisplayHDR</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-553"><a href="#L-553"><span class="linenos"> 553</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-554"><a href="#L-554"><span class="linenos"> 554</span></a><span class="sd">        Display processed HDR image on external HDR monitor.</span>
</span><span id="L-555"><a href="#L-555"><span class="linenos"> 555</span></a><span class="sd">        </span>
</span><span id="L-556"><a href="#L-556"><span class="linenos"> 556</span></a><span class="sd">        Initiates the HDR display workflow by processing the currently selected</span>
</span><span id="L-557"><a href="#L-557"><span class="linenos"> 557</span></a><span class="sd">        image at full resolution with the complete processing pipeline, then</span>
</span><span id="L-558"><a href="#L-558"><span class="linenos"> 558</span></a><span class="sd">        sends the result to the external HDR display. Shows progress feedback</span>
</span><span id="L-559"><a href="#L-559"><span class="linenos"> 559</span></a><span class="sd">        during the compute-intensive full-resolution processing.</span>
</span><span id="L-560"><a href="#L-560"><span class="linenos"> 560</span></a><span class="sd">        </span>
</span><span id="L-561"><a href="#L-561"><span class="linenos"> 561</span></a><span class="sd">        The workflow includes:</span>
</span><span id="L-562"><a href="#L-562"><span class="linenos"> 562</span></a><span class="sd">        1. Retrieving selected processing pipeline</span>
</span><span id="L-563"><a href="#L-563"><span class="linenos"> 563</span></a><span class="sd">        2. Saving processing metadata</span>
</span><span id="L-564"><a href="#L-564"><span class="linenos"> 564</span></a><span class="sd">        3. Loading full-resolution source image</span>
</span><span id="L-565"><a href="#L-565"><span class="linenos"> 565</span></a><span class="sd">        4. Resizing to display resolution</span>
</span><span id="L-566"><a href="#L-566"><span class="linenos"> 566</span></a><span class="sd">        5. Applying complete processing pipeline</span>
</span><span id="L-567"><a href="#L-567"><span class="linenos"> 567</span></a><span class="sd">        6. Threading the computation with progress updates</span>
</span><span id="L-568"><a href="#L-568"><span class="linenos"> 568</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-569"><a href="#L-569"><span class="linenos"> 569</span></a>
</span><span id="L-570"><a href="#L-570"><span class="linenos"> 570</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>  <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; AppController.callBackDisplayHDR()&quot;</span><span class="p">)</span>
</span><span id="L-571"><a href="#L-571"><span class="linenos"> 571</span></a>
</span><span id="L-572"><a href="#L-572"><span class="linenos"> 572</span></a>        <span class="n">selectedProcessPipe</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">imageGalleryController</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getSelectedProcessPipe</span><span class="p">()</span>
</span><span id="L-573"><a href="#L-573"><span class="linenos"> 573</span></a>
</span><span id="L-574"><a href="#L-574"><span class="linenos"> 574</span></a>        <span class="k">if</span> <span class="n">selectedProcessPipe</span><span class="p">:</span>
</span><span id="L-575"><a href="#L-575"><span class="linenos"> 575</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">statusBar</span><span class="p">()</span><span class="o">.</span><span class="n">showMessage</span><span class="p">(</span><span class="s1">&#39;displaying HDR image, full size image computation: start, please wait !&#39;</span><span class="p">)</span>
</span><span id="L-576"><a href="#L-576"><span class="linenos"> 576</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">statusBar</span><span class="p">()</span><span class="o">.</span><span class="n">repaint</span><span class="p">()</span>
</span><span id="L-577"><a href="#L-577"><span class="linenos"> 577</span></a>            <span class="c1"># save current processpipe metada</span>
</span><span id="L-578"><a href="#L-578"><span class="linenos"> 578</span></a>            <span class="n">originalImage</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">selectedProcessPipe</span><span class="o">.</span><span class="n">originalImage</span><span class="p">)</span>
</span><span id="L-579"><a href="#L-579"><span class="linenos"> 579</span></a>            <span class="n">originalImage</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;processpipe&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">selectedProcessPipe</span><span class="o">.</span><span class="n">toDict</span><span class="p">()</span>
</span><span id="L-580"><a href="#L-580"><span class="linenos"> 580</span></a>            <span class="n">originalImage</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span id="L-581"><a href="#L-581"><span class="linenos"> 581</span></a>
</span><span id="L-582"><a href="#L-582"><span class="linenos"> 582</span></a>            <span class="c1"># load full size image</span>
</span><span id="L-583"><a href="#L-583"><span class="linenos"> 583</span></a>            <span class="n">img</span> <span class="o">=</span> <span class="n">hdrCore</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">originalImage</span><span class="o">.</span><span class="n">path</span><span class="o">+</span><span class="s1">&#39;/&#39;</span><span class="o">+</span><span class="n">originalImage</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="L-584"><a href="#L-584"><span class="linenos"> 584</span></a>
</span><span id="L-585"><a href="#L-585"><span class="linenos"> 585</span></a>            <span class="c1"># turn off: autoResize</span>
</span><span id="L-586"><a href="#L-586"><span class="linenos"> 586</span></a>            <span class="n">hdrCore</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">ProcessPipe</span><span class="o">.</span><span class="n">autoResize</span> <span class="o">=</span> <span class="kc">False</span> 
</span><span id="L-587"><a href="#L-587"><span class="linenos"> 587</span></a>            <span class="c1"># make a copy of selectedProcessPipe  </span>
</span><span id="L-588"><a href="#L-588"><span class="linenos"> 588</span></a>            <span class="n">processpipe</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">selectedProcessPipe</span><span class="p">)</span>
</span><span id="L-589"><a href="#L-589"><span class="linenos"> 589</span></a>
</span><span id="L-590"><a href="#L-590"><span class="linenos"> 590</span></a>            <span class="c1"># set size to display size</span>
</span><span id="L-591"><a href="#L-591"><span class="linenos"> 591</span></a>            <span class="n">size</span> <span class="o">=</span> <span class="n">pref</span><span class="o">.</span><span class="n">getDisplayShape</span><span class="p">()</span>
</span><span id="L-592"><a href="#L-592"><span class="linenos"> 592</span></a>            <span class="n">img</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">hdrCore</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">resize</span><span class="p">(),</span><span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="L-593"><a href="#L-593"><span class="linenos"> 593</span></a>
</span><span id="L-594"><a href="#L-594"><span class="linenos"> 594</span></a>            <span class="c1"># set image to process-pipe</span>
</span><span id="L-595"><a href="#L-595"><span class="linenos"> 595</span></a>            <span class="n">processpipe</span><span class="o">.</span><span class="n">setImage</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
</span><span id="L-596"><a href="#L-596"><span class="linenos"> 596</span></a>
</span><span id="L-597"><a href="#L-597"><span class="linenos"> 597</span></a>            <span class="n">thread</span><span class="o">.</span><span class="n">cCompute</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">callBackEndDisplay</span><span class="p">,</span> <span class="n">processpipe</span><span class="p">,</span> <span class="n">toneMap</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">progress</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">statusBar</span><span class="p">()</span><span class="o">.</span><span class="n">showMessage</span><span class="p">)</span>
</span><span id="L-598"><a href="#L-598"><span class="linenos"> 598</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-599"><a href="#L-599"><span class="linenos"> 599</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackEndDisplay</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">):</span>
</span><span id="L-600"><a href="#L-600"><span class="linenos"> 600</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-601"><a href="#L-601"><span class="linenos"> 601</span></a><span class="sd">        Complete HDR display processing and send to external monitor.</span>
</span><span id="L-602"><a href="#L-602"><span class="linenos"> 602</span></a><span class="sd">        </span>
</span><span id="L-603"><a href="#L-603"><span class="linenos"> 603</span></a><span class="sd">        Finalizes the HDR display workflow by applying final processing steps</span>
</span><span id="L-604"><a href="#L-604"><span class="linenos"> 604</span></a><span class="sd">        and sending the image to the external HDR display. Updates the status</span>
</span><span id="L-605"><a href="#L-605"><span class="linenos"> 605</span></a><span class="sd">        bar to indicate completion.</span>
</span><span id="L-606"><a href="#L-606"><span class="linenos"> 606</span></a><span class="sd">        </span>
</span><span id="L-607"><a href="#L-607"><span class="linenos"> 607</span></a><span class="sd">        Args:</span>
</span><span id="L-608"><a href="#L-608"><span class="linenos"> 608</span></a><span class="sd">            img (hdrCore.image.Image): Processed HDR image ready for display</span>
</span><span id="L-609"><a href="#L-609"><span class="linenos"> 609</span></a><span class="sd">            </span>
</span><span id="L-610"><a href="#L-610"><span class="linenos"> 610</span></a><span class="sd">        Note:</span>
</span><span id="L-611"><a href="#L-611"><span class="linenos"> 611</span></a><span class="sd">            Re-enables auto-resizing after full-resolution processing and</span>
</span><span id="L-612"><a href="#L-612"><span class="linenos"> 612</span></a><span class="sd">            applies display-specific scaling before HDR monitor output.</span>
</span><span id="L-613"><a href="#L-613"><span class="linenos"> 613</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-614"><a href="#L-614"><span class="linenos"> 614</span></a>
</span><span id="L-615"><a href="#L-615"><span class="linenos"> 615</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>  <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; AppController.callBackEndDisplay()&quot;</span><span class="p">)</span>
</span><span id="L-616"><a href="#L-616"><span class="linenos"> 616</span></a>
</span><span id="L-617"><a href="#L-617"><span class="linenos"> 617</span></a>        <span class="c1"># turn off: autoResize</span>
</span><span id="L-618"><a href="#L-618"><span class="linenos"> 618</span></a>        <span class="n">hdrCore</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">ProcessPipe</span><span class="o">.</span><span class="n">autoResize</span> <span class="o">=</span> <span class="kc">True</span>  
</span><span id="L-619"><a href="#L-619"><span class="linenos"> 619</span></a>        
</span><span id="L-620"><a href="#L-620"><span class="linenos"> 620</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">statusBar</span><span class="p">()</span><span class="o">.</span><span class="n">showMessage</span><span class="p">(</span><span class="s1">&#39;displaying HDR image, full size image computation: done !&#39;</span><span class="p">)</span>
</span><span id="L-621"><a href="#L-621"><span class="linenos"> 621</span></a>
</span><span id="L-622"><a href="#L-622"><span class="linenos"> 622</span></a>        <span class="c1"># clip, scale</span>
</span><span id="L-623"><a href="#L-623"><span class="linenos"> 623</span></a>        <span class="n">img</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">hdrCore</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">clip</span><span class="p">())</span>
</span><span id="L-624"><a href="#L-624"><span class="linenos"> 624</span></a>        <span class="n">img</span><span class="o">.</span><span class="n">colorData</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">colorData</span><span class="o">*</span><span class="n">pref</span><span class="o">.</span><span class="n">getDisplayScaling</span><span class="p">()</span>
</span><span id="L-625"><a href="#L-625"><span class="linenos"> 625</span></a>
</span><span id="L-626"><a href="#L-626"><span class="linenos"> 626</span></a>        <span class="n">colour</span><span class="o">.</span><span class="n">write_image</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">colorData</span><span class="p">,</span><span class="s2">&quot;temp.hdr&quot;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;Imageio&#39;</span><span class="p">)</span> <span class="c1"># local copy for display</span>
</span><span id="L-627"><a href="#L-627"><span class="linenos"> 627</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">hdrDisplay</span><span class="o">.</span><span class="n">displayFile</span><span class="p">(</span><span class="s2">&quot;temp.hdr&quot;</span><span class="p">)</span>
</span><span id="L-628"><a href="#L-628"><span class="linenos"> 628</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-629"><a href="#L-629"><span class="linenos"> 629</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackCloseDisplayHDR</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-630"><a href="#L-630"><span class="linenos"> 630</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-631"><a href="#L-631"><span class="linenos"> 631</span></a><span class="sd">        Close HDR display and return to splash screen.</span>
</span><span id="L-632"><a href="#L-632"><span class="linenos"> 632</span></a><span class="sd">        </span>
</span><span id="L-633"><a href="#L-633"><span class="linenos"> 633</span></a><span class="sd">        Terminates the current HDR display session and returns the external</span>
</span><span id="L-634"><a href="#L-634"><span class="linenos"> 634</span></a><span class="sd">        HDR monitor to the default splash screen state.</span>
</span><span id="L-635"><a href="#L-635"><span class="linenos"> 635</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-636"><a href="#L-636"><span class="linenos"> 636</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; AppController.callBackCloseDisplayHDR()&quot;</span><span class="p">)</span>
</span><span id="L-637"><a href="#L-637"><span class="linenos"> 637</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">hdrDisplay</span><span class="o">.</span><span class="n">displaySplash</span><span class="p">()</span>
</span><span id="L-638"><a href="#L-638"><span class="linenos"> 638</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-639"><a href="#L-639"><span class="linenos"> 639</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackCompareRawEditedHDR</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-640"><a href="#L-640"><span class="linenos"> 640</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-641"><a href="#L-641"><span class="linenos"> 641</span></a><span class="sd">        Display side-by-side comparison of original and edited HDR images.</span>
</span><span id="L-642"><a href="#L-642"><span class="linenos"> 642</span></a><span class="sd">        </span>
</span><span id="L-643"><a href="#L-643"><span class="linenos"> 643</span></a><span class="sd">        Creates a comparison view showing the original unprocessed image</span>
</span><span id="L-644"><a href="#L-644"><span class="linenos"> 644</span></a><span class="sd">        alongside the current edited version. Both images are displayed</span>
</span><span id="L-645"><a href="#L-645"><span class="linenos"> 645</span></a><span class="sd">        at the same scale on the HDR monitor for direct visual comparison.</span>
</span><span id="L-646"><a href="#L-646"><span class="linenos"> 646</span></a><span class="sd">        </span>
</span><span id="L-647"><a href="#L-647"><span class="linenos"> 647</span></a><span class="sd">        The comparison workflow:</span>
</span><span id="L-648"><a href="#L-648"><span class="linenos"> 648</span></a><span class="sd">        1. Loads original unprocessed image</span>
</span><span id="L-649"><a href="#L-649"><span class="linenos"> 649</span></a><span class="sd">        2. Applies current processing pipeline</span>
</span><span id="L-650"><a href="#L-650"><span class="linenos"> 650</span></a><span class="sd">        3. Resizes both images to fit side-by-side</span>
</span><span id="L-651"><a href="#L-651"><span class="linenos"> 651</span></a><span class="sd">        4. Creates composite comparison image</span>
</span><span id="L-652"><a href="#L-652"><span class="linenos"> 652</span></a><span class="sd">        5. Displays on HDR monitor with proper scaling</span>
</span><span id="L-653"><a href="#L-653"><span class="linenos"> 653</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-654"><a href="#L-654"><span class="linenos"> 654</span></a>
</span><span id="L-655"><a href="#L-655"><span class="linenos"> 655</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>  <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; AppController.callBackCompareOriginalInputHDR()&quot;</span><span class="p">)</span>
</span><span id="L-656"><a href="#L-656"><span class="linenos"> 656</span></a>
</span><span id="L-657"><a href="#L-657"><span class="linenos"> 657</span></a>        <span class="c1"># process real size image</span>
</span><span id="L-658"><a href="#L-658"><span class="linenos"> 658</span></a>        <span class="c1"># get selected process pipe</span>
</span><span id="L-659"><a href="#L-659"><span class="linenos"> 659</span></a>        <span class="n">selectedProcessPipe</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">imageGalleryController</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getSelectedProcessPipe</span><span class="p">()</span>
</span><span id="L-660"><a href="#L-660"><span class="linenos"> 660</span></a>
</span><span id="L-661"><a href="#L-661"><span class="linenos"> 661</span></a>        <span class="k">if</span> <span class="n">selectedProcessPipe</span><span class="p">:</span>         <span class="c1"># check if a process pipe is selected</span>
</span><span id="L-662"><a href="#L-662"><span class="linenos"> 662</span></a>
</span><span id="L-663"><a href="#L-663"><span class="linenos"> 663</span></a>            <span class="c1"># read original image</span>
</span><span id="L-664"><a href="#L-664"><span class="linenos"> 664</span></a>            <span class="n">img</span> <span class="o">=</span> <span class="n">hdrCore</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">selectedProcessPipe</span><span class="o">.</span><span class="n">originalImage</span><span class="o">.</span><span class="n">path</span><span class="o">+</span><span class="s1">&#39;/&#39;</span><span class="o">+</span><span class="n">selectedProcessPipe</span><span class="o">.</span><span class="n">originalImage</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="L-665"><a href="#L-665"><span class="linenos"> 665</span></a>
</span><span id="L-666"><a href="#L-666"><span class="linenos"> 666</span></a>            <span class="c1"># resize</span>
</span><span id="L-667"><a href="#L-667"><span class="linenos"> 667</span></a>            <span class="n">screenY</span><span class="p">,</span> <span class="n">screenX</span> <span class="o">=</span> <span class="n">pref</span><span class="o">.</span><span class="n">getDisplayShape</span><span class="p">()</span>
</span><span id="L-668"><a href="#L-668"><span class="linenos"> 668</span></a>
</span><span id="L-669"><a href="#L-669"><span class="linenos"> 669</span></a>            <span class="n">imgY</span><span class="p">,</span> <span class="n">imgX</span><span class="p">,</span><span class="n">_</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">shape</span>
</span><span id="L-670"><a href="#L-670"><span class="linenos"> 670</span></a>
</span><span id="L-671"><a href="#L-671"><span class="linenos"> 671</span></a>            <span class="n">marginY</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">screenY</span> <span class="o">-</span> <span class="n">imgY</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
</span><span id="L-672"><a href="#L-672"><span class="linenos"> 672</span></a>            <span class="n">marginX</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">marginY</span><span class="o">/</span><span class="mi">4</span><span class="p">)</span>
</span><span id="L-673"><a href="#L-673"><span class="linenos"> 673</span></a>            <span class="n">imgXp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">screenX</span> <span class="o">-</span> <span class="mi">3</span><span class="o">*</span><span class="n">marginX</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
</span><span id="L-674"><a href="#L-674"><span class="linenos"> 674</span></a>            <span class="n">img</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">hdrCore</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">resize</span><span class="p">(),</span><span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span><span class="n">imgXp</span><span class="p">))</span>
</span><span id="L-675"><a href="#L-675"><span class="linenos"> 675</span></a>            <span class="n">imgY</span><span class="p">,</span> <span class="n">imgX</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">shape</span>
</span><span id="L-676"><a href="#L-676"><span class="linenos"> 676</span></a>
</span><span id="L-677"><a href="#L-677"><span class="linenos"> 677</span></a>            <span class="c1"># original image after resize</span>
</span><span id="L-678"><a href="#L-678"><span class="linenos"> 678</span></a>            <span class="n">ori</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
</span><span id="L-679"><a href="#L-679"><span class="linenos"> 679</span></a>
</span><span id="L-680"><a href="#L-680"><span class="linenos"> 680</span></a>            <span class="c1"># build process pipe from selected one them compute</span>
</span><span id="L-681"><a href="#L-681"><span class="linenos"> 681</span></a>            <span class="n">pp</span> <span class="o">=</span> <span class="n">hdrCore</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">ProcessPipe</span><span class="p">()</span>
</span><span id="L-682"><a href="#L-682"><span class="linenos"> 682</span></a>            <span class="n">hdrCore</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">ProcessPipe</span><span class="o">.</span><span class="n">autoResize</span> <span class="o">=</span> <span class="kc">False</span>   <span class="c1"># stop autoResize</span>
</span><span id="L-683"><a href="#L-683"><span class="linenos"> 683</span></a>            <span class="n">params</span><span class="o">=</span> <span class="p">[]</span>
</span><span id="L-684"><a href="#L-684"><span class="linenos"> 684</span></a>            <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">selectedProcessPipe</span><span class="o">.</span><span class="n">processNodes</span><span class="p">:</span> 
</span><span id="L-685"><a href="#L-685"><span class="linenos"> 685</span></a>                <span class="n">pp</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">process</span><span class="p">),</span><span class="n">paramDict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>
</span><span id="L-686"><a href="#L-686"><span class="linenos"> 686</span></a>                <span class="n">params</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="n">p</span><span class="o">.</span><span class="n">name</span><span class="p">:</span><span class="n">p</span><span class="o">.</span><span class="n">params</span><span class="p">})</span>
</span><span id="L-687"><a href="#L-687"><span class="linenos"> 687</span></a>            <span class="n">img</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;processpipe&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">params</span>
</span><span id="L-688"><a href="#L-688"><span class="linenos"> 688</span></a>            <span class="n">pp</span><span class="o">.</span><span class="n">setImage</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
</span><span id="L-689"><a href="#L-689"><span class="linenos"> 689</span></a>
</span><span id="L-690"><a href="#L-690"><span class="linenos"> 690</span></a>            <span class="n">res</span> <span class="o">=</span> <span class="n">hdrCore</span><span class="o">.</span><span class="n">coreC</span><span class="o">.</span><span class="n">coreCcompute</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">pp</span><span class="p">)</span>
</span><span id="L-691"><a href="#L-691"><span class="linenos"> 691</span></a>            <span class="n">res</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">hdrCore</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">clip</span><span class="p">())</span>
</span><span id="L-692"><a href="#L-692"><span class="linenos"> 692</span></a>            
</span><span id="L-693"><a href="#L-693"><span class="linenos"> 693</span></a>            <span class="n">imgYres</span><span class="p">,</span> <span class="n">imgXres</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">colorData</span><span class="o">.</span><span class="n">shape</span>
</span><span id="L-694"><a href="#L-694"><span class="linenos"> 694</span></a>
</span><span id="L-695"><a href="#L-695"><span class="linenos"> 695</span></a>            <span class="n">hdrCore</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">ProcessPipe</span><span class="o">.</span><span class="n">autoResize</span> <span class="o">=</span> <span class="kc">True</span>    <span class="c1"># return to autoResize</span>
</span><span id="L-696"><a href="#L-696"><span class="linenos"> 696</span></a>
</span><span id="L-697"><a href="#L-697"><span class="linenos"> 697</span></a>            <span class="c1"># make comparison image</span>
</span><span id="L-698"><a href="#L-698"><span class="linenos"> 698</span></a>            <span class="n">oriColorData</span> <span class="o">=</span> <span class="n">ori</span><span class="o">.</span><span class="n">colorData</span><span class="o">*</span><span class="n">pref</span><span class="o">.</span><span class="n">getDisplayScaling</span><span class="p">()</span>
</span><span id="L-699"><a href="#L-699"><span class="linenos"> 699</span></a>            <span class="n">resColorData</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">colorData</span><span class="o">*</span><span class="n">pref</span><span class="o">.</span><span class="n">getDisplayScaling</span><span class="p">()</span>
</span><span id="L-700"><a href="#L-700"><span class="linenos"> 700</span></a>            <span class="n">display</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="n">screenY</span><span class="p">,</span><span class="n">screenX</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span><span class="o">*</span><span class="mf">0.2</span>
</span><span id="L-701"><a href="#L-701"><span class="linenos"> 701</span></a>            <span class="n">marginY</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">screenY</span> <span class="o">-</span> <span class="n">imgY</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
</span><span id="L-702"><a href="#L-702"><span class="linenos"> 702</span></a>            <span class="n">marginYres</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">screenY</span> <span class="o">-</span> <span class="n">imgYres</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
</span><span id="L-703"><a href="#L-703"><span class="linenos"> 703</span></a>
</span><span id="L-704"><a href="#L-704"><span class="linenos"> 704</span></a>            <span class="n">display</span><span class="p">[</span><span class="n">marginY</span><span class="p">:</span><span class="n">marginY</span><span class="o">+</span><span class="n">imgY</span><span class="p">,</span> <span class="n">marginX</span><span class="p">:</span><span class="n">marginX</span><span class="o">+</span><span class="n">imgX</span><span class="p">,:]</span> <span class="o">=</span> <span class="n">oriColorData</span>
</span><span id="L-705"><a href="#L-705"><span class="linenos"> 705</span></a>            <span class="n">display</span><span class="p">[</span><span class="n">marginYres</span><span class="p">:</span><span class="n">marginYres</span><span class="o">+</span><span class="n">imgYres</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="n">marginX</span><span class="o">+</span><span class="n">imgX</span><span class="p">:</span><span class="mi">2</span><span class="o">*</span><span class="n">marginX</span><span class="o">+</span><span class="n">imgX</span><span class="o">+</span><span class="n">imgXres</span><span class="p">,:]</span> <span class="o">=</span> <span class="n">resColorData</span>
</span><span id="L-706"><a href="#L-706"><span class="linenos"> 706</span></a>            
</span><span id="L-707"><a href="#L-707"><span class="linenos"> 707</span></a>            <span class="c1"># save as compOrigFinal.hdr</span>
</span><span id="L-708"><a href="#L-708"><span class="linenos"> 708</span></a>            <span class="n">colour</span><span class="o">.</span><span class="n">write_image</span><span class="p">(</span><span class="n">display</span><span class="p">,</span><span class="s1">&#39;compOrigFinal.hdr&#39;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;Imageio&#39;</span><span class="p">)</span>
</span><span id="L-709"><a href="#L-709"><span class="linenos"> 709</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">hdrDisplay</span><span class="o">.</span><span class="n">displayFile</span><span class="p">(</span><span class="s1">&#39;compOrigFinal.hdr&#39;</span><span class="p">)</span>
</span><span id="L-710"><a href="#L-710"><span class="linenos"> 710</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-711"><a href="#L-711"><span class="linenos"> 711</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackExportHDR</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-712"><a href="#L-712"><span class="linenos"> 712</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-713"><a href="#L-713"><span class="linenos"> 713</span></a><span class="sd">        Export single HDR image with current processing applied.</span>
</span><span id="L-714"><a href="#L-714"><span class="linenos"> 714</span></a><span class="sd">        </span>
</span><span id="L-715"><a href="#L-715"><span class="linenos"> 715</span></a><span class="sd">        Initiates the HDR export workflow for the currently selected image,</span>
</span><span id="L-716"><a href="#L-716"><span class="linenos"> 716</span></a><span class="sd">        allowing the user to choose the export destination and applying</span>
</span><span id="L-717"><a href="#L-717"><span class="linenos"> 717</span></a><span class="sd">        the complete processing pipeline at full resolution.</span>
</span><span id="L-718"><a href="#L-718"><span class="linenos"> 718</span></a><span class="sd">        </span>
</span><span id="L-719"><a href="#L-719"><span class="linenos"> 719</span></a><span class="sd">        The export process includes:</span>
</span><span id="L-720"><a href="#L-720"><span class="linenos"> 720</span></a><span class="sd">        1. User directory selection for output</span>
</span><span id="L-721"><a href="#L-721"><span class="linenos"> 721</span></a><span class="sd">        2. Full-resolution image loading</span>
</span><span id="L-722"><a href="#L-722"><span class="linenos"> 722</span></a><span class="sd">        3. Complete processing pipeline application</span>
</span><span id="L-723"><a href="#L-723"><span class="linenos"> 723</span></a><span class="sd">        4. HDR-specific encoding and scaling</span>
</span><span id="L-724"><a href="#L-724"><span class="linenos"> 724</span></a><span class="sd">        5. File output with appropriate metadata</span>
</span><span id="L-725"><a href="#L-725"><span class="linenos"> 725</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-726"><a href="#L-726"><span class="linenos"> 726</span></a>
</span><span id="L-727"><a href="#L-727"><span class="linenos"> 727</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>  <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; AppController.callBackExportHDR()&quot;</span><span class="p">)</span> 
</span><span id="L-728"><a href="#L-728"><span class="linenos"> 728</span></a>
</span><span id="L-729"><a href="#L-729"><span class="linenos"> 729</span></a>        <span class="n">selectedProcessPipe</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">imageGalleryController</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getSelectedProcessPipe</span><span class="p">()</span>
</span><span id="L-730"><a href="#L-730"><span class="linenos"> 730</span></a>
</span><span id="L-731"><a href="#L-731"><span class="linenos"> 731</span></a>
</span><span id="L-732"><a href="#L-732"><span class="linenos"> 732</span></a>        <span class="k">if</span> <span class="n">selectedProcessPipe</span><span class="p">:</span>
</span><span id="L-733"><a href="#L-733"><span class="linenos"> 733</span></a>            <span class="c1"># select dir where to save export</span>
</span><span id="L-734"><a href="#L-734"><span class="linenos"> 734</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">dirName</span> <span class="o">=</span> <span class="n">QFileDialog</span><span class="o">.</span><span class="n">getExistingDirectory</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Select Directory where to export HDR file&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">directory</span><span class="p">)</span>
</span><span id="L-735"><a href="#L-735"><span class="linenos"> 735</span></a>
</span><span id="L-736"><a href="#L-736"><span class="linenos"> 736</span></a>            <span class="c1"># show export message</span>
</span><span id="L-737"><a href="#L-737"><span class="linenos"> 737</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">statusBar</span><span class="p">()</span><span class="o">.</span><span class="n">showMessage</span><span class="p">(</span><span class="s1">&#39;exporting HDR image (&#39;</span><span class="o">+</span><span class="n">pref</span><span class="o">.</span><span class="n">getHDRdisplay</span><span class="p">()[</span><span class="s1">&#39;tag&#39;</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;), full size image computation: start, please wait !&#39;</span><span class="p">)</span>
</span><span id="L-738"><a href="#L-738"><span class="linenos"> 738</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">statusBar</span><span class="p">()</span><span class="o">.</span><span class="n">repaint</span><span class="p">()</span>
</span><span id="L-739"><a href="#L-739"><span class="linenos"> 739</span></a>
</span><span id="L-740"><a href="#L-740"><span class="linenos"> 740</span></a>            <span class="c1"># save current processpipe metada</span>
</span><span id="L-741"><a href="#L-741"><span class="linenos"> 741</span></a>            <span class="n">originalImage</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">selectedProcessPipe</span><span class="o">.</span><span class="n">originalImage</span><span class="p">)</span>
</span><span id="L-742"><a href="#L-742"><span class="linenos"> 742</span></a>            <span class="n">originalImage</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;processpipe&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">selectedProcessPipe</span><span class="o">.</span><span class="n">toDict</span><span class="p">()</span>
</span><span id="L-743"><a href="#L-743"><span class="linenos"> 743</span></a>            <span class="n">originalImage</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span id="L-744"><a href="#L-744"><span class="linenos"> 744</span></a>
</span><span id="L-745"><a href="#L-745"><span class="linenos"> 745</span></a>            <span class="c1"># load full size image</span>
</span><span id="L-746"><a href="#L-746"><span class="linenos"> 746</span></a>            <span class="n">img</span> <span class="o">=</span> <span class="n">hdrCore</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">originalImage</span><span class="o">.</span><span class="n">path</span><span class="o">+</span><span class="s1">&#39;/&#39;</span><span class="o">+</span><span class="n">originalImage</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="L-747"><a href="#L-747"><span class="linenos"> 747</span></a>
</span><span id="L-748"><a href="#L-748"><span class="linenos"> 748</span></a>            <span class="c1"># turn off: autoResize</span>
</span><span id="L-749"><a href="#L-749"><span class="linenos"> 749</span></a>            <span class="n">hdrCore</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">ProcessPipe</span><span class="o">.</span><span class="n">autoResize</span> <span class="o">=</span> <span class="kc">False</span> 
</span><span id="L-750"><a href="#L-750"><span class="linenos"> 750</span></a>            <span class="c1"># make a copy of selectedProcessPipe  </span>
</span><span id="L-751"><a href="#L-751"><span class="linenos"> 751</span></a>            <span class="n">processpipe</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">selectedProcessPipe</span><span class="p">)</span>
</span><span id="L-752"><a href="#L-752"><span class="linenos"> 752</span></a>
</span><span id="L-753"><a href="#L-753"><span class="linenos"> 753</span></a>            <span class="c1"># set image to process-pipe</span>
</span><span id="L-754"><a href="#L-754"><span class="linenos"> 754</span></a>            <span class="n">processpipe</span><span class="o">.</span><span class="n">setImage</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
</span><span id="L-755"><a href="#L-755"><span class="linenos"> 755</span></a>
</span><span id="L-756"><a href="#L-756"><span class="linenos"> 756</span></a>            <span class="n">thread</span><span class="o">.</span><span class="n">cCompute</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">callBackEndExportHDR</span><span class="p">,</span> <span class="n">processpipe</span><span class="p">,</span> <span class="n">toneMap</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">progress</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">statusBar</span><span class="p">()</span><span class="o">.</span><span class="n">showMessage</span><span class="p">)</span>
</span><span id="L-757"><a href="#L-757"><span class="linenos"> 757</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-758"><a href="#L-758"><span class="linenos"> 758</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackEndExportHDR</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">):</span>
</span><span id="L-759"><a href="#L-759"><span class="linenos"> 759</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-760"><a href="#L-760"><span class="linenos"> 760</span></a><span class="sd">        Complete single HDR export and save to disk.</span>
</span><span id="L-761"><a href="#L-761"><span class="linenos"> 761</span></a><span class="sd">        </span>
</span><span id="L-762"><a href="#L-762"><span class="linenos"> 762</span></a><span class="sd">        Finalizes the HDR export process by applying final processing,</span>
</span><span id="L-763"><a href="#L-763"><span class="linenos"> 763</span></a><span class="sd">        saving to the selected directory, and optionally displaying</span>
</span><span id="L-764"><a href="#L-764"><span class="linenos"> 764</span></a><span class="sd">        the result on the HDR monitor.</span>
</span><span id="L-765"><a href="#L-765"><span class="linenos"> 765</span></a><span class="sd">        </span>
</span><span id="L-766"><a href="#L-766"><span class="linenos"> 766</span></a><span class="sd">        Args:</span>
</span><span id="L-767"><a href="#L-767"><span class="linenos"> 767</span></a><span class="sd">            img (hdrCore.image.Image): Processed HDR image ready for export</span>
</span><span id="L-768"><a href="#L-768"><span class="linenos"> 768</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-769"><a href="#L-769"><span class="linenos"> 769</span></a>        <span class="c1"># turn off: autoResize</span>
</span><span id="L-770"><a href="#L-770"><span class="linenos"> 770</span></a>        <span class="n">hdrCore</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">ProcessPipe</span><span class="o">.</span><span class="n">autoResize</span> <span class="o">=</span> <span class="kc">True</span>  
</span><span id="L-771"><a href="#L-771"><span class="linenos"> 771</span></a>        
</span><span id="L-772"><a href="#L-772"><span class="linenos"> 772</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">statusBar</span><span class="p">()</span><span class="o">.</span><span class="n">showMessage</span><span class="p">(</span><span class="s1">&#39;exporting HDR image (&#39;</span><span class="o">+</span><span class="n">pref</span><span class="o">.</span><span class="n">getHDRdisplay</span><span class="p">()[</span><span class="s1">&#39;tag&#39;</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;), full size image computation: done !&#39;</span><span class="p">)</span>
</span><span id="L-773"><a href="#L-773"><span class="linenos"> 773</span></a>
</span><span id="L-774"><a href="#L-774"><span class="linenos"> 774</span></a>        <span class="c1"># clip, scale</span>
</span><span id="L-775"><a href="#L-775"><span class="linenos"> 775</span></a>        <span class="n">img</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">hdrCore</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">clip</span><span class="p">())</span>
</span><span id="L-776"><a href="#L-776"><span class="linenos"> 776</span></a>        <span class="n">img</span><span class="o">.</span><span class="n">colorData</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">colorData</span><span class="o">*</span><span class="n">pref</span><span class="o">.</span><span class="n">getDisplayScaling</span><span class="p">()</span>
</span><span id="L-777"><a href="#L-777"><span class="linenos"> 777</span></a>
</span><span id="L-778"><a href="#L-778"><span class="linenos"> 778</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dirName</span><span class="p">:</span>
</span><span id="L-779"><a href="#L-779"><span class="linenos"> 779</span></a>            <span class="n">pathExport</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dirName</span><span class="p">,</span> <span class="n">img</span><span class="o">.</span><span class="n">name</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span><span class="o">+</span><span class="n">pref</span><span class="o">.</span><span class="n">getHDRdisplay</span><span class="p">()[</span><span class="s1">&#39;post&#39;</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;.hdr&#39;</span><span class="p">)</span>
</span><span id="L-780"><a href="#L-780"><span class="linenos"> 780</span></a>            <span class="n">img</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">hdrCore</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">imageType</span><span class="o">.</span><span class="n">HDR</span>
</span><span id="L-781"><a href="#L-781"><span class="linenos"> 781</span></a>            <span class="n">img</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;processpipe&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-782"><a href="#L-782"><span class="linenos"> 782</span></a>            <span class="n">img</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;display&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pref</span><span class="o">.</span><span class="n">getHDRdisplay</span><span class="p">()[</span><span class="s1">&#39;tag&#39;</span><span class="p">]</span>
</span><span id="L-783"><a href="#L-783"><span class="linenos"> 783</span></a>
</span><span id="L-784"><a href="#L-784"><span class="linenos"> 784</span></a>            <span class="n">img</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pathExport</span><span class="p">)</span>
</span><span id="L-785"><a href="#L-785"><span class="linenos"> 785</span></a>
</span><span id="L-786"><a href="#L-786"><span class="linenos"> 786</span></a>        <span class="n">colour</span><span class="o">.</span><span class="n">write_image</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">colorData</span><span class="p">,</span><span class="s2">&quot;temp.hdr&quot;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;Imageio&#39;</span><span class="p">)</span> <span class="c1"># local copy for display</span>
</span><span id="L-787"><a href="#L-787"><span class="linenos"> 787</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">hdrDisplay</span><span class="o">.</span><span class="n">displayFile</span><span class="p">(</span><span class="s2">&quot;temp.hdr&quot;</span><span class="p">)</span>
</span><span id="L-788"><a href="#L-788"><span class="linenos"> 788</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-789"><a href="#L-789"><span class="linenos"> 789</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackExportAllHDR</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-790"><a href="#L-790"><span class="linenos"> 790</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-791"><a href="#L-791"><span class="linenos"> 791</span></a><span class="sd">        Initiate batch export of all HDR images in the gallery.</span>
</span><span id="L-792"><a href="#L-792"><span class="linenos"> 792</span></a><span class="sd">        </span>
</span><span id="L-793"><a href="#L-793"><span class="linenos"> 793</span></a><span class="sd">        Starts the batch export process for all images in the current gallery,</span>
</span><span id="L-794"><a href="#L-794"><span class="linenos"> 794</span></a><span class="sd">        allowing users to export multiple processed HDR images with a single</span>
</span><span id="L-795"><a href="#L-795"><span class="linenos"> 795</span></a><span class="sd">        operation. Provides progress feedback during the batch operation.</span>
</span><span id="L-796"><a href="#L-796"><span class="linenos"> 796</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-797"><a href="#L-797"><span class="linenos"> 797</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>  <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; AppController.callBackExportAllHDR()&quot;</span><span class="p">)</span>
</span><span id="L-798"><a href="#L-798"><span class="linenos"> 798</span></a>
</span><span id="L-799"><a href="#L-799"><span class="linenos"> 799</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">processPipes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">imageGalleryController</span><span class="o">.</span><span class="n">getProcessPipes</span><span class="p">()</span>
</span><span id="L-800"><a href="#L-800"><span class="linenos"> 800</span></a>
</span><span id="L-801"><a href="#L-801"><span class="linenos"> 801</span></a>        <span class="c1"># select dir where to save export</span>
</span><span id="L-802"><a href="#L-802"><span class="linenos"> 802</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">dirName</span> <span class="o">=</span> <span class="n">QFileDialog</span><span class="o">.</span><span class="n">getExistingDirectory</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Select Directory where to export HDR file&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">directory</span><span class="p">)</span>
</span><span id="L-803"><a href="#L-803"><span class="linenos"> 803</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">statusBar</span><span class="p">()</span><span class="o">.</span><span class="n">showMessage</span><span class="p">(</span><span class="s1">&#39;exporting &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">processPipes</span><span class="p">))</span><span class="o">+</span><span class="s1">&#39; HDR images ... please wait&#39;</span><span class="p">)</span>
</span><span id="L-804"><a href="#L-804"><span class="linenos"> 804</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">statusBar</span><span class="p">()</span><span class="o">.</span><span class="n">repaint</span><span class="p">()</span>
</span><span id="L-805"><a href="#L-805"><span class="linenos"> 805</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">imageToExport</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">processPipes</span><span class="p">)</span> <span class="p">;</span> <span class="bp">self</span><span class="o">.</span><span class="n">imageExportDone</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-806"><a href="#L-806"><span class="linenos"> 806</span></a>
</span><span id="L-807"><a href="#L-807"><span class="linenos"> 807</span></a>        <span class="n">pp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">processPipes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-808"><a href="#L-808"><span class="linenos"> 808</span></a>
</span><span id="L-809"><a href="#L-809"><span class="linenos"> 809</span></a>        <span class="c1"># save current processpipe metada</span>
</span><span id="L-810"><a href="#L-810"><span class="linenos"> 810</span></a>        <span class="n">originalImage</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">pp</span><span class="o">.</span><span class="n">originalImage</span><span class="p">)</span>
</span><span id="L-811"><a href="#L-811"><span class="linenos"> 811</span></a>        <span class="n">originalImage</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;processpipe&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pp</span><span class="o">.</span><span class="n">toDict</span><span class="p">()</span>
</span><span id="L-812"><a href="#L-812"><span class="linenos"> 812</span></a>        <span class="n">originalImage</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span id="L-813"><a href="#L-813"><span class="linenos"> 813</span></a>
</span><span id="L-814"><a href="#L-814"><span class="linenos"> 814</span></a>        <span class="c1"># load full size image</span>
</span><span id="L-815"><a href="#L-815"><span class="linenos"> 815</span></a>        <span class="n">img</span> <span class="o">=</span> <span class="n">hdrCore</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">originalImage</span><span class="o">.</span><span class="n">path</span><span class="o">+</span><span class="s1">&#39;/&#39;</span><span class="o">+</span><span class="n">originalImage</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="L-816"><a href="#L-816"><span class="linenos"> 816</span></a>
</span><span id="L-817"><a href="#L-817"><span class="linenos"> 817</span></a>        <span class="c1"># turn off: autoResize</span>
</span><span id="L-818"><a href="#L-818"><span class="linenos"> 818</span></a>        <span class="n">hdrCore</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">ProcessPipe</span><span class="o">.</span><span class="n">autoResize</span> <span class="o">=</span> <span class="kc">False</span> 
</span><span id="L-819"><a href="#L-819"><span class="linenos"> 819</span></a>        <span class="c1"># make a copy of selectedProcessPipe  </span>
</span><span id="L-820"><a href="#L-820"><span class="linenos"> 820</span></a>        <span class="n">processpipe</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">pp</span><span class="p">)</span>
</span><span id="L-821"><a href="#L-821"><span class="linenos"> 821</span></a>
</span><span id="L-822"><a href="#L-822"><span class="linenos"> 822</span></a>        <span class="c1"># set image to process-pipe</span>
</span><span id="L-823"><a href="#L-823"><span class="linenos"> 823</span></a>        <span class="n">processpipe</span><span class="o">.</span><span class="n">setImage</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
</span><span id="L-824"><a href="#L-824"><span class="linenos"> 824</span></a>
</span><span id="L-825"><a href="#L-825"><span class="linenos"> 825</span></a>        <span class="n">thread</span><span class="o">.</span><span class="n">cCompute</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">callBackEndAllExportHDR</span><span class="p">,</span> <span class="n">processpipe</span><span class="p">,</span> <span class="n">toneMap</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">progress</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">statusBar</span><span class="p">()</span><span class="o">.</span><span class="n">showMessage</span><span class="p">)</span>            
</span><span id="L-826"><a href="#L-826"><span class="linenos"> 826</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-827"><a href="#L-827"><span class="linenos"> 827</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackEndAllExportHDR</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">):</span>
</span><span id="L-828"><a href="#L-828"><span class="linenos"> 828</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-829"><a href="#L-829"><span class="linenos"> 829</span></a><span class="sd">        Process single image in batch export and continue to next.</span>
</span><span id="L-830"><a href="#L-830"><span class="linenos"> 830</span></a><span class="sd">        </span>
</span><span id="L-831"><a href="#L-831"><span class="linenos"> 831</span></a><span class="sd">        Handles the completion of each individual image in the batch export</span>
</span><span id="L-832"><a href="#L-832"><span class="linenos"> 832</span></a><span class="sd">        process, saves the current image, updates progress, and initiates</span>
</span><span id="L-833"><a href="#L-833"><span class="linenos"> 833</span></a><span class="sd">        processing of the next image in the queue.</span>
</span><span id="L-834"><a href="#L-834"><span class="linenos"> 834</span></a><span class="sd">        </span>
</span><span id="L-835"><a href="#L-835"><span class="linenos"> 835</span></a><span class="sd">        Args:</span>
</span><span id="L-836"><a href="#L-836"><span class="linenos"> 836</span></a><span class="sd">            img (hdrCore.image.Image): Current processed HDR image in batch</span>
</span><span id="L-837"><a href="#L-837"><span class="linenos"> 837</span></a><span class="sd">            </span>
</span><span id="L-838"><a href="#L-838"><span class="linenos"> 838</span></a><span class="sd">        Note:</span>
</span><span id="L-839"><a href="#L-839"><span class="linenos"> 839</span></a><span class="sd">            Recursively processes all images in the batch until completion,</span>
</span><span id="L-840"><a href="#L-840"><span class="linenos"> 840</span></a><span class="sd">            providing progress updates throughout the operation.</span>
</span><span id="L-841"><a href="#L-841"><span class="linenos"> 841</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-842"><a href="#L-842"><span class="linenos"> 842</span></a>        <span class="c1"># last image ?</span>
</span><span id="L-843"><a href="#L-843"><span class="linenos"> 843</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">imageExportDone</span> <span class="o">+=</span><span class="mi">1</span>
</span><span id="L-844"><a href="#L-844"><span class="linenos"> 844</span></a>
</span><span id="L-845"><a href="#L-845"><span class="linenos"> 845</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">statusBar</span><span class="p">()</span><span class="o">.</span><span class="n">showMessage</span><span class="p">(</span><span class="s1">&#39;exporting HDR images (&#39;</span><span class="o">+</span><span class="n">pref</span><span class="o">.</span><span class="n">getHDRdisplay</span><span class="p">()[</span><span class="s1">&#39;tag&#39;</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;):&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="mi">100</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">imageExportDone</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">imageToExport</span><span class="p">))</span><span class="o">+</span><span class="s1">&#39;</span><span class="si">% d</span><span class="s1">one !&#39;</span><span class="p">)</span>
</span><span id="L-846"><a href="#L-846"><span class="linenos"> 846</span></a>
</span><span id="L-847"><a href="#L-847"><span class="linenos"> 847</span></a>        <span class="c1"># clip, scale</span>
</span><span id="L-848"><a href="#L-848"><span class="linenos"> 848</span></a>        <span class="n">img</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">hdrCore</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">clip</span><span class="p">())</span>
</span><span id="L-849"><a href="#L-849"><span class="linenos"> 849</span></a>        <span class="n">img</span><span class="o">.</span><span class="n">colorData</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">colorData</span><span class="o">*</span><span class="n">pref</span><span class="o">.</span><span class="n">getDisplayScaling</span><span class="p">()</span>
</span><span id="L-850"><a href="#L-850"><span class="linenos"> 850</span></a>
</span><span id="L-851"><a href="#L-851"><span class="linenos"> 851</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dirName</span><span class="p">:</span>
</span><span id="L-852"><a href="#L-852"><span class="linenos"> 852</span></a>            <span class="n">pathExport</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dirName</span><span class="p">,</span> <span class="n">img</span><span class="o">.</span><span class="n">name</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span><span class="o">+</span><span class="n">pref</span><span class="o">.</span><span class="n">getHDRdisplay</span><span class="p">()[</span><span class="s1">&#39;post&#39;</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;.hdr&#39;</span><span class="p">)</span>
</span><span id="L-853"><a href="#L-853"><span class="linenos"> 853</span></a>            <span class="n">img</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">hdrCore</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">imageType</span><span class="o">.</span><span class="n">HDR</span>
</span><span id="L-854"><a href="#L-854"><span class="linenos"> 854</span></a>            <span class="n">img</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;processpipe&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-855"><a href="#L-855"><span class="linenos"> 855</span></a>            <span class="n">img</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;display&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pref</span><span class="o">.</span><span class="n">getHDRdisplay</span><span class="p">()[</span><span class="s1">&#39;tag&#39;</span><span class="p">]</span>
</span><span id="L-856"><a href="#L-856"><span class="linenos"> 856</span></a>
</span><span id="L-857"><a href="#L-857"><span class="linenos"> 857</span></a>            <span class="n">img</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pathExport</span><span class="p">)</span>
</span><span id="L-858"><a href="#L-858"><span class="linenos"> 858</span></a>
</span><span id="L-859"><a href="#L-859"><span class="linenos"> 859</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">imageExportDone</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">imageToExport</span> <span class="p">:</span>
</span><span id="L-860"><a href="#L-860"><span class="linenos"> 860</span></a>            <span class="c1"># turn off: autoResize</span>
</span><span id="L-861"><a href="#L-861"><span class="linenos"> 861</span></a>            <span class="n">hdrCore</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">ProcessPipe</span><span class="o">.</span><span class="n">autoResize</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-862"><a href="#L-862"><span class="linenos"> 862</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-863"><a href="#L-863"><span class="linenos"> 863</span></a>            <span class="n">pp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">processPipes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">imageExportDone</span><span class="p">]</span>
</span><span id="L-864"><a href="#L-864"><span class="linenos"> 864</span></a>
</span><span id="L-865"><a href="#L-865"><span class="linenos"> 865</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">pp</span><span class="p">:</span>
</span><span id="L-866"><a href="#L-866"><span class="linenos"> 866</span></a>                <span class="n">img</span> <span class="o">=</span> <span class="n">hdrCore</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">imagesName</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">imageExportDone</span><span class="p">],</span> <span class="n">thumb</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-867"><a href="#L-867"><span class="linenos"> 867</span></a>                <span class="n">pp</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">EditImageModel</span><span class="o">.</span><span class="n">buildProcessPipe</span><span class="p">()</span>
</span><span id="L-868"><a href="#L-868"><span class="linenos"> 868</span></a>                <span class="n">pp</span><span class="o">.</span><span class="n">setImage</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>                      
</span><span id="L-869"><a href="#L-869"><span class="linenos"> 869</span></a>
</span><span id="L-870"><a href="#L-870"><span class="linenos"> 870</span></a>
</span><span id="L-871"><a href="#L-871"><span class="linenos"> 871</span></a>            <span class="c1"># save current processpipe metada</span>
</span><span id="L-872"><a href="#L-872"><span class="linenos"> 872</span></a>            <span class="n">originalImage</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">pp</span><span class="o">.</span><span class="n">originalImage</span><span class="p">)</span>
</span><span id="L-873"><a href="#L-873"><span class="linenos"> 873</span></a>            <span class="n">originalImage</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;processpipe&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pp</span><span class="o">.</span><span class="n">toDict</span><span class="p">()</span>
</span><span id="L-874"><a href="#L-874"><span class="linenos"> 874</span></a>            <span class="n">originalImage</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span id="L-875"><a href="#L-875"><span class="linenos"> 875</span></a>
</span><span id="L-876"><a href="#L-876"><span class="linenos"> 876</span></a>            <span class="c1"># load full size image</span>
</span><span id="L-877"><a href="#L-877"><span class="linenos"> 877</span></a>            <span class="n">img</span> <span class="o">=</span> <span class="n">hdrCore</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">originalImage</span><span class="o">.</span><span class="n">path</span><span class="o">+</span><span class="s1">&#39;/&#39;</span><span class="o">+</span><span class="n">originalImage</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="L-878"><a href="#L-878"><span class="linenos"> 878</span></a>
</span><span id="L-879"><a href="#L-879"><span class="linenos"> 879</span></a>            <span class="c1"># turn off: autoResize</span>
</span><span id="L-880"><a href="#L-880"><span class="linenos"> 880</span></a>            <span class="n">hdrCore</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">ProcessPipe</span><span class="o">.</span><span class="n">autoResize</span> <span class="o">=</span> <span class="kc">False</span> 
</span><span id="L-881"><a href="#L-881"><span class="linenos"> 881</span></a>            <span class="c1"># make a copy of selectedProcessPipe  </span>
</span><span id="L-882"><a href="#L-882"><span class="linenos"> 882</span></a>            <span class="n">processpipe</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">pp</span><span class="p">)</span>
</span><span id="L-883"><a href="#L-883"><span class="linenos"> 883</span></a>
</span><span id="L-884"><a href="#L-884"><span class="linenos"> 884</span></a>            <span class="c1"># set image to process-pipe</span>
</span><span id="L-885"><a href="#L-885"><span class="linenos"> 885</span></a>            <span class="n">processpipe</span><span class="o">.</span><span class="n">setImage</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
</span><span id="L-886"><a href="#L-886"><span class="linenos"> 886</span></a>
</span><span id="L-887"><a href="#L-887"><span class="linenos"> 887</span></a>            <span class="n">thread</span><span class="o">.</span><span class="n">cCompute</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">callBackEndAllExportHDR</span><span class="p">,</span> <span class="n">processpipe</span><span class="p">,</span> <span class="n">toneMap</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">progress</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">statusBar</span><span class="p">()</span><span class="o">.</span><span class="n">showMessage</span><span class="p">)</span>            
</span><span id="L-888"><a href="#L-888"><span class="linenos"> 888</span></a><span class="c1"># ------------------------------------------------------------------------------------------</span>
</span><span id="L-889"><a href="#L-889"><span class="linenos"> 889</span></a><span class="c1"># --- class MultiDockController() ----------------------------------------------------------</span>
</span><span id="L-890"><a href="#L-890"><span class="linenos"> 890</span></a><span class="c1"># ------------------------------------------------------------------------------------------</span>
</span><span id="L-891"><a href="#L-891"><span class="linenos"> 891</span></a><span class="k">class</span><span class="w"> </span><span class="nc">MultiDockController</span><span class="p">():</span>
</span><span id="L-892"><a href="#L-892"><span class="linenos"> 892</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-893"><a href="#L-893"><span class="linenos"> 893</span></a><span class="sd">    Controller for managing multiple docked panels in the interface.</span>
</span><span id="L-894"><a href="#L-894"><span class="linenos"> 894</span></a><span class="sd">    </span>
</span><span id="L-895"><a href="#L-895"><span class="linenos"> 895</span></a><span class="sd">    This class manages the docking system that allows switching between different</span>
</span><span id="L-896"><a href="#L-896"><span class="linenos"> 896</span></a><span class="sd">    functional panels: EDIT (image editing), INFO (metadata/information), and</span>
</span><span id="L-897"><a href="#L-897"><span class="linenos"> 897</span></a><span class="sd">    MIAM (aesthetics analysis). It provides seamless transitions between</span>
</span><span id="L-898"><a href="#L-898"><span class="linenos"> 898</span></a><span class="sd">    different modes of interaction with the HDR images.</span>
</span><span id="L-899"><a href="#L-899"><span class="linenos"> 899</span></a><span class="sd">    </span>
</span><span id="L-900"><a href="#L-900"><span class="linenos"> 900</span></a><span class="sd">    The docking system allows users to focus on specific aspects of image</span>
</span><span id="L-901"><a href="#L-901"><span class="linenos"> 901</span></a><span class="sd">    processing while maintaining a consistent workflow and shared processing</span>
</span><span id="L-902"><a href="#L-902"><span class="linenos"> 902</span></a><span class="sd">    pipeline state across all panels.</span>
</span><span id="L-903"><a href="#L-903"><span class="linenos"> 903</span></a><span class="sd">    </span>
</span><span id="L-904"><a href="#L-904"><span class="linenos"> 904</span></a><span class="sd">    Attributes:</span>
</span><span id="L-905"><a href="#L-905"><span class="linenos"> 905</span></a><span class="sd">        - parent: Parent controller (typically AppController)</span>
</span><span id="L-906"><a href="#L-906"><span class="linenos"> 906</span></a><span class="sd">        - view (view.MultiDockView): Multi-panel view component</span>
</span><span id="L-907"><a href="#L-907"><span class="linenos"> 907</span></a><span class="sd">        - model: Data model (currently None, uses child controllers&#39; models)</span>
</span><span id="L-908"><a href="#L-908"><span class="linenos"> 908</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-909"><a href="#L-909"><span class="linenos"> 909</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">HDRcontroller</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="L-910"><a href="#L-910"><span class="linenos"> 910</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-911"><a href="#L-911"><span class="linenos"> 911</span></a><span class="sd">        Initialize the multi-dock controller.</span>
</span><span id="L-912"><a href="#L-912"><span class="linenos"> 912</span></a><span class="sd">        </span>
</span><span id="L-913"><a href="#L-913"><span class="linenos"> 913</span></a><span class="sd">        Args:</span>
</span><span id="L-914"><a href="#L-914"><span class="linenos"> 914</span></a><span class="sd">            parent: Parent controller for coordination</span>
</span><span id="L-915"><a href="#L-915"><span class="linenos"> 915</span></a><span class="sd">            HDRcontroller: HDR display controller for HDR preview integration</span>
</span><span id="L-916"><a href="#L-916"><span class="linenos"> 916</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-917"><a href="#L-917"><span class="linenos"> 917</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; MultiDockController.__init__()&quot;</span><span class="p">)</span>
</span><span id="L-918"><a href="#L-918"><span class="linenos"> 918</span></a>
</span><span id="L-919"><a href="#L-919"><span class="linenos"> 919</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
</span><span id="L-920"><a href="#L-920"><span class="linenos"> 920</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">MultiDockView</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">HDRcontroller</span><span class="p">)</span>
</span><span id="L-921"><a href="#L-921"><span class="linenos"> 921</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-922"><a href="#L-922"><span class="linenos"> 922</span></a>    <span class="c1"># ---------------------------------------------------------------------------------------</span>
</span><span id="L-923"><a href="#L-923"><span class="linenos"> 923</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">activateEDIT</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
</span><span id="L-924"><a href="#L-924"><span class="linenos"> 924</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-925"><a href="#L-925"><span class="linenos"> 925</span></a><span class="sd">        Activate the image editing panel.</span>
</span><span id="L-926"><a href="#L-926"><span class="linenos"> 926</span></a><span class="sd">        </span>
</span><span id="L-927"><a href="#L-927"><span class="linenos"> 927</span></a><span class="sd">        Switches the interface to the image editing mode, providing access</span>
</span><span id="L-928"><a href="#L-928"><span class="linenos"> 928</span></a><span class="sd">        to exposure, contrast, tone curves, color editing, and other HDR</span>
</span><span id="L-929"><a href="#L-929"><span class="linenos"> 929</span></a><span class="sd">        processing controls.</span>
</span><span id="L-930"><a href="#L-930"><span class="linenos"> 930</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-931"><a href="#L-931"><span class="linenos"> 931</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">switch</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="L-932"><a href="#L-932"><span class="linenos"> 932</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">activateINFO</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
</span><span id="L-933"><a href="#L-933"><span class="linenos"> 933</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-934"><a href="#L-934"><span class="linenos"> 934</span></a><span class="sd">        Activate the image information panel.</span>
</span><span id="L-935"><a href="#L-935"><span class="linenos"> 935</span></a><span class="sd">        </span>
</span><span id="L-936"><a href="#L-936"><span class="linenos"> 936</span></a><span class="sd">        Switches the interface to the metadata and information display mode,</span>
</span><span id="L-937"><a href="#L-937"><span class="linenos"> 937</span></a><span class="sd">        showing EXIF data, processing history, and image properties.</span>
</span><span id="L-938"><a href="#L-938"><span class="linenos"> 938</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-939"><a href="#L-939"><span class="linenos"> 939</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">switch</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-940"><a href="#L-940"><span class="linenos"> 940</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">activateMIAM</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>  
</span><span id="L-941"><a href="#L-941"><span class="linenos"> 941</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-942"><a href="#L-942"><span class="linenos"> 942</span></a><span class="sd">        Activate the aesthetics analysis panel.</span>
</span><span id="L-943"><a href="#L-943"><span class="linenos"> 943</span></a><span class="sd">        </span>
</span><span id="L-944"><a href="#L-944"><span class="linenos"> 944</span></a><span class="sd">        Switches the interface to the MIAM (aesthetics) analysis mode,</span>
</span><span id="L-945"><a href="#L-945"><span class="linenos"> 945</span></a><span class="sd">        displaying image quality metrics, color palette analysis, and</span>
</span><span id="L-946"><a href="#L-946"><span class="linenos"> 946</span></a><span class="sd">        aesthetic scoring information.</span>
</span><span id="L-947"><a href="#L-947"><span class="linenos"> 947</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-948"><a href="#L-948"><span class="linenos"> 948</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">switch</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</span><span id="L-949"><a href="#L-949"><span class="linenos"> 949</span></a>    <span class="c1"># ---------------------------------------------------------------------------------------</span>
</span><span id="L-950"><a href="#L-950"><span class="linenos"> 950</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">switch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">nb</span><span class="p">):</span>
</span><span id="L-951"><a href="#L-951"><span class="linenos"> 951</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-952"><a href="#L-952"><span class="linenos"> 952</span></a><span class="sd">        Switch to the specified panel number.</span>
</span><span id="L-953"><a href="#L-953"><span class="linenos"> 953</span></a><span class="sd">        </span>
</span><span id="L-954"><a href="#L-954"><span class="linenos"> 954</span></a><span class="sd">        Args:</span>
</span><span id="L-955"><a href="#L-955"><span class="linenos"> 955</span></a><span class="sd">            nb (int): Panel index (0=EDIT, 1=INFO, 2=MIAM)</span>
</span><span id="L-956"><a href="#L-956"><span class="linenos"> 956</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-957"><a href="#L-957"><span class="linenos"> 957</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>  <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; MultiDockController.switch()&quot;</span><span class="p">)</span>
</span><span id="L-958"><a href="#L-958"><span class="linenos"> 958</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">switch</span><span class="p">(</span><span class="n">nb</span><span class="p">)</span>
</span><span id="L-959"><a href="#L-959"><span class="linenos"> 959</span></a>    <span class="c1"># --------------------------------------------------------------------------------------</span>
</span><span id="L-960"><a href="#L-960"><span class="linenos"> 960</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setProcessPipe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">processPipe</span><span class="p">):</span> 
</span><span id="L-961"><a href="#L-961"><span class="linenos"> 961</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-962"><a href="#L-962"><span class="linenos"> 962</span></a><span class="sd">        Set the processing pipeline for the active panel.</span>
</span><span id="L-963"><a href="#L-963"><span class="linenos"> 963</span></a><span class="sd">        </span>
</span><span id="L-964"><a href="#L-964"><span class="linenos"> 964</span></a><span class="sd">        Propagates the processing pipeline to the currently active panel,</span>
</span><span id="L-965"><a href="#L-965"><span class="linenos"> 965</span></a><span class="sd">        ensuring that all panels work with the same image and processing state.</span>
</span><span id="L-966"><a href="#L-966"><span class="linenos"> 966</span></a><span class="sd">        </span>
</span><span id="L-967"><a href="#L-967"><span class="linenos"> 967</span></a><span class="sd">        Args:</span>
</span><span id="L-968"><a href="#L-968"><span class="linenos"> 968</span></a><span class="sd">            processPipe: Processing pipeline to apply to the active panel</span>
</span><span id="L-969"><a href="#L-969"><span class="linenos"> 969</span></a><span class="sd">            </span>
</span><span id="L-970"><a href="#L-970"><span class="linenos"> 970</span></a><span class="sd">        Returns:</span>
</span><span id="L-971"><a href="#L-971"><span class="linenos"> 971</span></a><span class="sd">            bool: True if the pipeline was successfully set, False otherwise</span>
</span><span id="L-972"><a href="#L-972"><span class="linenos"> 972</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-973"><a href="#L-973"><span class="linenos"> 973</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; MultiDockController.setProcessPipe(&quot;</span><span class="p">,</span><span class="n">processPipe</span><span class="o">.</span><span class="n">getImage</span><span class="p">()</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
</span><span id="L-974"><a href="#L-974"><span class="linenos"> 974</span></a>
</span><span id="L-975"><a href="#L-975"><span class="linenos"> 975</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">setProcessPipe</span><span class="p">(</span><span class="n">processPipe</span><span class="p">)</span>
</span><span id="L-976"><a href="#L-976"><span class="linenos"> 976</span></a><span class="c1"># ------------------------------------------------------------------------------------------</span>
</span><span id="L-977"><a href="#L-977"><span class="linenos"> 977</span></a><span class="c1"># ------------------------------------------------------------------------------------------</span>
</span><span id="L-978"><a href="#L-978"><span class="linenos"> 978</span></a><span class="c1"># ------------------------------------------------------------------------------------------</span>
</span><span id="L-979"><a href="#L-979"><span class="linenos"> 979</span></a><span class="k">class</span><span class="w"> </span><span class="nc">EditImageController</span><span class="p">:</span>
</span><span id="L-980"><a href="#L-980"><span class="linenos"> 980</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-981"><a href="#L-981"><span class="linenos"> 981</span></a><span class="sd">    Controller for HDR image editing interface and processing pipeline.</span>
</span><span id="L-982"><a href="#L-982"><span class="linenos"> 982</span></a><span class="sd">    </span>
</span><span id="L-983"><a href="#L-983"><span class="linenos"> 983</span></a><span class="sd">    This class manages the comprehensive HDR image editing workflow, providing</span>
</span><span id="L-984"><a href="#L-984"><span class="linenos"> 984</span></a><span class="sd">    controls for exposure, contrast, tone curves, saturation, color editing,</span>
</span><span id="L-985"><a href="#L-985"><span class="linenos"> 985</span></a><span class="sd">    geometry transformations, and processing pipeline management. It coordinates</span>
</span><span id="L-986"><a href="#L-986"><span class="linenos"> 986</span></a><span class="sd">    between the editing interface and the underlying HDR processing system.</span>
</span><span id="L-987"><a href="#L-987"><span class="linenos"> 987</span></a><span class="sd">    </span>
</span><span id="L-988"><a href="#L-988"><span class="linenos"> 988</span></a><span class="sd">    The controller handles real-time preview updates, auto-adjustment algorithms,</span>
</span><span id="L-989"><a href="#L-989"><span class="linenos"> 989</span></a><span class="sd">    parameter synchronization, and HDR display integration for immediate visual</span>
</span><span id="L-990"><a href="#L-990"><span class="linenos"> 990</span></a><span class="sd">    feedback during the editing process.</span>
</span><span id="L-991"><a href="#L-991"><span class="linenos"> 991</span></a><span class="sd">    </span>
</span><span id="L-992"><a href="#L-992"><span class="linenos"> 992</span></a><span class="sd">    Attributes:</span>
</span><span id="L-993"><a href="#L-993"><span class="linenos"> 993</span></a><span class="sd">        - parent: Parent controller for coordination</span>
</span><span id="L-994"><a href="#L-994"><span class="linenos"> 994</span></a><span class="sd">        - previewHDR (bool): Enable/disable HDR preview updates</span>
</span><span id="L-995"><a href="#L-995"><span class="linenos"> 995</span></a><span class="sd">        - controllerHDR: HDR display controller for real-time preview</span>
</span><span id="L-996"><a href="#L-996"><span class="linenos"> 996</span></a><span class="sd">        - view (view.EditImageView): Image editing interface view</span>
</span><span id="L-997"><a href="#L-997"><span class="linenos"> 997</span></a><span class="sd">        - model (model.EditImageModel): Image editing data model and processing</span>
</span><span id="L-998"><a href="#L-998"><span class="linenos"> 998</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-999"><a href="#L-999"><span class="linenos"> 999</span></a>
</span><span id="L-1000"><a href="#L-1000"><span class="linenos">1000</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">HDRcontroller</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="L-1001"><a href="#L-1001"><span class="linenos">1001</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1002"><a href="#L-1002"><span class="linenos">1002</span></a><span class="sd">        Initialize the image editing controller.</span>
</span><span id="L-1003"><a href="#L-1003"><span class="linenos">1003</span></a><span class="sd">        </span>
</span><span id="L-1004"><a href="#L-1004"><span class="linenos">1004</span></a><span class="sd">        Args:</span>
</span><span id="L-1005"><a href="#L-1005"><span class="linenos">1005</span></a><span class="sd">            parent: Parent controller for coordination</span>
</span><span id="L-1006"><a href="#L-1006"><span class="linenos">1006</span></a><span class="sd">            HDRcontroller: HDR display controller for real-time preview</span>
</span><span id="L-1007"><a href="#L-1007"><span class="linenos">1007</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1008"><a href="#L-1008"><span class="linenos">1008</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; EditImageController.__init__(&quot;</span><span class="p">,</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
</span><span id="L-1009"><a href="#L-1009"><span class="linenos">1009</span></a>
</span><span id="L-1010"><a href="#L-1010"><span class="linenos">1010</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
</span><span id="L-1011"><a href="#L-1011"><span class="linenos">1011</span></a>
</span><span id="L-1012"><a href="#L-1012"><span class="linenos">1012</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">previewHDR</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-1013"><a href="#L-1013"><span class="linenos">1013</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">controllerHDR</span> <span class="o">=</span> <span class="n">HDRcontroller</span>
</span><span id="L-1014"><a href="#L-1014"><span class="linenos">1014</span></a>
</span><span id="L-1015"><a href="#L-1015"><span class="linenos">1015</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">EditImageView</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="L-1016"><a href="#L-1016"><span class="linenos">1016</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">EditImageModel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="L-1017"><a href="#L-1017"><span class="linenos">1017</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-1018"><a href="#L-1018"><span class="linenos">1018</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setProcessPipe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">processPipe</span><span class="p">):</span> 
</span><span id="L-1019"><a href="#L-1019"><span class="linenos">1019</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1020"><a href="#L-1020"><span class="linenos">1020</span></a><span class="sd">        Set the processing pipeline for editing.</span>
</span><span id="L-1021"><a href="#L-1021"><span class="linenos">1021</span></a><span class="sd">        </span>
</span><span id="L-1022"><a href="#L-1022"><span class="linenos">1022</span></a><span class="sd">        Configures the editing interface to work with the specified processing</span>
</span><span id="L-1023"><a href="#L-1023"><span class="linenos">1023</span></a><span class="sd">        pipeline, updating all controls and displays to reflect the current</span>
</span><span id="L-1024"><a href="#L-1024"><span class="linenos">1024</span></a><span class="sd">        processing state.</span>
</span><span id="L-1025"><a href="#L-1025"><span class="linenos">1025</span></a><span class="sd">        </span>
</span><span id="L-1026"><a href="#L-1026"><span class="linenos">1026</span></a><span class="sd">        Args:</span>
</span><span id="L-1027"><a href="#L-1027"><span class="linenos">1027</span></a><span class="sd">            processPipe: Processing pipeline containing image and processing nodes</span>
</span><span id="L-1028"><a href="#L-1028"><span class="linenos">1028</span></a><span class="sd">            </span>
</span><span id="L-1029"><a href="#L-1029"><span class="linenos">1029</span></a><span class="sd">        Returns:</span>
</span><span id="L-1030"><a href="#L-1030"><span class="linenos">1030</span></a><span class="sd">            bool: True if the pipeline was successfully set, False otherwise</span>
</span><span id="L-1031"><a href="#L-1031"><span class="linenos">1031</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1032"><a href="#L-1032"><span class="linenos">1032</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; EditImageController.setProcessPipe(&quot;</span><span class="p">,</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
</span><span id="L-1033"><a href="#L-1033"><span class="linenos">1033</span></a>
</span><span id="L-1034"><a href="#L-1034"><span class="linenos">1034</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setProcessPipe</span><span class="p">(</span><span class="n">processPipe</span><span class="p">):</span>
</span><span id="L-1035"><a href="#L-1035"><span class="linenos">1035</span></a>
</span><span id="L-1036"><a href="#L-1036"><span class="linenos">1036</span></a>            <span class="c1"># update view</span>
</span><span id="L-1037"><a href="#L-1037"><span class="linenos">1037</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">setProcessPipe</span><span class="p">(</span><span class="n">processPipe</span><span class="p">)</span>
</span><span id="L-1038"><a href="#L-1038"><span class="linenos">1038</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">imageWidgetController</span><span class="o">.</span><span class="n">setImage</span><span class="p">(</span><span class="n">processPipe</span><span class="o">.</span><span class="n">getImage</span><span class="p">())</span>
</span><span id="L-1039"><a href="#L-1039"><span class="linenos">1039</span></a>
</span><span id="L-1040"><a href="#L-1040"><span class="linenos">1040</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">plotToneCurve</span><span class="p">()</span>
</span><span id="L-1041"><a href="#L-1041"><span class="linenos">1041</span></a>
</span><span id="L-1042"><a href="#L-1042"><span class="linenos">1042</span></a>            <span class="c1"># update hdr viewer</span>
</span><span id="L-1043"><a href="#L-1043"><span class="linenos">1043</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">controllerHDR</span><span class="o">.</span><span class="n">displaySplash</span><span class="p">()</span>
</span><span id="L-1044"><a href="#L-1044"><span class="linenos">1044</span></a>
</span><span id="L-1045"><a href="#L-1045"><span class="linenos">1045</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-1046"><a href="#L-1046"><span class="linenos">1046</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-1047"><a href="#L-1047"><span class="linenos">1047</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-1048"><a href="#L-1048"><span class="linenos">1048</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-1049"><a href="#L-1049"><span class="linenos">1049</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getProcessPipe</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span> 
</span><span id="L-1050"><a href="#L-1050"><span class="linenos">1050</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1051"><a href="#L-1051"><span class="linenos">1051</span></a><span class="sd">        Get the current processing pipeline.</span>
</span><span id="L-1052"><a href="#L-1052"><span class="linenos">1052</span></a><span class="sd">        </span>
</span><span id="L-1053"><a href="#L-1053"><span class="linenos">1053</span></a><span class="sd">        Returns:</span>
</span><span id="L-1054"><a href="#L-1054"><span class="linenos">1054</span></a><span class="sd">            ProcessPipe: Current processing pipeline with all applied operations</span>
</span><span id="L-1055"><a href="#L-1055"><span class="linenos">1055</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1056"><a href="#L-1056"><span class="linenos">1056</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getProcessPipe</span><span class="p">()</span>
</span><span id="L-1057"><a href="#L-1057"><span class="linenos">1057</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-1058"><a href="#L-1058"><span class="linenos">1058</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">buildView</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">processPipe</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="L-1059"><a href="#L-1059"><span class="linenos">1059</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1060"><a href="#L-1060"><span class="linenos">1060</span></a><span class="sd">        Build or rebuild the editing interface view.</span>
</span><span id="L-1061"><a href="#L-1061"><span class="linenos">1061</span></a><span class="sd">        </span>
</span><span id="L-1062"><a href="#L-1062"><span class="linenos">1062</span></a><span class="sd">        Reconstructs the editing interface, typically called when switching</span>
</span><span id="L-1063"><a href="#L-1063"><span class="linenos">1063</span></a><span class="sd">        between different panels or when the interface needs to be refreshed.</span>
</span><span id="L-1064"><a href="#L-1064"><span class="linenos">1064</span></a><span class="sd">        </span>
</span><span id="L-1065"><a href="#L-1065"><span class="linenos">1065</span></a><span class="sd">        Args:</span>
</span><span id="L-1066"><a href="#L-1066"><span class="linenos">1066</span></a><span class="sd">            processPipe: Optional processing pipeline to set during build</span>
</span><span id="L-1067"><a href="#L-1067"><span class="linenos">1067</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1068"><a href="#L-1068"><span class="linenos">1068</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; EditImageController.buildView(&quot;</span><span class="p">,</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
</span><span id="L-1069"><a href="#L-1069"><span class="linenos">1069</span></a>
</span><span id="L-1070"><a href="#L-1070"><span class="linenos">1070</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot; called when MultiDockController recall a controller/view &quot;&quot;&quot;</span>
</span><span id="L-1071"><a href="#L-1071"><span class="linenos">1071</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">EditImageView</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">build</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-1072"><a href="#L-1072"><span class="linenos">1072</span></a>        <span class="k">if</span> <span class="n">processPipe</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">setProcessPipe</span><span class="p">(</span><span class="n">processPipe</span><span class="p">)</span>
</span><span id="L-1073"><a href="#L-1073"><span class="linenos">1073</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-1074"><a href="#L-1074"><span class="linenos">1074</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">autoExposure</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
</span><span id="L-1075"><a href="#L-1075"><span class="linenos">1075</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1076"><a href="#L-1076"><span class="linenos">1076</span></a><span class="sd">        Calculate and apply optimal exposure automatically.</span>
</span><span id="L-1077"><a href="#L-1077"><span class="linenos">1077</span></a><span class="sd">        </span>
</span><span id="L-1078"><a href="#L-1078"><span class="linenos">1078</span></a><span class="sd">        Uses histogram analysis to determine the optimal exposure value that</span>
</span><span id="L-1079"><a href="#L-1079"><span class="linenos">1079</span></a><span class="sd">        maximizes dynamic range usage without clipping, then applies this</span>
</span><span id="L-1080"><a href="#L-1080"><span class="linenos">1080</span></a><span class="sd">        exposure and updates the interface controls.</span>
</span><span id="L-1081"><a href="#L-1081"><span class="linenos">1081</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1082"><a href="#L-1082"><span class="linenos">1082</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; EditImageController.autoExposure(&quot;</span><span class="p">,</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
</span><span id="L-1083"><a href="#L-1083"><span class="linenos">1083</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">processpipe</span><span class="p">:</span>
</span><span id="L-1084"><a href="#L-1084"><span class="linenos">1084</span></a>      
</span><span id="L-1085"><a href="#L-1085"><span class="linenos">1085</span></a>            <span class="n">img</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">autoExposure</span><span class="p">()</span>
</span><span id="L-1086"><a href="#L-1086"><span class="linenos">1086</span></a>
</span><span id="L-1087"><a href="#L-1087"><span class="linenos">1087</span></a>            <span class="c1"># update view with computed EV</span>
</span><span id="L-1088"><a href="#L-1088"><span class="linenos">1088</span></a>            <span class="n">paramDict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getEV</span><span class="p">()</span>
</span><span id="L-1089"><a href="#L-1089"><span class="linenos">1089</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">exposure</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">paramDict</span><span class="p">[</span><span class="s1">&#39;EV&#39;</span><span class="p">])</span>
</span><span id="L-1090"><a href="#L-1090"><span class="linenos">1090</span></a>
</span><span id="L-1091"><a href="#L-1091"><span class="linenos">1091</span></a>            <span class="n">qPixmap</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">setImage</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
</span><span id="L-1092"><a href="#L-1092"><span class="linenos">1092</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">imageGalleryController</span><span class="o">.</span><span class="n">setProcessPipeWidgetQPixmap</span><span class="p">(</span><span class="n">qPixmap</span><span class="p">)</span>
</span><span id="L-1093"><a href="#L-1093"><span class="linenos">1093</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-1094"><a href="#L-1094"><span class="linenos">1094</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">changeExposure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">value</span><span class="p">):</span>
</span><span id="L-1095"><a href="#L-1095"><span class="linenos">1095</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1096"><a href="#L-1096"><span class="linenos">1096</span></a><span class="sd">        Adjust image exposure by specified EV value.</span>
</span><span id="L-1097"><a href="#L-1097"><span class="linenos">1097</span></a><span class="sd">        </span>
</span><span id="L-1098"><a href="#L-1098"><span class="linenos">1098</span></a><span class="sd">        Args:</span>
</span><span id="L-1099"><a href="#L-1099"><span class="linenos">1099</span></a><span class="sd">            value (float): Exposure adjustment in EV stops (positive = brighter)</span>
</span><span id="L-1100"><a href="#L-1100"><span class="linenos">1100</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1101"><a href="#L-1101"><span class="linenos">1101</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; EditImageController.changeExposure(&quot;</span><span class="p">,</span><span class="n">value</span><span class="p">,</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
</span><span id="L-1102"><a href="#L-1102"><span class="linenos">1102</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">processpipe</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">changeExposure</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span><span id="L-1103"><a href="#L-1103"><span class="linenos">1103</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-1104"><a href="#L-1104"><span class="linenos">1104</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">changeContrast</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">value</span><span class="p">):</span>
</span><span id="L-1105"><a href="#L-1105"><span class="linenos">1105</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1106"><a href="#L-1106"><span class="linenos">1106</span></a><span class="sd">        Adjust image contrast by specified amount.</span>
</span><span id="L-1107"><a href="#L-1107"><span class="linenos">1107</span></a><span class="sd">        </span>
</span><span id="L-1108"><a href="#L-1108"><span class="linenos">1108</span></a><span class="sd">        Args:</span>
</span><span id="L-1109"><a href="#L-1109"><span class="linenos">1109</span></a><span class="sd">            value (float): Contrast adjustment value (positive = more contrast)</span>
</span><span id="L-1110"><a href="#L-1110"><span class="linenos">1110</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1111"><a href="#L-1111"><span class="linenos">1111</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; EditImageController.changeContrast(&quot;</span><span class="p">,</span><span class="n">value</span><span class="p">,</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
</span><span id="L-1112"><a href="#L-1112"><span class="linenos">1112</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">processpipe</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">changeContrast</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span><span id="L-1113"><a href="#L-1113"><span class="linenos">1113</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-1114"><a href="#L-1114"><span class="linenos">1114</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">changeToneCurve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">controlPoints</span><span class="p">):</span>
</span><span id="L-1115"><a href="#L-1115"><span class="linenos">1115</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1116"><a href="#L-1116"><span class="linenos">1116</span></a><span class="sd">        Modify tone curve using B-spline control points.</span>
</span><span id="L-1117"><a href="#L-1117"><span class="linenos">1117</span></a><span class="sd">        </span>
</span><span id="L-1118"><a href="#L-1118"><span class="linenos">1118</span></a><span class="sd">        Args:</span>
</span><span id="L-1119"><a href="#L-1119"><span class="linenos">1119</span></a><span class="sd">            controlPoints (dict): Control points defining the tone curve shape</span>
</span><span id="L-1120"><a href="#L-1120"><span class="linenos">1120</span></a><span class="sd">                                 with keys like &#39;shadows&#39;, &#39;highlights&#39;, etc.</span>
</span><span id="L-1121"><a href="#L-1121"><span class="linenos">1121</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1122"><a href="#L-1122"><span class="linenos">1122</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; EditImageController.changeToneCurve(&quot;&quot;)&quot;</span><span class="p">)</span>
</span><span id="L-1123"><a href="#L-1123"><span class="linenos">1123</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">processpipe</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">changeToneCurve</span><span class="p">(</span><span class="n">controlPoints</span><span class="p">)</span>
</span><span id="L-1124"><a href="#L-1124"><span class="linenos">1124</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-1125"><a href="#L-1125"><span class="linenos">1125</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">changeLightnessMask</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">maskValues</span><span class="p">):</span>
</span><span id="L-1126"><a href="#L-1126"><span class="linenos">1126</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1127"><a href="#L-1127"><span class="linenos">1127</span></a><span class="sd">        Configure lightness-based masking for tone range selection.</span>
</span><span id="L-1128"><a href="#L-1128"><span class="linenos">1128</span></a><span class="sd">        </span>
</span><span id="L-1129"><a href="#L-1129"><span class="linenos">1129</span></a><span class="sd">        Args:</span>
</span><span id="L-1130"><a href="#L-1130"><span class="linenos">1130</span></a><span class="sd">            maskValues (dict): Mask configuration for different tone ranges</span>
</span><span id="L-1131"><a href="#L-1131"><span class="linenos">1131</span></a><span class="sd">                              (shadows, blacks, mediums, whites, highlights)</span>
</span><span id="L-1132"><a href="#L-1132"><span class="linenos">1132</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1133"><a href="#L-1133"><span class="linenos">1133</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; EditImageController.changeLightnessMask(&quot;</span><span class="p">,</span><span class="n">maskValues</span><span class="p">,</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
</span><span id="L-1134"><a href="#L-1134"><span class="linenos">1134</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">processpipe</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">changeLightnessMask</span><span class="p">(</span><span class="n">maskValues</span><span class="p">)</span>
</span><span id="L-1135"><a href="#L-1135"><span class="linenos">1135</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-1136"><a href="#L-1136"><span class="linenos">1136</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">changeSaturation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">value</span><span class="p">):</span>
</span><span id="L-1137"><a href="#L-1137"><span class="linenos">1137</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1138"><a href="#L-1138"><span class="linenos">1138</span></a><span class="sd">        Adjust color saturation globally.</span>
</span><span id="L-1139"><a href="#L-1139"><span class="linenos">1139</span></a><span class="sd">        </span>
</span><span id="L-1140"><a href="#L-1140"><span class="linenos">1140</span></a><span class="sd">        Args:</span>
</span><span id="L-1141"><a href="#L-1141"><span class="linenos">1141</span></a><span class="sd">            value (float): Saturation adjustment value (positive = more saturated)</span>
</span><span id="L-1142"><a href="#L-1142"><span class="linenos">1142</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1143"><a href="#L-1143"><span class="linenos">1143</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; EditImageController.changeSaturation(&quot;</span><span class="p">,</span><span class="n">value</span><span class="p">,</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
</span><span id="L-1144"><a href="#L-1144"><span class="linenos">1144</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">processpipe</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">changeSaturation</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span><span id="L-1145"><a href="#L-1145"><span class="linenos">1145</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-1146"><a href="#L-1146"><span class="linenos">1146</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">changeColorEditor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">values</span><span class="p">,</span> <span class="n">idName</span><span class="p">):</span>
</span><span id="L-1147"><a href="#L-1147"><span class="linenos">1147</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1148"><a href="#L-1148"><span class="linenos">1148</span></a><span class="sd">        Apply selective color editing to specific color ranges.</span>
</span><span id="L-1149"><a href="#L-1149"><span class="linenos">1149</span></a><span class="sd">        </span>
</span><span id="L-1150"><a href="#L-1150"><span class="linenos">1150</span></a><span class="sd">        Args:</span>
</span><span id="L-1151"><a href="#L-1151"><span class="linenos">1151</span></a><span class="sd">            values (dict): Color editing parameters including selection criteria</span>
</span><span id="L-1152"><a href="#L-1152"><span class="linenos">1152</span></a><span class="sd">                          and editing adjustments (hue, saturation, exposure, etc.)</span>
</span><span id="L-1153"><a href="#L-1153"><span class="linenos">1153</span></a><span class="sd">            idName (str): Identifier for the color editor instance</span>
</span><span id="L-1154"><a href="#L-1154"><span class="linenos">1154</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1155"><a href="#L-1155"><span class="linenos">1155</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; EditImageController.changeColorEditor(&quot;</span><span class="p">,</span><span class="n">values</span><span class="p">,</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
</span><span id="L-1156"><a href="#L-1156"><span class="linenos">1156</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">processpipe</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">changeColorEditor</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">idName</span><span class="p">)</span>
</span><span id="L-1157"><a href="#L-1157"><span class="linenos">1157</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-1158"><a href="#L-1158"><span class="linenos">1158</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">changeGeometry</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">values</span><span class="p">):</span>
</span><span id="L-1159"><a href="#L-1159"><span class="linenos">1159</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1160"><a href="#L-1160"><span class="linenos">1160</span></a><span class="sd">        Apply geometric transformations (crop, rotation, etc.).</span>
</span><span id="L-1161"><a href="#L-1161"><span class="linenos">1161</span></a><span class="sd">        </span>
</span><span id="L-1162"><a href="#L-1162"><span class="linenos">1162</span></a><span class="sd">        Args:</span>
</span><span id="L-1163"><a href="#L-1163"><span class="linenos">1163</span></a><span class="sd">            values (dict): Geometry parameters including crop ratios,</span>
</span><span id="L-1164"><a href="#L-1164"><span class="linenos">1164</span></a><span class="sd">                          rotation angles, and positioning adjustments</span>
</span><span id="L-1165"><a href="#L-1165"><span class="linenos">1165</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1166"><a href="#L-1166"><span class="linenos">1166</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; EditImageController.changeGeometry(&quot;</span><span class="p">,</span><span class="n">values</span><span class="p">,</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
</span><span id="L-1167"><a href="#L-1167"><span class="linenos">1167</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">processpipe</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">changeGeometry</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
</span><span id="L-1168"><a href="#L-1168"><span class="linenos">1168</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-1169"><a href="#L-1169"><span class="linenos">1169</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">updateImage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">imgTM</span><span class="p">):</span>
</span><span id="L-1170"><a href="#L-1170"><span class="linenos">1170</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1171"><a href="#L-1171"><span class="linenos">1171</span></a><span class="sd">        Handle processing completion and update displays.</span>
</span><span id="L-1172"><a href="#L-1172"><span class="linenos">1172</span></a><span class="sd">        </span>
</span><span id="L-1173"><a href="#L-1173"><span class="linenos">1173</span></a><span class="sd">        Called when the processing pipeline computation is complete, updates</span>
</span><span id="L-1174"><a href="#L-1174"><span class="linenos">1174</span></a><span class="sd">        the interface display, gallery thumbnail, and optionally triggers</span>
</span><span id="L-1175"><a href="#L-1175"><span class="linenos">1175</span></a><span class="sd">        HDR preview updates.</span>
</span><span id="L-1176"><a href="#L-1176"><span class="linenos">1176</span></a><span class="sd">        </span>
</span><span id="L-1177"><a href="#L-1177"><span class="linenos">1177</span></a><span class="sd">        Args:</span>
</span><span id="L-1178"><a href="#L-1178"><span class="linenos">1178</span></a><span class="sd">            imgTM (hdrCore.image.Image): Tone-mapped image for GUI display</span>
</span><span id="L-1179"><a href="#L-1179"><span class="linenos">1179</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1180"><a href="#L-1180"><span class="linenos">1180</span></a>        <span class="n">qPixmap</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">setImage</span><span class="p">(</span><span class="n">imgTM</span><span class="p">)</span>
</span><span id="L-1181"><a href="#L-1181"><span class="linenos">1181</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">imageGalleryController</span><span class="o">.</span><span class="n">setProcessPipeWidgetQPixmap</span><span class="p">(</span><span class="n">qPixmap</span><span class="p">)</span>
</span><span id="L-1182"><a href="#L-1182"><span class="linenos">1182</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">plotToneCurve</span><span class="p">()</span>
</span><span id="L-1183"><a href="#L-1183"><span class="linenos">1183</span></a>
</span><span id="L-1184"><a href="#L-1184"><span class="linenos">1184</span></a>        <span class="c1"># if aesthetics model &gt; notify required update</span>
</span><span id="L-1185"><a href="#L-1185"><span class="linenos">1185</span></a>
</span><span id="L-1186"><a href="#L-1186"><span class="linenos">1186</span></a>
</span><span id="L-1187"><a href="#L-1187"><span class="linenos">1187</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">previewHDR</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">autoPreviewHDR</span><span class="p">:</span>
</span><span id="L-1188"><a href="#L-1188"><span class="linenos">1188</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">controllerHDR</span><span class="o">.</span><span class="n">callBackUpdate</span><span class="p">()</span>
</span><span id="L-1189"><a href="#L-1189"><span class="linenos">1189</span></a><span class="c1"># ------------------------------------------------------------------------------------------</span>
</span><span id="L-1190"><a href="#L-1190"><span class="linenos">1190</span></a><span class="c1"># ------------------------------------------------------------------------------------------</span>
</span><span id="L-1191"><a href="#L-1191"><span class="linenos">1191</span></a><span class="c1"># ------------------------------------------------------------------------------------------</span>
</span><span id="L-1192"><a href="#L-1192"><span class="linenos">1192</span></a><span class="k">class</span><span class="w"> </span><span class="nc">ImageInfoController</span><span class="p">:</span>
</span><span id="L-1193"><a href="#L-1193"><span class="linenos">1193</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1194"><a href="#L-1194"><span class="linenos">1194</span></a><span class="sd">    Controller for image information and metadata display interface.</span>
</span><span id="L-1195"><a href="#L-1195"><span class="linenos">1195</span></a><span class="sd">    </span>
</span><span id="L-1196"><a href="#L-1196"><span class="linenos">1196</span></a><span class="sd">    This class manages the display and editing of image metadata, EXIF information,</span>
</span><span id="L-1197"><a href="#L-1197"><span class="linenos">1197</span></a><span class="sd">    processing history, and other image properties. It provides a comprehensive</span>
</span><span id="L-1198"><a href="#L-1198"><span class="linenos">1198</span></a><span class="sd">    view of all technical information associated with HDR images.</span>
</span><span id="L-1199"><a href="#L-1199"><span class="linenos">1199</span></a><span class="sd">    </span>
</span><span id="L-1200"><a href="#L-1200"><span class="linenos">1200</span></a><span class="sd">    The controller handles metadata organization, user-controlled metadata</span>
</span><span id="L-1201"><a href="#L-1201"><span class="linenos">1201</span></a><span class="sd">    visibility, and metadata modification workflows while maintaining</span>
</span><span id="L-1202"><a href="#L-1202"><span class="linenos">1202</span></a><span class="sd">    data integrity throughout the editing process.</span>
</span><span id="L-1203"><a href="#L-1203"><span class="linenos">1203</span></a><span class="sd">    </span>
</span><span id="L-1204"><a href="#L-1204"><span class="linenos">1204</span></a><span class="sd">    Attributes:</span>
</span><span id="L-1205"><a href="#L-1205"><span class="linenos">1205</span></a><span class="sd">        - parent: Parent controller for coordination</span>
</span><span id="L-1206"><a href="#L-1206"><span class="linenos">1206</span></a><span class="sd">        - view (view.ImageInfoView): Metadata display interface</span>
</span><span id="L-1207"><a href="#L-1207"><span class="linenos">1207</span></a><span class="sd">        - model (model.ImageInfoModel): Metadata management model</span>
</span><span id="L-1208"><a href="#L-1208"><span class="linenos">1208</span></a><span class="sd">        - callBackActive (bool): Enable/disable callback processing</span>
</span><span id="L-1209"><a href="#L-1209"><span class="linenos">1209</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1210"><a href="#L-1210"><span class="linenos">1210</span></a>
</span><span id="L-1211"><a href="#L-1211"><span class="linenos">1211</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="L-1212"><a href="#L-1212"><span class="linenos">1212</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1213"><a href="#L-1213"><span class="linenos">1213</span></a><span class="sd">        Initialize the image information controller.</span>
</span><span id="L-1214"><a href="#L-1214"><span class="linenos">1214</span></a><span class="sd">        </span>
</span><span id="L-1215"><a href="#L-1215"><span class="linenos">1215</span></a><span class="sd">        Args:</span>
</span><span id="L-1216"><a href="#L-1216"><span class="linenos">1216</span></a><span class="sd">            parent: Parent controller for coordination</span>
</span><span id="L-1217"><a href="#L-1217"><span class="linenos">1217</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1218"><a href="#L-1218"><span class="linenos">1218</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; ImageInfoController.__init__()&quot;</span><span class="p">)</span>
</span><span id="L-1219"><a href="#L-1219"><span class="linenos">1219</span></a>
</span><span id="L-1220"><a href="#L-1220"><span class="linenos">1220</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
</span><span id="L-1221"><a href="#L-1221"><span class="linenos">1221</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">ImageInfoView</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="L-1222"><a href="#L-1222"><span class="linenos">1222</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">ImageInfoModel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="L-1223"><a href="#L-1223"><span class="linenos">1223</span></a>
</span><span id="L-1224"><a href="#L-1224"><span class="linenos">1224</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-1225"><a href="#L-1225"><span class="linenos">1225</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-1226"><a href="#L-1226"><span class="linenos">1226</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setProcessPipe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">processPipe</span><span class="p">):</span> 
</span><span id="L-1227"><a href="#L-1227"><span class="linenos">1227</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1228"><a href="#L-1228"><span class="linenos">1228</span></a><span class="sd">        Set processing pipeline for metadata display.</span>
</span><span id="L-1229"><a href="#L-1229"><span class="linenos">1229</span></a><span class="sd">        </span>
</span><span id="L-1230"><a href="#L-1230"><span class="linenos">1230</span></a><span class="sd">        Configures the information interface to display metadata and properties</span>
</span><span id="L-1231"><a href="#L-1231"><span class="linenos">1231</span></a><span class="sd">        for the specified processing pipeline&#39;s image.</span>
</span><span id="L-1232"><a href="#L-1232"><span class="linenos">1232</span></a><span class="sd">        </span>
</span><span id="L-1233"><a href="#L-1233"><span class="linenos">1233</span></a><span class="sd">        Args:</span>
</span><span id="L-1234"><a href="#L-1234"><span class="linenos">1234</span></a><span class="sd">            processPipe: Processing pipeline containing image with metadata</span>
</span><span id="L-1235"><a href="#L-1235"><span class="linenos">1235</span></a><span class="sd">            </span>
</span><span id="L-1236"><a href="#L-1236"><span class="linenos">1236</span></a><span class="sd">        Returns:</span>
</span><span id="L-1237"><a href="#L-1237"><span class="linenos">1237</span></a><span class="sd">            bool: True (always successful for info display)</span>
</span><span id="L-1238"><a href="#L-1238"><span class="linenos">1238</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1239"><a href="#L-1239"><span class="linenos">1239</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; ImageInfoController.setProcessPipe(&quot;</span><span class="p">,</span><span class="n">processPipe</span><span class="o">.</span><span class="n">getImage</span><span class="p">()</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
</span><span id="L-1240"><a href="#L-1240"><span class="linenos">1240</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setProcessPipe</span><span class="p">(</span><span class="n">processPipe</span><span class="p">)</span>
</span><span id="L-1241"><a href="#L-1241"><span class="linenos">1241</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">setProcessPipe</span><span class="p">(</span><span class="n">processPipe</span><span class="p">)</span>
</span><span id="L-1242"><a href="#L-1242"><span class="linenos">1242</span></a>        <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-1243"><a href="#L-1243"><span class="linenos">1243</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-1244"><a href="#L-1244"><span class="linenos">1244</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">buildView</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">processPipe</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="L-1245"><a href="#L-1245"><span class="linenos">1245</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1246"><a href="#L-1246"><span class="linenos">1246</span></a><span class="sd">        Build or rebuild the information interface view.</span>
</span><span id="L-1247"><a href="#L-1247"><span class="linenos">1247</span></a><span class="sd">        </span>
</span><span id="L-1248"><a href="#L-1248"><span class="linenos">1248</span></a><span class="sd">        Reconstructs the metadata display interface, typically called when</span>
</span><span id="L-1249"><a href="#L-1249"><span class="linenos">1249</span></a><span class="sd">        switching panels or refreshing the information display.</span>
</span><span id="L-1250"><a href="#L-1250"><span class="linenos">1250</span></a><span class="sd">        </span>
</span><span id="L-1251"><a href="#L-1251"><span class="linenos">1251</span></a><span class="sd">        Args:</span>
</span><span id="L-1252"><a href="#L-1252"><span class="linenos">1252</span></a><span class="sd">            processPipe: Optional processing pipeline to set during build</span>
</span><span id="L-1253"><a href="#L-1253"><span class="linenos">1253</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1254"><a href="#L-1254"><span class="linenos">1254</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; ImageInfoController.buildView()&quot;</span><span class="p">)</span>
</span><span id="L-1255"><a href="#L-1255"><span class="linenos">1255</span></a>
</span><span id="L-1256"><a href="#L-1256"><span class="linenos">1256</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot; called when MultiDockController recall a controller/view &quot;&quot;&quot;</span>
</span><span id="L-1257"><a href="#L-1257"><span class="linenos">1257</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">ImageInfoView</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="L-1258"><a href="#L-1258"><span class="linenos">1258</span></a>        <span class="k">if</span> <span class="n">processPipe</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">setProcessPipe</span><span class="p">(</span><span class="n">processPipe</span><span class="p">)</span>
</span><span id="L-1259"><a href="#L-1259"><span class="linenos">1259</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-1260"><a href="#L-1260"><span class="linenos">1260</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">metadataChange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">metaGroup</span><span class="p">,</span><span class="n">metaTag</span><span class="p">,</span> <span class="n">on_off</span><span class="p">):</span> 
</span><span id="L-1261"><a href="#L-1261"><span class="linenos">1261</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1262"><a href="#L-1262"><span class="linenos">1262</span></a><span class="sd">        Handle changes to metadata visibility or editing state.</span>
</span><span id="L-1263"><a href="#L-1263"><span class="linenos">1263</span></a><span class="sd">        </span>
</span><span id="L-1264"><a href="#L-1264"><span class="linenos">1264</span></a><span class="sd">        Processes user interactions with metadata display controls, allowing</span>
</span><span id="L-1265"><a href="#L-1265"><span class="linenos">1265</span></a><span class="sd">        users to show/hide specific metadata groups or modify metadata values.</span>
</span><span id="L-1266"><a href="#L-1266"><span class="linenos">1266</span></a><span class="sd">        </span>
</span><span id="L-1267"><a href="#L-1267"><span class="linenos">1267</span></a><span class="sd">        Args:</span>
</span><span id="L-1268"><a href="#L-1268"><span class="linenos">1268</span></a><span class="sd">            metaGroup (str): Metadata group identifier (e.g., &#39;EXIF&#39;, &#39;processing&#39;)</span>
</span><span id="L-1269"><a href="#L-1269"><span class="linenos">1269</span></a><span class="sd">            metaTag (str): Specific metadata tag within the group</span>
</span><span id="L-1270"><a href="#L-1270"><span class="linenos">1270</span></a><span class="sd">            on_off (bool): Enable/disable state for the metadata element</span>
</span><span id="L-1271"><a href="#L-1271"><span class="linenos">1271</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1272"><a href="#L-1272"><span class="linenos">1272</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; ImageInfoController.useCaseChange(&quot;</span><span class="p">,</span><span class="n">metaGroup</span><span class="p">,</span><span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="n">metaTag</span><span class="p">,</span><span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="n">on_off</span><span class="p">,</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
</span><span id="L-1273"><a href="#L-1273"><span class="linenos">1273</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">changeMeta</span><span class="p">(</span><span class="n">metaGroup</span><span class="p">,</span><span class="n">metaTag</span><span class="p">,</span> <span class="n">on_off</span><span class="p">)</span>
</span><span id="L-1274"><a href="#L-1274"><span class="linenos">1274</span></a><span class="c1"># ------------------------------------------------------------------------------------------</span>
</span><span id="L-1275"><a href="#L-1275"><span class="linenos">1275</span></a><span class="c1"># ------------------------------------------------------------------------------------------</span>
</span><span id="L-1276"><a href="#L-1276"><span class="linenos">1276</span></a><span class="c1"># ------------------------------------------------------------------------------------------</span>
</span><span id="L-1277"><a href="#L-1277"><span class="linenos">1277</span></a><span class="k">class</span><span class="w"> </span><span class="nc">AdvanceSliderController</span><span class="p">():</span>
</span><span id="L-1278"><a href="#L-1278"><span class="linenos">1278</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1279"><a href="#L-1279"><span class="linenos">1279</span></a><span class="sd">    Controller for advanced slider controls with auto-adjustment capabilities.</span>
</span><span id="L-1280"><a href="#L-1280"><span class="linenos">1280</span></a><span class="sd">    </span>
</span><span id="L-1281"><a href="#L-1281"><span class="linenos">1281</span></a><span class="sd">    This class provides enhanced slider functionality with features like automatic</span>
</span><span id="L-1282"><a href="#L-1282"><span class="linenos">1282</span></a><span class="sd">    value calculation, reset capabilities, and custom step sizes. It&#39;s used throughout</span>
</span><span id="L-1283"><a href="#L-1283"><span class="linenos">1283</span></a><span class="sd">    the HDR editing interface for precise parameter control with additional</span>
</span><span id="L-1284"><a href="#L-1284"><span class="linenos">1284</span></a><span class="sd">    automation features.</span>
</span><span id="L-1285"><a href="#L-1285"><span class="linenos">1285</span></a><span class="sd">    </span>
</span><span id="L-1286"><a href="#L-1286"><span class="linenos">1286</span></a><span class="sd">    The advanced slider combines manual adjustment with intelligent auto-adjustment</span>
</span><span id="L-1287"><a href="#L-1287"><span class="linenos">1287</span></a><span class="sd">    algorithms, allowing users to fine-tune parameters manually or rely on</span>
</span><span id="L-1288"><a href="#L-1288"><span class="linenos">1288</span></a><span class="sd">    automatic optimization algorithms.</span>
</span><span id="L-1289"><a href="#L-1289"><span class="linenos">1289</span></a><span class="sd">    </span>
</span><span id="L-1290"><a href="#L-1290"><span class="linenos">1290</span></a><span class="sd">    Attributes:</span>
</span><span id="L-1291"><a href="#L-1291"><span class="linenos">1291</span></a><span class="sd">        - parent: Parent controller for coordination</span>
</span><span id="L-1292"><a href="#L-1292"><span class="linenos">1292</span></a><span class="sd">        - view (view.AdvanceSliderView): Slider interface component</span>
</span><span id="L-1293"><a href="#L-1293"><span class="linenos">1293</span></a><span class="sd">        - model (model.AdvanceSliderModel): Slider data model</span>
</span><span id="L-1294"><a href="#L-1294"><span class="linenos">1294</span></a><span class="sd">        - step (float): Step size for slider increments</span>
</span><span id="L-1295"><a href="#L-1295"><span class="linenos">1295</span></a><span class="sd">        - defaultValue (float): Default/reset value for the slider</span>
</span><span id="L-1296"><a href="#L-1296"><span class="linenos">1296</span></a><span class="sd">        - range (tuple): Minimum and maximum values for the slider</span>
</span><span id="L-1297"><a href="#L-1297"><span class="linenos">1297</span></a><span class="sd">        - callBackActive (bool): Enable/disable callback processing</span>
</span><span id="L-1298"><a href="#L-1298"><span class="linenos">1298</span></a><span class="sd">        - callBackValueChange: Callback function for value changes</span>
</span><span id="L-1299"><a href="#L-1299"><span class="linenos">1299</span></a><span class="sd">        - callBackAutoPush: Callback function for auto-adjustment</span>
</span><span id="L-1300"><a href="#L-1300"><span class="linenos">1300</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1301"><a href="#L-1301"><span class="linenos">1301</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span><span class="n">name</span><span class="p">,</span> <span class="n">defaultValue</span><span class="p">,</span> <span class="nb">range</span><span class="p">,</span> <span class="n">step</span><span class="p">,</span><span class="n">callBackValueChange</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">callBackAutoPush</span><span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="L-1302"><a href="#L-1302"><span class="linenos">1302</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1303"><a href="#L-1303"><span class="linenos">1303</span></a><span class="sd">        Initialize the advanced slider controller.</span>
</span><span id="L-1304"><a href="#L-1304"><span class="linenos">1304</span></a><span class="sd">        </span>
</span><span id="L-1305"><a href="#L-1305"><span class="linenos">1305</span></a><span class="sd">        Args:</span>
</span><span id="L-1306"><a href="#L-1306"><span class="linenos">1306</span></a><span class="sd">            parent: Parent controller for coordination</span>
</span><span id="L-1307"><a href="#L-1307"><span class="linenos">1307</span></a><span class="sd">            name (str): Display name for the slider</span>
</span><span id="L-1308"><a href="#L-1308"><span class="linenos">1308</span></a><span class="sd">            defaultValue (float): Default value for reset functionality</span>
</span><span id="L-1309"><a href="#L-1309"><span class="linenos">1309</span></a><span class="sd">            range (tuple): (min, max) range for slider values</span>
</span><span id="L-1310"><a href="#L-1310"><span class="linenos">1310</span></a><span class="sd">            step (float): Step size for value increments</span>
</span><span id="L-1311"><a href="#L-1311"><span class="linenos">1311</span></a><span class="sd">            callBackValueChange: Callback function for value changes</span>
</span><span id="L-1312"><a href="#L-1312"><span class="linenos">1312</span></a><span class="sd">            callBackAutoPush: Callback function for auto-adjustment</span>
</span><span id="L-1313"><a href="#L-1313"><span class="linenos">1313</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1314"><a href="#L-1314"><span class="linenos">1314</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; AdvanceSliderController.__init__(&quot;</span><span class="p">,</span><span class="s2">&quot;) &quot;</span><span class="p">)</span>
</span><span id="L-1315"><a href="#L-1315"><span class="linenos">1315</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
</span><span id="L-1316"><a href="#L-1316"><span class="linenos">1316</span></a>
</span><span id="L-1317"><a href="#L-1317"><span class="linenos">1317</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">AdvanceSliderView</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>  <span class="n">name</span><span class="p">,</span> <span class="n">defaultValue</span><span class="p">,</span> <span class="nb">range</span><span class="p">,</span> <span class="n">step</span><span class="p">)</span>
</span><span id="L-1318"><a href="#L-1318"><span class="linenos">1318</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">AdvanceSliderModel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">defaultValue</span><span class="p">)</span>
</span><span id="L-1319"><a href="#L-1319"><span class="linenos">1319</span></a>
</span><span id="L-1320"><a href="#L-1320"><span class="linenos">1320</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">step</span> <span class="o">=</span> <span class="n">step</span>
</span><span id="L-1321"><a href="#L-1321"><span class="linenos">1321</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">defaultValue</span> <span class="o">=</span> <span class="n">defaultValue</span>
</span><span id="L-1322"><a href="#L-1322"><span class="linenos">1322</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">range</span> <span class="o">=</span> <span class="nb">range</span>
</span><span id="L-1323"><a href="#L-1323"><span class="linenos">1323</span></a>
</span><span id="L-1324"><a href="#L-1324"><span class="linenos">1324</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-1325"><a href="#L-1325"><span class="linenos">1325</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackValueChange</span> <span class="o">=</span> <span class="n">callBackValueChange</span>
</span><span id="L-1326"><a href="#L-1326"><span class="linenos">1326</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackAutoPush</span> <span class="o">=</span> <span class="n">callBackAutoPush</span>
</span><span id="L-1327"><a href="#L-1327"><span class="linenos">1327</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-1328"><a href="#L-1328"><span class="linenos">1328</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">sliderChange</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-1329"><a href="#L-1329"><span class="linenos">1329</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1330"><a href="#L-1330"><span class="linenos">1330</span></a><span class="sd">        Handle manual slider value changes.</span>
</span><span id="L-1331"><a href="#L-1331"><span class="linenos">1331</span></a><span class="sd">        </span>
</span><span id="L-1332"><a href="#L-1332"><span class="linenos">1332</span></a><span class="sd">        Processes slider movement events, updates the model and display,</span>
</span><span id="L-1333"><a href="#L-1333"><span class="linenos">1333</span></a><span class="sd">        and triggers the value change callback if active. Converts slider</span>
</span><span id="L-1334"><a href="#L-1334"><span class="linenos">1334</span></a><span class="sd">        position to actual value using the configured step size.</span>
</span><span id="L-1335"><a href="#L-1335"><span class="linenos">1335</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1336"><a href="#L-1336"><span class="linenos">1336</span></a>
</span><span id="L-1337"><a href="#L-1337"><span class="linenos">1337</span></a>        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">slider</span><span class="o">.</span><span class="n">value</span><span class="p">()</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">step</span>
</span><span id="L-1338"><a href="#L-1338"><span class="linenos">1338</span></a>
</span><span id="L-1339"><a href="#L-1339"><span class="linenos">1339</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CB] &gt;&gt; AdvanceSliderController.sliderChange(&quot;</span><span class="p">,</span><span class="n">value</span><span class="p">,</span><span class="s2">&quot;)[callBackActive:&quot;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span><span class="p">,</span><span class="s2">&quot;] &quot;</span><span class="p">)</span>
</span><span id="L-1340"><a href="#L-1340"><span class="linenos">1340</span></a>
</span><span id="L-1341"><a href="#L-1341"><span class="linenos">1341</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="L-1342"><a href="#L-1342"><span class="linenos">1342</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">editValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
</span><span id="L-1343"><a href="#L-1343"><span class="linenos">1343</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">callBackValueChange</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">callBackValueChange</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span><span id="L-1344"><a href="#L-1344"><span class="linenos">1344</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-1345"><a href="#L-1345"><span class="linenos">1345</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setValue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
</span><span id="L-1346"><a href="#L-1346"><span class="linenos">1346</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1347"><a href="#L-1347"><span class="linenos">1347</span></a><span class="sd">        Set slider value programmatically.</span>
</span><span id="L-1348"><a href="#L-1348"><span class="linenos">1348</span></a><span class="sd">        </span>
</span><span id="L-1349"><a href="#L-1349"><span class="linenos">1349</span></a><span class="sd">        Updates the slider position and display to reflect the specified value,</span>
</span><span id="L-1350"><a href="#L-1350"><span class="linenos">1350</span></a><span class="sd">        with optional callback suppression for initialization or batch updates.</span>
</span><span id="L-1351"><a href="#L-1351"><span class="linenos">1351</span></a><span class="sd">        </span>
</span><span id="L-1352"><a href="#L-1352"><span class="linenos">1352</span></a><span class="sd">        Args:</span>
</span><span id="L-1353"><a href="#L-1353"><span class="linenos">1353</span></a><span class="sd">            value (float): New value to set</span>
</span><span id="L-1354"><a href="#L-1354"><span class="linenos">1354</span></a><span class="sd">            callBackActive (bool, optional): Whether to trigger callbacks (default: True)</span>
</span><span id="L-1355"><a href="#L-1355"><span class="linenos">1355</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1356"><a href="#L-1356"><span class="linenos">1356</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; AdvanceSliderController.setValue(&quot;</span><span class="p">,</span><span class="n">value</span><span class="p">,</span><span class="s2">&quot;) &quot;</span><span class="p">)</span>
</span><span id="L-1357"><a href="#L-1357"><span class="linenos">1357</span></a>
</span><span id="L-1358"><a href="#L-1358"><span class="linenos">1358</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot; set value value in &#39;model&#39; range&quot;&quot;&quot;</span>
</span><span id="L-1359"><a href="#L-1359"><span class="linenos">1359</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="n">callBackActive</span>
</span><span id="L-1360"><a href="#L-1360"><span class="linenos">1360</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">slider</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">step</span><span class="p">))</span>
</span><span id="L-1361"><a href="#L-1361"><span class="linenos">1361</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">editValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
</span><span id="L-1362"><a href="#L-1362"><span class="linenos">1362</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
</span><span id="L-1363"><a href="#L-1363"><span class="linenos">1363</span></a>
</span><span id="L-1364"><a href="#L-1364"><span class="linenos">1364</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-1365"><a href="#L-1365"><span class="linenos">1365</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-1366"><a href="#L-1366"><span class="linenos">1366</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-1367"><a href="#L-1367"><span class="linenos">1367</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1368"><a href="#L-1368"><span class="linenos">1368</span></a><span class="sd">        Reset slider to its default value.</span>
</span><span id="L-1369"><a href="#L-1369"><span class="linenos">1369</span></a><span class="sd">        </span>
</span><span id="L-1370"><a href="#L-1370"><span class="linenos">1370</span></a><span class="sd">        Restores the slider to its initial default value and triggers</span>
</span><span id="L-1371"><a href="#L-1371"><span class="linenos">1371</span></a><span class="sd">        the value change callback to update dependent processing.</span>
</span><span id="L-1372"><a href="#L-1372"><span class="linenos">1372</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1373"><a href="#L-1373"><span class="linenos">1373</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span> <span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CB] &gt;&gt; AdvanceSliderController.reset(&quot;</span><span class="p">,</span><span class="s2">&quot;) &quot;</span><span class="p">)</span>
</span><span id="L-1374"><a href="#L-1374"><span class="linenos">1374</span></a>
</span><span id="L-1375"><a href="#L-1375"><span class="linenos">1375</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">defaultValue</span><span class="p">,</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="L-1376"><a href="#L-1376"><span class="linenos">1376</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">callBackValueChange</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">callBackValueChange</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">defaultValue</span><span class="p">)</span>
</span><span id="L-1377"><a href="#L-1377"><span class="linenos">1377</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-1378"><a href="#L-1378"><span class="linenos">1378</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">auto</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-1379"><a href="#L-1379"><span class="linenos">1379</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1380"><a href="#L-1380"><span class="linenos">1380</span></a><span class="sd">        Trigger automatic value calculation.</span>
</span><span id="L-1381"><a href="#L-1381"><span class="linenos">1381</span></a><span class="sd">        </span>
</span><span id="L-1382"><a href="#L-1382"><span class="linenos">1382</span></a><span class="sd">        Initiates the auto-adjustment algorithm by calling the registered</span>
</span><span id="L-1383"><a href="#L-1383"><span class="linenos">1383</span></a><span class="sd">        auto-push callback, which typically analyzes the image and sets</span>
</span><span id="L-1384"><a href="#L-1384"><span class="linenos">1384</span></a><span class="sd">        an optimal value automatically.</span>
</span><span id="L-1385"><a href="#L-1385"><span class="linenos">1385</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1386"><a href="#L-1386"><span class="linenos">1386</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CB] &gt;&gt; AdvanceSliderController.auto(&quot;</span><span class="p">,</span><span class="s2">&quot;) &quot;</span><span class="p">)</span>
</span><span id="L-1387"><a href="#L-1387"><span class="linenos">1387</span></a>
</span><span id="L-1388"><a href="#L-1388"><span class="linenos">1388</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">callBackAutoPush</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">callBackAutoPush</span><span class="p">()</span>
</span><span id="L-1389"><a href="#L-1389"><span class="linenos">1389</span></a><span class="c1"># ------------------------------------------------------------------------------------------</span>
</span><span id="L-1390"><a href="#L-1390"><span class="linenos">1390</span></a><span class="c1"># --- class AdvanceSliderController --------------------------------------------------------</span>
</span><span id="L-1391"><a href="#L-1391"><span class="linenos">1391</span></a><span class="c1"># ------------------------------------------------------------------------------------------</span>
</span><span id="L-1392"><a href="#L-1392"><span class="linenos">1392</span></a><span class="k">class</span><span class="w"> </span><span class="nc">ToneCurveController</span><span class="p">():</span>
</span><span id="L-1393"><a href="#L-1393"><span class="linenos">1393</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1394"><a href="#L-1394"><span class="linenos">1394</span></a><span class="sd">    Controller for tone curve editing with B-spline interpolation.</span>
</span><span id="L-1395"><a href="#L-1395"><span class="linenos">1395</span></a><span class="sd">    </span>
</span><span id="L-1396"><a href="#L-1396"><span class="linenos">1396</span></a><span class="sd">    This class manages the tone curve editing interface, allowing users to adjust</span>
</span><span id="L-1397"><a href="#L-1397"><span class="linenos">1397</span></a><span class="sd">    the luminance mapping through control points that define a smooth B-spline curve.</span>
</span><span id="L-1398"><a href="#L-1398"><span class="linenos">1398</span></a><span class="sd">    It includes automatic curve generation using machine learning, histogram overlay</span>
</span><span id="L-1399"><a href="#L-1399"><span class="linenos">1399</span></a><span class="sd">    display, and comprehensive curve visualization options.</span>
</span><span id="L-1400"><a href="#L-1400"><span class="linenos">1400</span></a><span class="sd">    </span>
</span><span id="L-1401"><a href="#L-1401"><span class="linenos">1401</span></a><span class="sd">    The tone curve is a fundamental HDR processing tool that maps input luminance</span>
</span><span id="L-1402"><a href="#L-1402"><span class="linenos">1402</span></a><span class="sd">    values to output values, effectively controlling the overall tone mapping</span>
</span><span id="L-1403"><a href="#L-1403"><span class="linenos">1403</span></a><span class="sd">    and local contrast of the image.</span>
</span><span id="L-1404"><a href="#L-1404"><span class="linenos">1404</span></a><span class="sd">    </span>
</span><span id="L-1405"><a href="#L-1405"><span class="linenos">1405</span></a><span class="sd">    Attributes:</span>
</span><span id="L-1406"><a href="#L-1406"><span class="linenos">1406</span></a><span class="sd">        - parent: Parent controller for coordination</span>
</span><span id="L-1407"><a href="#L-1407"><span class="linenos">1407</span></a><span class="sd">        - model (model.ToneCurveModel): Tone curve mathematical model</span>
</span><span id="L-1408"><a href="#L-1408"><span class="linenos">1408</span></a><span class="sd">        - view (view.ToneCurveView): Curve editing interface</span>
</span><span id="L-1409"><a href="#L-1409"><span class="linenos">1409</span></a><span class="sd">        - callBackActive (bool): Enable/disable callback processing</span>
</span><span id="L-1410"><a href="#L-1410"><span class="linenos">1410</span></a><span class="sd">        - showInput (bool): Display input image histogram</span>
</span><span id="L-1411"><a href="#L-1411"><span class="linenos">1411</span></a><span class="sd">        - showbefore (bool): Display pre-curve histogram</span>
</span><span id="L-1412"><a href="#L-1412"><span class="linenos">1412</span></a><span class="sd">        - showAfter (bool): Display post-curve histogram  </span>
</span><span id="L-1413"><a href="#L-1413"><span class="linenos">1413</span></a><span class="sd">        - showOutput (bool): Display final output histogram</span>
</span><span id="L-1414"><a href="#L-1414"><span class="linenos">1414</span></a><span class="sd">        - weightFile (str): Machine learning model file for auto-curve</span>
</span><span id="L-1415"><a href="#L-1415"><span class="linenos">1415</span></a><span class="sd">        - networkModel: PyTorch neural network for automatic curve generation</span>
</span><span id="L-1416"><a href="#L-1416"><span class="linenos">1416</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1417"><a href="#L-1417"><span class="linenos">1417</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
</span><span id="L-1418"><a href="#L-1418"><span class="linenos">1418</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1419"><a href="#L-1419"><span class="linenos">1419</span></a><span class="sd">        Initialize the tone curve controller.</span>
</span><span id="L-1420"><a href="#L-1420"><span class="linenos">1420</span></a><span class="sd">        </span>
</span><span id="L-1421"><a href="#L-1421"><span class="linenos">1421</span></a><span class="sd">        Args:</span>
</span><span id="L-1422"><a href="#L-1422"><span class="linenos">1422</span></a><span class="sd">            parent: Parent controller for coordination and image access</span>
</span><span id="L-1423"><a href="#L-1423"><span class="linenos">1423</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1424"><a href="#L-1424"><span class="linenos">1424</span></a>
</span><span id="L-1425"><a href="#L-1425"><span class="linenos">1425</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
</span><span id="L-1426"><a href="#L-1426"><span class="linenos">1426</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">ToneCurveModel</span><span class="p">()</span>
</span><span id="L-1427"><a href="#L-1427"><span class="linenos">1427</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">ToneCurveView</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="L-1428"><a href="#L-1428"><span class="linenos">1428</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-1429"><a href="#L-1429"><span class="linenos">1429</span></a>
</span><span id="L-1430"><a href="#L-1430"><span class="linenos">1430</span></a>        <span class="c1"># tone curve display control</span>
</span><span id="L-1431"><a href="#L-1431"><span class="linenos">1431</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">showInput</span> <span class="o">=</span><span class="kc">False</span>
</span><span id="L-1432"><a href="#L-1432"><span class="linenos">1432</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">showbefore</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-1433"><a href="#L-1433"><span class="linenos">1433</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">showAfter</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-1434"><a href="#L-1434"><span class="linenos">1434</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">showOutput</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-1435"><a href="#L-1435"><span class="linenos">1435</span></a>
</span><span id="L-1436"><a href="#L-1436"><span class="linenos">1436</span></a>        <span class="c1"># zj add semi-auto curve</span>
</span><span id="L-1437"><a href="#L-1437"><span class="linenos">1437</span></a>        <span class="c1"># machine learning network and weight file </span>
</span><span id="L-1438"><a href="#L-1438"><span class="linenos">1438</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">weightFile</span> <span class="o">=</span> <span class="s1">&#39;MSESig505_0419.pth&#39;</span>
</span><span id="L-1439"><a href="#L-1439"><span class="linenos">1439</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">networkModel</span> <span class="o">=</span> <span class="kc">None</span>  
</span><span id="L-1440"><a href="#L-1440"><span class="linenos">1440</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-1441"><a href="#L-1441"><span class="linenos">1441</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">sliderChange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
</span><span id="L-1442"><a href="#L-1442"><span class="linenos">1442</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1443"><a href="#L-1443"><span class="linenos">1443</span></a><span class="sd">        Handle tone curve control point adjustments.</span>
</span><span id="L-1444"><a href="#L-1444"><span class="linenos">1444</span></a><span class="sd">        </span>
</span><span id="L-1445"><a href="#L-1445"><span class="linenos">1445</span></a><span class="sd">        Processes changes to individual control points (shadows, blacks, mediums,</span>
</span><span id="L-1446"><a href="#L-1446"><span class="linenos">1446</span></a><span class="sd">        whites, highlights), updates the B-spline curve, and triggers processing</span>
</span><span id="L-1447"><a href="#L-1447"><span class="linenos">1447</span></a><span class="sd">        pipeline updates. Auto-scales related control points to maintain curve smoothness.</span>
</span><span id="L-1448"><a href="#L-1448"><span class="linenos">1448</span></a><span class="sd">        </span>
</span><span id="L-1449"><a href="#L-1449"><span class="linenos">1449</span></a><span class="sd">        Args:</span>
</span><span id="L-1450"><a href="#L-1450"><span class="linenos">1450</span></a><span class="sd">            key (str): Control point identifier (&#39;shadows&#39;, &#39;blacks&#39;, etc.)</span>
</span><span id="L-1451"><a href="#L-1451"><span class="linenos">1451</span></a><span class="sd">            value (float): New value for the control point</span>
</span><span id="L-1452"><a href="#L-1452"><span class="linenos">1452</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1453"><a href="#L-1453"><span class="linenos">1453</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CB] &gt;&gt; ToneCurveController.sliderChange(&quot;</span><span class="p">,</span><span class="n">key</span><span class="p">,</span><span class="s2">&quot;,&quot;</span><span class="p">,</span><span class="n">value</span><span class="p">,</span><span class="s2">&quot;)[callBackActive:&quot;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span><span class="p">,</span><span class="s2">&quot;] &quot;</span><span class="p">)</span>
</span><span id="L-1454"><a href="#L-1454"><span class="linenos">1454</span></a>
</span><span id="L-1455"><a href="#L-1455"><span class="linenos">1455</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span><span class="p">:</span>
</span><span id="L-1456"><a href="#L-1456"><span class="linenos">1456</span></a>            <span class="n">newValues</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">autoScale</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="L-1457"><a href="#L-1457"><span class="linenos">1457</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">changeToneCurve</span><span class="p">(</span><span class="n">newValues</span><span class="p">)</span> 
</span><span id="L-1458"><a href="#L-1458"><span class="linenos">1458</span></a>  
</span><span id="L-1459"><a href="#L-1459"><span class="linenos">1459</span></a>            <span class="n">points</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">evaluate</span><span class="p">()</span>
</span><span id="L-1460"><a href="#L-1460"><span class="linenos">1460</span></a>
</span><span id="L-1461"><a href="#L-1461"><span class="linenos">1461</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span>  <span class="kc">False</span>
</span><span id="L-1462"><a href="#L-1462"><span class="linenos">1462</span></a>
</span><span id="L-1463"><a href="#L-1463"><span class="linenos">1463</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderShadows</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">newValues</span><span class="p">[</span><span class="s2">&quot;shadows&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="L-1464"><a href="#L-1464"><span class="linenos">1464</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">editShadows</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">newValues</span><span class="p">[</span><span class="s2">&quot;shadows&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="L-1465"><a href="#L-1465"><span class="linenos">1465</span></a>
</span><span id="L-1466"><a href="#L-1466"><span class="linenos">1466</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderBlacks</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">newValues</span><span class="p">[</span><span class="s2">&quot;blacks&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="L-1467"><a href="#L-1467"><span class="linenos">1467</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">editBlacks</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">newValues</span><span class="p">[</span><span class="s2">&quot;blacks&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="L-1468"><a href="#L-1468"><span class="linenos">1468</span></a>
</span><span id="L-1469"><a href="#L-1469"><span class="linenos">1469</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderMediums</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">newValues</span><span class="p">[</span><span class="s2">&quot;mediums&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="L-1470"><a href="#L-1470"><span class="linenos">1470</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">editMediums</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">newValues</span><span class="p">[</span><span class="s2">&quot;mediums&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="L-1471"><a href="#L-1471"><span class="linenos">1471</span></a>
</span><span id="L-1472"><a href="#L-1472"><span class="linenos">1472</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderWhites</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">newValues</span><span class="p">[</span><span class="s2">&quot;whites&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="L-1473"><a href="#L-1473"><span class="linenos">1473</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">editWhites</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">newValues</span><span class="p">[</span><span class="s2">&quot;whites&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="L-1474"><a href="#L-1474"><span class="linenos">1474</span></a>
</span><span id="L-1475"><a href="#L-1475"><span class="linenos">1475</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderHighlights</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">newValues</span><span class="p">[</span><span class="s2">&quot;highlights&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="L-1476"><a href="#L-1476"><span class="linenos">1476</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">editHighlights</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">newValues</span><span class="p">[</span><span class="s2">&quot;highlights&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="L-1477"><a href="#L-1477"><span class="linenos">1477</span></a>
</span><span id="L-1478"><a href="#L-1478"><span class="linenos">1478</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span>  <span class="kc">True</span>
</span><span id="L-1479"><a href="#L-1479"><span class="linenos">1479</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-1480"><a href="#L-1480"><span class="linenos">1480</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setValues</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">valuesDict</span><span class="p">,</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="L-1481"><a href="#L-1481"><span class="linenos">1481</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1482"><a href="#L-1482"><span class="linenos">1482</span></a><span class="sd">        Set all tone curve control points programmatically.</span>
</span><span id="L-1483"><a href="#L-1483"><span class="linenos">1483</span></a><span class="sd">        </span>
</span><span id="L-1484"><a href="#L-1484"><span class="linenos">1484</span></a><span class="sd">        Updates all control points simultaneously and refreshes the interface</span>
</span><span id="L-1485"><a href="#L-1485"><span class="linenos">1485</span></a><span class="sd">        to reflect the new curve shape. Typically used for loading saved</span>
</span><span id="L-1486"><a href="#L-1486"><span class="linenos">1486</span></a><span class="sd">        curves or applying automatic curve calculations.</span>
</span><span id="L-1487"><a href="#L-1487"><span class="linenos">1487</span></a><span class="sd">        </span>
</span><span id="L-1488"><a href="#L-1488"><span class="linenos">1488</span></a><span class="sd">        Args:</span>
</span><span id="L-1489"><a href="#L-1489"><span class="linenos">1489</span></a><span class="sd">            valuesDict (dict): Dictionary containing all control point values</span>
</span><span id="L-1490"><a href="#L-1490"><span class="linenos">1490</span></a><span class="sd">                             with keys like &#39;shadows&#39;, &#39;blacks&#39;, &#39;mediums&#39;, etc.</span>
</span><span id="L-1491"><a href="#L-1491"><span class="linenos">1491</span></a><span class="sd">            callBackActive (bool, optional): Whether to trigger callbacks (default: False)</span>
</span><span id="L-1492"><a href="#L-1492"><span class="linenos">1492</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1493"><a href="#L-1493"><span class="linenos">1493</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; ToneCurveController.setValue(&quot;</span><span class="p">,</span><span class="n">valuesDict</span><span class="p">,</span><span class="s2">&quot;) &quot;</span><span class="p">)</span>
</span><span id="L-1494"><a href="#L-1494"><span class="linenos">1494</span></a>
</span><span id="L-1495"><a href="#L-1495"><span class="linenos">1495</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="n">callBackActive</span>
</span><span id="L-1496"><a href="#L-1496"><span class="linenos">1496</span></a>
</span><span id="L-1497"><a href="#L-1497"><span class="linenos">1497</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setValues</span><span class="p">(</span><span class="n">valuesDict</span><span class="p">)</span>
</span><span id="L-1498"><a href="#L-1498"><span class="linenos">1498</span></a>        <span class="n">points</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">evaluate</span><span class="p">()</span>
</span><span id="L-1499"><a href="#L-1499"><span class="linenos">1499</span></a>
</span><span id="L-1500"><a href="#L-1500"><span class="linenos">1500</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderShadows</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">valuesDict</span><span class="p">[</span><span class="s2">&quot;shadows&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="L-1501"><a href="#L-1501"><span class="linenos">1501</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">editShadows</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">valuesDict</span><span class="p">[</span><span class="s2">&quot;shadows&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="L-1502"><a href="#L-1502"><span class="linenos">1502</span></a>
</span><span id="L-1503"><a href="#L-1503"><span class="linenos">1503</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderBlacks</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">valuesDict</span><span class="p">[</span><span class="s2">&quot;blacks&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="L-1504"><a href="#L-1504"><span class="linenos">1504</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">editBlacks</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">valuesDict</span><span class="p">[</span><span class="s2">&quot;blacks&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="L-1505"><a href="#L-1505"><span class="linenos">1505</span></a>
</span><span id="L-1506"><a href="#L-1506"><span class="linenos">1506</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderMediums</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">valuesDict</span><span class="p">[</span><span class="s2">&quot;mediums&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="L-1507"><a href="#L-1507"><span class="linenos">1507</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">editMediums</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">valuesDict</span><span class="p">[</span><span class="s2">&quot;mediums&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="L-1508"><a href="#L-1508"><span class="linenos">1508</span></a>
</span><span id="L-1509"><a href="#L-1509"><span class="linenos">1509</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderWhites</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">valuesDict</span><span class="p">[</span><span class="s2">&quot;whites&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="L-1510"><a href="#L-1510"><span class="linenos">1510</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">editWhites</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">valuesDict</span><span class="p">[</span><span class="s2">&quot;whites&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="L-1511"><a href="#L-1511"><span class="linenos">1511</span></a>
</span><span id="L-1512"><a href="#L-1512"><span class="linenos">1512</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderHighlights</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">valuesDict</span><span class="p">[</span><span class="s2">&quot;highlights&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="L-1513"><a href="#L-1513"><span class="linenos">1513</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">editHighlights</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">valuesDict</span><span class="p">[</span><span class="s2">&quot;highlights&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="L-1514"><a href="#L-1514"><span class="linenos">1514</span></a>
</span><span id="L-1515"><a href="#L-1515"><span class="linenos">1515</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-1516"><a href="#L-1516"><span class="linenos">1516</span></a>    <span class="c1"># -----------------------------------------------------------------------------     </span>
</span><span id="L-1517"><a href="#L-1517"><span class="linenos">1517</span></a>    <span class="c1"># zj add for semi-auto curve begin</span>
</span><span id="L-1518"><a href="#L-1518"><span class="linenos">1518</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">autoCurve</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-1519"><a href="#L-1519"><span class="linenos">1519</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1520"><a href="#L-1520"><span class="linenos">1520</span></a><span class="sd">        Generate tone curve automatically using machine learning analysis.</span>
</span><span id="L-1521"><a href="#L-1521"><span class="linenos">1521</span></a><span class="sd">        </span>
</span><span id="L-1522"><a href="#L-1522"><span class="linenos">1522</span></a><span class="sd">        Analyzes the current image&#39;s histogram distribution and uses a trained</span>
</span><span id="L-1523"><a href="#L-1523"><span class="linenos">1523</span></a><span class="sd">        neural network to predict optimal control point values for enhanced</span>
</span><span id="L-1524"><a href="#L-1524"><span class="linenos">1524</span></a><span class="sd">        image appearance. The ML model considers luminance distribution patterns</span>
</span><span id="L-1525"><a href="#L-1525"><span class="linenos">1525</span></a><span class="sd">        to suggest appropriate tone mapping.</span>
</span><span id="L-1526"><a href="#L-1526"><span class="linenos">1526</span></a><span class="sd">        </span>
</span><span id="L-1527"><a href="#L-1527"><span class="linenos">1527</span></a><span class="sd">        The process involves:</span>
</span><span id="L-1528"><a href="#L-1528"><span class="linenos">1528</span></a><span class="sd">        1. Computing cumulative histogram of image luminance</span>
</span><span id="L-1529"><a href="#L-1529"><span class="linenos">1529</span></a><span class="sd">        2. Feeding histogram to trained neural network</span>
</span><span id="L-1530"><a href="#L-1530"><span class="linenos">1530</span></a><span class="sd">        3. Predicting optimal control point values</span>
</span><span id="L-1531"><a href="#L-1531"><span class="linenos">1531</span></a><span class="sd">        4. Applying the generated curve to the processing pipeline</span>
</span><span id="L-1532"><a href="#L-1532"><span class="linenos">1532</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1533"><a href="#L-1533"><span class="linenos">1533</span></a>        <span class="n">processPipe</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getProcessPipe</span><span class="p">()</span>
</span><span id="L-1534"><a href="#L-1534"><span class="linenos">1534</span></a>        <span class="k">if</span> <span class="n">processPipe</span> <span class="o">!=</span> <span class="kc">None</span> <span class="p">:</span>
</span><span id="L-1535"><a href="#L-1535"><span class="linenos">1535</span></a>            <span class="n">idExposure</span> <span class="o">=</span> <span class="n">processPipe</span><span class="o">.</span><span class="n">getProcessNodeByName</span><span class="p">(</span><span class="s2">&quot;tonecurve&quot;</span><span class="p">)</span>
</span><span id="L-1536"><a href="#L-1536"><span class="linenos">1536</span></a>            <span class="n">bins</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">50</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-1537"><a href="#L-1537"><span class="linenos">1537</span></a>
</span><span id="L-1538"><a href="#L-1538"><span class="linenos">1538</span></a>            <span class="n">imageBeforeColorData</span> <span class="o">=</span> <span class="n">processPipe</span><span class="o">.</span><span class="n">processNodes</span><span class="p">[</span><span class="n">idExposure</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">outputImage</span><span class="o">.</span><span class="n">colorData</span>
</span><span id="L-1539"><a href="#L-1539"><span class="linenos">1539</span></a>            <span class="n">imageBeforeColorData</span><span class="p">[</span><span class="n">imageBeforeColorData</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">]</span><span class="o">=</span><span class="mi">1</span>
</span><span id="L-1540"><a href="#L-1540"><span class="linenos">1540</span></a>            <span class="n">imageBeforeY</span> <span class="o">=</span> <span class="n">colour</span><span class="o">.</span><span class="n">sRGB_to_XYZ</span><span class="p">(</span><span class="n">imageBeforeColorData</span><span class="p">,</span> <span class="n">apply_cctf_decoding</span><span class="o">=</span><span class="kc">False</span><span class="p">)[:,:,</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-1541"><a href="#L-1541"><span class="linenos">1541</span></a>            <span class="n">nphistBefore</span>  <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">histogram</span><span class="p">(</span><span class="n">imageBeforeY</span><span class="p">,</span> <span class="n">bins</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-1542"><a href="#L-1542"><span class="linenos">1542</span></a>            <span class="n">nphistBefore</span>  <span class="o">=</span> <span class="n">nphistBefore</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">amax</span><span class="p">(</span><span class="n">nphistBefore</span><span class="p">)</span>
</span><span id="L-1543"><a href="#L-1543"><span class="linenos">1543</span></a>
</span><span id="L-1544"><a href="#L-1544"><span class="linenos">1544</span></a>            <span class="n">npImgHistCumuNorm</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty_like</span><span class="p">(</span><span class="n">nphistBefore</span><span class="p">)</span>
</span><span id="L-1545"><a href="#L-1545"><span class="linenos">1545</span></a>            <span class="n">npImgHistCumu</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cumsum</span><span class="p">(</span><span class="n">nphistBefore</span><span class="p">)</span>
</span><span id="L-1546"><a href="#L-1546"><span class="linenos">1546</span></a>            <span class="n">npImgHistCumuNorm</span> <span class="o">=</span> <span class="n">npImgHistCumu</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">npImgHistCumu</span><span class="p">)</span>
</span><span id="L-1547"><a href="#L-1547"><span class="linenos">1547</span></a>            
</span><span id="L-1548"><a href="#L-1548"><span class="linenos">1548</span></a>            <span class="c1">#predict keypoint value</span>
</span><span id="L-1549"><a href="#L-1549"><span class="linenos">1549</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">networkModel</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-1550"><a href="#L-1550"><span class="linenos">1550</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">networkModel</span> <span class="o">=</span> <span class="n">Net</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
</span><span id="L-1551"><a href="#L-1551"><span class="linenos">1551</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">networkModel</span><span class="o">.</span><span class="n">load_state_dict</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">weightFile</span><span class="p">))</span>
</span><span id="L-1552"><a href="#L-1552"><span class="linenos">1552</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">networkModel</span><span class="o">.</span><span class="n">eval</span><span class="p">()</span>
</span><span id="L-1553"><a href="#L-1553"><span class="linenos">1553</span></a>
</span><span id="L-1554"><a href="#L-1554"><span class="linenos">1554</span></a>            <span class="k">with</span> <span class="n">torch</span><span class="o">.</span><span class="n">no_grad</span><span class="p">():</span>
</span><span id="L-1555"><a href="#L-1555"><span class="linenos">1555</span></a>                <span class="n">x</span> <span class="o">=</span> <span class="n">Variable</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">FloatTensor</span><span class="p">([</span><span class="n">npImgHistCumuNorm</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),]),</span> <span class="n">requires_grad</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-1556"><a href="#L-1556"><span class="linenos">1556</span></a>                <span class="n">y_predict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">networkModel</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</span><span id="L-1557"><a href="#L-1557"><span class="linenos">1557</span></a>
</span><span id="L-1558"><a href="#L-1558"><span class="linenos">1558</span></a>            <span class="n">kpc</span> <span class="o">=</span> <span class="p">(</span><span class="n">y_predict</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="mi">100</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span> 
</span><span id="L-1559"><a href="#L-1559"><span class="linenos">1559</span></a>            <span class="n">kpcDict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;start&#39;</span><span class="p">:[</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">],</span> <span class="s1">&#39;shadows&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">10.0</span><span class="p">,</span><span class="nb">int</span><span class="p">(</span><span class="n">kpc</span><span class="p">[</span><span class="mi">0</span><span class="p">])],</span> <span class="s1">&#39;blacks&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">30.0</span><span class="p">,</span><span class="nb">int</span><span class="p">(</span><span class="n">kpc</span><span class="p">[</span><span class="mi">1</span><span class="p">])],</span> <span class="s1">&#39;mediums&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">50.0</span><span class="p">,</span><span class="nb">int</span><span class="p">(</span><span class="n">kpc</span><span class="p">[</span><span class="mi">2</span><span class="p">])],</span> <span class="s1">&#39;whites&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">70.0</span><span class="p">,</span><span class="nb">int</span><span class="p">(</span><span class="n">kpc</span><span class="p">[</span><span class="mi">3</span><span class="p">])],</span> <span class="s1">&#39;highlights&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">90.0</span><span class="p">,</span><span class="nb">int</span><span class="p">(</span><span class="n">kpc</span><span class="p">[</span><span class="mi">4</span><span class="p">])],</span> <span class="s1">&#39;end&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">100.0</span><span class="p">,</span><span class="mf">100.0</span><span class="p">]}</span>
</span><span id="L-1560"><a href="#L-1560"><span class="linenos">1560</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">setValues</span><span class="p">(</span><span class="n">kpcDict</span><span class="p">,</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
</span><span id="L-1561"><a href="#L-1561"><span class="linenos">1561</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">changeToneCurve</span><span class="p">(</span><span class="n">kpcDict</span><span class="p">)</span> 
</span><span id="L-1562"><a href="#L-1562"><span class="linenos">1562</span></a>     
</span><span id="L-1563"><a href="#L-1563"><span class="linenos">1563</span></a>    <span class="c1"># zj add for semi-auto curve end   </span>
</span><span id="L-1564"><a href="#L-1564"><span class="linenos">1564</span></a>
</span><span id="L-1565"><a href="#L-1565"><span class="linenos">1565</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-1566"><a href="#L-1566"><span class="linenos">1566</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
</span><span id="L-1567"><a href="#L-1567"><span class="linenos">1567</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1568"><a href="#L-1568"><span class="linenos">1568</span></a><span class="sd">        Reset specific control point to its default value.</span>
</span><span id="L-1569"><a href="#L-1569"><span class="linenos">1569</span></a><span class="sd">        </span>
</span><span id="L-1570"><a href="#L-1570"><span class="linenos">1570</span></a><span class="sd">        Restores a single control point to its default position and updates</span>
</span><span id="L-1571"><a href="#L-1571"><span class="linenos">1571</span></a><span class="sd">        the curve accordingly. Useful for correcting individual control</span>
</span><span id="L-1572"><a href="#L-1572"><span class="linenos">1572</span></a><span class="sd">        points without affecting the entire curve.</span>
</span><span id="L-1573"><a href="#L-1573"><span class="linenos">1573</span></a><span class="sd">        </span>
</span><span id="L-1574"><a href="#L-1574"><span class="linenos">1574</span></a><span class="sd">        Args:</span>
</span><span id="L-1575"><a href="#L-1575"><span class="linenos">1575</span></a><span class="sd">            key (str): Control point to reset (&#39;shadows&#39;, &#39;blacks&#39;, etc.)</span>
</span><span id="L-1576"><a href="#L-1576"><span class="linenos">1576</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1577"><a href="#L-1577"><span class="linenos">1577</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; ToneCurveController.reset(&quot;</span><span class="p">,</span><span class="n">key</span><span class="p">,</span><span class="s2">&quot;) &quot;</span><span class="p">)</span>
</span><span id="L-1578"><a href="#L-1578"><span class="linenos">1578</span></a>
</span><span id="L-1579"><a href="#L-1579"><span class="linenos">1579</span></a>        <span class="n">valuesDefault</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">default</span><span class="p">[</span><span class="n">key</span><span class="p">])[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-1580"><a href="#L-1580"><span class="linenos">1580</span></a>        <span class="n">controls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">valuesDefault</span><span class="p">)</span>
</span><span id="L-1581"><a href="#L-1581"><span class="linenos">1581</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">setValues</span><span class="p">(</span><span class="n">controls</span><span class="p">,</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="L-1582"><a href="#L-1582"><span class="linenos">1582</span></a>
</span><span id="L-1583"><a href="#L-1583"><span class="linenos">1583</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">changeToneCurve</span><span class="p">(</span><span class="n">controls</span><span class="p">)</span> 
</span><span id="L-1584"><a href="#L-1584"><span class="linenos">1584</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-1585"><a href="#L-1585"><span class="linenos">1585</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">plotCurve</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-1586"><a href="#L-1586"><span class="linenos">1586</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1587"><a href="#L-1587"><span class="linenos">1587</span></a><span class="sd">        Display tone curve and histogram overlays.</span>
</span><span id="L-1588"><a href="#L-1588"><span class="linenos">1588</span></a><span class="sd">        </span>
</span><span id="L-1589"><a href="#L-1589"><span class="linenos">1589</span></a><span class="sd">        Renders the current tone curve along with optional histogram overlays</span>
</span><span id="L-1590"><a href="#L-1590"><span class="linenos">1590</span></a><span class="sd">        for input, pre-processing, post-processing, and output stages. Provides</span>
</span><span id="L-1591"><a href="#L-1591"><span class="linenos">1591</span></a><span class="sd">        visual feedback on how the curve affects the image&#39;s tonal distribution.</span>
</span><span id="L-1592"><a href="#L-1592"><span class="linenos">1592</span></a><span class="sd">        </span>
</span><span id="L-1593"><a href="#L-1593"><span class="linenos">1593</span></a><span class="sd">        The plot includes:</span>
</span><span id="L-1594"><a href="#L-1594"><span class="linenos">1594</span></a><span class="sd">        - Grid lines for reference</span>
</span><span id="L-1595"><a href="#L-1595"><span class="linenos">1595</span></a><span class="sd">        - Tone curve visualization</span>
</span><span id="L-1596"><a href="#L-1596"><span class="linenos">1596</span></a><span class="sd">        - Control points markers</span>
</span><span id="L-1597"><a href="#L-1597"><span class="linenos">1597</span></a><span class="sd">        - Optional histogram overlays for different processing stages</span>
</span><span id="L-1598"><a href="#L-1598"><span class="linenos">1598</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1599"><a href="#L-1599"><span class="linenos">1599</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="L-1600"><a href="#L-1600"><span class="linenos">1600</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">curve</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">],</span><span class="s1">&#39;r--&#39;</span><span class="p">,</span> <span class="n">clear</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-1601"><a href="#L-1601"><span class="linenos">1601</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">curve</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="mi">20</span><span class="p">,</span><span class="mi">20</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">],</span><span class="s1">&#39;r--&#39;</span><span class="p">,</span> <span class="n">clear</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="L-1602"><a href="#L-1602"><span class="linenos">1602</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">curve</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="mi">40</span><span class="p">,</span><span class="mi">40</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">],</span><span class="s1">&#39;r--&#39;</span><span class="p">,</span> <span class="n">clear</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="L-1603"><a href="#L-1603"><span class="linenos">1603</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">curve</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="mi">60</span><span class="p">,</span><span class="mi">60</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">],</span><span class="s1">&#39;r--&#39;</span><span class="p">,</span> <span class="n">clear</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="L-1604"><a href="#L-1604"><span class="linenos">1604</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">curve</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="mi">80</span><span class="p">,</span><span class="mi">80</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">],</span><span class="s1">&#39;r--&#39;</span><span class="p">,</span> <span class="n">clear</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="L-1605"><a href="#L-1605"><span class="linenos">1605</span></a>
</span><span id="L-1606"><a href="#L-1606"><span class="linenos">1606</span></a>            <span class="n">processPipe</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getProcessPipe</span><span class="p">()</span>
</span><span id="L-1607"><a href="#L-1607"><span class="linenos">1607</span></a>            <span class="n">idExposure</span> <span class="o">=</span> <span class="n">processPipe</span><span class="o">.</span><span class="n">getProcessNodeByName</span><span class="p">(</span><span class="s2">&quot;tonecurve&quot;</span><span class="p">)</span>
</span><span id="L-1608"><a href="#L-1608"><span class="linenos">1608</span></a>
</span><span id="L-1609"><a href="#L-1609"><span class="linenos">1609</span></a>            <span class="n">bins</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">50</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-1610"><a href="#L-1610"><span class="linenos">1610</span></a>
</span><span id="L-1611"><a href="#L-1611"><span class="linenos">1611</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">showInput</span><span class="p">:</span>
</span><span id="L-1612"><a href="#L-1612"><span class="linenos">1612</span></a>                <span class="n">imageInput</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">processPipe</span><span class="o">.</span><span class="n">getInputImage</span><span class="p">())</span>
</span><span id="L-1613"><a href="#L-1613"><span class="linenos">1613</span></a>                <span class="k">if</span> <span class="n">imageInput</span><span class="o">.</span><span class="n">linear</span><span class="p">:</span> <span class="n">imageInputColorData</span> <span class="o">=</span><span class="n">colour</span><span class="o">.</span><span class="n">cctf_encoding</span><span class="p">(</span><span class="n">imageInput</span><span class="o">.</span><span class="n">colorData</span><span class="p">,</span> <span class="n">function</span><span class="o">=</span><span class="s1">&#39;sRGB&#39;</span><span class="p">)</span>
</span><span id="L-1614"><a href="#L-1614"><span class="linenos">1614</span></a>                <span class="k">else</span><span class="p">:</span> <span class="n">imageInputColorData</span> <span class="o">=</span> <span class="n">imageInput</span><span class="o">.</span><span class="n">colorData</span>
</span><span id="L-1615"><a href="#L-1615"><span class="linenos">1615</span></a>                <span class="n">imageInputColorData</span><span class="p">[</span><span class="n">imageInputColorData</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">]</span><span class="o">=</span><span class="mi">1</span>
</span><span id="L-1616"><a href="#L-1616"><span class="linenos">1616</span></a>                <span class="n">imageInputY</span> <span class="o">=</span> <span class="n">colour</span><span class="o">.</span><span class="n">sRGB_to_XYZ</span><span class="p">(</span><span class="n">imageInputColorData</span><span class="p">,</span> <span class="n">apply_cctf_decoding</span><span class="o">=</span><span class="kc">False</span><span class="p">)[:,:,</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-1617"><a href="#L-1617"><span class="linenos">1617</span></a>                <span class="n">nphistInput</span>  <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">histogram</span><span class="p">(</span><span class="n">imageInputY</span><span class="p">,</span> <span class="n">bins</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-1618"><a href="#L-1618"><span class="linenos">1618</span></a>                <span class="n">nphistInput</span>  <span class="o">=</span> <span class="n">nphistInput</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">amax</span><span class="p">(</span><span class="n">nphistInput</span><span class="p">)</span>
</span><span id="L-1619"><a href="#L-1619"><span class="linenos">1619</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">curve</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">bins</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span><span class="n">nphistInput</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span><span class="s1">&#39;k--&#39;</span><span class="p">,</span>  <span class="n">clear</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="L-1620"><a href="#L-1620"><span class="linenos">1620</span></a>
</span><span id="L-1621"><a href="#L-1621"><span class="linenos">1621</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">showbefore</span><span class="p">:</span>
</span><span id="L-1622"><a href="#L-1622"><span class="linenos">1622</span></a>                <span class="n">imageBeforeColorData</span> <span class="o">=</span> <span class="n">processPipe</span><span class="o">.</span><span class="n">processNodes</span><span class="p">[</span><span class="n">idExposure</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">outputImage</span><span class="o">.</span><span class="n">colorData</span>
</span><span id="L-1623"><a href="#L-1623"><span class="linenos">1623</span></a>                <span class="n">imageBeforeColorData</span><span class="p">[</span><span class="n">imageBeforeColorData</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">]</span><span class="o">=</span><span class="mi">1</span>
</span><span id="L-1624"><a href="#L-1624"><span class="linenos">1624</span></a>                <span class="n">imageBeforeY</span> <span class="o">=</span> <span class="n">colour</span><span class="o">.</span><span class="n">sRGB_to_XYZ</span><span class="p">(</span><span class="n">imageBeforeColorData</span><span class="p">,</span> <span class="n">apply_cctf_decoding</span><span class="o">=</span><span class="kc">False</span><span class="p">)[:,:,</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-1625"><a href="#L-1625"><span class="linenos">1625</span></a>                <span class="n">nphistBefore</span>  <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">histogram</span><span class="p">(</span><span class="n">imageBeforeY</span><span class="p">,</span> <span class="n">bins</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-1626"><a href="#L-1626"><span class="linenos">1626</span></a>                <span class="n">nphistBefore</span>  <span class="o">=</span> <span class="n">nphistBefore</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">amax</span><span class="p">(</span><span class="n">nphistBefore</span><span class="p">)</span>
</span><span id="L-1627"><a href="#L-1627"><span class="linenos">1627</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">curve</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">bins</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span><span class="n">nphistBefore</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span><span class="s1">&#39;b--&#39;</span><span class="p">,</span>  <span class="n">clear</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="L-1628"><a href="#L-1628"><span class="linenos">1628</span></a>
</span><span id="L-1629"><a href="#L-1629"><span class="linenos">1629</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">showAfter</span><span class="p">:</span>
</span><span id="L-1630"><a href="#L-1630"><span class="linenos">1630</span></a>                <span class="n">imageAftercolorData</span> <span class="o">=</span> <span class="n">processPipe</span><span class="o">.</span><span class="n">processNodes</span><span class="p">[</span><span class="n">idExposure</span><span class="p">]</span><span class="o">.</span><span class="n">outputImage</span><span class="o">.</span><span class="n">colorData</span>
</span><span id="L-1631"><a href="#L-1631"><span class="linenos">1631</span></a>                <span class="n">imageAftercolorData</span><span class="p">[</span><span class="n">imageAftercolorData</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">]</span><span class="o">=</span><span class="mi">1</span>
</span><span id="L-1632"><a href="#L-1632"><span class="linenos">1632</span></a>                <span class="n">imageAfterY</span>  <span class="o">=</span> <span class="n">colour</span><span class="o">.</span><span class="n">sRGB_to_XYZ</span><span class="p">(</span><span class="n">imageAftercolorData</span><span class="p">,</span>  <span class="n">apply_cctf_decoding</span><span class="o">=</span><span class="kc">False</span><span class="p">)[:,:,</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-1633"><a href="#L-1633"><span class="linenos">1633</span></a>                <span class="n">nphistAfter</span>   <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">histogram</span><span class="p">(</span><span class="n">imageAfterY</span><span class="p">,</span> <span class="n">bins</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-1634"><a href="#L-1634"><span class="linenos">1634</span></a>                <span class="n">nphistAfter</span>   <span class="o">=</span><span class="n">nphistAfter</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">amax</span><span class="p">(</span><span class="n">nphistAfter</span><span class="p">)</span>
</span><span id="L-1635"><a href="#L-1635"><span class="linenos">1635</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">curve</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">bins</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span><span class="n">nphistAfter</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">,</span>     <span class="n">clear</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="L-1636"><a href="#L-1636"><span class="linenos">1636</span></a>
</span><span id="L-1637"><a href="#L-1637"><span class="linenos">1637</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">showOutput</span><span class="p">:</span>
</span><span id="L-1638"><a href="#L-1638"><span class="linenos">1638</span></a>                <span class="n">imageAftercolorData</span> <span class="o">=</span> <span class="n">processPipe</span><span class="o">.</span><span class="n">getImage</span><span class="p">(</span><span class="n">toneMap</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">colorData</span>
</span><span id="L-1639"><a href="#L-1639"><span class="linenos">1639</span></a>                <span class="n">imageAftercolorData</span><span class="p">[</span><span class="n">imageAftercolorData</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">]</span><span class="o">=</span><span class="mi">1</span>
</span><span id="L-1640"><a href="#L-1640"><span class="linenos">1640</span></a>                <span class="n">imageAfterY</span>  <span class="o">=</span> <span class="n">colour</span><span class="o">.</span><span class="n">sRGB_to_XYZ</span><span class="p">(</span><span class="n">imageAftercolorData</span><span class="p">,</span>  <span class="n">apply_cctf_decoding</span><span class="o">=</span><span class="kc">False</span><span class="p">)[:,:,</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-1641"><a href="#L-1641"><span class="linenos">1641</span></a>                <span class="n">nphistAfter</span>   <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">histogram</span><span class="p">(</span><span class="n">imageAfterY</span><span class="p">,</span> <span class="n">bins</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-1642"><a href="#L-1642"><span class="linenos">1642</span></a>                <span class="n">nphistAfter</span>   <span class="o">=</span><span class="n">nphistAfter</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">amax</span><span class="p">(</span><span class="n">nphistAfter</span><span class="p">)</span>
</span><span id="L-1643"><a href="#L-1643"><span class="linenos">1643</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">curve</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">bins</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span><span class="n">nphistAfter</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">,</span>     <span class="n">clear</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="L-1644"><a href="#L-1644"><span class="linenos">1644</span></a>
</span><span id="L-1645"><a href="#L-1645"><span class="linenos">1645</span></a>            <span class="n">controlPointCoordinates</span><span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">values</span><span class="p">()))</span>
</span><span id="L-1646"><a href="#L-1646"><span class="linenos">1646</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">curve</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">controlPointCoordinates</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span><span class="n">controlPointCoordinates</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span><span class="s1">&#39;ro&#39;</span><span class="p">,</span> <span class="n">clear</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="L-1647"><a href="#L-1647"><span class="linenos">1647</span></a>            <span class="n">points</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">curve</span><span class="o">.</span><span class="n">evalpts</span><span class="p">)</span>
</span><span id="L-1648"><a href="#L-1648"><span class="linenos">1648</span></a>            <span class="n">x</span> <span class="o">=</span> <span class="n">points</span><span class="p">[:,</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-1649"><a href="#L-1649"><span class="linenos">1649</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">curve</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">points</span><span class="p">[</span><span class="n">x</span><span class="o">&lt;</span><span class="mi">100</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span><span class="n">points</span><span class="p">[</span><span class="n">x</span><span class="o">&lt;</span><span class="mi">100</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span><span class="s1">&#39;r&#39;</span><span class="p">,</span><span class="n">clear</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="L-1650"><a href="#L-1650"><span class="linenos">1650</span></a>        <span class="k">except</span><span class="p">:</span>
</span><span id="L-1651"><a href="#L-1651"><span class="linenos">1651</span></a>            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
</span><span id="L-1652"><a href="#L-1652"><span class="linenos">1652</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">plotCurve</span><span class="p">()</span>
</span><span id="L-1653"><a href="#L-1653"><span class="linenos">1653</span></a><span class="c1"># ------------------------------------------------------------------------------------------</span>
</span><span id="L-1654"><a href="#L-1654"><span class="linenos">1654</span></a><span class="c1"># ------------------------------------------------------------------------------------------</span>
</span><span id="L-1655"><a href="#L-1655"><span class="linenos">1655</span></a><span class="c1"># ------------------------------------------------------------------------------------------</span>
</span><span id="L-1656"><a href="#L-1656"><span class="linenos">1656</span></a><span class="k">class</span><span class="w"> </span><span class="nc">LightnessMaskController</span><span class="p">():</span>
</span><span id="L-1657"><a href="#L-1657"><span class="linenos">1657</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1658"><a href="#L-1658"><span class="linenos">1658</span></a><span class="sd">    Controller for lightness-based masking and tone range selection.</span>
</span><span id="L-1659"><a href="#L-1659"><span class="linenos">1659</span></a><span class="sd">    </span>
</span><span id="L-1660"><a href="#L-1660"><span class="linenos">1660</span></a><span class="sd">    This class manages the lightness mask interface, allowing users to selectively</span>
</span><span id="L-1661"><a href="#L-1661"><span class="linenos">1661</span></a><span class="sd">    target specific tonal ranges (shadows, blacks, mediums, whites, highlights) </span>
</span><span id="L-1662"><a href="#L-1662"><span class="linenos">1662</span></a><span class="sd">    for localized editing operations. The masking system enables precise control</span>
</span><span id="L-1663"><a href="#L-1663"><span class="linenos">1663</span></a><span class="sd">    over HDR processing by limiting effects to specific luminance ranges.</span>
</span><span id="L-1664"><a href="#L-1664"><span class="linenos">1664</span></a><span class="sd">    </span>
</span><span id="L-1665"><a href="#L-1665"><span class="linenos">1665</span></a><span class="sd">    Lightness masking is essential for HDR editing as it allows photographers</span>
</span><span id="L-1666"><a href="#L-1666"><span class="linenos">1666</span></a><span class="sd">    to adjust different tonal ranges independently, creating more natural and</span>
</span><span id="L-1667"><a href="#L-1667"><span class="linenos">1667</span></a><span class="sd">    visually pleasing results.</span>
</span><span id="L-1668"><a href="#L-1668"><span class="linenos">1668</span></a><span class="sd">    </span>
</span><span id="L-1669"><a href="#L-1669"><span class="linenos">1669</span></a><span class="sd">    Attributes:</span>
</span><span id="L-1670"><a href="#L-1670"><span class="linenos">1670</span></a><span class="sd">        - parent: Parent controller for coordination</span>
</span><span id="L-1671"><a href="#L-1671"><span class="linenos">1671</span></a><span class="sd">        - model (model.LightnessMaskModel): Lightness mask data model</span>
</span><span id="L-1672"><a href="#L-1672"><span class="linenos">1672</span></a><span class="sd">        - view (view.LightnessMaskView): Mask selection interface</span>
</span><span id="L-1673"><a href="#L-1673"><span class="linenos">1673</span></a><span class="sd">        - callBackActive (bool): Enable/disable callback processing</span>
</span><span id="L-1674"><a href="#L-1674"><span class="linenos">1674</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1675"><a href="#L-1675"><span class="linenos">1675</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
</span><span id="L-1676"><a href="#L-1676"><span class="linenos">1676</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1677"><a href="#L-1677"><span class="linenos">1677</span></a><span class="sd">        Initialize the lightness mask controller.</span>
</span><span id="L-1678"><a href="#L-1678"><span class="linenos">1678</span></a><span class="sd">        </span>
</span><span id="L-1679"><a href="#L-1679"><span class="linenos">1679</span></a><span class="sd">        Args:</span>
</span><span id="L-1680"><a href="#L-1680"><span class="linenos">1680</span></a><span class="sd">            parent: Parent controller for coordination and processing pipeline access</span>
</span><span id="L-1681"><a href="#L-1681"><span class="linenos">1681</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1682"><a href="#L-1682"><span class="linenos">1682</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; MaskLightnessController.__init__(&quot;</span><span class="p">,</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
</span><span id="L-1683"><a href="#L-1683"><span class="linenos">1683</span></a>
</span><span id="L-1684"><a href="#L-1684"><span class="linenos">1684</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">=</span> <span class="n">parent</span>
</span><span id="L-1685"><a href="#L-1685"><span class="linenos">1685</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">LightnessMaskModel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="L-1686"><a href="#L-1686"><span class="linenos">1686</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">LightnessMaskView</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="L-1687"><a href="#L-1687"><span class="linenos">1687</span></a>
</span><span id="L-1688"><a href="#L-1688"><span class="linenos">1688</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-1689"><a href="#L-1689"><span class="linenos">1689</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-1690"><a href="#L-1690"><span class="linenos">1690</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">maskChange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">key</span><span class="p">,</span> <span class="n">on_off</span><span class="p">):</span>
</span><span id="L-1691"><a href="#L-1691"><span class="linenos">1691</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1692"><a href="#L-1692"><span class="linenos">1692</span></a><span class="sd">        Handle mask enable/disable for specific tone ranges.</span>
</span><span id="L-1693"><a href="#L-1693"><span class="linenos">1693</span></a><span class="sd">        </span>
</span><span id="L-1694"><a href="#L-1694"><span class="linenos">1694</span></a><span class="sd">        Processes user interactions with mask checkboxes, updating the mask</span>
</span><span id="L-1695"><a href="#L-1695"><span class="linenos">1695</span></a><span class="sd">        state for the specified tonal range and triggering processing updates</span>
</span><span id="L-1696"><a href="#L-1696"><span class="linenos">1696</span></a><span class="sd">        to apply the mask changes.</span>
</span><span id="L-1697"><a href="#L-1697"><span class="linenos">1697</span></a><span class="sd">        </span>
</span><span id="L-1698"><a href="#L-1698"><span class="linenos">1698</span></a><span class="sd">        Args:</span>
</span><span id="L-1699"><a href="#L-1699"><span class="linenos">1699</span></a><span class="sd">            key (str): Tone range identifier (&#39;shadows&#39;, &#39;blacks&#39;, &#39;mediums&#39;, </span>
</span><span id="L-1700"><a href="#L-1700"><span class="linenos">1700</span></a><span class="sd">                      &#39;whites&#39;, &#39;highlights&#39;)</span>
</span><span id="L-1701"><a href="#L-1701"><span class="linenos">1701</span></a><span class="sd">            on_off (bool): Enable (True) or disable (False) the mask for this range</span>
</span><span id="L-1702"><a href="#L-1702"><span class="linenos">1702</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1703"><a href="#L-1703"><span class="linenos">1703</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CB] &gt;&gt; MaskLightnessController.maskChange(&quot;</span><span class="p">,</span><span class="n">key</span><span class="p">,</span><span class="s2">&quot;,&quot;</span><span class="p">,</span><span class="n">on_off</span><span class="p">,</span><span class="s2">&quot;)[callBackActive:&quot;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span><span class="p">,</span><span class="s2">&quot;] &quot;</span><span class="p">)</span>
</span><span id="L-1704"><a href="#L-1704"><span class="linenos">1704</span></a>
</span><span id="L-1705"><a href="#L-1705"><span class="linenos">1705</span></a>        <span class="n">maskState</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">maskChange</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">on_off</span><span class="p">)</span>  
</span><span id="L-1706"><a href="#L-1706"><span class="linenos">1706</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">changeLightnessMask</span><span class="p">(</span><span class="n">maskState</span><span class="p">)</span> 
</span><span id="L-1707"><a href="#L-1707"><span class="linenos">1707</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-1708"><a href="#L-1708"><span class="linenos">1708</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setValues</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">,</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="L-1709"><a href="#L-1709"><span class="linenos">1709</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1710"><a href="#L-1710"><span class="linenos">1710</span></a><span class="sd">        Set all mask states programmatically.</span>
</span><span id="L-1711"><a href="#L-1711"><span class="linenos">1711</span></a><span class="sd">        </span>
</span><span id="L-1712"><a href="#L-1712"><span class="linenos">1712</span></a><span class="sd">        Updates all tone range masks simultaneously and refreshes the interface</span>
</span><span id="L-1713"><a href="#L-1713"><span class="linenos">1713</span></a><span class="sd">        to reflect the new mask configuration. Used for loading saved mask</span>
</span><span id="L-1714"><a href="#L-1714"><span class="linenos">1714</span></a><span class="sd">        states or batch mask updates.</span>
</span><span id="L-1715"><a href="#L-1715"><span class="linenos">1715</span></a><span class="sd">        </span>
</span><span id="L-1716"><a href="#L-1716"><span class="linenos">1716</span></a><span class="sd">        Args:</span>
</span><span id="L-1717"><a href="#L-1717"><span class="linenos">1717</span></a><span class="sd">            values (dict): Dictionary containing mask states for all tone ranges</span>
</span><span id="L-1718"><a href="#L-1718"><span class="linenos">1718</span></a><span class="sd">                          with boolean values for each range</span>
</span><span id="L-1719"><a href="#L-1719"><span class="linenos">1719</span></a><span class="sd">            callBackActive (bool, optional): Whether to trigger callbacks (default: False)</span>
</span><span id="L-1720"><a href="#L-1720"><span class="linenos">1720</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1721"><a href="#L-1721"><span class="linenos">1721</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; LightnessMaskController.setValue(&quot;</span><span class="p">,</span><span class="n">values</span><span class="p">,</span><span class="s2">&quot;) &quot;</span><span class="p">)</span>
</span><span id="L-1722"><a href="#L-1722"><span class="linenos">1722</span></a>
</span><span id="L-1723"><a href="#L-1723"><span class="linenos">1723</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="n">callBackActive</span>
</span><span id="L-1724"><a href="#L-1724"><span class="linenos">1724</span></a>
</span><span id="L-1725"><a href="#L-1725"><span class="linenos">1725</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setValues</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
</span><span id="L-1726"><a href="#L-1726"><span class="linenos">1726</span></a>
</span><span id="L-1727"><a href="#L-1727"><span class="linenos">1727</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">checkboxShadows</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="s2">&quot;shadows&quot;</span><span class="p">])</span>
</span><span id="L-1728"><a href="#L-1728"><span class="linenos">1728</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">checkboxBlacks</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="s2">&quot;blacks&quot;</span><span class="p">])</span>
</span><span id="L-1729"><a href="#L-1729"><span class="linenos">1729</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">checkboxMediums</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="s2">&quot;mediums&quot;</span><span class="p">])</span>
</span><span id="L-1730"><a href="#L-1730"><span class="linenos">1730</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">checkboxWhites</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="s2">&quot;whites&quot;</span><span class="p">])</span>
</span><span id="L-1731"><a href="#L-1731"><span class="linenos">1731</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">checkboxHighlights</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="s2">&quot;highlights&quot;</span><span class="p">])</span>   
</span><span id="L-1732"><a href="#L-1732"><span class="linenos">1732</span></a>
</span><span id="L-1733"><a href="#L-1733"><span class="linenos">1733</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-1734"><a href="#L-1734"><span class="linenos">1734</span></a><span class="c1"># ------------------------------------------------------------------------------------------</span>
</span><span id="L-1735"><a href="#L-1735"><span class="linenos">1735</span></a><span class="c1"># ------------------------------------------------------------------------------------------</span>
</span><span id="L-1736"><a href="#L-1736"><span class="linenos">1736</span></a><span class="c1"># ------------------------------------------------------------------------------------------</span>
</span><span id="L-1737"><a href="#L-1737"><span class="linenos">1737</span></a><span class="k">class</span><span class="w"> </span><span class="nc">HDRviewerController</span><span class="p">():</span>
</span><span id="L-1738"><a href="#L-1738"><span class="linenos">1738</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1739"><a href="#L-1739"><span class="linenos">1739</span></a><span class="sd">    Controller for external HDR display and viewer management.</span>
</span><span id="L-1740"><a href="#L-1740"><span class="linenos">1740</span></a><span class="sd">    </span>
</span><span id="L-1741"><a href="#L-1741"><span class="linenos">1741</span></a><span class="sd">    This class manages the external HDR display functionality, coordinating with</span>
</span><span id="L-1742"><a href="#L-1742"><span class="linenos">1742</span></a><span class="sd">    HDR-capable monitors to show processed images at their full dynamic range.</span>
</span><span id="L-1743"><a href="#L-1743"><span class="linenos">1743</span></a><span class="sd">    It handles display process management, image comparison modes, auto-preview</span>
</span><span id="L-1744"><a href="#L-1744"><span class="linenos">1744</span></a><span class="sd">    functionality, and HDR display scaling.</span>
</span><span id="L-1745"><a href="#L-1745"><span class="linenos">1745</span></a><span class="sd">    </span>
</span><span id="L-1746"><a href="#L-1746"><span class="linenos">1746</span></a><span class="sd">    The HDR viewer enables real-time preview of processing results on calibrated</span>
</span><span id="L-1747"><a href="#L-1747"><span class="linenos">1747</span></a><span class="sd">    HDR displays, providing immediate visual feedback for professional HDR</span>
</span><span id="L-1748"><a href="#L-1748"><span class="linenos">1748</span></a><span class="sd">    image editing workflows.</span>
</span><span id="L-1749"><a href="#L-1749"><span class="linenos">1749</span></a><span class="sd">    </span>
</span><span id="L-1750"><a href="#L-1750"><span class="linenos">1750</span></a><span class="sd">    Attributes:</span>
</span><span id="L-1751"><a href="#L-1751"><span class="linenos">1751</span></a><span class="sd">        - parent: Parent controller for coordination</span>
</span><span id="L-1752"><a href="#L-1752"><span class="linenos">1752</span></a><span class="sd">        - model (model.HDRviewerModel): HDR display data model</span>
</span><span id="L-1753"><a href="#L-1753"><span class="linenos">1753</span></a><span class="sd">        - view: View component (set externally)</span>
</span><span id="L-1754"><a href="#L-1754"><span class="linenos">1754</span></a><span class="sd">        - viewerProcess: External HDR viewer process handle</span>
</span><span id="L-1755"><a href="#L-1755"><span class="linenos">1755</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1756"><a href="#L-1756"><span class="linenos">1756</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
</span><span id="L-1757"><a href="#L-1757"><span class="linenos">1757</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1758"><a href="#L-1758"><span class="linenos">1758</span></a><span class="sd">        Initialize the HDR viewer controller.</span>
</span><span id="L-1759"><a href="#L-1759"><span class="linenos">1759</span></a><span class="sd">        </span>
</span><span id="L-1760"><a href="#L-1760"><span class="linenos">1760</span></a><span class="sd">        Args:</span>
</span><span id="L-1761"><a href="#L-1761"><span class="linenos">1761</span></a><span class="sd">            parent: Parent controller for coordination and image access</span>
</span><span id="L-1762"><a href="#L-1762"><span class="linenos">1762</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1763"><a href="#L-1763"><span class="linenos">1763</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; HDRviewerController.__init__(&quot;</span><span class="p">,</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
</span><span id="L-1764"><a href="#L-1764"><span class="linenos">1764</span></a>
</span><span id="L-1765"><a href="#L-1765"><span class="linenos">1765</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">=</span> <span class="n">parent</span>
</span><span id="L-1766"><a href="#L-1766"><span class="linenos">1766</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">HDRviewerModel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="L-1767"><a href="#L-1767"><span class="linenos">1767</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span> <span class="kc">None</span> 
</span><span id="L-1768"><a href="#L-1768"><span class="linenos">1768</span></a>
</span><span id="L-1769"><a href="#L-1769"><span class="linenos">1769</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">viewerProcess</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-1770"><a href="#L-1770"><span class="linenos">1770</span></a>
</span><span id="L-1771"><a href="#L-1771"><span class="linenos">1771</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">displaySplash</span><span class="p">()</span>
</span><span id="L-1772"><a href="#L-1772"><span class="linenos">1772</span></a>
</span><span id="L-1773"><a href="#L-1773"><span class="linenos">1773</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setView</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">view</span><span class="p">):</span> 
</span><span id="L-1774"><a href="#L-1774"><span class="linenos">1774</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1775"><a href="#L-1775"><span class="linenos">1775</span></a><span class="sd">        Set the view component for the HDR viewer.</span>
</span><span id="L-1776"><a href="#L-1776"><span class="linenos">1776</span></a><span class="sd">        </span>
</span><span id="L-1777"><a href="#L-1777"><span class="linenos">1777</span></a><span class="sd">        Args:</span>
</span><span id="L-1778"><a href="#L-1778"><span class="linenos">1778</span></a><span class="sd">            view: View component to associate with this controller</span>
</span><span id="L-1779"><a href="#L-1779"><span class="linenos">1779</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1780"><a href="#L-1780"><span class="linenos">1780</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span> <span class="n">view</span>
</span><span id="L-1781"><a href="#L-1781"><span class="linenos">1781</span></a>
</span><span id="L-1782"><a href="#L-1782"><span class="linenos">1782</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackUpdate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-1783"><a href="#L-1783"><span class="linenos">1783</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1784"><a href="#L-1784"><span class="linenos">1784</span></a><span class="sd">        Update HDR display with the current processed image.</span>
</span><span id="L-1785"><a href="#L-1785"><span class="linenos">1785</span></a><span class="sd">        </span>
</span><span id="L-1786"><a href="#L-1786"><span class="linenos">1786</span></a><span class="sd">        Retrieves the currently selected processing pipeline, processes the</span>
</span><span id="L-1787"><a href="#L-1787"><span class="linenos">1787</span></a><span class="sd">        image without tone mapping (preserving HDR values), and displays</span>
</span><span id="L-1788"><a href="#L-1788"><span class="linenos">1788</span></a><span class="sd">        the result on the HDR monitor. Updates the current image reference</span>
</span><span id="L-1789"><a href="#L-1789"><span class="linenos">1789</span></a><span class="sd">        for comparison operations.</span>
</span><span id="L-1790"><a href="#L-1790"><span class="linenos">1790</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1791"><a href="#L-1791"><span class="linenos">1791</span></a>        <span class="n">selectedProcessPipe</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">imageGalleryController</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getSelectedProcessPipe</span><span class="p">()</span>
</span><span id="L-1792"><a href="#L-1792"><span class="linenos">1792</span></a>        <span class="n">img</span> <span class="o">=</span> <span class="n">selectedProcessPipe</span><span class="o">.</span><span class="n">getImage</span><span class="p">(</span><span class="n">toneMap</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="L-1793"><a href="#L-1793"><span class="linenos">1793</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">displayIMG</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
</span><span id="L-1794"><a href="#L-1794"><span class="linenos">1794</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">currentIMG</span> <span class="o">=</span> <span class="n">img</span>
</span><span id="L-1795"><a href="#L-1795"><span class="linenos">1795</span></a>
</span><span id="L-1796"><a href="#L-1796"><span class="linenos">1796</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackAuto</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">on_off</span><span class="p">):</span>
</span><span id="L-1797"><a href="#L-1797"><span class="linenos">1797</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1798"><a href="#L-1798"><span class="linenos">1798</span></a><span class="sd">        Toggle automatic HDR preview updates.</span>
</span><span id="L-1799"><a href="#L-1799"><span class="linenos">1799</span></a><span class="sd">        </span>
</span><span id="L-1800"><a href="#L-1800"><span class="linenos">1800</span></a><span class="sd">        Enables or disables automatic HDR display updates when processing</span>
</span><span id="L-1801"><a href="#L-1801"><span class="linenos">1801</span></a><span class="sd">        parameters change, allowing for real-time preview on HDR monitors.</span>
</span><span id="L-1802"><a href="#L-1802"><span class="linenos">1802</span></a><span class="sd">        </span>
</span><span id="L-1803"><a href="#L-1803"><span class="linenos">1803</span></a><span class="sd">        Args:</span>
</span><span id="L-1804"><a href="#L-1804"><span class="linenos">1804</span></a><span class="sd">            on_off (bool): Enable (True) or disable (False) auto-preview</span>
</span><span id="L-1805"><a href="#L-1805"><span class="linenos">1805</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1806"><a href="#L-1806"><span class="linenos">1806</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">dock</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">childControllers</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">autoPreviewHDR</span> <span class="o">=</span> <span class="n">on_off</span>
</span><span id="L-1807"><a href="#L-1807"><span class="linenos">1807</span></a>
</span><span id="L-1808"><a href="#L-1808"><span class="linenos">1808</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackCompare</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-1809"><a href="#L-1809"><span class="linenos">1809</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1810"><a href="#L-1810"><span class="linenos">1810</span></a><span class="sd">        Display before/after comparison on HDR monitor.</span>
</span><span id="L-1811"><a href="#L-1811"><span class="linenos">1811</span></a><span class="sd">        </span>
</span><span id="L-1812"><a href="#L-1812"><span class="linenos">1812</span></a><span class="sd">        Creates a side-by-side comparison showing the previous processing</span>
</span><span id="L-1813"><a href="#L-1813"><span class="linenos">1813</span></a><span class="sd">        result alongside the current result, enabling visual comparison</span>
</span><span id="L-1814"><a href="#L-1814"><span class="linenos">1814</span></a><span class="sd">        of processing changes. If no previous result exists, updates</span>
</span><span id="L-1815"><a href="#L-1815"><span class="linenos">1815</span></a><span class="sd">        with current processing.</span>
</span><span id="L-1816"><a href="#L-1816"><span class="linenos">1816</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1817"><a href="#L-1817"><span class="linenos">1817</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">currentIMG</span><span class="p">:</span>
</span><span id="L-1818"><a href="#L-1818"><span class="linenos">1818</span></a>            <span class="n">old</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">currentIMG</span>
</span><span id="L-1819"><a href="#L-1819"><span class="linenos">1819</span></a>            <span class="n">old</span> <span class="o">=</span> <span class="n">old</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">hdrCore</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">clip</span><span class="p">())</span>
</span><span id="L-1820"><a href="#L-1820"><span class="linenos">1820</span></a>
</span><span id="L-1821"><a href="#L-1821"><span class="linenos">1821</span></a>            <span class="n">sp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">imageGalleryController</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getSelectedProcessPipe</span><span class="p">()</span>
</span><span id="L-1822"><a href="#L-1822"><span class="linenos">1822</span></a>            <span class="n">img</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">getImage</span><span class="p">(</span><span class="n">toneMap</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="L-1823"><a href="#L-1823"><span class="linenos">1823</span></a>            <span class="n">img</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">hdrCore</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">clip</span><span class="p">())</span>
</span><span id="L-1824"><a href="#L-1824"><span class="linenos">1824</span></a>
</span><span id="L-1825"><a href="#L-1825"><span class="linenos">1825</span></a>
</span><span id="L-1826"><a href="#L-1826"><span class="linenos">1826</span></a>            <span class="n">h1</span><span class="p">,</span> <span class="n">w1</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">old</span><span class="o">.</span><span class="n">colorData</span><span class="o">.</span><span class="n">shape</span>
</span><span id="L-1827"><a href="#L-1827"><span class="linenos">1827</span></a>            <span class="n">h2</span><span class="p">,</span> <span class="n">w2</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">colorData</span><span class="o">.</span><span class="n">shape</span>
</span><span id="L-1828"><a href="#L-1828"><span class="linenos">1828</span></a>            <span class="n">hD</span><span class="p">,</span> <span class="n">wD</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">displayModel</span><span class="p">[</span><span class="s1">&#39;shape&#39;</span><span class="p">]</span>
</span><span id="L-1829"><a href="#L-1829"><span class="linenos">1829</span></a>            <span class="n">hM</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">hD</span> <span class="o">-</span> <span class="nb">max</span><span class="p">(</span><span class="n">h1</span><span class="p">,</span><span class="n">h2</span><span class="p">))</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
</span><span id="L-1830"><a href="#L-1830"><span class="linenos">1830</span></a>            <span class="n">wM</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">wD</span> <span class="o">-</span> <span class="p">(</span><span class="n">w1</span><span class="o">+</span><span class="n">w2</span><span class="p">))</span><span class="o">/</span><span class="mi">3</span><span class="p">)</span>
</span><span id="L-1831"><a href="#L-1831"><span class="linenos">1831</span></a>            <span class="n">back</span> <span class="o">=</span>  <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="n">hD</span><span class="p">,</span><span class="n">wD</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span><span class="o">*</span><span class="mf">0.2</span>
</span><span id="L-1832"><a href="#L-1832"><span class="linenos">1832</span></a>
</span><span id="L-1833"><a href="#L-1833"><span class="linenos">1833</span></a>            <span class="n">back</span><span class="p">[</span><span class="n">hM</span><span class="p">:</span><span class="n">hM</span><span class="o">+</span><span class="n">h1</span><span class="p">,</span><span class="n">wM</span><span class="p">:</span><span class="n">wM</span><span class="o">+</span><span class="n">w1</span><span class="p">,:]</span> <span class="o">=</span> <span class="n">old</span><span class="o">.</span><span class="n">colorData</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">displayModel</span><span class="p">[</span><span class="s1">&#39;scaling&#39;</span><span class="p">]</span>
</span><span id="L-1834"><a href="#L-1834"><span class="linenos">1834</span></a>            <span class="n">back</span><span class="p">[</span><span class="n">hM</span><span class="p">:</span><span class="n">hM</span><span class="o">+</span><span class="n">h2</span><span class="p">,</span><span class="mi">2</span><span class="o">*</span><span class="n">wM</span><span class="o">+</span><span class="n">w1</span><span class="p">:</span><span class="mi">2</span><span class="o">*</span><span class="n">wM</span><span class="o">+</span><span class="n">w1</span><span class="o">+</span><span class="n">w2</span><span class="p">,:]</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">colorData</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">displayModel</span><span class="p">[</span><span class="s1">&#39;scaling&#39;</span><span class="p">]</span>
</span><span id="L-1835"><a href="#L-1835"><span class="linenos">1835</span></a>
</span><span id="L-1836"><a href="#L-1836"><span class="linenos">1836</span></a>            <span class="c1"># save as temp.hdr</span>
</span><span id="L-1837"><a href="#L-1837"><span class="linenos">1837</span></a>            <span class="n">colour</span><span class="o">.</span><span class="n">write_image</span><span class="p">(</span><span class="n">back</span><span class="p">,</span><span class="s1">&#39;temp.hdr&#39;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;Imageio&#39;</span><span class="p">)</span>
</span><span id="L-1838"><a href="#L-1838"><span class="linenos">1838</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">displayFile</span><span class="p">(</span><span class="s1">&#39;temp.hdr&#39;</span><span class="p">)</span>
</span><span id="L-1839"><a href="#L-1839"><span class="linenos">1839</span></a>
</span><span id="L-1840"><a href="#L-1840"><span class="linenos">1840</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">currentIMG</span> <span class="o">=</span> <span class="n">img</span>
</span><span id="L-1841"><a href="#L-1841"><span class="linenos">1841</span></a>        <span class="k">else</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">callBackUpdate</span><span class="p">()</span>
</span><span id="L-1842"><a href="#L-1842"><span class="linenos">1842</span></a>
</span><span id="L-1843"><a href="#L-1843"><span class="linenos">1843</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">displayFile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">HDRfilename</span><span class="p">):</span>
</span><span id="L-1844"><a href="#L-1844"><span class="linenos">1844</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1845"><a href="#L-1845"><span class="linenos">1845</span></a><span class="sd">        Display HDR file on external HDR monitor.</span>
</span><span id="L-1846"><a href="#L-1846"><span class="linenos">1846</span></a><span class="sd">        </span>
</span><span id="L-1847"><a href="#L-1847"><span class="linenos">1847</span></a><span class="sd">        Launches or updates the external HDR viewer process to display the</span>
</span><span id="L-1848"><a href="#L-1848"><span class="linenos">1848</span></a><span class="sd">        specified HDR file. Handles process management and error recovery</span>
</span><span id="L-1849"><a href="#L-1849"><span class="linenos">1849</span></a><span class="sd">        for reliable HDR display functionality.</span>
</span><span id="L-1850"><a href="#L-1850"><span class="linenos">1850</span></a><span class="sd">        </span>
</span><span id="L-1851"><a href="#L-1851"><span class="linenos">1851</span></a><span class="sd">        Args:</span>
</span><span id="L-1852"><a href="#L-1852"><span class="linenos">1852</span></a><span class="sd">            HDRfilename (str): Path to HDR file to display</span>
</span><span id="L-1853"><a href="#L-1853"><span class="linenos">1853</span></a><span class="sd">            </span>
</span><span id="L-1854"><a href="#L-1854"><span class="linenos">1854</span></a><span class="sd">        Note:</span>
</span><span id="L-1855"><a href="#L-1855"><span class="linenos">1855</span></a><span class="sd">            Uses HDRImageViewer.exe for Windows-based HDR display.</span>
</span><span id="L-1856"><a href="#L-1856"><span class="linenos">1856</span></a><span class="sd">            Includes automatic process restart if initial launch fails.</span>
</span><span id="L-1857"><a href="#L-1857"><span class="linenos">1857</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1858"><a href="#L-1858"><span class="linenos">1858</span></a>
</span><span id="L-1859"><a href="#L-1859"><span class="linenos">1859</span></a>         <span class="c1"># check that no current display process already open</span>
</span><span id="L-1860"><a href="#L-1860"><span class="linenos">1860</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">viewerProcess</span><span class="p">:</span>
</span><span id="L-1861"><a href="#L-1861"><span class="linenos">1861</span></a>            <span class="c1"># the display HDR process is already running</span>
</span><span id="L-1862"><a href="#L-1862"><span class="linenos">1862</span></a>            <span class="c1"># close current</span>
</span><span id="L-1863"><a href="#L-1863"><span class="linenos">1863</span></a>            <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">([</span><span class="s1">&#39;taskkill&#39;</span><span class="p">,</span> <span class="s1">&#39;/F&#39;</span><span class="p">,</span> <span class="s1">&#39;/T&#39;</span><span class="p">,</span> <span class="s1">&#39;/IM&#39;</span><span class="p">,</span> <span class="s2">&quot;HDRImageViewer*&quot;</span><span class="p">],</span><span class="n">capture_output</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="L-1864"><a href="#L-1864"><span class="linenos">1864</span></a>            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.05</span><span class="p">)</span>
</span><span id="L-1865"><a href="#L-1865"><span class="linenos">1865</span></a>        <span class="c1"># run display HDR process</span>
</span><span id="L-1866"><a href="#L-1866"><span class="linenos">1866</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">viewerProcess</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">([</span><span class="s2">&quot;HDRImageViewer.exe&quot;</span><span class="p">,</span><span class="s2">&quot;-f&quot;</span><span class="p">,</span> <span class="s2">&quot;-input:&quot;</span><span class="o">+</span><span class="n">HDRfilename</span><span class="p">,</span> <span class="s2">&quot;-f&quot;</span><span class="p">,</span> <span class="s2">&quot;-h&quot;</span><span class="p">],</span> <span class="n">shell</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-1867"><a href="#L-1867"><span class="linenos">1867</span></a>        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.10</span><span class="p">)</span>
</span><span id="L-1868"><a href="#L-1868"><span class="linenos">1868</span></a>        <span class="n">psData</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">([</span><span class="s1">&#39;tasklist&#39;</span><span class="p">],</span> <span class="n">capture_output</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">universal_newlines</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">stdout</span>
</span><span id="L-1869"><a href="#L-1869"><span class="linenos">1869</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="s1">&#39;HDRImageViewer&#39;</span> <span class="ow">in</span> <span class="n">psData</span><span class="p">:</span> 
</span><span id="L-1870"><a href="#L-1870"><span class="linenos">1870</span></a>            <span class="c1"># re-run display HDR process</span>
</span><span id="L-1871"><a href="#L-1871"><span class="linenos">1871</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">viewerProcess</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">([</span><span class="s2">&quot;HDRImageViewer.exe&quot;</span><span class="p">,</span><span class="s2">&quot;-f&quot;</span><span class="p">,</span> <span class="s2">&quot;-input:&quot;</span><span class="o">+</span><span class="n">HDRfilename</span><span class="p">,</span> <span class="s2">&quot;-f&quot;</span><span class="p">,</span> <span class="s2">&quot;-h&quot;</span><span class="p">],</span> <span class="n">shell</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-1872"><a href="#L-1872"><span class="linenos">1872</span></a>
</span><span id="L-1873"><a href="#L-1873"><span class="linenos">1873</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">displayIMG</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">):</span>
</span><span id="L-1874"><a href="#L-1874"><span class="linenos">1874</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1875"><a href="#L-1875"><span class="linenos">1875</span></a><span class="sd">        Display processed image on HDR monitor.</span>
</span><span id="L-1876"><a href="#L-1876"><span class="linenos">1876</span></a><span class="sd">        </span>
</span><span id="L-1877"><a href="#L-1877"><span class="linenos">1877</span></a><span class="sd">        Processes and displays a uHDR Image object on the external HDR monitor,</span>
</span><span id="L-1878"><a href="#L-1878"><span class="linenos">1878</span></a><span class="sd">        applying appropriate clipping, scaling, and centering for optimal</span>
</span><span id="L-1879"><a href="#L-1879"><span class="linenos">1879</span></a><span class="sd">        HDR display presentation.</span>
</span><span id="L-1880"><a href="#L-1880"><span class="linenos">1880</span></a><span class="sd">        </span>
</span><span id="L-1881"><a href="#L-1881"><span class="linenos">1881</span></a><span class="sd">        Args:</span>
</span><span id="L-1882"><a href="#L-1882"><span class="linenos">1882</span></a><span class="sd">            img (hdrCore.image.Image): Processed HDR image to display</span>
</span><span id="L-1883"><a href="#L-1883"><span class="linenos">1883</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1884"><a href="#L-1884"><span class="linenos">1884</span></a>        <span class="n">img</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">hdrCore</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">clip</span><span class="p">())</span>
</span><span id="L-1885"><a href="#L-1885"><span class="linenos">1885</span></a>        <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">scaling</span><span class="p">())</span>
</span><span id="L-1886"><a href="#L-1886"><span class="linenos">1886</span></a>        <span class="n">colorData</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">colorData</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">displayModel</span><span class="p">[</span><span class="s1">&#39;scaling&#39;</span><span class="p">]</span>
</span><span id="L-1887"><a href="#L-1887"><span class="linenos">1887</span></a>
</span><span id="L-1888"><a href="#L-1888"><span class="linenos">1888</span></a>        <span class="n">h</span><span class="p">,</span><span class="n">w</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">colorData</span><span class="o">.</span><span class="n">shape</span>
</span><span id="L-1889"><a href="#L-1889"><span class="linenos">1889</span></a>        <span class="n">hD</span><span class="p">,</span> <span class="n">wD</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">displayModel</span><span class="p">[</span><span class="s1">&#39;shape&#39;</span><span class="p">]</span>
</span><span id="L-1890"><a href="#L-1890"><span class="linenos">1890</span></a>
</span><span id="L-1891"><a href="#L-1891"><span class="linenos">1891</span></a>        <span class="k">if</span> <span class="n">w</span><span class="o">&lt;</span><span class="n">wD</span><span class="p">:</span>
</span><span id="L-1892"><a href="#L-1892"><span class="linenos">1892</span></a>            <span class="n">back</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="n">hD</span><span class="p">,</span><span class="n">wD</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span><span class="o">*</span><span class="mf">0.2</span>
</span><span id="L-1893"><a href="#L-1893"><span class="linenos">1893</span></a>            <span class="n">marginW</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">wD</span><span class="o">-</span><span class="n">w</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
</span><span id="L-1894"><a href="#L-1894"><span class="linenos">1894</span></a>            <span class="n">marginH</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">hD</span><span class="o">-</span><span class="n">h</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
</span><span id="L-1895"><a href="#L-1895"><span class="linenos">1895</span></a>
</span><span id="L-1896"><a href="#L-1896"><span class="linenos">1896</span></a>            <span class="n">back</span><span class="p">[</span><span class="n">marginH</span><span class="p">:</span><span class="n">marginH</span><span class="o">+</span><span class="n">h</span><span class="p">,</span><span class="n">marginW</span><span class="p">:</span><span class="n">marginW</span><span class="o">+</span><span class="n">w</span><span class="p">,:]</span><span class="o">=</span><span class="n">colorData</span>
</span><span id="L-1897"><a href="#L-1897"><span class="linenos">1897</span></a>
</span><span id="L-1898"><a href="#L-1898"><span class="linenos">1898</span></a>        <span class="c1"># save as temp.hdr</span>
</span><span id="L-1899"><a href="#L-1899"><span class="linenos">1899</span></a>        <span class="n">colour</span><span class="o">.</span><span class="n">write_image</span><span class="p">(</span><span class="n">back</span><span class="p">,</span><span class="s1">&#39;temp.hdr&#39;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;Imageio&#39;</span><span class="p">)</span>
</span><span id="L-1900"><a href="#L-1900"><span class="linenos">1900</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">displayFile</span><span class="p">(</span><span class="s1">&#39;temp.hdr&#39;</span><span class="p">)</span>
</span><span id="L-1901"><a href="#L-1901"><span class="linenos">1901</span></a>
</span><span id="L-1902"><a href="#L-1902"><span class="linenos">1902</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">displaySplash</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-1903"><a href="#L-1903"><span class="linenos">1903</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1904"><a href="#L-1904"><span class="linenos">1904</span></a><span class="sd">        Display default splash screen on HDR monitor.</span>
</span><span id="L-1905"><a href="#L-1905"><span class="linenos">1905</span></a><span class="sd">        </span>
</span><span id="L-1906"><a href="#L-1906"><span class="linenos">1906</span></a><span class="sd">        Shows the default splash screen image, typically used when no</span>
</span><span id="L-1907"><a href="#L-1907"><span class="linenos">1907</span></a><span class="sd">        specific image is being displayed or during application startup.</span>
</span><span id="L-1908"><a href="#L-1908"><span class="linenos">1908</span></a><span class="sd">        Clears the current image reference.</span>
</span><span id="L-1909"><a href="#L-1909"><span class="linenos">1909</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1910"><a href="#L-1910"><span class="linenos">1910</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">currentIMG</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-1911"><a href="#L-1911"><span class="linenos">1911</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">displayFile</span><span class="p">(</span><span class="s1">&#39;grey.hdr&#39;</span><span class="p">)</span>
</span><span id="L-1912"><a href="#L-1912"><span class="linenos">1912</span></a>
</span><span id="L-1913"><a href="#L-1913"><span class="linenos">1913</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-1914"><a href="#L-1914"><span class="linenos">1914</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1915"><a href="#L-1915"><span class="linenos">1915</span></a><span class="sd">        Close HDR viewer and terminate display process.</span>
</span><span id="L-1916"><a href="#L-1916"><span class="linenos">1916</span></a><span class="sd">        </span>
</span><span id="L-1917"><a href="#L-1917"><span class="linenos">1917</span></a><span class="sd">        Safely terminates the external HDR viewer process and cleans up</span>
</span><span id="L-1918"><a href="#L-1918"><span class="linenos">1918</span></a><span class="sd">        resources. Should be called during application shutdown or when</span>
</span><span id="L-1919"><a href="#L-1919"><span class="linenos">1919</span></a><span class="sd">        HDR display is no longer needed.</span>
</span><span id="L-1920"><a href="#L-1920"><span class="linenos">1920</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1921"><a href="#L-1921"><span class="linenos">1921</span></a>        <span class="c1"># check that no current display process already open</span>
</span><span id="L-1922"><a href="#L-1922"><span class="linenos">1922</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">viewerProcess</span><span class="p">:</span>
</span><span id="L-1923"><a href="#L-1923"><span class="linenos">1923</span></a>            <span class="c1"># the display HDR process is already running</span>
</span><span id="L-1924"><a href="#L-1924"><span class="linenos">1924</span></a>            <span class="c1"># close current</span>
</span><span id="L-1925"><a href="#L-1925"><span class="linenos">1925</span></a>            <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">([</span><span class="s1">&#39;taskkill&#39;</span><span class="p">,</span> <span class="s1">&#39;/F&#39;</span><span class="p">,</span> <span class="s1">&#39;/T&#39;</span><span class="p">,</span> <span class="s1">&#39;/IM&#39;</span><span class="p">,</span> <span class="s2">&quot;HDRImageViewer*&quot;</span><span class="p">],</span><span class="n">capture_output</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="L-1926"><a href="#L-1926"><span class="linenos">1926</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">viewerProcess</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-1927"><a href="#L-1927"><span class="linenos">1927</span></a><span class="c1"># ------------------------------------------------------------------------------------------</span>
</span><span id="L-1928"><a href="#L-1928"><span class="linenos">1928</span></a><span class="c1"># ---- Class LchColorSelectorController ----------------------------------------------------</span>
</span><span id="L-1929"><a href="#L-1929"><span class="linenos">1929</span></a><span class="c1"># ------------------------------------------------------------------------------------------</span>
</span><span id="L-1930"><a href="#L-1930"><span class="linenos">1930</span></a><span class="k">class</span><span class="w"> </span><span class="nc">LchColorSelectorController</span><span class="p">:</span>
</span><span id="L-1931"><a href="#L-1931"><span class="linenos">1931</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1932"><a href="#L-1932"><span class="linenos">1932</span></a><span class="sd">    Controller for LCH color space selective editing interface.</span>
</span><span id="L-1933"><a href="#L-1933"><span class="linenos">1933</span></a><span class="sd">    </span>
</span><span id="L-1934"><a href="#L-1934"><span class="linenos">1934</span></a><span class="sd">    This class manages the advanced color editing interface that operates in LCH</span>
</span><span id="L-1935"><a href="#L-1935"><span class="linenos">1935</span></a><span class="sd">    (Lightness, Chroma, Hue) color space, providing precise control over color</span>
</span><span id="L-1936"><a href="#L-1936"><span class="linenos">1936</span></a><span class="sd">    selection and modification. It enables photographers to selectively edit</span>
</span><span id="L-1937"><a href="#L-1937"><span class="linenos">1937</span></a><span class="sd">    specific color ranges with professional-grade precision.</span>
</span><span id="L-1938"><a href="#L-1938"><span class="linenos">1938</span></a><span class="sd">    </span>
</span><span id="L-1939"><a href="#L-1939"><span class="linenos">1939</span></a><span class="sd">    The LCH color editor combines color selection tools with editing controls,</span>
</span><span id="L-1940"><a href="#L-1940"><span class="linenos">1940</span></a><span class="sd">    allowing for targeted adjustments to specific colors while preserving the</span>
</span><span id="L-1941"><a href="#L-1941"><span class="linenos">1941</span></a><span class="sd">    overall image integrity. This is essential for professional HDR color grading.</span>
</span><span id="L-1942"><a href="#L-1942"><span class="linenos">1942</span></a><span class="sd">    </span>
</span><span id="L-1943"><a href="#L-1943"><span class="linenos">1943</span></a><span class="sd">    Attributes:</span>
</span><span id="L-1944"><a href="#L-1944"><span class="linenos">1944</span></a><span class="sd">        - parent: Parent controller for coordination</span>
</span><span id="L-1945"><a href="#L-1945"><span class="linenos">1945</span></a><span class="sd">        - model (model.LchColorSelectorModel): LCH color editing data model</span>
</span><span id="L-1946"><a href="#L-1946"><span class="linenos">1946</span></a><span class="sd">        - view (view.LchColorSelectorView): LCH color editing interface</span>
</span><span id="L-1947"><a href="#L-1947"><span class="linenos">1947</span></a><span class="sd">        - idName (str): Unique identifier for this color editor instance</span>
</span><span id="L-1948"><a href="#L-1948"><span class="linenos">1948</span></a><span class="sd">        - callBackActive (bool): Enable/disable callback processing</span>
</span><span id="L-1949"><a href="#L-1949"><span class="linenos">1949</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-1950"><a href="#L-1950"><span class="linenos">1950</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">idName</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="L-1951"><a href="#L-1951"><span class="linenos">1951</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1952"><a href="#L-1952"><span class="linenos">1952</span></a><span class="sd">        Initialize the LCH color selector controller.</span>
</span><span id="L-1953"><a href="#L-1953"><span class="linenos">1953</span></a><span class="sd">        </span>
</span><span id="L-1954"><a href="#L-1954"><span class="linenos">1954</span></a><span class="sd">        Args:</span>
</span><span id="L-1955"><a href="#L-1955"><span class="linenos">1955</span></a><span class="sd">            parent: Parent controller for coordination</span>
</span><span id="L-1956"><a href="#L-1956"><span class="linenos">1956</span></a><span class="sd">            idName (str, optional): Unique identifier for this editor instance</span>
</span><span id="L-1957"><a href="#L-1957"><span class="linenos">1957</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1958"><a href="#L-1958"><span class="linenos">1958</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; LchColorSelectorController.__init__(&quot;</span><span class="p">,</span><span class="s2">&quot;) &quot;</span><span class="p">)</span>
</span><span id="L-1959"><a href="#L-1959"><span class="linenos">1959</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
</span><span id="L-1960"><a href="#L-1960"><span class="linenos">1960</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span>    <span class="n">model</span><span class="o">.</span><span class="n">LchColorSelectorModel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="L-1961"><a href="#L-1961"><span class="linenos">1961</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span>     <span class="n">view</span><span class="o">.</span><span class="n">LchColorSelectorView</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="L-1962"><a href="#L-1962"><span class="linenos">1962</span></a>
</span><span id="L-1963"><a href="#L-1963"><span class="linenos">1963</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">idName</span> <span class="o">=</span> <span class="n">idName</span>
</span><span id="L-1964"><a href="#L-1964"><span class="linenos">1964</span></a>
</span><span id="L-1965"><a href="#L-1965"><span class="linenos">1965</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-1966"><a href="#L-1966"><span class="linenos">1966</span></a>
</span><span id="L-1967"><a href="#L-1967"><span class="linenos">1967</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">sliderHueChange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vMin</span><span class="p">,</span> <span class="n">vMax</span><span class="p">):</span>
</span><span id="L-1968"><a href="#L-1968"><span class="linenos">1968</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1969"><a href="#L-1969"><span class="linenos">1969</span></a><span class="sd">        Handle hue range selection changes.</span>
</span><span id="L-1970"><a href="#L-1970"><span class="linenos">1970</span></a><span class="sd">        </span>
</span><span id="L-1971"><a href="#L-1971"><span class="linenos">1971</span></a><span class="sd">        Args:</span>
</span><span id="L-1972"><a href="#L-1972"><span class="linenos">1972</span></a><span class="sd">            vMin (float): Minimum hue value for selection (0-360 degrees)</span>
</span><span id="L-1973"><a href="#L-1973"><span class="linenos">1973</span></a><span class="sd">            vMax (float): Maximum hue value for selection (0-360 degrees)</span>
</span><span id="L-1974"><a href="#L-1974"><span class="linenos">1974</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1975"><a href="#L-1975"><span class="linenos">1975</span></a>        <span class="n">values</span>  <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setHueSelection</span><span class="p">(</span><span class="n">vMin</span><span class="p">,</span><span class="n">vMax</span><span class="p">)</span>
</span><span id="L-1976"><a href="#L-1976"><span class="linenos">1976</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">changeColorEditor</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">idName</span><span class="p">)</span>
</span><span id="L-1977"><a href="#L-1977"><span class="linenos">1977</span></a>
</span><span id="L-1978"><a href="#L-1978"><span class="linenos">1978</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">sliderChromaChange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vMin</span><span class="p">,</span> <span class="n">vMax</span><span class="p">):</span>
</span><span id="L-1979"><a href="#L-1979"><span class="linenos">1979</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1980"><a href="#L-1980"><span class="linenos">1980</span></a><span class="sd">        Handle chroma range selection changes.</span>
</span><span id="L-1981"><a href="#L-1981"><span class="linenos">1981</span></a><span class="sd">        </span>
</span><span id="L-1982"><a href="#L-1982"><span class="linenos">1982</span></a><span class="sd">        Args:</span>
</span><span id="L-1983"><a href="#L-1983"><span class="linenos">1983</span></a><span class="sd">            vMin (float): Minimum chroma value for selection (0-100)</span>
</span><span id="L-1984"><a href="#L-1984"><span class="linenos">1984</span></a><span class="sd">            vMax (float): Maximum chroma value for selection (0-100)</span>
</span><span id="L-1985"><a href="#L-1985"><span class="linenos">1985</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1986"><a href="#L-1986"><span class="linenos">1986</span></a>        <span class="n">values</span>  <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setChromaSelection</span><span class="p">(</span><span class="n">vMin</span><span class="p">,</span><span class="n">vMax</span><span class="p">)</span>
</span><span id="L-1987"><a href="#L-1987"><span class="linenos">1987</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">changeColorEditor</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">idName</span><span class="p">)</span>
</span><span id="L-1988"><a href="#L-1988"><span class="linenos">1988</span></a>
</span><span id="L-1989"><a href="#L-1989"><span class="linenos">1989</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">sliderLightnessChange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vMin</span><span class="p">,</span> <span class="n">vMax</span><span class="p">):</span>
</span><span id="L-1990"><a href="#L-1990"><span class="linenos">1990</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-1991"><a href="#L-1991"><span class="linenos">1991</span></a><span class="sd">        Handle lightness range selection changes.</span>
</span><span id="L-1992"><a href="#L-1992"><span class="linenos">1992</span></a><span class="sd">        </span>
</span><span id="L-1993"><a href="#L-1993"><span class="linenos">1993</span></a><span class="sd">        Args:</span>
</span><span id="L-1994"><a href="#L-1994"><span class="linenos">1994</span></a><span class="sd">            vMin (float): Minimum lightness value for selection (0-100)</span>
</span><span id="L-1995"><a href="#L-1995"><span class="linenos">1995</span></a><span class="sd">            vMax (float): Maximum lightness value for selection (0-100)</span>
</span><span id="L-1996"><a href="#L-1996"><span class="linenos">1996</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-1997"><a href="#L-1997"><span class="linenos">1997</span></a>        <span class="n">values</span>  <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setLightnessSelection</span><span class="p">(</span><span class="n">vMin</span><span class="p">,</span><span class="n">vMax</span><span class="p">)</span>
</span><span id="L-1998"><a href="#L-1998"><span class="linenos">1998</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">changeColorEditor</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">idName</span><span class="p">)</span>
</span><span id="L-1999"><a href="#L-1999"><span class="linenos">1999</span></a>
</span><span id="L-2000"><a href="#L-2000"><span class="linenos">2000</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">sliderExposureChange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ev</span><span class="p">):</span>
</span><span id="L-2001"><a href="#L-2001"><span class="linenos">2001</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2002"><a href="#L-2002"><span class="linenos">2002</span></a><span class="sd">        Handle exposure adjustment for selected colors.</span>
</span><span id="L-2003"><a href="#L-2003"><span class="linenos">2003</span></a><span class="sd">        </span>
</span><span id="L-2004"><a href="#L-2004"><span class="linenos">2004</span></a><span class="sd">        Args:</span>
</span><span id="L-2005"><a href="#L-2005"><span class="linenos">2005</span></a><span class="sd">            ev (float): Exposure adjustment in EV stops for selected color range</span>
</span><span id="L-2006"><a href="#L-2006"><span class="linenos">2006</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2007"><a href="#L-2007"><span class="linenos">2007</span></a>        <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setExposure</span><span class="p">(</span><span class="n">ev</span><span class="p">)</span>
</span><span id="L-2008"><a href="#L-2008"><span class="linenos">2008</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">changeColorEditor</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">idName</span><span class="p">)</span>
</span><span id="L-2009"><a href="#L-2009"><span class="linenos">2009</span></a>
</span><span id="L-2010"><a href="#L-2010"><span class="linenos">2010</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">sliderSaturationChange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sat</span><span class="p">):</span>
</span><span id="L-2011"><a href="#L-2011"><span class="linenos">2011</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2012"><a href="#L-2012"><span class="linenos">2012</span></a><span class="sd">        Handle saturation adjustment for selected colors.</span>
</span><span id="L-2013"><a href="#L-2013"><span class="linenos">2013</span></a><span class="sd">        </span>
</span><span id="L-2014"><a href="#L-2014"><span class="linenos">2014</span></a><span class="sd">        Args:</span>
</span><span id="L-2015"><a href="#L-2015"><span class="linenos">2015</span></a><span class="sd">            sat (float): Saturation adjustment for selected color range</span>
</span><span id="L-2016"><a href="#L-2016"><span class="linenos">2016</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2017"><a href="#L-2017"><span class="linenos">2017</span></a>        <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setSaturation</span><span class="p">(</span><span class="n">sat</span><span class="p">)</span>
</span><span id="L-2018"><a href="#L-2018"><span class="linenos">2018</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">changeColorEditor</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">idName</span><span class="p">)</span>
</span><span id="L-2019"><a href="#L-2019"><span class="linenos">2019</span></a>
</span><span id="L-2020"><a href="#L-2020"><span class="linenos">2020</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">sliderContrastChange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cc</span><span class="p">):</span>
</span><span id="L-2021"><a href="#L-2021"><span class="linenos">2021</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2022"><a href="#L-2022"><span class="linenos">2022</span></a><span class="sd">        Handle contrast adjustment for selected colors.</span>
</span><span id="L-2023"><a href="#L-2023"><span class="linenos">2023</span></a><span class="sd">        </span>
</span><span id="L-2024"><a href="#L-2024"><span class="linenos">2024</span></a><span class="sd">        Args:</span>
</span><span id="L-2025"><a href="#L-2025"><span class="linenos">2025</span></a><span class="sd">            cc (float): Contrast adjustment for selected color range</span>
</span><span id="L-2026"><a href="#L-2026"><span class="linenos">2026</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2027"><a href="#L-2027"><span class="linenos">2027</span></a>        <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setContrast</span><span class="p">(</span><span class="n">cc</span><span class="p">)</span>
</span><span id="L-2028"><a href="#L-2028"><span class="linenos">2028</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">changeColorEditor</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">idName</span><span class="p">)</span>
</span><span id="L-2029"><a href="#L-2029"><span class="linenos">2029</span></a>
</span><span id="L-2030"><a href="#L-2030"><span class="linenos">2030</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">sliderHueShiftChange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hs</span><span class="p">):</span>
</span><span id="L-2031"><a href="#L-2031"><span class="linenos">2031</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2032"><a href="#L-2032"><span class="linenos">2032</span></a><span class="sd">        Handle hue shift for selected colors.</span>
</span><span id="L-2033"><a href="#L-2033"><span class="linenos">2033</span></a><span class="sd">        </span>
</span><span id="L-2034"><a href="#L-2034"><span class="linenos">2034</span></a><span class="sd">        Args:</span>
</span><span id="L-2035"><a href="#L-2035"><span class="linenos">2035</span></a><span class="sd">            hs (float): Hue shift amount in degrees for selected color range</span>
</span><span id="L-2036"><a href="#L-2036"><span class="linenos">2036</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2037"><a href="#L-2037"><span class="linenos">2037</span></a>        <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setHueShift</span><span class="p">(</span><span class="n">hs</span><span class="p">)</span>
</span><span id="L-2038"><a href="#L-2038"><span class="linenos">2038</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">changeColorEditor</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">idName</span><span class="p">)</span>
</span><span id="L-2039"><a href="#L-2039"><span class="linenos">2039</span></a>
</span><span id="L-2040"><a href="#L-2040"><span class="linenos">2040</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">checkboxMaskChange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">value</span><span class="p">):</span> 
</span><span id="L-2041"><a href="#L-2041"><span class="linenos">2041</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2042"><a href="#L-2042"><span class="linenos">2042</span></a><span class="sd">        Toggle mask visualization for selected colors.</span>
</span><span id="L-2043"><a href="#L-2043"><span class="linenos">2043</span></a><span class="sd">        </span>
</span><span id="L-2044"><a href="#L-2044"><span class="linenos">2044</span></a><span class="sd">        Args:</span>
</span><span id="L-2045"><a href="#L-2045"><span class="linenos">2045</span></a><span class="sd">            value (bool): Enable (True) or disable (False) mask visualization</span>
</span><span id="L-2046"><a href="#L-2046"><span class="linenos">2046</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2047"><a href="#L-2047"><span class="linenos">2047</span></a>        <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setMask</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span><span id="L-2048"><a href="#L-2048"><span class="linenos">2048</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">changeColorEditor</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">idName</span><span class="p">)</span>
</span><span id="L-2049"><a href="#L-2049"><span class="linenos">2049</span></a>
</span><span id="L-2050"><a href="#L-2050"><span class="linenos">2050</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setValues</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">,</span> <span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="L-2051"><a href="#L-2051"><span class="linenos">2051</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2052"><a href="#L-2052"><span class="linenos">2052</span></a><span class="sd">        Set all color editing parameters programmatically.</span>
</span><span id="L-2053"><a href="#L-2053"><span class="linenos">2053</span></a><span class="sd">        </span>
</span><span id="L-2054"><a href="#L-2054"><span class="linenos">2054</span></a><span class="sd">        Updates all selection and editing controls simultaneously, typically</span>
</span><span id="L-2055"><a href="#L-2055"><span class="linenos">2055</span></a><span class="sd">        used when loading saved color editing presets or initializing the</span>
</span><span id="L-2056"><a href="#L-2056"><span class="linenos">2056</span></a><span class="sd">        interface with specific values.</span>
</span><span id="L-2057"><a href="#L-2057"><span class="linenos">2057</span></a><span class="sd">        </span>
</span><span id="L-2058"><a href="#L-2058"><span class="linenos">2058</span></a><span class="sd">        Args:</span>
</span><span id="L-2059"><a href="#L-2059"><span class="linenos">2059</span></a><span class="sd">            values (dict): Complete color editing configuration including</span>
</span><span id="L-2060"><a href="#L-2060"><span class="linenos">2060</span></a><span class="sd">                          selection ranges and editing parameters</span>
</span><span id="L-2061"><a href="#L-2061"><span class="linenos">2061</span></a><span class="sd">            callBackActive (bool, optional): Whether to trigger callbacks (default: False)</span>
</span><span id="L-2062"><a href="#L-2062"><span class="linenos">2062</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2063"><a href="#L-2063"><span class="linenos">2063</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; LchColorSelectorController.setValue(&quot;</span><span class="p">,</span><span class="n">values</span><span class="p">,</span><span class="s2">&quot;) &quot;</span><span class="p">)</span>
</span><span id="L-2064"><a href="#L-2064"><span class="linenos">2064</span></a>
</span><span id="L-2065"><a href="#L-2065"><span class="linenos">2065</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="n">callBackActive</span>
</span><span id="L-2066"><a href="#L-2066"><span class="linenos">2066</span></a>        <span class="c1"># slider hue selection</span>
</span><span id="L-2067"><a href="#L-2067"><span class="linenos">2067</span></a>        <span class="n">v</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="s1">&#39;selection&#39;</span><span class="p">][</span><span class="s1">&#39;hue&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="s1">&#39;hue&#39;</span> <span class="ow">in</span> <span class="n">values</span><span class="p">[</span><span class="s1">&#39;selection&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">else</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">360</span><span class="p">)</span>
</span><span id="L-2068"><a href="#L-2068"><span class="linenos">2068</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderHueMin</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
</span><span id="L-2069"><a href="#L-2069"><span class="linenos">2069</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderHueMax</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="L-2070"><a href="#L-2070"><span class="linenos">2070</span></a>
</span><span id="L-2071"><a href="#L-2071"><span class="linenos">2071</span></a>        <span class="c1"># slider chroma selection</span>
</span><span id="L-2072"><a href="#L-2072"><span class="linenos">2072</span></a>        <span class="n">v</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="s1">&#39;selection&#39;</span><span class="p">][</span><span class="s1">&#39;chroma&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="s1">&#39;chroma&#39;</span> <span class="ow">in</span> <span class="n">values</span><span class="p">[</span><span class="s1">&#39;selection&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">else</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
</span><span id="L-2073"><a href="#L-2073"><span class="linenos">2073</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderChromaMin</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
</span><span id="L-2074"><a href="#L-2074"><span class="linenos">2074</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderChromaMax</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="L-2075"><a href="#L-2075"><span class="linenos">2075</span></a>
</span><span id="L-2076"><a href="#L-2076"><span class="linenos">2076</span></a>        <span class="c1"># slider lightness</span>
</span><span id="L-2077"><a href="#L-2077"><span class="linenos">2077</span></a>        <span class="n">v</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="s1">&#39;selection&#39;</span><span class="p">][</span><span class="s1">&#39;lightness&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="s1">&#39;lightness&#39;</span> <span class="ow">in</span> <span class="n">values</span><span class="p">[</span><span class="s1">&#39;selection&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">else</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
</span><span id="L-2078"><a href="#L-2078"><span class="linenos">2078</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderLightMin</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="mi">3</span><span class="p">))</span>
</span><span id="L-2079"><a href="#L-2079"><span class="linenos">2079</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderLightMax</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="mi">3</span><span class="p">))</span>
</span><span id="L-2080"><a href="#L-2080"><span class="linenos">2080</span></a>
</span><span id="L-2081"><a href="#L-2081"><span class="linenos">2081</span></a>        <span class="c1"># hue shift editor</span>
</span><span id="L-2082"><a href="#L-2082"><span class="linenos">2082</span></a>        <span class="n">v</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="s1">&#39;edit&#39;</span><span class="p">][</span><span class="s1">&#39;hue&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="s1">&#39;hue&#39;</span> <span class="ow">in</span> <span class="n">values</span><span class="p">[</span><span class="s1">&#39;edit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">else</span> <span class="mi">0</span>
</span><span id="L-2083"><a href="#L-2083"><span class="linenos">2083</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderHueShift</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">v</span><span class="p">))</span>
</span><span id="L-2084"><a href="#L-2084"><span class="linenos">2084</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">valueHueShift</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">))</span> 
</span><span id="L-2085"><a href="#L-2085"><span class="linenos">2085</span></a>
</span><span id="L-2086"><a href="#L-2086"><span class="linenos">2086</span></a>        <span class="c1"># exposure editor</span>
</span><span id="L-2087"><a href="#L-2087"><span class="linenos">2087</span></a>        <span class="n">v</span> <span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="s1">&#39;edit&#39;</span><span class="p">][</span><span class="s1">&#39;exposure&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="s1">&#39;exposure&#39;</span> <span class="ow">in</span> <span class="n">values</span><span class="p">[</span><span class="s1">&#39;edit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">else</span> <span class="mi">0</span>
</span><span id="L-2088"><a href="#L-2088"><span class="linenos">2088</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderExposure</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">v</span><span class="o">*</span><span class="mi">30</span><span class="p">))</span>
</span><span id="L-2089"><a href="#L-2089"><span class="linenos">2089</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">valueExposure</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">))</span> 
</span><span id="L-2090"><a href="#L-2090"><span class="linenos">2090</span></a>
</span><span id="L-2091"><a href="#L-2091"><span class="linenos">2091</span></a>        <span class="c1"># contrast editor</span>
</span><span id="L-2092"><a href="#L-2092"><span class="linenos">2092</span></a>        <span class="n">v</span> <span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="s1">&#39;edit&#39;</span><span class="p">][</span><span class="s1">&#39;contrast&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="s1">&#39;contrast&#39;</span> <span class="ow">in</span> <span class="n">values</span><span class="p">[</span><span class="s1">&#39;edit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">else</span> <span class="mi">0</span>
</span><span id="L-2093"><a href="#L-2093"><span class="linenos">2093</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderContrast</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">v</span><span class="p">))</span>
</span><span id="L-2094"><a href="#L-2094"><span class="linenos">2094</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">valueContrast</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">))</span>  
</span><span id="L-2095"><a href="#L-2095"><span class="linenos">2095</span></a>
</span><span id="L-2096"><a href="#L-2096"><span class="linenos">2096</span></a>        <span class="c1"># saturation editor</span>
</span><span id="L-2097"><a href="#L-2097"><span class="linenos">2097</span></a>        <span class="n">v</span> <span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="s1">&#39;edit&#39;</span><span class="p">][</span><span class="s1">&#39;saturation&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="s1">&#39;saturation&#39;</span> <span class="ow">in</span> <span class="n">values</span><span class="p">[</span><span class="s1">&#39;edit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">else</span> <span class="mi">0</span>
</span><span id="L-2098"><a href="#L-2098"><span class="linenos">2098</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderSaturation</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">v</span><span class="p">))</span>
</span><span id="L-2099"><a href="#L-2099"><span class="linenos">2099</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">valueSaturation</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">))</span>  
</span><span id="L-2100"><a href="#L-2100"><span class="linenos">2100</span></a>
</span><span id="L-2101"><a href="#L-2101"><span class="linenos">2101</span></a>        <span class="c1"># mask</span>
</span><span id="L-2102"><a href="#L-2102"><span class="linenos">2102</span></a>        <span class="n">v</span> <span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="s1">&#39;mask&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="s1">&#39;mask&#39;</span> <span class="ow">in</span> <span class="n">values</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">else</span> <span class="kc">False</span>
</span><span id="L-2103"><a href="#L-2103"><span class="linenos">2103</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">checkboxMask</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="s1">&#39;mask&#39;</span><span class="p">])</span>             
</span><span id="L-2104"><a href="#L-2104"><span class="linenos">2104</span></a>
</span><span id="L-2105"><a href="#L-2105"><span class="linenos">2105</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setValues</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
</span><span id="L-2106"><a href="#L-2106"><span class="linenos">2106</span></a>
</span><span id="L-2107"><a href="#L-2107"><span class="linenos">2107</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-2108"><a href="#L-2108"><span class="linenos">2108</span></a>
</span><span id="L-2109"><a href="#L-2109"><span class="linenos">2109</span></a>    <span class="c1"># -----</span>
</span><span id="L-2110"><a href="#L-2110"><span class="linenos">2110</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">resetSelection</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
</span><span id="L-2111"><a href="#L-2111"><span class="linenos">2111</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2112"><a href="#L-2112"><span class="linenos">2112</span></a><span class="sd">        Reset color selection parameters to defaults.</span>
</span><span id="L-2113"><a href="#L-2113"><span class="linenos">2113</span></a><span class="sd">        </span>
</span><span id="L-2114"><a href="#L-2114"><span class="linenos">2114</span></a><span class="sd">        Restores the color selection range (hue, chroma, lightness) to</span>
</span><span id="L-2115"><a href="#L-2115"><span class="linenos">2115</span></a><span class="sd">        default values while preserving editing parameters. Useful for</span>
</span><span id="L-2116"><a href="#L-2116"><span class="linenos">2116</span></a><span class="sd">        starting fresh color selections.</span>
</span><span id="L-2117"><a href="#L-2117"><span class="linenos">2117</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2118"><a href="#L-2118"><span class="linenos">2118</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; LchColorSelectorController.resetSelection(&quot;</span><span class="p">,</span><span class="s2">&quot;) &quot;</span><span class="p">)</span>
</span><span id="L-2119"><a href="#L-2119"><span class="linenos">2119</span></a>
</span><span id="L-2120"><a href="#L-2120"><span class="linenos">2120</span></a>        <span class="n">default</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">default</span><span class="p">)</span>
</span><span id="L-2121"><a href="#L-2121"><span class="linenos">2121</span></a>        <span class="n">current</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getValues</span><span class="p">())</span>
</span><span id="L-2122"><a href="#L-2122"><span class="linenos">2122</span></a>        
</span><span id="L-2123"><a href="#L-2123"><span class="linenos">2123</span></a>        <span class="n">current</span><span class="p">[</span><span class="s1">&#39;selection&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">default</span><span class="p">[</span><span class="s1">&#39;selection&#39;</span><span class="p">]</span>
</span><span id="L-2124"><a href="#L-2124"><span class="linenos">2124</span></a>
</span><span id="L-2125"><a href="#L-2125"><span class="linenos">2125</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">setValues</span><span class="p">(</span><span class="n">current</span><span class="p">,</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
</span><span id="L-2126"><a href="#L-2126"><span class="linenos">2126</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-2127"><a href="#L-2127"><span class="linenos">2127</span></a>
</span><span id="L-2128"><a href="#L-2128"><span class="linenos">2128</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">resetEdit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
</span><span id="L-2129"><a href="#L-2129"><span class="linenos">2129</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2130"><a href="#L-2130"><span class="linenos">2130</span></a><span class="sd">        Reset editing parameters to defaults.</span>
</span><span id="L-2131"><a href="#L-2131"><span class="linenos">2131</span></a><span class="sd">        </span>
</span><span id="L-2132"><a href="#L-2132"><span class="linenos">2132</span></a><span class="sd">        Restores all editing adjustments (exposure, saturation, contrast,</span>
</span><span id="L-2133"><a href="#L-2133"><span class="linenos">2133</span></a><span class="sd">        hue shift) to default values while preserving color selection.</span>
</span><span id="L-2134"><a href="#L-2134"><span class="linenos">2134</span></a><span class="sd">        Useful for clearing applied adjustments.</span>
</span><span id="L-2135"><a href="#L-2135"><span class="linenos">2135</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2136"><a href="#L-2136"><span class="linenos">2136</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; LchColorSelectorController.resetEdit(&quot;</span><span class="p">,</span><span class="s2">&quot;) &quot;</span><span class="p">)</span>
</span><span id="L-2137"><a href="#L-2137"><span class="linenos">2137</span></a>
</span><span id="L-2138"><a href="#L-2138"><span class="linenos">2138</span></a>        <span class="n">default</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">default</span><span class="p">)</span>
</span><span id="L-2139"><a href="#L-2139"><span class="linenos">2139</span></a>        <span class="n">current</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getValues</span><span class="p">())</span>
</span><span id="L-2140"><a href="#L-2140"><span class="linenos">2140</span></a>        
</span><span id="L-2141"><a href="#L-2141"><span class="linenos">2141</span></a>        <span class="n">current</span><span class="p">[</span><span class="s1">&#39;edit&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">default</span><span class="p">[</span><span class="s1">&#39;edit&#39;</span><span class="p">]</span>
</span><span id="L-2142"><a href="#L-2142"><span class="linenos">2142</span></a>
</span><span id="L-2143"><a href="#L-2143"><span class="linenos">2143</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">setValues</span><span class="p">(</span><span class="n">current</span><span class="p">,</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
</span><span id="L-2144"><a href="#L-2144"><span class="linenos">2144</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-2145"><a href="#L-2145"><span class="linenos">2145</span></a><span class="c1"># ------------------------------------------------------------------------------------------</span>
</span><span id="L-2146"><a href="#L-2146"><span class="linenos">2146</span></a><span class="c1"># ---- Class LchColorSelectorController ----------------------------------------------------</span>
</span><span id="L-2147"><a href="#L-2147"><span class="linenos">2147</span></a><span class="c1"># ------------------------------------------------------------------------------------------</span>
</span><span id="L-2148"><a href="#L-2148"><span class="linenos">2148</span></a><span class="k">class</span><span class="w"> </span><span class="nc">GeometryController</span><span class="p">:</span>
</span><span id="L-2149"><a href="#L-2149"><span class="linenos">2149</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2150"><a href="#L-2150"><span class="linenos">2150</span></a><span class="sd">    Controller for geometric transformations and image adjustments.</span>
</span><span id="L-2151"><a href="#L-2151"><span class="linenos">2151</span></a><span class="sd">    </span>
</span><span id="L-2152"><a href="#L-2152"><span class="linenos">2152</span></a><span class="sd">    This class manages geometric processing controls including cropping adjustments,</span>
</span><span id="L-2153"><a href="#L-2153"><span class="linenos">2153</span></a><span class="sd">    rotation, and spatial positioning. It provides essential tools for correcting</span>
</span><span id="L-2154"><a href="#L-2154"><span class="linenos">2154</span></a><span class="sd">    perspective issues, adjusting composition, and applying geometric corrections</span>
</span><span id="L-2155"><a href="#L-2155"><span class="linenos">2155</span></a><span class="sd">    to HDR images while preserving image quality.</span>
</span><span id="L-2156"><a href="#L-2156"><span class="linenos">2156</span></a><span class="sd">    </span>
</span><span id="L-2157"><a href="#L-2157"><span class="linenos">2157</span></a><span class="sd">    The geometry controller handles precision adjustments that are critical for</span>
</span><span id="L-2158"><a href="#L-2158"><span class="linenos">2158</span></a><span class="sd">    professional HDR photography, especially when correcting architectural</span>
</span><span id="L-2159"><a href="#L-2159"><span class="linenos">2159</span></a><span class="sd">    photography or adjusting horizon lines.</span>
</span><span id="L-2160"><a href="#L-2160"><span class="linenos">2160</span></a><span class="sd">    </span>
</span><span id="L-2161"><a href="#L-2161"><span class="linenos">2161</span></a><span class="sd">    Attributes:</span>
</span><span id="L-2162"><a href="#L-2162"><span class="linenos">2162</span></a><span class="sd">        - parent: Parent controller for coordination</span>
</span><span id="L-2163"><a href="#L-2163"><span class="linenos">2163</span></a><span class="sd">        - model (model.GeometryModel): Geometric transformation data model</span>
</span><span id="L-2164"><a href="#L-2164"><span class="linenos">2164</span></a><span class="sd">        - view (view.GeometryView): Geometry adjustment interface</span>
</span><span id="L-2165"><a href="#L-2165"><span class="linenos">2165</span></a><span class="sd">        - callBackActive (bool): Enable/disable callback processing</span>
</span><span id="L-2166"><a href="#L-2166"><span class="linenos">2166</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-2167"><a href="#L-2167"><span class="linenos">2167</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span> <span class="p">):</span>
</span><span id="L-2168"><a href="#L-2168"><span class="linenos">2168</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2169"><a href="#L-2169"><span class="linenos">2169</span></a><span class="sd">        Initialize the geometry controller.</span>
</span><span id="L-2170"><a href="#L-2170"><span class="linenos">2170</span></a><span class="sd">        </span>
</span><span id="L-2171"><a href="#L-2171"><span class="linenos">2171</span></a><span class="sd">        Args:</span>
</span><span id="L-2172"><a href="#L-2172"><span class="linenos">2172</span></a><span class="sd">            parent: Parent controller for coordination and processing pipeline access</span>
</span><span id="L-2173"><a href="#L-2173"><span class="linenos">2173</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2174"><a href="#L-2174"><span class="linenos">2174</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; GeometryController.__init__(&quot;</span><span class="p">,</span><span class="s2">&quot;) &quot;</span><span class="p">)</span>
</span><span id="L-2175"><a href="#L-2175"><span class="linenos">2175</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
</span><span id="L-2176"><a href="#L-2176"><span class="linenos">2176</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span>    <span class="n">model</span><span class="o">.</span><span class="n">GeometryModel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="L-2177"><a href="#L-2177"><span class="linenos">2177</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span>     <span class="n">view</span><span class="o">.</span><span class="n">GeometryView</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="L-2178"><a href="#L-2178"><span class="linenos">2178</span></a>
</span><span id="L-2179"><a href="#L-2179"><span class="linenos">2179</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-2180"><a href="#L-2180"><span class="linenos">2180</span></a>    <span class="c1"># callbacks</span>
</span><span id="L-2181"><a href="#L-2181"><span class="linenos">2181</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">sliderCroppingVerticalAdjustementChange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">v</span><span class="p">):</span>
</span><span id="L-2182"><a href="#L-2182"><span class="linenos">2182</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2183"><a href="#L-2183"><span class="linenos">2183</span></a><span class="sd">        Handle vertical cropping position adjustments.</span>
</span><span id="L-2184"><a href="#L-2184"><span class="linenos">2184</span></a><span class="sd">        </span>
</span><span id="L-2185"><a href="#L-2185"><span class="linenos">2185</span></a><span class="sd">        Adjusts the vertical position of the crop area, allowing users to</span>
</span><span id="L-2186"><a href="#L-2186"><span class="linenos">2186</span></a><span class="sd">        reframe the image vertically while maintaining the aspect ratio.</span>
</span><span id="L-2187"><a href="#L-2187"><span class="linenos">2187</span></a><span class="sd">        </span>
</span><span id="L-2188"><a href="#L-2188"><span class="linenos">2188</span></a><span class="sd">        Args:</span>
</span><span id="L-2189"><a href="#L-2189"><span class="linenos">2189</span></a><span class="sd">            v (float): Vertical adjustment value (typically -100 to +100)</span>
</span><span id="L-2190"><a href="#L-2190"><span class="linenos">2190</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2191"><a href="#L-2191"><span class="linenos">2191</span></a>        <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setCroppingVerticalAdjustement</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
</span><span id="L-2192"><a href="#L-2192"><span class="linenos">2192</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">changeGeometry</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
</span><span id="L-2193"><a href="#L-2193"><span class="linenos">2193</span></a>
</span><span id="L-2194"><a href="#L-2194"><span class="linenos">2194</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">sliderRotationChange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">v</span><span class="p">):</span>
</span><span id="L-2195"><a href="#L-2195"><span class="linenos">2195</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2196"><a href="#L-2196"><span class="linenos">2196</span></a><span class="sd">        Handle rotation angle adjustments.</span>
</span><span id="L-2197"><a href="#L-2197"><span class="linenos">2197</span></a><span class="sd">        </span>
</span><span id="L-2198"><a href="#L-2198"><span class="linenos">2198</span></a><span class="sd">        Adjusts the image rotation angle for correcting tilted horizons or</span>
</span><span id="L-2199"><a href="#L-2199"><span class="linenos">2199</span></a><span class="sd">        perspective issues. Rotation is applied with automatic cropping to</span>
</span><span id="L-2200"><a href="#L-2200"><span class="linenos">2200</span></a><span class="sd">        maintain rectangular output.</span>
</span><span id="L-2201"><a href="#L-2201"><span class="linenos">2201</span></a><span class="sd">        </span>
</span><span id="L-2202"><a href="#L-2202"><span class="linenos">2202</span></a><span class="sd">        Args:</span>
</span><span id="L-2203"><a href="#L-2203"><span class="linenos">2203</span></a><span class="sd">            v (float): Rotation angle in degrees</span>
</span><span id="L-2204"><a href="#L-2204"><span class="linenos">2204</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2205"><a href="#L-2205"><span class="linenos">2205</span></a>        <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setRotation</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
</span><span id="L-2206"><a href="#L-2206"><span class="linenos">2206</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">changeGeometry</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
</span><span id="L-2207"><a href="#L-2207"><span class="linenos">2207</span></a>
</span><span id="L-2208"><a href="#L-2208"><span class="linenos">2208</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setValues</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">,</span> <span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="L-2209"><a href="#L-2209"><span class="linenos">2209</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2210"><a href="#L-2210"><span class="linenos">2210</span></a><span class="sd">        Set all geometry parameters programmatically.</span>
</span><span id="L-2211"><a href="#L-2211"><span class="linenos">2211</span></a><span class="sd">        </span>
</span><span id="L-2212"><a href="#L-2212"><span class="linenos">2212</span></a><span class="sd">        Updates all geometric transformation controls simultaneously, typically</span>
</span><span id="L-2213"><a href="#L-2213"><span class="linenos">2213</span></a><span class="sd">        used when loading saved geometry settings or batch updates.</span>
</span><span id="L-2214"><a href="#L-2214"><span class="linenos">2214</span></a><span class="sd">        </span>
</span><span id="L-2215"><a href="#L-2215"><span class="linenos">2215</span></a><span class="sd">        Args:</span>
</span><span id="L-2216"><a href="#L-2216"><span class="linenos">2216</span></a><span class="sd">            values (dict): Dictionary containing geometry parameters including</span>
</span><span id="L-2217"><a href="#L-2217"><span class="linenos">2217</span></a><span class="sd">                          &#39;up&#39; (vertical adjustment) and &#39;rotation&#39; (angle)</span>
</span><span id="L-2218"><a href="#L-2218"><span class="linenos">2218</span></a><span class="sd">            callBackActive (bool, optional): Whether to trigger callbacks (default: False)</span>
</span><span id="L-2219"><a href="#L-2219"><span class="linenos">2219</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2220"><a href="#L-2220"><span class="linenos">2220</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; GeometryController.setValue(&quot;</span><span class="p">,</span><span class="n">values</span><span class="p">,</span><span class="s2">&quot;) &quot;</span><span class="p">)</span>
</span><span id="L-2221"><a href="#L-2221"><span class="linenos">2221</span></a>
</span><span id="L-2222"><a href="#L-2222"><span class="linenos">2222</span></a>        <span class="n">up</span> <span class="o">=</span>        <span class="n">values</span><span class="p">[</span><span class="s1">&#39;up&#39;</span><span class="p">]</span>        <span class="k">if</span> <span class="s1">&#39;up&#39;</span> <span class="ow">in</span> <span class="n">values</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>        <span class="k">else</span> <span class="mf">0.0</span>
</span><span id="L-2223"><a href="#L-2223"><span class="linenos">2223</span></a>        <span class="n">rotation</span> <span class="o">=</span>  <span class="n">values</span><span class="p">[</span><span class="s1">&#39;rotation&#39;</span><span class="p">]</span>  <span class="k">if</span> <span class="s1">&#39;rotation&#39;</span> <span class="ow">in</span> <span class="n">values</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>  <span class="k">else</span> <span class="mf">0.0</span>
</span><span id="L-2224"><a href="#L-2224"><span class="linenos">2224</span></a>
</span><span id="L-2225"><a href="#L-2225"><span class="linenos">2225</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="n">callBackActive</span>
</span><span id="L-2226"><a href="#L-2226"><span class="linenos">2226</span></a>
</span><span id="L-2227"><a href="#L-2227"><span class="linenos">2227</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderCroppingVerticalAdjustement</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">up</span><span class="p">))</span>
</span><span id="L-2228"><a href="#L-2228"><span class="linenos">2228</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderRotation</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">rotation</span><span class="o">*</span><span class="mi">6</span><span class="p">))</span>
</span><span id="L-2229"><a href="#L-2229"><span class="linenos">2229</span></a>       
</span><span id="L-2230"><a href="#L-2230"><span class="linenos">2230</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setValues</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
</span><span id="L-2231"><a href="#L-2231"><span class="linenos">2231</span></a>
</span><span id="L-2232"><a href="#L-2232"><span class="linenos">2232</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-2233"><a href="#L-2233"><span class="linenos">2233</span></a><span class="c1"># ------------------------------------------------------------------------------------------</span>
</span><span id="L-2234"><a href="#L-2234"><span class="linenos">2234</span></a><span class="c1"># ---- Class AestheticsImageController -----------------------------------------------------</span>
</span><span id="L-2235"><a href="#L-2235"><span class="linenos">2235</span></a><span class="c1"># ------------------------------------------------------------------------------------------</span>
</span><span id="L-2236"><a href="#L-2236"><span class="linenos">2236</span></a><span class="k">class</span><span class="w"> </span><span class="nc">ImageAestheticsController</span><span class="p">:</span>
</span><span id="L-2237"><a href="#L-2237"><span class="linenos">2237</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2238"><a href="#L-2238"><span class="linenos">2238</span></a><span class="sd">    Controller for image aesthetics analysis and display.</span>
</span><span id="L-2239"><a href="#L-2239"><span class="linenos">2239</span></a><span class="sd">    </span>
</span><span id="L-2240"><a href="#L-2240"><span class="linenos">2240</span></a><span class="sd">    This class manages the MIAM (Machine Intelligence for Aesthetic Metrics)</span>
</span><span id="L-2241"><a href="#L-2241"><span class="linenos">2241</span></a><span class="sd">    interface, providing comprehensive aesthetic analysis of HDR images including</span>
</span><span id="L-2242"><a href="#L-2242"><span class="linenos">2242</span></a><span class="sd">    quality scoring, color palette extraction, and aesthetic metrics visualization.</span>
</span><span id="L-2243"><a href="#L-2243"><span class="linenos">2243</span></a><span class="sd">    </span>
</span><span id="L-2244"><a href="#L-2244"><span class="linenos">2244</span></a><span class="sd">    The aesthetics controller integrates computer vision algorithms to evaluate</span>
</span><span id="L-2245"><a href="#L-2245"><span class="linenos">2245</span></a><span class="sd">    image quality across multiple dimensions, helping photographers understand</span>
</span><span id="L-2246"><a href="#L-2246"><span class="linenos">2246</span></a><span class="sd">    the aesthetic properties of their HDR images and make informed editing decisions.</span>
</span><span id="L-2247"><a href="#L-2247"><span class="linenos">2247</span></a><span class="sd">    </span>
</span><span id="L-2248"><a href="#L-2248"><span class="linenos">2248</span></a><span class="sd">    Attributes:</span>
</span><span id="L-2249"><a href="#L-2249"><span class="linenos">2249</span></a><span class="sd">        - parent: Parent controller for coordination</span>
</span><span id="L-2250"><a href="#L-2250"><span class="linenos">2250</span></a><span class="sd">        - model (model.ImageAestheticsModel): Aesthetics analysis data model</span>
</span><span id="L-2251"><a href="#L-2251"><span class="linenos">2251</span></a><span class="sd">        - view (view.ImageAestheticsView): Aesthetics display interface</span>
</span><span id="L-2252"><a href="#L-2252"><span class="linenos">2252</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-2253"><a href="#L-2253"><span class="linenos">2253</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">HDRcontroller</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="L-2254"><a href="#L-2254"><span class="linenos">2254</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2255"><a href="#L-2255"><span class="linenos">2255</span></a><span class="sd">        Initialize the image aesthetics controller.</span>
</span><span id="L-2256"><a href="#L-2256"><span class="linenos">2256</span></a><span class="sd">        </span>
</span><span id="L-2257"><a href="#L-2257"><span class="linenos">2257</span></a><span class="sd">        Args:</span>
</span><span id="L-2258"><a href="#L-2258"><span class="linenos">2258</span></a><span class="sd">            parent: Parent controller for coordination</span>
</span><span id="L-2259"><a href="#L-2259"><span class="linenos">2259</span></a><span class="sd">            HDRcontroller: HDR display controller (not used in current implementation)</span>
</span><span id="L-2260"><a href="#L-2260"><span class="linenos">2260</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2261"><a href="#L-2261"><span class="linenos">2261</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; AestheticsImageController.__init__(&quot;</span><span class="p">,</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
</span><span id="L-2262"><a href="#L-2262"><span class="linenos">2262</span></a>
</span><span id="L-2263"><a href="#L-2263"><span class="linenos">2263</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
</span><span id="L-2264"><a href="#L-2264"><span class="linenos">2264</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">ImageAestheticsModel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="L-2265"><a href="#L-2265"><span class="linenos">2265</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">ImageAestheticsView</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="L-2266"><a href="#L-2266"><span class="linenos">2266</span></a>    <span class="c1"># --------------------------------------------------------------------------------------</span>
</span><span id="L-2267"><a href="#L-2267"><span class="linenos">2267</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">buildView</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">processPipe</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="L-2268"><a href="#L-2268"><span class="linenos">2268</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2269"><a href="#L-2269"><span class="linenos">2269</span></a><span class="sd">        Build or rebuild the aesthetics interface view.</span>
</span><span id="L-2270"><a href="#L-2270"><span class="linenos">2270</span></a><span class="sd">        </span>
</span><span id="L-2271"><a href="#L-2271"><span class="linenos">2271</span></a><span class="sd">        Reconstructs the aesthetics analysis interface, typically called when</span>
</span><span id="L-2272"><a href="#L-2272"><span class="linenos">2272</span></a><span class="sd">        switching to the aesthetics panel or refreshing the analysis display.</span>
</span><span id="L-2273"><a href="#L-2273"><span class="linenos">2273</span></a><span class="sd">        </span>
</span><span id="L-2274"><a href="#L-2274"><span class="linenos">2274</span></a><span class="sd">        Args:</span>
</span><span id="L-2275"><a href="#L-2275"><span class="linenos">2275</span></a><span class="sd">            processPipe: Optional processing pipeline to analyze during build</span>
</span><span id="L-2276"><a href="#L-2276"><span class="linenos">2276</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2277"><a href="#L-2277"><span class="linenos">2277</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; AestheticsImageController.buildView()&quot;</span><span class="p">)</span>
</span><span id="L-2278"><a href="#L-2278"><span class="linenos">2278</span></a>
</span><span id="L-2279"><a href="#L-2279"><span class="linenos">2279</span></a>        <span class="c1"># called when MultiDockController recall a controller/view </span>
</span><span id="L-2280"><a href="#L-2280"><span class="linenos">2280</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">ImageAestheticsView</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="L-2281"><a href="#L-2281"><span class="linenos">2281</span></a>        <span class="k">if</span> <span class="n">processPipe</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">setProcessPipe</span><span class="p">(</span><span class="n">processPipe</span><span class="p">)</span>
</span><span id="L-2282"><a href="#L-2282"><span class="linenos">2282</span></a>    <span class="c1"># --------------------------------------------------------------------------------------</span>
</span><span id="L-2283"><a href="#L-2283"><span class="linenos">2283</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setProcessPipe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">processPipe</span><span class="p">):</span> 
</span><span id="L-2284"><a href="#L-2284"><span class="linenos">2284</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2285"><a href="#L-2285"><span class="linenos">2285</span></a><span class="sd">        Set processing pipeline for aesthetic analysis.</span>
</span><span id="L-2286"><a href="#L-2286"><span class="linenos">2286</span></a><span class="sd">        </span>
</span><span id="L-2287"><a href="#L-2287"><span class="linenos">2287</span></a><span class="sd">        Configures the aesthetics interface to analyze the specified processing</span>
</span><span id="L-2288"><a href="#L-2288"><span class="linenos">2288</span></a><span class="sd">        pipeline&#39;s image, computing aesthetic metrics and generating visual</span>
</span><span id="L-2289"><a href="#L-2289"><span class="linenos">2289</span></a><span class="sd">        analysis including color palette extraction.</span>
</span><span id="L-2290"><a href="#L-2290"><span class="linenos">2290</span></a><span class="sd">        </span>
</span><span id="L-2291"><a href="#L-2291"><span class="linenos">2291</span></a><span class="sd">        Args:</span>
</span><span id="L-2292"><a href="#L-2292"><span class="linenos">2292</span></a><span class="sd">            processPipe: Processing pipeline containing image for analysis</span>
</span><span id="L-2293"><a href="#L-2293"><span class="linenos">2293</span></a><span class="sd">            </span>
</span><span id="L-2294"><a href="#L-2294"><span class="linenos">2294</span></a><span class="sd">        Returns:</span>
</span><span id="L-2295"><a href="#L-2295"><span class="linenos">2295</span></a><span class="sd">            bool: True (always successful for aesthetics analysis)</span>
</span><span id="L-2296"><a href="#L-2296"><span class="linenos">2296</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2297"><a href="#L-2297"><span class="linenos">2297</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; AestheticsImageController.setProcessPipe()&quot;</span><span class="p">)</span>
</span><span id="L-2298"><a href="#L-2298"><span class="linenos">2298</span></a>
</span><span id="L-2299"><a href="#L-2299"><span class="linenos">2299</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setProcessPipe</span><span class="p">(</span><span class="n">processPipe</span><span class="p">)</span>
</span><span id="L-2300"><a href="#L-2300"><span class="linenos">2300</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">setProcessPipe</span><span class="p">(</span><span class="n">processPipe</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getPaletteImage</span><span class="p">())</span>
</span><span id="L-2301"><a href="#L-2301"><span class="linenos">2301</span></a>
</span><span id="L-2302"><a href="#L-2302"><span class="linenos">2302</span></a>        <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-2303"><a href="#L-2303"><span class="linenos">2303</span></a><span class="c1"># ------------------------------------------------------------------------------------------</span>
</span><span id="L-2304"><a href="#L-2304"><span class="linenos">2304</span></a><span class="c1"># ------------------------------------------------------------------------------------------</span>
</span><span id="L-2305"><a href="#L-2305"><span class="linenos">2305</span></a><span class="c1"># --- message widget functions -------------------------------------------------------------</span>
</span><span id="L-2306"><a href="#L-2306"><span class="linenos">2306</span></a><span class="c1"># ------------------------------------------------------------------------------------------</span>
</span><span id="L-2307"><a href="#L-2307"><span class="linenos">2307</span></a><span class="c1"># ------------------------------------------------------------------------------------------</span>
</span><span id="L-2308"><a href="#L-2308"><span class="linenos">2308</span></a><span class="k">def</span><span class="w"> </span><span class="nf">messageBox</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
</span><span id="L-2309"><a href="#L-2309"><span class="linenos">2309</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2310"><a href="#L-2310"><span class="linenos">2310</span></a><span class="sd">    Display informational message dialog.</span>
</span><span id="L-2311"><a href="#L-2311"><span class="linenos">2311</span></a><span class="sd">    </span>
</span><span id="L-2312"><a href="#L-2312"><span class="linenos">2312</span></a><span class="sd">    Creates and displays a simple message box with OK button for user notifications.</span>
</span><span id="L-2313"><a href="#L-2313"><span class="linenos">2313</span></a><span class="sd">    </span>
</span><span id="L-2314"><a href="#L-2314"><span class="linenos">2314</span></a><span class="sd">    Args:</span>
</span><span id="L-2315"><a href="#L-2315"><span class="linenos">2315</span></a><span class="sd">        title (str): Dialog window title</span>
</span><span id="L-2316"><a href="#L-2316"><span class="linenos">2316</span></a><span class="sd">        text (str): Message text to display</span>
</span><span id="L-2317"><a href="#L-2317"><span class="linenos">2317</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-2318"><a href="#L-2318"><span class="linenos">2318</span></a>    <span class="n">msg</span> <span class="o">=</span> <span class="n">QMessageBox</span><span class="p">()</span>
</span><span id="L-2319"><a href="#L-2319"><span class="linenos">2319</span></a>    <span class="n">msg</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</span><span id="L-2320"><a href="#L-2320"><span class="linenos">2320</span></a>    <span class="n">msg</span><span class="o">.</span><span class="n">setStandardButtons</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Ok</span><span class="p">)</span>
</span><span id="L-2321"><a href="#L-2321"><span class="linenos">2321</span></a>    <span class="n">msg</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
</span><span id="L-2322"><a href="#L-2322"><span class="linenos">2322</span></a>    <span class="n">msg</span><span class="o">.</span><span class="n">setStandardButtons</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Ok</span><span class="p">)</span>
</span><span id="L-2323"><a href="#L-2323"><span class="linenos">2323</span></a>    <span class="n">msg</span><span class="o">.</span><span class="n">setEscapeButton</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Close</span><span class="p">)</span>
</span><span id="L-2324"><a href="#L-2324"><span class="linenos">2324</span></a>    <span class="n">msg</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span>
</span><span id="L-2325"><a href="#L-2325"><span class="linenos">2325</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-2326"><a href="#L-2326"><span class="linenos">2326</span></a><span class="k">def</span><span class="w"> </span><span class="nf">okCancelBox</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
</span><span id="L-2327"><a href="#L-2327"><span class="linenos">2327</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2328"><a href="#L-2328"><span class="linenos">2328</span></a><span class="sd">    Display confirmation dialog with OK/Cancel options.</span>
</span><span id="L-2329"><a href="#L-2329"><span class="linenos">2329</span></a><span class="sd">    </span>
</span><span id="L-2330"><a href="#L-2330"><span class="linenos">2330</span></a><span class="sd">    Creates and displays a confirmation dialog allowing user to proceed or cancel.</span>
</span><span id="L-2331"><a href="#L-2331"><span class="linenos">2331</span></a><span class="sd">    </span>
</span><span id="L-2332"><a href="#L-2332"><span class="linenos">2332</span></a><span class="sd">    Args:</span>
</span><span id="L-2333"><a href="#L-2333"><span class="linenos">2333</span></a><span class="sd">        title (str): Dialog window title</span>
</span><span id="L-2334"><a href="#L-2334"><span class="linenos">2334</span></a><span class="sd">        text (str): Confirmation message text</span>
</span><span id="L-2335"><a href="#L-2335"><span class="linenos">2335</span></a><span class="sd">        </span>
</span><span id="L-2336"><a href="#L-2336"><span class="linenos">2336</span></a><span class="sd">    Returns:</span>
</span><span id="L-2337"><a href="#L-2337"><span class="linenos">2337</span></a><span class="sd">        int: User&#39;s choice (QMessageBox.Ok or QMessageBox.Cancel)</span>
</span><span id="L-2338"><a href="#L-2338"><span class="linenos">2338</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-2339"><a href="#L-2339"><span class="linenos">2339</span></a>    <span class="n">msg</span> <span class="o">=</span> <span class="n">QMessageBox</span><span class="p">()</span>
</span><span id="L-2340"><a href="#L-2340"><span class="linenos">2340</span></a>    <span class="n">msg</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</span><span id="L-2341"><a href="#L-2341"><span class="linenos">2341</span></a>    <span class="n">msg</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
</span><span id="L-2342"><a href="#L-2342"><span class="linenos">2342</span></a>    <span class="n">msg</span><span class="o">.</span><span class="n">setStandardButtons</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Ok</span> <span class="o">|</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">Cancel</span><span class="p">)</span>
</span><span id="L-2343"><a href="#L-2343"><span class="linenos">2343</span></a>    <span class="n">msg</span><span class="o">.</span><span class="n">setEscapeButton</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Close</span><span class="p">)</span>
</span><span id="L-2344"><a href="#L-2344"><span class="linenos">2344</span></a>    <span class="k">return</span> <span class="n">msg</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span>
</span><span id="L-2345"><a href="#L-2345"><span class="linenos">2345</span></a><span class="c1"># ------------------------------------------------------------------------------------------</span>
</span><span id="L-2346"><a href="#L-2346"><span class="linenos">2346</span></a><span class="c1"># ---- Class ColorEditorsAutoController ----------------------------------------------------</span>
</span><span id="L-2347"><a href="#L-2347"><span class="linenos">2347</span></a><span class="c1"># ------------------------------------------------------------------------------------------</span>
</span><span id="L-2348"><a href="#L-2348"><span class="linenos">2348</span></a><span class="k">class</span><span class="w">  </span><span class="nc">ColorEditorsAutoController</span><span class="p">:</span>
</span><span id="L-2349"><a href="#L-2349"><span class="linenos">2349</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2350"><a href="#L-2350"><span class="linenos">2350</span></a><span class="sd">    Controller for automatic color editor configuration and management.</span>
</span><span id="L-2351"><a href="#L-2351"><span class="linenos">2351</span></a><span class="sd">    </span>
</span><span id="L-2352"><a href="#L-2352"><span class="linenos">2352</span></a><span class="sd">    This class provides automated color editing capabilities by analyzing image</span>
</span><span id="L-2353"><a href="#L-2353"><span class="linenos">2353</span></a><span class="sd">    content and automatically configuring multiple color editor instances with</span>
</span><span id="L-2354"><a href="#L-2354"><span class="linenos">2354</span></a><span class="sd">    optimal settings. It uses advanced algorithms to identify dominant colors</span>
</span><span id="L-2355"><a href="#L-2355"><span class="linenos">2355</span></a><span class="sd">    and suggest appropriate editing parameters for professional color grading.</span>
</span><span id="L-2356"><a href="#L-2356"><span class="linenos">2356</span></a><span class="sd">    </span>
</span><span id="L-2357"><a href="#L-2357"><span class="linenos">2357</span></a><span class="sd">    The automatic color editor system streamlines the workflow for complex color</span>
</span><span id="L-2358"><a href="#L-2358"><span class="linenos">2358</span></a><span class="sd">    corrections by providing intelligent starting points for manual fine-tuning.</span>
</span><span id="L-2359"><a href="#L-2359"><span class="linenos">2359</span></a><span class="sd">    </span>
</span><span id="L-2360"><a href="#L-2360"><span class="linenos">2360</span></a><span class="sd">    Attributes:</span>
</span><span id="L-2361"><a href="#L-2361"><span class="linenos">2361</span></a><span class="sd">        - parent: Parent controller for coordination</span>
</span><span id="L-2362"><a href="#L-2362"><span class="linenos">2362</span></a><span class="sd">        - controlled (list): List of controlled color editor instances</span>
</span><span id="L-2363"><a href="#L-2363"><span class="linenos">2363</span></a><span class="sd">        - stepName (str): Processing step name for this auto-controller</span>
</span><span id="L-2364"><a href="#L-2364"><span class="linenos">2364</span></a><span class="sd">        - model (model.ColorEditorsAutoModel): Auto-color editing data model</span>
</span><span id="L-2365"><a href="#L-2365"><span class="linenos">2365</span></a><span class="sd">        - view (view.ColorEditorsAutoView): Auto-color editing interface</span>
</span><span id="L-2366"><a href="#L-2366"><span class="linenos">2366</span></a><span class="sd">        - callBackActive (bool): Enable/disable callback processing</span>
</span><span id="L-2367"><a href="#L-2367"><span class="linenos">2367</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-2368"><a href="#L-2368"><span class="linenos">2368</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">controlledColorEditors</span><span class="p">,</span> <span class="n">stepName</span> <span class="p">):</span>
</span><span id="L-2369"><a href="#L-2369"><span class="linenos">2369</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2370"><a href="#L-2370"><span class="linenos">2370</span></a><span class="sd">        Initialize the automatic color editors controller.</span>
</span><span id="L-2371"><a href="#L-2371"><span class="linenos">2371</span></a><span class="sd">        </span>
</span><span id="L-2372"><a href="#L-2372"><span class="linenos">2372</span></a><span class="sd">        Args:</span>
</span><span id="L-2373"><a href="#L-2373"><span class="linenos">2373</span></a><span class="sd">            parent: Parent controller for coordination</span>
</span><span id="L-2374"><a href="#L-2374"><span class="linenos">2374</span></a><span class="sd">            controlledColorEditors (list): List of color editor controllers to manage</span>
</span><span id="L-2375"><a href="#L-2375"><span class="linenos">2375</span></a><span class="sd">            stepName (str): Processing step identifier for this auto-controller</span>
</span><span id="L-2376"><a href="#L-2376"><span class="linenos">2376</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2377"><a href="#L-2377"><span class="linenos">2377</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; ColorEditorsAutoController.__init__(&quot;</span><span class="p">,</span><span class="s2">&quot;) &quot;</span><span class="p">)</span>
</span><span id="L-2378"><a href="#L-2378"><span class="linenos">2378</span></a>
</span><span id="L-2379"><a href="#L-2379"><span class="linenos">2379</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
</span><span id="L-2380"><a href="#L-2380"><span class="linenos">2380</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">controlled</span> <span class="o">=</span> <span class="n">controlledColorEditors</span>
</span><span id="L-2381"><a href="#L-2381"><span class="linenos">2381</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stepName</span> <span class="o">=</span><span class="n">stepName</span>
</span><span id="L-2382"><a href="#L-2382"><span class="linenos">2382</span></a>
</span><span id="L-2383"><a href="#L-2383"><span class="linenos">2383</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span>    <span class="n">model</span><span class="o">.</span><span class="n">ColorEditorsAutoModel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stepName</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">controlledColorEditors</span><span class="p">),</span> <span class="n">removeBlack</span><span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
</span><span id="L-2384"><a href="#L-2384"><span class="linenos">2384</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span>     <span class="n">view</span><span class="o">.</span><span class="n">ColorEditorsAutoView</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="L-2385"><a href="#L-2385"><span class="linenos">2385</span></a>
</span><span id="L-2386"><a href="#L-2386"><span class="linenos">2386</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-2387"><a href="#L-2387"><span class="linenos">2387</span></a>    <span class="c1"># callbacks</span>
</span><span id="L-2388"><a href="#L-2388"><span class="linenos">2388</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">auto</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
</span><span id="L-2389"><a href="#L-2389"><span class="linenos">2389</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-2390"><a href="#L-2390"><span class="linenos">2390</span></a><span class="sd">        Trigger automatic color editor configuration.</span>
</span><span id="L-2391"><a href="#L-2391"><span class="linenos">2391</span></a><span class="sd">        </span>
</span><span id="L-2392"><a href="#L-2392"><span class="linenos">2392</span></a><span class="sd">        Analyzes the current image to identify dominant colors and automatically</span>
</span><span id="L-2393"><a href="#L-2393"><span class="linenos">2393</span></a><span class="sd">        configures all controlled color editors with appropriate selection ranges</span>
</span><span id="L-2394"><a href="#L-2394"><span class="linenos">2394</span></a><span class="sd">        and initial editing parameters. Resets all editors before applying new</span>
</span><span id="L-2395"><a href="#L-2395"><span class="linenos">2395</span></a><span class="sd">        automatic configurations.</span>
</span><span id="L-2396"><a href="#L-2396"><span class="linenos">2396</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-2397"><a href="#L-2397"><span class="linenos">2397</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; ColorEditorsAutoController.auto(&quot;</span><span class="p">,</span><span class="s2">&quot;) &quot;</span><span class="p">)</span>
</span><span id="L-2398"><a href="#L-2398"><span class="linenos">2398</span></a>        <span class="k">for</span> <span class="n">ce</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">controlled</span><span class="p">:</span> <span class="n">ce</span><span class="o">.</span><span class="n">resetSelection</span><span class="p">();</span> <span class="n">ce</span><span class="o">.</span><span class="n">resetEdit</span><span class="p">()</span>
</span><span id="L-2399"><a href="#L-2399"><span class="linenos">2399</span></a>        <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span>
</span><span id="L-2400"><a href="#L-2400"><span class="linenos">2400</span></a>
</span><span id="L-2401"><a href="#L-2401"><span class="linenos">2401</span></a>        <span class="k">if</span> <span class="n">values</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-2402"><a href="#L-2402"><span class="linenos">2402</span></a>            <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">values</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">controlled</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">setValues</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
</span></pre></div>


            </section>
                <section id="getScreenSize">
                            <input id="getScreenSize-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">getScreenSize</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">app</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="getScreenSize-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#getScreenSize"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="getScreenSize-86"><a href="#getScreenSize-86"><span class="linenos"> 86</span></a><span class="k">def</span><span class="w"> </span><span class="nf">getScreenSize</span><span class="p">(</span><span class="n">app</span><span class="p">):</span>
</span><span id="getScreenSize-87"><a href="#getScreenSize-87"><span class="linenos"> 87</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="getScreenSize-88"><a href="#getScreenSize-88"><span class="linenos"> 88</span></a><span class="sd">    Get screen resolution information for multi-monitor support.</span>
</span><span id="getScreenSize-89"><a href="#getScreenSize-89"><span class="linenos"> 89</span></a><span class="sd">    </span>
</span><span id="getScreenSize-90"><a href="#getScreenSize-90"><span class="linenos"> 90</span></a><span class="sd">    Queries the application for all available screens and returns their</span>
</span><span id="getScreenSize-91"><a href="#getScreenSize-91"><span class="linenos"> 91</span></a><span class="sd">    dimensions for HDR display configuration and window management.</span>
</span><span id="getScreenSize-92"><a href="#getScreenSize-92"><span class="linenos"> 92</span></a><span class="sd">    </span>
</span><span id="getScreenSize-93"><a href="#getScreenSize-93"><span class="linenos"> 93</span></a><span class="sd">    Args:</span>
</span><span id="getScreenSize-94"><a href="#getScreenSize-94"><span class="linenos"> 94</span></a><span class="sd">        app (QApplication): PyQt5 application instance</span>
</span><span id="getScreenSize-95"><a href="#getScreenSize-95"><span class="linenos"> 95</span></a><span class="sd">        </span>
</span><span id="getScreenSize-96"><a href="#getScreenSize-96"><span class="linenos"> 96</span></a><span class="sd">    Returns:</span>
</span><span id="getScreenSize-97"><a href="#getScreenSize-97"><span class="linenos"> 97</span></a><span class="sd">        list: List of QSize objects representing screen dimensions</span>
</span><span id="getScreenSize-98"><a href="#getScreenSize-98"><span class="linenos"> 98</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="getScreenSize-99"><a href="#getScreenSize-99"><span class="linenos"> 99</span></a>    <span class="n">screens</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">screens</span><span class="p">()</span>
</span><span id="getScreenSize-100"><a href="#getScreenSize-100"><span class="linenos">100</span></a>    <span class="n">res</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">size</span><span class="p">(),</span> <span class="n">screens</span><span class="p">))</span>
</span><span id="getScreenSize-101"><a href="#getScreenSize-101"><span class="linenos">101</span></a>    <span class="k">return</span> <span class="n">res</span>
</span></pre></div>


            <div class="docstring"><p>Get screen resolution information for multi-monitor support.</p>

<p>Queries the application for all available screens and returns their
dimensions for HDR display configuration and window management.</p>

<p>Args:
    app (QApplication): PyQt5 application instance</p>

<p>Returns:
    list: List of QSize objects representing screen dimensions</p>
</div>


                </section>
                <section id="GalleryMode">
                            <input id="GalleryMode-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">GalleryMode</span><wbr>(<span class="base">enum.Enum</span>):

                <label class="view-source-button" for="GalleryMode-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GalleryMode"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GalleryMode-105"><a href="#GalleryMode-105"><span class="linenos">105</span></a><span class="k">class</span><span class="w"> </span><span class="nc">GalleryMode</span><span class="p">(</span><span class="n">enum</span><span class="o">.</span><span class="n">Enum</span><span class="p">):</span>
</span><span id="GalleryMode-106"><a href="#GalleryMode-106"><span class="linenos">106</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GalleryMode-107"><a href="#GalleryMode-107"><span class="linenos">107</span></a><span class="sd">    Enumeration for gallery display layout configurations.</span>
</span><span id="GalleryMode-108"><a href="#GalleryMode-108"><span class="linenos">108</span></a><span class="sd">    </span>
</span><span id="GalleryMode-109"><a href="#GalleryMode-109"><span class="linenos">109</span></a><span class="sd">    Defines different grid layouts for the image gallery, allowing users</span>
</span><span id="GalleryMode-110"><a href="#GalleryMode-110"><span class="linenos">110</span></a><span class="sd">    to view multiple images simultaneously in various arrangements.</span>
</span><span id="GalleryMode-111"><a href="#GalleryMode-111"><span class="linenos">111</span></a><span class="sd">    Each mode specifies the number of rows and columns for image display.</span>
</span><span id="GalleryMode-112"><a href="#GalleryMode-112"><span class="linenos">112</span></a><span class="sd">    </span>
</span><span id="GalleryMode-113"><a href="#GalleryMode-113"><span class="linenos">113</span></a><span class="sd">    Attributes:</span>
</span><span id="GalleryMode-114"><a href="#GalleryMode-114"><span class="linenos">114</span></a><span class="sd">        - _1x1 (int): Single image view (1 row, 1 column)</span>
</span><span id="GalleryMode-115"><a href="#GalleryMode-115"><span class="linenos">115</span></a><span class="sd">        - _3x2 (int): 3×2 grid layout (2 rows, 3 columns)</span>
</span><span id="GalleryMode-116"><a href="#GalleryMode-116"><span class="linenos">116</span></a><span class="sd">        - _6x4 (int): 6×4 grid layout (4 rows, 6 columns)</span>
</span><span id="GalleryMode-117"><a href="#GalleryMode-117"><span class="linenos">117</span></a><span class="sd">        - _9x6 (int): 9×6 grid layout (6 rows, 9 columns)</span>
</span><span id="GalleryMode-118"><a href="#GalleryMode-118"><span class="linenos">118</span></a><span class="sd">        - _2x1 (int): 2×1 layout (1 row, 2 columns) for side-by-side comparison</span>
</span><span id="GalleryMode-119"><a href="#GalleryMode-119"><span class="linenos">119</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="GalleryMode-120"><a href="#GalleryMode-120"><span class="linenos">120</span></a>
</span><span id="GalleryMode-121"><a href="#GalleryMode-121"><span class="linenos">121</span></a>    <span class="n">_1x1</span>         <span class="o">=</span> <span class="mi">0</span>         <span class="c1"># </span>
</span><span id="GalleryMode-122"><a href="#GalleryMode-122"><span class="linenos">122</span></a>    <span class="n">_3x2</span>         <span class="o">=</span> <span class="mi">1</span>         <span class="c1"># </span>
</span><span id="GalleryMode-123"><a href="#GalleryMode-123"><span class="linenos">123</span></a>    <span class="n">_6x4</span>         <span class="o">=</span> <span class="mi">2</span>         <span class="c1"># </span>
</span><span id="GalleryMode-124"><a href="#GalleryMode-124"><span class="linenos">124</span></a>    <span class="n">_9x6</span>         <span class="o">=</span> <span class="mi">3</span>         <span class="c1">#</span>
</span><span id="GalleryMode-125"><a href="#GalleryMode-125"><span class="linenos">125</span></a>    
</span><span id="GalleryMode-126"><a href="#GalleryMode-126"><span class="linenos">126</span></a>    <span class="n">_2x1</span>        <span class="o">=</span>  <span class="mi">4</span>
</span><span id="GalleryMode-127"><a href="#GalleryMode-127"><span class="linenos">127</span></a>
</span><span id="GalleryMode-128"><a href="#GalleryMode-128"><span class="linenos">128</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">nbRow</span><span class="p">(</span><span class="n">m</span><span class="p">):</span>
</span><span id="GalleryMode-129"><a href="#GalleryMode-129"><span class="linenos">129</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GalleryMode-130"><a href="#GalleryMode-130"><span class="linenos">130</span></a><span class="sd">        Get the number of rows for a gallery mode.</span>
</span><span id="GalleryMode-131"><a href="#GalleryMode-131"><span class="linenos">131</span></a><span class="sd">        </span>
</span><span id="GalleryMode-132"><a href="#GalleryMode-132"><span class="linenos">132</span></a><span class="sd">        Args:</span>
</span><span id="GalleryMode-133"><a href="#GalleryMode-133"><span class="linenos">133</span></a><span class="sd">            m (GalleryMode): Gallery mode enumeration value</span>
</span><span id="GalleryMode-134"><a href="#GalleryMode-134"><span class="linenos">134</span></a><span class="sd">            </span>
</span><span id="GalleryMode-135"><a href="#GalleryMode-135"><span class="linenos">135</span></a><span class="sd">        Returns:</span>
</span><span id="GalleryMode-136"><a href="#GalleryMode-136"><span class="linenos">136</span></a><span class="sd">            int: Number of rows in the gallery layout</span>
</span><span id="GalleryMode-137"><a href="#GalleryMode-137"><span class="linenos">137</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GalleryMode-138"><a href="#GalleryMode-138"><span class="linenos">138</span></a>        <span class="k">if</span> <span class="n">m</span> <span class="o">==</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_1x1</span><span class="p">:</span> <span class="k">return</span> <span class="mi">1</span>
</span><span id="GalleryMode-139"><a href="#GalleryMode-139"><span class="linenos">139</span></a>        <span class="k">if</span> <span class="n">m</span> <span class="o">==</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_3x2</span><span class="p">:</span> <span class="k">return</span> <span class="mi">2</span>
</span><span id="GalleryMode-140"><a href="#GalleryMode-140"><span class="linenos">140</span></a>        <span class="k">if</span> <span class="n">m</span> <span class="o">==</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_6x4</span><span class="p">:</span> <span class="k">return</span> <span class="mi">4</span>
</span><span id="GalleryMode-141"><a href="#GalleryMode-141"><span class="linenos">141</span></a>        <span class="k">if</span> <span class="n">m</span> <span class="o">==</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_9x6</span><span class="p">:</span> <span class="k">return</span> <span class="mi">6</span>
</span><span id="GalleryMode-142"><a href="#GalleryMode-142"><span class="linenos">142</span></a>
</span><span id="GalleryMode-143"><a href="#GalleryMode-143"><span class="linenos">143</span></a>        <span class="k">if</span> <span class="n">m</span> <span class="o">==</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_2x1</span><span class="p">:</span> <span class="k">return</span> <span class="mi">1</span>
</span><span id="GalleryMode-144"><a href="#GalleryMode-144"><span class="linenos">144</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">nbCol</span><span class="p">(</span><span class="n">m</span><span class="p">):</span>
</span><span id="GalleryMode-145"><a href="#GalleryMode-145"><span class="linenos">145</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GalleryMode-146"><a href="#GalleryMode-146"><span class="linenos">146</span></a><span class="sd">        Get the number of columns for a gallery mode.</span>
</span><span id="GalleryMode-147"><a href="#GalleryMode-147"><span class="linenos">147</span></a><span class="sd">        </span>
</span><span id="GalleryMode-148"><a href="#GalleryMode-148"><span class="linenos">148</span></a><span class="sd">        Args:</span>
</span><span id="GalleryMode-149"><a href="#GalleryMode-149"><span class="linenos">149</span></a><span class="sd">            m (GalleryMode): Gallery mode enumeration value</span>
</span><span id="GalleryMode-150"><a href="#GalleryMode-150"><span class="linenos">150</span></a><span class="sd">            </span>
</span><span id="GalleryMode-151"><a href="#GalleryMode-151"><span class="linenos">151</span></a><span class="sd">        Returns:</span>
</span><span id="GalleryMode-152"><a href="#GalleryMode-152"><span class="linenos">152</span></a><span class="sd">            int: Number of columns in the gallery layout</span>
</span><span id="GalleryMode-153"><a href="#GalleryMode-153"><span class="linenos">153</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GalleryMode-154"><a href="#GalleryMode-154"><span class="linenos">154</span></a>        <span class="k">if</span> <span class="n">m</span> <span class="o">==</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_1x1</span><span class="p">:</span> <span class="k">return</span> <span class="mi">1</span>
</span><span id="GalleryMode-155"><a href="#GalleryMode-155"><span class="linenos">155</span></a>        <span class="k">if</span> <span class="n">m</span> <span class="o">==</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_3x2</span><span class="p">:</span> <span class="k">return</span> <span class="mi">3</span>
</span><span id="GalleryMode-156"><a href="#GalleryMode-156"><span class="linenos">156</span></a>        <span class="k">if</span> <span class="n">m</span> <span class="o">==</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_6x4</span><span class="p">:</span> <span class="k">return</span> <span class="mi">6</span>
</span><span id="GalleryMode-157"><a href="#GalleryMode-157"><span class="linenos">157</span></a>        <span class="k">if</span> <span class="n">m</span> <span class="o">==</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_9x6</span><span class="p">:</span> <span class="k">return</span> <span class="mi">9</span>
</span><span id="GalleryMode-158"><a href="#GalleryMode-158"><span class="linenos">158</span></a>
</span><span id="GalleryMode-159"><a href="#GalleryMode-159"><span class="linenos">159</span></a>        <span class="k">if</span> <span class="n">m</span> <span class="o">==</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_2x1</span><span class="p">:</span> <span class="k">return</span> <span class="mi">2</span>
</span></pre></div>


            <div class="docstring"><p>Enumeration for gallery display layout configurations.</p>

<p>Defines different grid layouts for the image gallery, allowing users
to view multiple images simultaneously in various arrangements.
Each mode specifies the number of rows and columns for image display.</p>

<p>Attributes:
    - _1x1 (int): Single image view (1 row, 1 column)
    - _3x2 (int): 3×2 grid layout (2 rows, 3 columns)
    - _6x4 (int): 6×4 grid layout (4 rows, 6 columns)
    - _9x6 (int): 9×6 grid layout (6 rows, 9 columns)
    - _2x1 (int): 2×1 layout (1 row, 2 columns) for side-by-side comparison</p>
</div>


                            <div id="GalleryMode.nbRow" class="classattr">
                                        <input id="GalleryMode.nbRow-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">nbRow</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">m</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="GalleryMode.nbRow-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GalleryMode.nbRow"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GalleryMode.nbRow-128"><a href="#GalleryMode.nbRow-128"><span class="linenos">128</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">nbRow</span><span class="p">(</span><span class="n">m</span><span class="p">):</span>
</span><span id="GalleryMode.nbRow-129"><a href="#GalleryMode.nbRow-129"><span class="linenos">129</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GalleryMode.nbRow-130"><a href="#GalleryMode.nbRow-130"><span class="linenos">130</span></a><span class="sd">        Get the number of rows for a gallery mode.</span>
</span><span id="GalleryMode.nbRow-131"><a href="#GalleryMode.nbRow-131"><span class="linenos">131</span></a><span class="sd">        </span>
</span><span id="GalleryMode.nbRow-132"><a href="#GalleryMode.nbRow-132"><span class="linenos">132</span></a><span class="sd">        Args:</span>
</span><span id="GalleryMode.nbRow-133"><a href="#GalleryMode.nbRow-133"><span class="linenos">133</span></a><span class="sd">            m (GalleryMode): Gallery mode enumeration value</span>
</span><span id="GalleryMode.nbRow-134"><a href="#GalleryMode.nbRow-134"><span class="linenos">134</span></a><span class="sd">            </span>
</span><span id="GalleryMode.nbRow-135"><a href="#GalleryMode.nbRow-135"><span class="linenos">135</span></a><span class="sd">        Returns:</span>
</span><span id="GalleryMode.nbRow-136"><a href="#GalleryMode.nbRow-136"><span class="linenos">136</span></a><span class="sd">            int: Number of rows in the gallery layout</span>
</span><span id="GalleryMode.nbRow-137"><a href="#GalleryMode.nbRow-137"><span class="linenos">137</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GalleryMode.nbRow-138"><a href="#GalleryMode.nbRow-138"><span class="linenos">138</span></a>        <span class="k">if</span> <span class="n">m</span> <span class="o">==</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_1x1</span><span class="p">:</span> <span class="k">return</span> <span class="mi">1</span>
</span><span id="GalleryMode.nbRow-139"><a href="#GalleryMode.nbRow-139"><span class="linenos">139</span></a>        <span class="k">if</span> <span class="n">m</span> <span class="o">==</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_3x2</span><span class="p">:</span> <span class="k">return</span> <span class="mi">2</span>
</span><span id="GalleryMode.nbRow-140"><a href="#GalleryMode.nbRow-140"><span class="linenos">140</span></a>        <span class="k">if</span> <span class="n">m</span> <span class="o">==</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_6x4</span><span class="p">:</span> <span class="k">return</span> <span class="mi">4</span>
</span><span id="GalleryMode.nbRow-141"><a href="#GalleryMode.nbRow-141"><span class="linenos">141</span></a>        <span class="k">if</span> <span class="n">m</span> <span class="o">==</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_9x6</span><span class="p">:</span> <span class="k">return</span> <span class="mi">6</span>
</span><span id="GalleryMode.nbRow-142"><a href="#GalleryMode.nbRow-142"><span class="linenos">142</span></a>
</span><span id="GalleryMode.nbRow-143"><a href="#GalleryMode.nbRow-143"><span class="linenos">143</span></a>        <span class="k">if</span> <span class="n">m</span> <span class="o">==</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_2x1</span><span class="p">:</span> <span class="k">return</span> <span class="mi">1</span>
</span></pre></div>


            <div class="docstring"><p>Get the number of rows for a gallery mode.</p>

<p>Args:
    m (GalleryMode): Gallery mode enumeration value</p>

<p>Returns:
    int: Number of rows in the gallery layout</p>
</div>


                            </div>
                            <div id="GalleryMode.nbCol" class="classattr">
                                        <input id="GalleryMode.nbCol-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">nbCol</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">m</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="GalleryMode.nbCol-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GalleryMode.nbCol"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GalleryMode.nbCol-144"><a href="#GalleryMode.nbCol-144"><span class="linenos">144</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">nbCol</span><span class="p">(</span><span class="n">m</span><span class="p">):</span>
</span><span id="GalleryMode.nbCol-145"><a href="#GalleryMode.nbCol-145"><span class="linenos">145</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GalleryMode.nbCol-146"><a href="#GalleryMode.nbCol-146"><span class="linenos">146</span></a><span class="sd">        Get the number of columns for a gallery mode.</span>
</span><span id="GalleryMode.nbCol-147"><a href="#GalleryMode.nbCol-147"><span class="linenos">147</span></a><span class="sd">        </span>
</span><span id="GalleryMode.nbCol-148"><a href="#GalleryMode.nbCol-148"><span class="linenos">148</span></a><span class="sd">        Args:</span>
</span><span id="GalleryMode.nbCol-149"><a href="#GalleryMode.nbCol-149"><span class="linenos">149</span></a><span class="sd">            m (GalleryMode): Gallery mode enumeration value</span>
</span><span id="GalleryMode.nbCol-150"><a href="#GalleryMode.nbCol-150"><span class="linenos">150</span></a><span class="sd">            </span>
</span><span id="GalleryMode.nbCol-151"><a href="#GalleryMode.nbCol-151"><span class="linenos">151</span></a><span class="sd">        Returns:</span>
</span><span id="GalleryMode.nbCol-152"><a href="#GalleryMode.nbCol-152"><span class="linenos">152</span></a><span class="sd">            int: Number of columns in the gallery layout</span>
</span><span id="GalleryMode.nbCol-153"><a href="#GalleryMode.nbCol-153"><span class="linenos">153</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GalleryMode.nbCol-154"><a href="#GalleryMode.nbCol-154"><span class="linenos">154</span></a>        <span class="k">if</span> <span class="n">m</span> <span class="o">==</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_1x1</span><span class="p">:</span> <span class="k">return</span> <span class="mi">1</span>
</span><span id="GalleryMode.nbCol-155"><a href="#GalleryMode.nbCol-155"><span class="linenos">155</span></a>        <span class="k">if</span> <span class="n">m</span> <span class="o">==</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_3x2</span><span class="p">:</span> <span class="k">return</span> <span class="mi">3</span>
</span><span id="GalleryMode.nbCol-156"><a href="#GalleryMode.nbCol-156"><span class="linenos">156</span></a>        <span class="k">if</span> <span class="n">m</span> <span class="o">==</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_6x4</span><span class="p">:</span> <span class="k">return</span> <span class="mi">6</span>
</span><span id="GalleryMode.nbCol-157"><a href="#GalleryMode.nbCol-157"><span class="linenos">157</span></a>        <span class="k">if</span> <span class="n">m</span> <span class="o">==</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_9x6</span><span class="p">:</span> <span class="k">return</span> <span class="mi">9</span>
</span><span id="GalleryMode.nbCol-158"><a href="#GalleryMode.nbCol-158"><span class="linenos">158</span></a>
</span><span id="GalleryMode.nbCol-159"><a href="#GalleryMode.nbCol-159"><span class="linenos">159</span></a>        <span class="k">if</span> <span class="n">m</span> <span class="o">==</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_2x1</span><span class="p">:</span> <span class="k">return</span> <span class="mi">2</span>
</span></pre></div>


            <div class="docstring"><p>Get the number of columns for a gallery mode.</p>

<p>Args:
    m (GalleryMode): Gallery mode enumeration value</p>

<p>Returns:
    int: Number of columns in the gallery layout</p>
</div>


                            </div>
                </section>
                <section id="ImageWidgetController">
                            <input id="ImageWidgetController-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">ImageWidgetController</span>:

                <label class="view-source-button" for="ImageWidgetController-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ImageWidgetController"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ImageWidgetController-163"><a href="#ImageWidgetController-163"><span class="linenos">163</span></a><span class="k">class</span><span class="w"> </span><span class="nc">ImageWidgetController</span><span class="p">:</span>
</span><span id="ImageWidgetController-164"><a href="#ImageWidgetController-164"><span class="linenos">164</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ImageWidgetController-165"><a href="#ImageWidgetController-165"><span class="linenos">165</span></a><span class="sd">    Controller for individual image widget components.</span>
</span><span id="ImageWidgetController-166"><a href="#ImageWidgetController-166"><span class="linenos">166</span></a><span class="sd">    </span>
</span><span id="ImageWidgetController-167"><a href="#ImageWidgetController-167"><span class="linenos">167</span></a><span class="sd">    Manages the display and interaction of individual image widgets within</span>
</span><span id="ImageWidgetController-168"><a href="#ImageWidgetController-168"><span class="linenos">168</span></a><span class="sd">    the gallery and editing interface. Handles image loading, display</span>
</span><span id="ImageWidgetController-169"><a href="#ImageWidgetController-169"><span class="linenos">169</span></a><span class="sd">    updates, and user interactions for single image components.</span>
</span><span id="ImageWidgetController-170"><a href="#ImageWidgetController-170"><span class="linenos">170</span></a><span class="sd">    </span>
</span><span id="ImageWidgetController-171"><a href="#ImageWidgetController-171"><span class="linenos">171</span></a><span class="sd">    Attributes:</span>
</span><span id="ImageWidgetController-172"><a href="#ImageWidgetController-172"><span class="linenos">172</span></a><span class="sd">        - model (model.ImageWidgetModel): Data model for the image widget</span>
</span><span id="ImageWidgetController-173"><a href="#ImageWidgetController-173"><span class="linenos">173</span></a><span class="sd">        - view (view.ImageWidgetView): View component for image display</span>
</span><span id="ImageWidgetController-174"><a href="#ImageWidgetController-174"><span class="linenos">174</span></a><span class="sd">        - _id (int): Unique identifier for the widget</span>
</span><span id="ImageWidgetController-175"><a href="#ImageWidgetController-175"><span class="linenos">175</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="ImageWidgetController-176"><a href="#ImageWidgetController-176"><span class="linenos">176</span></a>
</span><span id="ImageWidgetController-177"><a href="#ImageWidgetController-177"><span class="linenos">177</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="nb">id</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
</span><span id="ImageWidgetController-178"><a href="#ImageWidgetController-178"><span class="linenos">178</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ImageWidgetController-179"><a href="#ImageWidgetController-179"><span class="linenos">179</span></a><span class="sd">        Initialize an image widget controller.</span>
</span><span id="ImageWidgetController-180"><a href="#ImageWidgetController-180"><span class="linenos">180</span></a><span class="sd">        </span>
</span><span id="ImageWidgetController-181"><a href="#ImageWidgetController-181"><span class="linenos">181</span></a><span class="sd">        Args:</span>
</span><span id="ImageWidgetController-182"><a href="#ImageWidgetController-182"><span class="linenos">182</span></a><span class="sd">            image (numpy.ndarray or hdrCore.image.Image, optional): Initial image to display</span>
</span><span id="ImageWidgetController-183"><a href="#ImageWidgetController-183"><span class="linenos">183</span></a><span class="sd">            id (int, optional): Unique identifier for the widget (default: -1)</span>
</span><span id="ImageWidgetController-184"><a href="#ImageWidgetController-184"><span class="linenos">184</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ImageWidgetController-185"><a href="#ImageWidgetController-185"><span class="linenos">185</span></a>
</span><span id="ImageWidgetController-186"><a href="#ImageWidgetController-186"><span class="linenos">186</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">ImageWidgetModel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="ImageWidgetController-187"><a href="#ImageWidgetController-187"><span class="linenos">187</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">ImageWidgetView</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="ImageWidgetController-188"><a href="#ImageWidgetController-188"><span class="linenos">188</span></a>
</span><span id="ImageWidgetController-189"><a href="#ImageWidgetController-189"><span class="linenos">189</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_id</span> <span class="o">=</span> <span class="nb">id</span> <span class="c1"># store an (unique) id </span>
</span><span id="ImageWidgetController-190"><a href="#ImageWidgetController-190"><span class="linenos">190</span></a>
</span><span id="ImageWidgetController-191"><a href="#ImageWidgetController-191"><span class="linenos">191</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">hdrCore</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">Image</span><span class="p">)):</span>
</span><span id="ImageWidgetController-192"><a href="#ImageWidgetController-192"><span class="linenos">192</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setImage</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
</span><span id="ImageWidgetController-193"><a href="#ImageWidgetController-193"><span class="linenos">193</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">setPixmap</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getColorData</span><span class="p">())</span>
</span><span id="ImageWidgetController-194"><a href="#ImageWidgetController-194"><span class="linenos">194</span></a>
</span><span id="ImageWidgetController-195"><a href="#ImageWidgetController-195"><span class="linenos">195</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setImage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image</span><span class="p">):</span>
</span><span id="ImageWidgetController-196"><a href="#ImageWidgetController-196"><span class="linenos">196</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ImageWidgetController-197"><a href="#ImageWidgetController-197"><span class="linenos">197</span></a><span class="sd">        Update the image displayed in the widget.</span>
</span><span id="ImageWidgetController-198"><a href="#ImageWidgetController-198"><span class="linenos">198</span></a><span class="sd">        </span>
</span><span id="ImageWidgetController-199"><a href="#ImageWidgetController-199"><span class="linenos">199</span></a><span class="sd">        Args:</span>
</span><span id="ImageWidgetController-200"><a href="#ImageWidgetController-200"><span class="linenos">200</span></a><span class="sd">            image (numpy.ndarray or hdrCore.image.Image): New image to display</span>
</span><span id="ImageWidgetController-201"><a href="#ImageWidgetController-201"><span class="linenos">201</span></a><span class="sd">            </span>
</span><span id="ImageWidgetController-202"><a href="#ImageWidgetController-202"><span class="linenos">202</span></a><span class="sd">        Returns:</span>
</span><span id="ImageWidgetController-203"><a href="#ImageWidgetController-203"><span class="linenos">203</span></a><span class="sd">            QPixmap: Updated pixmap for the display</span>
</span><span id="ImageWidgetController-204"><a href="#ImageWidgetController-204"><span class="linenos">204</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ImageWidgetController-205"><a href="#ImageWidgetController-205"><span class="linenos">205</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setImage</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
</span><span id="ImageWidgetController-206"><a href="#ImageWidgetController-206"><span class="linenos">206</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">setPixmap</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getColorData</span><span class="p">())</span>
</span><span id="ImageWidgetController-207"><a href="#ImageWidgetController-207"><span class="linenos">207</span></a>
</span><span id="ImageWidgetController-208"><a href="#ImageWidgetController-208"><span class="linenos">208</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setQPixmap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qPixmap</span><span class="p">):</span>
</span><span id="ImageWidgetController-209"><a href="#ImageWidgetController-209"><span class="linenos">209</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ImageWidgetController-210"><a href="#ImageWidgetController-210"><span class="linenos">210</span></a><span class="sd">        Set the display pixmap directly.</span>
</span><span id="ImageWidgetController-211"><a href="#ImageWidgetController-211"><span class="linenos">211</span></a><span class="sd">        </span>
</span><span id="ImageWidgetController-212"><a href="#ImageWidgetController-212"><span class="linenos">212</span></a><span class="sd">        Args:</span>
</span><span id="ImageWidgetController-213"><a href="#ImageWidgetController-213"><span class="linenos">213</span></a><span class="sd">            qPixmap (QPixmap): Pixmap to display in the widget</span>
</span><span id="ImageWidgetController-214"><a href="#ImageWidgetController-214"><span class="linenos">214</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ImageWidgetController-215"><a href="#ImageWidgetController-215"><span class="linenos">215</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">setQPixmap</span><span class="p">(</span><span class="n">qPixmap</span><span class="p">)</span>
</span><span id="ImageWidgetController-216"><a href="#ImageWidgetController-216"><span class="linenos">216</span></a>
</span><span id="ImageWidgetController-217"><a href="#ImageWidgetController-217"><span class="linenos">217</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
</span><span id="ImageWidgetController-218"><a href="#ImageWidgetController-218"><span class="linenos">218</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ImageWidgetController-219"><a href="#ImageWidgetController-219"><span class="linenos">219</span></a><span class="sd">        Get the widget&#39;s unique identifier.</span>
</span><span id="ImageWidgetController-220"><a href="#ImageWidgetController-220"><span class="linenos">220</span></a><span class="sd">        </span>
</span><span id="ImageWidgetController-221"><a href="#ImageWidgetController-221"><span class="linenos">221</span></a><span class="sd">        Returns:</span>
</span><span id="ImageWidgetController-222"><a href="#ImageWidgetController-222"><span class="linenos">222</span></a><span class="sd">            int: Unique identifier for this widget</span>
</span><span id="ImageWidgetController-223"><a href="#ImageWidgetController-223"><span class="linenos">223</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ImageWidgetController-224"><a href="#ImageWidgetController-224"><span class="linenos">224</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_id</span>
</span></pre></div>


            <div class="docstring"><p>Controller for individual image widget components.</p>

<p>Manages the display and interaction of individual image widgets within
the gallery and editing interface. Handles image loading, display
updates, and user interactions for single image components.</p>

<p>Attributes:
    - model (model.ImageWidgetModel): Data model for the image widget
    - view (view.ImageWidgetView): View component for image display
    - _id (int): Unique identifier for the widget</p>
</div>


                            <div id="ImageWidgetController.__init__" class="classattr">
                                        <input id="ImageWidgetController.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">ImageWidgetController</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">image</span><span class="o">=</span><span class="kc">None</span>, </span><span class="param"><span class="nb">id</span><span class="o">=-</span><span class="mi">1</span></span>)</span>

                <label class="view-source-button" for="ImageWidgetController.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ImageWidgetController.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ImageWidgetController.__init__-177"><a href="#ImageWidgetController.__init__-177"><span class="linenos">177</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="nb">id</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
</span><span id="ImageWidgetController.__init__-178"><a href="#ImageWidgetController.__init__-178"><span class="linenos">178</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ImageWidgetController.__init__-179"><a href="#ImageWidgetController.__init__-179"><span class="linenos">179</span></a><span class="sd">        Initialize an image widget controller.</span>
</span><span id="ImageWidgetController.__init__-180"><a href="#ImageWidgetController.__init__-180"><span class="linenos">180</span></a><span class="sd">        </span>
</span><span id="ImageWidgetController.__init__-181"><a href="#ImageWidgetController.__init__-181"><span class="linenos">181</span></a><span class="sd">        Args:</span>
</span><span id="ImageWidgetController.__init__-182"><a href="#ImageWidgetController.__init__-182"><span class="linenos">182</span></a><span class="sd">            image (numpy.ndarray or hdrCore.image.Image, optional): Initial image to display</span>
</span><span id="ImageWidgetController.__init__-183"><a href="#ImageWidgetController.__init__-183"><span class="linenos">183</span></a><span class="sd">            id (int, optional): Unique identifier for the widget (default: -1)</span>
</span><span id="ImageWidgetController.__init__-184"><a href="#ImageWidgetController.__init__-184"><span class="linenos">184</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ImageWidgetController.__init__-185"><a href="#ImageWidgetController.__init__-185"><span class="linenos">185</span></a>
</span><span id="ImageWidgetController.__init__-186"><a href="#ImageWidgetController.__init__-186"><span class="linenos">186</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">ImageWidgetModel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="ImageWidgetController.__init__-187"><a href="#ImageWidgetController.__init__-187"><span class="linenos">187</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">ImageWidgetView</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="ImageWidgetController.__init__-188"><a href="#ImageWidgetController.__init__-188"><span class="linenos">188</span></a>
</span><span id="ImageWidgetController.__init__-189"><a href="#ImageWidgetController.__init__-189"><span class="linenos">189</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_id</span> <span class="o">=</span> <span class="nb">id</span> <span class="c1"># store an (unique) id </span>
</span><span id="ImageWidgetController.__init__-190"><a href="#ImageWidgetController.__init__-190"><span class="linenos">190</span></a>
</span><span id="ImageWidgetController.__init__-191"><a href="#ImageWidgetController.__init__-191"><span class="linenos">191</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">hdrCore</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">Image</span><span class="p">)):</span>
</span><span id="ImageWidgetController.__init__-192"><a href="#ImageWidgetController.__init__-192"><span class="linenos">192</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setImage</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
</span><span id="ImageWidgetController.__init__-193"><a href="#ImageWidgetController.__init__-193"><span class="linenos">193</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">setPixmap</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getColorData</span><span class="p">())</span>
</span></pre></div>


            <div class="docstring"><p>Initialize an image widget controller.</p>

<p>Args:
    image (numpy.ndarray or <a href="../hdrCore/image.html#Image">hdrCore.image.Image</a>, optional): Initial image to display
    id (int, optional): Unique identifier for the widget (default: -1)</p>
</div>


                            </div>
                            <div id="ImageWidgetController.model" class="classattr">
                                <div class="attr variable">
            <span class="name">model</span>

        
    </div>
    <a class="headerlink" href="#ImageWidgetController.model"></a>
    
    

                            </div>
                            <div id="ImageWidgetController.view" class="classattr">
                                <div class="attr variable">
            <span class="name">view</span>

        
    </div>
    <a class="headerlink" href="#ImageWidgetController.view"></a>
    
    

                            </div>
                            <div id="ImageWidgetController.setImage" class="classattr">
                                        <input id="ImageWidgetController.setImage-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">setImage</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">image</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ImageWidgetController.setImage-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ImageWidgetController.setImage"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ImageWidgetController.setImage-195"><a href="#ImageWidgetController.setImage-195"><span class="linenos">195</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setImage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image</span><span class="p">):</span>
</span><span id="ImageWidgetController.setImage-196"><a href="#ImageWidgetController.setImage-196"><span class="linenos">196</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ImageWidgetController.setImage-197"><a href="#ImageWidgetController.setImage-197"><span class="linenos">197</span></a><span class="sd">        Update the image displayed in the widget.</span>
</span><span id="ImageWidgetController.setImage-198"><a href="#ImageWidgetController.setImage-198"><span class="linenos">198</span></a><span class="sd">        </span>
</span><span id="ImageWidgetController.setImage-199"><a href="#ImageWidgetController.setImage-199"><span class="linenos">199</span></a><span class="sd">        Args:</span>
</span><span id="ImageWidgetController.setImage-200"><a href="#ImageWidgetController.setImage-200"><span class="linenos">200</span></a><span class="sd">            image (numpy.ndarray or hdrCore.image.Image): New image to display</span>
</span><span id="ImageWidgetController.setImage-201"><a href="#ImageWidgetController.setImage-201"><span class="linenos">201</span></a><span class="sd">            </span>
</span><span id="ImageWidgetController.setImage-202"><a href="#ImageWidgetController.setImage-202"><span class="linenos">202</span></a><span class="sd">        Returns:</span>
</span><span id="ImageWidgetController.setImage-203"><a href="#ImageWidgetController.setImage-203"><span class="linenos">203</span></a><span class="sd">            QPixmap: Updated pixmap for the display</span>
</span><span id="ImageWidgetController.setImage-204"><a href="#ImageWidgetController.setImage-204"><span class="linenos">204</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ImageWidgetController.setImage-205"><a href="#ImageWidgetController.setImage-205"><span class="linenos">205</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setImage</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
</span><span id="ImageWidgetController.setImage-206"><a href="#ImageWidgetController.setImage-206"><span class="linenos">206</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">setPixmap</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getColorData</span><span class="p">())</span>
</span></pre></div>


            <div class="docstring"><p>Update the image displayed in the widget.</p>

<p>Args:
    image (numpy.ndarray or <a href="../hdrCore/image.html#Image">hdrCore.image.Image</a>): New image to display</p>

<p>Returns:
    QPixmap: Updated pixmap for the display</p>
</div>


                            </div>
                            <div id="ImageWidgetController.setQPixmap" class="classattr">
                                        <input id="ImageWidgetController.setQPixmap-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">setQPixmap</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">qPixmap</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ImageWidgetController.setQPixmap-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ImageWidgetController.setQPixmap"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ImageWidgetController.setQPixmap-208"><a href="#ImageWidgetController.setQPixmap-208"><span class="linenos">208</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setQPixmap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qPixmap</span><span class="p">):</span>
</span><span id="ImageWidgetController.setQPixmap-209"><a href="#ImageWidgetController.setQPixmap-209"><span class="linenos">209</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ImageWidgetController.setQPixmap-210"><a href="#ImageWidgetController.setQPixmap-210"><span class="linenos">210</span></a><span class="sd">        Set the display pixmap directly.</span>
</span><span id="ImageWidgetController.setQPixmap-211"><a href="#ImageWidgetController.setQPixmap-211"><span class="linenos">211</span></a><span class="sd">        </span>
</span><span id="ImageWidgetController.setQPixmap-212"><a href="#ImageWidgetController.setQPixmap-212"><span class="linenos">212</span></a><span class="sd">        Args:</span>
</span><span id="ImageWidgetController.setQPixmap-213"><a href="#ImageWidgetController.setQPixmap-213"><span class="linenos">213</span></a><span class="sd">            qPixmap (QPixmap): Pixmap to display in the widget</span>
</span><span id="ImageWidgetController.setQPixmap-214"><a href="#ImageWidgetController.setQPixmap-214"><span class="linenos">214</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ImageWidgetController.setQPixmap-215"><a href="#ImageWidgetController.setQPixmap-215"><span class="linenos">215</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">setQPixmap</span><span class="p">(</span><span class="n">qPixmap</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Set the display pixmap directly.</p>

<p>Args:
    qPixmap (QPixmap): Pixmap to display in the widget</p>
</div>


                            </div>
                            <div id="ImageWidgetController.id" class="classattr">
                                        <input id="ImageWidgetController.id-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">id</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ImageWidgetController.id-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ImageWidgetController.id"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ImageWidgetController.id-217"><a href="#ImageWidgetController.id-217"><span class="linenos">217</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">id</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
</span><span id="ImageWidgetController.id-218"><a href="#ImageWidgetController.id-218"><span class="linenos">218</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ImageWidgetController.id-219"><a href="#ImageWidgetController.id-219"><span class="linenos">219</span></a><span class="sd">        Get the widget&#39;s unique identifier.</span>
</span><span id="ImageWidgetController.id-220"><a href="#ImageWidgetController.id-220"><span class="linenos">220</span></a><span class="sd">        </span>
</span><span id="ImageWidgetController.id-221"><a href="#ImageWidgetController.id-221"><span class="linenos">221</span></a><span class="sd">        Returns:</span>
</span><span id="ImageWidgetController.id-222"><a href="#ImageWidgetController.id-222"><span class="linenos">222</span></a><span class="sd">            int: Unique identifier for this widget</span>
</span><span id="ImageWidgetController.id-223"><a href="#ImageWidgetController.id-223"><span class="linenos">223</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ImageWidgetController.id-224"><a href="#ImageWidgetController.id-224"><span class="linenos">224</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_id</span>
</span></pre></div>


            <div class="docstring"><p>Get the widget's unique identifier.</p>

<p>Returns:
    int: Unique identifier for this widget</p>
</div>


                            </div>
                </section>
                <section id="ImageGalleryController">
                            <input id="ImageGalleryController-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">ImageGalleryController</span>:

                <label class="view-source-button" for="ImageGalleryController-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ImageGalleryController"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ImageGalleryController-228"><a href="#ImageGalleryController-228"><span class="linenos">228</span></a><span class="k">class</span><span class="w"> </span><span class="nc">ImageGalleryController</span><span class="p">():</span>
</span><span id="ImageGalleryController-229"><a href="#ImageGalleryController-229"><span class="linenos">229</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ImageGalleryController-230"><a href="#ImageGalleryController-230"><span class="linenos">230</span></a><span class="sd">    Controller for the image gallery interface.</span>
</span><span id="ImageGalleryController-231"><a href="#ImageGalleryController-231"><span class="linenos">231</span></a><span class="sd">    </span>
</span><span id="ImageGalleryController-232"><a href="#ImageGalleryController-232"><span class="linenos">232</span></a><span class="sd">    Manages the gallery view that displays multiple images in grid layouts,</span>
</span><span id="ImageGalleryController-233"><a href="#ImageGalleryController-233"><span class="linenos">233</span></a><span class="sd">    handles pagination, gallery mode switching, and image selection. Provides</span>
</span><span id="ImageGalleryController-234"><a href="#ImageGalleryController-234"><span class="linenos">234</span></a><span class="sd">    the main interface for browsing and selecting images for editing.</span>
</span><span id="ImageGalleryController-235"><a href="#ImageGalleryController-235"><span class="linenos">235</span></a><span class="sd">    </span>
</span><span id="ImageGalleryController-236"><a href="#ImageGalleryController-236"><span class="linenos">236</span></a><span class="sd">    The gallery supports multiple display modes (1×1, 3×2, 6×4, 9×6, 2×1) and</span>
</span><span id="ImageGalleryController-237"><a href="#ImageGalleryController-237"><span class="linenos">237</span></a><span class="sd">    handles pagination when there are more images than can fit in the current view.</span>
</span><span id="ImageGalleryController-238"><a href="#ImageGalleryController-238"><span class="linenos">238</span></a><span class="sd">    </span>
</span><span id="ImageGalleryController-239"><a href="#ImageGalleryController-239"><span class="linenos">239</span></a><span class="sd">    Attributes:</span>
</span><span id="ImageGalleryController-240"><a href="#ImageGalleryController-240"><span class="linenos">240</span></a><span class="sd">        - parent: Parent controller (typically AppController)</span>
</span><span id="ImageGalleryController-241"><a href="#ImageGalleryController-241"><span class="linenos">241</span></a><span class="sd">        - view (view.ImageGalleryView): Gallery view component</span>
</span><span id="ImageGalleryController-242"><a href="#ImageGalleryController-242"><span class="linenos">242</span></a><span class="sd">        - model (model.ImageGalleryModel): Gallery data model</span>
</span><span id="ImageGalleryController-243"><a href="#ImageGalleryController-243"><span class="linenos">243</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="ImageGalleryController-244"><a href="#ImageGalleryController-244"><span class="linenos">244</span></a>
</span><span id="ImageGalleryController-245"><a href="#ImageGalleryController-245"><span class="linenos">245</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
</span><span id="ImageGalleryController-246"><a href="#ImageGalleryController-246"><span class="linenos">246</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ImageGalleryController-247"><a href="#ImageGalleryController-247"><span class="linenos">247</span></a><span class="sd">        Initialize the image gallery controller.</span>
</span><span id="ImageGalleryController-248"><a href="#ImageGalleryController-248"><span class="linenos">248</span></a><span class="sd">        </span>
</span><span id="ImageGalleryController-249"><a href="#ImageGalleryController-249"><span class="linenos">249</span></a><span class="sd">        Args:</span>
</span><span id="ImageGalleryController-250"><a href="#ImageGalleryController-250"><span class="linenos">250</span></a><span class="sd">            parent: Parent controller that manages this gallery</span>
</span><span id="ImageGalleryController-251"><a href="#ImageGalleryController-251"><span class="linenos">251</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ImageGalleryController-252"><a href="#ImageGalleryController-252"><span class="linenos">252</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; ImageGalleryController.__init__()&quot;</span><span class="p">)</span>
</span><span id="ImageGalleryController-253"><a href="#ImageGalleryController-253"><span class="linenos">253</span></a>
</span><span id="ImageGalleryController-254"><a href="#ImageGalleryController-254"><span class="linenos">254</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>    <span class="c1"># AppView</span>
</span><span id="ImageGalleryController-255"><a href="#ImageGalleryController-255"><span class="linenos">255</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">ImageGalleryView</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="ImageGalleryController-256"><a href="#ImageGalleryController-256"><span class="linenos">256</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">ImageGalleryModel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="ImageGalleryController-257"><a href="#ImageGalleryController-257"><span class="linenos">257</span></a>
</span><span id="ImageGalleryController-258"><a href="#ImageGalleryController-258"><span class="linenos">258</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setImages</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">imageFiles</span><span class="p">):</span> 
</span><span id="ImageGalleryController-259"><a href="#ImageGalleryController-259"><span class="linenos">259</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ImageGalleryController-260"><a href="#ImageGalleryController-260"><span class="linenos">260</span></a><span class="sd">        Load a list of image files into the gallery.</span>
</span><span id="ImageGalleryController-261"><a href="#ImageGalleryController-261"><span class="linenos">261</span></a><span class="sd">        </span>
</span><span id="ImageGalleryController-262"><a href="#ImageGalleryController-262"><span class="linenos">262</span></a><span class="sd">        Args:</span>
</span><span id="ImageGalleryController-263"><a href="#ImageGalleryController-263"><span class="linenos">263</span></a><span class="sd">            imageFiles (list): List of image file paths to load</span>
</span><span id="ImageGalleryController-264"><a href="#ImageGalleryController-264"><span class="linenos">264</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ImageGalleryController-265"><a href="#ImageGalleryController-265"><span class="linenos">265</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setImages</span><span class="p">(</span><span class="n">imageFiles</span><span class="p">)</span>
</span><span id="ImageGalleryController-266"><a href="#ImageGalleryController-266"><span class="linenos">266</span></a>
</span><span id="ImageGalleryController-267"><a href="#ImageGalleryController-267"><span class="linenos">267</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">updateImages</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ImageGalleryController-268"><a href="#ImageGalleryController-268"><span class="linenos">268</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ImageGalleryController-269"><a href="#ImageGalleryController-269"><span class="linenos">269</span></a><span class="sd">        Refresh the gallery display with current images.</span>
</span><span id="ImageGalleryController-270"><a href="#ImageGalleryController-270"><span class="linenos">270</span></a><span class="sd">        </span>
</span><span id="ImageGalleryController-271"><a href="#ImageGalleryController-271"><span class="linenos">271</span></a><span class="sd">        Called by the model when image data changes to update the view.</span>
</span><span id="ImageGalleryController-272"><a href="#ImageGalleryController-272"><span class="linenos">272</span></a><span class="sd">        Resets the page number and refreshes the display.</span>
</span><span id="ImageGalleryController-273"><a href="#ImageGalleryController-273"><span class="linenos">273</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ImageGalleryController-274"><a href="#ImageGalleryController-274"><span class="linenos">274</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">pageNumber</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># reset page number</span>
</span><span id="ImageGalleryController-275"><a href="#ImageGalleryController-275"><span class="linenos">275</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">updateImages</span><span class="p">()</span>
</span><span id="ImageGalleryController-276"><a href="#ImageGalleryController-276"><span class="linenos">276</span></a>
</span><span id="ImageGalleryController-277"><a href="#ImageGalleryController-277"><span class="linenos">277</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackButton_previousPage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>  
</span><span id="ImageGalleryController-278"><a href="#ImageGalleryController-278"><span class="linenos">278</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ImageGalleryController-279"><a href="#ImageGalleryController-279"><span class="linenos">279</span></a><span class="sd">        Navigate to the previous page in the gallery.</span>
</span><span id="ImageGalleryController-280"><a href="#ImageGalleryController-280"><span class="linenos">280</span></a><span class="sd">        </span>
</span><span id="ImageGalleryController-281"><a href="#ImageGalleryController-281"><span class="linenos">281</span></a><span class="sd">        Handles pagination when there are more images than can fit in the</span>
</span><span id="ImageGalleryController-282"><a href="#ImageGalleryController-282"><span class="linenos">282</span></a><span class="sd">        current gallery view. In single image mode, also selects the image.</span>
</span><span id="ImageGalleryController-283"><a href="#ImageGalleryController-283"><span class="linenos">283</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ImageGalleryController-284"><a href="#ImageGalleryController-284"><span class="linenos">284</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">changePageNumber</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</span><span id="ImageGalleryController-285"><a href="#ImageGalleryController-285"><span class="linenos">285</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">shapeMode</span> <span class="o">==</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_1x1</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">selectImage</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="ImageGalleryController-286"><a href="#ImageGalleryController-286"><span class="linenos">286</span></a>
</span><span id="ImageGalleryController-287"><a href="#ImageGalleryController-287"><span class="linenos">287</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackButton_nextPage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>      
</span><span id="ImageGalleryController-288"><a href="#ImageGalleryController-288"><span class="linenos">288</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ImageGalleryController-289"><a href="#ImageGalleryController-289"><span class="linenos">289</span></a><span class="sd">        Navigate to the next page in the gallery.</span>
</span><span id="ImageGalleryController-290"><a href="#ImageGalleryController-290"><span class="linenos">290</span></a><span class="sd">        </span>
</span><span id="ImageGalleryController-291"><a href="#ImageGalleryController-291"><span class="linenos">291</span></a><span class="sd">        Handles pagination when there are more images than can fit in the</span>
</span><span id="ImageGalleryController-292"><a href="#ImageGalleryController-292"><span class="linenos">292</span></a><span class="sd">        current gallery view. In single image mode, also selects the image.</span>
</span><span id="ImageGalleryController-293"><a href="#ImageGalleryController-293"><span class="linenos">293</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ImageGalleryController-294"><a href="#ImageGalleryController-294"><span class="linenos">294</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">changePageNumber</span><span class="p">(</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
</span><span id="ImageGalleryController-295"><a href="#ImageGalleryController-295"><span class="linenos">295</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">shapeMode</span> <span class="o">==</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_1x1</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">selectImage</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="ImageGalleryController-296"><a href="#ImageGalleryController-296"><span class="linenos">296</span></a>
</span><span id="ImageGalleryController-297"><a href="#ImageGalleryController-297"><span class="linenos">297</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">computePageNumberOnGalleryModeChange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">newGalleryMode</span><span class="p">):</span>
</span><span id="ImageGalleryController-298"><a href="#ImageGalleryController-298"><span class="linenos">298</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ImageGalleryController-299"><a href="#ImageGalleryController-299"><span class="linenos">299</span></a><span class="sd">        Calculate the appropriate page number when changing gallery modes.</span>
</span><span id="ImageGalleryController-300"><a href="#ImageGalleryController-300"><span class="linenos">300</span></a><span class="sd">        </span>
</span><span id="ImageGalleryController-301"><a href="#ImageGalleryController-301"><span class="linenos">301</span></a><span class="sd">        When switching between different gallery layouts, this method ensures</span>
</span><span id="ImageGalleryController-302"><a href="#ImageGalleryController-302"><span class="linenos">302</span></a><span class="sd">        the currently selected or viewed image remains visible by calculating</span>
</span><span id="ImageGalleryController-303"><a href="#ImageGalleryController-303"><span class="linenos">303</span></a><span class="sd">        the correct page number for the new layout.</span>
</span><span id="ImageGalleryController-304"><a href="#ImageGalleryController-304"><span class="linenos">304</span></a><span class="sd">        </span>
</span><span id="ImageGalleryController-305"><a href="#ImageGalleryController-305"><span class="linenos">305</span></a><span class="sd">        Args:</span>
</span><span id="ImageGalleryController-306"><a href="#ImageGalleryController-306"><span class="linenos">306</span></a><span class="sd">            newGalleryMode (GalleryMode): Target gallery layout mode</span>
</span><span id="ImageGalleryController-307"><a href="#ImageGalleryController-307"><span class="linenos">307</span></a><span class="sd">            </span>
</span><span id="ImageGalleryController-308"><a href="#ImageGalleryController-308"><span class="linenos">308</span></a><span class="sd">        Returns:</span>
</span><span id="ImageGalleryController-309"><a href="#ImageGalleryController-309"><span class="linenos">309</span></a><span class="sd">            int: Calculated page number for the new gallery mode</span>
</span><span id="ImageGalleryController-310"><a href="#ImageGalleryController-310"><span class="linenos">310</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ImageGalleryController-311"><a href="#ImageGalleryController-311"><span class="linenos">311</span></a>        <span class="n">currentPage</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">pageNumber</span>
</span><span id="ImageGalleryController-312"><a href="#ImageGalleryController-312"><span class="linenos">312</span></a>        <span class="n">nbImagePerPage</span> <span class="o">=</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">nbRow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">shapeMode</span><span class="p">)</span><span class="o">*</span><span class="n">GalleryMode</span><span class="o">.</span><span class="n">nbCol</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">shapeMode</span><span class="p">)</span>
</span><span id="ImageGalleryController-313"><a href="#ImageGalleryController-313"><span class="linenos">313</span></a>        <span class="n">selectedImage</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">selectedImage</span><span class="p">()</span> <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">selectedImage</span><span class="p">()</span><span class="o">!=-</span><span class="mi">1</span><span class="p">)</span> <span class="k">else</span> <span class="n">currentPage</span><span class="o">*</span><span class="n">nbImagePerPage</span>
</span><span id="ImageGalleryController-314"><a href="#ImageGalleryController-314"><span class="linenos">314</span></a>        <span class="n">newNbImagePerPage</span> <span class="o">=</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">nbRow</span><span class="p">(</span><span class="n">newGalleryMode</span><span class="p">)</span><span class="o">*</span><span class="n">GalleryMode</span><span class="o">.</span><span class="n">nbCol</span><span class="p">(</span><span class="n">newGalleryMode</span><span class="p">)</span>
</span><span id="ImageGalleryController-315"><a href="#ImageGalleryController-315"><span class="linenos">315</span></a>
</span><span id="ImageGalleryController-316"><a href="#ImageGalleryController-316"><span class="linenos">316</span></a>        <span class="n">newPageNumber</span> <span class="o">=</span> <span class="n">selectedImage</span><span class="o">//</span><span class="n">newNbImagePerPage</span>
</span><span id="ImageGalleryController-317"><a href="#ImageGalleryController-317"><span class="linenos">317</span></a>
</span><span id="ImageGalleryController-318"><a href="#ImageGalleryController-318"><span class="linenos">318</span></a>        <span class="k">return</span> <span class="n">newPageNumber</span>
</span><span id="ImageGalleryController-319"><a href="#ImageGalleryController-319"><span class="linenos">319</span></a>
</span><span id="ImageGalleryController-320"><a href="#ImageGalleryController-320"><span class="linenos">320</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackButton_1x1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ImageGalleryController-321"><a href="#ImageGalleryController-321"><span class="linenos">321</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ImageGalleryController-322"><a href="#ImageGalleryController-322"><span class="linenos">322</span></a><span class="sd">        Switch gallery to single image view mode (1×1).</span>
</span><span id="ImageGalleryController-323"><a href="#ImageGalleryController-323"><span class="linenos">323</span></a><span class="sd">        </span>
</span><span id="ImageGalleryController-324"><a href="#ImageGalleryController-324"><span class="linenos">324</span></a><span class="sd">        Changes the gallery layout to display one image at a time, suitable</span>
</span><span id="ImageGalleryController-325"><a href="#ImageGalleryController-325"><span class="linenos">325</span></a><span class="sd">        for detailed viewing and editing. Recalculates pagination and updates</span>
</span><span id="ImageGalleryController-326"><a href="#ImageGalleryController-326"><span class="linenos">326</span></a><span class="sd">        the display.</span>
</span><span id="ImageGalleryController-327"><a href="#ImageGalleryController-327"><span class="linenos">327</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ImageGalleryController-328"><a href="#ImageGalleryController-328"><span class="linenos">328</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">shapeMode</span> <span class="o">!=</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_1x1</span><span class="p">:</span>
</span><span id="ImageGalleryController-329"><a href="#ImageGalleryController-329"><span class="linenos">329</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">resetGridLayoutWidgets</span><span class="p">()</span>
</span><span id="ImageGalleryController-330"><a href="#ImageGalleryController-330"><span class="linenos">330</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">pageNumber</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computePageNumberOnGalleryModeChange</span><span class="p">(</span><span class="n">GalleryMode</span><span class="o">.</span><span class="n">_1x1</span><span class="p">)</span>
</span><span id="ImageGalleryController-331"><a href="#ImageGalleryController-331"><span class="linenos">331</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">shapeMode</span> <span class="o">=</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_1x1</span>
</span><span id="ImageGalleryController-332"><a href="#ImageGalleryController-332"><span class="linenos">332</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">buildGridLayoutWidgets</span><span class="p">()</span>
</span><span id="ImageGalleryController-333"><a href="#ImageGalleryController-333"><span class="linenos">333</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">updateImages</span><span class="p">()</span>
</span><span id="ImageGalleryController-334"><a href="#ImageGalleryController-334"><span class="linenos">334</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">loadPage</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">pageNumber</span><span class="p">)</span>
</span><span id="ImageGalleryController-335"><a href="#ImageGalleryController-335"><span class="linenos">335</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">repaint</span><span class="p">()</span>
</span><span id="ImageGalleryController-336"><a href="#ImageGalleryController-336"><span class="linenos">336</span></a>
</span><span id="ImageGalleryController-337"><a href="#ImageGalleryController-337"><span class="linenos">337</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackButton_3x2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
</span><span id="ImageGalleryController-338"><a href="#ImageGalleryController-338"><span class="linenos">338</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ImageGalleryController-339"><a href="#ImageGalleryController-339"><span class="linenos">339</span></a><span class="sd">        Switch gallery to 3×2 grid view mode.</span>
</span><span id="ImageGalleryController-340"><a href="#ImageGalleryController-340"><span class="linenos">340</span></a><span class="sd">        </span>
</span><span id="ImageGalleryController-341"><a href="#ImageGalleryController-341"><span class="linenos">341</span></a><span class="sd">        Changes the gallery layout to display 6 images in a 3×2 grid,</span>
</span><span id="ImageGalleryController-342"><a href="#ImageGalleryController-342"><span class="linenos">342</span></a><span class="sd">        suitable for browsing multiple images while maintaining reasonable</span>
</span><span id="ImageGalleryController-343"><a href="#ImageGalleryController-343"><span class="linenos">343</span></a><span class="sd">        image size for preview.</span>
</span><span id="ImageGalleryController-344"><a href="#ImageGalleryController-344"><span class="linenos">344</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ImageGalleryController-345"><a href="#ImageGalleryController-345"><span class="linenos">345</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">shapeMode</span> <span class="o">!=</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_3x2</span><span class="p">:</span>
</span><span id="ImageGalleryController-346"><a href="#ImageGalleryController-346"><span class="linenos">346</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">resetGridLayoutWidgets</span><span class="p">()</span>
</span><span id="ImageGalleryController-347"><a href="#ImageGalleryController-347"><span class="linenos">347</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">pageNumber</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computePageNumberOnGalleryModeChange</span><span class="p">(</span><span class="n">GalleryMode</span><span class="o">.</span><span class="n">_3x2</span><span class="p">)</span>
</span><span id="ImageGalleryController-348"><a href="#ImageGalleryController-348"><span class="linenos">348</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">shapeMode</span> <span class="o">=</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_3x2</span>
</span><span id="ImageGalleryController-349"><a href="#ImageGalleryController-349"><span class="linenos">349</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">buildGridLayoutWidgets</span><span class="p">()</span>
</span><span id="ImageGalleryController-350"><a href="#ImageGalleryController-350"><span class="linenos">350</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">updateImages</span><span class="p">()</span>
</span><span id="ImageGalleryController-351"><a href="#ImageGalleryController-351"><span class="linenos">351</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">loadPage</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">pageNumber</span><span class="p">)</span>
</span><span id="ImageGalleryController-352"><a href="#ImageGalleryController-352"><span class="linenos">352</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">repaint</span><span class="p">()</span>
</span><span id="ImageGalleryController-353"><a href="#ImageGalleryController-353"><span class="linenos">353</span></a>
</span><span id="ImageGalleryController-354"><a href="#ImageGalleryController-354"><span class="linenos">354</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackButton_6x4</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
</span><span id="ImageGalleryController-355"><a href="#ImageGalleryController-355"><span class="linenos">355</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ImageGalleryController-356"><a href="#ImageGalleryController-356"><span class="linenos">356</span></a><span class="sd">        Switch gallery to 6×4 grid view mode.</span>
</span><span id="ImageGalleryController-357"><a href="#ImageGalleryController-357"><span class="linenos">357</span></a><span class="sd">        </span>
</span><span id="ImageGalleryController-358"><a href="#ImageGalleryController-358"><span class="linenos">358</span></a><span class="sd">        Changes the gallery layout to display 24 images in a 6×4 grid,</span>
</span><span id="ImageGalleryController-359"><a href="#ImageGalleryController-359"><span class="linenos">359</span></a><span class="sd">        suitable for quick browsing of large image collections with</span>
</span><span id="ImageGalleryController-360"><a href="#ImageGalleryController-360"><span class="linenos">360</span></a><span class="sd">        smaller thumbnail sizes.</span>
</span><span id="ImageGalleryController-361"><a href="#ImageGalleryController-361"><span class="linenos">361</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ImageGalleryController-362"><a href="#ImageGalleryController-362"><span class="linenos">362</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">shapeMode</span> <span class="o">!=</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_6x4</span><span class="p">:</span>
</span><span id="ImageGalleryController-363"><a href="#ImageGalleryController-363"><span class="linenos">363</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">resetGridLayoutWidgets</span><span class="p">()</span>
</span><span id="ImageGalleryController-364"><a href="#ImageGalleryController-364"><span class="linenos">364</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">pageNumber</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computePageNumberOnGalleryModeChange</span><span class="p">(</span><span class="n">GalleryMode</span><span class="o">.</span><span class="n">_6x4</span><span class="p">)</span>
</span><span id="ImageGalleryController-365"><a href="#ImageGalleryController-365"><span class="linenos">365</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">shapeMode</span> <span class="o">=</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_6x4</span>
</span><span id="ImageGalleryController-366"><a href="#ImageGalleryController-366"><span class="linenos">366</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">buildGridLayoutWidgets</span><span class="p">()</span>
</span><span id="ImageGalleryController-367"><a href="#ImageGalleryController-367"><span class="linenos">367</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">updateImages</span><span class="p">()</span>
</span><span id="ImageGalleryController-368"><a href="#ImageGalleryController-368"><span class="linenos">368</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">loadPage</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">pageNumber</span><span class="p">)</span>
</span><span id="ImageGalleryController-369"><a href="#ImageGalleryController-369"><span class="linenos">369</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">repaint</span><span class="p">()</span>
</span><span id="ImageGalleryController-370"><a href="#ImageGalleryController-370"><span class="linenos">370</span></a>
</span><span id="ImageGalleryController-371"><a href="#ImageGalleryController-371"><span class="linenos">371</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackButton_9x6</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ImageGalleryController-372"><a href="#ImageGalleryController-372"><span class="linenos">372</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ImageGalleryController-373"><a href="#ImageGalleryController-373"><span class="linenos">373</span></a><span class="sd">        Switch gallery to 9×6 grid view mode.</span>
</span><span id="ImageGalleryController-374"><a href="#ImageGalleryController-374"><span class="linenos">374</span></a><span class="sd">        </span>
</span><span id="ImageGalleryController-375"><a href="#ImageGalleryController-375"><span class="linenos">375</span></a><span class="sd">        Changes the gallery layout to display 54 images in a 9×6 grid,</span>
</span><span id="ImageGalleryController-376"><a href="#ImageGalleryController-376"><span class="linenos">376</span></a><span class="sd">        suitable for overview browsing of very large image collections</span>
</span><span id="ImageGalleryController-377"><a href="#ImageGalleryController-377"><span class="linenos">377</span></a><span class="sd">        with small thumbnail sizes.</span>
</span><span id="ImageGalleryController-378"><a href="#ImageGalleryController-378"><span class="linenos">378</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ImageGalleryController-379"><a href="#ImageGalleryController-379"><span class="linenos">379</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">shapeMode</span> <span class="o">!=</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_9x6</span><span class="p">:</span>
</span><span id="ImageGalleryController-380"><a href="#ImageGalleryController-380"><span class="linenos">380</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">resetGridLayoutWidgets</span><span class="p">()</span>
</span><span id="ImageGalleryController-381"><a href="#ImageGalleryController-381"><span class="linenos">381</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">pageNumber</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computePageNumberOnGalleryModeChange</span><span class="p">(</span><span class="n">GalleryMode</span><span class="o">.</span><span class="n">_9x6</span><span class="p">)</span>
</span><span id="ImageGalleryController-382"><a href="#ImageGalleryController-382"><span class="linenos">382</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">shapeMode</span> <span class="o">=</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_9x6</span>
</span><span id="ImageGalleryController-383"><a href="#ImageGalleryController-383"><span class="linenos">383</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">buildGridLayoutWidgets</span><span class="p">()</span>
</span><span id="ImageGalleryController-384"><a href="#ImageGalleryController-384"><span class="linenos">384</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">updateImages</span><span class="p">()</span>
</span><span id="ImageGalleryController-385"><a href="#ImageGalleryController-385"><span class="linenos">385</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">loadPage</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">pageNumber</span><span class="p">)</span>
</span><span id="ImageGalleryController-386"><a href="#ImageGalleryController-386"><span class="linenos">386</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">repaint</span><span class="p">()</span>
</span><span id="ImageGalleryController-387"><a href="#ImageGalleryController-387"><span class="linenos">387</span></a>
</span><span id="ImageGalleryController-388"><a href="#ImageGalleryController-388"><span class="linenos">388</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackButton_2x1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ImageGalleryController-389"><a href="#ImageGalleryController-389"><span class="linenos">389</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ImageGalleryController-390"><a href="#ImageGalleryController-390"><span class="linenos">390</span></a><span class="sd">        Switch gallery to 2×1 comparison view mode.</span>
</span><span id="ImageGalleryController-391"><a href="#ImageGalleryController-391"><span class="linenos">391</span></a><span class="sd">        </span>
</span><span id="ImageGalleryController-392"><a href="#ImageGalleryController-392"><span class="linenos">392</span></a><span class="sd">        Changes the gallery layout to display 2 images side by side,</span>
</span><span id="ImageGalleryController-393"><a href="#ImageGalleryController-393"><span class="linenos">393</span></a><span class="sd">        ideal for comparing different processing results or comparing</span>
</span><span id="ImageGalleryController-394"><a href="#ImageGalleryController-394"><span class="linenos">394</span></a><span class="sd">        before/after versions of images.</span>
</span><span id="ImageGalleryController-395"><a href="#ImageGalleryController-395"><span class="linenos">395</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ImageGalleryController-396"><a href="#ImageGalleryController-396"><span class="linenos">396</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">shapeMode</span> <span class="o">!=</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_2x1</span><span class="p">:</span>
</span><span id="ImageGalleryController-397"><a href="#ImageGalleryController-397"><span class="linenos">397</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">resetGridLayoutWidgets</span><span class="p">()</span>
</span><span id="ImageGalleryController-398"><a href="#ImageGalleryController-398"><span class="linenos">398</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">pageNumber</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computePageNumberOnGalleryModeChange</span><span class="p">(</span><span class="n">GalleryMode</span><span class="o">.</span><span class="n">_2x1</span><span class="p">)</span>
</span><span id="ImageGalleryController-399"><a href="#ImageGalleryController-399"><span class="linenos">399</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">shapeMode</span> <span class="o">=</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_2x1</span>
</span><span id="ImageGalleryController-400"><a href="#ImageGalleryController-400"><span class="linenos">400</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">buildGridLayoutWidgets</span><span class="p">()</span>
</span><span id="ImageGalleryController-401"><a href="#ImageGalleryController-401"><span class="linenos">401</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">updateImages</span><span class="p">()</span>
</span><span id="ImageGalleryController-402"><a href="#ImageGalleryController-402"><span class="linenos">402</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">loadPage</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">pageNumber</span><span class="p">)</span>
</span><span id="ImageGalleryController-403"><a href="#ImageGalleryController-403"><span class="linenos">403</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">repaint</span><span class="p">()</span>
</span><span id="ImageGalleryController-404"><a href="#ImageGalleryController-404"><span class="linenos">404</span></a>
</span><span id="ImageGalleryController-405"><a href="#ImageGalleryController-405"><span class="linenos">405</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">selectImage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
</span><span id="ImageGalleryController-406"><a href="#ImageGalleryController-406"><span class="linenos">406</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ImageGalleryController-407"><a href="#ImageGalleryController-407"><span class="linenos">407</span></a><span class="sd">        Handle selection of an image in the gallery.</span>
</span><span id="ImageGalleryController-408"><a href="#ImageGalleryController-408"><span class="linenos">408</span></a><span class="sd">        </span>
</span><span id="ImageGalleryController-409"><a href="#ImageGalleryController-409"><span class="linenos">409</span></a><span class="sd">        Processes user selection of an image and updates the editing interface</span>
</span><span id="ImageGalleryController-410"><a href="#ImageGalleryController-410"><span class="linenos">410</span></a><span class="sd">        to work with the selected image&#39;s processing pipeline.</span>
</span><span id="ImageGalleryController-411"><a href="#ImageGalleryController-411"><span class="linenos">411</span></a><span class="sd">        </span>
</span><span id="ImageGalleryController-412"><a href="#ImageGalleryController-412"><span class="linenos">412</span></a><span class="sd">        Args:</span>
</span><span id="ImageGalleryController-413"><a href="#ImageGalleryController-413"><span class="linenos">413</span></a><span class="sd">            id (int): Index of the selected image within the current page</span>
</span><span id="ImageGalleryController-414"><a href="#ImageGalleryController-414"><span class="linenos">414</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ImageGalleryController-415"><a href="#ImageGalleryController-415"><span class="linenos">415</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; ImageGalleryController.selectImage()&quot;</span><span class="p">)</span>
</span><span id="ImageGalleryController-416"><a href="#ImageGalleryController-416"><span class="linenos">416</span></a>
</span><span id="ImageGalleryController-417"><a href="#ImageGalleryController-417"><span class="linenos">417</span></a>        <span class="n">nbImagePage</span> <span class="o">=</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">nbRow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">shapeMode</span><span class="p">)</span><span class="o">*</span><span class="n">GalleryMode</span><span class="o">.</span><span class="n">nbCol</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">shapeMode</span><span class="p">)</span>
</span><span id="ImageGalleryController-418"><a href="#ImageGalleryController-418"><span class="linenos">418</span></a>        <span class="n">idxImage</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">pageNumber</span><span class="o">*</span><span class="n">nbImagePage</span><span class="o">+</span><span class="nb">id</span>
</span><span id="ImageGalleryController-419"><a href="#ImageGalleryController-419"><span class="linenos">419</span></a>        <span class="c1"># check id</span>
</span><span id="ImageGalleryController-420"><a href="#ImageGalleryController-420"><span class="linenos">420</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">idxImage</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">processPipes</span><span class="p">)):</span>
</span><span id="ImageGalleryController-421"><a href="#ImageGalleryController-421"><span class="linenos">421</span></a>            <span class="c1"># update selected image</span>
</span><span id="ImageGalleryController-422"><a href="#ImageGalleryController-422"><span class="linenos">422</span></a>            <span class="n">processPipe</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">processPipes</span><span class="p">[</span><span class="n">idxImage</span><span class="p">]</span>
</span><span id="ImageGalleryController-423"><a href="#ImageGalleryController-423"><span class="linenos">423</span></a>            <span class="k">if</span> <span class="n">processPipe</span><span class="p">:</span>
</span><span id="ImageGalleryController-424"><a href="#ImageGalleryController-424"><span class="linenos">424</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">dock</span><span class="o">.</span><span class="n">setProcessPipe</span><span class="p">(</span><span class="n">processPipe</span><span class="p">):</span>
</span><span id="ImageGalleryController-425"><a href="#ImageGalleryController-425"><span class="linenos">425</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setSelectedImage</span><span class="p">(</span><span class="n">idxImage</span><span class="p">)</span>
</span><span id="ImageGalleryController-426"><a href="#ImageGalleryController-426"><span class="linenos">426</span></a>
</span><span id="ImageGalleryController-427"><a href="#ImageGalleryController-427"><span class="linenos">427</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getSelectedProcessPipe</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ImageGalleryController-428"><a href="#ImageGalleryController-428"><span class="linenos">428</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>  <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; ImageGalleryController.getSelectedProcessPipe()&quot;</span><span class="p">)</span>
</span><span id="ImageGalleryController-429"><a href="#ImageGalleryController-429"><span class="linenos">429</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getSelectedProcessPipe</span><span class="p">()</span>
</span><span id="ImageGalleryController-430"><a href="#ImageGalleryController-430"><span class="linenos">430</span></a>
</span><span id="ImageGalleryController-431"><a href="#ImageGalleryController-431"><span class="linenos">431</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setProcessPipeWidgetQPixmap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qPixmap</span><span class="p">):</span>
</span><span id="ImageGalleryController-432"><a href="#ImageGalleryController-432"><span class="linenos">432</span></a>        <span class="n">idxProcessPipe</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">selectedImage</span><span class="p">()</span>
</span><span id="ImageGalleryController-433"><a href="#ImageGalleryController-433"><span class="linenos">433</span></a>        <span class="n">nbImagePage</span> <span class="o">=</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">nbRow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">shapeMode</span><span class="p">)</span><span class="o">*</span><span class="n">GalleryMode</span><span class="o">.</span><span class="n">nbCol</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">shapeMode</span><span class="p">)</span>
</span><span id="ImageGalleryController-434"><a href="#ImageGalleryController-434"><span class="linenos">434</span></a>        <span class="n">idxImageWidget</span> <span class="o">=</span> <span class="n">idxProcessPipe</span><span class="o">%</span><span class="n">nbImagePage</span>
</span><span id="ImageGalleryController-435"><a href="#ImageGalleryController-435"><span class="linenos">435</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>  <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; &gt;&gt; ImageGalleryController.setProcessPipeWidgetQPixmap(...)[ image id:&quot;</span><span class="p">,</span><span class="n">idxProcessPipe</span><span class="p">,</span><span class="s2">&quot;&gt;&gt; image widget controller:&quot;</span><span class="p">,</span><span class="n">idxImageWidget</span><span class="p">,</span><span class="s2">&quot;]&quot;</span><span class="p">)</span>
</span><span id="ImageGalleryController-436"><a href="#ImageGalleryController-436"><span class="linenos">436</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">imagesControllers</span><span class="p">[</span><span class="n">idxImageWidget</span><span class="p">]</span><span class="o">.</span><span class="n">setQPixmap</span><span class="p">(</span><span class="n">qPixmap</span><span class="p">)</span>
</span><span id="ImageGalleryController-437"><a href="#ImageGalleryController-437"><span class="linenos">437</span></a>
</span><span id="ImageGalleryController-438"><a href="#ImageGalleryController-438"><span class="linenos">438</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ImageGalleryController-439"><a href="#ImageGalleryController-439"><span class="linenos">439</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; ImageGalleryController.save()&quot;</span><span class="p">)</span>
</span><span id="ImageGalleryController-440"><a href="#ImageGalleryController-440"><span class="linenos">440</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span id="ImageGalleryController-441"><a href="#ImageGalleryController-441"><span class="linenos">441</span></a>
</span><span id="ImageGalleryController-442"><a href="#ImageGalleryController-442"><span class="linenos">442</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">currentPage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">currentPage</span><span class="p">()</span>
</span><span id="ImageGalleryController-443"><a href="#ImageGalleryController-443"><span class="linenos">443</span></a>
</span><span id="ImageGalleryController-444"><a href="#ImageGalleryController-444"><span class="linenos">444</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pageIdx</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ImageGalleryController-445"><a href="#ImageGalleryController-445"><span class="linenos">445</span></a>        <span class="n">nb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentPage</span><span class="p">()</span>
</span><span id="ImageGalleryController-446"><a href="#ImageGalleryController-446"><span class="linenos">446</span></a>        <span class="n">nbImagePage</span> <span class="o">=</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">nbRow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">shapeMode</span><span class="p">)</span><span class="o">*</span><span class="n">GalleryMode</span><span class="o">.</span><span class="n">nbCol</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">shapeMode</span><span class="p">)</span>
</span><span id="ImageGalleryController-447"><a href="#ImageGalleryController-447"><span class="linenos">447</span></a>        <span class="k">return</span> <span class="p">(</span><span class="n">nb</span><span class="o">*</span><span class="n">nbImagePage</span><span class="p">),</span> <span class="p">((</span><span class="n">nb</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="n">nbImagePage</span><span class="p">)</span>
</span><span id="ImageGalleryController-448"><a href="#ImageGalleryController-448"><span class="linenos">448</span></a>
</span><span id="ImageGalleryController-449"><a href="#ImageGalleryController-449"><span class="linenos">449</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getFilenamesOfCurrentPage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getFilenamesOfCurrentPage</span><span class="p">()</span>
</span><span id="ImageGalleryController-450"><a href="#ImageGalleryController-450"><span class="linenos">450</span></a>
</span><span id="ImageGalleryController-451"><a href="#ImageGalleryController-451"><span class="linenos">451</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getProcessPipeById</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">i</span><span class="p">)</span> <span class="p">:</span> <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getProcessPipeById</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</span><span id="ImageGalleryController-452"><a href="#ImageGalleryController-452"><span class="linenos">452</span></a>
</span><span id="ImageGalleryController-453"><a href="#ImageGalleryController-453"><span class="linenos">453</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getProcessPipes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">processPipes</span>
</span></pre></div>


            <div class="docstring"><p>Controller for the image gallery interface.</p>

<p>Manages the gallery view that displays multiple images in grid layouts,
handles pagination, gallery mode switching, and image selection. Provides
the main interface for browsing and selecting images for editing.</p>

<p>The gallery supports multiple display modes (1×1, 3×2, 6×4, 9×6, 2×1) and
handles pagination when there are more images than can fit in the current view.</p>

<p>Attributes:
    - parent: Parent controller (typically AppController)
    - view (view.ImageGalleryView): Gallery view component
    - model (model.ImageGalleryModel): Gallery data model</p>
</div>


                            <div id="ImageGalleryController.__init__" class="classattr">
                                        <input id="ImageGalleryController.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">ImageGalleryController</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">parent</span></span>)</span>

                <label class="view-source-button" for="ImageGalleryController.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ImageGalleryController.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ImageGalleryController.__init__-245"><a href="#ImageGalleryController.__init__-245"><span class="linenos">245</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
</span><span id="ImageGalleryController.__init__-246"><a href="#ImageGalleryController.__init__-246"><span class="linenos">246</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ImageGalleryController.__init__-247"><a href="#ImageGalleryController.__init__-247"><span class="linenos">247</span></a><span class="sd">        Initialize the image gallery controller.</span>
</span><span id="ImageGalleryController.__init__-248"><a href="#ImageGalleryController.__init__-248"><span class="linenos">248</span></a><span class="sd">        </span>
</span><span id="ImageGalleryController.__init__-249"><a href="#ImageGalleryController.__init__-249"><span class="linenos">249</span></a><span class="sd">        Args:</span>
</span><span id="ImageGalleryController.__init__-250"><a href="#ImageGalleryController.__init__-250"><span class="linenos">250</span></a><span class="sd">            parent: Parent controller that manages this gallery</span>
</span><span id="ImageGalleryController.__init__-251"><a href="#ImageGalleryController.__init__-251"><span class="linenos">251</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ImageGalleryController.__init__-252"><a href="#ImageGalleryController.__init__-252"><span class="linenos">252</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; ImageGalleryController.__init__()&quot;</span><span class="p">)</span>
</span><span id="ImageGalleryController.__init__-253"><a href="#ImageGalleryController.__init__-253"><span class="linenos">253</span></a>
</span><span id="ImageGalleryController.__init__-254"><a href="#ImageGalleryController.__init__-254"><span class="linenos">254</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>    <span class="c1"># AppView</span>
</span><span id="ImageGalleryController.__init__-255"><a href="#ImageGalleryController.__init__-255"><span class="linenos">255</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">ImageGalleryView</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="ImageGalleryController.__init__-256"><a href="#ImageGalleryController.__init__-256"><span class="linenos">256</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">ImageGalleryModel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Initialize the image gallery controller.</p>

<p>Args:
    parent: Parent controller that manages this gallery</p>
</div>


                            </div>
                            <div id="ImageGalleryController.parent" class="classattr">
                                <div class="attr variable">
            <span class="name">parent</span>

        
    </div>
    <a class="headerlink" href="#ImageGalleryController.parent"></a>
    
    

                            </div>
                            <div id="ImageGalleryController.view" class="classattr">
                                <div class="attr variable">
            <span class="name">view</span>

        
    </div>
    <a class="headerlink" href="#ImageGalleryController.view"></a>
    
    

                            </div>
                            <div id="ImageGalleryController.model" class="classattr">
                                <div class="attr variable">
            <span class="name">model</span>

        
    </div>
    <a class="headerlink" href="#ImageGalleryController.model"></a>
    
    

                            </div>
                            <div id="ImageGalleryController.setImages" class="classattr">
                                        <input id="ImageGalleryController.setImages-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">setImages</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">imageFiles</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ImageGalleryController.setImages-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ImageGalleryController.setImages"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ImageGalleryController.setImages-258"><a href="#ImageGalleryController.setImages-258"><span class="linenos">258</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setImages</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">imageFiles</span><span class="p">):</span> 
</span><span id="ImageGalleryController.setImages-259"><a href="#ImageGalleryController.setImages-259"><span class="linenos">259</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ImageGalleryController.setImages-260"><a href="#ImageGalleryController.setImages-260"><span class="linenos">260</span></a><span class="sd">        Load a list of image files into the gallery.</span>
</span><span id="ImageGalleryController.setImages-261"><a href="#ImageGalleryController.setImages-261"><span class="linenos">261</span></a><span class="sd">        </span>
</span><span id="ImageGalleryController.setImages-262"><a href="#ImageGalleryController.setImages-262"><span class="linenos">262</span></a><span class="sd">        Args:</span>
</span><span id="ImageGalleryController.setImages-263"><a href="#ImageGalleryController.setImages-263"><span class="linenos">263</span></a><span class="sd">            imageFiles (list): List of image file paths to load</span>
</span><span id="ImageGalleryController.setImages-264"><a href="#ImageGalleryController.setImages-264"><span class="linenos">264</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ImageGalleryController.setImages-265"><a href="#ImageGalleryController.setImages-265"><span class="linenos">265</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setImages</span><span class="p">(</span><span class="n">imageFiles</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Load a list of image files into the gallery.</p>

<p>Args:
    imageFiles (list): List of image file paths to load</p>
</div>


                            </div>
                            <div id="ImageGalleryController.updateImages" class="classattr">
                                        <input id="ImageGalleryController.updateImages-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">updateImages</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ImageGalleryController.updateImages-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ImageGalleryController.updateImages"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ImageGalleryController.updateImages-267"><a href="#ImageGalleryController.updateImages-267"><span class="linenos">267</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">updateImages</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ImageGalleryController.updateImages-268"><a href="#ImageGalleryController.updateImages-268"><span class="linenos">268</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ImageGalleryController.updateImages-269"><a href="#ImageGalleryController.updateImages-269"><span class="linenos">269</span></a><span class="sd">        Refresh the gallery display with current images.</span>
</span><span id="ImageGalleryController.updateImages-270"><a href="#ImageGalleryController.updateImages-270"><span class="linenos">270</span></a><span class="sd">        </span>
</span><span id="ImageGalleryController.updateImages-271"><a href="#ImageGalleryController.updateImages-271"><span class="linenos">271</span></a><span class="sd">        Called by the model when image data changes to update the view.</span>
</span><span id="ImageGalleryController.updateImages-272"><a href="#ImageGalleryController.updateImages-272"><span class="linenos">272</span></a><span class="sd">        Resets the page number and refreshes the display.</span>
</span><span id="ImageGalleryController.updateImages-273"><a href="#ImageGalleryController.updateImages-273"><span class="linenos">273</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ImageGalleryController.updateImages-274"><a href="#ImageGalleryController.updateImages-274"><span class="linenos">274</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">pageNumber</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># reset page number</span>
</span><span id="ImageGalleryController.updateImages-275"><a href="#ImageGalleryController.updateImages-275"><span class="linenos">275</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">updateImages</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Refresh the gallery display with current images.</p>

<p>Called by the model when image data changes to update the view.
Resets the page number and refreshes the display.</p>
</div>


                            </div>
                            <div id="ImageGalleryController.callBackButton_previousPage" class="classattr">
                                        <input id="ImageGalleryController.callBackButton_previousPage-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">callBackButton_previousPage</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ImageGalleryController.callBackButton_previousPage-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ImageGalleryController.callBackButton_previousPage"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ImageGalleryController.callBackButton_previousPage-277"><a href="#ImageGalleryController.callBackButton_previousPage-277"><span class="linenos">277</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackButton_previousPage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>  
</span><span id="ImageGalleryController.callBackButton_previousPage-278"><a href="#ImageGalleryController.callBackButton_previousPage-278"><span class="linenos">278</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ImageGalleryController.callBackButton_previousPage-279"><a href="#ImageGalleryController.callBackButton_previousPage-279"><span class="linenos">279</span></a><span class="sd">        Navigate to the previous page in the gallery.</span>
</span><span id="ImageGalleryController.callBackButton_previousPage-280"><a href="#ImageGalleryController.callBackButton_previousPage-280"><span class="linenos">280</span></a><span class="sd">        </span>
</span><span id="ImageGalleryController.callBackButton_previousPage-281"><a href="#ImageGalleryController.callBackButton_previousPage-281"><span class="linenos">281</span></a><span class="sd">        Handles pagination when there are more images than can fit in the</span>
</span><span id="ImageGalleryController.callBackButton_previousPage-282"><a href="#ImageGalleryController.callBackButton_previousPage-282"><span class="linenos">282</span></a><span class="sd">        current gallery view. In single image mode, also selects the image.</span>
</span><span id="ImageGalleryController.callBackButton_previousPage-283"><a href="#ImageGalleryController.callBackButton_previousPage-283"><span class="linenos">283</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ImageGalleryController.callBackButton_previousPage-284"><a href="#ImageGalleryController.callBackButton_previousPage-284"><span class="linenos">284</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">changePageNumber</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</span><span id="ImageGalleryController.callBackButton_previousPage-285"><a href="#ImageGalleryController.callBackButton_previousPage-285"><span class="linenos">285</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">shapeMode</span> <span class="o">==</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_1x1</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">selectImage</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Navigate to the previous page in the gallery.</p>

<p>Handles pagination when there are more images than can fit in the
current gallery view. In single image mode, also selects the image.</p>
</div>


                            </div>
                            <div id="ImageGalleryController.callBackButton_nextPage" class="classattr">
                                        <input id="ImageGalleryController.callBackButton_nextPage-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">callBackButton_nextPage</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ImageGalleryController.callBackButton_nextPage-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ImageGalleryController.callBackButton_nextPage"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ImageGalleryController.callBackButton_nextPage-287"><a href="#ImageGalleryController.callBackButton_nextPage-287"><span class="linenos">287</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackButton_nextPage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>      
</span><span id="ImageGalleryController.callBackButton_nextPage-288"><a href="#ImageGalleryController.callBackButton_nextPage-288"><span class="linenos">288</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ImageGalleryController.callBackButton_nextPage-289"><a href="#ImageGalleryController.callBackButton_nextPage-289"><span class="linenos">289</span></a><span class="sd">        Navigate to the next page in the gallery.</span>
</span><span id="ImageGalleryController.callBackButton_nextPage-290"><a href="#ImageGalleryController.callBackButton_nextPage-290"><span class="linenos">290</span></a><span class="sd">        </span>
</span><span id="ImageGalleryController.callBackButton_nextPage-291"><a href="#ImageGalleryController.callBackButton_nextPage-291"><span class="linenos">291</span></a><span class="sd">        Handles pagination when there are more images than can fit in the</span>
</span><span id="ImageGalleryController.callBackButton_nextPage-292"><a href="#ImageGalleryController.callBackButton_nextPage-292"><span class="linenos">292</span></a><span class="sd">        current gallery view. In single image mode, also selects the image.</span>
</span><span id="ImageGalleryController.callBackButton_nextPage-293"><a href="#ImageGalleryController.callBackButton_nextPage-293"><span class="linenos">293</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ImageGalleryController.callBackButton_nextPage-294"><a href="#ImageGalleryController.callBackButton_nextPage-294"><span class="linenos">294</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">changePageNumber</span><span class="p">(</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
</span><span id="ImageGalleryController.callBackButton_nextPage-295"><a href="#ImageGalleryController.callBackButton_nextPage-295"><span class="linenos">295</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">shapeMode</span> <span class="o">==</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_1x1</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">selectImage</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Navigate to the next page in the gallery.</p>

<p>Handles pagination when there are more images than can fit in the
current gallery view. In single image mode, also selects the image.</p>
</div>


                            </div>
                            <div id="ImageGalleryController.computePageNumberOnGalleryModeChange" class="classattr">
                                        <input id="ImageGalleryController.computePageNumberOnGalleryModeChange-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">computePageNumberOnGalleryModeChange</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">newGalleryMode</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ImageGalleryController.computePageNumberOnGalleryModeChange-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ImageGalleryController.computePageNumberOnGalleryModeChange"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ImageGalleryController.computePageNumberOnGalleryModeChange-297"><a href="#ImageGalleryController.computePageNumberOnGalleryModeChange-297"><span class="linenos">297</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">computePageNumberOnGalleryModeChange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">newGalleryMode</span><span class="p">):</span>
</span><span id="ImageGalleryController.computePageNumberOnGalleryModeChange-298"><a href="#ImageGalleryController.computePageNumberOnGalleryModeChange-298"><span class="linenos">298</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ImageGalleryController.computePageNumberOnGalleryModeChange-299"><a href="#ImageGalleryController.computePageNumberOnGalleryModeChange-299"><span class="linenos">299</span></a><span class="sd">        Calculate the appropriate page number when changing gallery modes.</span>
</span><span id="ImageGalleryController.computePageNumberOnGalleryModeChange-300"><a href="#ImageGalleryController.computePageNumberOnGalleryModeChange-300"><span class="linenos">300</span></a><span class="sd">        </span>
</span><span id="ImageGalleryController.computePageNumberOnGalleryModeChange-301"><a href="#ImageGalleryController.computePageNumberOnGalleryModeChange-301"><span class="linenos">301</span></a><span class="sd">        When switching between different gallery layouts, this method ensures</span>
</span><span id="ImageGalleryController.computePageNumberOnGalleryModeChange-302"><a href="#ImageGalleryController.computePageNumberOnGalleryModeChange-302"><span class="linenos">302</span></a><span class="sd">        the currently selected or viewed image remains visible by calculating</span>
</span><span id="ImageGalleryController.computePageNumberOnGalleryModeChange-303"><a href="#ImageGalleryController.computePageNumberOnGalleryModeChange-303"><span class="linenos">303</span></a><span class="sd">        the correct page number for the new layout.</span>
</span><span id="ImageGalleryController.computePageNumberOnGalleryModeChange-304"><a href="#ImageGalleryController.computePageNumberOnGalleryModeChange-304"><span class="linenos">304</span></a><span class="sd">        </span>
</span><span id="ImageGalleryController.computePageNumberOnGalleryModeChange-305"><a href="#ImageGalleryController.computePageNumberOnGalleryModeChange-305"><span class="linenos">305</span></a><span class="sd">        Args:</span>
</span><span id="ImageGalleryController.computePageNumberOnGalleryModeChange-306"><a href="#ImageGalleryController.computePageNumberOnGalleryModeChange-306"><span class="linenos">306</span></a><span class="sd">            newGalleryMode (GalleryMode): Target gallery layout mode</span>
</span><span id="ImageGalleryController.computePageNumberOnGalleryModeChange-307"><a href="#ImageGalleryController.computePageNumberOnGalleryModeChange-307"><span class="linenos">307</span></a><span class="sd">            </span>
</span><span id="ImageGalleryController.computePageNumberOnGalleryModeChange-308"><a href="#ImageGalleryController.computePageNumberOnGalleryModeChange-308"><span class="linenos">308</span></a><span class="sd">        Returns:</span>
</span><span id="ImageGalleryController.computePageNumberOnGalleryModeChange-309"><a href="#ImageGalleryController.computePageNumberOnGalleryModeChange-309"><span class="linenos">309</span></a><span class="sd">            int: Calculated page number for the new gallery mode</span>
</span><span id="ImageGalleryController.computePageNumberOnGalleryModeChange-310"><a href="#ImageGalleryController.computePageNumberOnGalleryModeChange-310"><span class="linenos">310</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ImageGalleryController.computePageNumberOnGalleryModeChange-311"><a href="#ImageGalleryController.computePageNumberOnGalleryModeChange-311"><span class="linenos">311</span></a>        <span class="n">currentPage</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">pageNumber</span>
</span><span id="ImageGalleryController.computePageNumberOnGalleryModeChange-312"><a href="#ImageGalleryController.computePageNumberOnGalleryModeChange-312"><span class="linenos">312</span></a>        <span class="n">nbImagePerPage</span> <span class="o">=</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">nbRow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">shapeMode</span><span class="p">)</span><span class="o">*</span><span class="n">GalleryMode</span><span class="o">.</span><span class="n">nbCol</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">shapeMode</span><span class="p">)</span>
</span><span id="ImageGalleryController.computePageNumberOnGalleryModeChange-313"><a href="#ImageGalleryController.computePageNumberOnGalleryModeChange-313"><span class="linenos">313</span></a>        <span class="n">selectedImage</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">selectedImage</span><span class="p">()</span> <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">selectedImage</span><span class="p">()</span><span class="o">!=-</span><span class="mi">1</span><span class="p">)</span> <span class="k">else</span> <span class="n">currentPage</span><span class="o">*</span><span class="n">nbImagePerPage</span>
</span><span id="ImageGalleryController.computePageNumberOnGalleryModeChange-314"><a href="#ImageGalleryController.computePageNumberOnGalleryModeChange-314"><span class="linenos">314</span></a>        <span class="n">newNbImagePerPage</span> <span class="o">=</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">nbRow</span><span class="p">(</span><span class="n">newGalleryMode</span><span class="p">)</span><span class="o">*</span><span class="n">GalleryMode</span><span class="o">.</span><span class="n">nbCol</span><span class="p">(</span><span class="n">newGalleryMode</span><span class="p">)</span>
</span><span id="ImageGalleryController.computePageNumberOnGalleryModeChange-315"><a href="#ImageGalleryController.computePageNumberOnGalleryModeChange-315"><span class="linenos">315</span></a>
</span><span id="ImageGalleryController.computePageNumberOnGalleryModeChange-316"><a href="#ImageGalleryController.computePageNumberOnGalleryModeChange-316"><span class="linenos">316</span></a>        <span class="n">newPageNumber</span> <span class="o">=</span> <span class="n">selectedImage</span><span class="o">//</span><span class="n">newNbImagePerPage</span>
</span><span id="ImageGalleryController.computePageNumberOnGalleryModeChange-317"><a href="#ImageGalleryController.computePageNumberOnGalleryModeChange-317"><span class="linenos">317</span></a>
</span><span id="ImageGalleryController.computePageNumberOnGalleryModeChange-318"><a href="#ImageGalleryController.computePageNumberOnGalleryModeChange-318"><span class="linenos">318</span></a>        <span class="k">return</span> <span class="n">newPageNumber</span>
</span></pre></div>


            <div class="docstring"><p>Calculate the appropriate page number when changing gallery modes.</p>

<p>When switching between different gallery layouts, this method ensures
the currently selected or viewed image remains visible by calculating
the correct page number for the new layout.</p>

<p>Args:
    newGalleryMode (GalleryMode): Target gallery layout mode</p>

<p>Returns:
    int: Calculated page number for the new gallery mode</p>
</div>


                            </div>
                            <div id="ImageGalleryController.callBackButton_1x1" class="classattr">
                                        <input id="ImageGalleryController.callBackButton_1x1-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">callBackButton_1x1</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ImageGalleryController.callBackButton_1x1-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ImageGalleryController.callBackButton_1x1"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ImageGalleryController.callBackButton_1x1-320"><a href="#ImageGalleryController.callBackButton_1x1-320"><span class="linenos">320</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackButton_1x1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ImageGalleryController.callBackButton_1x1-321"><a href="#ImageGalleryController.callBackButton_1x1-321"><span class="linenos">321</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ImageGalleryController.callBackButton_1x1-322"><a href="#ImageGalleryController.callBackButton_1x1-322"><span class="linenos">322</span></a><span class="sd">        Switch gallery to single image view mode (1×1).</span>
</span><span id="ImageGalleryController.callBackButton_1x1-323"><a href="#ImageGalleryController.callBackButton_1x1-323"><span class="linenos">323</span></a><span class="sd">        </span>
</span><span id="ImageGalleryController.callBackButton_1x1-324"><a href="#ImageGalleryController.callBackButton_1x1-324"><span class="linenos">324</span></a><span class="sd">        Changes the gallery layout to display one image at a time, suitable</span>
</span><span id="ImageGalleryController.callBackButton_1x1-325"><a href="#ImageGalleryController.callBackButton_1x1-325"><span class="linenos">325</span></a><span class="sd">        for detailed viewing and editing. Recalculates pagination and updates</span>
</span><span id="ImageGalleryController.callBackButton_1x1-326"><a href="#ImageGalleryController.callBackButton_1x1-326"><span class="linenos">326</span></a><span class="sd">        the display.</span>
</span><span id="ImageGalleryController.callBackButton_1x1-327"><a href="#ImageGalleryController.callBackButton_1x1-327"><span class="linenos">327</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ImageGalleryController.callBackButton_1x1-328"><a href="#ImageGalleryController.callBackButton_1x1-328"><span class="linenos">328</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">shapeMode</span> <span class="o">!=</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_1x1</span><span class="p">:</span>
</span><span id="ImageGalleryController.callBackButton_1x1-329"><a href="#ImageGalleryController.callBackButton_1x1-329"><span class="linenos">329</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">resetGridLayoutWidgets</span><span class="p">()</span>
</span><span id="ImageGalleryController.callBackButton_1x1-330"><a href="#ImageGalleryController.callBackButton_1x1-330"><span class="linenos">330</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">pageNumber</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computePageNumberOnGalleryModeChange</span><span class="p">(</span><span class="n">GalleryMode</span><span class="o">.</span><span class="n">_1x1</span><span class="p">)</span>
</span><span id="ImageGalleryController.callBackButton_1x1-331"><a href="#ImageGalleryController.callBackButton_1x1-331"><span class="linenos">331</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">shapeMode</span> <span class="o">=</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_1x1</span>
</span><span id="ImageGalleryController.callBackButton_1x1-332"><a href="#ImageGalleryController.callBackButton_1x1-332"><span class="linenos">332</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">buildGridLayoutWidgets</span><span class="p">()</span>
</span><span id="ImageGalleryController.callBackButton_1x1-333"><a href="#ImageGalleryController.callBackButton_1x1-333"><span class="linenos">333</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">updateImages</span><span class="p">()</span>
</span><span id="ImageGalleryController.callBackButton_1x1-334"><a href="#ImageGalleryController.callBackButton_1x1-334"><span class="linenos">334</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">loadPage</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">pageNumber</span><span class="p">)</span>
</span><span id="ImageGalleryController.callBackButton_1x1-335"><a href="#ImageGalleryController.callBackButton_1x1-335"><span class="linenos">335</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">repaint</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Switch gallery to single image view mode (1×1).</p>

<p>Changes the gallery layout to display one image at a time, suitable
for detailed viewing and editing. Recalculates pagination and updates
the display.</p>
</div>


                            </div>
                            <div id="ImageGalleryController.callBackButton_3x2" class="classattr">
                                        <input id="ImageGalleryController.callBackButton_3x2-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">callBackButton_3x2</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ImageGalleryController.callBackButton_3x2-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ImageGalleryController.callBackButton_3x2"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ImageGalleryController.callBackButton_3x2-337"><a href="#ImageGalleryController.callBackButton_3x2-337"><span class="linenos">337</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackButton_3x2</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
</span><span id="ImageGalleryController.callBackButton_3x2-338"><a href="#ImageGalleryController.callBackButton_3x2-338"><span class="linenos">338</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ImageGalleryController.callBackButton_3x2-339"><a href="#ImageGalleryController.callBackButton_3x2-339"><span class="linenos">339</span></a><span class="sd">        Switch gallery to 3×2 grid view mode.</span>
</span><span id="ImageGalleryController.callBackButton_3x2-340"><a href="#ImageGalleryController.callBackButton_3x2-340"><span class="linenos">340</span></a><span class="sd">        </span>
</span><span id="ImageGalleryController.callBackButton_3x2-341"><a href="#ImageGalleryController.callBackButton_3x2-341"><span class="linenos">341</span></a><span class="sd">        Changes the gallery layout to display 6 images in a 3×2 grid,</span>
</span><span id="ImageGalleryController.callBackButton_3x2-342"><a href="#ImageGalleryController.callBackButton_3x2-342"><span class="linenos">342</span></a><span class="sd">        suitable for browsing multiple images while maintaining reasonable</span>
</span><span id="ImageGalleryController.callBackButton_3x2-343"><a href="#ImageGalleryController.callBackButton_3x2-343"><span class="linenos">343</span></a><span class="sd">        image size for preview.</span>
</span><span id="ImageGalleryController.callBackButton_3x2-344"><a href="#ImageGalleryController.callBackButton_3x2-344"><span class="linenos">344</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ImageGalleryController.callBackButton_3x2-345"><a href="#ImageGalleryController.callBackButton_3x2-345"><span class="linenos">345</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">shapeMode</span> <span class="o">!=</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_3x2</span><span class="p">:</span>
</span><span id="ImageGalleryController.callBackButton_3x2-346"><a href="#ImageGalleryController.callBackButton_3x2-346"><span class="linenos">346</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">resetGridLayoutWidgets</span><span class="p">()</span>
</span><span id="ImageGalleryController.callBackButton_3x2-347"><a href="#ImageGalleryController.callBackButton_3x2-347"><span class="linenos">347</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">pageNumber</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computePageNumberOnGalleryModeChange</span><span class="p">(</span><span class="n">GalleryMode</span><span class="o">.</span><span class="n">_3x2</span><span class="p">)</span>
</span><span id="ImageGalleryController.callBackButton_3x2-348"><a href="#ImageGalleryController.callBackButton_3x2-348"><span class="linenos">348</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">shapeMode</span> <span class="o">=</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_3x2</span>
</span><span id="ImageGalleryController.callBackButton_3x2-349"><a href="#ImageGalleryController.callBackButton_3x2-349"><span class="linenos">349</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">buildGridLayoutWidgets</span><span class="p">()</span>
</span><span id="ImageGalleryController.callBackButton_3x2-350"><a href="#ImageGalleryController.callBackButton_3x2-350"><span class="linenos">350</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">updateImages</span><span class="p">()</span>
</span><span id="ImageGalleryController.callBackButton_3x2-351"><a href="#ImageGalleryController.callBackButton_3x2-351"><span class="linenos">351</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">loadPage</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">pageNumber</span><span class="p">)</span>
</span><span id="ImageGalleryController.callBackButton_3x2-352"><a href="#ImageGalleryController.callBackButton_3x2-352"><span class="linenos">352</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">repaint</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Switch gallery to 3×2 grid view mode.</p>

<p>Changes the gallery layout to display 6 images in a 3×2 grid,
suitable for browsing multiple images while maintaining reasonable
image size for preview.</p>
</div>


                            </div>
                            <div id="ImageGalleryController.callBackButton_6x4" class="classattr">
                                        <input id="ImageGalleryController.callBackButton_6x4-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">callBackButton_6x4</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ImageGalleryController.callBackButton_6x4-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ImageGalleryController.callBackButton_6x4"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ImageGalleryController.callBackButton_6x4-354"><a href="#ImageGalleryController.callBackButton_6x4-354"><span class="linenos">354</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackButton_6x4</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
</span><span id="ImageGalleryController.callBackButton_6x4-355"><a href="#ImageGalleryController.callBackButton_6x4-355"><span class="linenos">355</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ImageGalleryController.callBackButton_6x4-356"><a href="#ImageGalleryController.callBackButton_6x4-356"><span class="linenos">356</span></a><span class="sd">        Switch gallery to 6×4 grid view mode.</span>
</span><span id="ImageGalleryController.callBackButton_6x4-357"><a href="#ImageGalleryController.callBackButton_6x4-357"><span class="linenos">357</span></a><span class="sd">        </span>
</span><span id="ImageGalleryController.callBackButton_6x4-358"><a href="#ImageGalleryController.callBackButton_6x4-358"><span class="linenos">358</span></a><span class="sd">        Changes the gallery layout to display 24 images in a 6×4 grid,</span>
</span><span id="ImageGalleryController.callBackButton_6x4-359"><a href="#ImageGalleryController.callBackButton_6x4-359"><span class="linenos">359</span></a><span class="sd">        suitable for quick browsing of large image collections with</span>
</span><span id="ImageGalleryController.callBackButton_6x4-360"><a href="#ImageGalleryController.callBackButton_6x4-360"><span class="linenos">360</span></a><span class="sd">        smaller thumbnail sizes.</span>
</span><span id="ImageGalleryController.callBackButton_6x4-361"><a href="#ImageGalleryController.callBackButton_6x4-361"><span class="linenos">361</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ImageGalleryController.callBackButton_6x4-362"><a href="#ImageGalleryController.callBackButton_6x4-362"><span class="linenos">362</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">shapeMode</span> <span class="o">!=</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_6x4</span><span class="p">:</span>
</span><span id="ImageGalleryController.callBackButton_6x4-363"><a href="#ImageGalleryController.callBackButton_6x4-363"><span class="linenos">363</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">resetGridLayoutWidgets</span><span class="p">()</span>
</span><span id="ImageGalleryController.callBackButton_6x4-364"><a href="#ImageGalleryController.callBackButton_6x4-364"><span class="linenos">364</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">pageNumber</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computePageNumberOnGalleryModeChange</span><span class="p">(</span><span class="n">GalleryMode</span><span class="o">.</span><span class="n">_6x4</span><span class="p">)</span>
</span><span id="ImageGalleryController.callBackButton_6x4-365"><a href="#ImageGalleryController.callBackButton_6x4-365"><span class="linenos">365</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">shapeMode</span> <span class="o">=</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_6x4</span>
</span><span id="ImageGalleryController.callBackButton_6x4-366"><a href="#ImageGalleryController.callBackButton_6x4-366"><span class="linenos">366</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">buildGridLayoutWidgets</span><span class="p">()</span>
</span><span id="ImageGalleryController.callBackButton_6x4-367"><a href="#ImageGalleryController.callBackButton_6x4-367"><span class="linenos">367</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">updateImages</span><span class="p">()</span>
</span><span id="ImageGalleryController.callBackButton_6x4-368"><a href="#ImageGalleryController.callBackButton_6x4-368"><span class="linenos">368</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">loadPage</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">pageNumber</span><span class="p">)</span>
</span><span id="ImageGalleryController.callBackButton_6x4-369"><a href="#ImageGalleryController.callBackButton_6x4-369"><span class="linenos">369</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">repaint</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Switch gallery to 6×4 grid view mode.</p>

<p>Changes the gallery layout to display 24 images in a 6×4 grid,
suitable for quick browsing of large image collections with
smaller thumbnail sizes.</p>
</div>


                            </div>
                            <div id="ImageGalleryController.callBackButton_9x6" class="classattr">
                                        <input id="ImageGalleryController.callBackButton_9x6-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">callBackButton_9x6</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ImageGalleryController.callBackButton_9x6-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ImageGalleryController.callBackButton_9x6"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ImageGalleryController.callBackButton_9x6-371"><a href="#ImageGalleryController.callBackButton_9x6-371"><span class="linenos">371</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackButton_9x6</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ImageGalleryController.callBackButton_9x6-372"><a href="#ImageGalleryController.callBackButton_9x6-372"><span class="linenos">372</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ImageGalleryController.callBackButton_9x6-373"><a href="#ImageGalleryController.callBackButton_9x6-373"><span class="linenos">373</span></a><span class="sd">        Switch gallery to 9×6 grid view mode.</span>
</span><span id="ImageGalleryController.callBackButton_9x6-374"><a href="#ImageGalleryController.callBackButton_9x6-374"><span class="linenos">374</span></a><span class="sd">        </span>
</span><span id="ImageGalleryController.callBackButton_9x6-375"><a href="#ImageGalleryController.callBackButton_9x6-375"><span class="linenos">375</span></a><span class="sd">        Changes the gallery layout to display 54 images in a 9×6 grid,</span>
</span><span id="ImageGalleryController.callBackButton_9x6-376"><a href="#ImageGalleryController.callBackButton_9x6-376"><span class="linenos">376</span></a><span class="sd">        suitable for overview browsing of very large image collections</span>
</span><span id="ImageGalleryController.callBackButton_9x6-377"><a href="#ImageGalleryController.callBackButton_9x6-377"><span class="linenos">377</span></a><span class="sd">        with small thumbnail sizes.</span>
</span><span id="ImageGalleryController.callBackButton_9x6-378"><a href="#ImageGalleryController.callBackButton_9x6-378"><span class="linenos">378</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ImageGalleryController.callBackButton_9x6-379"><a href="#ImageGalleryController.callBackButton_9x6-379"><span class="linenos">379</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">shapeMode</span> <span class="o">!=</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_9x6</span><span class="p">:</span>
</span><span id="ImageGalleryController.callBackButton_9x6-380"><a href="#ImageGalleryController.callBackButton_9x6-380"><span class="linenos">380</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">resetGridLayoutWidgets</span><span class="p">()</span>
</span><span id="ImageGalleryController.callBackButton_9x6-381"><a href="#ImageGalleryController.callBackButton_9x6-381"><span class="linenos">381</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">pageNumber</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computePageNumberOnGalleryModeChange</span><span class="p">(</span><span class="n">GalleryMode</span><span class="o">.</span><span class="n">_9x6</span><span class="p">)</span>
</span><span id="ImageGalleryController.callBackButton_9x6-382"><a href="#ImageGalleryController.callBackButton_9x6-382"><span class="linenos">382</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">shapeMode</span> <span class="o">=</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_9x6</span>
</span><span id="ImageGalleryController.callBackButton_9x6-383"><a href="#ImageGalleryController.callBackButton_9x6-383"><span class="linenos">383</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">buildGridLayoutWidgets</span><span class="p">()</span>
</span><span id="ImageGalleryController.callBackButton_9x6-384"><a href="#ImageGalleryController.callBackButton_9x6-384"><span class="linenos">384</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">updateImages</span><span class="p">()</span>
</span><span id="ImageGalleryController.callBackButton_9x6-385"><a href="#ImageGalleryController.callBackButton_9x6-385"><span class="linenos">385</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">loadPage</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">pageNumber</span><span class="p">)</span>
</span><span id="ImageGalleryController.callBackButton_9x6-386"><a href="#ImageGalleryController.callBackButton_9x6-386"><span class="linenos">386</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">repaint</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Switch gallery to 9×6 grid view mode.</p>

<p>Changes the gallery layout to display 54 images in a 9×6 grid,
suitable for overview browsing of very large image collections
with small thumbnail sizes.</p>
</div>


                            </div>
                            <div id="ImageGalleryController.callBackButton_2x1" class="classattr">
                                        <input id="ImageGalleryController.callBackButton_2x1-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">callBackButton_2x1</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ImageGalleryController.callBackButton_2x1-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ImageGalleryController.callBackButton_2x1"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ImageGalleryController.callBackButton_2x1-388"><a href="#ImageGalleryController.callBackButton_2x1-388"><span class="linenos">388</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackButton_2x1</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ImageGalleryController.callBackButton_2x1-389"><a href="#ImageGalleryController.callBackButton_2x1-389"><span class="linenos">389</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ImageGalleryController.callBackButton_2x1-390"><a href="#ImageGalleryController.callBackButton_2x1-390"><span class="linenos">390</span></a><span class="sd">        Switch gallery to 2×1 comparison view mode.</span>
</span><span id="ImageGalleryController.callBackButton_2x1-391"><a href="#ImageGalleryController.callBackButton_2x1-391"><span class="linenos">391</span></a><span class="sd">        </span>
</span><span id="ImageGalleryController.callBackButton_2x1-392"><a href="#ImageGalleryController.callBackButton_2x1-392"><span class="linenos">392</span></a><span class="sd">        Changes the gallery layout to display 2 images side by side,</span>
</span><span id="ImageGalleryController.callBackButton_2x1-393"><a href="#ImageGalleryController.callBackButton_2x1-393"><span class="linenos">393</span></a><span class="sd">        ideal for comparing different processing results or comparing</span>
</span><span id="ImageGalleryController.callBackButton_2x1-394"><a href="#ImageGalleryController.callBackButton_2x1-394"><span class="linenos">394</span></a><span class="sd">        before/after versions of images.</span>
</span><span id="ImageGalleryController.callBackButton_2x1-395"><a href="#ImageGalleryController.callBackButton_2x1-395"><span class="linenos">395</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ImageGalleryController.callBackButton_2x1-396"><a href="#ImageGalleryController.callBackButton_2x1-396"><span class="linenos">396</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">shapeMode</span> <span class="o">!=</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_2x1</span><span class="p">:</span>
</span><span id="ImageGalleryController.callBackButton_2x1-397"><a href="#ImageGalleryController.callBackButton_2x1-397"><span class="linenos">397</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">resetGridLayoutWidgets</span><span class="p">()</span>
</span><span id="ImageGalleryController.callBackButton_2x1-398"><a href="#ImageGalleryController.callBackButton_2x1-398"><span class="linenos">398</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">pageNumber</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">computePageNumberOnGalleryModeChange</span><span class="p">(</span><span class="n">GalleryMode</span><span class="o">.</span><span class="n">_2x1</span><span class="p">)</span>
</span><span id="ImageGalleryController.callBackButton_2x1-399"><a href="#ImageGalleryController.callBackButton_2x1-399"><span class="linenos">399</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">shapeMode</span> <span class="o">=</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">_2x1</span>
</span><span id="ImageGalleryController.callBackButton_2x1-400"><a href="#ImageGalleryController.callBackButton_2x1-400"><span class="linenos">400</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">buildGridLayoutWidgets</span><span class="p">()</span>
</span><span id="ImageGalleryController.callBackButton_2x1-401"><a href="#ImageGalleryController.callBackButton_2x1-401"><span class="linenos">401</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">updateImages</span><span class="p">()</span>
</span><span id="ImageGalleryController.callBackButton_2x1-402"><a href="#ImageGalleryController.callBackButton_2x1-402"><span class="linenos">402</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">loadPage</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">pageNumber</span><span class="p">)</span>
</span><span id="ImageGalleryController.callBackButton_2x1-403"><a href="#ImageGalleryController.callBackButton_2x1-403"><span class="linenos">403</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">repaint</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Switch gallery to 2×1 comparison view mode.</p>

<p>Changes the gallery layout to display 2 images side by side,
ideal for comparing different processing results or comparing
before/after versions of images.</p>
</div>


                            </div>
                            <div id="ImageGalleryController.selectImage" class="classattr">
                                        <input id="ImageGalleryController.selectImage-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">selectImage</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="nb">id</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ImageGalleryController.selectImage-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ImageGalleryController.selectImage"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ImageGalleryController.selectImage-405"><a href="#ImageGalleryController.selectImage-405"><span class="linenos">405</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">selectImage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
</span><span id="ImageGalleryController.selectImage-406"><a href="#ImageGalleryController.selectImage-406"><span class="linenos">406</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ImageGalleryController.selectImage-407"><a href="#ImageGalleryController.selectImage-407"><span class="linenos">407</span></a><span class="sd">        Handle selection of an image in the gallery.</span>
</span><span id="ImageGalleryController.selectImage-408"><a href="#ImageGalleryController.selectImage-408"><span class="linenos">408</span></a><span class="sd">        </span>
</span><span id="ImageGalleryController.selectImage-409"><a href="#ImageGalleryController.selectImage-409"><span class="linenos">409</span></a><span class="sd">        Processes user selection of an image and updates the editing interface</span>
</span><span id="ImageGalleryController.selectImage-410"><a href="#ImageGalleryController.selectImage-410"><span class="linenos">410</span></a><span class="sd">        to work with the selected image&#39;s processing pipeline.</span>
</span><span id="ImageGalleryController.selectImage-411"><a href="#ImageGalleryController.selectImage-411"><span class="linenos">411</span></a><span class="sd">        </span>
</span><span id="ImageGalleryController.selectImage-412"><a href="#ImageGalleryController.selectImage-412"><span class="linenos">412</span></a><span class="sd">        Args:</span>
</span><span id="ImageGalleryController.selectImage-413"><a href="#ImageGalleryController.selectImage-413"><span class="linenos">413</span></a><span class="sd">            id (int): Index of the selected image within the current page</span>
</span><span id="ImageGalleryController.selectImage-414"><a href="#ImageGalleryController.selectImage-414"><span class="linenos">414</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ImageGalleryController.selectImage-415"><a href="#ImageGalleryController.selectImage-415"><span class="linenos">415</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; ImageGalleryController.selectImage()&quot;</span><span class="p">)</span>
</span><span id="ImageGalleryController.selectImage-416"><a href="#ImageGalleryController.selectImage-416"><span class="linenos">416</span></a>
</span><span id="ImageGalleryController.selectImage-417"><a href="#ImageGalleryController.selectImage-417"><span class="linenos">417</span></a>        <span class="n">nbImagePage</span> <span class="o">=</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">nbRow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">shapeMode</span><span class="p">)</span><span class="o">*</span><span class="n">GalleryMode</span><span class="o">.</span><span class="n">nbCol</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">shapeMode</span><span class="p">)</span>
</span><span id="ImageGalleryController.selectImage-418"><a href="#ImageGalleryController.selectImage-418"><span class="linenos">418</span></a>        <span class="n">idxImage</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">pageNumber</span><span class="o">*</span><span class="n">nbImagePage</span><span class="o">+</span><span class="nb">id</span>
</span><span id="ImageGalleryController.selectImage-419"><a href="#ImageGalleryController.selectImage-419"><span class="linenos">419</span></a>        <span class="c1"># check id</span>
</span><span id="ImageGalleryController.selectImage-420"><a href="#ImageGalleryController.selectImage-420"><span class="linenos">420</span></a>        <span class="k">if</span> <span class="p">(</span><span class="n">idxImage</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">processPipes</span><span class="p">)):</span>
</span><span id="ImageGalleryController.selectImage-421"><a href="#ImageGalleryController.selectImage-421"><span class="linenos">421</span></a>            <span class="c1"># update selected image</span>
</span><span id="ImageGalleryController.selectImage-422"><a href="#ImageGalleryController.selectImage-422"><span class="linenos">422</span></a>            <span class="n">processPipe</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">processPipes</span><span class="p">[</span><span class="n">idxImage</span><span class="p">]</span>
</span><span id="ImageGalleryController.selectImage-423"><a href="#ImageGalleryController.selectImage-423"><span class="linenos">423</span></a>            <span class="k">if</span> <span class="n">processPipe</span><span class="p">:</span>
</span><span id="ImageGalleryController.selectImage-424"><a href="#ImageGalleryController.selectImage-424"><span class="linenos">424</span></a>                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">dock</span><span class="o">.</span><span class="n">setProcessPipe</span><span class="p">(</span><span class="n">processPipe</span><span class="p">):</span>
</span><span id="ImageGalleryController.selectImage-425"><a href="#ImageGalleryController.selectImage-425"><span class="linenos">425</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setSelectedImage</span><span class="p">(</span><span class="n">idxImage</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Handle selection of an image in the gallery.</p>

<p>Processes user selection of an image and updates the editing interface
to work with the selected image's processing pipeline.</p>

<p>Args:
    id (int): Index of the selected image within the current page</p>
</div>


                            </div>
                            <div id="ImageGalleryController.getSelectedProcessPipe" class="classattr">
                                        <input id="ImageGalleryController.getSelectedProcessPipe-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">getSelectedProcessPipe</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ImageGalleryController.getSelectedProcessPipe-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ImageGalleryController.getSelectedProcessPipe"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ImageGalleryController.getSelectedProcessPipe-427"><a href="#ImageGalleryController.getSelectedProcessPipe-427"><span class="linenos">427</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getSelectedProcessPipe</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ImageGalleryController.getSelectedProcessPipe-428"><a href="#ImageGalleryController.getSelectedProcessPipe-428"><span class="linenos">428</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>  <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; ImageGalleryController.getSelectedProcessPipe()&quot;</span><span class="p">)</span>
</span><span id="ImageGalleryController.getSelectedProcessPipe-429"><a href="#ImageGalleryController.getSelectedProcessPipe-429"><span class="linenos">429</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getSelectedProcessPipe</span><span class="p">()</span>
</span></pre></div>


    

                            </div>
                            <div id="ImageGalleryController.setProcessPipeWidgetQPixmap" class="classattr">
                                        <input id="ImageGalleryController.setProcessPipeWidgetQPixmap-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">setProcessPipeWidgetQPixmap</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">qPixmap</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ImageGalleryController.setProcessPipeWidgetQPixmap-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ImageGalleryController.setProcessPipeWidgetQPixmap"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ImageGalleryController.setProcessPipeWidgetQPixmap-431"><a href="#ImageGalleryController.setProcessPipeWidgetQPixmap-431"><span class="linenos">431</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setProcessPipeWidgetQPixmap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">qPixmap</span><span class="p">):</span>
</span><span id="ImageGalleryController.setProcessPipeWidgetQPixmap-432"><a href="#ImageGalleryController.setProcessPipeWidgetQPixmap-432"><span class="linenos">432</span></a>        <span class="n">idxProcessPipe</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">selectedImage</span><span class="p">()</span>
</span><span id="ImageGalleryController.setProcessPipeWidgetQPixmap-433"><a href="#ImageGalleryController.setProcessPipeWidgetQPixmap-433"><span class="linenos">433</span></a>        <span class="n">nbImagePage</span> <span class="o">=</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">nbRow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">shapeMode</span><span class="p">)</span><span class="o">*</span><span class="n">GalleryMode</span><span class="o">.</span><span class="n">nbCol</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">shapeMode</span><span class="p">)</span>
</span><span id="ImageGalleryController.setProcessPipeWidgetQPixmap-434"><a href="#ImageGalleryController.setProcessPipeWidgetQPixmap-434"><span class="linenos">434</span></a>        <span class="n">idxImageWidget</span> <span class="o">=</span> <span class="n">idxProcessPipe</span><span class="o">%</span><span class="n">nbImagePage</span>
</span><span id="ImageGalleryController.setProcessPipeWidgetQPixmap-435"><a href="#ImageGalleryController.setProcessPipeWidgetQPixmap-435"><span class="linenos">435</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>  <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; &gt;&gt; ImageGalleryController.setProcessPipeWidgetQPixmap(...)[ image id:&quot;</span><span class="p">,</span><span class="n">idxProcessPipe</span><span class="p">,</span><span class="s2">&quot;&gt;&gt; image widget controller:&quot;</span><span class="p">,</span><span class="n">idxImageWidget</span><span class="p">,</span><span class="s2">&quot;]&quot;</span><span class="p">)</span>
</span><span id="ImageGalleryController.setProcessPipeWidgetQPixmap-436"><a href="#ImageGalleryController.setProcessPipeWidgetQPixmap-436"><span class="linenos">436</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">imagesControllers</span><span class="p">[</span><span class="n">idxImageWidget</span><span class="p">]</span><span class="o">.</span><span class="n">setQPixmap</span><span class="p">(</span><span class="n">qPixmap</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="ImageGalleryController.save" class="classattr">
                                        <input id="ImageGalleryController.save-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">save</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ImageGalleryController.save-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ImageGalleryController.save"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ImageGalleryController.save-438"><a href="#ImageGalleryController.save-438"><span class="linenos">438</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">save</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ImageGalleryController.save-439"><a href="#ImageGalleryController.save-439"><span class="linenos">439</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; ImageGalleryController.save()&quot;</span><span class="p">)</span>
</span><span id="ImageGalleryController.save-440"><a href="#ImageGalleryController.save-440"><span class="linenos">440</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span></pre></div>


    

                            </div>
                            <div id="ImageGalleryController.currentPage" class="classattr">
                                        <input id="ImageGalleryController.currentPage-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">currentPage</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ImageGalleryController.currentPage-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ImageGalleryController.currentPage"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ImageGalleryController.currentPage-442"><a href="#ImageGalleryController.currentPage-442"><span class="linenos">442</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">currentPage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">currentPage</span><span class="p">()</span>
</span></pre></div>


    

                            </div>
                            <div id="ImageGalleryController.pageIdx" class="classattr">
                                        <input id="ImageGalleryController.pageIdx-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">pageIdx</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ImageGalleryController.pageIdx-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ImageGalleryController.pageIdx"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ImageGalleryController.pageIdx-444"><a href="#ImageGalleryController.pageIdx-444"><span class="linenos">444</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">pageIdx</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ImageGalleryController.pageIdx-445"><a href="#ImageGalleryController.pageIdx-445"><span class="linenos">445</span></a>        <span class="n">nb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">currentPage</span><span class="p">()</span>
</span><span id="ImageGalleryController.pageIdx-446"><a href="#ImageGalleryController.pageIdx-446"><span class="linenos">446</span></a>        <span class="n">nbImagePage</span> <span class="o">=</span> <span class="n">GalleryMode</span><span class="o">.</span><span class="n">nbRow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">shapeMode</span><span class="p">)</span><span class="o">*</span><span class="n">GalleryMode</span><span class="o">.</span><span class="n">nbCol</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">shapeMode</span><span class="p">)</span>
</span><span id="ImageGalleryController.pageIdx-447"><a href="#ImageGalleryController.pageIdx-447"><span class="linenos">447</span></a>        <span class="k">return</span> <span class="p">(</span><span class="n">nb</span><span class="o">*</span><span class="n">nbImagePage</span><span class="p">),</span> <span class="p">((</span><span class="n">nb</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="n">nbImagePage</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="ImageGalleryController.getFilenamesOfCurrentPage" class="classattr">
                                        <input id="ImageGalleryController.getFilenamesOfCurrentPage-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">getFilenamesOfCurrentPage</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ImageGalleryController.getFilenamesOfCurrentPage-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ImageGalleryController.getFilenamesOfCurrentPage"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ImageGalleryController.getFilenamesOfCurrentPage-449"><a href="#ImageGalleryController.getFilenamesOfCurrentPage-449"><span class="linenos">449</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getFilenamesOfCurrentPage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getFilenamesOfCurrentPage</span><span class="p">()</span>
</span></pre></div>


    

                            </div>
                            <div id="ImageGalleryController.getProcessPipeById" class="classattr">
                                        <input id="ImageGalleryController.getProcessPipeById-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">getProcessPipeById</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">i</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ImageGalleryController.getProcessPipeById-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ImageGalleryController.getProcessPipeById"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ImageGalleryController.getProcessPipeById-451"><a href="#ImageGalleryController.getProcessPipeById-451"><span class="linenos">451</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getProcessPipeById</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">i</span><span class="p">)</span> <span class="p">:</span> <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getProcessPipeById</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
</span></pre></div>


    

                            </div>
                            <div id="ImageGalleryController.getProcessPipes" class="classattr">
                                        <input id="ImageGalleryController.getProcessPipes-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">getProcessPipes</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ImageGalleryController.getProcessPipes-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ImageGalleryController.getProcessPipes"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ImageGalleryController.getProcessPipes-453"><a href="#ImageGalleryController.getProcessPipes-453"><span class="linenos">453</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getProcessPipes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">processPipes</span>
</span></pre></div>


    

                            </div>
                </section>
                <section id="AppController">
                            <input id="AppController-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">AppController</span>:

                <label class="view-source-button" for="AppController-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AppController"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AppController-457"><a href="#AppController-457"><span class="linenos">457</span></a><span class="k">class</span><span class="w"> </span><span class="nc">AppController</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
</span><span id="AppController-458"><a href="#AppController-458"><span class="linenos">458</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AppController-459"><a href="#AppController-459"><span class="linenos">459</span></a><span class="sd">    Main application controller implementing the MVC pattern.</span>
</span><span id="AppController-460"><a href="#AppController-460"><span class="linenos">460</span></a><span class="sd">    </span>
</span><span id="AppController-461"><a href="#AppController-461"><span class="linenos">461</span></a><span class="sd">    This class serves as the central controller for the uHDR application,</span>
</span><span id="AppController-462"><a href="#AppController-462"><span class="linenos">462</span></a><span class="sd">    managing the main window, coordinating between different components,</span>
</span><span id="AppController-463"><a href="#AppController-463"><span class="linenos">463</span></a><span class="sd">    and handling high-level application operations like file management,</span>
</span><span id="AppController-464"><a href="#AppController-464"><span class="linenos">464</span></a><span class="sd">    HDR display, and image export functionality.</span>
</span><span id="AppController-465"><a href="#AppController-465"><span class="linenos">465</span></a><span class="sd">    </span>
</span><span id="AppController-466"><a href="#AppController-466"><span class="linenos">466</span></a><span class="sd">    The AppController orchestrates interactions between the image gallery,</span>
</span><span id="AppController-467"><a href="#AppController-467"><span class="linenos">467</span></a><span class="sd">    editing interface, HDR viewer, and manages the application&#39;s workflow</span>
</span><span id="AppController-468"><a href="#AppController-468"><span class="linenos">468</span></a><span class="sd">    from image loading to final export operations.</span>
</span><span id="AppController-469"><a href="#AppController-469"><span class="linenos">469</span></a><span class="sd">    </span>
</span><span id="AppController-470"><a href="#AppController-470"><span class="linenos">470</span></a><span class="sd">    Attributes:</span>
</span><span id="AppController-471"><a href="#AppController-471"><span class="linenos">471</span></a><span class="sd">        - screenSize (list): Available screen dimensions for multi-monitor support</span>
</span><span id="AppController-472"><a href="#AppController-472"><span class="linenos">472</span></a><span class="sd">        - hdrDisplay (HDRviewerController): HDR image display controller</span>
</span><span id="AppController-473"><a href="#AppController-473"><span class="linenos">473</span></a><span class="sd">        - view (view.AppView): Main application view component</span>
</span><span id="AppController-474"><a href="#AppController-474"><span class="linenos">474</span></a><span class="sd">        - model (model.AppModel): Main application data model</span>
</span><span id="AppController-475"><a href="#AppController-475"><span class="linenos">475</span></a><span class="sd">        - dirName (str): Currently selected directory path</span>
</span><span id="AppController-476"><a href="#AppController-476"><span class="linenos">476</span></a><span class="sd">        - imagesName (list): List of image filenames in current directory</span>
</span><span id="AppController-477"><a href="#AppController-477"><span class="linenos">477</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="AppController-478"><a href="#AppController-478"><span class="linenos">478</span></a>
</span><span id="AppController-479"><a href="#AppController-479"><span class="linenos">479</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app</span><span class="p">):</span>
</span><span id="AppController-480"><a href="#AppController-480"><span class="linenos">480</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AppController-481"><a href="#AppController-481"><span class="linenos">481</span></a><span class="sd">        Initialize the main application controller.</span>
</span><span id="AppController-482"><a href="#AppController-482"><span class="linenos">482</span></a><span class="sd">        </span>
</span><span id="AppController-483"><a href="#AppController-483"><span class="linenos">483</span></a><span class="sd">        Sets up the application&#39;s core components including screen detection,</span>
</span><span id="AppController-484"><a href="#AppController-484"><span class="linenos">484</span></a><span class="sd">        HDR display initialization, and main view creation. Establishes the</span>
</span><span id="AppController-485"><a href="#AppController-485"><span class="linenos">485</span></a><span class="sd">        foundation for the complete HDR editing workflow.</span>
</span><span id="AppController-486"><a href="#AppController-486"><span class="linenos">486</span></a><span class="sd">        </span>
</span><span id="AppController-487"><a href="#AppController-487"><span class="linenos">487</span></a><span class="sd">        Args:</span>
</span><span id="AppController-488"><a href="#AppController-488"><span class="linenos">488</span></a><span class="sd">            app (QApplication): PyQt5 application instance for screen detection</span>
</span><span id="AppController-489"><a href="#AppController-489"><span class="linenos">489</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AppController-490"><a href="#AppController-490"><span class="linenos">490</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; AppController.__init__()&quot;</span><span class="p">)</span>
</span><span id="AppController-491"><a href="#AppController-491"><span class="linenos">491</span></a>
</span><span id="AppController-492"><a href="#AppController-492"><span class="linenos">492</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">screenSize</span> <span class="o">=</span> <span class="n">getScreenSize</span><span class="p">(</span><span class="n">app</span><span class="p">)</span><span class="c1"># get screens size</span>
</span><span id="AppController-493"><a href="#AppController-493"><span class="linenos">493</span></a>
</span><span id="AppController-494"><a href="#AppController-494"><span class="linenos">494</span></a>        <span class="c1"># attributes</span>
</span><span id="AppController-495"><a href="#AppController-495"><span class="linenos">495</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">hdrDisplay</span> <span class="o">=</span> <span class="n">HDRviewerController</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="AppController-496"><a href="#AppController-496"><span class="linenos">496</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span>  <span class="n">view</span><span class="o">.</span><span class="n">AppView</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">HDRcontroller</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hdrDisplay</span><span class="p">)</span>                         
</span><span id="AppController-497"><a href="#AppController-497"><span class="linenos">497</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">AppModel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="AppController-498"><a href="#AppController-498"><span class="linenos">498</span></a>
</span><span id="AppController-499"><a href="#AppController-499"><span class="linenos">499</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">dirName</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AppController-500"><a href="#AppController-500"><span class="linenos">500</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">imagesName</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="AppController-501"><a href="#AppController-501"><span class="linenos">501</span></a>        
</span><span id="AppController-502"><a href="#AppController-502"><span class="linenos">502</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span><span id="AppController-503"><a href="#AppController-503"><span class="linenos">503</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="AppController-504"><a href="#AppController-504"><span class="linenos">504</span></a>
</span><span id="AppController-505"><a href="#AppController-505"><span class="linenos">505</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackSelectDir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AppController-506"><a href="#AppController-506"><span class="linenos">506</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AppController-507"><a href="#AppController-507"><span class="linenos">507</span></a><span class="sd">        Open directory selection dialog and load HDR images.</span>
</span><span id="AppController-508"><a href="#AppController-508"><span class="linenos">508</span></a><span class="sd">        </span>
</span><span id="AppController-509"><a href="#AppController-509"><span class="linenos">509</span></a><span class="sd">        Presents a file dialog for directory selection, discovers all supported</span>
</span><span id="AppController-510"><a href="#AppController-510"><span class="linenos">510</span></a><span class="sd">        image files in the chosen directory, and loads them into the gallery.</span>
</span><span id="AppController-511"><a href="#AppController-511"><span class="linenos">511</span></a><span class="sd">        Automatically saves any pending metadata before switching directories.</span>
</span><span id="AppController-512"><a href="#AppController-512"><span class="linenos">512</span></a><span class="sd">        </span>
</span><span id="AppController-513"><a href="#AppController-513"><span class="linenos">513</span></a><span class="sd">        The method handles the complete workflow of:</span>
</span><span id="AppController-514"><a href="#AppController-514"><span class="linenos">514</span></a><span class="sd">        1. Directory selection via QFileDialog</span>
</span><span id="AppController-515"><a href="#AppController-515"><span class="linenos">515</span></a><span class="sd">        2. Saving current image metadata</span>
</span><span id="AppController-516"><a href="#AppController-516"><span class="linenos">516</span></a><span class="sd">        3. Discovering supported image formats</span>
</span><span id="AppController-517"><a href="#AppController-517"><span class="linenos">517</span></a><span class="sd">        4. Loading images into the gallery view</span>
</span><span id="AppController-518"><a href="#AppController-518"><span class="linenos">518</span></a><span class="sd">        5. Resetting HDR display to splash screen</span>
</span><span id="AppController-519"><a href="#AppController-519"><span class="linenos">519</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AppController-520"><a href="#AppController-520"><span class="linenos">520</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; AppController.callBackSelectDir()&quot;</span><span class="p">)</span>
</span><span id="AppController-521"><a href="#AppController-521"><span class="linenos">521</span></a>        <span class="n">dirName</span> <span class="o">=</span> <span class="n">QFileDialog</span><span class="o">.</span><span class="n">getExistingDirectory</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Select Directory&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">directory</span><span class="p">)</span>
</span><span id="AppController-522"><a href="#AppController-522"><span class="linenos">522</span></a>        <span class="k">if</span> <span class="n">dirName</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
</span><span id="AppController-523"><a href="#AppController-523"><span class="linenos">523</span></a>            <span class="c1"># save current images (metadata)</span>
</span><span id="AppController-524"><a href="#AppController-524"><span class="linenos">524</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">imageGalleryController</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span id="AppController-525"><a href="#AppController-525"><span class="linenos">525</span></a>            <span class="c1"># get images in the selected directory</span>
</span><span id="AppController-526"><a href="#AppController-526"><span class="linenos">526</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">imagesName</span> <span class="o">=</span> <span class="p">[];</span> <span class="bp">self</span><span class="o">.</span><span class="n">imagesName</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setDirectory</span><span class="p">(</span><span class="n">dirName</span><span class="p">))</span>
</span><span id="AppController-527"><a href="#AppController-527"><span class="linenos">527</span></a>
</span><span id="AppController-528"><a href="#AppController-528"><span class="linenos">528</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">imageGalleryController</span><span class="o">.</span><span class="n">setImages</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">imagesName</span><span class="p">)</span>
</span><span id="AppController-529"><a href="#AppController-529"><span class="linenos">529</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">hdrDisplay</span><span class="o">.</span><span class="n">displaySplash</span><span class="p">()</span>
</span><span id="AppController-530"><a href="#AppController-530"><span class="linenos">530</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="AppController-531"><a href="#AppController-531"><span class="linenos">531</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackSave</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
</span><span id="AppController-532"><a href="#AppController-532"><span class="linenos">532</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AppController-533"><a href="#AppController-533"><span class="linenos">533</span></a><span class="sd">        Save current processing state and metadata.</span>
</span><span id="AppController-534"><a href="#AppController-534"><span class="linenos">534</span></a><span class="sd">        </span>
</span><span id="AppController-535"><a href="#AppController-535"><span class="linenos">535</span></a><span class="sd">        Triggers the gallery controller to save all current image metadata</span>
</span><span id="AppController-536"><a href="#AppController-536"><span class="linenos">536</span></a><span class="sd">        and processing pipeline states to persistent storage.</span>
</span><span id="AppController-537"><a href="#AppController-537"><span class="linenos">537</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AppController-538"><a href="#AppController-538"><span class="linenos">538</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">imageGalleryController</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span id="AppController-539"><a href="#AppController-539"><span class="linenos">539</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="AppController-540"><a href="#AppController-540"><span class="linenos">540</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackQuit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AppController-541"><a href="#AppController-541"><span class="linenos">541</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AppController-542"><a href="#AppController-542"><span class="linenos">542</span></a><span class="sd">        Handle application shutdown with proper cleanup.</span>
</span><span id="AppController-543"><a href="#AppController-543"><span class="linenos">543</span></a><span class="sd">        </span>
</span><span id="AppController-544"><a href="#AppController-544"><span class="linenos">544</span></a><span class="sd">        Performs clean application exit by saving all metadata, closing</span>
</span><span id="AppController-545"><a href="#AppController-545"><span class="linenos">545</span></a><span class="sd">        HDR display processes, and terminating the application gracefully.</span>
</span><span id="AppController-546"><a href="#AppController-546"><span class="linenos">546</span></a><span class="sd">        Ensures no data loss during application closure.</span>
</span><span id="AppController-547"><a href="#AppController-547"><span class="linenos">547</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AppController-548"><a href="#AppController-548"><span class="linenos">548</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CB] &gt;&gt; AppController.callBackQuit()&quot;</span><span class="p">)</span>
</span><span id="AppController-549"><a href="#AppController-549"><span class="linenos">549</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">imageGalleryController</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span id="AppController-550"><a href="#AppController-550"><span class="linenos">550</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">hdrDisplay</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="AppController-551"><a href="#AppController-551"><span class="linenos">551</span></a>        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
</span><span id="AppController-552"><a href="#AppController-552"><span class="linenos">552</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="AppController-553"><a href="#AppController-553"><span class="linenos">553</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackDisplayHDR</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AppController-554"><a href="#AppController-554"><span class="linenos">554</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AppController-555"><a href="#AppController-555"><span class="linenos">555</span></a><span class="sd">        Display processed HDR image on external HDR monitor.</span>
</span><span id="AppController-556"><a href="#AppController-556"><span class="linenos">556</span></a><span class="sd">        </span>
</span><span id="AppController-557"><a href="#AppController-557"><span class="linenos">557</span></a><span class="sd">        Initiates the HDR display workflow by processing the currently selected</span>
</span><span id="AppController-558"><a href="#AppController-558"><span class="linenos">558</span></a><span class="sd">        image at full resolution with the complete processing pipeline, then</span>
</span><span id="AppController-559"><a href="#AppController-559"><span class="linenos">559</span></a><span class="sd">        sends the result to the external HDR display. Shows progress feedback</span>
</span><span id="AppController-560"><a href="#AppController-560"><span class="linenos">560</span></a><span class="sd">        during the compute-intensive full-resolution processing.</span>
</span><span id="AppController-561"><a href="#AppController-561"><span class="linenos">561</span></a><span class="sd">        </span>
</span><span id="AppController-562"><a href="#AppController-562"><span class="linenos">562</span></a><span class="sd">        The workflow includes:</span>
</span><span id="AppController-563"><a href="#AppController-563"><span class="linenos">563</span></a><span class="sd">        1. Retrieving selected processing pipeline</span>
</span><span id="AppController-564"><a href="#AppController-564"><span class="linenos">564</span></a><span class="sd">        2. Saving processing metadata</span>
</span><span id="AppController-565"><a href="#AppController-565"><span class="linenos">565</span></a><span class="sd">        3. Loading full-resolution source image</span>
</span><span id="AppController-566"><a href="#AppController-566"><span class="linenos">566</span></a><span class="sd">        4. Resizing to display resolution</span>
</span><span id="AppController-567"><a href="#AppController-567"><span class="linenos">567</span></a><span class="sd">        5. Applying complete processing pipeline</span>
</span><span id="AppController-568"><a href="#AppController-568"><span class="linenos">568</span></a><span class="sd">        6. Threading the computation with progress updates</span>
</span><span id="AppController-569"><a href="#AppController-569"><span class="linenos">569</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AppController-570"><a href="#AppController-570"><span class="linenos">570</span></a>
</span><span id="AppController-571"><a href="#AppController-571"><span class="linenos">571</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>  <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; AppController.callBackDisplayHDR()&quot;</span><span class="p">)</span>
</span><span id="AppController-572"><a href="#AppController-572"><span class="linenos">572</span></a>
</span><span id="AppController-573"><a href="#AppController-573"><span class="linenos">573</span></a>        <span class="n">selectedProcessPipe</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">imageGalleryController</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getSelectedProcessPipe</span><span class="p">()</span>
</span><span id="AppController-574"><a href="#AppController-574"><span class="linenos">574</span></a>
</span><span id="AppController-575"><a href="#AppController-575"><span class="linenos">575</span></a>        <span class="k">if</span> <span class="n">selectedProcessPipe</span><span class="p">:</span>
</span><span id="AppController-576"><a href="#AppController-576"><span class="linenos">576</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">statusBar</span><span class="p">()</span><span class="o">.</span><span class="n">showMessage</span><span class="p">(</span><span class="s1">&#39;displaying HDR image, full size image computation: start, please wait !&#39;</span><span class="p">)</span>
</span><span id="AppController-577"><a href="#AppController-577"><span class="linenos">577</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">statusBar</span><span class="p">()</span><span class="o">.</span><span class="n">repaint</span><span class="p">()</span>
</span><span id="AppController-578"><a href="#AppController-578"><span class="linenos">578</span></a>            <span class="c1"># save current processpipe metada</span>
</span><span id="AppController-579"><a href="#AppController-579"><span class="linenos">579</span></a>            <span class="n">originalImage</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">selectedProcessPipe</span><span class="o">.</span><span class="n">originalImage</span><span class="p">)</span>
</span><span id="AppController-580"><a href="#AppController-580"><span class="linenos">580</span></a>            <span class="n">originalImage</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;processpipe&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">selectedProcessPipe</span><span class="o">.</span><span class="n">toDict</span><span class="p">()</span>
</span><span id="AppController-581"><a href="#AppController-581"><span class="linenos">581</span></a>            <span class="n">originalImage</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span id="AppController-582"><a href="#AppController-582"><span class="linenos">582</span></a>
</span><span id="AppController-583"><a href="#AppController-583"><span class="linenos">583</span></a>            <span class="c1"># load full size image</span>
</span><span id="AppController-584"><a href="#AppController-584"><span class="linenos">584</span></a>            <span class="n">img</span> <span class="o">=</span> <span class="n">hdrCore</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">originalImage</span><span class="o">.</span><span class="n">path</span><span class="o">+</span><span class="s1">&#39;/&#39;</span><span class="o">+</span><span class="n">originalImage</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="AppController-585"><a href="#AppController-585"><span class="linenos">585</span></a>
</span><span id="AppController-586"><a href="#AppController-586"><span class="linenos">586</span></a>            <span class="c1"># turn off: autoResize</span>
</span><span id="AppController-587"><a href="#AppController-587"><span class="linenos">587</span></a>            <span class="n">hdrCore</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">ProcessPipe</span><span class="o">.</span><span class="n">autoResize</span> <span class="o">=</span> <span class="kc">False</span> 
</span><span id="AppController-588"><a href="#AppController-588"><span class="linenos">588</span></a>            <span class="c1"># make a copy of selectedProcessPipe  </span>
</span><span id="AppController-589"><a href="#AppController-589"><span class="linenos">589</span></a>            <span class="n">processpipe</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">selectedProcessPipe</span><span class="p">)</span>
</span><span id="AppController-590"><a href="#AppController-590"><span class="linenos">590</span></a>
</span><span id="AppController-591"><a href="#AppController-591"><span class="linenos">591</span></a>            <span class="c1"># set size to display size</span>
</span><span id="AppController-592"><a href="#AppController-592"><span class="linenos">592</span></a>            <span class="n">size</span> <span class="o">=</span> <span class="n">pref</span><span class="o">.</span><span class="n">getDisplayShape</span><span class="p">()</span>
</span><span id="AppController-593"><a href="#AppController-593"><span class="linenos">593</span></a>            <span class="n">img</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">hdrCore</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">resize</span><span class="p">(),</span><span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="AppController-594"><a href="#AppController-594"><span class="linenos">594</span></a>
</span><span id="AppController-595"><a href="#AppController-595"><span class="linenos">595</span></a>            <span class="c1"># set image to process-pipe</span>
</span><span id="AppController-596"><a href="#AppController-596"><span class="linenos">596</span></a>            <span class="n">processpipe</span><span class="o">.</span><span class="n">setImage</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
</span><span id="AppController-597"><a href="#AppController-597"><span class="linenos">597</span></a>
</span><span id="AppController-598"><a href="#AppController-598"><span class="linenos">598</span></a>            <span class="n">thread</span><span class="o">.</span><span class="n">cCompute</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">callBackEndDisplay</span><span class="p">,</span> <span class="n">processpipe</span><span class="p">,</span> <span class="n">toneMap</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">progress</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">statusBar</span><span class="p">()</span><span class="o">.</span><span class="n">showMessage</span><span class="p">)</span>
</span><span id="AppController-599"><a href="#AppController-599"><span class="linenos">599</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="AppController-600"><a href="#AppController-600"><span class="linenos">600</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackEndDisplay</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">):</span>
</span><span id="AppController-601"><a href="#AppController-601"><span class="linenos">601</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AppController-602"><a href="#AppController-602"><span class="linenos">602</span></a><span class="sd">        Complete HDR display processing and send to external monitor.</span>
</span><span id="AppController-603"><a href="#AppController-603"><span class="linenos">603</span></a><span class="sd">        </span>
</span><span id="AppController-604"><a href="#AppController-604"><span class="linenos">604</span></a><span class="sd">        Finalizes the HDR display workflow by applying final processing steps</span>
</span><span id="AppController-605"><a href="#AppController-605"><span class="linenos">605</span></a><span class="sd">        and sending the image to the external HDR display. Updates the status</span>
</span><span id="AppController-606"><a href="#AppController-606"><span class="linenos">606</span></a><span class="sd">        bar to indicate completion.</span>
</span><span id="AppController-607"><a href="#AppController-607"><span class="linenos">607</span></a><span class="sd">        </span>
</span><span id="AppController-608"><a href="#AppController-608"><span class="linenos">608</span></a><span class="sd">        Args:</span>
</span><span id="AppController-609"><a href="#AppController-609"><span class="linenos">609</span></a><span class="sd">            img (hdrCore.image.Image): Processed HDR image ready for display</span>
</span><span id="AppController-610"><a href="#AppController-610"><span class="linenos">610</span></a><span class="sd">            </span>
</span><span id="AppController-611"><a href="#AppController-611"><span class="linenos">611</span></a><span class="sd">        Note:</span>
</span><span id="AppController-612"><a href="#AppController-612"><span class="linenos">612</span></a><span class="sd">            Re-enables auto-resizing after full-resolution processing and</span>
</span><span id="AppController-613"><a href="#AppController-613"><span class="linenos">613</span></a><span class="sd">            applies display-specific scaling before HDR monitor output.</span>
</span><span id="AppController-614"><a href="#AppController-614"><span class="linenos">614</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AppController-615"><a href="#AppController-615"><span class="linenos">615</span></a>
</span><span id="AppController-616"><a href="#AppController-616"><span class="linenos">616</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>  <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; AppController.callBackEndDisplay()&quot;</span><span class="p">)</span>
</span><span id="AppController-617"><a href="#AppController-617"><span class="linenos">617</span></a>
</span><span id="AppController-618"><a href="#AppController-618"><span class="linenos">618</span></a>        <span class="c1"># turn off: autoResize</span>
</span><span id="AppController-619"><a href="#AppController-619"><span class="linenos">619</span></a>        <span class="n">hdrCore</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">ProcessPipe</span><span class="o">.</span><span class="n">autoResize</span> <span class="o">=</span> <span class="kc">True</span>  
</span><span id="AppController-620"><a href="#AppController-620"><span class="linenos">620</span></a>        
</span><span id="AppController-621"><a href="#AppController-621"><span class="linenos">621</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">statusBar</span><span class="p">()</span><span class="o">.</span><span class="n">showMessage</span><span class="p">(</span><span class="s1">&#39;displaying HDR image, full size image computation: done !&#39;</span><span class="p">)</span>
</span><span id="AppController-622"><a href="#AppController-622"><span class="linenos">622</span></a>
</span><span id="AppController-623"><a href="#AppController-623"><span class="linenos">623</span></a>        <span class="c1"># clip, scale</span>
</span><span id="AppController-624"><a href="#AppController-624"><span class="linenos">624</span></a>        <span class="n">img</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">hdrCore</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">clip</span><span class="p">())</span>
</span><span id="AppController-625"><a href="#AppController-625"><span class="linenos">625</span></a>        <span class="n">img</span><span class="o">.</span><span class="n">colorData</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">colorData</span><span class="o">*</span><span class="n">pref</span><span class="o">.</span><span class="n">getDisplayScaling</span><span class="p">()</span>
</span><span id="AppController-626"><a href="#AppController-626"><span class="linenos">626</span></a>
</span><span id="AppController-627"><a href="#AppController-627"><span class="linenos">627</span></a>        <span class="n">colour</span><span class="o">.</span><span class="n">write_image</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">colorData</span><span class="p">,</span><span class="s2">&quot;temp.hdr&quot;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;Imageio&#39;</span><span class="p">)</span> <span class="c1"># local copy for display</span>
</span><span id="AppController-628"><a href="#AppController-628"><span class="linenos">628</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">hdrDisplay</span><span class="o">.</span><span class="n">displayFile</span><span class="p">(</span><span class="s2">&quot;temp.hdr&quot;</span><span class="p">)</span>
</span><span id="AppController-629"><a href="#AppController-629"><span class="linenos">629</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="AppController-630"><a href="#AppController-630"><span class="linenos">630</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackCloseDisplayHDR</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AppController-631"><a href="#AppController-631"><span class="linenos">631</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AppController-632"><a href="#AppController-632"><span class="linenos">632</span></a><span class="sd">        Close HDR display and return to splash screen.</span>
</span><span id="AppController-633"><a href="#AppController-633"><span class="linenos">633</span></a><span class="sd">        </span>
</span><span id="AppController-634"><a href="#AppController-634"><span class="linenos">634</span></a><span class="sd">        Terminates the current HDR display session and returns the external</span>
</span><span id="AppController-635"><a href="#AppController-635"><span class="linenos">635</span></a><span class="sd">        HDR monitor to the default splash screen state.</span>
</span><span id="AppController-636"><a href="#AppController-636"><span class="linenos">636</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AppController-637"><a href="#AppController-637"><span class="linenos">637</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; AppController.callBackCloseDisplayHDR()&quot;</span><span class="p">)</span>
</span><span id="AppController-638"><a href="#AppController-638"><span class="linenos">638</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">hdrDisplay</span><span class="o">.</span><span class="n">displaySplash</span><span class="p">()</span>
</span><span id="AppController-639"><a href="#AppController-639"><span class="linenos">639</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="AppController-640"><a href="#AppController-640"><span class="linenos">640</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackCompareRawEditedHDR</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AppController-641"><a href="#AppController-641"><span class="linenos">641</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AppController-642"><a href="#AppController-642"><span class="linenos">642</span></a><span class="sd">        Display side-by-side comparison of original and edited HDR images.</span>
</span><span id="AppController-643"><a href="#AppController-643"><span class="linenos">643</span></a><span class="sd">        </span>
</span><span id="AppController-644"><a href="#AppController-644"><span class="linenos">644</span></a><span class="sd">        Creates a comparison view showing the original unprocessed image</span>
</span><span id="AppController-645"><a href="#AppController-645"><span class="linenos">645</span></a><span class="sd">        alongside the current edited version. Both images are displayed</span>
</span><span id="AppController-646"><a href="#AppController-646"><span class="linenos">646</span></a><span class="sd">        at the same scale on the HDR monitor for direct visual comparison.</span>
</span><span id="AppController-647"><a href="#AppController-647"><span class="linenos">647</span></a><span class="sd">        </span>
</span><span id="AppController-648"><a href="#AppController-648"><span class="linenos">648</span></a><span class="sd">        The comparison workflow:</span>
</span><span id="AppController-649"><a href="#AppController-649"><span class="linenos">649</span></a><span class="sd">        1. Loads original unprocessed image</span>
</span><span id="AppController-650"><a href="#AppController-650"><span class="linenos">650</span></a><span class="sd">        2. Applies current processing pipeline</span>
</span><span id="AppController-651"><a href="#AppController-651"><span class="linenos">651</span></a><span class="sd">        3. Resizes both images to fit side-by-side</span>
</span><span id="AppController-652"><a href="#AppController-652"><span class="linenos">652</span></a><span class="sd">        4. Creates composite comparison image</span>
</span><span id="AppController-653"><a href="#AppController-653"><span class="linenos">653</span></a><span class="sd">        5. Displays on HDR monitor with proper scaling</span>
</span><span id="AppController-654"><a href="#AppController-654"><span class="linenos">654</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AppController-655"><a href="#AppController-655"><span class="linenos">655</span></a>
</span><span id="AppController-656"><a href="#AppController-656"><span class="linenos">656</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>  <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; AppController.callBackCompareOriginalInputHDR()&quot;</span><span class="p">)</span>
</span><span id="AppController-657"><a href="#AppController-657"><span class="linenos">657</span></a>
</span><span id="AppController-658"><a href="#AppController-658"><span class="linenos">658</span></a>        <span class="c1"># process real size image</span>
</span><span id="AppController-659"><a href="#AppController-659"><span class="linenos">659</span></a>        <span class="c1"># get selected process pipe</span>
</span><span id="AppController-660"><a href="#AppController-660"><span class="linenos">660</span></a>        <span class="n">selectedProcessPipe</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">imageGalleryController</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getSelectedProcessPipe</span><span class="p">()</span>
</span><span id="AppController-661"><a href="#AppController-661"><span class="linenos">661</span></a>
</span><span id="AppController-662"><a href="#AppController-662"><span class="linenos">662</span></a>        <span class="k">if</span> <span class="n">selectedProcessPipe</span><span class="p">:</span>         <span class="c1"># check if a process pipe is selected</span>
</span><span id="AppController-663"><a href="#AppController-663"><span class="linenos">663</span></a>
</span><span id="AppController-664"><a href="#AppController-664"><span class="linenos">664</span></a>            <span class="c1"># read original image</span>
</span><span id="AppController-665"><a href="#AppController-665"><span class="linenos">665</span></a>            <span class="n">img</span> <span class="o">=</span> <span class="n">hdrCore</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">selectedProcessPipe</span><span class="o">.</span><span class="n">originalImage</span><span class="o">.</span><span class="n">path</span><span class="o">+</span><span class="s1">&#39;/&#39;</span><span class="o">+</span><span class="n">selectedProcessPipe</span><span class="o">.</span><span class="n">originalImage</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="AppController-666"><a href="#AppController-666"><span class="linenos">666</span></a>
</span><span id="AppController-667"><a href="#AppController-667"><span class="linenos">667</span></a>            <span class="c1"># resize</span>
</span><span id="AppController-668"><a href="#AppController-668"><span class="linenos">668</span></a>            <span class="n">screenY</span><span class="p">,</span> <span class="n">screenX</span> <span class="o">=</span> <span class="n">pref</span><span class="o">.</span><span class="n">getDisplayShape</span><span class="p">()</span>
</span><span id="AppController-669"><a href="#AppController-669"><span class="linenos">669</span></a>
</span><span id="AppController-670"><a href="#AppController-670"><span class="linenos">670</span></a>            <span class="n">imgY</span><span class="p">,</span> <span class="n">imgX</span><span class="p">,</span><span class="n">_</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">shape</span>
</span><span id="AppController-671"><a href="#AppController-671"><span class="linenos">671</span></a>
</span><span id="AppController-672"><a href="#AppController-672"><span class="linenos">672</span></a>            <span class="n">marginY</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">screenY</span> <span class="o">-</span> <span class="n">imgY</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
</span><span id="AppController-673"><a href="#AppController-673"><span class="linenos">673</span></a>            <span class="n">marginX</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">marginY</span><span class="o">/</span><span class="mi">4</span><span class="p">)</span>
</span><span id="AppController-674"><a href="#AppController-674"><span class="linenos">674</span></a>            <span class="n">imgXp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">screenX</span> <span class="o">-</span> <span class="mi">3</span><span class="o">*</span><span class="n">marginX</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
</span><span id="AppController-675"><a href="#AppController-675"><span class="linenos">675</span></a>            <span class="n">img</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">hdrCore</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">resize</span><span class="p">(),</span><span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span><span class="n">imgXp</span><span class="p">))</span>
</span><span id="AppController-676"><a href="#AppController-676"><span class="linenos">676</span></a>            <span class="n">imgY</span><span class="p">,</span> <span class="n">imgX</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">shape</span>
</span><span id="AppController-677"><a href="#AppController-677"><span class="linenos">677</span></a>
</span><span id="AppController-678"><a href="#AppController-678"><span class="linenos">678</span></a>            <span class="c1"># original image after resize</span>
</span><span id="AppController-679"><a href="#AppController-679"><span class="linenos">679</span></a>            <span class="n">ori</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
</span><span id="AppController-680"><a href="#AppController-680"><span class="linenos">680</span></a>
</span><span id="AppController-681"><a href="#AppController-681"><span class="linenos">681</span></a>            <span class="c1"># build process pipe from selected one them compute</span>
</span><span id="AppController-682"><a href="#AppController-682"><span class="linenos">682</span></a>            <span class="n">pp</span> <span class="o">=</span> <span class="n">hdrCore</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">ProcessPipe</span><span class="p">()</span>
</span><span id="AppController-683"><a href="#AppController-683"><span class="linenos">683</span></a>            <span class="n">hdrCore</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">ProcessPipe</span><span class="o">.</span><span class="n">autoResize</span> <span class="o">=</span> <span class="kc">False</span>   <span class="c1"># stop autoResize</span>
</span><span id="AppController-684"><a href="#AppController-684"><span class="linenos">684</span></a>            <span class="n">params</span><span class="o">=</span> <span class="p">[]</span>
</span><span id="AppController-685"><a href="#AppController-685"><span class="linenos">685</span></a>            <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">selectedProcessPipe</span><span class="o">.</span><span class="n">processNodes</span><span class="p">:</span> 
</span><span id="AppController-686"><a href="#AppController-686"><span class="linenos">686</span></a>                <span class="n">pp</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">process</span><span class="p">),</span><span class="n">paramDict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>
</span><span id="AppController-687"><a href="#AppController-687"><span class="linenos">687</span></a>                <span class="n">params</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="n">p</span><span class="o">.</span><span class="n">name</span><span class="p">:</span><span class="n">p</span><span class="o">.</span><span class="n">params</span><span class="p">})</span>
</span><span id="AppController-688"><a href="#AppController-688"><span class="linenos">688</span></a>            <span class="n">img</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;processpipe&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">params</span>
</span><span id="AppController-689"><a href="#AppController-689"><span class="linenos">689</span></a>            <span class="n">pp</span><span class="o">.</span><span class="n">setImage</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
</span><span id="AppController-690"><a href="#AppController-690"><span class="linenos">690</span></a>
</span><span id="AppController-691"><a href="#AppController-691"><span class="linenos">691</span></a>            <span class="n">res</span> <span class="o">=</span> <span class="n">hdrCore</span><span class="o">.</span><span class="n">coreC</span><span class="o">.</span><span class="n">coreCcompute</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">pp</span><span class="p">)</span>
</span><span id="AppController-692"><a href="#AppController-692"><span class="linenos">692</span></a>            <span class="n">res</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">hdrCore</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">clip</span><span class="p">())</span>
</span><span id="AppController-693"><a href="#AppController-693"><span class="linenos">693</span></a>            
</span><span id="AppController-694"><a href="#AppController-694"><span class="linenos">694</span></a>            <span class="n">imgYres</span><span class="p">,</span> <span class="n">imgXres</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">colorData</span><span class="o">.</span><span class="n">shape</span>
</span><span id="AppController-695"><a href="#AppController-695"><span class="linenos">695</span></a>
</span><span id="AppController-696"><a href="#AppController-696"><span class="linenos">696</span></a>            <span class="n">hdrCore</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">ProcessPipe</span><span class="o">.</span><span class="n">autoResize</span> <span class="o">=</span> <span class="kc">True</span>    <span class="c1"># return to autoResize</span>
</span><span id="AppController-697"><a href="#AppController-697"><span class="linenos">697</span></a>
</span><span id="AppController-698"><a href="#AppController-698"><span class="linenos">698</span></a>            <span class="c1"># make comparison image</span>
</span><span id="AppController-699"><a href="#AppController-699"><span class="linenos">699</span></a>            <span class="n">oriColorData</span> <span class="o">=</span> <span class="n">ori</span><span class="o">.</span><span class="n">colorData</span><span class="o">*</span><span class="n">pref</span><span class="o">.</span><span class="n">getDisplayScaling</span><span class="p">()</span>
</span><span id="AppController-700"><a href="#AppController-700"><span class="linenos">700</span></a>            <span class="n">resColorData</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">colorData</span><span class="o">*</span><span class="n">pref</span><span class="o">.</span><span class="n">getDisplayScaling</span><span class="p">()</span>
</span><span id="AppController-701"><a href="#AppController-701"><span class="linenos">701</span></a>            <span class="n">display</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="n">screenY</span><span class="p">,</span><span class="n">screenX</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span><span class="o">*</span><span class="mf">0.2</span>
</span><span id="AppController-702"><a href="#AppController-702"><span class="linenos">702</span></a>            <span class="n">marginY</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">screenY</span> <span class="o">-</span> <span class="n">imgY</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
</span><span id="AppController-703"><a href="#AppController-703"><span class="linenos">703</span></a>            <span class="n">marginYres</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">screenY</span> <span class="o">-</span> <span class="n">imgYres</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
</span><span id="AppController-704"><a href="#AppController-704"><span class="linenos">704</span></a>
</span><span id="AppController-705"><a href="#AppController-705"><span class="linenos">705</span></a>            <span class="n">display</span><span class="p">[</span><span class="n">marginY</span><span class="p">:</span><span class="n">marginY</span><span class="o">+</span><span class="n">imgY</span><span class="p">,</span> <span class="n">marginX</span><span class="p">:</span><span class="n">marginX</span><span class="o">+</span><span class="n">imgX</span><span class="p">,:]</span> <span class="o">=</span> <span class="n">oriColorData</span>
</span><span id="AppController-706"><a href="#AppController-706"><span class="linenos">706</span></a>            <span class="n">display</span><span class="p">[</span><span class="n">marginYres</span><span class="p">:</span><span class="n">marginYres</span><span class="o">+</span><span class="n">imgYres</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="n">marginX</span><span class="o">+</span><span class="n">imgX</span><span class="p">:</span><span class="mi">2</span><span class="o">*</span><span class="n">marginX</span><span class="o">+</span><span class="n">imgX</span><span class="o">+</span><span class="n">imgXres</span><span class="p">,:]</span> <span class="o">=</span> <span class="n">resColorData</span>
</span><span id="AppController-707"><a href="#AppController-707"><span class="linenos">707</span></a>            
</span><span id="AppController-708"><a href="#AppController-708"><span class="linenos">708</span></a>            <span class="c1"># save as compOrigFinal.hdr</span>
</span><span id="AppController-709"><a href="#AppController-709"><span class="linenos">709</span></a>            <span class="n">colour</span><span class="o">.</span><span class="n">write_image</span><span class="p">(</span><span class="n">display</span><span class="p">,</span><span class="s1">&#39;compOrigFinal.hdr&#39;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;Imageio&#39;</span><span class="p">)</span>
</span><span id="AppController-710"><a href="#AppController-710"><span class="linenos">710</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">hdrDisplay</span><span class="o">.</span><span class="n">displayFile</span><span class="p">(</span><span class="s1">&#39;compOrigFinal.hdr&#39;</span><span class="p">)</span>
</span><span id="AppController-711"><a href="#AppController-711"><span class="linenos">711</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="AppController-712"><a href="#AppController-712"><span class="linenos">712</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackExportHDR</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AppController-713"><a href="#AppController-713"><span class="linenos">713</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AppController-714"><a href="#AppController-714"><span class="linenos">714</span></a><span class="sd">        Export single HDR image with current processing applied.</span>
</span><span id="AppController-715"><a href="#AppController-715"><span class="linenos">715</span></a><span class="sd">        </span>
</span><span id="AppController-716"><a href="#AppController-716"><span class="linenos">716</span></a><span class="sd">        Initiates the HDR export workflow for the currently selected image,</span>
</span><span id="AppController-717"><a href="#AppController-717"><span class="linenos">717</span></a><span class="sd">        allowing the user to choose the export destination and applying</span>
</span><span id="AppController-718"><a href="#AppController-718"><span class="linenos">718</span></a><span class="sd">        the complete processing pipeline at full resolution.</span>
</span><span id="AppController-719"><a href="#AppController-719"><span class="linenos">719</span></a><span class="sd">        </span>
</span><span id="AppController-720"><a href="#AppController-720"><span class="linenos">720</span></a><span class="sd">        The export process includes:</span>
</span><span id="AppController-721"><a href="#AppController-721"><span class="linenos">721</span></a><span class="sd">        1. User directory selection for output</span>
</span><span id="AppController-722"><a href="#AppController-722"><span class="linenos">722</span></a><span class="sd">        2. Full-resolution image loading</span>
</span><span id="AppController-723"><a href="#AppController-723"><span class="linenos">723</span></a><span class="sd">        3. Complete processing pipeline application</span>
</span><span id="AppController-724"><a href="#AppController-724"><span class="linenos">724</span></a><span class="sd">        4. HDR-specific encoding and scaling</span>
</span><span id="AppController-725"><a href="#AppController-725"><span class="linenos">725</span></a><span class="sd">        5. File output with appropriate metadata</span>
</span><span id="AppController-726"><a href="#AppController-726"><span class="linenos">726</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AppController-727"><a href="#AppController-727"><span class="linenos">727</span></a>
</span><span id="AppController-728"><a href="#AppController-728"><span class="linenos">728</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>  <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; AppController.callBackExportHDR()&quot;</span><span class="p">)</span> 
</span><span id="AppController-729"><a href="#AppController-729"><span class="linenos">729</span></a>
</span><span id="AppController-730"><a href="#AppController-730"><span class="linenos">730</span></a>        <span class="n">selectedProcessPipe</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">imageGalleryController</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getSelectedProcessPipe</span><span class="p">()</span>
</span><span id="AppController-731"><a href="#AppController-731"><span class="linenos">731</span></a>
</span><span id="AppController-732"><a href="#AppController-732"><span class="linenos">732</span></a>
</span><span id="AppController-733"><a href="#AppController-733"><span class="linenos">733</span></a>        <span class="k">if</span> <span class="n">selectedProcessPipe</span><span class="p">:</span>
</span><span id="AppController-734"><a href="#AppController-734"><span class="linenos">734</span></a>            <span class="c1"># select dir where to save export</span>
</span><span id="AppController-735"><a href="#AppController-735"><span class="linenos">735</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">dirName</span> <span class="o">=</span> <span class="n">QFileDialog</span><span class="o">.</span><span class="n">getExistingDirectory</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Select Directory where to export HDR file&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">directory</span><span class="p">)</span>
</span><span id="AppController-736"><a href="#AppController-736"><span class="linenos">736</span></a>
</span><span id="AppController-737"><a href="#AppController-737"><span class="linenos">737</span></a>            <span class="c1"># show export message</span>
</span><span id="AppController-738"><a href="#AppController-738"><span class="linenos">738</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">statusBar</span><span class="p">()</span><span class="o">.</span><span class="n">showMessage</span><span class="p">(</span><span class="s1">&#39;exporting HDR image (&#39;</span><span class="o">+</span><span class="n">pref</span><span class="o">.</span><span class="n">getHDRdisplay</span><span class="p">()[</span><span class="s1">&#39;tag&#39;</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;), full size image computation: start, please wait !&#39;</span><span class="p">)</span>
</span><span id="AppController-739"><a href="#AppController-739"><span class="linenos">739</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">statusBar</span><span class="p">()</span><span class="o">.</span><span class="n">repaint</span><span class="p">()</span>
</span><span id="AppController-740"><a href="#AppController-740"><span class="linenos">740</span></a>
</span><span id="AppController-741"><a href="#AppController-741"><span class="linenos">741</span></a>            <span class="c1"># save current processpipe metada</span>
</span><span id="AppController-742"><a href="#AppController-742"><span class="linenos">742</span></a>            <span class="n">originalImage</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">selectedProcessPipe</span><span class="o">.</span><span class="n">originalImage</span><span class="p">)</span>
</span><span id="AppController-743"><a href="#AppController-743"><span class="linenos">743</span></a>            <span class="n">originalImage</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;processpipe&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">selectedProcessPipe</span><span class="o">.</span><span class="n">toDict</span><span class="p">()</span>
</span><span id="AppController-744"><a href="#AppController-744"><span class="linenos">744</span></a>            <span class="n">originalImage</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span id="AppController-745"><a href="#AppController-745"><span class="linenos">745</span></a>
</span><span id="AppController-746"><a href="#AppController-746"><span class="linenos">746</span></a>            <span class="c1"># load full size image</span>
</span><span id="AppController-747"><a href="#AppController-747"><span class="linenos">747</span></a>            <span class="n">img</span> <span class="o">=</span> <span class="n">hdrCore</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">originalImage</span><span class="o">.</span><span class="n">path</span><span class="o">+</span><span class="s1">&#39;/&#39;</span><span class="o">+</span><span class="n">originalImage</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="AppController-748"><a href="#AppController-748"><span class="linenos">748</span></a>
</span><span id="AppController-749"><a href="#AppController-749"><span class="linenos">749</span></a>            <span class="c1"># turn off: autoResize</span>
</span><span id="AppController-750"><a href="#AppController-750"><span class="linenos">750</span></a>            <span class="n">hdrCore</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">ProcessPipe</span><span class="o">.</span><span class="n">autoResize</span> <span class="o">=</span> <span class="kc">False</span> 
</span><span id="AppController-751"><a href="#AppController-751"><span class="linenos">751</span></a>            <span class="c1"># make a copy of selectedProcessPipe  </span>
</span><span id="AppController-752"><a href="#AppController-752"><span class="linenos">752</span></a>            <span class="n">processpipe</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">selectedProcessPipe</span><span class="p">)</span>
</span><span id="AppController-753"><a href="#AppController-753"><span class="linenos">753</span></a>
</span><span id="AppController-754"><a href="#AppController-754"><span class="linenos">754</span></a>            <span class="c1"># set image to process-pipe</span>
</span><span id="AppController-755"><a href="#AppController-755"><span class="linenos">755</span></a>            <span class="n">processpipe</span><span class="o">.</span><span class="n">setImage</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
</span><span id="AppController-756"><a href="#AppController-756"><span class="linenos">756</span></a>
</span><span id="AppController-757"><a href="#AppController-757"><span class="linenos">757</span></a>            <span class="n">thread</span><span class="o">.</span><span class="n">cCompute</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">callBackEndExportHDR</span><span class="p">,</span> <span class="n">processpipe</span><span class="p">,</span> <span class="n">toneMap</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">progress</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">statusBar</span><span class="p">()</span><span class="o">.</span><span class="n">showMessage</span><span class="p">)</span>
</span><span id="AppController-758"><a href="#AppController-758"><span class="linenos">758</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="AppController-759"><a href="#AppController-759"><span class="linenos">759</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackEndExportHDR</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">):</span>
</span><span id="AppController-760"><a href="#AppController-760"><span class="linenos">760</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AppController-761"><a href="#AppController-761"><span class="linenos">761</span></a><span class="sd">        Complete single HDR export and save to disk.</span>
</span><span id="AppController-762"><a href="#AppController-762"><span class="linenos">762</span></a><span class="sd">        </span>
</span><span id="AppController-763"><a href="#AppController-763"><span class="linenos">763</span></a><span class="sd">        Finalizes the HDR export process by applying final processing,</span>
</span><span id="AppController-764"><a href="#AppController-764"><span class="linenos">764</span></a><span class="sd">        saving to the selected directory, and optionally displaying</span>
</span><span id="AppController-765"><a href="#AppController-765"><span class="linenos">765</span></a><span class="sd">        the result on the HDR monitor.</span>
</span><span id="AppController-766"><a href="#AppController-766"><span class="linenos">766</span></a><span class="sd">        </span>
</span><span id="AppController-767"><a href="#AppController-767"><span class="linenos">767</span></a><span class="sd">        Args:</span>
</span><span id="AppController-768"><a href="#AppController-768"><span class="linenos">768</span></a><span class="sd">            img (hdrCore.image.Image): Processed HDR image ready for export</span>
</span><span id="AppController-769"><a href="#AppController-769"><span class="linenos">769</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AppController-770"><a href="#AppController-770"><span class="linenos">770</span></a>        <span class="c1"># turn off: autoResize</span>
</span><span id="AppController-771"><a href="#AppController-771"><span class="linenos">771</span></a>        <span class="n">hdrCore</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">ProcessPipe</span><span class="o">.</span><span class="n">autoResize</span> <span class="o">=</span> <span class="kc">True</span>  
</span><span id="AppController-772"><a href="#AppController-772"><span class="linenos">772</span></a>        
</span><span id="AppController-773"><a href="#AppController-773"><span class="linenos">773</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">statusBar</span><span class="p">()</span><span class="o">.</span><span class="n">showMessage</span><span class="p">(</span><span class="s1">&#39;exporting HDR image (&#39;</span><span class="o">+</span><span class="n">pref</span><span class="o">.</span><span class="n">getHDRdisplay</span><span class="p">()[</span><span class="s1">&#39;tag&#39;</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;), full size image computation: done !&#39;</span><span class="p">)</span>
</span><span id="AppController-774"><a href="#AppController-774"><span class="linenos">774</span></a>
</span><span id="AppController-775"><a href="#AppController-775"><span class="linenos">775</span></a>        <span class="c1"># clip, scale</span>
</span><span id="AppController-776"><a href="#AppController-776"><span class="linenos">776</span></a>        <span class="n">img</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">hdrCore</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">clip</span><span class="p">())</span>
</span><span id="AppController-777"><a href="#AppController-777"><span class="linenos">777</span></a>        <span class="n">img</span><span class="o">.</span><span class="n">colorData</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">colorData</span><span class="o">*</span><span class="n">pref</span><span class="o">.</span><span class="n">getDisplayScaling</span><span class="p">()</span>
</span><span id="AppController-778"><a href="#AppController-778"><span class="linenos">778</span></a>
</span><span id="AppController-779"><a href="#AppController-779"><span class="linenos">779</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dirName</span><span class="p">:</span>
</span><span id="AppController-780"><a href="#AppController-780"><span class="linenos">780</span></a>            <span class="n">pathExport</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dirName</span><span class="p">,</span> <span class="n">img</span><span class="o">.</span><span class="n">name</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span><span class="o">+</span><span class="n">pref</span><span class="o">.</span><span class="n">getHDRdisplay</span><span class="p">()[</span><span class="s1">&#39;post&#39;</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;.hdr&#39;</span><span class="p">)</span>
</span><span id="AppController-781"><a href="#AppController-781"><span class="linenos">781</span></a>            <span class="n">img</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">hdrCore</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">imageType</span><span class="o">.</span><span class="n">HDR</span>
</span><span id="AppController-782"><a href="#AppController-782"><span class="linenos">782</span></a>            <span class="n">img</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;processpipe&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AppController-783"><a href="#AppController-783"><span class="linenos">783</span></a>            <span class="n">img</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;display&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pref</span><span class="o">.</span><span class="n">getHDRdisplay</span><span class="p">()[</span><span class="s1">&#39;tag&#39;</span><span class="p">]</span>
</span><span id="AppController-784"><a href="#AppController-784"><span class="linenos">784</span></a>
</span><span id="AppController-785"><a href="#AppController-785"><span class="linenos">785</span></a>            <span class="n">img</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pathExport</span><span class="p">)</span>
</span><span id="AppController-786"><a href="#AppController-786"><span class="linenos">786</span></a>
</span><span id="AppController-787"><a href="#AppController-787"><span class="linenos">787</span></a>        <span class="n">colour</span><span class="o">.</span><span class="n">write_image</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">colorData</span><span class="p">,</span><span class="s2">&quot;temp.hdr&quot;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;Imageio&#39;</span><span class="p">)</span> <span class="c1"># local copy for display</span>
</span><span id="AppController-788"><a href="#AppController-788"><span class="linenos">788</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">hdrDisplay</span><span class="o">.</span><span class="n">displayFile</span><span class="p">(</span><span class="s2">&quot;temp.hdr&quot;</span><span class="p">)</span>
</span><span id="AppController-789"><a href="#AppController-789"><span class="linenos">789</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="AppController-790"><a href="#AppController-790"><span class="linenos">790</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackExportAllHDR</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AppController-791"><a href="#AppController-791"><span class="linenos">791</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AppController-792"><a href="#AppController-792"><span class="linenos">792</span></a><span class="sd">        Initiate batch export of all HDR images in the gallery.</span>
</span><span id="AppController-793"><a href="#AppController-793"><span class="linenos">793</span></a><span class="sd">        </span>
</span><span id="AppController-794"><a href="#AppController-794"><span class="linenos">794</span></a><span class="sd">        Starts the batch export process for all images in the current gallery,</span>
</span><span id="AppController-795"><a href="#AppController-795"><span class="linenos">795</span></a><span class="sd">        allowing users to export multiple processed HDR images with a single</span>
</span><span id="AppController-796"><a href="#AppController-796"><span class="linenos">796</span></a><span class="sd">        operation. Provides progress feedback during the batch operation.</span>
</span><span id="AppController-797"><a href="#AppController-797"><span class="linenos">797</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AppController-798"><a href="#AppController-798"><span class="linenos">798</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>  <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; AppController.callBackExportAllHDR()&quot;</span><span class="p">)</span>
</span><span id="AppController-799"><a href="#AppController-799"><span class="linenos">799</span></a>
</span><span id="AppController-800"><a href="#AppController-800"><span class="linenos">800</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">processPipes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">imageGalleryController</span><span class="o">.</span><span class="n">getProcessPipes</span><span class="p">()</span>
</span><span id="AppController-801"><a href="#AppController-801"><span class="linenos">801</span></a>
</span><span id="AppController-802"><a href="#AppController-802"><span class="linenos">802</span></a>        <span class="c1"># select dir where to save export</span>
</span><span id="AppController-803"><a href="#AppController-803"><span class="linenos">803</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">dirName</span> <span class="o">=</span> <span class="n">QFileDialog</span><span class="o">.</span><span class="n">getExistingDirectory</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Select Directory where to export HDR file&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">directory</span><span class="p">)</span>
</span><span id="AppController-804"><a href="#AppController-804"><span class="linenos">804</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">statusBar</span><span class="p">()</span><span class="o">.</span><span class="n">showMessage</span><span class="p">(</span><span class="s1">&#39;exporting &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">processPipes</span><span class="p">))</span><span class="o">+</span><span class="s1">&#39; HDR images ... please wait&#39;</span><span class="p">)</span>
</span><span id="AppController-805"><a href="#AppController-805"><span class="linenos">805</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">statusBar</span><span class="p">()</span><span class="o">.</span><span class="n">repaint</span><span class="p">()</span>
</span><span id="AppController-806"><a href="#AppController-806"><span class="linenos">806</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">imageToExport</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">processPipes</span><span class="p">)</span> <span class="p">;</span> <span class="bp">self</span><span class="o">.</span><span class="n">imageExportDone</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="AppController-807"><a href="#AppController-807"><span class="linenos">807</span></a>
</span><span id="AppController-808"><a href="#AppController-808"><span class="linenos">808</span></a>        <span class="n">pp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">processPipes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="AppController-809"><a href="#AppController-809"><span class="linenos">809</span></a>
</span><span id="AppController-810"><a href="#AppController-810"><span class="linenos">810</span></a>        <span class="c1"># save current processpipe metada</span>
</span><span id="AppController-811"><a href="#AppController-811"><span class="linenos">811</span></a>        <span class="n">originalImage</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">pp</span><span class="o">.</span><span class="n">originalImage</span><span class="p">)</span>
</span><span id="AppController-812"><a href="#AppController-812"><span class="linenos">812</span></a>        <span class="n">originalImage</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;processpipe&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pp</span><span class="o">.</span><span class="n">toDict</span><span class="p">()</span>
</span><span id="AppController-813"><a href="#AppController-813"><span class="linenos">813</span></a>        <span class="n">originalImage</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span id="AppController-814"><a href="#AppController-814"><span class="linenos">814</span></a>
</span><span id="AppController-815"><a href="#AppController-815"><span class="linenos">815</span></a>        <span class="c1"># load full size image</span>
</span><span id="AppController-816"><a href="#AppController-816"><span class="linenos">816</span></a>        <span class="n">img</span> <span class="o">=</span> <span class="n">hdrCore</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">originalImage</span><span class="o">.</span><span class="n">path</span><span class="o">+</span><span class="s1">&#39;/&#39;</span><span class="o">+</span><span class="n">originalImage</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="AppController-817"><a href="#AppController-817"><span class="linenos">817</span></a>
</span><span id="AppController-818"><a href="#AppController-818"><span class="linenos">818</span></a>        <span class="c1"># turn off: autoResize</span>
</span><span id="AppController-819"><a href="#AppController-819"><span class="linenos">819</span></a>        <span class="n">hdrCore</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">ProcessPipe</span><span class="o">.</span><span class="n">autoResize</span> <span class="o">=</span> <span class="kc">False</span> 
</span><span id="AppController-820"><a href="#AppController-820"><span class="linenos">820</span></a>        <span class="c1"># make a copy of selectedProcessPipe  </span>
</span><span id="AppController-821"><a href="#AppController-821"><span class="linenos">821</span></a>        <span class="n">processpipe</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">pp</span><span class="p">)</span>
</span><span id="AppController-822"><a href="#AppController-822"><span class="linenos">822</span></a>
</span><span id="AppController-823"><a href="#AppController-823"><span class="linenos">823</span></a>        <span class="c1"># set image to process-pipe</span>
</span><span id="AppController-824"><a href="#AppController-824"><span class="linenos">824</span></a>        <span class="n">processpipe</span><span class="o">.</span><span class="n">setImage</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
</span><span id="AppController-825"><a href="#AppController-825"><span class="linenos">825</span></a>
</span><span id="AppController-826"><a href="#AppController-826"><span class="linenos">826</span></a>        <span class="n">thread</span><span class="o">.</span><span class="n">cCompute</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">callBackEndAllExportHDR</span><span class="p">,</span> <span class="n">processpipe</span><span class="p">,</span> <span class="n">toneMap</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">progress</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">statusBar</span><span class="p">()</span><span class="o">.</span><span class="n">showMessage</span><span class="p">)</span>            
</span><span id="AppController-827"><a href="#AppController-827"><span class="linenos">827</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="AppController-828"><a href="#AppController-828"><span class="linenos">828</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackEndAllExportHDR</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">):</span>
</span><span id="AppController-829"><a href="#AppController-829"><span class="linenos">829</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AppController-830"><a href="#AppController-830"><span class="linenos">830</span></a><span class="sd">        Process single image in batch export and continue to next.</span>
</span><span id="AppController-831"><a href="#AppController-831"><span class="linenos">831</span></a><span class="sd">        </span>
</span><span id="AppController-832"><a href="#AppController-832"><span class="linenos">832</span></a><span class="sd">        Handles the completion of each individual image in the batch export</span>
</span><span id="AppController-833"><a href="#AppController-833"><span class="linenos">833</span></a><span class="sd">        process, saves the current image, updates progress, and initiates</span>
</span><span id="AppController-834"><a href="#AppController-834"><span class="linenos">834</span></a><span class="sd">        processing of the next image in the queue.</span>
</span><span id="AppController-835"><a href="#AppController-835"><span class="linenos">835</span></a><span class="sd">        </span>
</span><span id="AppController-836"><a href="#AppController-836"><span class="linenos">836</span></a><span class="sd">        Args:</span>
</span><span id="AppController-837"><a href="#AppController-837"><span class="linenos">837</span></a><span class="sd">            img (hdrCore.image.Image): Current processed HDR image in batch</span>
</span><span id="AppController-838"><a href="#AppController-838"><span class="linenos">838</span></a><span class="sd">            </span>
</span><span id="AppController-839"><a href="#AppController-839"><span class="linenos">839</span></a><span class="sd">        Note:</span>
</span><span id="AppController-840"><a href="#AppController-840"><span class="linenos">840</span></a><span class="sd">            Recursively processes all images in the batch until completion,</span>
</span><span id="AppController-841"><a href="#AppController-841"><span class="linenos">841</span></a><span class="sd">            providing progress updates throughout the operation.</span>
</span><span id="AppController-842"><a href="#AppController-842"><span class="linenos">842</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AppController-843"><a href="#AppController-843"><span class="linenos">843</span></a>        <span class="c1"># last image ?</span>
</span><span id="AppController-844"><a href="#AppController-844"><span class="linenos">844</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">imageExportDone</span> <span class="o">+=</span><span class="mi">1</span>
</span><span id="AppController-845"><a href="#AppController-845"><span class="linenos">845</span></a>
</span><span id="AppController-846"><a href="#AppController-846"><span class="linenos">846</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">statusBar</span><span class="p">()</span><span class="o">.</span><span class="n">showMessage</span><span class="p">(</span><span class="s1">&#39;exporting HDR images (&#39;</span><span class="o">+</span><span class="n">pref</span><span class="o">.</span><span class="n">getHDRdisplay</span><span class="p">()[</span><span class="s1">&#39;tag&#39;</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;):&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="mi">100</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">imageExportDone</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">imageToExport</span><span class="p">))</span><span class="o">+</span><span class="s1">&#39;</span><span class="si">% d</span><span class="s1">one !&#39;</span><span class="p">)</span>
</span><span id="AppController-847"><a href="#AppController-847"><span class="linenos">847</span></a>
</span><span id="AppController-848"><a href="#AppController-848"><span class="linenos">848</span></a>        <span class="c1"># clip, scale</span>
</span><span id="AppController-849"><a href="#AppController-849"><span class="linenos">849</span></a>        <span class="n">img</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">hdrCore</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">clip</span><span class="p">())</span>
</span><span id="AppController-850"><a href="#AppController-850"><span class="linenos">850</span></a>        <span class="n">img</span><span class="o">.</span><span class="n">colorData</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">colorData</span><span class="o">*</span><span class="n">pref</span><span class="o">.</span><span class="n">getDisplayScaling</span><span class="p">()</span>
</span><span id="AppController-851"><a href="#AppController-851"><span class="linenos">851</span></a>
</span><span id="AppController-852"><a href="#AppController-852"><span class="linenos">852</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dirName</span><span class="p">:</span>
</span><span id="AppController-853"><a href="#AppController-853"><span class="linenos">853</span></a>            <span class="n">pathExport</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dirName</span><span class="p">,</span> <span class="n">img</span><span class="o">.</span><span class="n">name</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span><span class="o">+</span><span class="n">pref</span><span class="o">.</span><span class="n">getHDRdisplay</span><span class="p">()[</span><span class="s1">&#39;post&#39;</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;.hdr&#39;</span><span class="p">)</span>
</span><span id="AppController-854"><a href="#AppController-854"><span class="linenos">854</span></a>            <span class="n">img</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">hdrCore</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">imageType</span><span class="o">.</span><span class="n">HDR</span>
</span><span id="AppController-855"><a href="#AppController-855"><span class="linenos">855</span></a>            <span class="n">img</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;processpipe&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AppController-856"><a href="#AppController-856"><span class="linenos">856</span></a>            <span class="n">img</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;display&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pref</span><span class="o">.</span><span class="n">getHDRdisplay</span><span class="p">()[</span><span class="s1">&#39;tag&#39;</span><span class="p">]</span>
</span><span id="AppController-857"><a href="#AppController-857"><span class="linenos">857</span></a>
</span><span id="AppController-858"><a href="#AppController-858"><span class="linenos">858</span></a>            <span class="n">img</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pathExport</span><span class="p">)</span>
</span><span id="AppController-859"><a href="#AppController-859"><span class="linenos">859</span></a>
</span><span id="AppController-860"><a href="#AppController-860"><span class="linenos">860</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">imageExportDone</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">imageToExport</span> <span class="p">:</span>
</span><span id="AppController-861"><a href="#AppController-861"><span class="linenos">861</span></a>            <span class="c1"># turn off: autoResize</span>
</span><span id="AppController-862"><a href="#AppController-862"><span class="linenos">862</span></a>            <span class="n">hdrCore</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">ProcessPipe</span><span class="o">.</span><span class="n">autoResize</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="AppController-863"><a href="#AppController-863"><span class="linenos">863</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="AppController-864"><a href="#AppController-864"><span class="linenos">864</span></a>            <span class="n">pp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">processPipes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">imageExportDone</span><span class="p">]</span>
</span><span id="AppController-865"><a href="#AppController-865"><span class="linenos">865</span></a>
</span><span id="AppController-866"><a href="#AppController-866"><span class="linenos">866</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">pp</span><span class="p">:</span>
</span><span id="AppController-867"><a href="#AppController-867"><span class="linenos">867</span></a>                <span class="n">img</span> <span class="o">=</span> <span class="n">hdrCore</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">imagesName</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">imageExportDone</span><span class="p">],</span> <span class="n">thumb</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="AppController-868"><a href="#AppController-868"><span class="linenos">868</span></a>                <span class="n">pp</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">EditImageModel</span><span class="o">.</span><span class="n">buildProcessPipe</span><span class="p">()</span>
</span><span id="AppController-869"><a href="#AppController-869"><span class="linenos">869</span></a>                <span class="n">pp</span><span class="o">.</span><span class="n">setImage</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>                      
</span><span id="AppController-870"><a href="#AppController-870"><span class="linenos">870</span></a>
</span><span id="AppController-871"><a href="#AppController-871"><span class="linenos">871</span></a>
</span><span id="AppController-872"><a href="#AppController-872"><span class="linenos">872</span></a>            <span class="c1"># save current processpipe metada</span>
</span><span id="AppController-873"><a href="#AppController-873"><span class="linenos">873</span></a>            <span class="n">originalImage</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">pp</span><span class="o">.</span><span class="n">originalImage</span><span class="p">)</span>
</span><span id="AppController-874"><a href="#AppController-874"><span class="linenos">874</span></a>            <span class="n">originalImage</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;processpipe&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pp</span><span class="o">.</span><span class="n">toDict</span><span class="p">()</span>
</span><span id="AppController-875"><a href="#AppController-875"><span class="linenos">875</span></a>            <span class="n">originalImage</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span id="AppController-876"><a href="#AppController-876"><span class="linenos">876</span></a>
</span><span id="AppController-877"><a href="#AppController-877"><span class="linenos">877</span></a>            <span class="c1"># load full size image</span>
</span><span id="AppController-878"><a href="#AppController-878"><span class="linenos">878</span></a>            <span class="n">img</span> <span class="o">=</span> <span class="n">hdrCore</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">originalImage</span><span class="o">.</span><span class="n">path</span><span class="o">+</span><span class="s1">&#39;/&#39;</span><span class="o">+</span><span class="n">originalImage</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="AppController-879"><a href="#AppController-879"><span class="linenos">879</span></a>
</span><span id="AppController-880"><a href="#AppController-880"><span class="linenos">880</span></a>            <span class="c1"># turn off: autoResize</span>
</span><span id="AppController-881"><a href="#AppController-881"><span class="linenos">881</span></a>            <span class="n">hdrCore</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">ProcessPipe</span><span class="o">.</span><span class="n">autoResize</span> <span class="o">=</span> <span class="kc">False</span> 
</span><span id="AppController-882"><a href="#AppController-882"><span class="linenos">882</span></a>            <span class="c1"># make a copy of selectedProcessPipe  </span>
</span><span id="AppController-883"><a href="#AppController-883"><span class="linenos">883</span></a>            <span class="n">processpipe</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">pp</span><span class="p">)</span>
</span><span id="AppController-884"><a href="#AppController-884"><span class="linenos">884</span></a>
</span><span id="AppController-885"><a href="#AppController-885"><span class="linenos">885</span></a>            <span class="c1"># set image to process-pipe</span>
</span><span id="AppController-886"><a href="#AppController-886"><span class="linenos">886</span></a>            <span class="n">processpipe</span><span class="o">.</span><span class="n">setImage</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
</span><span id="AppController-887"><a href="#AppController-887"><span class="linenos">887</span></a>
</span><span id="AppController-888"><a href="#AppController-888"><span class="linenos">888</span></a>            <span class="n">thread</span><span class="o">.</span><span class="n">cCompute</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">callBackEndAllExportHDR</span><span class="p">,</span> <span class="n">processpipe</span><span class="p">,</span> <span class="n">toneMap</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">progress</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">statusBar</span><span class="p">()</span><span class="o">.</span><span class="n">showMessage</span><span class="p">)</span>            
</span></pre></div>


            <div class="docstring"><p>Main application controller implementing the MVC pattern.</p>

<p>This class serves as the central controller for the uHDR application,
managing the main window, coordinating between different components,
and handling high-level application operations like file management,
HDR display, and image export functionality.</p>

<p>The AppController orchestrates interactions between the image gallery,
editing interface, HDR viewer, and manages the application's workflow
from image loading to final export operations.</p>

<p>Attributes:
    - screenSize (list): Available screen dimensions for multi-monitor support
    - hdrDisplay (HDRviewerController): HDR image display controller
    - view (view.AppView): Main application view component
    - model (model.AppModel): Main application data model
    - dirName (str): Currently selected directory path
    - imagesName (list): List of image filenames in current directory</p>
</div>


                            <div id="AppController.__init__" class="classattr">
                                        <input id="AppController.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">AppController</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">app</span></span>)</span>

                <label class="view-source-button" for="AppController.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AppController.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AppController.__init__-479"><a href="#AppController.__init__-479"><span class="linenos">479</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app</span><span class="p">):</span>
</span><span id="AppController.__init__-480"><a href="#AppController.__init__-480"><span class="linenos">480</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AppController.__init__-481"><a href="#AppController.__init__-481"><span class="linenos">481</span></a><span class="sd">        Initialize the main application controller.</span>
</span><span id="AppController.__init__-482"><a href="#AppController.__init__-482"><span class="linenos">482</span></a><span class="sd">        </span>
</span><span id="AppController.__init__-483"><a href="#AppController.__init__-483"><span class="linenos">483</span></a><span class="sd">        Sets up the application&#39;s core components including screen detection,</span>
</span><span id="AppController.__init__-484"><a href="#AppController.__init__-484"><span class="linenos">484</span></a><span class="sd">        HDR display initialization, and main view creation. Establishes the</span>
</span><span id="AppController.__init__-485"><a href="#AppController.__init__-485"><span class="linenos">485</span></a><span class="sd">        foundation for the complete HDR editing workflow.</span>
</span><span id="AppController.__init__-486"><a href="#AppController.__init__-486"><span class="linenos">486</span></a><span class="sd">        </span>
</span><span id="AppController.__init__-487"><a href="#AppController.__init__-487"><span class="linenos">487</span></a><span class="sd">        Args:</span>
</span><span id="AppController.__init__-488"><a href="#AppController.__init__-488"><span class="linenos">488</span></a><span class="sd">            app (QApplication): PyQt5 application instance for screen detection</span>
</span><span id="AppController.__init__-489"><a href="#AppController.__init__-489"><span class="linenos">489</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AppController.__init__-490"><a href="#AppController.__init__-490"><span class="linenos">490</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; AppController.__init__()&quot;</span><span class="p">)</span>
</span><span id="AppController.__init__-491"><a href="#AppController.__init__-491"><span class="linenos">491</span></a>
</span><span id="AppController.__init__-492"><a href="#AppController.__init__-492"><span class="linenos">492</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">screenSize</span> <span class="o">=</span> <span class="n">getScreenSize</span><span class="p">(</span><span class="n">app</span><span class="p">)</span><span class="c1"># get screens size</span>
</span><span id="AppController.__init__-493"><a href="#AppController.__init__-493"><span class="linenos">493</span></a>
</span><span id="AppController.__init__-494"><a href="#AppController.__init__-494"><span class="linenos">494</span></a>        <span class="c1"># attributes</span>
</span><span id="AppController.__init__-495"><a href="#AppController.__init__-495"><span class="linenos">495</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">hdrDisplay</span> <span class="o">=</span> <span class="n">HDRviewerController</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="AppController.__init__-496"><a href="#AppController.__init__-496"><span class="linenos">496</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span>  <span class="n">view</span><span class="o">.</span><span class="n">AppView</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">HDRcontroller</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hdrDisplay</span><span class="p">)</span>                         
</span><span id="AppController.__init__-497"><a href="#AppController.__init__-497"><span class="linenos">497</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">AppModel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="AppController.__init__-498"><a href="#AppController.__init__-498"><span class="linenos">498</span></a>
</span><span id="AppController.__init__-499"><a href="#AppController.__init__-499"><span class="linenos">499</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">dirName</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AppController.__init__-500"><a href="#AppController.__init__-500"><span class="linenos">500</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">imagesName</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="AppController.__init__-501"><a href="#AppController.__init__-501"><span class="linenos">501</span></a>        
</span><span id="AppController.__init__-502"><a href="#AppController.__init__-502"><span class="linenos">502</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Initialize the main application controller.</p>

<p>Sets up the application's core components including screen detection,
HDR display initialization, and main view creation. Establishes the
foundation for the complete HDR editing workflow.</p>

<p>Args:
    app (QApplication): PyQt5 application instance for screen detection</p>
</div>


                            </div>
                            <div id="AppController.screenSize" class="classattr">
                                <div class="attr variable">
            <span class="name">screenSize</span>

        
    </div>
    <a class="headerlink" href="#AppController.screenSize"></a>
    
    

                            </div>
                            <div id="AppController.hdrDisplay" class="classattr">
                                <div class="attr variable">
            <span class="name">hdrDisplay</span>

        
    </div>
    <a class="headerlink" href="#AppController.hdrDisplay"></a>
    
    

                            </div>
                            <div id="AppController.view" class="classattr">
                                <div class="attr variable">
            <span class="name">view</span>

        
    </div>
    <a class="headerlink" href="#AppController.view"></a>
    
    

                            </div>
                            <div id="AppController.model" class="classattr">
                                <div class="attr variable">
            <span class="name">model</span>

        
    </div>
    <a class="headerlink" href="#AppController.model"></a>
    
    

                            </div>
                            <div id="AppController.dirName" class="classattr">
                                <div class="attr variable">
            <span class="name">dirName</span>

        
    </div>
    <a class="headerlink" href="#AppController.dirName"></a>
    
    

                            </div>
                            <div id="AppController.imagesName" class="classattr">
                                <div class="attr variable">
            <span class="name">imagesName</span>

        
    </div>
    <a class="headerlink" href="#AppController.imagesName"></a>
    
    

                            </div>
                            <div id="AppController.callBackSelectDir" class="classattr">
                                        <input id="AppController.callBackSelectDir-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">callBackSelectDir</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AppController.callBackSelectDir-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AppController.callBackSelectDir"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AppController.callBackSelectDir-505"><a href="#AppController.callBackSelectDir-505"><span class="linenos">505</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackSelectDir</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AppController.callBackSelectDir-506"><a href="#AppController.callBackSelectDir-506"><span class="linenos">506</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AppController.callBackSelectDir-507"><a href="#AppController.callBackSelectDir-507"><span class="linenos">507</span></a><span class="sd">        Open directory selection dialog and load HDR images.</span>
</span><span id="AppController.callBackSelectDir-508"><a href="#AppController.callBackSelectDir-508"><span class="linenos">508</span></a><span class="sd">        </span>
</span><span id="AppController.callBackSelectDir-509"><a href="#AppController.callBackSelectDir-509"><span class="linenos">509</span></a><span class="sd">        Presents a file dialog for directory selection, discovers all supported</span>
</span><span id="AppController.callBackSelectDir-510"><a href="#AppController.callBackSelectDir-510"><span class="linenos">510</span></a><span class="sd">        image files in the chosen directory, and loads them into the gallery.</span>
</span><span id="AppController.callBackSelectDir-511"><a href="#AppController.callBackSelectDir-511"><span class="linenos">511</span></a><span class="sd">        Automatically saves any pending metadata before switching directories.</span>
</span><span id="AppController.callBackSelectDir-512"><a href="#AppController.callBackSelectDir-512"><span class="linenos">512</span></a><span class="sd">        </span>
</span><span id="AppController.callBackSelectDir-513"><a href="#AppController.callBackSelectDir-513"><span class="linenos">513</span></a><span class="sd">        The method handles the complete workflow of:</span>
</span><span id="AppController.callBackSelectDir-514"><a href="#AppController.callBackSelectDir-514"><span class="linenos">514</span></a><span class="sd">        1. Directory selection via QFileDialog</span>
</span><span id="AppController.callBackSelectDir-515"><a href="#AppController.callBackSelectDir-515"><span class="linenos">515</span></a><span class="sd">        2. Saving current image metadata</span>
</span><span id="AppController.callBackSelectDir-516"><a href="#AppController.callBackSelectDir-516"><span class="linenos">516</span></a><span class="sd">        3. Discovering supported image formats</span>
</span><span id="AppController.callBackSelectDir-517"><a href="#AppController.callBackSelectDir-517"><span class="linenos">517</span></a><span class="sd">        4. Loading images into the gallery view</span>
</span><span id="AppController.callBackSelectDir-518"><a href="#AppController.callBackSelectDir-518"><span class="linenos">518</span></a><span class="sd">        5. Resetting HDR display to splash screen</span>
</span><span id="AppController.callBackSelectDir-519"><a href="#AppController.callBackSelectDir-519"><span class="linenos">519</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AppController.callBackSelectDir-520"><a href="#AppController.callBackSelectDir-520"><span class="linenos">520</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; AppController.callBackSelectDir()&quot;</span><span class="p">)</span>
</span><span id="AppController.callBackSelectDir-521"><a href="#AppController.callBackSelectDir-521"><span class="linenos">521</span></a>        <span class="n">dirName</span> <span class="o">=</span> <span class="n">QFileDialog</span><span class="o">.</span><span class="n">getExistingDirectory</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Select Directory&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">directory</span><span class="p">)</span>
</span><span id="AppController.callBackSelectDir-522"><a href="#AppController.callBackSelectDir-522"><span class="linenos">522</span></a>        <span class="k">if</span> <span class="n">dirName</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
</span><span id="AppController.callBackSelectDir-523"><a href="#AppController.callBackSelectDir-523"><span class="linenos">523</span></a>            <span class="c1"># save current images (metadata)</span>
</span><span id="AppController.callBackSelectDir-524"><a href="#AppController.callBackSelectDir-524"><span class="linenos">524</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">imageGalleryController</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span id="AppController.callBackSelectDir-525"><a href="#AppController.callBackSelectDir-525"><span class="linenos">525</span></a>            <span class="c1"># get images in the selected directory</span>
</span><span id="AppController.callBackSelectDir-526"><a href="#AppController.callBackSelectDir-526"><span class="linenos">526</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">imagesName</span> <span class="o">=</span> <span class="p">[];</span> <span class="bp">self</span><span class="o">.</span><span class="n">imagesName</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setDirectory</span><span class="p">(</span><span class="n">dirName</span><span class="p">))</span>
</span><span id="AppController.callBackSelectDir-527"><a href="#AppController.callBackSelectDir-527"><span class="linenos">527</span></a>
</span><span id="AppController.callBackSelectDir-528"><a href="#AppController.callBackSelectDir-528"><span class="linenos">528</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">imageGalleryController</span><span class="o">.</span><span class="n">setImages</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">imagesName</span><span class="p">)</span>
</span><span id="AppController.callBackSelectDir-529"><a href="#AppController.callBackSelectDir-529"><span class="linenos">529</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">hdrDisplay</span><span class="o">.</span><span class="n">displaySplash</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Open directory selection dialog and load HDR images.</p>

<p>Presents a file dialog for directory selection, discovers all supported
image files in the chosen directory, and loads them into the gallery.
Automatically saves any pending metadata before switching directories.</p>

<p>The method handles the complete workflow of:</p>

<ol>
<li>Directory selection via QFileDialog</li>
<li>Saving current image metadata</li>
<li>Discovering supported image formats</li>
<li>Loading images into the gallery view</li>
<li>Resetting HDR display to splash screen</li>
</ol>
</div>


                            </div>
                            <div id="AppController.callBackSave" class="classattr">
                                        <input id="AppController.callBackSave-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">callBackSave</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AppController.callBackSave-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AppController.callBackSave"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AppController.callBackSave-531"><a href="#AppController.callBackSave-531"><span class="linenos">531</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackSave</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
</span><span id="AppController.callBackSave-532"><a href="#AppController.callBackSave-532"><span class="linenos">532</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AppController.callBackSave-533"><a href="#AppController.callBackSave-533"><span class="linenos">533</span></a><span class="sd">        Save current processing state and metadata.</span>
</span><span id="AppController.callBackSave-534"><a href="#AppController.callBackSave-534"><span class="linenos">534</span></a><span class="sd">        </span>
</span><span id="AppController.callBackSave-535"><a href="#AppController.callBackSave-535"><span class="linenos">535</span></a><span class="sd">        Triggers the gallery controller to save all current image metadata</span>
</span><span id="AppController.callBackSave-536"><a href="#AppController.callBackSave-536"><span class="linenos">536</span></a><span class="sd">        and processing pipeline states to persistent storage.</span>
</span><span id="AppController.callBackSave-537"><a href="#AppController.callBackSave-537"><span class="linenos">537</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AppController.callBackSave-538"><a href="#AppController.callBackSave-538"><span class="linenos">538</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">imageGalleryController</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Save current processing state and metadata.</p>

<p>Triggers the gallery controller to save all current image metadata
and processing pipeline states to persistent storage.</p>
</div>


                            </div>
                            <div id="AppController.callBackQuit" class="classattr">
                                        <input id="AppController.callBackQuit-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">callBackQuit</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AppController.callBackQuit-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AppController.callBackQuit"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AppController.callBackQuit-540"><a href="#AppController.callBackQuit-540"><span class="linenos">540</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackQuit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AppController.callBackQuit-541"><a href="#AppController.callBackQuit-541"><span class="linenos">541</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AppController.callBackQuit-542"><a href="#AppController.callBackQuit-542"><span class="linenos">542</span></a><span class="sd">        Handle application shutdown with proper cleanup.</span>
</span><span id="AppController.callBackQuit-543"><a href="#AppController.callBackQuit-543"><span class="linenos">543</span></a><span class="sd">        </span>
</span><span id="AppController.callBackQuit-544"><a href="#AppController.callBackQuit-544"><span class="linenos">544</span></a><span class="sd">        Performs clean application exit by saving all metadata, closing</span>
</span><span id="AppController.callBackQuit-545"><a href="#AppController.callBackQuit-545"><span class="linenos">545</span></a><span class="sd">        HDR display processes, and terminating the application gracefully.</span>
</span><span id="AppController.callBackQuit-546"><a href="#AppController.callBackQuit-546"><span class="linenos">546</span></a><span class="sd">        Ensures no data loss during application closure.</span>
</span><span id="AppController.callBackQuit-547"><a href="#AppController.callBackQuit-547"><span class="linenos">547</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AppController.callBackQuit-548"><a href="#AppController.callBackQuit-548"><span class="linenos">548</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CB] &gt;&gt; AppController.callBackQuit()&quot;</span><span class="p">)</span>
</span><span id="AppController.callBackQuit-549"><a href="#AppController.callBackQuit-549"><span class="linenos">549</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">imageGalleryController</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span id="AppController.callBackQuit-550"><a href="#AppController.callBackQuit-550"><span class="linenos">550</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">hdrDisplay</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="AppController.callBackQuit-551"><a href="#AppController.callBackQuit-551"><span class="linenos">551</span></a>        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Handle application shutdown with proper cleanup.</p>

<p>Performs clean application exit by saving all metadata, closing
HDR display processes, and terminating the application gracefully.
Ensures no data loss during application closure.</p>
</div>


                            </div>
                            <div id="AppController.callBackDisplayHDR" class="classattr">
                                        <input id="AppController.callBackDisplayHDR-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">callBackDisplayHDR</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AppController.callBackDisplayHDR-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AppController.callBackDisplayHDR"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AppController.callBackDisplayHDR-553"><a href="#AppController.callBackDisplayHDR-553"><span class="linenos">553</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackDisplayHDR</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AppController.callBackDisplayHDR-554"><a href="#AppController.callBackDisplayHDR-554"><span class="linenos">554</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AppController.callBackDisplayHDR-555"><a href="#AppController.callBackDisplayHDR-555"><span class="linenos">555</span></a><span class="sd">        Display processed HDR image on external HDR monitor.</span>
</span><span id="AppController.callBackDisplayHDR-556"><a href="#AppController.callBackDisplayHDR-556"><span class="linenos">556</span></a><span class="sd">        </span>
</span><span id="AppController.callBackDisplayHDR-557"><a href="#AppController.callBackDisplayHDR-557"><span class="linenos">557</span></a><span class="sd">        Initiates the HDR display workflow by processing the currently selected</span>
</span><span id="AppController.callBackDisplayHDR-558"><a href="#AppController.callBackDisplayHDR-558"><span class="linenos">558</span></a><span class="sd">        image at full resolution with the complete processing pipeline, then</span>
</span><span id="AppController.callBackDisplayHDR-559"><a href="#AppController.callBackDisplayHDR-559"><span class="linenos">559</span></a><span class="sd">        sends the result to the external HDR display. Shows progress feedback</span>
</span><span id="AppController.callBackDisplayHDR-560"><a href="#AppController.callBackDisplayHDR-560"><span class="linenos">560</span></a><span class="sd">        during the compute-intensive full-resolution processing.</span>
</span><span id="AppController.callBackDisplayHDR-561"><a href="#AppController.callBackDisplayHDR-561"><span class="linenos">561</span></a><span class="sd">        </span>
</span><span id="AppController.callBackDisplayHDR-562"><a href="#AppController.callBackDisplayHDR-562"><span class="linenos">562</span></a><span class="sd">        The workflow includes:</span>
</span><span id="AppController.callBackDisplayHDR-563"><a href="#AppController.callBackDisplayHDR-563"><span class="linenos">563</span></a><span class="sd">        1. Retrieving selected processing pipeline</span>
</span><span id="AppController.callBackDisplayHDR-564"><a href="#AppController.callBackDisplayHDR-564"><span class="linenos">564</span></a><span class="sd">        2. Saving processing metadata</span>
</span><span id="AppController.callBackDisplayHDR-565"><a href="#AppController.callBackDisplayHDR-565"><span class="linenos">565</span></a><span class="sd">        3. Loading full-resolution source image</span>
</span><span id="AppController.callBackDisplayHDR-566"><a href="#AppController.callBackDisplayHDR-566"><span class="linenos">566</span></a><span class="sd">        4. Resizing to display resolution</span>
</span><span id="AppController.callBackDisplayHDR-567"><a href="#AppController.callBackDisplayHDR-567"><span class="linenos">567</span></a><span class="sd">        5. Applying complete processing pipeline</span>
</span><span id="AppController.callBackDisplayHDR-568"><a href="#AppController.callBackDisplayHDR-568"><span class="linenos">568</span></a><span class="sd">        6. Threading the computation with progress updates</span>
</span><span id="AppController.callBackDisplayHDR-569"><a href="#AppController.callBackDisplayHDR-569"><span class="linenos">569</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AppController.callBackDisplayHDR-570"><a href="#AppController.callBackDisplayHDR-570"><span class="linenos">570</span></a>
</span><span id="AppController.callBackDisplayHDR-571"><a href="#AppController.callBackDisplayHDR-571"><span class="linenos">571</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>  <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; AppController.callBackDisplayHDR()&quot;</span><span class="p">)</span>
</span><span id="AppController.callBackDisplayHDR-572"><a href="#AppController.callBackDisplayHDR-572"><span class="linenos">572</span></a>
</span><span id="AppController.callBackDisplayHDR-573"><a href="#AppController.callBackDisplayHDR-573"><span class="linenos">573</span></a>        <span class="n">selectedProcessPipe</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">imageGalleryController</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getSelectedProcessPipe</span><span class="p">()</span>
</span><span id="AppController.callBackDisplayHDR-574"><a href="#AppController.callBackDisplayHDR-574"><span class="linenos">574</span></a>
</span><span id="AppController.callBackDisplayHDR-575"><a href="#AppController.callBackDisplayHDR-575"><span class="linenos">575</span></a>        <span class="k">if</span> <span class="n">selectedProcessPipe</span><span class="p">:</span>
</span><span id="AppController.callBackDisplayHDR-576"><a href="#AppController.callBackDisplayHDR-576"><span class="linenos">576</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">statusBar</span><span class="p">()</span><span class="o">.</span><span class="n">showMessage</span><span class="p">(</span><span class="s1">&#39;displaying HDR image, full size image computation: start, please wait !&#39;</span><span class="p">)</span>
</span><span id="AppController.callBackDisplayHDR-577"><a href="#AppController.callBackDisplayHDR-577"><span class="linenos">577</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">statusBar</span><span class="p">()</span><span class="o">.</span><span class="n">repaint</span><span class="p">()</span>
</span><span id="AppController.callBackDisplayHDR-578"><a href="#AppController.callBackDisplayHDR-578"><span class="linenos">578</span></a>            <span class="c1"># save current processpipe metada</span>
</span><span id="AppController.callBackDisplayHDR-579"><a href="#AppController.callBackDisplayHDR-579"><span class="linenos">579</span></a>            <span class="n">originalImage</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">selectedProcessPipe</span><span class="o">.</span><span class="n">originalImage</span><span class="p">)</span>
</span><span id="AppController.callBackDisplayHDR-580"><a href="#AppController.callBackDisplayHDR-580"><span class="linenos">580</span></a>            <span class="n">originalImage</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;processpipe&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">selectedProcessPipe</span><span class="o">.</span><span class="n">toDict</span><span class="p">()</span>
</span><span id="AppController.callBackDisplayHDR-581"><a href="#AppController.callBackDisplayHDR-581"><span class="linenos">581</span></a>            <span class="n">originalImage</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span id="AppController.callBackDisplayHDR-582"><a href="#AppController.callBackDisplayHDR-582"><span class="linenos">582</span></a>
</span><span id="AppController.callBackDisplayHDR-583"><a href="#AppController.callBackDisplayHDR-583"><span class="linenos">583</span></a>            <span class="c1"># load full size image</span>
</span><span id="AppController.callBackDisplayHDR-584"><a href="#AppController.callBackDisplayHDR-584"><span class="linenos">584</span></a>            <span class="n">img</span> <span class="o">=</span> <span class="n">hdrCore</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">originalImage</span><span class="o">.</span><span class="n">path</span><span class="o">+</span><span class="s1">&#39;/&#39;</span><span class="o">+</span><span class="n">originalImage</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="AppController.callBackDisplayHDR-585"><a href="#AppController.callBackDisplayHDR-585"><span class="linenos">585</span></a>
</span><span id="AppController.callBackDisplayHDR-586"><a href="#AppController.callBackDisplayHDR-586"><span class="linenos">586</span></a>            <span class="c1"># turn off: autoResize</span>
</span><span id="AppController.callBackDisplayHDR-587"><a href="#AppController.callBackDisplayHDR-587"><span class="linenos">587</span></a>            <span class="n">hdrCore</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">ProcessPipe</span><span class="o">.</span><span class="n">autoResize</span> <span class="o">=</span> <span class="kc">False</span> 
</span><span id="AppController.callBackDisplayHDR-588"><a href="#AppController.callBackDisplayHDR-588"><span class="linenos">588</span></a>            <span class="c1"># make a copy of selectedProcessPipe  </span>
</span><span id="AppController.callBackDisplayHDR-589"><a href="#AppController.callBackDisplayHDR-589"><span class="linenos">589</span></a>            <span class="n">processpipe</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">selectedProcessPipe</span><span class="p">)</span>
</span><span id="AppController.callBackDisplayHDR-590"><a href="#AppController.callBackDisplayHDR-590"><span class="linenos">590</span></a>
</span><span id="AppController.callBackDisplayHDR-591"><a href="#AppController.callBackDisplayHDR-591"><span class="linenos">591</span></a>            <span class="c1"># set size to display size</span>
</span><span id="AppController.callBackDisplayHDR-592"><a href="#AppController.callBackDisplayHDR-592"><span class="linenos">592</span></a>            <span class="n">size</span> <span class="o">=</span> <span class="n">pref</span><span class="o">.</span><span class="n">getDisplayShape</span><span class="p">()</span>
</span><span id="AppController.callBackDisplayHDR-593"><a href="#AppController.callBackDisplayHDR-593"><span class="linenos">593</span></a>            <span class="n">img</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">hdrCore</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">resize</span><span class="p">(),</span><span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="AppController.callBackDisplayHDR-594"><a href="#AppController.callBackDisplayHDR-594"><span class="linenos">594</span></a>
</span><span id="AppController.callBackDisplayHDR-595"><a href="#AppController.callBackDisplayHDR-595"><span class="linenos">595</span></a>            <span class="c1"># set image to process-pipe</span>
</span><span id="AppController.callBackDisplayHDR-596"><a href="#AppController.callBackDisplayHDR-596"><span class="linenos">596</span></a>            <span class="n">processpipe</span><span class="o">.</span><span class="n">setImage</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
</span><span id="AppController.callBackDisplayHDR-597"><a href="#AppController.callBackDisplayHDR-597"><span class="linenos">597</span></a>
</span><span id="AppController.callBackDisplayHDR-598"><a href="#AppController.callBackDisplayHDR-598"><span class="linenos">598</span></a>            <span class="n">thread</span><span class="o">.</span><span class="n">cCompute</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">callBackEndDisplay</span><span class="p">,</span> <span class="n">processpipe</span><span class="p">,</span> <span class="n">toneMap</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">progress</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">statusBar</span><span class="p">()</span><span class="o">.</span><span class="n">showMessage</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Display processed HDR image on external HDR monitor.</p>

<p>Initiates the HDR display workflow by processing the currently selected
image at full resolution with the complete processing pipeline, then
sends the result to the external HDR display. Shows progress feedback
during the compute-intensive full-resolution processing.</p>

<p>The workflow includes:</p>

<ol>
<li>Retrieving selected processing pipeline</li>
<li>Saving processing metadata</li>
<li>Loading full-resolution source image</li>
<li>Resizing to display resolution</li>
<li>Applying complete processing pipeline</li>
<li>Threading the computation with progress updates</li>
</ol>
</div>


                            </div>
                            <div id="AppController.callBackEndDisplay" class="classattr">
                                        <input id="AppController.callBackEndDisplay-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">callBackEndDisplay</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">img</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AppController.callBackEndDisplay-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AppController.callBackEndDisplay"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AppController.callBackEndDisplay-600"><a href="#AppController.callBackEndDisplay-600"><span class="linenos">600</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackEndDisplay</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">):</span>
</span><span id="AppController.callBackEndDisplay-601"><a href="#AppController.callBackEndDisplay-601"><span class="linenos">601</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AppController.callBackEndDisplay-602"><a href="#AppController.callBackEndDisplay-602"><span class="linenos">602</span></a><span class="sd">        Complete HDR display processing and send to external monitor.</span>
</span><span id="AppController.callBackEndDisplay-603"><a href="#AppController.callBackEndDisplay-603"><span class="linenos">603</span></a><span class="sd">        </span>
</span><span id="AppController.callBackEndDisplay-604"><a href="#AppController.callBackEndDisplay-604"><span class="linenos">604</span></a><span class="sd">        Finalizes the HDR display workflow by applying final processing steps</span>
</span><span id="AppController.callBackEndDisplay-605"><a href="#AppController.callBackEndDisplay-605"><span class="linenos">605</span></a><span class="sd">        and sending the image to the external HDR display. Updates the status</span>
</span><span id="AppController.callBackEndDisplay-606"><a href="#AppController.callBackEndDisplay-606"><span class="linenos">606</span></a><span class="sd">        bar to indicate completion.</span>
</span><span id="AppController.callBackEndDisplay-607"><a href="#AppController.callBackEndDisplay-607"><span class="linenos">607</span></a><span class="sd">        </span>
</span><span id="AppController.callBackEndDisplay-608"><a href="#AppController.callBackEndDisplay-608"><span class="linenos">608</span></a><span class="sd">        Args:</span>
</span><span id="AppController.callBackEndDisplay-609"><a href="#AppController.callBackEndDisplay-609"><span class="linenos">609</span></a><span class="sd">            img (hdrCore.image.Image): Processed HDR image ready for display</span>
</span><span id="AppController.callBackEndDisplay-610"><a href="#AppController.callBackEndDisplay-610"><span class="linenos">610</span></a><span class="sd">            </span>
</span><span id="AppController.callBackEndDisplay-611"><a href="#AppController.callBackEndDisplay-611"><span class="linenos">611</span></a><span class="sd">        Note:</span>
</span><span id="AppController.callBackEndDisplay-612"><a href="#AppController.callBackEndDisplay-612"><span class="linenos">612</span></a><span class="sd">            Re-enables auto-resizing after full-resolution processing and</span>
</span><span id="AppController.callBackEndDisplay-613"><a href="#AppController.callBackEndDisplay-613"><span class="linenos">613</span></a><span class="sd">            applies display-specific scaling before HDR monitor output.</span>
</span><span id="AppController.callBackEndDisplay-614"><a href="#AppController.callBackEndDisplay-614"><span class="linenos">614</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AppController.callBackEndDisplay-615"><a href="#AppController.callBackEndDisplay-615"><span class="linenos">615</span></a>
</span><span id="AppController.callBackEndDisplay-616"><a href="#AppController.callBackEndDisplay-616"><span class="linenos">616</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>  <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; AppController.callBackEndDisplay()&quot;</span><span class="p">)</span>
</span><span id="AppController.callBackEndDisplay-617"><a href="#AppController.callBackEndDisplay-617"><span class="linenos">617</span></a>
</span><span id="AppController.callBackEndDisplay-618"><a href="#AppController.callBackEndDisplay-618"><span class="linenos">618</span></a>        <span class="c1"># turn off: autoResize</span>
</span><span id="AppController.callBackEndDisplay-619"><a href="#AppController.callBackEndDisplay-619"><span class="linenos">619</span></a>        <span class="n">hdrCore</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">ProcessPipe</span><span class="o">.</span><span class="n">autoResize</span> <span class="o">=</span> <span class="kc">True</span>  
</span><span id="AppController.callBackEndDisplay-620"><a href="#AppController.callBackEndDisplay-620"><span class="linenos">620</span></a>        
</span><span id="AppController.callBackEndDisplay-621"><a href="#AppController.callBackEndDisplay-621"><span class="linenos">621</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">statusBar</span><span class="p">()</span><span class="o">.</span><span class="n">showMessage</span><span class="p">(</span><span class="s1">&#39;displaying HDR image, full size image computation: done !&#39;</span><span class="p">)</span>
</span><span id="AppController.callBackEndDisplay-622"><a href="#AppController.callBackEndDisplay-622"><span class="linenos">622</span></a>
</span><span id="AppController.callBackEndDisplay-623"><a href="#AppController.callBackEndDisplay-623"><span class="linenos">623</span></a>        <span class="c1"># clip, scale</span>
</span><span id="AppController.callBackEndDisplay-624"><a href="#AppController.callBackEndDisplay-624"><span class="linenos">624</span></a>        <span class="n">img</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">hdrCore</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">clip</span><span class="p">())</span>
</span><span id="AppController.callBackEndDisplay-625"><a href="#AppController.callBackEndDisplay-625"><span class="linenos">625</span></a>        <span class="n">img</span><span class="o">.</span><span class="n">colorData</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">colorData</span><span class="o">*</span><span class="n">pref</span><span class="o">.</span><span class="n">getDisplayScaling</span><span class="p">()</span>
</span><span id="AppController.callBackEndDisplay-626"><a href="#AppController.callBackEndDisplay-626"><span class="linenos">626</span></a>
</span><span id="AppController.callBackEndDisplay-627"><a href="#AppController.callBackEndDisplay-627"><span class="linenos">627</span></a>        <span class="n">colour</span><span class="o">.</span><span class="n">write_image</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">colorData</span><span class="p">,</span><span class="s2">&quot;temp.hdr&quot;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;Imageio&#39;</span><span class="p">)</span> <span class="c1"># local copy for display</span>
</span><span id="AppController.callBackEndDisplay-628"><a href="#AppController.callBackEndDisplay-628"><span class="linenos">628</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">hdrDisplay</span><span class="o">.</span><span class="n">displayFile</span><span class="p">(</span><span class="s2">&quot;temp.hdr&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Complete HDR display processing and send to external monitor.</p>

<p>Finalizes the HDR display workflow by applying final processing steps
and sending the image to the external HDR display. Updates the status
bar to indicate completion.</p>

<p>Args:
    img (<a href="../hdrCore/image.html#Image">hdrCore.image.Image</a>): Processed HDR image ready for display</p>

<p>Note:
    Re-enables auto-resizing after full-resolution processing and
    applies display-specific scaling before HDR monitor output.</p>
</div>


                            </div>
                            <div id="AppController.callBackCloseDisplayHDR" class="classattr">
                                        <input id="AppController.callBackCloseDisplayHDR-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">callBackCloseDisplayHDR</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AppController.callBackCloseDisplayHDR-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AppController.callBackCloseDisplayHDR"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AppController.callBackCloseDisplayHDR-630"><a href="#AppController.callBackCloseDisplayHDR-630"><span class="linenos">630</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackCloseDisplayHDR</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AppController.callBackCloseDisplayHDR-631"><a href="#AppController.callBackCloseDisplayHDR-631"><span class="linenos">631</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AppController.callBackCloseDisplayHDR-632"><a href="#AppController.callBackCloseDisplayHDR-632"><span class="linenos">632</span></a><span class="sd">        Close HDR display and return to splash screen.</span>
</span><span id="AppController.callBackCloseDisplayHDR-633"><a href="#AppController.callBackCloseDisplayHDR-633"><span class="linenos">633</span></a><span class="sd">        </span>
</span><span id="AppController.callBackCloseDisplayHDR-634"><a href="#AppController.callBackCloseDisplayHDR-634"><span class="linenos">634</span></a><span class="sd">        Terminates the current HDR display session and returns the external</span>
</span><span id="AppController.callBackCloseDisplayHDR-635"><a href="#AppController.callBackCloseDisplayHDR-635"><span class="linenos">635</span></a><span class="sd">        HDR monitor to the default splash screen state.</span>
</span><span id="AppController.callBackCloseDisplayHDR-636"><a href="#AppController.callBackCloseDisplayHDR-636"><span class="linenos">636</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AppController.callBackCloseDisplayHDR-637"><a href="#AppController.callBackCloseDisplayHDR-637"><span class="linenos">637</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; AppController.callBackCloseDisplayHDR()&quot;</span><span class="p">)</span>
</span><span id="AppController.callBackCloseDisplayHDR-638"><a href="#AppController.callBackCloseDisplayHDR-638"><span class="linenos">638</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">hdrDisplay</span><span class="o">.</span><span class="n">displaySplash</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Close HDR display and return to splash screen.</p>

<p>Terminates the current HDR display session and returns the external
HDR monitor to the default splash screen state.</p>
</div>


                            </div>
                            <div id="AppController.callBackCompareRawEditedHDR" class="classattr">
                                        <input id="AppController.callBackCompareRawEditedHDR-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">callBackCompareRawEditedHDR</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AppController.callBackCompareRawEditedHDR-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AppController.callBackCompareRawEditedHDR"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AppController.callBackCompareRawEditedHDR-640"><a href="#AppController.callBackCompareRawEditedHDR-640"><span class="linenos">640</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackCompareRawEditedHDR</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AppController.callBackCompareRawEditedHDR-641"><a href="#AppController.callBackCompareRawEditedHDR-641"><span class="linenos">641</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AppController.callBackCompareRawEditedHDR-642"><a href="#AppController.callBackCompareRawEditedHDR-642"><span class="linenos">642</span></a><span class="sd">        Display side-by-side comparison of original and edited HDR images.</span>
</span><span id="AppController.callBackCompareRawEditedHDR-643"><a href="#AppController.callBackCompareRawEditedHDR-643"><span class="linenos">643</span></a><span class="sd">        </span>
</span><span id="AppController.callBackCompareRawEditedHDR-644"><a href="#AppController.callBackCompareRawEditedHDR-644"><span class="linenos">644</span></a><span class="sd">        Creates a comparison view showing the original unprocessed image</span>
</span><span id="AppController.callBackCompareRawEditedHDR-645"><a href="#AppController.callBackCompareRawEditedHDR-645"><span class="linenos">645</span></a><span class="sd">        alongside the current edited version. Both images are displayed</span>
</span><span id="AppController.callBackCompareRawEditedHDR-646"><a href="#AppController.callBackCompareRawEditedHDR-646"><span class="linenos">646</span></a><span class="sd">        at the same scale on the HDR monitor for direct visual comparison.</span>
</span><span id="AppController.callBackCompareRawEditedHDR-647"><a href="#AppController.callBackCompareRawEditedHDR-647"><span class="linenos">647</span></a><span class="sd">        </span>
</span><span id="AppController.callBackCompareRawEditedHDR-648"><a href="#AppController.callBackCompareRawEditedHDR-648"><span class="linenos">648</span></a><span class="sd">        The comparison workflow:</span>
</span><span id="AppController.callBackCompareRawEditedHDR-649"><a href="#AppController.callBackCompareRawEditedHDR-649"><span class="linenos">649</span></a><span class="sd">        1. Loads original unprocessed image</span>
</span><span id="AppController.callBackCompareRawEditedHDR-650"><a href="#AppController.callBackCompareRawEditedHDR-650"><span class="linenos">650</span></a><span class="sd">        2. Applies current processing pipeline</span>
</span><span id="AppController.callBackCompareRawEditedHDR-651"><a href="#AppController.callBackCompareRawEditedHDR-651"><span class="linenos">651</span></a><span class="sd">        3. Resizes both images to fit side-by-side</span>
</span><span id="AppController.callBackCompareRawEditedHDR-652"><a href="#AppController.callBackCompareRawEditedHDR-652"><span class="linenos">652</span></a><span class="sd">        4. Creates composite comparison image</span>
</span><span id="AppController.callBackCompareRawEditedHDR-653"><a href="#AppController.callBackCompareRawEditedHDR-653"><span class="linenos">653</span></a><span class="sd">        5. Displays on HDR monitor with proper scaling</span>
</span><span id="AppController.callBackCompareRawEditedHDR-654"><a href="#AppController.callBackCompareRawEditedHDR-654"><span class="linenos">654</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AppController.callBackCompareRawEditedHDR-655"><a href="#AppController.callBackCompareRawEditedHDR-655"><span class="linenos">655</span></a>
</span><span id="AppController.callBackCompareRawEditedHDR-656"><a href="#AppController.callBackCompareRawEditedHDR-656"><span class="linenos">656</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>  <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; AppController.callBackCompareOriginalInputHDR()&quot;</span><span class="p">)</span>
</span><span id="AppController.callBackCompareRawEditedHDR-657"><a href="#AppController.callBackCompareRawEditedHDR-657"><span class="linenos">657</span></a>
</span><span id="AppController.callBackCompareRawEditedHDR-658"><a href="#AppController.callBackCompareRawEditedHDR-658"><span class="linenos">658</span></a>        <span class="c1"># process real size image</span>
</span><span id="AppController.callBackCompareRawEditedHDR-659"><a href="#AppController.callBackCompareRawEditedHDR-659"><span class="linenos">659</span></a>        <span class="c1"># get selected process pipe</span>
</span><span id="AppController.callBackCompareRawEditedHDR-660"><a href="#AppController.callBackCompareRawEditedHDR-660"><span class="linenos">660</span></a>        <span class="n">selectedProcessPipe</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">imageGalleryController</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getSelectedProcessPipe</span><span class="p">()</span>
</span><span id="AppController.callBackCompareRawEditedHDR-661"><a href="#AppController.callBackCompareRawEditedHDR-661"><span class="linenos">661</span></a>
</span><span id="AppController.callBackCompareRawEditedHDR-662"><a href="#AppController.callBackCompareRawEditedHDR-662"><span class="linenos">662</span></a>        <span class="k">if</span> <span class="n">selectedProcessPipe</span><span class="p">:</span>         <span class="c1"># check if a process pipe is selected</span>
</span><span id="AppController.callBackCompareRawEditedHDR-663"><a href="#AppController.callBackCompareRawEditedHDR-663"><span class="linenos">663</span></a>
</span><span id="AppController.callBackCompareRawEditedHDR-664"><a href="#AppController.callBackCompareRawEditedHDR-664"><span class="linenos">664</span></a>            <span class="c1"># read original image</span>
</span><span id="AppController.callBackCompareRawEditedHDR-665"><a href="#AppController.callBackCompareRawEditedHDR-665"><span class="linenos">665</span></a>            <span class="n">img</span> <span class="o">=</span> <span class="n">hdrCore</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">selectedProcessPipe</span><span class="o">.</span><span class="n">originalImage</span><span class="o">.</span><span class="n">path</span><span class="o">+</span><span class="s1">&#39;/&#39;</span><span class="o">+</span><span class="n">selectedProcessPipe</span><span class="o">.</span><span class="n">originalImage</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="AppController.callBackCompareRawEditedHDR-666"><a href="#AppController.callBackCompareRawEditedHDR-666"><span class="linenos">666</span></a>
</span><span id="AppController.callBackCompareRawEditedHDR-667"><a href="#AppController.callBackCompareRawEditedHDR-667"><span class="linenos">667</span></a>            <span class="c1"># resize</span>
</span><span id="AppController.callBackCompareRawEditedHDR-668"><a href="#AppController.callBackCompareRawEditedHDR-668"><span class="linenos">668</span></a>            <span class="n">screenY</span><span class="p">,</span> <span class="n">screenX</span> <span class="o">=</span> <span class="n">pref</span><span class="o">.</span><span class="n">getDisplayShape</span><span class="p">()</span>
</span><span id="AppController.callBackCompareRawEditedHDR-669"><a href="#AppController.callBackCompareRawEditedHDR-669"><span class="linenos">669</span></a>
</span><span id="AppController.callBackCompareRawEditedHDR-670"><a href="#AppController.callBackCompareRawEditedHDR-670"><span class="linenos">670</span></a>            <span class="n">imgY</span><span class="p">,</span> <span class="n">imgX</span><span class="p">,</span><span class="n">_</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">shape</span>
</span><span id="AppController.callBackCompareRawEditedHDR-671"><a href="#AppController.callBackCompareRawEditedHDR-671"><span class="linenos">671</span></a>
</span><span id="AppController.callBackCompareRawEditedHDR-672"><a href="#AppController.callBackCompareRawEditedHDR-672"><span class="linenos">672</span></a>            <span class="n">marginY</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">screenY</span> <span class="o">-</span> <span class="n">imgY</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
</span><span id="AppController.callBackCompareRawEditedHDR-673"><a href="#AppController.callBackCompareRawEditedHDR-673"><span class="linenos">673</span></a>            <span class="n">marginX</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">marginY</span><span class="o">/</span><span class="mi">4</span><span class="p">)</span>
</span><span id="AppController.callBackCompareRawEditedHDR-674"><a href="#AppController.callBackCompareRawEditedHDR-674"><span class="linenos">674</span></a>            <span class="n">imgXp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">screenX</span> <span class="o">-</span> <span class="mi">3</span><span class="o">*</span><span class="n">marginX</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
</span><span id="AppController.callBackCompareRawEditedHDR-675"><a href="#AppController.callBackCompareRawEditedHDR-675"><span class="linenos">675</span></a>            <span class="n">img</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">hdrCore</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">resize</span><span class="p">(),</span><span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span><span class="n">imgXp</span><span class="p">))</span>
</span><span id="AppController.callBackCompareRawEditedHDR-676"><a href="#AppController.callBackCompareRawEditedHDR-676"><span class="linenos">676</span></a>            <span class="n">imgY</span><span class="p">,</span> <span class="n">imgX</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">shape</span>
</span><span id="AppController.callBackCompareRawEditedHDR-677"><a href="#AppController.callBackCompareRawEditedHDR-677"><span class="linenos">677</span></a>
</span><span id="AppController.callBackCompareRawEditedHDR-678"><a href="#AppController.callBackCompareRawEditedHDR-678"><span class="linenos">678</span></a>            <span class="c1"># original image after resize</span>
</span><span id="AppController.callBackCompareRawEditedHDR-679"><a href="#AppController.callBackCompareRawEditedHDR-679"><span class="linenos">679</span></a>            <span class="n">ori</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
</span><span id="AppController.callBackCompareRawEditedHDR-680"><a href="#AppController.callBackCompareRawEditedHDR-680"><span class="linenos">680</span></a>
</span><span id="AppController.callBackCompareRawEditedHDR-681"><a href="#AppController.callBackCompareRawEditedHDR-681"><span class="linenos">681</span></a>            <span class="c1"># build process pipe from selected one them compute</span>
</span><span id="AppController.callBackCompareRawEditedHDR-682"><a href="#AppController.callBackCompareRawEditedHDR-682"><span class="linenos">682</span></a>            <span class="n">pp</span> <span class="o">=</span> <span class="n">hdrCore</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">ProcessPipe</span><span class="p">()</span>
</span><span id="AppController.callBackCompareRawEditedHDR-683"><a href="#AppController.callBackCompareRawEditedHDR-683"><span class="linenos">683</span></a>            <span class="n">hdrCore</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">ProcessPipe</span><span class="o">.</span><span class="n">autoResize</span> <span class="o">=</span> <span class="kc">False</span>   <span class="c1"># stop autoResize</span>
</span><span id="AppController.callBackCompareRawEditedHDR-684"><a href="#AppController.callBackCompareRawEditedHDR-684"><span class="linenos">684</span></a>            <span class="n">params</span><span class="o">=</span> <span class="p">[]</span>
</span><span id="AppController.callBackCompareRawEditedHDR-685"><a href="#AppController.callBackCompareRawEditedHDR-685"><span class="linenos">685</span></a>            <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">selectedProcessPipe</span><span class="o">.</span><span class="n">processNodes</span><span class="p">:</span> 
</span><span id="AppController.callBackCompareRawEditedHDR-686"><a href="#AppController.callBackCompareRawEditedHDR-686"><span class="linenos">686</span></a>                <span class="n">pp</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">process</span><span class="p">),</span><span class="n">paramDict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>
</span><span id="AppController.callBackCompareRawEditedHDR-687"><a href="#AppController.callBackCompareRawEditedHDR-687"><span class="linenos">687</span></a>                <span class="n">params</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="n">p</span><span class="o">.</span><span class="n">name</span><span class="p">:</span><span class="n">p</span><span class="o">.</span><span class="n">params</span><span class="p">})</span>
</span><span id="AppController.callBackCompareRawEditedHDR-688"><a href="#AppController.callBackCompareRawEditedHDR-688"><span class="linenos">688</span></a>            <span class="n">img</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;processpipe&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">params</span>
</span><span id="AppController.callBackCompareRawEditedHDR-689"><a href="#AppController.callBackCompareRawEditedHDR-689"><span class="linenos">689</span></a>            <span class="n">pp</span><span class="o">.</span><span class="n">setImage</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
</span><span id="AppController.callBackCompareRawEditedHDR-690"><a href="#AppController.callBackCompareRawEditedHDR-690"><span class="linenos">690</span></a>
</span><span id="AppController.callBackCompareRawEditedHDR-691"><a href="#AppController.callBackCompareRawEditedHDR-691"><span class="linenos">691</span></a>            <span class="n">res</span> <span class="o">=</span> <span class="n">hdrCore</span><span class="o">.</span><span class="n">coreC</span><span class="o">.</span><span class="n">coreCcompute</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">pp</span><span class="p">)</span>
</span><span id="AppController.callBackCompareRawEditedHDR-692"><a href="#AppController.callBackCompareRawEditedHDR-692"><span class="linenos">692</span></a>            <span class="n">res</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">hdrCore</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">clip</span><span class="p">())</span>
</span><span id="AppController.callBackCompareRawEditedHDR-693"><a href="#AppController.callBackCompareRawEditedHDR-693"><span class="linenos">693</span></a>            
</span><span id="AppController.callBackCompareRawEditedHDR-694"><a href="#AppController.callBackCompareRawEditedHDR-694"><span class="linenos">694</span></a>            <span class="n">imgYres</span><span class="p">,</span> <span class="n">imgXres</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">colorData</span><span class="o">.</span><span class="n">shape</span>
</span><span id="AppController.callBackCompareRawEditedHDR-695"><a href="#AppController.callBackCompareRawEditedHDR-695"><span class="linenos">695</span></a>
</span><span id="AppController.callBackCompareRawEditedHDR-696"><a href="#AppController.callBackCompareRawEditedHDR-696"><span class="linenos">696</span></a>            <span class="n">hdrCore</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">ProcessPipe</span><span class="o">.</span><span class="n">autoResize</span> <span class="o">=</span> <span class="kc">True</span>    <span class="c1"># return to autoResize</span>
</span><span id="AppController.callBackCompareRawEditedHDR-697"><a href="#AppController.callBackCompareRawEditedHDR-697"><span class="linenos">697</span></a>
</span><span id="AppController.callBackCompareRawEditedHDR-698"><a href="#AppController.callBackCompareRawEditedHDR-698"><span class="linenos">698</span></a>            <span class="c1"># make comparison image</span>
</span><span id="AppController.callBackCompareRawEditedHDR-699"><a href="#AppController.callBackCompareRawEditedHDR-699"><span class="linenos">699</span></a>            <span class="n">oriColorData</span> <span class="o">=</span> <span class="n">ori</span><span class="o">.</span><span class="n">colorData</span><span class="o">*</span><span class="n">pref</span><span class="o">.</span><span class="n">getDisplayScaling</span><span class="p">()</span>
</span><span id="AppController.callBackCompareRawEditedHDR-700"><a href="#AppController.callBackCompareRawEditedHDR-700"><span class="linenos">700</span></a>            <span class="n">resColorData</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">colorData</span><span class="o">*</span><span class="n">pref</span><span class="o">.</span><span class="n">getDisplayScaling</span><span class="p">()</span>
</span><span id="AppController.callBackCompareRawEditedHDR-701"><a href="#AppController.callBackCompareRawEditedHDR-701"><span class="linenos">701</span></a>            <span class="n">display</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="n">screenY</span><span class="p">,</span><span class="n">screenX</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span><span class="o">*</span><span class="mf">0.2</span>
</span><span id="AppController.callBackCompareRawEditedHDR-702"><a href="#AppController.callBackCompareRawEditedHDR-702"><span class="linenos">702</span></a>            <span class="n">marginY</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">screenY</span> <span class="o">-</span> <span class="n">imgY</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
</span><span id="AppController.callBackCompareRawEditedHDR-703"><a href="#AppController.callBackCompareRawEditedHDR-703"><span class="linenos">703</span></a>            <span class="n">marginYres</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">screenY</span> <span class="o">-</span> <span class="n">imgYres</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
</span><span id="AppController.callBackCompareRawEditedHDR-704"><a href="#AppController.callBackCompareRawEditedHDR-704"><span class="linenos">704</span></a>
</span><span id="AppController.callBackCompareRawEditedHDR-705"><a href="#AppController.callBackCompareRawEditedHDR-705"><span class="linenos">705</span></a>            <span class="n">display</span><span class="p">[</span><span class="n">marginY</span><span class="p">:</span><span class="n">marginY</span><span class="o">+</span><span class="n">imgY</span><span class="p">,</span> <span class="n">marginX</span><span class="p">:</span><span class="n">marginX</span><span class="o">+</span><span class="n">imgX</span><span class="p">,:]</span> <span class="o">=</span> <span class="n">oriColorData</span>
</span><span id="AppController.callBackCompareRawEditedHDR-706"><a href="#AppController.callBackCompareRawEditedHDR-706"><span class="linenos">706</span></a>            <span class="n">display</span><span class="p">[</span><span class="n">marginYres</span><span class="p">:</span><span class="n">marginYres</span><span class="o">+</span><span class="n">imgYres</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="n">marginX</span><span class="o">+</span><span class="n">imgX</span><span class="p">:</span><span class="mi">2</span><span class="o">*</span><span class="n">marginX</span><span class="o">+</span><span class="n">imgX</span><span class="o">+</span><span class="n">imgXres</span><span class="p">,:]</span> <span class="o">=</span> <span class="n">resColorData</span>
</span><span id="AppController.callBackCompareRawEditedHDR-707"><a href="#AppController.callBackCompareRawEditedHDR-707"><span class="linenos">707</span></a>            
</span><span id="AppController.callBackCompareRawEditedHDR-708"><a href="#AppController.callBackCompareRawEditedHDR-708"><span class="linenos">708</span></a>            <span class="c1"># save as compOrigFinal.hdr</span>
</span><span id="AppController.callBackCompareRawEditedHDR-709"><a href="#AppController.callBackCompareRawEditedHDR-709"><span class="linenos">709</span></a>            <span class="n">colour</span><span class="o">.</span><span class="n">write_image</span><span class="p">(</span><span class="n">display</span><span class="p">,</span><span class="s1">&#39;compOrigFinal.hdr&#39;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;Imageio&#39;</span><span class="p">)</span>
</span><span id="AppController.callBackCompareRawEditedHDR-710"><a href="#AppController.callBackCompareRawEditedHDR-710"><span class="linenos">710</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">hdrDisplay</span><span class="o">.</span><span class="n">displayFile</span><span class="p">(</span><span class="s1">&#39;compOrigFinal.hdr&#39;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Display side-by-side comparison of original and edited HDR images.</p>

<p>Creates a comparison view showing the original unprocessed image
alongside the current edited version. Both images are displayed
at the same scale on the HDR monitor for direct visual comparison.</p>

<p>The comparison workflow:</p>

<ol>
<li>Loads original unprocessed image</li>
<li>Applies current processing pipeline</li>
<li>Resizes both images to fit side-by-side</li>
<li>Creates composite comparison image</li>
<li>Displays on HDR monitor with proper scaling</li>
</ol>
</div>


                            </div>
                            <div id="AppController.callBackExportHDR" class="classattr">
                                        <input id="AppController.callBackExportHDR-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">callBackExportHDR</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AppController.callBackExportHDR-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AppController.callBackExportHDR"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AppController.callBackExportHDR-712"><a href="#AppController.callBackExportHDR-712"><span class="linenos">712</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackExportHDR</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AppController.callBackExportHDR-713"><a href="#AppController.callBackExportHDR-713"><span class="linenos">713</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AppController.callBackExportHDR-714"><a href="#AppController.callBackExportHDR-714"><span class="linenos">714</span></a><span class="sd">        Export single HDR image with current processing applied.</span>
</span><span id="AppController.callBackExportHDR-715"><a href="#AppController.callBackExportHDR-715"><span class="linenos">715</span></a><span class="sd">        </span>
</span><span id="AppController.callBackExportHDR-716"><a href="#AppController.callBackExportHDR-716"><span class="linenos">716</span></a><span class="sd">        Initiates the HDR export workflow for the currently selected image,</span>
</span><span id="AppController.callBackExportHDR-717"><a href="#AppController.callBackExportHDR-717"><span class="linenos">717</span></a><span class="sd">        allowing the user to choose the export destination and applying</span>
</span><span id="AppController.callBackExportHDR-718"><a href="#AppController.callBackExportHDR-718"><span class="linenos">718</span></a><span class="sd">        the complete processing pipeline at full resolution.</span>
</span><span id="AppController.callBackExportHDR-719"><a href="#AppController.callBackExportHDR-719"><span class="linenos">719</span></a><span class="sd">        </span>
</span><span id="AppController.callBackExportHDR-720"><a href="#AppController.callBackExportHDR-720"><span class="linenos">720</span></a><span class="sd">        The export process includes:</span>
</span><span id="AppController.callBackExportHDR-721"><a href="#AppController.callBackExportHDR-721"><span class="linenos">721</span></a><span class="sd">        1. User directory selection for output</span>
</span><span id="AppController.callBackExportHDR-722"><a href="#AppController.callBackExportHDR-722"><span class="linenos">722</span></a><span class="sd">        2. Full-resolution image loading</span>
</span><span id="AppController.callBackExportHDR-723"><a href="#AppController.callBackExportHDR-723"><span class="linenos">723</span></a><span class="sd">        3. Complete processing pipeline application</span>
</span><span id="AppController.callBackExportHDR-724"><a href="#AppController.callBackExportHDR-724"><span class="linenos">724</span></a><span class="sd">        4. HDR-specific encoding and scaling</span>
</span><span id="AppController.callBackExportHDR-725"><a href="#AppController.callBackExportHDR-725"><span class="linenos">725</span></a><span class="sd">        5. File output with appropriate metadata</span>
</span><span id="AppController.callBackExportHDR-726"><a href="#AppController.callBackExportHDR-726"><span class="linenos">726</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AppController.callBackExportHDR-727"><a href="#AppController.callBackExportHDR-727"><span class="linenos">727</span></a>
</span><span id="AppController.callBackExportHDR-728"><a href="#AppController.callBackExportHDR-728"><span class="linenos">728</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>  <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; AppController.callBackExportHDR()&quot;</span><span class="p">)</span> 
</span><span id="AppController.callBackExportHDR-729"><a href="#AppController.callBackExportHDR-729"><span class="linenos">729</span></a>
</span><span id="AppController.callBackExportHDR-730"><a href="#AppController.callBackExportHDR-730"><span class="linenos">730</span></a>        <span class="n">selectedProcessPipe</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">imageGalleryController</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getSelectedProcessPipe</span><span class="p">()</span>
</span><span id="AppController.callBackExportHDR-731"><a href="#AppController.callBackExportHDR-731"><span class="linenos">731</span></a>
</span><span id="AppController.callBackExportHDR-732"><a href="#AppController.callBackExportHDR-732"><span class="linenos">732</span></a>
</span><span id="AppController.callBackExportHDR-733"><a href="#AppController.callBackExportHDR-733"><span class="linenos">733</span></a>        <span class="k">if</span> <span class="n">selectedProcessPipe</span><span class="p">:</span>
</span><span id="AppController.callBackExportHDR-734"><a href="#AppController.callBackExportHDR-734"><span class="linenos">734</span></a>            <span class="c1"># select dir where to save export</span>
</span><span id="AppController.callBackExportHDR-735"><a href="#AppController.callBackExportHDR-735"><span class="linenos">735</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">dirName</span> <span class="o">=</span> <span class="n">QFileDialog</span><span class="o">.</span><span class="n">getExistingDirectory</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Select Directory where to export HDR file&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">directory</span><span class="p">)</span>
</span><span id="AppController.callBackExportHDR-736"><a href="#AppController.callBackExportHDR-736"><span class="linenos">736</span></a>
</span><span id="AppController.callBackExportHDR-737"><a href="#AppController.callBackExportHDR-737"><span class="linenos">737</span></a>            <span class="c1"># show export message</span>
</span><span id="AppController.callBackExportHDR-738"><a href="#AppController.callBackExportHDR-738"><span class="linenos">738</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">statusBar</span><span class="p">()</span><span class="o">.</span><span class="n">showMessage</span><span class="p">(</span><span class="s1">&#39;exporting HDR image (&#39;</span><span class="o">+</span><span class="n">pref</span><span class="o">.</span><span class="n">getHDRdisplay</span><span class="p">()[</span><span class="s1">&#39;tag&#39;</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;), full size image computation: start, please wait !&#39;</span><span class="p">)</span>
</span><span id="AppController.callBackExportHDR-739"><a href="#AppController.callBackExportHDR-739"><span class="linenos">739</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">statusBar</span><span class="p">()</span><span class="o">.</span><span class="n">repaint</span><span class="p">()</span>
</span><span id="AppController.callBackExportHDR-740"><a href="#AppController.callBackExportHDR-740"><span class="linenos">740</span></a>
</span><span id="AppController.callBackExportHDR-741"><a href="#AppController.callBackExportHDR-741"><span class="linenos">741</span></a>            <span class="c1"># save current processpipe metada</span>
</span><span id="AppController.callBackExportHDR-742"><a href="#AppController.callBackExportHDR-742"><span class="linenos">742</span></a>            <span class="n">originalImage</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">selectedProcessPipe</span><span class="o">.</span><span class="n">originalImage</span><span class="p">)</span>
</span><span id="AppController.callBackExportHDR-743"><a href="#AppController.callBackExportHDR-743"><span class="linenos">743</span></a>            <span class="n">originalImage</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;processpipe&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">selectedProcessPipe</span><span class="o">.</span><span class="n">toDict</span><span class="p">()</span>
</span><span id="AppController.callBackExportHDR-744"><a href="#AppController.callBackExportHDR-744"><span class="linenos">744</span></a>            <span class="n">originalImage</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span id="AppController.callBackExportHDR-745"><a href="#AppController.callBackExportHDR-745"><span class="linenos">745</span></a>
</span><span id="AppController.callBackExportHDR-746"><a href="#AppController.callBackExportHDR-746"><span class="linenos">746</span></a>            <span class="c1"># load full size image</span>
</span><span id="AppController.callBackExportHDR-747"><a href="#AppController.callBackExportHDR-747"><span class="linenos">747</span></a>            <span class="n">img</span> <span class="o">=</span> <span class="n">hdrCore</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">originalImage</span><span class="o">.</span><span class="n">path</span><span class="o">+</span><span class="s1">&#39;/&#39;</span><span class="o">+</span><span class="n">originalImage</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="AppController.callBackExportHDR-748"><a href="#AppController.callBackExportHDR-748"><span class="linenos">748</span></a>
</span><span id="AppController.callBackExportHDR-749"><a href="#AppController.callBackExportHDR-749"><span class="linenos">749</span></a>            <span class="c1"># turn off: autoResize</span>
</span><span id="AppController.callBackExportHDR-750"><a href="#AppController.callBackExportHDR-750"><span class="linenos">750</span></a>            <span class="n">hdrCore</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">ProcessPipe</span><span class="o">.</span><span class="n">autoResize</span> <span class="o">=</span> <span class="kc">False</span> 
</span><span id="AppController.callBackExportHDR-751"><a href="#AppController.callBackExportHDR-751"><span class="linenos">751</span></a>            <span class="c1"># make a copy of selectedProcessPipe  </span>
</span><span id="AppController.callBackExportHDR-752"><a href="#AppController.callBackExportHDR-752"><span class="linenos">752</span></a>            <span class="n">processpipe</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">selectedProcessPipe</span><span class="p">)</span>
</span><span id="AppController.callBackExportHDR-753"><a href="#AppController.callBackExportHDR-753"><span class="linenos">753</span></a>
</span><span id="AppController.callBackExportHDR-754"><a href="#AppController.callBackExportHDR-754"><span class="linenos">754</span></a>            <span class="c1"># set image to process-pipe</span>
</span><span id="AppController.callBackExportHDR-755"><a href="#AppController.callBackExportHDR-755"><span class="linenos">755</span></a>            <span class="n">processpipe</span><span class="o">.</span><span class="n">setImage</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
</span><span id="AppController.callBackExportHDR-756"><a href="#AppController.callBackExportHDR-756"><span class="linenos">756</span></a>
</span><span id="AppController.callBackExportHDR-757"><a href="#AppController.callBackExportHDR-757"><span class="linenos">757</span></a>            <span class="n">thread</span><span class="o">.</span><span class="n">cCompute</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">callBackEndExportHDR</span><span class="p">,</span> <span class="n">processpipe</span><span class="p">,</span> <span class="n">toneMap</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">progress</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">statusBar</span><span class="p">()</span><span class="o">.</span><span class="n">showMessage</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Export single HDR image with current processing applied.</p>

<p>Initiates the HDR export workflow for the currently selected image,
allowing the user to choose the export destination and applying
the complete processing pipeline at full resolution.</p>

<p>The export process includes:</p>

<ol>
<li>User directory selection for output</li>
<li>Full-resolution image loading</li>
<li>Complete processing pipeline application</li>
<li>HDR-specific encoding and scaling</li>
<li>File output with appropriate metadata</li>
</ol>
</div>


                            </div>
                            <div id="AppController.callBackEndExportHDR" class="classattr">
                                        <input id="AppController.callBackEndExportHDR-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">callBackEndExportHDR</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">img</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AppController.callBackEndExportHDR-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AppController.callBackEndExportHDR"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AppController.callBackEndExportHDR-759"><a href="#AppController.callBackEndExportHDR-759"><span class="linenos">759</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackEndExportHDR</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">):</span>
</span><span id="AppController.callBackEndExportHDR-760"><a href="#AppController.callBackEndExportHDR-760"><span class="linenos">760</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AppController.callBackEndExportHDR-761"><a href="#AppController.callBackEndExportHDR-761"><span class="linenos">761</span></a><span class="sd">        Complete single HDR export and save to disk.</span>
</span><span id="AppController.callBackEndExportHDR-762"><a href="#AppController.callBackEndExportHDR-762"><span class="linenos">762</span></a><span class="sd">        </span>
</span><span id="AppController.callBackEndExportHDR-763"><a href="#AppController.callBackEndExportHDR-763"><span class="linenos">763</span></a><span class="sd">        Finalizes the HDR export process by applying final processing,</span>
</span><span id="AppController.callBackEndExportHDR-764"><a href="#AppController.callBackEndExportHDR-764"><span class="linenos">764</span></a><span class="sd">        saving to the selected directory, and optionally displaying</span>
</span><span id="AppController.callBackEndExportHDR-765"><a href="#AppController.callBackEndExportHDR-765"><span class="linenos">765</span></a><span class="sd">        the result on the HDR monitor.</span>
</span><span id="AppController.callBackEndExportHDR-766"><a href="#AppController.callBackEndExportHDR-766"><span class="linenos">766</span></a><span class="sd">        </span>
</span><span id="AppController.callBackEndExportHDR-767"><a href="#AppController.callBackEndExportHDR-767"><span class="linenos">767</span></a><span class="sd">        Args:</span>
</span><span id="AppController.callBackEndExportHDR-768"><a href="#AppController.callBackEndExportHDR-768"><span class="linenos">768</span></a><span class="sd">            img (hdrCore.image.Image): Processed HDR image ready for export</span>
</span><span id="AppController.callBackEndExportHDR-769"><a href="#AppController.callBackEndExportHDR-769"><span class="linenos">769</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AppController.callBackEndExportHDR-770"><a href="#AppController.callBackEndExportHDR-770"><span class="linenos">770</span></a>        <span class="c1"># turn off: autoResize</span>
</span><span id="AppController.callBackEndExportHDR-771"><a href="#AppController.callBackEndExportHDR-771"><span class="linenos">771</span></a>        <span class="n">hdrCore</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">ProcessPipe</span><span class="o">.</span><span class="n">autoResize</span> <span class="o">=</span> <span class="kc">True</span>  
</span><span id="AppController.callBackEndExportHDR-772"><a href="#AppController.callBackEndExportHDR-772"><span class="linenos">772</span></a>        
</span><span id="AppController.callBackEndExportHDR-773"><a href="#AppController.callBackEndExportHDR-773"><span class="linenos">773</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">statusBar</span><span class="p">()</span><span class="o">.</span><span class="n">showMessage</span><span class="p">(</span><span class="s1">&#39;exporting HDR image (&#39;</span><span class="o">+</span><span class="n">pref</span><span class="o">.</span><span class="n">getHDRdisplay</span><span class="p">()[</span><span class="s1">&#39;tag&#39;</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;), full size image computation: done !&#39;</span><span class="p">)</span>
</span><span id="AppController.callBackEndExportHDR-774"><a href="#AppController.callBackEndExportHDR-774"><span class="linenos">774</span></a>
</span><span id="AppController.callBackEndExportHDR-775"><a href="#AppController.callBackEndExportHDR-775"><span class="linenos">775</span></a>        <span class="c1"># clip, scale</span>
</span><span id="AppController.callBackEndExportHDR-776"><a href="#AppController.callBackEndExportHDR-776"><span class="linenos">776</span></a>        <span class="n">img</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">hdrCore</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">clip</span><span class="p">())</span>
</span><span id="AppController.callBackEndExportHDR-777"><a href="#AppController.callBackEndExportHDR-777"><span class="linenos">777</span></a>        <span class="n">img</span><span class="o">.</span><span class="n">colorData</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">colorData</span><span class="o">*</span><span class="n">pref</span><span class="o">.</span><span class="n">getDisplayScaling</span><span class="p">()</span>
</span><span id="AppController.callBackEndExportHDR-778"><a href="#AppController.callBackEndExportHDR-778"><span class="linenos">778</span></a>
</span><span id="AppController.callBackEndExportHDR-779"><a href="#AppController.callBackEndExportHDR-779"><span class="linenos">779</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dirName</span><span class="p">:</span>
</span><span id="AppController.callBackEndExportHDR-780"><a href="#AppController.callBackEndExportHDR-780"><span class="linenos">780</span></a>            <span class="n">pathExport</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dirName</span><span class="p">,</span> <span class="n">img</span><span class="o">.</span><span class="n">name</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span><span class="o">+</span><span class="n">pref</span><span class="o">.</span><span class="n">getHDRdisplay</span><span class="p">()[</span><span class="s1">&#39;post&#39;</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;.hdr&#39;</span><span class="p">)</span>
</span><span id="AppController.callBackEndExportHDR-781"><a href="#AppController.callBackEndExportHDR-781"><span class="linenos">781</span></a>            <span class="n">img</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">hdrCore</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">imageType</span><span class="o">.</span><span class="n">HDR</span>
</span><span id="AppController.callBackEndExportHDR-782"><a href="#AppController.callBackEndExportHDR-782"><span class="linenos">782</span></a>            <span class="n">img</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;processpipe&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AppController.callBackEndExportHDR-783"><a href="#AppController.callBackEndExportHDR-783"><span class="linenos">783</span></a>            <span class="n">img</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;display&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pref</span><span class="o">.</span><span class="n">getHDRdisplay</span><span class="p">()[</span><span class="s1">&#39;tag&#39;</span><span class="p">]</span>
</span><span id="AppController.callBackEndExportHDR-784"><a href="#AppController.callBackEndExportHDR-784"><span class="linenos">784</span></a>
</span><span id="AppController.callBackEndExportHDR-785"><a href="#AppController.callBackEndExportHDR-785"><span class="linenos">785</span></a>            <span class="n">img</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pathExport</span><span class="p">)</span>
</span><span id="AppController.callBackEndExportHDR-786"><a href="#AppController.callBackEndExportHDR-786"><span class="linenos">786</span></a>
</span><span id="AppController.callBackEndExportHDR-787"><a href="#AppController.callBackEndExportHDR-787"><span class="linenos">787</span></a>        <span class="n">colour</span><span class="o">.</span><span class="n">write_image</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">colorData</span><span class="p">,</span><span class="s2">&quot;temp.hdr&quot;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;Imageio&#39;</span><span class="p">)</span> <span class="c1"># local copy for display</span>
</span><span id="AppController.callBackEndExportHDR-788"><a href="#AppController.callBackEndExportHDR-788"><span class="linenos">788</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">hdrDisplay</span><span class="o">.</span><span class="n">displayFile</span><span class="p">(</span><span class="s2">&quot;temp.hdr&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Complete single HDR export and save to disk.</p>

<p>Finalizes the HDR export process by applying final processing,
saving to the selected directory, and optionally displaying
the result on the HDR monitor.</p>

<p>Args:
    img (<a href="../hdrCore/image.html#Image">hdrCore.image.Image</a>): Processed HDR image ready for export</p>
</div>


                            </div>
                            <div id="AppController.callBackExportAllHDR" class="classattr">
                                        <input id="AppController.callBackExportAllHDR-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">callBackExportAllHDR</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AppController.callBackExportAllHDR-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AppController.callBackExportAllHDR"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AppController.callBackExportAllHDR-790"><a href="#AppController.callBackExportAllHDR-790"><span class="linenos">790</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackExportAllHDR</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AppController.callBackExportAllHDR-791"><a href="#AppController.callBackExportAllHDR-791"><span class="linenos">791</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AppController.callBackExportAllHDR-792"><a href="#AppController.callBackExportAllHDR-792"><span class="linenos">792</span></a><span class="sd">        Initiate batch export of all HDR images in the gallery.</span>
</span><span id="AppController.callBackExportAllHDR-793"><a href="#AppController.callBackExportAllHDR-793"><span class="linenos">793</span></a><span class="sd">        </span>
</span><span id="AppController.callBackExportAllHDR-794"><a href="#AppController.callBackExportAllHDR-794"><span class="linenos">794</span></a><span class="sd">        Starts the batch export process for all images in the current gallery,</span>
</span><span id="AppController.callBackExportAllHDR-795"><a href="#AppController.callBackExportAllHDR-795"><span class="linenos">795</span></a><span class="sd">        allowing users to export multiple processed HDR images with a single</span>
</span><span id="AppController.callBackExportAllHDR-796"><a href="#AppController.callBackExportAllHDR-796"><span class="linenos">796</span></a><span class="sd">        operation. Provides progress feedback during the batch operation.</span>
</span><span id="AppController.callBackExportAllHDR-797"><a href="#AppController.callBackExportAllHDR-797"><span class="linenos">797</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AppController.callBackExportAllHDR-798"><a href="#AppController.callBackExportAllHDR-798"><span class="linenos">798</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>  <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; AppController.callBackExportAllHDR()&quot;</span><span class="p">)</span>
</span><span id="AppController.callBackExportAllHDR-799"><a href="#AppController.callBackExportAllHDR-799"><span class="linenos">799</span></a>
</span><span id="AppController.callBackExportAllHDR-800"><a href="#AppController.callBackExportAllHDR-800"><span class="linenos">800</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">processPipes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">imageGalleryController</span><span class="o">.</span><span class="n">getProcessPipes</span><span class="p">()</span>
</span><span id="AppController.callBackExportAllHDR-801"><a href="#AppController.callBackExportAllHDR-801"><span class="linenos">801</span></a>
</span><span id="AppController.callBackExportAllHDR-802"><a href="#AppController.callBackExportAllHDR-802"><span class="linenos">802</span></a>        <span class="c1"># select dir where to save export</span>
</span><span id="AppController.callBackExportAllHDR-803"><a href="#AppController.callBackExportAllHDR-803"><span class="linenos">803</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">dirName</span> <span class="o">=</span> <span class="n">QFileDialog</span><span class="o">.</span><span class="n">getExistingDirectory</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;Select Directory where to export HDR file&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">directory</span><span class="p">)</span>
</span><span id="AppController.callBackExportAllHDR-804"><a href="#AppController.callBackExportAllHDR-804"><span class="linenos">804</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">statusBar</span><span class="p">()</span><span class="o">.</span><span class="n">showMessage</span><span class="p">(</span><span class="s1">&#39;exporting &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">processPipes</span><span class="p">))</span><span class="o">+</span><span class="s1">&#39; HDR images ... please wait&#39;</span><span class="p">)</span>
</span><span id="AppController.callBackExportAllHDR-805"><a href="#AppController.callBackExportAllHDR-805"><span class="linenos">805</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">statusBar</span><span class="p">()</span><span class="o">.</span><span class="n">repaint</span><span class="p">()</span>
</span><span id="AppController.callBackExportAllHDR-806"><a href="#AppController.callBackExportAllHDR-806"><span class="linenos">806</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">imageToExport</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">processPipes</span><span class="p">)</span> <span class="p">;</span> <span class="bp">self</span><span class="o">.</span><span class="n">imageExportDone</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="AppController.callBackExportAllHDR-807"><a href="#AppController.callBackExportAllHDR-807"><span class="linenos">807</span></a>
</span><span id="AppController.callBackExportAllHDR-808"><a href="#AppController.callBackExportAllHDR-808"><span class="linenos">808</span></a>        <span class="n">pp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">processPipes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="AppController.callBackExportAllHDR-809"><a href="#AppController.callBackExportAllHDR-809"><span class="linenos">809</span></a>
</span><span id="AppController.callBackExportAllHDR-810"><a href="#AppController.callBackExportAllHDR-810"><span class="linenos">810</span></a>        <span class="c1"># save current processpipe metada</span>
</span><span id="AppController.callBackExportAllHDR-811"><a href="#AppController.callBackExportAllHDR-811"><span class="linenos">811</span></a>        <span class="n">originalImage</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">pp</span><span class="o">.</span><span class="n">originalImage</span><span class="p">)</span>
</span><span id="AppController.callBackExportAllHDR-812"><a href="#AppController.callBackExportAllHDR-812"><span class="linenos">812</span></a>        <span class="n">originalImage</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;processpipe&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pp</span><span class="o">.</span><span class="n">toDict</span><span class="p">()</span>
</span><span id="AppController.callBackExportAllHDR-813"><a href="#AppController.callBackExportAllHDR-813"><span class="linenos">813</span></a>        <span class="n">originalImage</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span id="AppController.callBackExportAllHDR-814"><a href="#AppController.callBackExportAllHDR-814"><span class="linenos">814</span></a>
</span><span id="AppController.callBackExportAllHDR-815"><a href="#AppController.callBackExportAllHDR-815"><span class="linenos">815</span></a>        <span class="c1"># load full size image</span>
</span><span id="AppController.callBackExportAllHDR-816"><a href="#AppController.callBackExportAllHDR-816"><span class="linenos">816</span></a>        <span class="n">img</span> <span class="o">=</span> <span class="n">hdrCore</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">originalImage</span><span class="o">.</span><span class="n">path</span><span class="o">+</span><span class="s1">&#39;/&#39;</span><span class="o">+</span><span class="n">originalImage</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="AppController.callBackExportAllHDR-817"><a href="#AppController.callBackExportAllHDR-817"><span class="linenos">817</span></a>
</span><span id="AppController.callBackExportAllHDR-818"><a href="#AppController.callBackExportAllHDR-818"><span class="linenos">818</span></a>        <span class="c1"># turn off: autoResize</span>
</span><span id="AppController.callBackExportAllHDR-819"><a href="#AppController.callBackExportAllHDR-819"><span class="linenos">819</span></a>        <span class="n">hdrCore</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">ProcessPipe</span><span class="o">.</span><span class="n">autoResize</span> <span class="o">=</span> <span class="kc">False</span> 
</span><span id="AppController.callBackExportAllHDR-820"><a href="#AppController.callBackExportAllHDR-820"><span class="linenos">820</span></a>        <span class="c1"># make a copy of selectedProcessPipe  </span>
</span><span id="AppController.callBackExportAllHDR-821"><a href="#AppController.callBackExportAllHDR-821"><span class="linenos">821</span></a>        <span class="n">processpipe</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">pp</span><span class="p">)</span>
</span><span id="AppController.callBackExportAllHDR-822"><a href="#AppController.callBackExportAllHDR-822"><span class="linenos">822</span></a>
</span><span id="AppController.callBackExportAllHDR-823"><a href="#AppController.callBackExportAllHDR-823"><span class="linenos">823</span></a>        <span class="c1"># set image to process-pipe</span>
</span><span id="AppController.callBackExportAllHDR-824"><a href="#AppController.callBackExportAllHDR-824"><span class="linenos">824</span></a>        <span class="n">processpipe</span><span class="o">.</span><span class="n">setImage</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
</span><span id="AppController.callBackExportAllHDR-825"><a href="#AppController.callBackExportAllHDR-825"><span class="linenos">825</span></a>
</span><span id="AppController.callBackExportAllHDR-826"><a href="#AppController.callBackExportAllHDR-826"><span class="linenos">826</span></a>        <span class="n">thread</span><span class="o">.</span><span class="n">cCompute</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">callBackEndAllExportHDR</span><span class="p">,</span> <span class="n">processpipe</span><span class="p">,</span> <span class="n">toneMap</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">progress</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">statusBar</span><span class="p">()</span><span class="o">.</span><span class="n">showMessage</span><span class="p">)</span>            
</span></pre></div>


            <div class="docstring"><p>Initiate batch export of all HDR images in the gallery.</p>

<p>Starts the batch export process for all images in the current gallery,
allowing users to export multiple processed HDR images with a single
operation. Provides progress feedback during the batch operation.</p>
</div>


                            </div>
                            <div id="AppController.callBackEndAllExportHDR" class="classattr">
                                        <input id="AppController.callBackEndAllExportHDR-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">callBackEndAllExportHDR</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">img</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AppController.callBackEndAllExportHDR-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AppController.callBackEndAllExportHDR"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AppController.callBackEndAllExportHDR-828"><a href="#AppController.callBackEndAllExportHDR-828"><span class="linenos">828</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackEndAllExportHDR</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">):</span>
</span><span id="AppController.callBackEndAllExportHDR-829"><a href="#AppController.callBackEndAllExportHDR-829"><span class="linenos">829</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AppController.callBackEndAllExportHDR-830"><a href="#AppController.callBackEndAllExportHDR-830"><span class="linenos">830</span></a><span class="sd">        Process single image in batch export and continue to next.</span>
</span><span id="AppController.callBackEndAllExportHDR-831"><a href="#AppController.callBackEndAllExportHDR-831"><span class="linenos">831</span></a><span class="sd">        </span>
</span><span id="AppController.callBackEndAllExportHDR-832"><a href="#AppController.callBackEndAllExportHDR-832"><span class="linenos">832</span></a><span class="sd">        Handles the completion of each individual image in the batch export</span>
</span><span id="AppController.callBackEndAllExportHDR-833"><a href="#AppController.callBackEndAllExportHDR-833"><span class="linenos">833</span></a><span class="sd">        process, saves the current image, updates progress, and initiates</span>
</span><span id="AppController.callBackEndAllExportHDR-834"><a href="#AppController.callBackEndAllExportHDR-834"><span class="linenos">834</span></a><span class="sd">        processing of the next image in the queue.</span>
</span><span id="AppController.callBackEndAllExportHDR-835"><a href="#AppController.callBackEndAllExportHDR-835"><span class="linenos">835</span></a><span class="sd">        </span>
</span><span id="AppController.callBackEndAllExportHDR-836"><a href="#AppController.callBackEndAllExportHDR-836"><span class="linenos">836</span></a><span class="sd">        Args:</span>
</span><span id="AppController.callBackEndAllExportHDR-837"><a href="#AppController.callBackEndAllExportHDR-837"><span class="linenos">837</span></a><span class="sd">            img (hdrCore.image.Image): Current processed HDR image in batch</span>
</span><span id="AppController.callBackEndAllExportHDR-838"><a href="#AppController.callBackEndAllExportHDR-838"><span class="linenos">838</span></a><span class="sd">            </span>
</span><span id="AppController.callBackEndAllExportHDR-839"><a href="#AppController.callBackEndAllExportHDR-839"><span class="linenos">839</span></a><span class="sd">        Note:</span>
</span><span id="AppController.callBackEndAllExportHDR-840"><a href="#AppController.callBackEndAllExportHDR-840"><span class="linenos">840</span></a><span class="sd">            Recursively processes all images in the batch until completion,</span>
</span><span id="AppController.callBackEndAllExportHDR-841"><a href="#AppController.callBackEndAllExportHDR-841"><span class="linenos">841</span></a><span class="sd">            providing progress updates throughout the operation.</span>
</span><span id="AppController.callBackEndAllExportHDR-842"><a href="#AppController.callBackEndAllExportHDR-842"><span class="linenos">842</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AppController.callBackEndAllExportHDR-843"><a href="#AppController.callBackEndAllExportHDR-843"><span class="linenos">843</span></a>        <span class="c1"># last image ?</span>
</span><span id="AppController.callBackEndAllExportHDR-844"><a href="#AppController.callBackEndAllExportHDR-844"><span class="linenos">844</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">imageExportDone</span> <span class="o">+=</span><span class="mi">1</span>
</span><span id="AppController.callBackEndAllExportHDR-845"><a href="#AppController.callBackEndAllExportHDR-845"><span class="linenos">845</span></a>
</span><span id="AppController.callBackEndAllExportHDR-846"><a href="#AppController.callBackEndAllExportHDR-846"><span class="linenos">846</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">statusBar</span><span class="p">()</span><span class="o">.</span><span class="n">showMessage</span><span class="p">(</span><span class="s1">&#39;exporting HDR images (&#39;</span><span class="o">+</span><span class="n">pref</span><span class="o">.</span><span class="n">getHDRdisplay</span><span class="p">()[</span><span class="s1">&#39;tag&#39;</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;):&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="mi">100</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">imageExportDone</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">imageToExport</span><span class="p">))</span><span class="o">+</span><span class="s1">&#39;</span><span class="si">% d</span><span class="s1">one !&#39;</span><span class="p">)</span>
</span><span id="AppController.callBackEndAllExportHDR-847"><a href="#AppController.callBackEndAllExportHDR-847"><span class="linenos">847</span></a>
</span><span id="AppController.callBackEndAllExportHDR-848"><a href="#AppController.callBackEndAllExportHDR-848"><span class="linenos">848</span></a>        <span class="c1"># clip, scale</span>
</span><span id="AppController.callBackEndAllExportHDR-849"><a href="#AppController.callBackEndAllExportHDR-849"><span class="linenos">849</span></a>        <span class="n">img</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">hdrCore</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">clip</span><span class="p">())</span>
</span><span id="AppController.callBackEndAllExportHDR-850"><a href="#AppController.callBackEndAllExportHDR-850"><span class="linenos">850</span></a>        <span class="n">img</span><span class="o">.</span><span class="n">colorData</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">colorData</span><span class="o">*</span><span class="n">pref</span><span class="o">.</span><span class="n">getDisplayScaling</span><span class="p">()</span>
</span><span id="AppController.callBackEndAllExportHDR-851"><a href="#AppController.callBackEndAllExportHDR-851"><span class="linenos">851</span></a>
</span><span id="AppController.callBackEndAllExportHDR-852"><a href="#AppController.callBackEndAllExportHDR-852"><span class="linenos">852</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dirName</span><span class="p">:</span>
</span><span id="AppController.callBackEndAllExportHDR-853"><a href="#AppController.callBackEndAllExportHDR-853"><span class="linenos">853</span></a>            <span class="n">pathExport</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dirName</span><span class="p">,</span> <span class="n">img</span><span class="o">.</span><span class="n">name</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span><span class="o">+</span><span class="n">pref</span><span class="o">.</span><span class="n">getHDRdisplay</span><span class="p">()[</span><span class="s1">&#39;post&#39;</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;.hdr&#39;</span><span class="p">)</span>
</span><span id="AppController.callBackEndAllExportHDR-854"><a href="#AppController.callBackEndAllExportHDR-854"><span class="linenos">854</span></a>            <span class="n">img</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">hdrCore</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">imageType</span><span class="o">.</span><span class="n">HDR</span>
</span><span id="AppController.callBackEndAllExportHDR-855"><a href="#AppController.callBackEndAllExportHDR-855"><span class="linenos">855</span></a>            <span class="n">img</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;processpipe&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="AppController.callBackEndAllExportHDR-856"><a href="#AppController.callBackEndAllExportHDR-856"><span class="linenos">856</span></a>            <span class="n">img</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;display&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pref</span><span class="o">.</span><span class="n">getHDRdisplay</span><span class="p">()[</span><span class="s1">&#39;tag&#39;</span><span class="p">]</span>
</span><span id="AppController.callBackEndAllExportHDR-857"><a href="#AppController.callBackEndAllExportHDR-857"><span class="linenos">857</span></a>
</span><span id="AppController.callBackEndAllExportHDR-858"><a href="#AppController.callBackEndAllExportHDR-858"><span class="linenos">858</span></a>            <span class="n">img</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">pathExport</span><span class="p">)</span>
</span><span id="AppController.callBackEndAllExportHDR-859"><a href="#AppController.callBackEndAllExportHDR-859"><span class="linenos">859</span></a>
</span><span id="AppController.callBackEndAllExportHDR-860"><a href="#AppController.callBackEndAllExportHDR-860"><span class="linenos">860</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">imageExportDone</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">imageToExport</span> <span class="p">:</span>
</span><span id="AppController.callBackEndAllExportHDR-861"><a href="#AppController.callBackEndAllExportHDR-861"><span class="linenos">861</span></a>            <span class="c1"># turn off: autoResize</span>
</span><span id="AppController.callBackEndAllExportHDR-862"><a href="#AppController.callBackEndAllExportHDR-862"><span class="linenos">862</span></a>            <span class="n">hdrCore</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">ProcessPipe</span><span class="o">.</span><span class="n">autoResize</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="AppController.callBackEndAllExportHDR-863"><a href="#AppController.callBackEndAllExportHDR-863"><span class="linenos">863</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="AppController.callBackEndAllExportHDR-864"><a href="#AppController.callBackEndAllExportHDR-864"><span class="linenos">864</span></a>            <span class="n">pp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">processPipes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">imageExportDone</span><span class="p">]</span>
</span><span id="AppController.callBackEndAllExportHDR-865"><a href="#AppController.callBackEndAllExportHDR-865"><span class="linenos">865</span></a>
</span><span id="AppController.callBackEndAllExportHDR-866"><a href="#AppController.callBackEndAllExportHDR-866"><span class="linenos">866</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="n">pp</span><span class="p">:</span>
</span><span id="AppController.callBackEndAllExportHDR-867"><a href="#AppController.callBackEndAllExportHDR-867"><span class="linenos">867</span></a>                <span class="n">img</span> <span class="o">=</span> <span class="n">hdrCore</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">imagesName</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">imageExportDone</span><span class="p">],</span> <span class="n">thumb</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="AppController.callBackEndAllExportHDR-868"><a href="#AppController.callBackEndAllExportHDR-868"><span class="linenos">868</span></a>                <span class="n">pp</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">EditImageModel</span><span class="o">.</span><span class="n">buildProcessPipe</span><span class="p">()</span>
</span><span id="AppController.callBackEndAllExportHDR-869"><a href="#AppController.callBackEndAllExportHDR-869"><span class="linenos">869</span></a>                <span class="n">pp</span><span class="o">.</span><span class="n">setImage</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>                      
</span><span id="AppController.callBackEndAllExportHDR-870"><a href="#AppController.callBackEndAllExportHDR-870"><span class="linenos">870</span></a>
</span><span id="AppController.callBackEndAllExportHDR-871"><a href="#AppController.callBackEndAllExportHDR-871"><span class="linenos">871</span></a>
</span><span id="AppController.callBackEndAllExportHDR-872"><a href="#AppController.callBackEndAllExportHDR-872"><span class="linenos">872</span></a>            <span class="c1"># save current processpipe metada</span>
</span><span id="AppController.callBackEndAllExportHDR-873"><a href="#AppController.callBackEndAllExportHDR-873"><span class="linenos">873</span></a>            <span class="n">originalImage</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">pp</span><span class="o">.</span><span class="n">originalImage</span><span class="p">)</span>
</span><span id="AppController.callBackEndAllExportHDR-874"><a href="#AppController.callBackEndAllExportHDR-874"><span class="linenos">874</span></a>            <span class="n">originalImage</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;processpipe&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pp</span><span class="o">.</span><span class="n">toDict</span><span class="p">()</span>
</span><span id="AppController.callBackEndAllExportHDR-875"><a href="#AppController.callBackEndAllExportHDR-875"><span class="linenos">875</span></a>            <span class="n">originalImage</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span id="AppController.callBackEndAllExportHDR-876"><a href="#AppController.callBackEndAllExportHDR-876"><span class="linenos">876</span></a>
</span><span id="AppController.callBackEndAllExportHDR-877"><a href="#AppController.callBackEndAllExportHDR-877"><span class="linenos">877</span></a>            <span class="c1"># load full size image</span>
</span><span id="AppController.callBackEndAllExportHDR-878"><a href="#AppController.callBackEndAllExportHDR-878"><span class="linenos">878</span></a>            <span class="n">img</span> <span class="o">=</span> <span class="n">hdrCore</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">originalImage</span><span class="o">.</span><span class="n">path</span><span class="o">+</span><span class="s1">&#39;/&#39;</span><span class="o">+</span><span class="n">originalImage</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
</span><span id="AppController.callBackEndAllExportHDR-879"><a href="#AppController.callBackEndAllExportHDR-879"><span class="linenos">879</span></a>
</span><span id="AppController.callBackEndAllExportHDR-880"><a href="#AppController.callBackEndAllExportHDR-880"><span class="linenos">880</span></a>            <span class="c1"># turn off: autoResize</span>
</span><span id="AppController.callBackEndAllExportHDR-881"><a href="#AppController.callBackEndAllExportHDR-881"><span class="linenos">881</span></a>            <span class="n">hdrCore</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">ProcessPipe</span><span class="o">.</span><span class="n">autoResize</span> <span class="o">=</span> <span class="kc">False</span> 
</span><span id="AppController.callBackEndAllExportHDR-882"><a href="#AppController.callBackEndAllExportHDR-882"><span class="linenos">882</span></a>            <span class="c1"># make a copy of selectedProcessPipe  </span>
</span><span id="AppController.callBackEndAllExportHDR-883"><a href="#AppController.callBackEndAllExportHDR-883"><span class="linenos">883</span></a>            <span class="n">processpipe</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">pp</span><span class="p">)</span>
</span><span id="AppController.callBackEndAllExportHDR-884"><a href="#AppController.callBackEndAllExportHDR-884"><span class="linenos">884</span></a>
</span><span id="AppController.callBackEndAllExportHDR-885"><a href="#AppController.callBackEndAllExportHDR-885"><span class="linenos">885</span></a>            <span class="c1"># set image to process-pipe</span>
</span><span id="AppController.callBackEndAllExportHDR-886"><a href="#AppController.callBackEndAllExportHDR-886"><span class="linenos">886</span></a>            <span class="n">processpipe</span><span class="o">.</span><span class="n">setImage</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
</span><span id="AppController.callBackEndAllExportHDR-887"><a href="#AppController.callBackEndAllExportHDR-887"><span class="linenos">887</span></a>
</span><span id="AppController.callBackEndAllExportHDR-888"><a href="#AppController.callBackEndAllExportHDR-888"><span class="linenos">888</span></a>            <span class="n">thread</span><span class="o">.</span><span class="n">cCompute</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">callBackEndAllExportHDR</span><span class="p">,</span> <span class="n">processpipe</span><span class="p">,</span> <span class="n">toneMap</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">progress</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">statusBar</span><span class="p">()</span><span class="o">.</span><span class="n">showMessage</span><span class="p">)</span>            
</span></pre></div>


            <div class="docstring"><p>Process single image in batch export and continue to next.</p>

<p>Handles the completion of each individual image in the batch export
process, saves the current image, updates progress, and initiates
processing of the next image in the queue.</p>

<p>Args:
    img (<a href="../hdrCore/image.html#Image">hdrCore.image.Image</a>): Current processed HDR image in batch</p>

<p>Note:
    Recursively processes all images in the batch until completion,
    providing progress updates throughout the operation.</p>
</div>


                            </div>
                </section>
                <section id="MultiDockController">
                            <input id="MultiDockController-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">MultiDockController</span>:

                <label class="view-source-button" for="MultiDockController-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MultiDockController"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MultiDockController-892"><a href="#MultiDockController-892"><span class="linenos">892</span></a><span class="k">class</span><span class="w"> </span><span class="nc">MultiDockController</span><span class="p">():</span>
</span><span id="MultiDockController-893"><a href="#MultiDockController-893"><span class="linenos">893</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MultiDockController-894"><a href="#MultiDockController-894"><span class="linenos">894</span></a><span class="sd">    Controller for managing multiple docked panels in the interface.</span>
</span><span id="MultiDockController-895"><a href="#MultiDockController-895"><span class="linenos">895</span></a><span class="sd">    </span>
</span><span id="MultiDockController-896"><a href="#MultiDockController-896"><span class="linenos">896</span></a><span class="sd">    This class manages the docking system that allows switching between different</span>
</span><span id="MultiDockController-897"><a href="#MultiDockController-897"><span class="linenos">897</span></a><span class="sd">    functional panels: EDIT (image editing), INFO (metadata/information), and</span>
</span><span id="MultiDockController-898"><a href="#MultiDockController-898"><span class="linenos">898</span></a><span class="sd">    MIAM (aesthetics analysis). It provides seamless transitions between</span>
</span><span id="MultiDockController-899"><a href="#MultiDockController-899"><span class="linenos">899</span></a><span class="sd">    different modes of interaction with the HDR images.</span>
</span><span id="MultiDockController-900"><a href="#MultiDockController-900"><span class="linenos">900</span></a><span class="sd">    </span>
</span><span id="MultiDockController-901"><a href="#MultiDockController-901"><span class="linenos">901</span></a><span class="sd">    The docking system allows users to focus on specific aspects of image</span>
</span><span id="MultiDockController-902"><a href="#MultiDockController-902"><span class="linenos">902</span></a><span class="sd">    processing while maintaining a consistent workflow and shared processing</span>
</span><span id="MultiDockController-903"><a href="#MultiDockController-903"><span class="linenos">903</span></a><span class="sd">    pipeline state across all panels.</span>
</span><span id="MultiDockController-904"><a href="#MultiDockController-904"><span class="linenos">904</span></a><span class="sd">    </span>
</span><span id="MultiDockController-905"><a href="#MultiDockController-905"><span class="linenos">905</span></a><span class="sd">    Attributes:</span>
</span><span id="MultiDockController-906"><a href="#MultiDockController-906"><span class="linenos">906</span></a><span class="sd">        - parent: Parent controller (typically AppController)</span>
</span><span id="MultiDockController-907"><a href="#MultiDockController-907"><span class="linenos">907</span></a><span class="sd">        - view (view.MultiDockView): Multi-panel view component</span>
</span><span id="MultiDockController-908"><a href="#MultiDockController-908"><span class="linenos">908</span></a><span class="sd">        - model: Data model (currently None, uses child controllers&#39; models)</span>
</span><span id="MultiDockController-909"><a href="#MultiDockController-909"><span class="linenos">909</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="MultiDockController-910"><a href="#MultiDockController-910"><span class="linenos">910</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">HDRcontroller</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="MultiDockController-911"><a href="#MultiDockController-911"><span class="linenos">911</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MultiDockController-912"><a href="#MultiDockController-912"><span class="linenos">912</span></a><span class="sd">        Initialize the multi-dock controller.</span>
</span><span id="MultiDockController-913"><a href="#MultiDockController-913"><span class="linenos">913</span></a><span class="sd">        </span>
</span><span id="MultiDockController-914"><a href="#MultiDockController-914"><span class="linenos">914</span></a><span class="sd">        Args:</span>
</span><span id="MultiDockController-915"><a href="#MultiDockController-915"><span class="linenos">915</span></a><span class="sd">            parent: Parent controller for coordination</span>
</span><span id="MultiDockController-916"><a href="#MultiDockController-916"><span class="linenos">916</span></a><span class="sd">            HDRcontroller: HDR display controller for HDR preview integration</span>
</span><span id="MultiDockController-917"><a href="#MultiDockController-917"><span class="linenos">917</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MultiDockController-918"><a href="#MultiDockController-918"><span class="linenos">918</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; MultiDockController.__init__()&quot;</span><span class="p">)</span>
</span><span id="MultiDockController-919"><a href="#MultiDockController-919"><span class="linenos">919</span></a>
</span><span id="MultiDockController-920"><a href="#MultiDockController-920"><span class="linenos">920</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
</span><span id="MultiDockController-921"><a href="#MultiDockController-921"><span class="linenos">921</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">MultiDockView</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">HDRcontroller</span><span class="p">)</span>
</span><span id="MultiDockController-922"><a href="#MultiDockController-922"><span class="linenos">922</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="MultiDockController-923"><a href="#MultiDockController-923"><span class="linenos">923</span></a>    <span class="c1"># ---------------------------------------------------------------------------------------</span>
</span><span id="MultiDockController-924"><a href="#MultiDockController-924"><span class="linenos">924</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">activateEDIT</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
</span><span id="MultiDockController-925"><a href="#MultiDockController-925"><span class="linenos">925</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MultiDockController-926"><a href="#MultiDockController-926"><span class="linenos">926</span></a><span class="sd">        Activate the image editing panel.</span>
</span><span id="MultiDockController-927"><a href="#MultiDockController-927"><span class="linenos">927</span></a><span class="sd">        </span>
</span><span id="MultiDockController-928"><a href="#MultiDockController-928"><span class="linenos">928</span></a><span class="sd">        Switches the interface to the image editing mode, providing access</span>
</span><span id="MultiDockController-929"><a href="#MultiDockController-929"><span class="linenos">929</span></a><span class="sd">        to exposure, contrast, tone curves, color editing, and other HDR</span>
</span><span id="MultiDockController-930"><a href="#MultiDockController-930"><span class="linenos">930</span></a><span class="sd">        processing controls.</span>
</span><span id="MultiDockController-931"><a href="#MultiDockController-931"><span class="linenos">931</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MultiDockController-932"><a href="#MultiDockController-932"><span class="linenos">932</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">switch</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span><span id="MultiDockController-933"><a href="#MultiDockController-933"><span class="linenos">933</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">activateINFO</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
</span><span id="MultiDockController-934"><a href="#MultiDockController-934"><span class="linenos">934</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MultiDockController-935"><a href="#MultiDockController-935"><span class="linenos">935</span></a><span class="sd">        Activate the image information panel.</span>
</span><span id="MultiDockController-936"><a href="#MultiDockController-936"><span class="linenos">936</span></a><span class="sd">        </span>
</span><span id="MultiDockController-937"><a href="#MultiDockController-937"><span class="linenos">937</span></a><span class="sd">        Switches the interface to the metadata and information display mode,</span>
</span><span id="MultiDockController-938"><a href="#MultiDockController-938"><span class="linenos">938</span></a><span class="sd">        showing EXIF data, processing history, and image properties.</span>
</span><span id="MultiDockController-939"><a href="#MultiDockController-939"><span class="linenos">939</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MultiDockController-940"><a href="#MultiDockController-940"><span class="linenos">940</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">switch</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="MultiDockController-941"><a href="#MultiDockController-941"><span class="linenos">941</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">activateMIAM</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>  
</span><span id="MultiDockController-942"><a href="#MultiDockController-942"><span class="linenos">942</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MultiDockController-943"><a href="#MultiDockController-943"><span class="linenos">943</span></a><span class="sd">        Activate the aesthetics analysis panel.</span>
</span><span id="MultiDockController-944"><a href="#MultiDockController-944"><span class="linenos">944</span></a><span class="sd">        </span>
</span><span id="MultiDockController-945"><a href="#MultiDockController-945"><span class="linenos">945</span></a><span class="sd">        Switches the interface to the MIAM (aesthetics) analysis mode,</span>
</span><span id="MultiDockController-946"><a href="#MultiDockController-946"><span class="linenos">946</span></a><span class="sd">        displaying image quality metrics, color palette analysis, and</span>
</span><span id="MultiDockController-947"><a href="#MultiDockController-947"><span class="linenos">947</span></a><span class="sd">        aesthetic scoring information.</span>
</span><span id="MultiDockController-948"><a href="#MultiDockController-948"><span class="linenos">948</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MultiDockController-949"><a href="#MultiDockController-949"><span class="linenos">949</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">switch</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</span><span id="MultiDockController-950"><a href="#MultiDockController-950"><span class="linenos">950</span></a>    <span class="c1"># ---------------------------------------------------------------------------------------</span>
</span><span id="MultiDockController-951"><a href="#MultiDockController-951"><span class="linenos">951</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">switch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">nb</span><span class="p">):</span>
</span><span id="MultiDockController-952"><a href="#MultiDockController-952"><span class="linenos">952</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MultiDockController-953"><a href="#MultiDockController-953"><span class="linenos">953</span></a><span class="sd">        Switch to the specified panel number.</span>
</span><span id="MultiDockController-954"><a href="#MultiDockController-954"><span class="linenos">954</span></a><span class="sd">        </span>
</span><span id="MultiDockController-955"><a href="#MultiDockController-955"><span class="linenos">955</span></a><span class="sd">        Args:</span>
</span><span id="MultiDockController-956"><a href="#MultiDockController-956"><span class="linenos">956</span></a><span class="sd">            nb (int): Panel index (0=EDIT, 1=INFO, 2=MIAM)</span>
</span><span id="MultiDockController-957"><a href="#MultiDockController-957"><span class="linenos">957</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MultiDockController-958"><a href="#MultiDockController-958"><span class="linenos">958</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>  <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; MultiDockController.switch()&quot;</span><span class="p">)</span>
</span><span id="MultiDockController-959"><a href="#MultiDockController-959"><span class="linenos">959</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">switch</span><span class="p">(</span><span class="n">nb</span><span class="p">)</span>
</span><span id="MultiDockController-960"><a href="#MultiDockController-960"><span class="linenos">960</span></a>    <span class="c1"># --------------------------------------------------------------------------------------</span>
</span><span id="MultiDockController-961"><a href="#MultiDockController-961"><span class="linenos">961</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setProcessPipe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">processPipe</span><span class="p">):</span> 
</span><span id="MultiDockController-962"><a href="#MultiDockController-962"><span class="linenos">962</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MultiDockController-963"><a href="#MultiDockController-963"><span class="linenos">963</span></a><span class="sd">        Set the processing pipeline for the active panel.</span>
</span><span id="MultiDockController-964"><a href="#MultiDockController-964"><span class="linenos">964</span></a><span class="sd">        </span>
</span><span id="MultiDockController-965"><a href="#MultiDockController-965"><span class="linenos">965</span></a><span class="sd">        Propagates the processing pipeline to the currently active panel,</span>
</span><span id="MultiDockController-966"><a href="#MultiDockController-966"><span class="linenos">966</span></a><span class="sd">        ensuring that all panels work with the same image and processing state.</span>
</span><span id="MultiDockController-967"><a href="#MultiDockController-967"><span class="linenos">967</span></a><span class="sd">        </span>
</span><span id="MultiDockController-968"><a href="#MultiDockController-968"><span class="linenos">968</span></a><span class="sd">        Args:</span>
</span><span id="MultiDockController-969"><a href="#MultiDockController-969"><span class="linenos">969</span></a><span class="sd">            processPipe: Processing pipeline to apply to the active panel</span>
</span><span id="MultiDockController-970"><a href="#MultiDockController-970"><span class="linenos">970</span></a><span class="sd">            </span>
</span><span id="MultiDockController-971"><a href="#MultiDockController-971"><span class="linenos">971</span></a><span class="sd">        Returns:</span>
</span><span id="MultiDockController-972"><a href="#MultiDockController-972"><span class="linenos">972</span></a><span class="sd">            bool: True if the pipeline was successfully set, False otherwise</span>
</span><span id="MultiDockController-973"><a href="#MultiDockController-973"><span class="linenos">973</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MultiDockController-974"><a href="#MultiDockController-974"><span class="linenos">974</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; MultiDockController.setProcessPipe(&quot;</span><span class="p">,</span><span class="n">processPipe</span><span class="o">.</span><span class="n">getImage</span><span class="p">()</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
</span><span id="MultiDockController-975"><a href="#MultiDockController-975"><span class="linenos">975</span></a>
</span><span id="MultiDockController-976"><a href="#MultiDockController-976"><span class="linenos">976</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">setProcessPipe</span><span class="p">(</span><span class="n">processPipe</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Controller for managing multiple docked panels in the interface.</p>

<p>This class manages the docking system that allows switching between different
functional panels: EDIT (image editing), INFO (metadata/information), and
MIAM (aesthetics analysis). It provides seamless transitions between
different modes of interaction with the HDR images.</p>

<p>The docking system allows users to focus on specific aspects of image
processing while maintaining a consistent workflow and shared processing
pipeline state across all panels.</p>

<p>Attributes:
    - parent: Parent controller (typically AppController)
    - view (view.MultiDockView): Multi-panel view component
    - model: Data model (currently None, uses child controllers' models)</p>
</div>


                            <div id="MultiDockController.__init__" class="classattr">
                                        <input id="MultiDockController.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">MultiDockController</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">parent</span><span class="o">=</span><span class="kc">None</span>, </span><span class="param"><span class="n">HDRcontroller</span><span class="o">=</span><span class="kc">None</span></span>)</span>

                <label class="view-source-button" for="MultiDockController.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MultiDockController.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MultiDockController.__init__-910"><a href="#MultiDockController.__init__-910"><span class="linenos">910</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">HDRcontroller</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="MultiDockController.__init__-911"><a href="#MultiDockController.__init__-911"><span class="linenos">911</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MultiDockController.__init__-912"><a href="#MultiDockController.__init__-912"><span class="linenos">912</span></a><span class="sd">        Initialize the multi-dock controller.</span>
</span><span id="MultiDockController.__init__-913"><a href="#MultiDockController.__init__-913"><span class="linenos">913</span></a><span class="sd">        </span>
</span><span id="MultiDockController.__init__-914"><a href="#MultiDockController.__init__-914"><span class="linenos">914</span></a><span class="sd">        Args:</span>
</span><span id="MultiDockController.__init__-915"><a href="#MultiDockController.__init__-915"><span class="linenos">915</span></a><span class="sd">            parent: Parent controller for coordination</span>
</span><span id="MultiDockController.__init__-916"><a href="#MultiDockController.__init__-916"><span class="linenos">916</span></a><span class="sd">            HDRcontroller: HDR display controller for HDR preview integration</span>
</span><span id="MultiDockController.__init__-917"><a href="#MultiDockController.__init__-917"><span class="linenos">917</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MultiDockController.__init__-918"><a href="#MultiDockController.__init__-918"><span class="linenos">918</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; MultiDockController.__init__()&quot;</span><span class="p">)</span>
</span><span id="MultiDockController.__init__-919"><a href="#MultiDockController.__init__-919"><span class="linenos">919</span></a>
</span><span id="MultiDockController.__init__-920"><a href="#MultiDockController.__init__-920"><span class="linenos">920</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
</span><span id="MultiDockController.__init__-921"><a href="#MultiDockController.__init__-921"><span class="linenos">921</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">MultiDockView</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">HDRcontroller</span><span class="p">)</span>
</span><span id="MultiDockController.__init__-922"><a href="#MultiDockController.__init__-922"><span class="linenos">922</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="kc">None</span>
</span></pre></div>


            <div class="docstring"><p>Initialize the multi-dock controller.</p>

<p>Args:
    parent: Parent controller for coordination
    HDRcontroller: HDR display controller for HDR preview integration</p>
</div>


                            </div>
                            <div id="MultiDockController.parent" class="classattr">
                                <div class="attr variable">
            <span class="name">parent</span>

        
    </div>
    <a class="headerlink" href="#MultiDockController.parent"></a>
    
    

                            </div>
                            <div id="MultiDockController.view" class="classattr">
                                <div class="attr variable">
            <span class="name">view</span>

        
    </div>
    <a class="headerlink" href="#MultiDockController.view"></a>
    
    

                            </div>
                            <div id="MultiDockController.model" class="classattr">
                                <div class="attr variable">
            <span class="name">model</span>

        
    </div>
    <a class="headerlink" href="#MultiDockController.model"></a>
    
    

                            </div>
                            <div id="MultiDockController.activateEDIT" class="classattr">
                                        <input id="MultiDockController.activateEDIT-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">activateEDIT</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="MultiDockController.activateEDIT-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MultiDockController.activateEDIT"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MultiDockController.activateEDIT-924"><a href="#MultiDockController.activateEDIT-924"><span class="linenos">924</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">activateEDIT</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
</span><span id="MultiDockController.activateEDIT-925"><a href="#MultiDockController.activateEDIT-925"><span class="linenos">925</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MultiDockController.activateEDIT-926"><a href="#MultiDockController.activateEDIT-926"><span class="linenos">926</span></a><span class="sd">        Activate the image editing panel.</span>
</span><span id="MultiDockController.activateEDIT-927"><a href="#MultiDockController.activateEDIT-927"><span class="linenos">927</span></a><span class="sd">        </span>
</span><span id="MultiDockController.activateEDIT-928"><a href="#MultiDockController.activateEDIT-928"><span class="linenos">928</span></a><span class="sd">        Switches the interface to the image editing mode, providing access</span>
</span><span id="MultiDockController.activateEDIT-929"><a href="#MultiDockController.activateEDIT-929"><span class="linenos">929</span></a><span class="sd">        to exposure, contrast, tone curves, color editing, and other HDR</span>
</span><span id="MultiDockController.activateEDIT-930"><a href="#MultiDockController.activateEDIT-930"><span class="linenos">930</span></a><span class="sd">        processing controls.</span>
</span><span id="MultiDockController.activateEDIT-931"><a href="#MultiDockController.activateEDIT-931"><span class="linenos">931</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MultiDockController.activateEDIT-932"><a href="#MultiDockController.activateEDIT-932"><span class="linenos">932</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">switch</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Activate the image editing panel.</p>

<p>Switches the interface to the image editing mode, providing access
to exposure, contrast, tone curves, color editing, and other HDR
processing controls.</p>
</div>


                            </div>
                            <div id="MultiDockController.activateINFO" class="classattr">
                                        <input id="MultiDockController.activateINFO-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">activateINFO</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="MultiDockController.activateINFO-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MultiDockController.activateINFO"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MultiDockController.activateINFO-933"><a href="#MultiDockController.activateINFO-933"><span class="linenos">933</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">activateINFO</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
</span><span id="MultiDockController.activateINFO-934"><a href="#MultiDockController.activateINFO-934"><span class="linenos">934</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MultiDockController.activateINFO-935"><a href="#MultiDockController.activateINFO-935"><span class="linenos">935</span></a><span class="sd">        Activate the image information panel.</span>
</span><span id="MultiDockController.activateINFO-936"><a href="#MultiDockController.activateINFO-936"><span class="linenos">936</span></a><span class="sd">        </span>
</span><span id="MultiDockController.activateINFO-937"><a href="#MultiDockController.activateINFO-937"><span class="linenos">937</span></a><span class="sd">        Switches the interface to the metadata and information display mode,</span>
</span><span id="MultiDockController.activateINFO-938"><a href="#MultiDockController.activateINFO-938"><span class="linenos">938</span></a><span class="sd">        showing EXIF data, processing history, and image properties.</span>
</span><span id="MultiDockController.activateINFO-939"><a href="#MultiDockController.activateINFO-939"><span class="linenos">939</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MultiDockController.activateINFO-940"><a href="#MultiDockController.activateINFO-940"><span class="linenos">940</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">switch</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Activate the image information panel.</p>

<p>Switches the interface to the metadata and information display mode,
showing EXIF data, processing history, and image properties.</p>
</div>


                            </div>
                            <div id="MultiDockController.activateMIAM" class="classattr">
                                        <input id="MultiDockController.activateMIAM-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">activateMIAM</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="MultiDockController.activateMIAM-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MultiDockController.activateMIAM"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MultiDockController.activateMIAM-941"><a href="#MultiDockController.activateMIAM-941"><span class="linenos">941</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">activateMIAM</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>  
</span><span id="MultiDockController.activateMIAM-942"><a href="#MultiDockController.activateMIAM-942"><span class="linenos">942</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MultiDockController.activateMIAM-943"><a href="#MultiDockController.activateMIAM-943"><span class="linenos">943</span></a><span class="sd">        Activate the aesthetics analysis panel.</span>
</span><span id="MultiDockController.activateMIAM-944"><a href="#MultiDockController.activateMIAM-944"><span class="linenos">944</span></a><span class="sd">        </span>
</span><span id="MultiDockController.activateMIAM-945"><a href="#MultiDockController.activateMIAM-945"><span class="linenos">945</span></a><span class="sd">        Switches the interface to the MIAM (aesthetics) analysis mode,</span>
</span><span id="MultiDockController.activateMIAM-946"><a href="#MultiDockController.activateMIAM-946"><span class="linenos">946</span></a><span class="sd">        displaying image quality metrics, color palette analysis, and</span>
</span><span id="MultiDockController.activateMIAM-947"><a href="#MultiDockController.activateMIAM-947"><span class="linenos">947</span></a><span class="sd">        aesthetic scoring information.</span>
</span><span id="MultiDockController.activateMIAM-948"><a href="#MultiDockController.activateMIAM-948"><span class="linenos">948</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MultiDockController.activateMIAM-949"><a href="#MultiDockController.activateMIAM-949"><span class="linenos">949</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">switch</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Activate the aesthetics analysis panel.</p>

<p>Switches the interface to the MIAM (aesthetics) analysis mode,
displaying image quality metrics, color palette analysis, and
aesthetic scoring information.</p>
</div>


                            </div>
                            <div id="MultiDockController.switch" class="classattr">
                                        <input id="MultiDockController.switch-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">switch</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">nb</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="MultiDockController.switch-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MultiDockController.switch"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MultiDockController.switch-951"><a href="#MultiDockController.switch-951"><span class="linenos">951</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">switch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">nb</span><span class="p">):</span>
</span><span id="MultiDockController.switch-952"><a href="#MultiDockController.switch-952"><span class="linenos">952</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MultiDockController.switch-953"><a href="#MultiDockController.switch-953"><span class="linenos">953</span></a><span class="sd">        Switch to the specified panel number.</span>
</span><span id="MultiDockController.switch-954"><a href="#MultiDockController.switch-954"><span class="linenos">954</span></a><span class="sd">        </span>
</span><span id="MultiDockController.switch-955"><a href="#MultiDockController.switch-955"><span class="linenos">955</span></a><span class="sd">        Args:</span>
</span><span id="MultiDockController.switch-956"><a href="#MultiDockController.switch-956"><span class="linenos">956</span></a><span class="sd">            nb (int): Panel index (0=EDIT, 1=INFO, 2=MIAM)</span>
</span><span id="MultiDockController.switch-957"><a href="#MultiDockController.switch-957"><span class="linenos">957</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MultiDockController.switch-958"><a href="#MultiDockController.switch-958"><span class="linenos">958</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>  <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; MultiDockController.switch()&quot;</span><span class="p">)</span>
</span><span id="MultiDockController.switch-959"><a href="#MultiDockController.switch-959"><span class="linenos">959</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">switch</span><span class="p">(</span><span class="n">nb</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Switch to the specified panel number.</p>

<p>Args:
    nb (int): Panel index (0=EDIT, 1=INFO, 2=MIAM)</p>
</div>


                            </div>
                            <div id="MultiDockController.setProcessPipe" class="classattr">
                                        <input id="MultiDockController.setProcessPipe-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">setProcessPipe</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">processPipe</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="MultiDockController.setProcessPipe-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#MultiDockController.setProcessPipe"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="MultiDockController.setProcessPipe-961"><a href="#MultiDockController.setProcessPipe-961"><span class="linenos">961</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setProcessPipe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">processPipe</span><span class="p">):</span> 
</span><span id="MultiDockController.setProcessPipe-962"><a href="#MultiDockController.setProcessPipe-962"><span class="linenos">962</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="MultiDockController.setProcessPipe-963"><a href="#MultiDockController.setProcessPipe-963"><span class="linenos">963</span></a><span class="sd">        Set the processing pipeline for the active panel.</span>
</span><span id="MultiDockController.setProcessPipe-964"><a href="#MultiDockController.setProcessPipe-964"><span class="linenos">964</span></a><span class="sd">        </span>
</span><span id="MultiDockController.setProcessPipe-965"><a href="#MultiDockController.setProcessPipe-965"><span class="linenos">965</span></a><span class="sd">        Propagates the processing pipeline to the currently active panel,</span>
</span><span id="MultiDockController.setProcessPipe-966"><a href="#MultiDockController.setProcessPipe-966"><span class="linenos">966</span></a><span class="sd">        ensuring that all panels work with the same image and processing state.</span>
</span><span id="MultiDockController.setProcessPipe-967"><a href="#MultiDockController.setProcessPipe-967"><span class="linenos">967</span></a><span class="sd">        </span>
</span><span id="MultiDockController.setProcessPipe-968"><a href="#MultiDockController.setProcessPipe-968"><span class="linenos">968</span></a><span class="sd">        Args:</span>
</span><span id="MultiDockController.setProcessPipe-969"><a href="#MultiDockController.setProcessPipe-969"><span class="linenos">969</span></a><span class="sd">            processPipe: Processing pipeline to apply to the active panel</span>
</span><span id="MultiDockController.setProcessPipe-970"><a href="#MultiDockController.setProcessPipe-970"><span class="linenos">970</span></a><span class="sd">            </span>
</span><span id="MultiDockController.setProcessPipe-971"><a href="#MultiDockController.setProcessPipe-971"><span class="linenos">971</span></a><span class="sd">        Returns:</span>
</span><span id="MultiDockController.setProcessPipe-972"><a href="#MultiDockController.setProcessPipe-972"><span class="linenos">972</span></a><span class="sd">            bool: True if the pipeline was successfully set, False otherwise</span>
</span><span id="MultiDockController.setProcessPipe-973"><a href="#MultiDockController.setProcessPipe-973"><span class="linenos">973</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="MultiDockController.setProcessPipe-974"><a href="#MultiDockController.setProcessPipe-974"><span class="linenos">974</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; MultiDockController.setProcessPipe(&quot;</span><span class="p">,</span><span class="n">processPipe</span><span class="o">.</span><span class="n">getImage</span><span class="p">()</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
</span><span id="MultiDockController.setProcessPipe-975"><a href="#MultiDockController.setProcessPipe-975"><span class="linenos">975</span></a>
</span><span id="MultiDockController.setProcessPipe-976"><a href="#MultiDockController.setProcessPipe-976"><span class="linenos">976</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">setProcessPipe</span><span class="p">(</span><span class="n">processPipe</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Set the processing pipeline for the active panel.</p>

<p>Propagates the processing pipeline to the currently active panel,
ensuring that all panels work with the same image and processing state.</p>

<p>Args:
    processPipe: Processing pipeline to apply to the active panel</p>

<p>Returns:
    bool: True if the pipeline was successfully set, False otherwise</p>
</div>


                            </div>
                </section>
                <section id="EditImageController">
                            <input id="EditImageController-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">EditImageController</span>:

                <label class="view-source-button" for="EditImageController-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#EditImageController"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="EditImageController-980"><a href="#EditImageController-980"><span class="linenos"> 980</span></a><span class="k">class</span><span class="w"> </span><span class="nc">EditImageController</span><span class="p">:</span>
</span><span id="EditImageController-981"><a href="#EditImageController-981"><span class="linenos"> 981</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="EditImageController-982"><a href="#EditImageController-982"><span class="linenos"> 982</span></a><span class="sd">    Controller for HDR image editing interface and processing pipeline.</span>
</span><span id="EditImageController-983"><a href="#EditImageController-983"><span class="linenos"> 983</span></a><span class="sd">    </span>
</span><span id="EditImageController-984"><a href="#EditImageController-984"><span class="linenos"> 984</span></a><span class="sd">    This class manages the comprehensive HDR image editing workflow, providing</span>
</span><span id="EditImageController-985"><a href="#EditImageController-985"><span class="linenos"> 985</span></a><span class="sd">    controls for exposure, contrast, tone curves, saturation, color editing,</span>
</span><span id="EditImageController-986"><a href="#EditImageController-986"><span class="linenos"> 986</span></a><span class="sd">    geometry transformations, and processing pipeline management. It coordinates</span>
</span><span id="EditImageController-987"><a href="#EditImageController-987"><span class="linenos"> 987</span></a><span class="sd">    between the editing interface and the underlying HDR processing system.</span>
</span><span id="EditImageController-988"><a href="#EditImageController-988"><span class="linenos"> 988</span></a><span class="sd">    </span>
</span><span id="EditImageController-989"><a href="#EditImageController-989"><span class="linenos"> 989</span></a><span class="sd">    The controller handles real-time preview updates, auto-adjustment algorithms,</span>
</span><span id="EditImageController-990"><a href="#EditImageController-990"><span class="linenos"> 990</span></a><span class="sd">    parameter synchronization, and HDR display integration for immediate visual</span>
</span><span id="EditImageController-991"><a href="#EditImageController-991"><span class="linenos"> 991</span></a><span class="sd">    feedback during the editing process.</span>
</span><span id="EditImageController-992"><a href="#EditImageController-992"><span class="linenos"> 992</span></a><span class="sd">    </span>
</span><span id="EditImageController-993"><a href="#EditImageController-993"><span class="linenos"> 993</span></a><span class="sd">    Attributes:</span>
</span><span id="EditImageController-994"><a href="#EditImageController-994"><span class="linenos"> 994</span></a><span class="sd">        - parent: Parent controller for coordination</span>
</span><span id="EditImageController-995"><a href="#EditImageController-995"><span class="linenos"> 995</span></a><span class="sd">        - previewHDR (bool): Enable/disable HDR preview updates</span>
</span><span id="EditImageController-996"><a href="#EditImageController-996"><span class="linenos"> 996</span></a><span class="sd">        - controllerHDR: HDR display controller for real-time preview</span>
</span><span id="EditImageController-997"><a href="#EditImageController-997"><span class="linenos"> 997</span></a><span class="sd">        - view (view.EditImageView): Image editing interface view</span>
</span><span id="EditImageController-998"><a href="#EditImageController-998"><span class="linenos"> 998</span></a><span class="sd">        - model (model.EditImageModel): Image editing data model and processing</span>
</span><span id="EditImageController-999"><a href="#EditImageController-999"><span class="linenos"> 999</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="EditImageController-1000"><a href="#EditImageController-1000"><span class="linenos">1000</span></a>
</span><span id="EditImageController-1001"><a href="#EditImageController-1001"><span class="linenos">1001</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">HDRcontroller</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="EditImageController-1002"><a href="#EditImageController-1002"><span class="linenos">1002</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="EditImageController-1003"><a href="#EditImageController-1003"><span class="linenos">1003</span></a><span class="sd">        Initialize the image editing controller.</span>
</span><span id="EditImageController-1004"><a href="#EditImageController-1004"><span class="linenos">1004</span></a><span class="sd">        </span>
</span><span id="EditImageController-1005"><a href="#EditImageController-1005"><span class="linenos">1005</span></a><span class="sd">        Args:</span>
</span><span id="EditImageController-1006"><a href="#EditImageController-1006"><span class="linenos">1006</span></a><span class="sd">            parent: Parent controller for coordination</span>
</span><span id="EditImageController-1007"><a href="#EditImageController-1007"><span class="linenos">1007</span></a><span class="sd">            HDRcontroller: HDR display controller for real-time preview</span>
</span><span id="EditImageController-1008"><a href="#EditImageController-1008"><span class="linenos">1008</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="EditImageController-1009"><a href="#EditImageController-1009"><span class="linenos">1009</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; EditImageController.__init__(&quot;</span><span class="p">,</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
</span><span id="EditImageController-1010"><a href="#EditImageController-1010"><span class="linenos">1010</span></a>
</span><span id="EditImageController-1011"><a href="#EditImageController-1011"><span class="linenos">1011</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
</span><span id="EditImageController-1012"><a href="#EditImageController-1012"><span class="linenos">1012</span></a>
</span><span id="EditImageController-1013"><a href="#EditImageController-1013"><span class="linenos">1013</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">previewHDR</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="EditImageController-1014"><a href="#EditImageController-1014"><span class="linenos">1014</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">controllerHDR</span> <span class="o">=</span> <span class="n">HDRcontroller</span>
</span><span id="EditImageController-1015"><a href="#EditImageController-1015"><span class="linenos">1015</span></a>
</span><span id="EditImageController-1016"><a href="#EditImageController-1016"><span class="linenos">1016</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">EditImageView</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="EditImageController-1017"><a href="#EditImageController-1017"><span class="linenos">1017</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">EditImageModel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="EditImageController-1018"><a href="#EditImageController-1018"><span class="linenos">1018</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="EditImageController-1019"><a href="#EditImageController-1019"><span class="linenos">1019</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setProcessPipe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">processPipe</span><span class="p">):</span> 
</span><span id="EditImageController-1020"><a href="#EditImageController-1020"><span class="linenos">1020</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="EditImageController-1021"><a href="#EditImageController-1021"><span class="linenos">1021</span></a><span class="sd">        Set the processing pipeline for editing.</span>
</span><span id="EditImageController-1022"><a href="#EditImageController-1022"><span class="linenos">1022</span></a><span class="sd">        </span>
</span><span id="EditImageController-1023"><a href="#EditImageController-1023"><span class="linenos">1023</span></a><span class="sd">        Configures the editing interface to work with the specified processing</span>
</span><span id="EditImageController-1024"><a href="#EditImageController-1024"><span class="linenos">1024</span></a><span class="sd">        pipeline, updating all controls and displays to reflect the current</span>
</span><span id="EditImageController-1025"><a href="#EditImageController-1025"><span class="linenos">1025</span></a><span class="sd">        processing state.</span>
</span><span id="EditImageController-1026"><a href="#EditImageController-1026"><span class="linenos">1026</span></a><span class="sd">        </span>
</span><span id="EditImageController-1027"><a href="#EditImageController-1027"><span class="linenos">1027</span></a><span class="sd">        Args:</span>
</span><span id="EditImageController-1028"><a href="#EditImageController-1028"><span class="linenos">1028</span></a><span class="sd">            processPipe: Processing pipeline containing image and processing nodes</span>
</span><span id="EditImageController-1029"><a href="#EditImageController-1029"><span class="linenos">1029</span></a><span class="sd">            </span>
</span><span id="EditImageController-1030"><a href="#EditImageController-1030"><span class="linenos">1030</span></a><span class="sd">        Returns:</span>
</span><span id="EditImageController-1031"><a href="#EditImageController-1031"><span class="linenos">1031</span></a><span class="sd">            bool: True if the pipeline was successfully set, False otherwise</span>
</span><span id="EditImageController-1032"><a href="#EditImageController-1032"><span class="linenos">1032</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="EditImageController-1033"><a href="#EditImageController-1033"><span class="linenos">1033</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; EditImageController.setProcessPipe(&quot;</span><span class="p">,</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
</span><span id="EditImageController-1034"><a href="#EditImageController-1034"><span class="linenos">1034</span></a>
</span><span id="EditImageController-1035"><a href="#EditImageController-1035"><span class="linenos">1035</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setProcessPipe</span><span class="p">(</span><span class="n">processPipe</span><span class="p">):</span>
</span><span id="EditImageController-1036"><a href="#EditImageController-1036"><span class="linenos">1036</span></a>
</span><span id="EditImageController-1037"><a href="#EditImageController-1037"><span class="linenos">1037</span></a>            <span class="c1"># update view</span>
</span><span id="EditImageController-1038"><a href="#EditImageController-1038"><span class="linenos">1038</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">setProcessPipe</span><span class="p">(</span><span class="n">processPipe</span><span class="p">)</span>
</span><span id="EditImageController-1039"><a href="#EditImageController-1039"><span class="linenos">1039</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">imageWidgetController</span><span class="o">.</span><span class="n">setImage</span><span class="p">(</span><span class="n">processPipe</span><span class="o">.</span><span class="n">getImage</span><span class="p">())</span>
</span><span id="EditImageController-1040"><a href="#EditImageController-1040"><span class="linenos">1040</span></a>
</span><span id="EditImageController-1041"><a href="#EditImageController-1041"><span class="linenos">1041</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">plotToneCurve</span><span class="p">()</span>
</span><span id="EditImageController-1042"><a href="#EditImageController-1042"><span class="linenos">1042</span></a>
</span><span id="EditImageController-1043"><a href="#EditImageController-1043"><span class="linenos">1043</span></a>            <span class="c1"># update hdr viewer</span>
</span><span id="EditImageController-1044"><a href="#EditImageController-1044"><span class="linenos">1044</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">controllerHDR</span><span class="o">.</span><span class="n">displaySplash</span><span class="p">()</span>
</span><span id="EditImageController-1045"><a href="#EditImageController-1045"><span class="linenos">1045</span></a>
</span><span id="EditImageController-1046"><a href="#EditImageController-1046"><span class="linenos">1046</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="EditImageController-1047"><a href="#EditImageController-1047"><span class="linenos">1047</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="EditImageController-1048"><a href="#EditImageController-1048"><span class="linenos">1048</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span><span id="EditImageController-1049"><a href="#EditImageController-1049"><span class="linenos">1049</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="EditImageController-1050"><a href="#EditImageController-1050"><span class="linenos">1050</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getProcessPipe</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span> 
</span><span id="EditImageController-1051"><a href="#EditImageController-1051"><span class="linenos">1051</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="EditImageController-1052"><a href="#EditImageController-1052"><span class="linenos">1052</span></a><span class="sd">        Get the current processing pipeline.</span>
</span><span id="EditImageController-1053"><a href="#EditImageController-1053"><span class="linenos">1053</span></a><span class="sd">        </span>
</span><span id="EditImageController-1054"><a href="#EditImageController-1054"><span class="linenos">1054</span></a><span class="sd">        Returns:</span>
</span><span id="EditImageController-1055"><a href="#EditImageController-1055"><span class="linenos">1055</span></a><span class="sd">            ProcessPipe: Current processing pipeline with all applied operations</span>
</span><span id="EditImageController-1056"><a href="#EditImageController-1056"><span class="linenos">1056</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="EditImageController-1057"><a href="#EditImageController-1057"><span class="linenos">1057</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getProcessPipe</span><span class="p">()</span>
</span><span id="EditImageController-1058"><a href="#EditImageController-1058"><span class="linenos">1058</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="EditImageController-1059"><a href="#EditImageController-1059"><span class="linenos">1059</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">buildView</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">processPipe</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="EditImageController-1060"><a href="#EditImageController-1060"><span class="linenos">1060</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="EditImageController-1061"><a href="#EditImageController-1061"><span class="linenos">1061</span></a><span class="sd">        Build or rebuild the editing interface view.</span>
</span><span id="EditImageController-1062"><a href="#EditImageController-1062"><span class="linenos">1062</span></a><span class="sd">        </span>
</span><span id="EditImageController-1063"><a href="#EditImageController-1063"><span class="linenos">1063</span></a><span class="sd">        Reconstructs the editing interface, typically called when switching</span>
</span><span id="EditImageController-1064"><a href="#EditImageController-1064"><span class="linenos">1064</span></a><span class="sd">        between different panels or when the interface needs to be refreshed.</span>
</span><span id="EditImageController-1065"><a href="#EditImageController-1065"><span class="linenos">1065</span></a><span class="sd">        </span>
</span><span id="EditImageController-1066"><a href="#EditImageController-1066"><span class="linenos">1066</span></a><span class="sd">        Args:</span>
</span><span id="EditImageController-1067"><a href="#EditImageController-1067"><span class="linenos">1067</span></a><span class="sd">            processPipe: Optional processing pipeline to set during build</span>
</span><span id="EditImageController-1068"><a href="#EditImageController-1068"><span class="linenos">1068</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="EditImageController-1069"><a href="#EditImageController-1069"><span class="linenos">1069</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; EditImageController.buildView(&quot;</span><span class="p">,</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
</span><span id="EditImageController-1070"><a href="#EditImageController-1070"><span class="linenos">1070</span></a>
</span><span id="EditImageController-1071"><a href="#EditImageController-1071"><span class="linenos">1071</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot; called when MultiDockController recall a controller/view &quot;&quot;&quot;</span>
</span><span id="EditImageController-1072"><a href="#EditImageController-1072"><span class="linenos">1072</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">EditImageView</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">build</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="EditImageController-1073"><a href="#EditImageController-1073"><span class="linenos">1073</span></a>        <span class="k">if</span> <span class="n">processPipe</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">setProcessPipe</span><span class="p">(</span><span class="n">processPipe</span><span class="p">)</span>
</span><span id="EditImageController-1074"><a href="#EditImageController-1074"><span class="linenos">1074</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="EditImageController-1075"><a href="#EditImageController-1075"><span class="linenos">1075</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">autoExposure</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
</span><span id="EditImageController-1076"><a href="#EditImageController-1076"><span class="linenos">1076</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="EditImageController-1077"><a href="#EditImageController-1077"><span class="linenos">1077</span></a><span class="sd">        Calculate and apply optimal exposure automatically.</span>
</span><span id="EditImageController-1078"><a href="#EditImageController-1078"><span class="linenos">1078</span></a><span class="sd">        </span>
</span><span id="EditImageController-1079"><a href="#EditImageController-1079"><span class="linenos">1079</span></a><span class="sd">        Uses histogram analysis to determine the optimal exposure value that</span>
</span><span id="EditImageController-1080"><a href="#EditImageController-1080"><span class="linenos">1080</span></a><span class="sd">        maximizes dynamic range usage without clipping, then applies this</span>
</span><span id="EditImageController-1081"><a href="#EditImageController-1081"><span class="linenos">1081</span></a><span class="sd">        exposure and updates the interface controls.</span>
</span><span id="EditImageController-1082"><a href="#EditImageController-1082"><span class="linenos">1082</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="EditImageController-1083"><a href="#EditImageController-1083"><span class="linenos">1083</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; EditImageController.autoExposure(&quot;</span><span class="p">,</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
</span><span id="EditImageController-1084"><a href="#EditImageController-1084"><span class="linenos">1084</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">processpipe</span><span class="p">:</span>
</span><span id="EditImageController-1085"><a href="#EditImageController-1085"><span class="linenos">1085</span></a>      
</span><span id="EditImageController-1086"><a href="#EditImageController-1086"><span class="linenos">1086</span></a>            <span class="n">img</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">autoExposure</span><span class="p">()</span>
</span><span id="EditImageController-1087"><a href="#EditImageController-1087"><span class="linenos">1087</span></a>
</span><span id="EditImageController-1088"><a href="#EditImageController-1088"><span class="linenos">1088</span></a>            <span class="c1"># update view with computed EV</span>
</span><span id="EditImageController-1089"><a href="#EditImageController-1089"><span class="linenos">1089</span></a>            <span class="n">paramDict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getEV</span><span class="p">()</span>
</span><span id="EditImageController-1090"><a href="#EditImageController-1090"><span class="linenos">1090</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">exposure</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">paramDict</span><span class="p">[</span><span class="s1">&#39;EV&#39;</span><span class="p">])</span>
</span><span id="EditImageController-1091"><a href="#EditImageController-1091"><span class="linenos">1091</span></a>
</span><span id="EditImageController-1092"><a href="#EditImageController-1092"><span class="linenos">1092</span></a>            <span class="n">qPixmap</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">setImage</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
</span><span id="EditImageController-1093"><a href="#EditImageController-1093"><span class="linenos">1093</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">imageGalleryController</span><span class="o">.</span><span class="n">setProcessPipeWidgetQPixmap</span><span class="p">(</span><span class="n">qPixmap</span><span class="p">)</span>
</span><span id="EditImageController-1094"><a href="#EditImageController-1094"><span class="linenos">1094</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="EditImageController-1095"><a href="#EditImageController-1095"><span class="linenos">1095</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">changeExposure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">value</span><span class="p">):</span>
</span><span id="EditImageController-1096"><a href="#EditImageController-1096"><span class="linenos">1096</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="EditImageController-1097"><a href="#EditImageController-1097"><span class="linenos">1097</span></a><span class="sd">        Adjust image exposure by specified EV value.</span>
</span><span id="EditImageController-1098"><a href="#EditImageController-1098"><span class="linenos">1098</span></a><span class="sd">        </span>
</span><span id="EditImageController-1099"><a href="#EditImageController-1099"><span class="linenos">1099</span></a><span class="sd">        Args:</span>
</span><span id="EditImageController-1100"><a href="#EditImageController-1100"><span class="linenos">1100</span></a><span class="sd">            value (float): Exposure adjustment in EV stops (positive = brighter)</span>
</span><span id="EditImageController-1101"><a href="#EditImageController-1101"><span class="linenos">1101</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="EditImageController-1102"><a href="#EditImageController-1102"><span class="linenos">1102</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; EditImageController.changeExposure(&quot;</span><span class="p">,</span><span class="n">value</span><span class="p">,</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
</span><span id="EditImageController-1103"><a href="#EditImageController-1103"><span class="linenos">1103</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">processpipe</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">changeExposure</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span><span id="EditImageController-1104"><a href="#EditImageController-1104"><span class="linenos">1104</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="EditImageController-1105"><a href="#EditImageController-1105"><span class="linenos">1105</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">changeContrast</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">value</span><span class="p">):</span>
</span><span id="EditImageController-1106"><a href="#EditImageController-1106"><span class="linenos">1106</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="EditImageController-1107"><a href="#EditImageController-1107"><span class="linenos">1107</span></a><span class="sd">        Adjust image contrast by specified amount.</span>
</span><span id="EditImageController-1108"><a href="#EditImageController-1108"><span class="linenos">1108</span></a><span class="sd">        </span>
</span><span id="EditImageController-1109"><a href="#EditImageController-1109"><span class="linenos">1109</span></a><span class="sd">        Args:</span>
</span><span id="EditImageController-1110"><a href="#EditImageController-1110"><span class="linenos">1110</span></a><span class="sd">            value (float): Contrast adjustment value (positive = more contrast)</span>
</span><span id="EditImageController-1111"><a href="#EditImageController-1111"><span class="linenos">1111</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="EditImageController-1112"><a href="#EditImageController-1112"><span class="linenos">1112</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; EditImageController.changeContrast(&quot;</span><span class="p">,</span><span class="n">value</span><span class="p">,</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
</span><span id="EditImageController-1113"><a href="#EditImageController-1113"><span class="linenos">1113</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">processpipe</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">changeContrast</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span><span id="EditImageController-1114"><a href="#EditImageController-1114"><span class="linenos">1114</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="EditImageController-1115"><a href="#EditImageController-1115"><span class="linenos">1115</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">changeToneCurve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">controlPoints</span><span class="p">):</span>
</span><span id="EditImageController-1116"><a href="#EditImageController-1116"><span class="linenos">1116</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="EditImageController-1117"><a href="#EditImageController-1117"><span class="linenos">1117</span></a><span class="sd">        Modify tone curve using B-spline control points.</span>
</span><span id="EditImageController-1118"><a href="#EditImageController-1118"><span class="linenos">1118</span></a><span class="sd">        </span>
</span><span id="EditImageController-1119"><a href="#EditImageController-1119"><span class="linenos">1119</span></a><span class="sd">        Args:</span>
</span><span id="EditImageController-1120"><a href="#EditImageController-1120"><span class="linenos">1120</span></a><span class="sd">            controlPoints (dict): Control points defining the tone curve shape</span>
</span><span id="EditImageController-1121"><a href="#EditImageController-1121"><span class="linenos">1121</span></a><span class="sd">                                 with keys like &#39;shadows&#39;, &#39;highlights&#39;, etc.</span>
</span><span id="EditImageController-1122"><a href="#EditImageController-1122"><span class="linenos">1122</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="EditImageController-1123"><a href="#EditImageController-1123"><span class="linenos">1123</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; EditImageController.changeToneCurve(&quot;&quot;)&quot;</span><span class="p">)</span>
</span><span id="EditImageController-1124"><a href="#EditImageController-1124"><span class="linenos">1124</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">processpipe</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">changeToneCurve</span><span class="p">(</span><span class="n">controlPoints</span><span class="p">)</span>
</span><span id="EditImageController-1125"><a href="#EditImageController-1125"><span class="linenos">1125</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="EditImageController-1126"><a href="#EditImageController-1126"><span class="linenos">1126</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">changeLightnessMask</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">maskValues</span><span class="p">):</span>
</span><span id="EditImageController-1127"><a href="#EditImageController-1127"><span class="linenos">1127</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="EditImageController-1128"><a href="#EditImageController-1128"><span class="linenos">1128</span></a><span class="sd">        Configure lightness-based masking for tone range selection.</span>
</span><span id="EditImageController-1129"><a href="#EditImageController-1129"><span class="linenos">1129</span></a><span class="sd">        </span>
</span><span id="EditImageController-1130"><a href="#EditImageController-1130"><span class="linenos">1130</span></a><span class="sd">        Args:</span>
</span><span id="EditImageController-1131"><a href="#EditImageController-1131"><span class="linenos">1131</span></a><span class="sd">            maskValues (dict): Mask configuration for different tone ranges</span>
</span><span id="EditImageController-1132"><a href="#EditImageController-1132"><span class="linenos">1132</span></a><span class="sd">                              (shadows, blacks, mediums, whites, highlights)</span>
</span><span id="EditImageController-1133"><a href="#EditImageController-1133"><span class="linenos">1133</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="EditImageController-1134"><a href="#EditImageController-1134"><span class="linenos">1134</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; EditImageController.changeLightnessMask(&quot;</span><span class="p">,</span><span class="n">maskValues</span><span class="p">,</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
</span><span id="EditImageController-1135"><a href="#EditImageController-1135"><span class="linenos">1135</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">processpipe</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">changeLightnessMask</span><span class="p">(</span><span class="n">maskValues</span><span class="p">)</span>
</span><span id="EditImageController-1136"><a href="#EditImageController-1136"><span class="linenos">1136</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="EditImageController-1137"><a href="#EditImageController-1137"><span class="linenos">1137</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">changeSaturation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">value</span><span class="p">):</span>
</span><span id="EditImageController-1138"><a href="#EditImageController-1138"><span class="linenos">1138</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="EditImageController-1139"><a href="#EditImageController-1139"><span class="linenos">1139</span></a><span class="sd">        Adjust color saturation globally.</span>
</span><span id="EditImageController-1140"><a href="#EditImageController-1140"><span class="linenos">1140</span></a><span class="sd">        </span>
</span><span id="EditImageController-1141"><a href="#EditImageController-1141"><span class="linenos">1141</span></a><span class="sd">        Args:</span>
</span><span id="EditImageController-1142"><a href="#EditImageController-1142"><span class="linenos">1142</span></a><span class="sd">            value (float): Saturation adjustment value (positive = more saturated)</span>
</span><span id="EditImageController-1143"><a href="#EditImageController-1143"><span class="linenos">1143</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="EditImageController-1144"><a href="#EditImageController-1144"><span class="linenos">1144</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; EditImageController.changeSaturation(&quot;</span><span class="p">,</span><span class="n">value</span><span class="p">,</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
</span><span id="EditImageController-1145"><a href="#EditImageController-1145"><span class="linenos">1145</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">processpipe</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">changeSaturation</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span><span id="EditImageController-1146"><a href="#EditImageController-1146"><span class="linenos">1146</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="EditImageController-1147"><a href="#EditImageController-1147"><span class="linenos">1147</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">changeColorEditor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">values</span><span class="p">,</span> <span class="n">idName</span><span class="p">):</span>
</span><span id="EditImageController-1148"><a href="#EditImageController-1148"><span class="linenos">1148</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="EditImageController-1149"><a href="#EditImageController-1149"><span class="linenos">1149</span></a><span class="sd">        Apply selective color editing to specific color ranges.</span>
</span><span id="EditImageController-1150"><a href="#EditImageController-1150"><span class="linenos">1150</span></a><span class="sd">        </span>
</span><span id="EditImageController-1151"><a href="#EditImageController-1151"><span class="linenos">1151</span></a><span class="sd">        Args:</span>
</span><span id="EditImageController-1152"><a href="#EditImageController-1152"><span class="linenos">1152</span></a><span class="sd">            values (dict): Color editing parameters including selection criteria</span>
</span><span id="EditImageController-1153"><a href="#EditImageController-1153"><span class="linenos">1153</span></a><span class="sd">                          and editing adjustments (hue, saturation, exposure, etc.)</span>
</span><span id="EditImageController-1154"><a href="#EditImageController-1154"><span class="linenos">1154</span></a><span class="sd">            idName (str): Identifier for the color editor instance</span>
</span><span id="EditImageController-1155"><a href="#EditImageController-1155"><span class="linenos">1155</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="EditImageController-1156"><a href="#EditImageController-1156"><span class="linenos">1156</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; EditImageController.changeColorEditor(&quot;</span><span class="p">,</span><span class="n">values</span><span class="p">,</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
</span><span id="EditImageController-1157"><a href="#EditImageController-1157"><span class="linenos">1157</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">processpipe</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">changeColorEditor</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">idName</span><span class="p">)</span>
</span><span id="EditImageController-1158"><a href="#EditImageController-1158"><span class="linenos">1158</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="EditImageController-1159"><a href="#EditImageController-1159"><span class="linenos">1159</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">changeGeometry</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">values</span><span class="p">):</span>
</span><span id="EditImageController-1160"><a href="#EditImageController-1160"><span class="linenos">1160</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="EditImageController-1161"><a href="#EditImageController-1161"><span class="linenos">1161</span></a><span class="sd">        Apply geometric transformations (crop, rotation, etc.).</span>
</span><span id="EditImageController-1162"><a href="#EditImageController-1162"><span class="linenos">1162</span></a><span class="sd">        </span>
</span><span id="EditImageController-1163"><a href="#EditImageController-1163"><span class="linenos">1163</span></a><span class="sd">        Args:</span>
</span><span id="EditImageController-1164"><a href="#EditImageController-1164"><span class="linenos">1164</span></a><span class="sd">            values (dict): Geometry parameters including crop ratios,</span>
</span><span id="EditImageController-1165"><a href="#EditImageController-1165"><span class="linenos">1165</span></a><span class="sd">                          rotation angles, and positioning adjustments</span>
</span><span id="EditImageController-1166"><a href="#EditImageController-1166"><span class="linenos">1166</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="EditImageController-1167"><a href="#EditImageController-1167"><span class="linenos">1167</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; EditImageController.changeGeometry(&quot;</span><span class="p">,</span><span class="n">values</span><span class="p">,</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
</span><span id="EditImageController-1168"><a href="#EditImageController-1168"><span class="linenos">1168</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">processpipe</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">changeGeometry</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
</span><span id="EditImageController-1169"><a href="#EditImageController-1169"><span class="linenos">1169</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="EditImageController-1170"><a href="#EditImageController-1170"><span class="linenos">1170</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">updateImage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">imgTM</span><span class="p">):</span>
</span><span id="EditImageController-1171"><a href="#EditImageController-1171"><span class="linenos">1171</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="EditImageController-1172"><a href="#EditImageController-1172"><span class="linenos">1172</span></a><span class="sd">        Handle processing completion and update displays.</span>
</span><span id="EditImageController-1173"><a href="#EditImageController-1173"><span class="linenos">1173</span></a><span class="sd">        </span>
</span><span id="EditImageController-1174"><a href="#EditImageController-1174"><span class="linenos">1174</span></a><span class="sd">        Called when the processing pipeline computation is complete, updates</span>
</span><span id="EditImageController-1175"><a href="#EditImageController-1175"><span class="linenos">1175</span></a><span class="sd">        the interface display, gallery thumbnail, and optionally triggers</span>
</span><span id="EditImageController-1176"><a href="#EditImageController-1176"><span class="linenos">1176</span></a><span class="sd">        HDR preview updates.</span>
</span><span id="EditImageController-1177"><a href="#EditImageController-1177"><span class="linenos">1177</span></a><span class="sd">        </span>
</span><span id="EditImageController-1178"><a href="#EditImageController-1178"><span class="linenos">1178</span></a><span class="sd">        Args:</span>
</span><span id="EditImageController-1179"><a href="#EditImageController-1179"><span class="linenos">1179</span></a><span class="sd">            imgTM (hdrCore.image.Image): Tone-mapped image for GUI display</span>
</span><span id="EditImageController-1180"><a href="#EditImageController-1180"><span class="linenos">1180</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="EditImageController-1181"><a href="#EditImageController-1181"><span class="linenos">1181</span></a>        <span class="n">qPixmap</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">setImage</span><span class="p">(</span><span class="n">imgTM</span><span class="p">)</span>
</span><span id="EditImageController-1182"><a href="#EditImageController-1182"><span class="linenos">1182</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">imageGalleryController</span><span class="o">.</span><span class="n">setProcessPipeWidgetQPixmap</span><span class="p">(</span><span class="n">qPixmap</span><span class="p">)</span>
</span><span id="EditImageController-1183"><a href="#EditImageController-1183"><span class="linenos">1183</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">plotToneCurve</span><span class="p">()</span>
</span><span id="EditImageController-1184"><a href="#EditImageController-1184"><span class="linenos">1184</span></a>
</span><span id="EditImageController-1185"><a href="#EditImageController-1185"><span class="linenos">1185</span></a>        <span class="c1"># if aesthetics model &gt; notify required update</span>
</span><span id="EditImageController-1186"><a href="#EditImageController-1186"><span class="linenos">1186</span></a>
</span><span id="EditImageController-1187"><a href="#EditImageController-1187"><span class="linenos">1187</span></a>
</span><span id="EditImageController-1188"><a href="#EditImageController-1188"><span class="linenos">1188</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">previewHDR</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">autoPreviewHDR</span><span class="p">:</span>
</span><span id="EditImageController-1189"><a href="#EditImageController-1189"><span class="linenos">1189</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">controllerHDR</span><span class="o">.</span><span class="n">callBackUpdate</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Controller for HDR image editing interface and processing pipeline.</p>

<p>This class manages the comprehensive HDR image editing workflow, providing
controls for exposure, contrast, tone curves, saturation, color editing,
geometry transformations, and processing pipeline management. It coordinates
between the editing interface and the underlying HDR processing system.</p>

<p>The controller handles real-time preview updates, auto-adjustment algorithms,
parameter synchronization, and HDR display integration for immediate visual
feedback during the editing process.</p>

<p>Attributes:
    - parent: Parent controller for coordination
    - previewHDR (bool): Enable/disable HDR preview updates
    - controllerHDR: HDR display controller for real-time preview
    - view (view.EditImageView): Image editing interface view
    - model (model.EditImageModel): Image editing data model and processing</p>
</div>


                            <div id="EditImageController.__init__" class="classattr">
                                        <input id="EditImageController.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">EditImageController</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">parent</span><span class="o">=</span><span class="kc">None</span>, </span><span class="param"><span class="n">HDRcontroller</span><span class="o">=</span><span class="kc">None</span></span>)</span>

                <label class="view-source-button" for="EditImageController.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#EditImageController.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="EditImageController.__init__-1001"><a href="#EditImageController.__init__-1001"><span class="linenos">1001</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">HDRcontroller</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="EditImageController.__init__-1002"><a href="#EditImageController.__init__-1002"><span class="linenos">1002</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="EditImageController.__init__-1003"><a href="#EditImageController.__init__-1003"><span class="linenos">1003</span></a><span class="sd">        Initialize the image editing controller.</span>
</span><span id="EditImageController.__init__-1004"><a href="#EditImageController.__init__-1004"><span class="linenos">1004</span></a><span class="sd">        </span>
</span><span id="EditImageController.__init__-1005"><a href="#EditImageController.__init__-1005"><span class="linenos">1005</span></a><span class="sd">        Args:</span>
</span><span id="EditImageController.__init__-1006"><a href="#EditImageController.__init__-1006"><span class="linenos">1006</span></a><span class="sd">            parent: Parent controller for coordination</span>
</span><span id="EditImageController.__init__-1007"><a href="#EditImageController.__init__-1007"><span class="linenos">1007</span></a><span class="sd">            HDRcontroller: HDR display controller for real-time preview</span>
</span><span id="EditImageController.__init__-1008"><a href="#EditImageController.__init__-1008"><span class="linenos">1008</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="EditImageController.__init__-1009"><a href="#EditImageController.__init__-1009"><span class="linenos">1009</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; EditImageController.__init__(&quot;</span><span class="p">,</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
</span><span id="EditImageController.__init__-1010"><a href="#EditImageController.__init__-1010"><span class="linenos">1010</span></a>
</span><span id="EditImageController.__init__-1011"><a href="#EditImageController.__init__-1011"><span class="linenos">1011</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
</span><span id="EditImageController.__init__-1012"><a href="#EditImageController.__init__-1012"><span class="linenos">1012</span></a>
</span><span id="EditImageController.__init__-1013"><a href="#EditImageController.__init__-1013"><span class="linenos">1013</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">previewHDR</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="EditImageController.__init__-1014"><a href="#EditImageController.__init__-1014"><span class="linenos">1014</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">controllerHDR</span> <span class="o">=</span> <span class="n">HDRcontroller</span>
</span><span id="EditImageController.__init__-1015"><a href="#EditImageController.__init__-1015"><span class="linenos">1015</span></a>
</span><span id="EditImageController.__init__-1016"><a href="#EditImageController.__init__-1016"><span class="linenos">1016</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">EditImageView</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="EditImageController.__init__-1017"><a href="#EditImageController.__init__-1017"><span class="linenos">1017</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">EditImageModel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Initialize the image editing controller.</p>

<p>Args:
    parent: Parent controller for coordination
    HDRcontroller: HDR display controller for real-time preview</p>
</div>


                            </div>
                            <div id="EditImageController.parent" class="classattr">
                                <div class="attr variable">
            <span class="name">parent</span>

        
    </div>
    <a class="headerlink" href="#EditImageController.parent"></a>
    
    

                            </div>
                            <div id="EditImageController.previewHDR" class="classattr">
                                <div class="attr variable">
            <span class="name">previewHDR</span>

        
    </div>
    <a class="headerlink" href="#EditImageController.previewHDR"></a>
    
    

                            </div>
                            <div id="EditImageController.controllerHDR" class="classattr">
                                <div class="attr variable">
            <span class="name">controllerHDR</span>

        
    </div>
    <a class="headerlink" href="#EditImageController.controllerHDR"></a>
    
    

                            </div>
                            <div id="EditImageController.view" class="classattr">
                                <div class="attr variable">
            <span class="name">view</span>

        
    </div>
    <a class="headerlink" href="#EditImageController.view"></a>
    
    

                            </div>
                            <div id="EditImageController.model" class="classattr">
                                <div class="attr variable">
            <span class="name">model</span>

        
    </div>
    <a class="headerlink" href="#EditImageController.model"></a>
    
    

                            </div>
                            <div id="EditImageController.setProcessPipe" class="classattr">
                                        <input id="EditImageController.setProcessPipe-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">setProcessPipe</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">processPipe</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="EditImageController.setProcessPipe-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#EditImageController.setProcessPipe"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="EditImageController.setProcessPipe-1019"><a href="#EditImageController.setProcessPipe-1019"><span class="linenos">1019</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setProcessPipe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">processPipe</span><span class="p">):</span> 
</span><span id="EditImageController.setProcessPipe-1020"><a href="#EditImageController.setProcessPipe-1020"><span class="linenos">1020</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="EditImageController.setProcessPipe-1021"><a href="#EditImageController.setProcessPipe-1021"><span class="linenos">1021</span></a><span class="sd">        Set the processing pipeline for editing.</span>
</span><span id="EditImageController.setProcessPipe-1022"><a href="#EditImageController.setProcessPipe-1022"><span class="linenos">1022</span></a><span class="sd">        </span>
</span><span id="EditImageController.setProcessPipe-1023"><a href="#EditImageController.setProcessPipe-1023"><span class="linenos">1023</span></a><span class="sd">        Configures the editing interface to work with the specified processing</span>
</span><span id="EditImageController.setProcessPipe-1024"><a href="#EditImageController.setProcessPipe-1024"><span class="linenos">1024</span></a><span class="sd">        pipeline, updating all controls and displays to reflect the current</span>
</span><span id="EditImageController.setProcessPipe-1025"><a href="#EditImageController.setProcessPipe-1025"><span class="linenos">1025</span></a><span class="sd">        processing state.</span>
</span><span id="EditImageController.setProcessPipe-1026"><a href="#EditImageController.setProcessPipe-1026"><span class="linenos">1026</span></a><span class="sd">        </span>
</span><span id="EditImageController.setProcessPipe-1027"><a href="#EditImageController.setProcessPipe-1027"><span class="linenos">1027</span></a><span class="sd">        Args:</span>
</span><span id="EditImageController.setProcessPipe-1028"><a href="#EditImageController.setProcessPipe-1028"><span class="linenos">1028</span></a><span class="sd">            processPipe: Processing pipeline containing image and processing nodes</span>
</span><span id="EditImageController.setProcessPipe-1029"><a href="#EditImageController.setProcessPipe-1029"><span class="linenos">1029</span></a><span class="sd">            </span>
</span><span id="EditImageController.setProcessPipe-1030"><a href="#EditImageController.setProcessPipe-1030"><span class="linenos">1030</span></a><span class="sd">        Returns:</span>
</span><span id="EditImageController.setProcessPipe-1031"><a href="#EditImageController.setProcessPipe-1031"><span class="linenos">1031</span></a><span class="sd">            bool: True if the pipeline was successfully set, False otherwise</span>
</span><span id="EditImageController.setProcessPipe-1032"><a href="#EditImageController.setProcessPipe-1032"><span class="linenos">1032</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="EditImageController.setProcessPipe-1033"><a href="#EditImageController.setProcessPipe-1033"><span class="linenos">1033</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; EditImageController.setProcessPipe(&quot;</span><span class="p">,</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
</span><span id="EditImageController.setProcessPipe-1034"><a href="#EditImageController.setProcessPipe-1034"><span class="linenos">1034</span></a>
</span><span id="EditImageController.setProcessPipe-1035"><a href="#EditImageController.setProcessPipe-1035"><span class="linenos">1035</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setProcessPipe</span><span class="p">(</span><span class="n">processPipe</span><span class="p">):</span>
</span><span id="EditImageController.setProcessPipe-1036"><a href="#EditImageController.setProcessPipe-1036"><span class="linenos">1036</span></a>
</span><span id="EditImageController.setProcessPipe-1037"><a href="#EditImageController.setProcessPipe-1037"><span class="linenos">1037</span></a>            <span class="c1"># update view</span>
</span><span id="EditImageController.setProcessPipe-1038"><a href="#EditImageController.setProcessPipe-1038"><span class="linenos">1038</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">setProcessPipe</span><span class="p">(</span><span class="n">processPipe</span><span class="p">)</span>
</span><span id="EditImageController.setProcessPipe-1039"><a href="#EditImageController.setProcessPipe-1039"><span class="linenos">1039</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">imageWidgetController</span><span class="o">.</span><span class="n">setImage</span><span class="p">(</span><span class="n">processPipe</span><span class="o">.</span><span class="n">getImage</span><span class="p">())</span>
</span><span id="EditImageController.setProcessPipe-1040"><a href="#EditImageController.setProcessPipe-1040"><span class="linenos">1040</span></a>
</span><span id="EditImageController.setProcessPipe-1041"><a href="#EditImageController.setProcessPipe-1041"><span class="linenos">1041</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">plotToneCurve</span><span class="p">()</span>
</span><span id="EditImageController.setProcessPipe-1042"><a href="#EditImageController.setProcessPipe-1042"><span class="linenos">1042</span></a>
</span><span id="EditImageController.setProcessPipe-1043"><a href="#EditImageController.setProcessPipe-1043"><span class="linenos">1043</span></a>            <span class="c1"># update hdr viewer</span>
</span><span id="EditImageController.setProcessPipe-1044"><a href="#EditImageController.setProcessPipe-1044"><span class="linenos">1044</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">controllerHDR</span><span class="o">.</span><span class="n">displaySplash</span><span class="p">()</span>
</span><span id="EditImageController.setProcessPipe-1045"><a href="#EditImageController.setProcessPipe-1045"><span class="linenos">1045</span></a>
</span><span id="EditImageController.setProcessPipe-1046"><a href="#EditImageController.setProcessPipe-1046"><span class="linenos">1046</span></a>            <span class="k">return</span> <span class="kc">True</span>
</span><span id="EditImageController.setProcessPipe-1047"><a href="#EditImageController.setProcessPipe-1047"><span class="linenos">1047</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="EditImageController.setProcessPipe-1048"><a href="#EditImageController.setProcessPipe-1048"><span class="linenos">1048</span></a>            <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Set the processing pipeline for editing.</p>

<p>Configures the editing interface to work with the specified processing
pipeline, updating all controls and displays to reflect the current
processing state.</p>

<p>Args:
    processPipe: Processing pipeline containing image and processing nodes</p>

<p>Returns:
    bool: True if the pipeline was successfully set, False otherwise</p>
</div>


                            </div>
                            <div id="EditImageController.getProcessPipe" class="classattr">
                                        <input id="EditImageController.getProcessPipe-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">getProcessPipe</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="EditImageController.getProcessPipe-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#EditImageController.getProcessPipe"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="EditImageController.getProcessPipe-1050"><a href="#EditImageController.getProcessPipe-1050"><span class="linenos">1050</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getProcessPipe</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="p">:</span> 
</span><span id="EditImageController.getProcessPipe-1051"><a href="#EditImageController.getProcessPipe-1051"><span class="linenos">1051</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="EditImageController.getProcessPipe-1052"><a href="#EditImageController.getProcessPipe-1052"><span class="linenos">1052</span></a><span class="sd">        Get the current processing pipeline.</span>
</span><span id="EditImageController.getProcessPipe-1053"><a href="#EditImageController.getProcessPipe-1053"><span class="linenos">1053</span></a><span class="sd">        </span>
</span><span id="EditImageController.getProcessPipe-1054"><a href="#EditImageController.getProcessPipe-1054"><span class="linenos">1054</span></a><span class="sd">        Returns:</span>
</span><span id="EditImageController.getProcessPipe-1055"><a href="#EditImageController.getProcessPipe-1055"><span class="linenos">1055</span></a><span class="sd">            ProcessPipe: Current processing pipeline with all applied operations</span>
</span><span id="EditImageController.getProcessPipe-1056"><a href="#EditImageController.getProcessPipe-1056"><span class="linenos">1056</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="EditImageController.getProcessPipe-1057"><a href="#EditImageController.getProcessPipe-1057"><span class="linenos">1057</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getProcessPipe</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Get the current processing pipeline.</p>

<p>Returns:
    ProcessPipe: Current processing pipeline with all applied operations</p>
</div>


                            </div>
                            <div id="EditImageController.buildView" class="classattr">
                                        <input id="EditImageController.buildView-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">buildView</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">processPipe</span><span class="o">=</span><span class="kc">None</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="EditImageController.buildView-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#EditImageController.buildView"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="EditImageController.buildView-1059"><a href="#EditImageController.buildView-1059"><span class="linenos">1059</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">buildView</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">processPipe</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="EditImageController.buildView-1060"><a href="#EditImageController.buildView-1060"><span class="linenos">1060</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="EditImageController.buildView-1061"><a href="#EditImageController.buildView-1061"><span class="linenos">1061</span></a><span class="sd">        Build or rebuild the editing interface view.</span>
</span><span id="EditImageController.buildView-1062"><a href="#EditImageController.buildView-1062"><span class="linenos">1062</span></a><span class="sd">        </span>
</span><span id="EditImageController.buildView-1063"><a href="#EditImageController.buildView-1063"><span class="linenos">1063</span></a><span class="sd">        Reconstructs the editing interface, typically called when switching</span>
</span><span id="EditImageController.buildView-1064"><a href="#EditImageController.buildView-1064"><span class="linenos">1064</span></a><span class="sd">        between different panels or when the interface needs to be refreshed.</span>
</span><span id="EditImageController.buildView-1065"><a href="#EditImageController.buildView-1065"><span class="linenos">1065</span></a><span class="sd">        </span>
</span><span id="EditImageController.buildView-1066"><a href="#EditImageController.buildView-1066"><span class="linenos">1066</span></a><span class="sd">        Args:</span>
</span><span id="EditImageController.buildView-1067"><a href="#EditImageController.buildView-1067"><span class="linenos">1067</span></a><span class="sd">            processPipe: Optional processing pipeline to set during build</span>
</span><span id="EditImageController.buildView-1068"><a href="#EditImageController.buildView-1068"><span class="linenos">1068</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="EditImageController.buildView-1069"><a href="#EditImageController.buildView-1069"><span class="linenos">1069</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; EditImageController.buildView(&quot;</span><span class="p">,</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
</span><span id="EditImageController.buildView-1070"><a href="#EditImageController.buildView-1070"><span class="linenos">1070</span></a>
</span><span id="EditImageController.buildView-1071"><a href="#EditImageController.buildView-1071"><span class="linenos">1071</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot; called when MultiDockController recall a controller/view &quot;&quot;&quot;</span>
</span><span id="EditImageController.buildView-1072"><a href="#EditImageController.buildView-1072"><span class="linenos">1072</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">EditImageView</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">build</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="EditImageController.buildView-1073"><a href="#EditImageController.buildView-1073"><span class="linenos">1073</span></a>        <span class="k">if</span> <span class="n">processPipe</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">setProcessPipe</span><span class="p">(</span><span class="n">processPipe</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Build or rebuild the editing interface view.</p>

<p>Reconstructs the editing interface, typically called when switching
between different panels or when the interface needs to be refreshed.</p>

<p>Args:
    processPipe: Optional processing pipeline to set during build</p>
</div>


                            </div>
                            <div id="EditImageController.autoExposure" class="classattr">
                                        <input id="EditImageController.autoExposure-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">autoExposure</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="EditImageController.autoExposure-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#EditImageController.autoExposure"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="EditImageController.autoExposure-1075"><a href="#EditImageController.autoExposure-1075"><span class="linenos">1075</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">autoExposure</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
</span><span id="EditImageController.autoExposure-1076"><a href="#EditImageController.autoExposure-1076"><span class="linenos">1076</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="EditImageController.autoExposure-1077"><a href="#EditImageController.autoExposure-1077"><span class="linenos">1077</span></a><span class="sd">        Calculate and apply optimal exposure automatically.</span>
</span><span id="EditImageController.autoExposure-1078"><a href="#EditImageController.autoExposure-1078"><span class="linenos">1078</span></a><span class="sd">        </span>
</span><span id="EditImageController.autoExposure-1079"><a href="#EditImageController.autoExposure-1079"><span class="linenos">1079</span></a><span class="sd">        Uses histogram analysis to determine the optimal exposure value that</span>
</span><span id="EditImageController.autoExposure-1080"><a href="#EditImageController.autoExposure-1080"><span class="linenos">1080</span></a><span class="sd">        maximizes dynamic range usage without clipping, then applies this</span>
</span><span id="EditImageController.autoExposure-1081"><a href="#EditImageController.autoExposure-1081"><span class="linenos">1081</span></a><span class="sd">        exposure and updates the interface controls.</span>
</span><span id="EditImageController.autoExposure-1082"><a href="#EditImageController.autoExposure-1082"><span class="linenos">1082</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="EditImageController.autoExposure-1083"><a href="#EditImageController.autoExposure-1083"><span class="linenos">1083</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; EditImageController.autoExposure(&quot;</span><span class="p">,</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
</span><span id="EditImageController.autoExposure-1084"><a href="#EditImageController.autoExposure-1084"><span class="linenos">1084</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">processpipe</span><span class="p">:</span>
</span><span id="EditImageController.autoExposure-1085"><a href="#EditImageController.autoExposure-1085"><span class="linenos">1085</span></a>      
</span><span id="EditImageController.autoExposure-1086"><a href="#EditImageController.autoExposure-1086"><span class="linenos">1086</span></a>            <span class="n">img</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">autoExposure</span><span class="p">()</span>
</span><span id="EditImageController.autoExposure-1087"><a href="#EditImageController.autoExposure-1087"><span class="linenos">1087</span></a>
</span><span id="EditImageController.autoExposure-1088"><a href="#EditImageController.autoExposure-1088"><span class="linenos">1088</span></a>            <span class="c1"># update view with computed EV</span>
</span><span id="EditImageController.autoExposure-1089"><a href="#EditImageController.autoExposure-1089"><span class="linenos">1089</span></a>            <span class="n">paramDict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getEV</span><span class="p">()</span>
</span><span id="EditImageController.autoExposure-1090"><a href="#EditImageController.autoExposure-1090"><span class="linenos">1090</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">exposure</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">paramDict</span><span class="p">[</span><span class="s1">&#39;EV&#39;</span><span class="p">])</span>
</span><span id="EditImageController.autoExposure-1091"><a href="#EditImageController.autoExposure-1091"><span class="linenos">1091</span></a>
</span><span id="EditImageController.autoExposure-1092"><a href="#EditImageController.autoExposure-1092"><span class="linenos">1092</span></a>            <span class="n">qPixmap</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">setImage</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
</span><span id="EditImageController.autoExposure-1093"><a href="#EditImageController.autoExposure-1093"><span class="linenos">1093</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">imageGalleryController</span><span class="o">.</span><span class="n">setProcessPipeWidgetQPixmap</span><span class="p">(</span><span class="n">qPixmap</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Calculate and apply optimal exposure automatically.</p>

<p>Uses histogram analysis to determine the optimal exposure value that
maximizes dynamic range usage without clipping, then applies this
exposure and updates the interface controls.</p>
</div>


                            </div>
                            <div id="EditImageController.changeExposure" class="classattr">
                                        <input id="EditImageController.changeExposure-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">changeExposure</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">value</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="EditImageController.changeExposure-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#EditImageController.changeExposure"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="EditImageController.changeExposure-1095"><a href="#EditImageController.changeExposure-1095"><span class="linenos">1095</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">changeExposure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">value</span><span class="p">):</span>
</span><span id="EditImageController.changeExposure-1096"><a href="#EditImageController.changeExposure-1096"><span class="linenos">1096</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="EditImageController.changeExposure-1097"><a href="#EditImageController.changeExposure-1097"><span class="linenos">1097</span></a><span class="sd">        Adjust image exposure by specified EV value.</span>
</span><span id="EditImageController.changeExposure-1098"><a href="#EditImageController.changeExposure-1098"><span class="linenos">1098</span></a><span class="sd">        </span>
</span><span id="EditImageController.changeExposure-1099"><a href="#EditImageController.changeExposure-1099"><span class="linenos">1099</span></a><span class="sd">        Args:</span>
</span><span id="EditImageController.changeExposure-1100"><a href="#EditImageController.changeExposure-1100"><span class="linenos">1100</span></a><span class="sd">            value (float): Exposure adjustment in EV stops (positive = brighter)</span>
</span><span id="EditImageController.changeExposure-1101"><a href="#EditImageController.changeExposure-1101"><span class="linenos">1101</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="EditImageController.changeExposure-1102"><a href="#EditImageController.changeExposure-1102"><span class="linenos">1102</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; EditImageController.changeExposure(&quot;</span><span class="p">,</span><span class="n">value</span><span class="p">,</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
</span><span id="EditImageController.changeExposure-1103"><a href="#EditImageController.changeExposure-1103"><span class="linenos">1103</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">processpipe</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">changeExposure</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Adjust image exposure by specified EV value.</p>

<p>Args:
    value (float): Exposure adjustment in EV stops (positive = brighter)</p>
</div>


                            </div>
                            <div id="EditImageController.changeContrast" class="classattr">
                                        <input id="EditImageController.changeContrast-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">changeContrast</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">value</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="EditImageController.changeContrast-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#EditImageController.changeContrast"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="EditImageController.changeContrast-1105"><a href="#EditImageController.changeContrast-1105"><span class="linenos">1105</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">changeContrast</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">value</span><span class="p">):</span>
</span><span id="EditImageController.changeContrast-1106"><a href="#EditImageController.changeContrast-1106"><span class="linenos">1106</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="EditImageController.changeContrast-1107"><a href="#EditImageController.changeContrast-1107"><span class="linenos">1107</span></a><span class="sd">        Adjust image contrast by specified amount.</span>
</span><span id="EditImageController.changeContrast-1108"><a href="#EditImageController.changeContrast-1108"><span class="linenos">1108</span></a><span class="sd">        </span>
</span><span id="EditImageController.changeContrast-1109"><a href="#EditImageController.changeContrast-1109"><span class="linenos">1109</span></a><span class="sd">        Args:</span>
</span><span id="EditImageController.changeContrast-1110"><a href="#EditImageController.changeContrast-1110"><span class="linenos">1110</span></a><span class="sd">            value (float): Contrast adjustment value (positive = more contrast)</span>
</span><span id="EditImageController.changeContrast-1111"><a href="#EditImageController.changeContrast-1111"><span class="linenos">1111</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="EditImageController.changeContrast-1112"><a href="#EditImageController.changeContrast-1112"><span class="linenos">1112</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; EditImageController.changeContrast(&quot;</span><span class="p">,</span><span class="n">value</span><span class="p">,</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
</span><span id="EditImageController.changeContrast-1113"><a href="#EditImageController.changeContrast-1113"><span class="linenos">1113</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">processpipe</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">changeContrast</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Adjust image contrast by specified amount.</p>

<p>Args:
    value (float): Contrast adjustment value (positive = more contrast)</p>
</div>


                            </div>
                            <div id="EditImageController.changeToneCurve" class="classattr">
                                        <input id="EditImageController.changeToneCurve-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">changeToneCurve</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">controlPoints</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="EditImageController.changeToneCurve-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#EditImageController.changeToneCurve"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="EditImageController.changeToneCurve-1115"><a href="#EditImageController.changeToneCurve-1115"><span class="linenos">1115</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">changeToneCurve</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">controlPoints</span><span class="p">):</span>
</span><span id="EditImageController.changeToneCurve-1116"><a href="#EditImageController.changeToneCurve-1116"><span class="linenos">1116</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="EditImageController.changeToneCurve-1117"><a href="#EditImageController.changeToneCurve-1117"><span class="linenos">1117</span></a><span class="sd">        Modify tone curve using B-spline control points.</span>
</span><span id="EditImageController.changeToneCurve-1118"><a href="#EditImageController.changeToneCurve-1118"><span class="linenos">1118</span></a><span class="sd">        </span>
</span><span id="EditImageController.changeToneCurve-1119"><a href="#EditImageController.changeToneCurve-1119"><span class="linenos">1119</span></a><span class="sd">        Args:</span>
</span><span id="EditImageController.changeToneCurve-1120"><a href="#EditImageController.changeToneCurve-1120"><span class="linenos">1120</span></a><span class="sd">            controlPoints (dict): Control points defining the tone curve shape</span>
</span><span id="EditImageController.changeToneCurve-1121"><a href="#EditImageController.changeToneCurve-1121"><span class="linenos">1121</span></a><span class="sd">                                 with keys like &#39;shadows&#39;, &#39;highlights&#39;, etc.</span>
</span><span id="EditImageController.changeToneCurve-1122"><a href="#EditImageController.changeToneCurve-1122"><span class="linenos">1122</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="EditImageController.changeToneCurve-1123"><a href="#EditImageController.changeToneCurve-1123"><span class="linenos">1123</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; EditImageController.changeToneCurve(&quot;&quot;)&quot;</span><span class="p">)</span>
</span><span id="EditImageController.changeToneCurve-1124"><a href="#EditImageController.changeToneCurve-1124"><span class="linenos">1124</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">processpipe</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">changeToneCurve</span><span class="p">(</span><span class="n">controlPoints</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Modify tone curve using B-spline control points.</p>

<p>Args:
    controlPoints (dict): Control points defining the tone curve shape
                         with keys like 'shadows', 'highlights', etc.</p>
</div>


                            </div>
                            <div id="EditImageController.changeLightnessMask" class="classattr">
                                        <input id="EditImageController.changeLightnessMask-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">changeLightnessMask</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">maskValues</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="EditImageController.changeLightnessMask-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#EditImageController.changeLightnessMask"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="EditImageController.changeLightnessMask-1126"><a href="#EditImageController.changeLightnessMask-1126"><span class="linenos">1126</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">changeLightnessMask</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">maskValues</span><span class="p">):</span>
</span><span id="EditImageController.changeLightnessMask-1127"><a href="#EditImageController.changeLightnessMask-1127"><span class="linenos">1127</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="EditImageController.changeLightnessMask-1128"><a href="#EditImageController.changeLightnessMask-1128"><span class="linenos">1128</span></a><span class="sd">        Configure lightness-based masking for tone range selection.</span>
</span><span id="EditImageController.changeLightnessMask-1129"><a href="#EditImageController.changeLightnessMask-1129"><span class="linenos">1129</span></a><span class="sd">        </span>
</span><span id="EditImageController.changeLightnessMask-1130"><a href="#EditImageController.changeLightnessMask-1130"><span class="linenos">1130</span></a><span class="sd">        Args:</span>
</span><span id="EditImageController.changeLightnessMask-1131"><a href="#EditImageController.changeLightnessMask-1131"><span class="linenos">1131</span></a><span class="sd">            maskValues (dict): Mask configuration for different tone ranges</span>
</span><span id="EditImageController.changeLightnessMask-1132"><a href="#EditImageController.changeLightnessMask-1132"><span class="linenos">1132</span></a><span class="sd">                              (shadows, blacks, mediums, whites, highlights)</span>
</span><span id="EditImageController.changeLightnessMask-1133"><a href="#EditImageController.changeLightnessMask-1133"><span class="linenos">1133</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="EditImageController.changeLightnessMask-1134"><a href="#EditImageController.changeLightnessMask-1134"><span class="linenos">1134</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; EditImageController.changeLightnessMask(&quot;</span><span class="p">,</span><span class="n">maskValues</span><span class="p">,</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
</span><span id="EditImageController.changeLightnessMask-1135"><a href="#EditImageController.changeLightnessMask-1135"><span class="linenos">1135</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">processpipe</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">changeLightnessMask</span><span class="p">(</span><span class="n">maskValues</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Configure lightness-based masking for tone range selection.</p>

<p>Args:
    maskValues (dict): Mask configuration for different tone ranges
                      (shadows, blacks, mediums, whites, highlights)</p>
</div>


                            </div>
                            <div id="EditImageController.changeSaturation" class="classattr">
                                        <input id="EditImageController.changeSaturation-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">changeSaturation</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">value</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="EditImageController.changeSaturation-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#EditImageController.changeSaturation"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="EditImageController.changeSaturation-1137"><a href="#EditImageController.changeSaturation-1137"><span class="linenos">1137</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">changeSaturation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">value</span><span class="p">):</span>
</span><span id="EditImageController.changeSaturation-1138"><a href="#EditImageController.changeSaturation-1138"><span class="linenos">1138</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="EditImageController.changeSaturation-1139"><a href="#EditImageController.changeSaturation-1139"><span class="linenos">1139</span></a><span class="sd">        Adjust color saturation globally.</span>
</span><span id="EditImageController.changeSaturation-1140"><a href="#EditImageController.changeSaturation-1140"><span class="linenos">1140</span></a><span class="sd">        </span>
</span><span id="EditImageController.changeSaturation-1141"><a href="#EditImageController.changeSaturation-1141"><span class="linenos">1141</span></a><span class="sd">        Args:</span>
</span><span id="EditImageController.changeSaturation-1142"><a href="#EditImageController.changeSaturation-1142"><span class="linenos">1142</span></a><span class="sd">            value (float): Saturation adjustment value (positive = more saturated)</span>
</span><span id="EditImageController.changeSaturation-1143"><a href="#EditImageController.changeSaturation-1143"><span class="linenos">1143</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="EditImageController.changeSaturation-1144"><a href="#EditImageController.changeSaturation-1144"><span class="linenos">1144</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; EditImageController.changeSaturation(&quot;</span><span class="p">,</span><span class="n">value</span><span class="p">,</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
</span><span id="EditImageController.changeSaturation-1145"><a href="#EditImageController.changeSaturation-1145"><span class="linenos">1145</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">processpipe</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">changeSaturation</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Adjust color saturation globally.</p>

<p>Args:
    value (float): Saturation adjustment value (positive = more saturated)</p>
</div>


                            </div>
                            <div id="EditImageController.changeColorEditor" class="classattr">
                                        <input id="EditImageController.changeColorEditor-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">changeColorEditor</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">values</span>, </span><span class="param"><span class="n">idName</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="EditImageController.changeColorEditor-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#EditImageController.changeColorEditor"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="EditImageController.changeColorEditor-1147"><a href="#EditImageController.changeColorEditor-1147"><span class="linenos">1147</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">changeColorEditor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">values</span><span class="p">,</span> <span class="n">idName</span><span class="p">):</span>
</span><span id="EditImageController.changeColorEditor-1148"><a href="#EditImageController.changeColorEditor-1148"><span class="linenos">1148</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="EditImageController.changeColorEditor-1149"><a href="#EditImageController.changeColorEditor-1149"><span class="linenos">1149</span></a><span class="sd">        Apply selective color editing to specific color ranges.</span>
</span><span id="EditImageController.changeColorEditor-1150"><a href="#EditImageController.changeColorEditor-1150"><span class="linenos">1150</span></a><span class="sd">        </span>
</span><span id="EditImageController.changeColorEditor-1151"><a href="#EditImageController.changeColorEditor-1151"><span class="linenos">1151</span></a><span class="sd">        Args:</span>
</span><span id="EditImageController.changeColorEditor-1152"><a href="#EditImageController.changeColorEditor-1152"><span class="linenos">1152</span></a><span class="sd">            values (dict): Color editing parameters including selection criteria</span>
</span><span id="EditImageController.changeColorEditor-1153"><a href="#EditImageController.changeColorEditor-1153"><span class="linenos">1153</span></a><span class="sd">                          and editing adjustments (hue, saturation, exposure, etc.)</span>
</span><span id="EditImageController.changeColorEditor-1154"><a href="#EditImageController.changeColorEditor-1154"><span class="linenos">1154</span></a><span class="sd">            idName (str): Identifier for the color editor instance</span>
</span><span id="EditImageController.changeColorEditor-1155"><a href="#EditImageController.changeColorEditor-1155"><span class="linenos">1155</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="EditImageController.changeColorEditor-1156"><a href="#EditImageController.changeColorEditor-1156"><span class="linenos">1156</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; EditImageController.changeColorEditor(&quot;</span><span class="p">,</span><span class="n">values</span><span class="p">,</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
</span><span id="EditImageController.changeColorEditor-1157"><a href="#EditImageController.changeColorEditor-1157"><span class="linenos">1157</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">processpipe</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">changeColorEditor</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">idName</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Apply selective color editing to specific color ranges.</p>

<p>Args:
    values (dict): Color editing parameters including selection criteria
                  and editing adjustments (hue, saturation, exposure, etc.)
    idName (str): Identifier for the color editor instance</p>
</div>


                            </div>
                            <div id="EditImageController.changeGeometry" class="classattr">
                                        <input id="EditImageController.changeGeometry-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">changeGeometry</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">values</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="EditImageController.changeGeometry-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#EditImageController.changeGeometry"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="EditImageController.changeGeometry-1159"><a href="#EditImageController.changeGeometry-1159"><span class="linenos">1159</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">changeGeometry</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">values</span><span class="p">):</span>
</span><span id="EditImageController.changeGeometry-1160"><a href="#EditImageController.changeGeometry-1160"><span class="linenos">1160</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="EditImageController.changeGeometry-1161"><a href="#EditImageController.changeGeometry-1161"><span class="linenos">1161</span></a><span class="sd">        Apply geometric transformations (crop, rotation, etc.).</span>
</span><span id="EditImageController.changeGeometry-1162"><a href="#EditImageController.changeGeometry-1162"><span class="linenos">1162</span></a><span class="sd">        </span>
</span><span id="EditImageController.changeGeometry-1163"><a href="#EditImageController.changeGeometry-1163"><span class="linenos">1163</span></a><span class="sd">        Args:</span>
</span><span id="EditImageController.changeGeometry-1164"><a href="#EditImageController.changeGeometry-1164"><span class="linenos">1164</span></a><span class="sd">            values (dict): Geometry parameters including crop ratios,</span>
</span><span id="EditImageController.changeGeometry-1165"><a href="#EditImageController.changeGeometry-1165"><span class="linenos">1165</span></a><span class="sd">                          rotation angles, and positioning adjustments</span>
</span><span id="EditImageController.changeGeometry-1166"><a href="#EditImageController.changeGeometry-1166"><span class="linenos">1166</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="EditImageController.changeGeometry-1167"><a href="#EditImageController.changeGeometry-1167"><span class="linenos">1167</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; EditImageController.changeGeometry(&quot;</span><span class="p">,</span><span class="n">values</span><span class="p">,</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
</span><span id="EditImageController.changeGeometry-1168"><a href="#EditImageController.changeGeometry-1168"><span class="linenos">1168</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">processpipe</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">changeGeometry</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Apply geometric transformations (crop, rotation, etc.).</p>

<p>Args:
    values (dict): Geometry parameters including crop ratios,
                  rotation angles, and positioning adjustments</p>
</div>


                            </div>
                            <div id="EditImageController.updateImage" class="classattr">
                                        <input id="EditImageController.updateImage-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">updateImage</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">imgTM</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="EditImageController.updateImage-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#EditImageController.updateImage"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="EditImageController.updateImage-1170"><a href="#EditImageController.updateImage-1170"><span class="linenos">1170</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">updateImage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">imgTM</span><span class="p">):</span>
</span><span id="EditImageController.updateImage-1171"><a href="#EditImageController.updateImage-1171"><span class="linenos">1171</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="EditImageController.updateImage-1172"><a href="#EditImageController.updateImage-1172"><span class="linenos">1172</span></a><span class="sd">        Handle processing completion and update displays.</span>
</span><span id="EditImageController.updateImage-1173"><a href="#EditImageController.updateImage-1173"><span class="linenos">1173</span></a><span class="sd">        </span>
</span><span id="EditImageController.updateImage-1174"><a href="#EditImageController.updateImage-1174"><span class="linenos">1174</span></a><span class="sd">        Called when the processing pipeline computation is complete, updates</span>
</span><span id="EditImageController.updateImage-1175"><a href="#EditImageController.updateImage-1175"><span class="linenos">1175</span></a><span class="sd">        the interface display, gallery thumbnail, and optionally triggers</span>
</span><span id="EditImageController.updateImage-1176"><a href="#EditImageController.updateImage-1176"><span class="linenos">1176</span></a><span class="sd">        HDR preview updates.</span>
</span><span id="EditImageController.updateImage-1177"><a href="#EditImageController.updateImage-1177"><span class="linenos">1177</span></a><span class="sd">        </span>
</span><span id="EditImageController.updateImage-1178"><a href="#EditImageController.updateImage-1178"><span class="linenos">1178</span></a><span class="sd">        Args:</span>
</span><span id="EditImageController.updateImage-1179"><a href="#EditImageController.updateImage-1179"><span class="linenos">1179</span></a><span class="sd">            imgTM (hdrCore.image.Image): Tone-mapped image for GUI display</span>
</span><span id="EditImageController.updateImage-1180"><a href="#EditImageController.updateImage-1180"><span class="linenos">1180</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="EditImageController.updateImage-1181"><a href="#EditImageController.updateImage-1181"><span class="linenos">1181</span></a>        <span class="n">qPixmap</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">setImage</span><span class="p">(</span><span class="n">imgTM</span><span class="p">)</span>
</span><span id="EditImageController.updateImage-1182"><a href="#EditImageController.updateImage-1182"><span class="linenos">1182</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">imageGalleryController</span><span class="o">.</span><span class="n">setProcessPipeWidgetQPixmap</span><span class="p">(</span><span class="n">qPixmap</span><span class="p">)</span>
</span><span id="EditImageController.updateImage-1183"><a href="#EditImageController.updateImage-1183"><span class="linenos">1183</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">plotToneCurve</span><span class="p">()</span>
</span><span id="EditImageController.updateImage-1184"><a href="#EditImageController.updateImage-1184"><span class="linenos">1184</span></a>
</span><span id="EditImageController.updateImage-1185"><a href="#EditImageController.updateImage-1185"><span class="linenos">1185</span></a>        <span class="c1"># if aesthetics model &gt; notify required update</span>
</span><span id="EditImageController.updateImage-1186"><a href="#EditImageController.updateImage-1186"><span class="linenos">1186</span></a>
</span><span id="EditImageController.updateImage-1187"><a href="#EditImageController.updateImage-1187"><span class="linenos">1187</span></a>
</span><span id="EditImageController.updateImage-1188"><a href="#EditImageController.updateImage-1188"><span class="linenos">1188</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">previewHDR</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">autoPreviewHDR</span><span class="p">:</span>
</span><span id="EditImageController.updateImage-1189"><a href="#EditImageController.updateImage-1189"><span class="linenos">1189</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">controllerHDR</span><span class="o">.</span><span class="n">callBackUpdate</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Handle processing completion and update displays.</p>

<p>Called when the processing pipeline computation is complete, updates
the interface display, gallery thumbnail, and optionally triggers
HDR preview updates.</p>

<p>Args:
    imgTM (<a href="../hdrCore/image.html#Image">hdrCore.image.Image</a>): Tone-mapped image for GUI display</p>
</div>


                            </div>
                </section>
                <section id="ImageInfoController">
                            <input id="ImageInfoController-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">ImageInfoController</span>:

                <label class="view-source-button" for="ImageInfoController-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ImageInfoController"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ImageInfoController-1193"><a href="#ImageInfoController-1193"><span class="linenos">1193</span></a><span class="k">class</span><span class="w"> </span><span class="nc">ImageInfoController</span><span class="p">:</span>
</span><span id="ImageInfoController-1194"><a href="#ImageInfoController-1194"><span class="linenos">1194</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ImageInfoController-1195"><a href="#ImageInfoController-1195"><span class="linenos">1195</span></a><span class="sd">    Controller for image information and metadata display interface.</span>
</span><span id="ImageInfoController-1196"><a href="#ImageInfoController-1196"><span class="linenos">1196</span></a><span class="sd">    </span>
</span><span id="ImageInfoController-1197"><a href="#ImageInfoController-1197"><span class="linenos">1197</span></a><span class="sd">    This class manages the display and editing of image metadata, EXIF information,</span>
</span><span id="ImageInfoController-1198"><a href="#ImageInfoController-1198"><span class="linenos">1198</span></a><span class="sd">    processing history, and other image properties. It provides a comprehensive</span>
</span><span id="ImageInfoController-1199"><a href="#ImageInfoController-1199"><span class="linenos">1199</span></a><span class="sd">    view of all technical information associated with HDR images.</span>
</span><span id="ImageInfoController-1200"><a href="#ImageInfoController-1200"><span class="linenos">1200</span></a><span class="sd">    </span>
</span><span id="ImageInfoController-1201"><a href="#ImageInfoController-1201"><span class="linenos">1201</span></a><span class="sd">    The controller handles metadata organization, user-controlled metadata</span>
</span><span id="ImageInfoController-1202"><a href="#ImageInfoController-1202"><span class="linenos">1202</span></a><span class="sd">    visibility, and metadata modification workflows while maintaining</span>
</span><span id="ImageInfoController-1203"><a href="#ImageInfoController-1203"><span class="linenos">1203</span></a><span class="sd">    data integrity throughout the editing process.</span>
</span><span id="ImageInfoController-1204"><a href="#ImageInfoController-1204"><span class="linenos">1204</span></a><span class="sd">    </span>
</span><span id="ImageInfoController-1205"><a href="#ImageInfoController-1205"><span class="linenos">1205</span></a><span class="sd">    Attributes:</span>
</span><span id="ImageInfoController-1206"><a href="#ImageInfoController-1206"><span class="linenos">1206</span></a><span class="sd">        - parent: Parent controller for coordination</span>
</span><span id="ImageInfoController-1207"><a href="#ImageInfoController-1207"><span class="linenos">1207</span></a><span class="sd">        - view (view.ImageInfoView): Metadata display interface</span>
</span><span id="ImageInfoController-1208"><a href="#ImageInfoController-1208"><span class="linenos">1208</span></a><span class="sd">        - model (model.ImageInfoModel): Metadata management model</span>
</span><span id="ImageInfoController-1209"><a href="#ImageInfoController-1209"><span class="linenos">1209</span></a><span class="sd">        - callBackActive (bool): Enable/disable callback processing</span>
</span><span id="ImageInfoController-1210"><a href="#ImageInfoController-1210"><span class="linenos">1210</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="ImageInfoController-1211"><a href="#ImageInfoController-1211"><span class="linenos">1211</span></a>
</span><span id="ImageInfoController-1212"><a href="#ImageInfoController-1212"><span class="linenos">1212</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="ImageInfoController-1213"><a href="#ImageInfoController-1213"><span class="linenos">1213</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ImageInfoController-1214"><a href="#ImageInfoController-1214"><span class="linenos">1214</span></a><span class="sd">        Initialize the image information controller.</span>
</span><span id="ImageInfoController-1215"><a href="#ImageInfoController-1215"><span class="linenos">1215</span></a><span class="sd">        </span>
</span><span id="ImageInfoController-1216"><a href="#ImageInfoController-1216"><span class="linenos">1216</span></a><span class="sd">        Args:</span>
</span><span id="ImageInfoController-1217"><a href="#ImageInfoController-1217"><span class="linenos">1217</span></a><span class="sd">            parent: Parent controller for coordination</span>
</span><span id="ImageInfoController-1218"><a href="#ImageInfoController-1218"><span class="linenos">1218</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ImageInfoController-1219"><a href="#ImageInfoController-1219"><span class="linenos">1219</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; ImageInfoController.__init__()&quot;</span><span class="p">)</span>
</span><span id="ImageInfoController-1220"><a href="#ImageInfoController-1220"><span class="linenos">1220</span></a>
</span><span id="ImageInfoController-1221"><a href="#ImageInfoController-1221"><span class="linenos">1221</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
</span><span id="ImageInfoController-1222"><a href="#ImageInfoController-1222"><span class="linenos">1222</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">ImageInfoView</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="ImageInfoController-1223"><a href="#ImageInfoController-1223"><span class="linenos">1223</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">ImageInfoModel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="ImageInfoController-1224"><a href="#ImageInfoController-1224"><span class="linenos">1224</span></a>
</span><span id="ImageInfoController-1225"><a href="#ImageInfoController-1225"><span class="linenos">1225</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="ImageInfoController-1226"><a href="#ImageInfoController-1226"><span class="linenos">1226</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="ImageInfoController-1227"><a href="#ImageInfoController-1227"><span class="linenos">1227</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setProcessPipe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">processPipe</span><span class="p">):</span> 
</span><span id="ImageInfoController-1228"><a href="#ImageInfoController-1228"><span class="linenos">1228</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ImageInfoController-1229"><a href="#ImageInfoController-1229"><span class="linenos">1229</span></a><span class="sd">        Set processing pipeline for metadata display.</span>
</span><span id="ImageInfoController-1230"><a href="#ImageInfoController-1230"><span class="linenos">1230</span></a><span class="sd">        </span>
</span><span id="ImageInfoController-1231"><a href="#ImageInfoController-1231"><span class="linenos">1231</span></a><span class="sd">        Configures the information interface to display metadata and properties</span>
</span><span id="ImageInfoController-1232"><a href="#ImageInfoController-1232"><span class="linenos">1232</span></a><span class="sd">        for the specified processing pipeline&#39;s image.</span>
</span><span id="ImageInfoController-1233"><a href="#ImageInfoController-1233"><span class="linenos">1233</span></a><span class="sd">        </span>
</span><span id="ImageInfoController-1234"><a href="#ImageInfoController-1234"><span class="linenos">1234</span></a><span class="sd">        Args:</span>
</span><span id="ImageInfoController-1235"><a href="#ImageInfoController-1235"><span class="linenos">1235</span></a><span class="sd">            processPipe: Processing pipeline containing image with metadata</span>
</span><span id="ImageInfoController-1236"><a href="#ImageInfoController-1236"><span class="linenos">1236</span></a><span class="sd">            </span>
</span><span id="ImageInfoController-1237"><a href="#ImageInfoController-1237"><span class="linenos">1237</span></a><span class="sd">        Returns:</span>
</span><span id="ImageInfoController-1238"><a href="#ImageInfoController-1238"><span class="linenos">1238</span></a><span class="sd">            bool: True (always successful for info display)</span>
</span><span id="ImageInfoController-1239"><a href="#ImageInfoController-1239"><span class="linenos">1239</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ImageInfoController-1240"><a href="#ImageInfoController-1240"><span class="linenos">1240</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; ImageInfoController.setProcessPipe(&quot;</span><span class="p">,</span><span class="n">processPipe</span><span class="o">.</span><span class="n">getImage</span><span class="p">()</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
</span><span id="ImageInfoController-1241"><a href="#ImageInfoController-1241"><span class="linenos">1241</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setProcessPipe</span><span class="p">(</span><span class="n">processPipe</span><span class="p">)</span>
</span><span id="ImageInfoController-1242"><a href="#ImageInfoController-1242"><span class="linenos">1242</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">setProcessPipe</span><span class="p">(</span><span class="n">processPipe</span><span class="p">)</span>
</span><span id="ImageInfoController-1243"><a href="#ImageInfoController-1243"><span class="linenos">1243</span></a>        <span class="k">return</span> <span class="kc">True</span>
</span><span id="ImageInfoController-1244"><a href="#ImageInfoController-1244"><span class="linenos">1244</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="ImageInfoController-1245"><a href="#ImageInfoController-1245"><span class="linenos">1245</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">buildView</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">processPipe</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="ImageInfoController-1246"><a href="#ImageInfoController-1246"><span class="linenos">1246</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ImageInfoController-1247"><a href="#ImageInfoController-1247"><span class="linenos">1247</span></a><span class="sd">        Build or rebuild the information interface view.</span>
</span><span id="ImageInfoController-1248"><a href="#ImageInfoController-1248"><span class="linenos">1248</span></a><span class="sd">        </span>
</span><span id="ImageInfoController-1249"><a href="#ImageInfoController-1249"><span class="linenos">1249</span></a><span class="sd">        Reconstructs the metadata display interface, typically called when</span>
</span><span id="ImageInfoController-1250"><a href="#ImageInfoController-1250"><span class="linenos">1250</span></a><span class="sd">        switching panels or refreshing the information display.</span>
</span><span id="ImageInfoController-1251"><a href="#ImageInfoController-1251"><span class="linenos">1251</span></a><span class="sd">        </span>
</span><span id="ImageInfoController-1252"><a href="#ImageInfoController-1252"><span class="linenos">1252</span></a><span class="sd">        Args:</span>
</span><span id="ImageInfoController-1253"><a href="#ImageInfoController-1253"><span class="linenos">1253</span></a><span class="sd">            processPipe: Optional processing pipeline to set during build</span>
</span><span id="ImageInfoController-1254"><a href="#ImageInfoController-1254"><span class="linenos">1254</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ImageInfoController-1255"><a href="#ImageInfoController-1255"><span class="linenos">1255</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; ImageInfoController.buildView()&quot;</span><span class="p">)</span>
</span><span id="ImageInfoController-1256"><a href="#ImageInfoController-1256"><span class="linenos">1256</span></a>
</span><span id="ImageInfoController-1257"><a href="#ImageInfoController-1257"><span class="linenos">1257</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot; called when MultiDockController recall a controller/view &quot;&quot;&quot;</span>
</span><span id="ImageInfoController-1258"><a href="#ImageInfoController-1258"><span class="linenos">1258</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">ImageInfoView</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="ImageInfoController-1259"><a href="#ImageInfoController-1259"><span class="linenos">1259</span></a>        <span class="k">if</span> <span class="n">processPipe</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">setProcessPipe</span><span class="p">(</span><span class="n">processPipe</span><span class="p">)</span>
</span><span id="ImageInfoController-1260"><a href="#ImageInfoController-1260"><span class="linenos">1260</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="ImageInfoController-1261"><a href="#ImageInfoController-1261"><span class="linenos">1261</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">metadataChange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">metaGroup</span><span class="p">,</span><span class="n">metaTag</span><span class="p">,</span> <span class="n">on_off</span><span class="p">):</span> 
</span><span id="ImageInfoController-1262"><a href="#ImageInfoController-1262"><span class="linenos">1262</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ImageInfoController-1263"><a href="#ImageInfoController-1263"><span class="linenos">1263</span></a><span class="sd">        Handle changes to metadata visibility or editing state.</span>
</span><span id="ImageInfoController-1264"><a href="#ImageInfoController-1264"><span class="linenos">1264</span></a><span class="sd">        </span>
</span><span id="ImageInfoController-1265"><a href="#ImageInfoController-1265"><span class="linenos">1265</span></a><span class="sd">        Processes user interactions with metadata display controls, allowing</span>
</span><span id="ImageInfoController-1266"><a href="#ImageInfoController-1266"><span class="linenos">1266</span></a><span class="sd">        users to show/hide specific metadata groups or modify metadata values.</span>
</span><span id="ImageInfoController-1267"><a href="#ImageInfoController-1267"><span class="linenos">1267</span></a><span class="sd">        </span>
</span><span id="ImageInfoController-1268"><a href="#ImageInfoController-1268"><span class="linenos">1268</span></a><span class="sd">        Args:</span>
</span><span id="ImageInfoController-1269"><a href="#ImageInfoController-1269"><span class="linenos">1269</span></a><span class="sd">            metaGroup (str): Metadata group identifier (e.g., &#39;EXIF&#39;, &#39;processing&#39;)</span>
</span><span id="ImageInfoController-1270"><a href="#ImageInfoController-1270"><span class="linenos">1270</span></a><span class="sd">            metaTag (str): Specific metadata tag within the group</span>
</span><span id="ImageInfoController-1271"><a href="#ImageInfoController-1271"><span class="linenos">1271</span></a><span class="sd">            on_off (bool): Enable/disable state for the metadata element</span>
</span><span id="ImageInfoController-1272"><a href="#ImageInfoController-1272"><span class="linenos">1272</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ImageInfoController-1273"><a href="#ImageInfoController-1273"><span class="linenos">1273</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; ImageInfoController.useCaseChange(&quot;</span><span class="p">,</span><span class="n">metaGroup</span><span class="p">,</span><span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="n">metaTag</span><span class="p">,</span><span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="n">on_off</span><span class="p">,</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
</span><span id="ImageInfoController-1274"><a href="#ImageInfoController-1274"><span class="linenos">1274</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">changeMeta</span><span class="p">(</span><span class="n">metaGroup</span><span class="p">,</span><span class="n">metaTag</span><span class="p">,</span> <span class="n">on_off</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Controller for image information and metadata display interface.</p>

<p>This class manages the display and editing of image metadata, EXIF information,
processing history, and other image properties. It provides a comprehensive
view of all technical information associated with HDR images.</p>

<p>The controller handles metadata organization, user-controlled metadata
visibility, and metadata modification workflows while maintaining
data integrity throughout the editing process.</p>

<p>Attributes:
    - parent: Parent controller for coordination
    - view (view.ImageInfoView): Metadata display interface
    - model (model.ImageInfoModel): Metadata management model
    - callBackActive (bool): Enable/disable callback processing</p>
</div>


                            <div id="ImageInfoController.__init__" class="classattr">
                                        <input id="ImageInfoController.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">ImageInfoController</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">parent</span><span class="o">=</span><span class="kc">None</span></span>)</span>

                <label class="view-source-button" for="ImageInfoController.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ImageInfoController.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ImageInfoController.__init__-1212"><a href="#ImageInfoController.__init__-1212"><span class="linenos">1212</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="ImageInfoController.__init__-1213"><a href="#ImageInfoController.__init__-1213"><span class="linenos">1213</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ImageInfoController.__init__-1214"><a href="#ImageInfoController.__init__-1214"><span class="linenos">1214</span></a><span class="sd">        Initialize the image information controller.</span>
</span><span id="ImageInfoController.__init__-1215"><a href="#ImageInfoController.__init__-1215"><span class="linenos">1215</span></a><span class="sd">        </span>
</span><span id="ImageInfoController.__init__-1216"><a href="#ImageInfoController.__init__-1216"><span class="linenos">1216</span></a><span class="sd">        Args:</span>
</span><span id="ImageInfoController.__init__-1217"><a href="#ImageInfoController.__init__-1217"><span class="linenos">1217</span></a><span class="sd">            parent: Parent controller for coordination</span>
</span><span id="ImageInfoController.__init__-1218"><a href="#ImageInfoController.__init__-1218"><span class="linenos">1218</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ImageInfoController.__init__-1219"><a href="#ImageInfoController.__init__-1219"><span class="linenos">1219</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; ImageInfoController.__init__()&quot;</span><span class="p">)</span>
</span><span id="ImageInfoController.__init__-1220"><a href="#ImageInfoController.__init__-1220"><span class="linenos">1220</span></a>
</span><span id="ImageInfoController.__init__-1221"><a href="#ImageInfoController.__init__-1221"><span class="linenos">1221</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
</span><span id="ImageInfoController.__init__-1222"><a href="#ImageInfoController.__init__-1222"><span class="linenos">1222</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">ImageInfoView</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="ImageInfoController.__init__-1223"><a href="#ImageInfoController.__init__-1223"><span class="linenos">1223</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">ImageInfoModel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="ImageInfoController.__init__-1224"><a href="#ImageInfoController.__init__-1224"><span class="linenos">1224</span></a>
</span><span id="ImageInfoController.__init__-1225"><a href="#ImageInfoController.__init__-1225"><span class="linenos">1225</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">True</span>
</span></pre></div>


            <div class="docstring"><p>Initialize the image information controller.</p>

<p>Args:
    parent: Parent controller for coordination</p>
</div>


                            </div>
                            <div id="ImageInfoController.parent" class="classattr">
                                <div class="attr variable">
            <span class="name">parent</span>

        
    </div>
    <a class="headerlink" href="#ImageInfoController.parent"></a>
    
    

                            </div>
                            <div id="ImageInfoController.view" class="classattr">
                                <div class="attr variable">
            <span class="name">view</span>

        
    </div>
    <a class="headerlink" href="#ImageInfoController.view"></a>
    
    

                            </div>
                            <div id="ImageInfoController.model" class="classattr">
                                <div class="attr variable">
            <span class="name">model</span>

        
    </div>
    <a class="headerlink" href="#ImageInfoController.model"></a>
    
    

                            </div>
                            <div id="ImageInfoController.callBackActive" class="classattr">
                                <div class="attr variable">
            <span class="name">callBackActive</span>

        
    </div>
    <a class="headerlink" href="#ImageInfoController.callBackActive"></a>
    
    

                            </div>
                            <div id="ImageInfoController.setProcessPipe" class="classattr">
                                        <input id="ImageInfoController.setProcessPipe-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">setProcessPipe</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">processPipe</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ImageInfoController.setProcessPipe-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ImageInfoController.setProcessPipe"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ImageInfoController.setProcessPipe-1227"><a href="#ImageInfoController.setProcessPipe-1227"><span class="linenos">1227</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setProcessPipe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">processPipe</span><span class="p">):</span> 
</span><span id="ImageInfoController.setProcessPipe-1228"><a href="#ImageInfoController.setProcessPipe-1228"><span class="linenos">1228</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ImageInfoController.setProcessPipe-1229"><a href="#ImageInfoController.setProcessPipe-1229"><span class="linenos">1229</span></a><span class="sd">        Set processing pipeline for metadata display.</span>
</span><span id="ImageInfoController.setProcessPipe-1230"><a href="#ImageInfoController.setProcessPipe-1230"><span class="linenos">1230</span></a><span class="sd">        </span>
</span><span id="ImageInfoController.setProcessPipe-1231"><a href="#ImageInfoController.setProcessPipe-1231"><span class="linenos">1231</span></a><span class="sd">        Configures the information interface to display metadata and properties</span>
</span><span id="ImageInfoController.setProcessPipe-1232"><a href="#ImageInfoController.setProcessPipe-1232"><span class="linenos">1232</span></a><span class="sd">        for the specified processing pipeline&#39;s image.</span>
</span><span id="ImageInfoController.setProcessPipe-1233"><a href="#ImageInfoController.setProcessPipe-1233"><span class="linenos">1233</span></a><span class="sd">        </span>
</span><span id="ImageInfoController.setProcessPipe-1234"><a href="#ImageInfoController.setProcessPipe-1234"><span class="linenos">1234</span></a><span class="sd">        Args:</span>
</span><span id="ImageInfoController.setProcessPipe-1235"><a href="#ImageInfoController.setProcessPipe-1235"><span class="linenos">1235</span></a><span class="sd">            processPipe: Processing pipeline containing image with metadata</span>
</span><span id="ImageInfoController.setProcessPipe-1236"><a href="#ImageInfoController.setProcessPipe-1236"><span class="linenos">1236</span></a><span class="sd">            </span>
</span><span id="ImageInfoController.setProcessPipe-1237"><a href="#ImageInfoController.setProcessPipe-1237"><span class="linenos">1237</span></a><span class="sd">        Returns:</span>
</span><span id="ImageInfoController.setProcessPipe-1238"><a href="#ImageInfoController.setProcessPipe-1238"><span class="linenos">1238</span></a><span class="sd">            bool: True (always successful for info display)</span>
</span><span id="ImageInfoController.setProcessPipe-1239"><a href="#ImageInfoController.setProcessPipe-1239"><span class="linenos">1239</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ImageInfoController.setProcessPipe-1240"><a href="#ImageInfoController.setProcessPipe-1240"><span class="linenos">1240</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; ImageInfoController.setProcessPipe(&quot;</span><span class="p">,</span><span class="n">processPipe</span><span class="o">.</span><span class="n">getImage</span><span class="p">()</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
</span><span id="ImageInfoController.setProcessPipe-1241"><a href="#ImageInfoController.setProcessPipe-1241"><span class="linenos">1241</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setProcessPipe</span><span class="p">(</span><span class="n">processPipe</span><span class="p">)</span>
</span><span id="ImageInfoController.setProcessPipe-1242"><a href="#ImageInfoController.setProcessPipe-1242"><span class="linenos">1242</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">setProcessPipe</span><span class="p">(</span><span class="n">processPipe</span><span class="p">)</span>
</span><span id="ImageInfoController.setProcessPipe-1243"><a href="#ImageInfoController.setProcessPipe-1243"><span class="linenos">1243</span></a>        <span class="k">return</span> <span class="kc">True</span>
</span></pre></div>


            <div class="docstring"><p>Set processing pipeline for metadata display.</p>

<p>Configures the information interface to display metadata and properties
for the specified processing pipeline's image.</p>

<p>Args:
    processPipe: Processing pipeline containing image with metadata</p>

<p>Returns:
    bool: True (always successful for info display)</p>
</div>


                            </div>
                            <div id="ImageInfoController.buildView" class="classattr">
                                        <input id="ImageInfoController.buildView-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">buildView</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">processPipe</span><span class="o">=</span><span class="kc">None</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ImageInfoController.buildView-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ImageInfoController.buildView"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ImageInfoController.buildView-1245"><a href="#ImageInfoController.buildView-1245"><span class="linenos">1245</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">buildView</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">processPipe</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="ImageInfoController.buildView-1246"><a href="#ImageInfoController.buildView-1246"><span class="linenos">1246</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ImageInfoController.buildView-1247"><a href="#ImageInfoController.buildView-1247"><span class="linenos">1247</span></a><span class="sd">        Build or rebuild the information interface view.</span>
</span><span id="ImageInfoController.buildView-1248"><a href="#ImageInfoController.buildView-1248"><span class="linenos">1248</span></a><span class="sd">        </span>
</span><span id="ImageInfoController.buildView-1249"><a href="#ImageInfoController.buildView-1249"><span class="linenos">1249</span></a><span class="sd">        Reconstructs the metadata display interface, typically called when</span>
</span><span id="ImageInfoController.buildView-1250"><a href="#ImageInfoController.buildView-1250"><span class="linenos">1250</span></a><span class="sd">        switching panels or refreshing the information display.</span>
</span><span id="ImageInfoController.buildView-1251"><a href="#ImageInfoController.buildView-1251"><span class="linenos">1251</span></a><span class="sd">        </span>
</span><span id="ImageInfoController.buildView-1252"><a href="#ImageInfoController.buildView-1252"><span class="linenos">1252</span></a><span class="sd">        Args:</span>
</span><span id="ImageInfoController.buildView-1253"><a href="#ImageInfoController.buildView-1253"><span class="linenos">1253</span></a><span class="sd">            processPipe: Optional processing pipeline to set during build</span>
</span><span id="ImageInfoController.buildView-1254"><a href="#ImageInfoController.buildView-1254"><span class="linenos">1254</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ImageInfoController.buildView-1255"><a href="#ImageInfoController.buildView-1255"><span class="linenos">1255</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; ImageInfoController.buildView()&quot;</span><span class="p">)</span>
</span><span id="ImageInfoController.buildView-1256"><a href="#ImageInfoController.buildView-1256"><span class="linenos">1256</span></a>
</span><span id="ImageInfoController.buildView-1257"><a href="#ImageInfoController.buildView-1257"><span class="linenos">1257</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot; called when MultiDockController recall a controller/view &quot;&quot;&quot;</span>
</span><span id="ImageInfoController.buildView-1258"><a href="#ImageInfoController.buildView-1258"><span class="linenos">1258</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">ImageInfoView</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="ImageInfoController.buildView-1259"><a href="#ImageInfoController.buildView-1259"><span class="linenos">1259</span></a>        <span class="k">if</span> <span class="n">processPipe</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">setProcessPipe</span><span class="p">(</span><span class="n">processPipe</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Build or rebuild the information interface view.</p>

<p>Reconstructs the metadata display interface, typically called when
switching panels or refreshing the information display.</p>

<p>Args:
    processPipe: Optional processing pipeline to set during build</p>
</div>


                            </div>
                            <div id="ImageInfoController.metadataChange" class="classattr">
                                        <input id="ImageInfoController.metadataChange-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">metadataChange</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">metaGroup</span>, </span><span class="param"><span class="n">metaTag</span>, </span><span class="param"><span class="n">on_off</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ImageInfoController.metadataChange-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ImageInfoController.metadataChange"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ImageInfoController.metadataChange-1261"><a href="#ImageInfoController.metadataChange-1261"><span class="linenos">1261</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">metadataChange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">metaGroup</span><span class="p">,</span><span class="n">metaTag</span><span class="p">,</span> <span class="n">on_off</span><span class="p">):</span> 
</span><span id="ImageInfoController.metadataChange-1262"><a href="#ImageInfoController.metadataChange-1262"><span class="linenos">1262</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ImageInfoController.metadataChange-1263"><a href="#ImageInfoController.metadataChange-1263"><span class="linenos">1263</span></a><span class="sd">        Handle changes to metadata visibility or editing state.</span>
</span><span id="ImageInfoController.metadataChange-1264"><a href="#ImageInfoController.metadataChange-1264"><span class="linenos">1264</span></a><span class="sd">        </span>
</span><span id="ImageInfoController.metadataChange-1265"><a href="#ImageInfoController.metadataChange-1265"><span class="linenos">1265</span></a><span class="sd">        Processes user interactions with metadata display controls, allowing</span>
</span><span id="ImageInfoController.metadataChange-1266"><a href="#ImageInfoController.metadataChange-1266"><span class="linenos">1266</span></a><span class="sd">        users to show/hide specific metadata groups or modify metadata values.</span>
</span><span id="ImageInfoController.metadataChange-1267"><a href="#ImageInfoController.metadataChange-1267"><span class="linenos">1267</span></a><span class="sd">        </span>
</span><span id="ImageInfoController.metadataChange-1268"><a href="#ImageInfoController.metadataChange-1268"><span class="linenos">1268</span></a><span class="sd">        Args:</span>
</span><span id="ImageInfoController.metadataChange-1269"><a href="#ImageInfoController.metadataChange-1269"><span class="linenos">1269</span></a><span class="sd">            metaGroup (str): Metadata group identifier (e.g., &#39;EXIF&#39;, &#39;processing&#39;)</span>
</span><span id="ImageInfoController.metadataChange-1270"><a href="#ImageInfoController.metadataChange-1270"><span class="linenos">1270</span></a><span class="sd">            metaTag (str): Specific metadata tag within the group</span>
</span><span id="ImageInfoController.metadataChange-1271"><a href="#ImageInfoController.metadataChange-1271"><span class="linenos">1271</span></a><span class="sd">            on_off (bool): Enable/disable state for the metadata element</span>
</span><span id="ImageInfoController.metadataChange-1272"><a href="#ImageInfoController.metadataChange-1272"><span class="linenos">1272</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ImageInfoController.metadataChange-1273"><a href="#ImageInfoController.metadataChange-1273"><span class="linenos">1273</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; ImageInfoController.useCaseChange(&quot;</span><span class="p">,</span><span class="n">metaGroup</span><span class="p">,</span><span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="n">metaTag</span><span class="p">,</span><span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="n">on_off</span><span class="p">,</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
</span><span id="ImageInfoController.metadataChange-1274"><a href="#ImageInfoController.metadataChange-1274"><span class="linenos">1274</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">changeMeta</span><span class="p">(</span><span class="n">metaGroup</span><span class="p">,</span><span class="n">metaTag</span><span class="p">,</span> <span class="n">on_off</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Handle changes to metadata visibility or editing state.</p>

<p>Processes user interactions with metadata display controls, allowing
users to show/hide specific metadata groups or modify metadata values.</p>

<p>Args:
    metaGroup (str): Metadata group identifier (e.g., 'EXIF', 'processing')
    metaTag (str): Specific metadata tag within the group
    on_off (bool): Enable/disable state for the metadata element</p>
</div>


                            </div>
                </section>
                <section id="AdvanceSliderController">
                            <input id="AdvanceSliderController-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">AdvanceSliderController</span>:

                <label class="view-source-button" for="AdvanceSliderController-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AdvanceSliderController"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AdvanceSliderController-1278"><a href="#AdvanceSliderController-1278"><span class="linenos">1278</span></a><span class="k">class</span><span class="w"> </span><span class="nc">AdvanceSliderController</span><span class="p">():</span>
</span><span id="AdvanceSliderController-1279"><a href="#AdvanceSliderController-1279"><span class="linenos">1279</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AdvanceSliderController-1280"><a href="#AdvanceSliderController-1280"><span class="linenos">1280</span></a><span class="sd">    Controller for advanced slider controls with auto-adjustment capabilities.</span>
</span><span id="AdvanceSliderController-1281"><a href="#AdvanceSliderController-1281"><span class="linenos">1281</span></a><span class="sd">    </span>
</span><span id="AdvanceSliderController-1282"><a href="#AdvanceSliderController-1282"><span class="linenos">1282</span></a><span class="sd">    This class provides enhanced slider functionality with features like automatic</span>
</span><span id="AdvanceSliderController-1283"><a href="#AdvanceSliderController-1283"><span class="linenos">1283</span></a><span class="sd">    value calculation, reset capabilities, and custom step sizes. It&#39;s used throughout</span>
</span><span id="AdvanceSliderController-1284"><a href="#AdvanceSliderController-1284"><span class="linenos">1284</span></a><span class="sd">    the HDR editing interface for precise parameter control with additional</span>
</span><span id="AdvanceSliderController-1285"><a href="#AdvanceSliderController-1285"><span class="linenos">1285</span></a><span class="sd">    automation features.</span>
</span><span id="AdvanceSliderController-1286"><a href="#AdvanceSliderController-1286"><span class="linenos">1286</span></a><span class="sd">    </span>
</span><span id="AdvanceSliderController-1287"><a href="#AdvanceSliderController-1287"><span class="linenos">1287</span></a><span class="sd">    The advanced slider combines manual adjustment with intelligent auto-adjustment</span>
</span><span id="AdvanceSliderController-1288"><a href="#AdvanceSliderController-1288"><span class="linenos">1288</span></a><span class="sd">    algorithms, allowing users to fine-tune parameters manually or rely on</span>
</span><span id="AdvanceSliderController-1289"><a href="#AdvanceSliderController-1289"><span class="linenos">1289</span></a><span class="sd">    automatic optimization algorithms.</span>
</span><span id="AdvanceSliderController-1290"><a href="#AdvanceSliderController-1290"><span class="linenos">1290</span></a><span class="sd">    </span>
</span><span id="AdvanceSliderController-1291"><a href="#AdvanceSliderController-1291"><span class="linenos">1291</span></a><span class="sd">    Attributes:</span>
</span><span id="AdvanceSliderController-1292"><a href="#AdvanceSliderController-1292"><span class="linenos">1292</span></a><span class="sd">        - parent: Parent controller for coordination</span>
</span><span id="AdvanceSliderController-1293"><a href="#AdvanceSliderController-1293"><span class="linenos">1293</span></a><span class="sd">        - view (view.AdvanceSliderView): Slider interface component</span>
</span><span id="AdvanceSliderController-1294"><a href="#AdvanceSliderController-1294"><span class="linenos">1294</span></a><span class="sd">        - model (model.AdvanceSliderModel): Slider data model</span>
</span><span id="AdvanceSliderController-1295"><a href="#AdvanceSliderController-1295"><span class="linenos">1295</span></a><span class="sd">        - step (float): Step size for slider increments</span>
</span><span id="AdvanceSliderController-1296"><a href="#AdvanceSliderController-1296"><span class="linenos">1296</span></a><span class="sd">        - defaultValue (float): Default/reset value for the slider</span>
</span><span id="AdvanceSliderController-1297"><a href="#AdvanceSliderController-1297"><span class="linenos">1297</span></a><span class="sd">        - range (tuple): Minimum and maximum values for the slider</span>
</span><span id="AdvanceSliderController-1298"><a href="#AdvanceSliderController-1298"><span class="linenos">1298</span></a><span class="sd">        - callBackActive (bool): Enable/disable callback processing</span>
</span><span id="AdvanceSliderController-1299"><a href="#AdvanceSliderController-1299"><span class="linenos">1299</span></a><span class="sd">        - callBackValueChange: Callback function for value changes</span>
</span><span id="AdvanceSliderController-1300"><a href="#AdvanceSliderController-1300"><span class="linenos">1300</span></a><span class="sd">        - callBackAutoPush: Callback function for auto-adjustment</span>
</span><span id="AdvanceSliderController-1301"><a href="#AdvanceSliderController-1301"><span class="linenos">1301</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="AdvanceSliderController-1302"><a href="#AdvanceSliderController-1302"><span class="linenos">1302</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span><span class="n">name</span><span class="p">,</span> <span class="n">defaultValue</span><span class="p">,</span> <span class="nb">range</span><span class="p">,</span> <span class="n">step</span><span class="p">,</span><span class="n">callBackValueChange</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">callBackAutoPush</span><span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="AdvanceSliderController-1303"><a href="#AdvanceSliderController-1303"><span class="linenos">1303</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AdvanceSliderController-1304"><a href="#AdvanceSliderController-1304"><span class="linenos">1304</span></a><span class="sd">        Initialize the advanced slider controller.</span>
</span><span id="AdvanceSliderController-1305"><a href="#AdvanceSliderController-1305"><span class="linenos">1305</span></a><span class="sd">        </span>
</span><span id="AdvanceSliderController-1306"><a href="#AdvanceSliderController-1306"><span class="linenos">1306</span></a><span class="sd">        Args:</span>
</span><span id="AdvanceSliderController-1307"><a href="#AdvanceSliderController-1307"><span class="linenos">1307</span></a><span class="sd">            parent: Parent controller for coordination</span>
</span><span id="AdvanceSliderController-1308"><a href="#AdvanceSliderController-1308"><span class="linenos">1308</span></a><span class="sd">            name (str): Display name for the slider</span>
</span><span id="AdvanceSliderController-1309"><a href="#AdvanceSliderController-1309"><span class="linenos">1309</span></a><span class="sd">            defaultValue (float): Default value for reset functionality</span>
</span><span id="AdvanceSliderController-1310"><a href="#AdvanceSliderController-1310"><span class="linenos">1310</span></a><span class="sd">            range (tuple): (min, max) range for slider values</span>
</span><span id="AdvanceSliderController-1311"><a href="#AdvanceSliderController-1311"><span class="linenos">1311</span></a><span class="sd">            step (float): Step size for value increments</span>
</span><span id="AdvanceSliderController-1312"><a href="#AdvanceSliderController-1312"><span class="linenos">1312</span></a><span class="sd">            callBackValueChange: Callback function for value changes</span>
</span><span id="AdvanceSliderController-1313"><a href="#AdvanceSliderController-1313"><span class="linenos">1313</span></a><span class="sd">            callBackAutoPush: Callback function for auto-adjustment</span>
</span><span id="AdvanceSliderController-1314"><a href="#AdvanceSliderController-1314"><span class="linenos">1314</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AdvanceSliderController-1315"><a href="#AdvanceSliderController-1315"><span class="linenos">1315</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; AdvanceSliderController.__init__(&quot;</span><span class="p">,</span><span class="s2">&quot;) &quot;</span><span class="p">)</span>
</span><span id="AdvanceSliderController-1316"><a href="#AdvanceSliderController-1316"><span class="linenos">1316</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
</span><span id="AdvanceSliderController-1317"><a href="#AdvanceSliderController-1317"><span class="linenos">1317</span></a>
</span><span id="AdvanceSliderController-1318"><a href="#AdvanceSliderController-1318"><span class="linenos">1318</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">AdvanceSliderView</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>  <span class="n">name</span><span class="p">,</span> <span class="n">defaultValue</span><span class="p">,</span> <span class="nb">range</span><span class="p">,</span> <span class="n">step</span><span class="p">)</span>
</span><span id="AdvanceSliderController-1319"><a href="#AdvanceSliderController-1319"><span class="linenos">1319</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">AdvanceSliderModel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">defaultValue</span><span class="p">)</span>
</span><span id="AdvanceSliderController-1320"><a href="#AdvanceSliderController-1320"><span class="linenos">1320</span></a>
</span><span id="AdvanceSliderController-1321"><a href="#AdvanceSliderController-1321"><span class="linenos">1321</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">step</span> <span class="o">=</span> <span class="n">step</span>
</span><span id="AdvanceSliderController-1322"><a href="#AdvanceSliderController-1322"><span class="linenos">1322</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">defaultValue</span> <span class="o">=</span> <span class="n">defaultValue</span>
</span><span id="AdvanceSliderController-1323"><a href="#AdvanceSliderController-1323"><span class="linenos">1323</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">range</span> <span class="o">=</span> <span class="nb">range</span>
</span><span id="AdvanceSliderController-1324"><a href="#AdvanceSliderController-1324"><span class="linenos">1324</span></a>
</span><span id="AdvanceSliderController-1325"><a href="#AdvanceSliderController-1325"><span class="linenos">1325</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="AdvanceSliderController-1326"><a href="#AdvanceSliderController-1326"><span class="linenos">1326</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackValueChange</span> <span class="o">=</span> <span class="n">callBackValueChange</span>
</span><span id="AdvanceSliderController-1327"><a href="#AdvanceSliderController-1327"><span class="linenos">1327</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackAutoPush</span> <span class="o">=</span> <span class="n">callBackAutoPush</span>
</span><span id="AdvanceSliderController-1328"><a href="#AdvanceSliderController-1328"><span class="linenos">1328</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="AdvanceSliderController-1329"><a href="#AdvanceSliderController-1329"><span class="linenos">1329</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">sliderChange</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AdvanceSliderController-1330"><a href="#AdvanceSliderController-1330"><span class="linenos">1330</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AdvanceSliderController-1331"><a href="#AdvanceSliderController-1331"><span class="linenos">1331</span></a><span class="sd">        Handle manual slider value changes.</span>
</span><span id="AdvanceSliderController-1332"><a href="#AdvanceSliderController-1332"><span class="linenos">1332</span></a><span class="sd">        </span>
</span><span id="AdvanceSliderController-1333"><a href="#AdvanceSliderController-1333"><span class="linenos">1333</span></a><span class="sd">        Processes slider movement events, updates the model and display,</span>
</span><span id="AdvanceSliderController-1334"><a href="#AdvanceSliderController-1334"><span class="linenos">1334</span></a><span class="sd">        and triggers the value change callback if active. Converts slider</span>
</span><span id="AdvanceSliderController-1335"><a href="#AdvanceSliderController-1335"><span class="linenos">1335</span></a><span class="sd">        position to actual value using the configured step size.</span>
</span><span id="AdvanceSliderController-1336"><a href="#AdvanceSliderController-1336"><span class="linenos">1336</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AdvanceSliderController-1337"><a href="#AdvanceSliderController-1337"><span class="linenos">1337</span></a>
</span><span id="AdvanceSliderController-1338"><a href="#AdvanceSliderController-1338"><span class="linenos">1338</span></a>        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">slider</span><span class="o">.</span><span class="n">value</span><span class="p">()</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">step</span>
</span><span id="AdvanceSliderController-1339"><a href="#AdvanceSliderController-1339"><span class="linenos">1339</span></a>
</span><span id="AdvanceSliderController-1340"><a href="#AdvanceSliderController-1340"><span class="linenos">1340</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CB] &gt;&gt; AdvanceSliderController.sliderChange(&quot;</span><span class="p">,</span><span class="n">value</span><span class="p">,</span><span class="s2">&quot;)[callBackActive:&quot;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span><span class="p">,</span><span class="s2">&quot;] &quot;</span><span class="p">)</span>
</span><span id="AdvanceSliderController-1341"><a href="#AdvanceSliderController-1341"><span class="linenos">1341</span></a>
</span><span id="AdvanceSliderController-1342"><a href="#AdvanceSliderController-1342"><span class="linenos">1342</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="AdvanceSliderController-1343"><a href="#AdvanceSliderController-1343"><span class="linenos">1343</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">editValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
</span><span id="AdvanceSliderController-1344"><a href="#AdvanceSliderController-1344"><span class="linenos">1344</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">callBackValueChange</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">callBackValueChange</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span><span id="AdvanceSliderController-1345"><a href="#AdvanceSliderController-1345"><span class="linenos">1345</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="AdvanceSliderController-1346"><a href="#AdvanceSliderController-1346"><span class="linenos">1346</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setValue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
</span><span id="AdvanceSliderController-1347"><a href="#AdvanceSliderController-1347"><span class="linenos">1347</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AdvanceSliderController-1348"><a href="#AdvanceSliderController-1348"><span class="linenos">1348</span></a><span class="sd">        Set slider value programmatically.</span>
</span><span id="AdvanceSliderController-1349"><a href="#AdvanceSliderController-1349"><span class="linenos">1349</span></a><span class="sd">        </span>
</span><span id="AdvanceSliderController-1350"><a href="#AdvanceSliderController-1350"><span class="linenos">1350</span></a><span class="sd">        Updates the slider position and display to reflect the specified value,</span>
</span><span id="AdvanceSliderController-1351"><a href="#AdvanceSliderController-1351"><span class="linenos">1351</span></a><span class="sd">        with optional callback suppression for initialization or batch updates.</span>
</span><span id="AdvanceSliderController-1352"><a href="#AdvanceSliderController-1352"><span class="linenos">1352</span></a><span class="sd">        </span>
</span><span id="AdvanceSliderController-1353"><a href="#AdvanceSliderController-1353"><span class="linenos">1353</span></a><span class="sd">        Args:</span>
</span><span id="AdvanceSliderController-1354"><a href="#AdvanceSliderController-1354"><span class="linenos">1354</span></a><span class="sd">            value (float): New value to set</span>
</span><span id="AdvanceSliderController-1355"><a href="#AdvanceSliderController-1355"><span class="linenos">1355</span></a><span class="sd">            callBackActive (bool, optional): Whether to trigger callbacks (default: True)</span>
</span><span id="AdvanceSliderController-1356"><a href="#AdvanceSliderController-1356"><span class="linenos">1356</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AdvanceSliderController-1357"><a href="#AdvanceSliderController-1357"><span class="linenos">1357</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; AdvanceSliderController.setValue(&quot;</span><span class="p">,</span><span class="n">value</span><span class="p">,</span><span class="s2">&quot;) &quot;</span><span class="p">)</span>
</span><span id="AdvanceSliderController-1358"><a href="#AdvanceSliderController-1358"><span class="linenos">1358</span></a>
</span><span id="AdvanceSliderController-1359"><a href="#AdvanceSliderController-1359"><span class="linenos">1359</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot; set value value in &#39;model&#39; range&quot;&quot;&quot;</span>
</span><span id="AdvanceSliderController-1360"><a href="#AdvanceSliderController-1360"><span class="linenos">1360</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="n">callBackActive</span>
</span><span id="AdvanceSliderController-1361"><a href="#AdvanceSliderController-1361"><span class="linenos">1361</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">slider</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">step</span><span class="p">))</span>
</span><span id="AdvanceSliderController-1362"><a href="#AdvanceSliderController-1362"><span class="linenos">1362</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">editValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
</span><span id="AdvanceSliderController-1363"><a href="#AdvanceSliderController-1363"><span class="linenos">1363</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
</span><span id="AdvanceSliderController-1364"><a href="#AdvanceSliderController-1364"><span class="linenos">1364</span></a>
</span><span id="AdvanceSliderController-1365"><a href="#AdvanceSliderController-1365"><span class="linenos">1365</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="AdvanceSliderController-1366"><a href="#AdvanceSliderController-1366"><span class="linenos">1366</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="AdvanceSliderController-1367"><a href="#AdvanceSliderController-1367"><span class="linenos">1367</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AdvanceSliderController-1368"><a href="#AdvanceSliderController-1368"><span class="linenos">1368</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AdvanceSliderController-1369"><a href="#AdvanceSliderController-1369"><span class="linenos">1369</span></a><span class="sd">        Reset slider to its default value.</span>
</span><span id="AdvanceSliderController-1370"><a href="#AdvanceSliderController-1370"><span class="linenos">1370</span></a><span class="sd">        </span>
</span><span id="AdvanceSliderController-1371"><a href="#AdvanceSliderController-1371"><span class="linenos">1371</span></a><span class="sd">        Restores the slider to its initial default value and triggers</span>
</span><span id="AdvanceSliderController-1372"><a href="#AdvanceSliderController-1372"><span class="linenos">1372</span></a><span class="sd">        the value change callback to update dependent processing.</span>
</span><span id="AdvanceSliderController-1373"><a href="#AdvanceSliderController-1373"><span class="linenos">1373</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AdvanceSliderController-1374"><a href="#AdvanceSliderController-1374"><span class="linenos">1374</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span> <span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CB] &gt;&gt; AdvanceSliderController.reset(&quot;</span><span class="p">,</span><span class="s2">&quot;) &quot;</span><span class="p">)</span>
</span><span id="AdvanceSliderController-1375"><a href="#AdvanceSliderController-1375"><span class="linenos">1375</span></a>
</span><span id="AdvanceSliderController-1376"><a href="#AdvanceSliderController-1376"><span class="linenos">1376</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">defaultValue</span><span class="p">,</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="AdvanceSliderController-1377"><a href="#AdvanceSliderController-1377"><span class="linenos">1377</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">callBackValueChange</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">callBackValueChange</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">defaultValue</span><span class="p">)</span>
</span><span id="AdvanceSliderController-1378"><a href="#AdvanceSliderController-1378"><span class="linenos">1378</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="AdvanceSliderController-1379"><a href="#AdvanceSliderController-1379"><span class="linenos">1379</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">auto</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AdvanceSliderController-1380"><a href="#AdvanceSliderController-1380"><span class="linenos">1380</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AdvanceSliderController-1381"><a href="#AdvanceSliderController-1381"><span class="linenos">1381</span></a><span class="sd">        Trigger automatic value calculation.</span>
</span><span id="AdvanceSliderController-1382"><a href="#AdvanceSliderController-1382"><span class="linenos">1382</span></a><span class="sd">        </span>
</span><span id="AdvanceSliderController-1383"><a href="#AdvanceSliderController-1383"><span class="linenos">1383</span></a><span class="sd">        Initiates the auto-adjustment algorithm by calling the registered</span>
</span><span id="AdvanceSliderController-1384"><a href="#AdvanceSliderController-1384"><span class="linenos">1384</span></a><span class="sd">        auto-push callback, which typically analyzes the image and sets</span>
</span><span id="AdvanceSliderController-1385"><a href="#AdvanceSliderController-1385"><span class="linenos">1385</span></a><span class="sd">        an optimal value automatically.</span>
</span><span id="AdvanceSliderController-1386"><a href="#AdvanceSliderController-1386"><span class="linenos">1386</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AdvanceSliderController-1387"><a href="#AdvanceSliderController-1387"><span class="linenos">1387</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CB] &gt;&gt; AdvanceSliderController.auto(&quot;</span><span class="p">,</span><span class="s2">&quot;) &quot;</span><span class="p">)</span>
</span><span id="AdvanceSliderController-1388"><a href="#AdvanceSliderController-1388"><span class="linenos">1388</span></a>
</span><span id="AdvanceSliderController-1389"><a href="#AdvanceSliderController-1389"><span class="linenos">1389</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">callBackAutoPush</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">callBackAutoPush</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Controller for advanced slider controls with auto-adjustment capabilities.</p>

<p>This class provides enhanced slider functionality with features like automatic
value calculation, reset capabilities, and custom step sizes. It's used throughout
the HDR editing interface for precise parameter control with additional
automation features.</p>

<p>The advanced slider combines manual adjustment with intelligent auto-adjustment
algorithms, allowing users to fine-tune parameters manually or rely on
automatic optimization algorithms.</p>

<p>Attributes:
    - parent: Parent controller for coordination
    - view (view.AdvanceSliderView): Slider interface component
    - model (model.AdvanceSliderModel): Slider data model
    - step (float): Step size for slider increments
    - defaultValue (float): Default/reset value for the slider
    - range (tuple): Minimum and maximum values for the slider
    - callBackActive (bool): Enable/disable callback processing
    - callBackValueChange: Callback function for value changes
    - callBackAutoPush: Callback function for auto-adjustment</p>
</div>


                            <div id="AdvanceSliderController.__init__" class="classattr">
                                        <input id="AdvanceSliderController.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">AdvanceSliderController</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">parent</span>,</span><span class="param">	<span class="n">name</span>,</span><span class="param">	<span class="n">defaultValue</span>,</span><span class="param">	<span class="nb">range</span>,</span><span class="param">	<span class="n">step</span>,</span><span class="param">	<span class="n">callBackValueChange</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">callBackAutoPush</span><span class="o">=</span><span class="kc">None</span></span>)</span>

                <label class="view-source-button" for="AdvanceSliderController.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AdvanceSliderController.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AdvanceSliderController.__init__-1302"><a href="#AdvanceSliderController.__init__-1302"><span class="linenos">1302</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span><span class="n">name</span><span class="p">,</span> <span class="n">defaultValue</span><span class="p">,</span> <span class="nb">range</span><span class="p">,</span> <span class="n">step</span><span class="p">,</span><span class="n">callBackValueChange</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">callBackAutoPush</span><span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="AdvanceSliderController.__init__-1303"><a href="#AdvanceSliderController.__init__-1303"><span class="linenos">1303</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AdvanceSliderController.__init__-1304"><a href="#AdvanceSliderController.__init__-1304"><span class="linenos">1304</span></a><span class="sd">        Initialize the advanced slider controller.</span>
</span><span id="AdvanceSliderController.__init__-1305"><a href="#AdvanceSliderController.__init__-1305"><span class="linenos">1305</span></a><span class="sd">        </span>
</span><span id="AdvanceSliderController.__init__-1306"><a href="#AdvanceSliderController.__init__-1306"><span class="linenos">1306</span></a><span class="sd">        Args:</span>
</span><span id="AdvanceSliderController.__init__-1307"><a href="#AdvanceSliderController.__init__-1307"><span class="linenos">1307</span></a><span class="sd">            parent: Parent controller for coordination</span>
</span><span id="AdvanceSliderController.__init__-1308"><a href="#AdvanceSliderController.__init__-1308"><span class="linenos">1308</span></a><span class="sd">            name (str): Display name for the slider</span>
</span><span id="AdvanceSliderController.__init__-1309"><a href="#AdvanceSliderController.__init__-1309"><span class="linenos">1309</span></a><span class="sd">            defaultValue (float): Default value for reset functionality</span>
</span><span id="AdvanceSliderController.__init__-1310"><a href="#AdvanceSliderController.__init__-1310"><span class="linenos">1310</span></a><span class="sd">            range (tuple): (min, max) range for slider values</span>
</span><span id="AdvanceSliderController.__init__-1311"><a href="#AdvanceSliderController.__init__-1311"><span class="linenos">1311</span></a><span class="sd">            step (float): Step size for value increments</span>
</span><span id="AdvanceSliderController.__init__-1312"><a href="#AdvanceSliderController.__init__-1312"><span class="linenos">1312</span></a><span class="sd">            callBackValueChange: Callback function for value changes</span>
</span><span id="AdvanceSliderController.__init__-1313"><a href="#AdvanceSliderController.__init__-1313"><span class="linenos">1313</span></a><span class="sd">            callBackAutoPush: Callback function for auto-adjustment</span>
</span><span id="AdvanceSliderController.__init__-1314"><a href="#AdvanceSliderController.__init__-1314"><span class="linenos">1314</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AdvanceSliderController.__init__-1315"><a href="#AdvanceSliderController.__init__-1315"><span class="linenos">1315</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; AdvanceSliderController.__init__(&quot;</span><span class="p">,</span><span class="s2">&quot;) &quot;</span><span class="p">)</span>
</span><span id="AdvanceSliderController.__init__-1316"><a href="#AdvanceSliderController.__init__-1316"><span class="linenos">1316</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
</span><span id="AdvanceSliderController.__init__-1317"><a href="#AdvanceSliderController.__init__-1317"><span class="linenos">1317</span></a>
</span><span id="AdvanceSliderController.__init__-1318"><a href="#AdvanceSliderController.__init__-1318"><span class="linenos">1318</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">AdvanceSliderView</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>  <span class="n">name</span><span class="p">,</span> <span class="n">defaultValue</span><span class="p">,</span> <span class="nb">range</span><span class="p">,</span> <span class="n">step</span><span class="p">)</span>
</span><span id="AdvanceSliderController.__init__-1319"><a href="#AdvanceSliderController.__init__-1319"><span class="linenos">1319</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">AdvanceSliderModel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">defaultValue</span><span class="p">)</span>
</span><span id="AdvanceSliderController.__init__-1320"><a href="#AdvanceSliderController.__init__-1320"><span class="linenos">1320</span></a>
</span><span id="AdvanceSliderController.__init__-1321"><a href="#AdvanceSliderController.__init__-1321"><span class="linenos">1321</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">step</span> <span class="o">=</span> <span class="n">step</span>
</span><span id="AdvanceSliderController.__init__-1322"><a href="#AdvanceSliderController.__init__-1322"><span class="linenos">1322</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">defaultValue</span> <span class="o">=</span> <span class="n">defaultValue</span>
</span><span id="AdvanceSliderController.__init__-1323"><a href="#AdvanceSliderController.__init__-1323"><span class="linenos">1323</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">range</span> <span class="o">=</span> <span class="nb">range</span>
</span><span id="AdvanceSliderController.__init__-1324"><a href="#AdvanceSliderController.__init__-1324"><span class="linenos">1324</span></a>
</span><span id="AdvanceSliderController.__init__-1325"><a href="#AdvanceSliderController.__init__-1325"><span class="linenos">1325</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="AdvanceSliderController.__init__-1326"><a href="#AdvanceSliderController.__init__-1326"><span class="linenos">1326</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackValueChange</span> <span class="o">=</span> <span class="n">callBackValueChange</span>
</span><span id="AdvanceSliderController.__init__-1327"><a href="#AdvanceSliderController.__init__-1327"><span class="linenos">1327</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackAutoPush</span> <span class="o">=</span> <span class="n">callBackAutoPush</span>
</span></pre></div>


            <div class="docstring"><p>Initialize the advanced slider controller.</p>

<p>Args:
    parent: Parent controller for coordination
    name (str): Display name for the slider
    defaultValue (float): Default value for reset functionality
    range (tuple): (min, max) range for slider values
    step (float): Step size for value increments
    callBackValueChange: Callback function for value changes
    callBackAutoPush: Callback function for auto-adjustment</p>
</div>


                            </div>
                            <div id="AdvanceSliderController.parent" class="classattr">
                                <div class="attr variable">
            <span class="name">parent</span>

        
    </div>
    <a class="headerlink" href="#AdvanceSliderController.parent"></a>
    
    

                            </div>
                            <div id="AdvanceSliderController.view" class="classattr">
                                <div class="attr variable">
            <span class="name">view</span>

        
    </div>
    <a class="headerlink" href="#AdvanceSliderController.view"></a>
    
    

                            </div>
                            <div id="AdvanceSliderController.model" class="classattr">
                                <div class="attr variable">
            <span class="name">model</span>

        
    </div>
    <a class="headerlink" href="#AdvanceSliderController.model"></a>
    
    

                            </div>
                            <div id="AdvanceSliderController.step" class="classattr">
                                <div class="attr variable">
            <span class="name">step</span>

        
    </div>
    <a class="headerlink" href="#AdvanceSliderController.step"></a>
    
    

                            </div>
                            <div id="AdvanceSliderController.defaultValue" class="classattr">
                                <div class="attr variable">
            <span class="name">defaultValue</span>

        
    </div>
    <a class="headerlink" href="#AdvanceSliderController.defaultValue"></a>
    
    

                            </div>
                            <div id="AdvanceSliderController.range" class="classattr">
                                <div class="attr variable">
            <span class="name">range</span>

        
    </div>
    <a class="headerlink" href="#AdvanceSliderController.range"></a>
    
    

                            </div>
                            <div id="AdvanceSliderController.callBackActive" class="classattr">
                                <div class="attr variable">
            <span class="name">callBackActive</span>

        
    </div>
    <a class="headerlink" href="#AdvanceSliderController.callBackActive"></a>
    
    

                            </div>
                            <div id="AdvanceSliderController.callBackValueChange" class="classattr">
                                <div class="attr variable">
            <span class="name">callBackValueChange</span>

        
    </div>
    <a class="headerlink" href="#AdvanceSliderController.callBackValueChange"></a>
    
    

                            </div>
                            <div id="AdvanceSliderController.callBackAutoPush" class="classattr">
                                <div class="attr variable">
            <span class="name">callBackAutoPush</span>

        
    </div>
    <a class="headerlink" href="#AdvanceSliderController.callBackAutoPush"></a>
    
    

                            </div>
                            <div id="AdvanceSliderController.sliderChange" class="classattr">
                                        <input id="AdvanceSliderController.sliderChange-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">sliderChange</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AdvanceSliderController.sliderChange-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AdvanceSliderController.sliderChange"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AdvanceSliderController.sliderChange-1329"><a href="#AdvanceSliderController.sliderChange-1329"><span class="linenos">1329</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">sliderChange</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AdvanceSliderController.sliderChange-1330"><a href="#AdvanceSliderController.sliderChange-1330"><span class="linenos">1330</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AdvanceSliderController.sliderChange-1331"><a href="#AdvanceSliderController.sliderChange-1331"><span class="linenos">1331</span></a><span class="sd">        Handle manual slider value changes.</span>
</span><span id="AdvanceSliderController.sliderChange-1332"><a href="#AdvanceSliderController.sliderChange-1332"><span class="linenos">1332</span></a><span class="sd">        </span>
</span><span id="AdvanceSliderController.sliderChange-1333"><a href="#AdvanceSliderController.sliderChange-1333"><span class="linenos">1333</span></a><span class="sd">        Processes slider movement events, updates the model and display,</span>
</span><span id="AdvanceSliderController.sliderChange-1334"><a href="#AdvanceSliderController.sliderChange-1334"><span class="linenos">1334</span></a><span class="sd">        and triggers the value change callback if active. Converts slider</span>
</span><span id="AdvanceSliderController.sliderChange-1335"><a href="#AdvanceSliderController.sliderChange-1335"><span class="linenos">1335</span></a><span class="sd">        position to actual value using the configured step size.</span>
</span><span id="AdvanceSliderController.sliderChange-1336"><a href="#AdvanceSliderController.sliderChange-1336"><span class="linenos">1336</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AdvanceSliderController.sliderChange-1337"><a href="#AdvanceSliderController.sliderChange-1337"><span class="linenos">1337</span></a>
</span><span id="AdvanceSliderController.sliderChange-1338"><a href="#AdvanceSliderController.sliderChange-1338"><span class="linenos">1338</span></a>        <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">slider</span><span class="o">.</span><span class="n">value</span><span class="p">()</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">step</span>
</span><span id="AdvanceSliderController.sliderChange-1339"><a href="#AdvanceSliderController.sliderChange-1339"><span class="linenos">1339</span></a>
</span><span id="AdvanceSliderController.sliderChange-1340"><a href="#AdvanceSliderController.sliderChange-1340"><span class="linenos">1340</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CB] &gt;&gt; AdvanceSliderController.sliderChange(&quot;</span><span class="p">,</span><span class="n">value</span><span class="p">,</span><span class="s2">&quot;)[callBackActive:&quot;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span><span class="p">,</span><span class="s2">&quot;] &quot;</span><span class="p">)</span>
</span><span id="AdvanceSliderController.sliderChange-1341"><a href="#AdvanceSliderController.sliderChange-1341"><span class="linenos">1341</span></a>
</span><span id="AdvanceSliderController.sliderChange-1342"><a href="#AdvanceSliderController.sliderChange-1342"><span class="linenos">1342</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>
</span><span id="AdvanceSliderController.sliderChange-1343"><a href="#AdvanceSliderController.sliderChange-1343"><span class="linenos">1343</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">editValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
</span><span id="AdvanceSliderController.sliderChange-1344"><a href="#AdvanceSliderController.sliderChange-1344"><span class="linenos">1344</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">callBackValueChange</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">callBackValueChange</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Handle manual slider value changes.</p>

<p>Processes slider movement events, updates the model and display,
and triggers the value change callback if active. Converts slider
position to actual value using the configured step size.</p>
</div>


                            </div>
                            <div id="AdvanceSliderController.setValue" class="classattr">
                                        <input id="AdvanceSliderController.setValue-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">setValue</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">value</span>, </span><span class="param"><span class="n">callBackActive</span><span class="o">=</span><span class="kc">True</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AdvanceSliderController.setValue-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AdvanceSliderController.setValue"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AdvanceSliderController.setValue-1346"><a href="#AdvanceSliderController.setValue-1346"><span class="linenos">1346</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setValue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">True</span><span class="p">):</span>
</span><span id="AdvanceSliderController.setValue-1347"><a href="#AdvanceSliderController.setValue-1347"><span class="linenos">1347</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AdvanceSliderController.setValue-1348"><a href="#AdvanceSliderController.setValue-1348"><span class="linenos">1348</span></a><span class="sd">        Set slider value programmatically.</span>
</span><span id="AdvanceSliderController.setValue-1349"><a href="#AdvanceSliderController.setValue-1349"><span class="linenos">1349</span></a><span class="sd">        </span>
</span><span id="AdvanceSliderController.setValue-1350"><a href="#AdvanceSliderController.setValue-1350"><span class="linenos">1350</span></a><span class="sd">        Updates the slider position and display to reflect the specified value,</span>
</span><span id="AdvanceSliderController.setValue-1351"><a href="#AdvanceSliderController.setValue-1351"><span class="linenos">1351</span></a><span class="sd">        with optional callback suppression for initialization or batch updates.</span>
</span><span id="AdvanceSliderController.setValue-1352"><a href="#AdvanceSliderController.setValue-1352"><span class="linenos">1352</span></a><span class="sd">        </span>
</span><span id="AdvanceSliderController.setValue-1353"><a href="#AdvanceSliderController.setValue-1353"><span class="linenos">1353</span></a><span class="sd">        Args:</span>
</span><span id="AdvanceSliderController.setValue-1354"><a href="#AdvanceSliderController.setValue-1354"><span class="linenos">1354</span></a><span class="sd">            value (float): New value to set</span>
</span><span id="AdvanceSliderController.setValue-1355"><a href="#AdvanceSliderController.setValue-1355"><span class="linenos">1355</span></a><span class="sd">            callBackActive (bool, optional): Whether to trigger callbacks (default: True)</span>
</span><span id="AdvanceSliderController.setValue-1356"><a href="#AdvanceSliderController.setValue-1356"><span class="linenos">1356</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AdvanceSliderController.setValue-1357"><a href="#AdvanceSliderController.setValue-1357"><span class="linenos">1357</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; AdvanceSliderController.setValue(&quot;</span><span class="p">,</span><span class="n">value</span><span class="p">,</span><span class="s2">&quot;) &quot;</span><span class="p">)</span>
</span><span id="AdvanceSliderController.setValue-1358"><a href="#AdvanceSliderController.setValue-1358"><span class="linenos">1358</span></a>
</span><span id="AdvanceSliderController.setValue-1359"><a href="#AdvanceSliderController.setValue-1359"><span class="linenos">1359</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot; set value value in &#39;model&#39; range&quot;&quot;&quot;</span>
</span><span id="AdvanceSliderController.setValue-1360"><a href="#AdvanceSliderController.setValue-1360"><span class="linenos">1360</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="n">callBackActive</span>
</span><span id="AdvanceSliderController.setValue-1361"><a href="#AdvanceSliderController.setValue-1361"><span class="linenos">1361</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">slider</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">step</span><span class="p">))</span>
</span><span id="AdvanceSliderController.setValue-1362"><a href="#AdvanceSliderController.setValue-1362"><span class="linenos">1362</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">editValue</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
</span><span id="AdvanceSliderController.setValue-1363"><a href="#AdvanceSliderController.setValue-1363"><span class="linenos">1363</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
</span><span id="AdvanceSliderController.setValue-1364"><a href="#AdvanceSliderController.setValue-1364"><span class="linenos">1364</span></a>
</span><span id="AdvanceSliderController.setValue-1365"><a href="#AdvanceSliderController.setValue-1365"><span class="linenos">1365</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">True</span>
</span></pre></div>


            <div class="docstring"><p>Set slider value programmatically.</p>

<p>Updates the slider position and display to reflect the specified value,
with optional callback suppression for initialization or batch updates.</p>

<p>Args:
    value (float): New value to set
    callBackActive (bool, optional): Whether to trigger callbacks (default: True)</p>
</div>


                            </div>
                            <div id="AdvanceSliderController.reset" class="classattr">
                                        <input id="AdvanceSliderController.reset-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">reset</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AdvanceSliderController.reset-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AdvanceSliderController.reset"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AdvanceSliderController.reset-1367"><a href="#AdvanceSliderController.reset-1367"><span class="linenos">1367</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AdvanceSliderController.reset-1368"><a href="#AdvanceSliderController.reset-1368"><span class="linenos">1368</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AdvanceSliderController.reset-1369"><a href="#AdvanceSliderController.reset-1369"><span class="linenos">1369</span></a><span class="sd">        Reset slider to its default value.</span>
</span><span id="AdvanceSliderController.reset-1370"><a href="#AdvanceSliderController.reset-1370"><span class="linenos">1370</span></a><span class="sd">        </span>
</span><span id="AdvanceSliderController.reset-1371"><a href="#AdvanceSliderController.reset-1371"><span class="linenos">1371</span></a><span class="sd">        Restores the slider to its initial default value and triggers</span>
</span><span id="AdvanceSliderController.reset-1372"><a href="#AdvanceSliderController.reset-1372"><span class="linenos">1372</span></a><span class="sd">        the value change callback to update dependent processing.</span>
</span><span id="AdvanceSliderController.reset-1373"><a href="#AdvanceSliderController.reset-1373"><span class="linenos">1373</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AdvanceSliderController.reset-1374"><a href="#AdvanceSliderController.reset-1374"><span class="linenos">1374</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span> <span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CB] &gt;&gt; AdvanceSliderController.reset(&quot;</span><span class="p">,</span><span class="s2">&quot;) &quot;</span><span class="p">)</span>
</span><span id="AdvanceSliderController.reset-1375"><a href="#AdvanceSliderController.reset-1375"><span class="linenos">1375</span></a>
</span><span id="AdvanceSliderController.reset-1376"><a href="#AdvanceSliderController.reset-1376"><span class="linenos">1376</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">defaultValue</span><span class="p">,</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="AdvanceSliderController.reset-1377"><a href="#AdvanceSliderController.reset-1377"><span class="linenos">1377</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">callBackValueChange</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">callBackValueChange</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">defaultValue</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Reset slider to its default value.</p>

<p>Restores the slider to its initial default value and triggers
the value change callback to update dependent processing.</p>
</div>


                            </div>
                            <div id="AdvanceSliderController.auto" class="classattr">
                                        <input id="AdvanceSliderController.auto-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">auto</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="AdvanceSliderController.auto-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#AdvanceSliderController.auto"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="AdvanceSliderController.auto-1379"><a href="#AdvanceSliderController.auto-1379"><span class="linenos">1379</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">auto</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="AdvanceSliderController.auto-1380"><a href="#AdvanceSliderController.auto-1380"><span class="linenos">1380</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="AdvanceSliderController.auto-1381"><a href="#AdvanceSliderController.auto-1381"><span class="linenos">1381</span></a><span class="sd">        Trigger automatic value calculation.</span>
</span><span id="AdvanceSliderController.auto-1382"><a href="#AdvanceSliderController.auto-1382"><span class="linenos">1382</span></a><span class="sd">        </span>
</span><span id="AdvanceSliderController.auto-1383"><a href="#AdvanceSliderController.auto-1383"><span class="linenos">1383</span></a><span class="sd">        Initiates the auto-adjustment algorithm by calling the registered</span>
</span><span id="AdvanceSliderController.auto-1384"><a href="#AdvanceSliderController.auto-1384"><span class="linenos">1384</span></a><span class="sd">        auto-push callback, which typically analyzes the image and sets</span>
</span><span id="AdvanceSliderController.auto-1385"><a href="#AdvanceSliderController.auto-1385"><span class="linenos">1385</span></a><span class="sd">        an optimal value automatically.</span>
</span><span id="AdvanceSliderController.auto-1386"><a href="#AdvanceSliderController.auto-1386"><span class="linenos">1386</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="AdvanceSliderController.auto-1387"><a href="#AdvanceSliderController.auto-1387"><span class="linenos">1387</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CB] &gt;&gt; AdvanceSliderController.auto(&quot;</span><span class="p">,</span><span class="s2">&quot;) &quot;</span><span class="p">)</span>
</span><span id="AdvanceSliderController.auto-1388"><a href="#AdvanceSliderController.auto-1388"><span class="linenos">1388</span></a>
</span><span id="AdvanceSliderController.auto-1389"><a href="#AdvanceSliderController.auto-1389"><span class="linenos">1389</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">callBackAutoPush</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">callBackAutoPush</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Trigger automatic value calculation.</p>

<p>Initiates the auto-adjustment algorithm by calling the registered
auto-push callback, which typically analyzes the image and sets
an optimal value automatically.</p>
</div>


                            </div>
                </section>
                <section id="ToneCurveController">
                            <input id="ToneCurveController-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">ToneCurveController</span>:

                <label class="view-source-button" for="ToneCurveController-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ToneCurveController"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ToneCurveController-1393"><a href="#ToneCurveController-1393"><span class="linenos">1393</span></a><span class="k">class</span><span class="w"> </span><span class="nc">ToneCurveController</span><span class="p">():</span>
</span><span id="ToneCurveController-1394"><a href="#ToneCurveController-1394"><span class="linenos">1394</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ToneCurveController-1395"><a href="#ToneCurveController-1395"><span class="linenos">1395</span></a><span class="sd">    Controller for tone curve editing with B-spline interpolation.</span>
</span><span id="ToneCurveController-1396"><a href="#ToneCurveController-1396"><span class="linenos">1396</span></a><span class="sd">    </span>
</span><span id="ToneCurveController-1397"><a href="#ToneCurveController-1397"><span class="linenos">1397</span></a><span class="sd">    This class manages the tone curve editing interface, allowing users to adjust</span>
</span><span id="ToneCurveController-1398"><a href="#ToneCurveController-1398"><span class="linenos">1398</span></a><span class="sd">    the luminance mapping through control points that define a smooth B-spline curve.</span>
</span><span id="ToneCurveController-1399"><a href="#ToneCurveController-1399"><span class="linenos">1399</span></a><span class="sd">    It includes automatic curve generation using machine learning, histogram overlay</span>
</span><span id="ToneCurveController-1400"><a href="#ToneCurveController-1400"><span class="linenos">1400</span></a><span class="sd">    display, and comprehensive curve visualization options.</span>
</span><span id="ToneCurveController-1401"><a href="#ToneCurveController-1401"><span class="linenos">1401</span></a><span class="sd">    </span>
</span><span id="ToneCurveController-1402"><a href="#ToneCurveController-1402"><span class="linenos">1402</span></a><span class="sd">    The tone curve is a fundamental HDR processing tool that maps input luminance</span>
</span><span id="ToneCurveController-1403"><a href="#ToneCurveController-1403"><span class="linenos">1403</span></a><span class="sd">    values to output values, effectively controlling the overall tone mapping</span>
</span><span id="ToneCurveController-1404"><a href="#ToneCurveController-1404"><span class="linenos">1404</span></a><span class="sd">    and local contrast of the image.</span>
</span><span id="ToneCurveController-1405"><a href="#ToneCurveController-1405"><span class="linenos">1405</span></a><span class="sd">    </span>
</span><span id="ToneCurveController-1406"><a href="#ToneCurveController-1406"><span class="linenos">1406</span></a><span class="sd">    Attributes:</span>
</span><span id="ToneCurveController-1407"><a href="#ToneCurveController-1407"><span class="linenos">1407</span></a><span class="sd">        - parent: Parent controller for coordination</span>
</span><span id="ToneCurveController-1408"><a href="#ToneCurveController-1408"><span class="linenos">1408</span></a><span class="sd">        - model (model.ToneCurveModel): Tone curve mathematical model</span>
</span><span id="ToneCurveController-1409"><a href="#ToneCurveController-1409"><span class="linenos">1409</span></a><span class="sd">        - view (view.ToneCurveView): Curve editing interface</span>
</span><span id="ToneCurveController-1410"><a href="#ToneCurveController-1410"><span class="linenos">1410</span></a><span class="sd">        - callBackActive (bool): Enable/disable callback processing</span>
</span><span id="ToneCurveController-1411"><a href="#ToneCurveController-1411"><span class="linenos">1411</span></a><span class="sd">        - showInput (bool): Display input image histogram</span>
</span><span id="ToneCurveController-1412"><a href="#ToneCurveController-1412"><span class="linenos">1412</span></a><span class="sd">        - showbefore (bool): Display pre-curve histogram</span>
</span><span id="ToneCurveController-1413"><a href="#ToneCurveController-1413"><span class="linenos">1413</span></a><span class="sd">        - showAfter (bool): Display post-curve histogram  </span>
</span><span id="ToneCurveController-1414"><a href="#ToneCurveController-1414"><span class="linenos">1414</span></a><span class="sd">        - showOutput (bool): Display final output histogram</span>
</span><span id="ToneCurveController-1415"><a href="#ToneCurveController-1415"><span class="linenos">1415</span></a><span class="sd">        - weightFile (str): Machine learning model file for auto-curve</span>
</span><span id="ToneCurveController-1416"><a href="#ToneCurveController-1416"><span class="linenos">1416</span></a><span class="sd">        - networkModel: PyTorch neural network for automatic curve generation</span>
</span><span id="ToneCurveController-1417"><a href="#ToneCurveController-1417"><span class="linenos">1417</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="ToneCurveController-1418"><a href="#ToneCurveController-1418"><span class="linenos">1418</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
</span><span id="ToneCurveController-1419"><a href="#ToneCurveController-1419"><span class="linenos">1419</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ToneCurveController-1420"><a href="#ToneCurveController-1420"><span class="linenos">1420</span></a><span class="sd">        Initialize the tone curve controller.</span>
</span><span id="ToneCurveController-1421"><a href="#ToneCurveController-1421"><span class="linenos">1421</span></a><span class="sd">        </span>
</span><span id="ToneCurveController-1422"><a href="#ToneCurveController-1422"><span class="linenos">1422</span></a><span class="sd">        Args:</span>
</span><span id="ToneCurveController-1423"><a href="#ToneCurveController-1423"><span class="linenos">1423</span></a><span class="sd">            parent: Parent controller for coordination and image access</span>
</span><span id="ToneCurveController-1424"><a href="#ToneCurveController-1424"><span class="linenos">1424</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ToneCurveController-1425"><a href="#ToneCurveController-1425"><span class="linenos">1425</span></a>
</span><span id="ToneCurveController-1426"><a href="#ToneCurveController-1426"><span class="linenos">1426</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
</span><span id="ToneCurveController-1427"><a href="#ToneCurveController-1427"><span class="linenos">1427</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">ToneCurveModel</span><span class="p">()</span>
</span><span id="ToneCurveController-1428"><a href="#ToneCurveController-1428"><span class="linenos">1428</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">ToneCurveView</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="ToneCurveController-1429"><a href="#ToneCurveController-1429"><span class="linenos">1429</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="ToneCurveController-1430"><a href="#ToneCurveController-1430"><span class="linenos">1430</span></a>
</span><span id="ToneCurveController-1431"><a href="#ToneCurveController-1431"><span class="linenos">1431</span></a>        <span class="c1"># tone curve display control</span>
</span><span id="ToneCurveController-1432"><a href="#ToneCurveController-1432"><span class="linenos">1432</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">showInput</span> <span class="o">=</span><span class="kc">False</span>
</span><span id="ToneCurveController-1433"><a href="#ToneCurveController-1433"><span class="linenos">1433</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">showbefore</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="ToneCurveController-1434"><a href="#ToneCurveController-1434"><span class="linenos">1434</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">showAfter</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="ToneCurveController-1435"><a href="#ToneCurveController-1435"><span class="linenos">1435</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">showOutput</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="ToneCurveController-1436"><a href="#ToneCurveController-1436"><span class="linenos">1436</span></a>
</span><span id="ToneCurveController-1437"><a href="#ToneCurveController-1437"><span class="linenos">1437</span></a>        <span class="c1"># zj add semi-auto curve</span>
</span><span id="ToneCurveController-1438"><a href="#ToneCurveController-1438"><span class="linenos">1438</span></a>        <span class="c1"># machine learning network and weight file </span>
</span><span id="ToneCurveController-1439"><a href="#ToneCurveController-1439"><span class="linenos">1439</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">weightFile</span> <span class="o">=</span> <span class="s1">&#39;MSESig505_0419.pth&#39;</span>
</span><span id="ToneCurveController-1440"><a href="#ToneCurveController-1440"><span class="linenos">1440</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">networkModel</span> <span class="o">=</span> <span class="kc">None</span>  
</span><span id="ToneCurveController-1441"><a href="#ToneCurveController-1441"><span class="linenos">1441</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="ToneCurveController-1442"><a href="#ToneCurveController-1442"><span class="linenos">1442</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">sliderChange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
</span><span id="ToneCurveController-1443"><a href="#ToneCurveController-1443"><span class="linenos">1443</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ToneCurveController-1444"><a href="#ToneCurveController-1444"><span class="linenos">1444</span></a><span class="sd">        Handle tone curve control point adjustments.</span>
</span><span id="ToneCurveController-1445"><a href="#ToneCurveController-1445"><span class="linenos">1445</span></a><span class="sd">        </span>
</span><span id="ToneCurveController-1446"><a href="#ToneCurveController-1446"><span class="linenos">1446</span></a><span class="sd">        Processes changes to individual control points (shadows, blacks, mediums,</span>
</span><span id="ToneCurveController-1447"><a href="#ToneCurveController-1447"><span class="linenos">1447</span></a><span class="sd">        whites, highlights), updates the B-spline curve, and triggers processing</span>
</span><span id="ToneCurveController-1448"><a href="#ToneCurveController-1448"><span class="linenos">1448</span></a><span class="sd">        pipeline updates. Auto-scales related control points to maintain curve smoothness.</span>
</span><span id="ToneCurveController-1449"><a href="#ToneCurveController-1449"><span class="linenos">1449</span></a><span class="sd">        </span>
</span><span id="ToneCurveController-1450"><a href="#ToneCurveController-1450"><span class="linenos">1450</span></a><span class="sd">        Args:</span>
</span><span id="ToneCurveController-1451"><a href="#ToneCurveController-1451"><span class="linenos">1451</span></a><span class="sd">            key (str): Control point identifier (&#39;shadows&#39;, &#39;blacks&#39;, etc.)</span>
</span><span id="ToneCurveController-1452"><a href="#ToneCurveController-1452"><span class="linenos">1452</span></a><span class="sd">            value (float): New value for the control point</span>
</span><span id="ToneCurveController-1453"><a href="#ToneCurveController-1453"><span class="linenos">1453</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ToneCurveController-1454"><a href="#ToneCurveController-1454"><span class="linenos">1454</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CB] &gt;&gt; ToneCurveController.sliderChange(&quot;</span><span class="p">,</span><span class="n">key</span><span class="p">,</span><span class="s2">&quot;,&quot;</span><span class="p">,</span><span class="n">value</span><span class="p">,</span><span class="s2">&quot;)[callBackActive:&quot;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span><span class="p">,</span><span class="s2">&quot;] &quot;</span><span class="p">)</span>
</span><span id="ToneCurveController-1455"><a href="#ToneCurveController-1455"><span class="linenos">1455</span></a>
</span><span id="ToneCurveController-1456"><a href="#ToneCurveController-1456"><span class="linenos">1456</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span><span class="p">:</span>
</span><span id="ToneCurveController-1457"><a href="#ToneCurveController-1457"><span class="linenos">1457</span></a>            <span class="n">newValues</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">autoScale</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="ToneCurveController-1458"><a href="#ToneCurveController-1458"><span class="linenos">1458</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">changeToneCurve</span><span class="p">(</span><span class="n">newValues</span><span class="p">)</span> 
</span><span id="ToneCurveController-1459"><a href="#ToneCurveController-1459"><span class="linenos">1459</span></a>  
</span><span id="ToneCurveController-1460"><a href="#ToneCurveController-1460"><span class="linenos">1460</span></a>            <span class="n">points</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">evaluate</span><span class="p">()</span>
</span><span id="ToneCurveController-1461"><a href="#ToneCurveController-1461"><span class="linenos">1461</span></a>
</span><span id="ToneCurveController-1462"><a href="#ToneCurveController-1462"><span class="linenos">1462</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span>  <span class="kc">False</span>
</span><span id="ToneCurveController-1463"><a href="#ToneCurveController-1463"><span class="linenos">1463</span></a>
</span><span id="ToneCurveController-1464"><a href="#ToneCurveController-1464"><span class="linenos">1464</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderShadows</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">newValues</span><span class="p">[</span><span class="s2">&quot;shadows&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="ToneCurveController-1465"><a href="#ToneCurveController-1465"><span class="linenos">1465</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">editShadows</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">newValues</span><span class="p">[</span><span class="s2">&quot;shadows&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="ToneCurveController-1466"><a href="#ToneCurveController-1466"><span class="linenos">1466</span></a>
</span><span id="ToneCurveController-1467"><a href="#ToneCurveController-1467"><span class="linenos">1467</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderBlacks</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">newValues</span><span class="p">[</span><span class="s2">&quot;blacks&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="ToneCurveController-1468"><a href="#ToneCurveController-1468"><span class="linenos">1468</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">editBlacks</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">newValues</span><span class="p">[</span><span class="s2">&quot;blacks&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="ToneCurveController-1469"><a href="#ToneCurveController-1469"><span class="linenos">1469</span></a>
</span><span id="ToneCurveController-1470"><a href="#ToneCurveController-1470"><span class="linenos">1470</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderMediums</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">newValues</span><span class="p">[</span><span class="s2">&quot;mediums&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="ToneCurveController-1471"><a href="#ToneCurveController-1471"><span class="linenos">1471</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">editMediums</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">newValues</span><span class="p">[</span><span class="s2">&quot;mediums&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="ToneCurveController-1472"><a href="#ToneCurveController-1472"><span class="linenos">1472</span></a>
</span><span id="ToneCurveController-1473"><a href="#ToneCurveController-1473"><span class="linenos">1473</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderWhites</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">newValues</span><span class="p">[</span><span class="s2">&quot;whites&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="ToneCurveController-1474"><a href="#ToneCurveController-1474"><span class="linenos">1474</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">editWhites</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">newValues</span><span class="p">[</span><span class="s2">&quot;whites&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="ToneCurveController-1475"><a href="#ToneCurveController-1475"><span class="linenos">1475</span></a>
</span><span id="ToneCurveController-1476"><a href="#ToneCurveController-1476"><span class="linenos">1476</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderHighlights</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">newValues</span><span class="p">[</span><span class="s2">&quot;highlights&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="ToneCurveController-1477"><a href="#ToneCurveController-1477"><span class="linenos">1477</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">editHighlights</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">newValues</span><span class="p">[</span><span class="s2">&quot;highlights&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="ToneCurveController-1478"><a href="#ToneCurveController-1478"><span class="linenos">1478</span></a>
</span><span id="ToneCurveController-1479"><a href="#ToneCurveController-1479"><span class="linenos">1479</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span>  <span class="kc">True</span>
</span><span id="ToneCurveController-1480"><a href="#ToneCurveController-1480"><span class="linenos">1480</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="ToneCurveController-1481"><a href="#ToneCurveController-1481"><span class="linenos">1481</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setValues</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">valuesDict</span><span class="p">,</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="ToneCurveController-1482"><a href="#ToneCurveController-1482"><span class="linenos">1482</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ToneCurveController-1483"><a href="#ToneCurveController-1483"><span class="linenos">1483</span></a><span class="sd">        Set all tone curve control points programmatically.</span>
</span><span id="ToneCurveController-1484"><a href="#ToneCurveController-1484"><span class="linenos">1484</span></a><span class="sd">        </span>
</span><span id="ToneCurveController-1485"><a href="#ToneCurveController-1485"><span class="linenos">1485</span></a><span class="sd">        Updates all control points simultaneously and refreshes the interface</span>
</span><span id="ToneCurveController-1486"><a href="#ToneCurveController-1486"><span class="linenos">1486</span></a><span class="sd">        to reflect the new curve shape. Typically used for loading saved</span>
</span><span id="ToneCurveController-1487"><a href="#ToneCurveController-1487"><span class="linenos">1487</span></a><span class="sd">        curves or applying automatic curve calculations.</span>
</span><span id="ToneCurveController-1488"><a href="#ToneCurveController-1488"><span class="linenos">1488</span></a><span class="sd">        </span>
</span><span id="ToneCurveController-1489"><a href="#ToneCurveController-1489"><span class="linenos">1489</span></a><span class="sd">        Args:</span>
</span><span id="ToneCurveController-1490"><a href="#ToneCurveController-1490"><span class="linenos">1490</span></a><span class="sd">            valuesDict (dict): Dictionary containing all control point values</span>
</span><span id="ToneCurveController-1491"><a href="#ToneCurveController-1491"><span class="linenos">1491</span></a><span class="sd">                             with keys like &#39;shadows&#39;, &#39;blacks&#39;, &#39;mediums&#39;, etc.</span>
</span><span id="ToneCurveController-1492"><a href="#ToneCurveController-1492"><span class="linenos">1492</span></a><span class="sd">            callBackActive (bool, optional): Whether to trigger callbacks (default: False)</span>
</span><span id="ToneCurveController-1493"><a href="#ToneCurveController-1493"><span class="linenos">1493</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ToneCurveController-1494"><a href="#ToneCurveController-1494"><span class="linenos">1494</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; ToneCurveController.setValue(&quot;</span><span class="p">,</span><span class="n">valuesDict</span><span class="p">,</span><span class="s2">&quot;) &quot;</span><span class="p">)</span>
</span><span id="ToneCurveController-1495"><a href="#ToneCurveController-1495"><span class="linenos">1495</span></a>
</span><span id="ToneCurveController-1496"><a href="#ToneCurveController-1496"><span class="linenos">1496</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="n">callBackActive</span>
</span><span id="ToneCurveController-1497"><a href="#ToneCurveController-1497"><span class="linenos">1497</span></a>
</span><span id="ToneCurveController-1498"><a href="#ToneCurveController-1498"><span class="linenos">1498</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setValues</span><span class="p">(</span><span class="n">valuesDict</span><span class="p">)</span>
</span><span id="ToneCurveController-1499"><a href="#ToneCurveController-1499"><span class="linenos">1499</span></a>        <span class="n">points</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">evaluate</span><span class="p">()</span>
</span><span id="ToneCurveController-1500"><a href="#ToneCurveController-1500"><span class="linenos">1500</span></a>
</span><span id="ToneCurveController-1501"><a href="#ToneCurveController-1501"><span class="linenos">1501</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderShadows</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">valuesDict</span><span class="p">[</span><span class="s2">&quot;shadows&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="ToneCurveController-1502"><a href="#ToneCurveController-1502"><span class="linenos">1502</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">editShadows</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">valuesDict</span><span class="p">[</span><span class="s2">&quot;shadows&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="ToneCurveController-1503"><a href="#ToneCurveController-1503"><span class="linenos">1503</span></a>
</span><span id="ToneCurveController-1504"><a href="#ToneCurveController-1504"><span class="linenos">1504</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderBlacks</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">valuesDict</span><span class="p">[</span><span class="s2">&quot;blacks&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="ToneCurveController-1505"><a href="#ToneCurveController-1505"><span class="linenos">1505</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">editBlacks</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">valuesDict</span><span class="p">[</span><span class="s2">&quot;blacks&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="ToneCurveController-1506"><a href="#ToneCurveController-1506"><span class="linenos">1506</span></a>
</span><span id="ToneCurveController-1507"><a href="#ToneCurveController-1507"><span class="linenos">1507</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderMediums</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">valuesDict</span><span class="p">[</span><span class="s2">&quot;mediums&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="ToneCurveController-1508"><a href="#ToneCurveController-1508"><span class="linenos">1508</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">editMediums</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">valuesDict</span><span class="p">[</span><span class="s2">&quot;mediums&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="ToneCurveController-1509"><a href="#ToneCurveController-1509"><span class="linenos">1509</span></a>
</span><span id="ToneCurveController-1510"><a href="#ToneCurveController-1510"><span class="linenos">1510</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderWhites</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">valuesDict</span><span class="p">[</span><span class="s2">&quot;whites&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="ToneCurveController-1511"><a href="#ToneCurveController-1511"><span class="linenos">1511</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">editWhites</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">valuesDict</span><span class="p">[</span><span class="s2">&quot;whites&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="ToneCurveController-1512"><a href="#ToneCurveController-1512"><span class="linenos">1512</span></a>
</span><span id="ToneCurveController-1513"><a href="#ToneCurveController-1513"><span class="linenos">1513</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderHighlights</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">valuesDict</span><span class="p">[</span><span class="s2">&quot;highlights&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="ToneCurveController-1514"><a href="#ToneCurveController-1514"><span class="linenos">1514</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">editHighlights</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">valuesDict</span><span class="p">[</span><span class="s2">&quot;highlights&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="ToneCurveController-1515"><a href="#ToneCurveController-1515"><span class="linenos">1515</span></a>
</span><span id="ToneCurveController-1516"><a href="#ToneCurveController-1516"><span class="linenos">1516</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="ToneCurveController-1517"><a href="#ToneCurveController-1517"><span class="linenos">1517</span></a>    <span class="c1"># -----------------------------------------------------------------------------     </span>
</span><span id="ToneCurveController-1518"><a href="#ToneCurveController-1518"><span class="linenos">1518</span></a>    <span class="c1"># zj add for semi-auto curve begin</span>
</span><span id="ToneCurveController-1519"><a href="#ToneCurveController-1519"><span class="linenos">1519</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">autoCurve</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ToneCurveController-1520"><a href="#ToneCurveController-1520"><span class="linenos">1520</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ToneCurveController-1521"><a href="#ToneCurveController-1521"><span class="linenos">1521</span></a><span class="sd">        Generate tone curve automatically using machine learning analysis.</span>
</span><span id="ToneCurveController-1522"><a href="#ToneCurveController-1522"><span class="linenos">1522</span></a><span class="sd">        </span>
</span><span id="ToneCurveController-1523"><a href="#ToneCurveController-1523"><span class="linenos">1523</span></a><span class="sd">        Analyzes the current image&#39;s histogram distribution and uses a trained</span>
</span><span id="ToneCurveController-1524"><a href="#ToneCurveController-1524"><span class="linenos">1524</span></a><span class="sd">        neural network to predict optimal control point values for enhanced</span>
</span><span id="ToneCurveController-1525"><a href="#ToneCurveController-1525"><span class="linenos">1525</span></a><span class="sd">        image appearance. The ML model considers luminance distribution patterns</span>
</span><span id="ToneCurveController-1526"><a href="#ToneCurveController-1526"><span class="linenos">1526</span></a><span class="sd">        to suggest appropriate tone mapping.</span>
</span><span id="ToneCurveController-1527"><a href="#ToneCurveController-1527"><span class="linenos">1527</span></a><span class="sd">        </span>
</span><span id="ToneCurveController-1528"><a href="#ToneCurveController-1528"><span class="linenos">1528</span></a><span class="sd">        The process involves:</span>
</span><span id="ToneCurveController-1529"><a href="#ToneCurveController-1529"><span class="linenos">1529</span></a><span class="sd">        1. Computing cumulative histogram of image luminance</span>
</span><span id="ToneCurveController-1530"><a href="#ToneCurveController-1530"><span class="linenos">1530</span></a><span class="sd">        2. Feeding histogram to trained neural network</span>
</span><span id="ToneCurveController-1531"><a href="#ToneCurveController-1531"><span class="linenos">1531</span></a><span class="sd">        3. Predicting optimal control point values</span>
</span><span id="ToneCurveController-1532"><a href="#ToneCurveController-1532"><span class="linenos">1532</span></a><span class="sd">        4. Applying the generated curve to the processing pipeline</span>
</span><span id="ToneCurveController-1533"><a href="#ToneCurveController-1533"><span class="linenos">1533</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ToneCurveController-1534"><a href="#ToneCurveController-1534"><span class="linenos">1534</span></a>        <span class="n">processPipe</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getProcessPipe</span><span class="p">()</span>
</span><span id="ToneCurveController-1535"><a href="#ToneCurveController-1535"><span class="linenos">1535</span></a>        <span class="k">if</span> <span class="n">processPipe</span> <span class="o">!=</span> <span class="kc">None</span> <span class="p">:</span>
</span><span id="ToneCurveController-1536"><a href="#ToneCurveController-1536"><span class="linenos">1536</span></a>            <span class="n">idExposure</span> <span class="o">=</span> <span class="n">processPipe</span><span class="o">.</span><span class="n">getProcessNodeByName</span><span class="p">(</span><span class="s2">&quot;tonecurve&quot;</span><span class="p">)</span>
</span><span id="ToneCurveController-1537"><a href="#ToneCurveController-1537"><span class="linenos">1537</span></a>            <span class="n">bins</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">50</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
</span><span id="ToneCurveController-1538"><a href="#ToneCurveController-1538"><span class="linenos">1538</span></a>
</span><span id="ToneCurveController-1539"><a href="#ToneCurveController-1539"><span class="linenos">1539</span></a>            <span class="n">imageBeforeColorData</span> <span class="o">=</span> <span class="n">processPipe</span><span class="o">.</span><span class="n">processNodes</span><span class="p">[</span><span class="n">idExposure</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">outputImage</span><span class="o">.</span><span class="n">colorData</span>
</span><span id="ToneCurveController-1540"><a href="#ToneCurveController-1540"><span class="linenos">1540</span></a>            <span class="n">imageBeforeColorData</span><span class="p">[</span><span class="n">imageBeforeColorData</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">]</span><span class="o">=</span><span class="mi">1</span>
</span><span id="ToneCurveController-1541"><a href="#ToneCurveController-1541"><span class="linenos">1541</span></a>            <span class="n">imageBeforeY</span> <span class="o">=</span> <span class="n">colour</span><span class="o">.</span><span class="n">sRGB_to_XYZ</span><span class="p">(</span><span class="n">imageBeforeColorData</span><span class="p">,</span> <span class="n">apply_cctf_decoding</span><span class="o">=</span><span class="kc">False</span><span class="p">)[:,:,</span><span class="mi">1</span><span class="p">]</span>
</span><span id="ToneCurveController-1542"><a href="#ToneCurveController-1542"><span class="linenos">1542</span></a>            <span class="n">nphistBefore</span>  <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">histogram</span><span class="p">(</span><span class="n">imageBeforeY</span><span class="p">,</span> <span class="n">bins</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="ToneCurveController-1543"><a href="#ToneCurveController-1543"><span class="linenos">1543</span></a>            <span class="n">nphistBefore</span>  <span class="o">=</span> <span class="n">nphistBefore</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">amax</span><span class="p">(</span><span class="n">nphistBefore</span><span class="p">)</span>
</span><span id="ToneCurveController-1544"><a href="#ToneCurveController-1544"><span class="linenos">1544</span></a>
</span><span id="ToneCurveController-1545"><a href="#ToneCurveController-1545"><span class="linenos">1545</span></a>            <span class="n">npImgHistCumuNorm</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty_like</span><span class="p">(</span><span class="n">nphistBefore</span><span class="p">)</span>
</span><span id="ToneCurveController-1546"><a href="#ToneCurveController-1546"><span class="linenos">1546</span></a>            <span class="n">npImgHistCumu</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cumsum</span><span class="p">(</span><span class="n">nphistBefore</span><span class="p">)</span>
</span><span id="ToneCurveController-1547"><a href="#ToneCurveController-1547"><span class="linenos">1547</span></a>            <span class="n">npImgHistCumuNorm</span> <span class="o">=</span> <span class="n">npImgHistCumu</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">npImgHistCumu</span><span class="p">)</span>
</span><span id="ToneCurveController-1548"><a href="#ToneCurveController-1548"><span class="linenos">1548</span></a>            
</span><span id="ToneCurveController-1549"><a href="#ToneCurveController-1549"><span class="linenos">1549</span></a>            <span class="c1">#predict keypoint value</span>
</span><span id="ToneCurveController-1550"><a href="#ToneCurveController-1550"><span class="linenos">1550</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">networkModel</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ToneCurveController-1551"><a href="#ToneCurveController-1551"><span class="linenos">1551</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">networkModel</span> <span class="o">=</span> <span class="n">Net</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
</span><span id="ToneCurveController-1552"><a href="#ToneCurveController-1552"><span class="linenos">1552</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">networkModel</span><span class="o">.</span><span class="n">load_state_dict</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">weightFile</span><span class="p">))</span>
</span><span id="ToneCurveController-1553"><a href="#ToneCurveController-1553"><span class="linenos">1553</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">networkModel</span><span class="o">.</span><span class="n">eval</span><span class="p">()</span>
</span><span id="ToneCurveController-1554"><a href="#ToneCurveController-1554"><span class="linenos">1554</span></a>
</span><span id="ToneCurveController-1555"><a href="#ToneCurveController-1555"><span class="linenos">1555</span></a>            <span class="k">with</span> <span class="n">torch</span><span class="o">.</span><span class="n">no_grad</span><span class="p">():</span>
</span><span id="ToneCurveController-1556"><a href="#ToneCurveController-1556"><span class="linenos">1556</span></a>                <span class="n">x</span> <span class="o">=</span> <span class="n">Variable</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">FloatTensor</span><span class="p">([</span><span class="n">npImgHistCumuNorm</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),]),</span> <span class="n">requires_grad</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="ToneCurveController-1557"><a href="#ToneCurveController-1557"><span class="linenos">1557</span></a>                <span class="n">y_predict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">networkModel</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</span><span id="ToneCurveController-1558"><a href="#ToneCurveController-1558"><span class="linenos">1558</span></a>
</span><span id="ToneCurveController-1559"><a href="#ToneCurveController-1559"><span class="linenos">1559</span></a>            <span class="n">kpc</span> <span class="o">=</span> <span class="p">(</span><span class="n">y_predict</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="mi">100</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span> 
</span><span id="ToneCurveController-1560"><a href="#ToneCurveController-1560"><span class="linenos">1560</span></a>            <span class="n">kpcDict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;start&#39;</span><span class="p">:[</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">],</span> <span class="s1">&#39;shadows&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">10.0</span><span class="p">,</span><span class="nb">int</span><span class="p">(</span><span class="n">kpc</span><span class="p">[</span><span class="mi">0</span><span class="p">])],</span> <span class="s1">&#39;blacks&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">30.0</span><span class="p">,</span><span class="nb">int</span><span class="p">(</span><span class="n">kpc</span><span class="p">[</span><span class="mi">1</span><span class="p">])],</span> <span class="s1">&#39;mediums&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">50.0</span><span class="p">,</span><span class="nb">int</span><span class="p">(</span><span class="n">kpc</span><span class="p">[</span><span class="mi">2</span><span class="p">])],</span> <span class="s1">&#39;whites&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">70.0</span><span class="p">,</span><span class="nb">int</span><span class="p">(</span><span class="n">kpc</span><span class="p">[</span><span class="mi">3</span><span class="p">])],</span> <span class="s1">&#39;highlights&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">90.0</span><span class="p">,</span><span class="nb">int</span><span class="p">(</span><span class="n">kpc</span><span class="p">[</span><span class="mi">4</span><span class="p">])],</span> <span class="s1">&#39;end&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">100.0</span><span class="p">,</span><span class="mf">100.0</span><span class="p">]}</span>
</span><span id="ToneCurveController-1561"><a href="#ToneCurveController-1561"><span class="linenos">1561</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">setValues</span><span class="p">(</span><span class="n">kpcDict</span><span class="p">,</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
</span><span id="ToneCurveController-1562"><a href="#ToneCurveController-1562"><span class="linenos">1562</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">changeToneCurve</span><span class="p">(</span><span class="n">kpcDict</span><span class="p">)</span> 
</span><span id="ToneCurveController-1563"><a href="#ToneCurveController-1563"><span class="linenos">1563</span></a>     
</span><span id="ToneCurveController-1564"><a href="#ToneCurveController-1564"><span class="linenos">1564</span></a>    <span class="c1"># zj add for semi-auto curve end   </span>
</span><span id="ToneCurveController-1565"><a href="#ToneCurveController-1565"><span class="linenos">1565</span></a>
</span><span id="ToneCurveController-1566"><a href="#ToneCurveController-1566"><span class="linenos">1566</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="ToneCurveController-1567"><a href="#ToneCurveController-1567"><span class="linenos">1567</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
</span><span id="ToneCurveController-1568"><a href="#ToneCurveController-1568"><span class="linenos">1568</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ToneCurveController-1569"><a href="#ToneCurveController-1569"><span class="linenos">1569</span></a><span class="sd">        Reset specific control point to its default value.</span>
</span><span id="ToneCurveController-1570"><a href="#ToneCurveController-1570"><span class="linenos">1570</span></a><span class="sd">        </span>
</span><span id="ToneCurveController-1571"><a href="#ToneCurveController-1571"><span class="linenos">1571</span></a><span class="sd">        Restores a single control point to its default position and updates</span>
</span><span id="ToneCurveController-1572"><a href="#ToneCurveController-1572"><span class="linenos">1572</span></a><span class="sd">        the curve accordingly. Useful for correcting individual control</span>
</span><span id="ToneCurveController-1573"><a href="#ToneCurveController-1573"><span class="linenos">1573</span></a><span class="sd">        points without affecting the entire curve.</span>
</span><span id="ToneCurveController-1574"><a href="#ToneCurveController-1574"><span class="linenos">1574</span></a><span class="sd">        </span>
</span><span id="ToneCurveController-1575"><a href="#ToneCurveController-1575"><span class="linenos">1575</span></a><span class="sd">        Args:</span>
</span><span id="ToneCurveController-1576"><a href="#ToneCurveController-1576"><span class="linenos">1576</span></a><span class="sd">            key (str): Control point to reset (&#39;shadows&#39;, &#39;blacks&#39;, etc.)</span>
</span><span id="ToneCurveController-1577"><a href="#ToneCurveController-1577"><span class="linenos">1577</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ToneCurveController-1578"><a href="#ToneCurveController-1578"><span class="linenos">1578</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; ToneCurveController.reset(&quot;</span><span class="p">,</span><span class="n">key</span><span class="p">,</span><span class="s2">&quot;) &quot;</span><span class="p">)</span>
</span><span id="ToneCurveController-1579"><a href="#ToneCurveController-1579"><span class="linenos">1579</span></a>
</span><span id="ToneCurveController-1580"><a href="#ToneCurveController-1580"><span class="linenos">1580</span></a>        <span class="n">valuesDefault</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">default</span><span class="p">[</span><span class="n">key</span><span class="p">])[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="ToneCurveController-1581"><a href="#ToneCurveController-1581"><span class="linenos">1581</span></a>        <span class="n">controls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">valuesDefault</span><span class="p">)</span>
</span><span id="ToneCurveController-1582"><a href="#ToneCurveController-1582"><span class="linenos">1582</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">setValues</span><span class="p">(</span><span class="n">controls</span><span class="p">,</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="ToneCurveController-1583"><a href="#ToneCurveController-1583"><span class="linenos">1583</span></a>
</span><span id="ToneCurveController-1584"><a href="#ToneCurveController-1584"><span class="linenos">1584</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">changeToneCurve</span><span class="p">(</span><span class="n">controls</span><span class="p">)</span> 
</span><span id="ToneCurveController-1585"><a href="#ToneCurveController-1585"><span class="linenos">1585</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="ToneCurveController-1586"><a href="#ToneCurveController-1586"><span class="linenos">1586</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">plotCurve</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ToneCurveController-1587"><a href="#ToneCurveController-1587"><span class="linenos">1587</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ToneCurveController-1588"><a href="#ToneCurveController-1588"><span class="linenos">1588</span></a><span class="sd">        Display tone curve and histogram overlays.</span>
</span><span id="ToneCurveController-1589"><a href="#ToneCurveController-1589"><span class="linenos">1589</span></a><span class="sd">        </span>
</span><span id="ToneCurveController-1590"><a href="#ToneCurveController-1590"><span class="linenos">1590</span></a><span class="sd">        Renders the current tone curve along with optional histogram overlays</span>
</span><span id="ToneCurveController-1591"><a href="#ToneCurveController-1591"><span class="linenos">1591</span></a><span class="sd">        for input, pre-processing, post-processing, and output stages. Provides</span>
</span><span id="ToneCurveController-1592"><a href="#ToneCurveController-1592"><span class="linenos">1592</span></a><span class="sd">        visual feedback on how the curve affects the image&#39;s tonal distribution.</span>
</span><span id="ToneCurveController-1593"><a href="#ToneCurveController-1593"><span class="linenos">1593</span></a><span class="sd">        </span>
</span><span id="ToneCurveController-1594"><a href="#ToneCurveController-1594"><span class="linenos">1594</span></a><span class="sd">        The plot includes:</span>
</span><span id="ToneCurveController-1595"><a href="#ToneCurveController-1595"><span class="linenos">1595</span></a><span class="sd">        - Grid lines for reference</span>
</span><span id="ToneCurveController-1596"><a href="#ToneCurveController-1596"><span class="linenos">1596</span></a><span class="sd">        - Tone curve visualization</span>
</span><span id="ToneCurveController-1597"><a href="#ToneCurveController-1597"><span class="linenos">1597</span></a><span class="sd">        - Control points markers</span>
</span><span id="ToneCurveController-1598"><a href="#ToneCurveController-1598"><span class="linenos">1598</span></a><span class="sd">        - Optional histogram overlays for different processing stages</span>
</span><span id="ToneCurveController-1599"><a href="#ToneCurveController-1599"><span class="linenos">1599</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ToneCurveController-1600"><a href="#ToneCurveController-1600"><span class="linenos">1600</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="ToneCurveController-1601"><a href="#ToneCurveController-1601"><span class="linenos">1601</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">curve</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">],</span><span class="s1">&#39;r--&#39;</span><span class="p">,</span> <span class="n">clear</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="ToneCurveController-1602"><a href="#ToneCurveController-1602"><span class="linenos">1602</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">curve</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="mi">20</span><span class="p">,</span><span class="mi">20</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">],</span><span class="s1">&#39;r--&#39;</span><span class="p">,</span> <span class="n">clear</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="ToneCurveController-1603"><a href="#ToneCurveController-1603"><span class="linenos">1603</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">curve</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="mi">40</span><span class="p">,</span><span class="mi">40</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">],</span><span class="s1">&#39;r--&#39;</span><span class="p">,</span> <span class="n">clear</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="ToneCurveController-1604"><a href="#ToneCurveController-1604"><span class="linenos">1604</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">curve</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="mi">60</span><span class="p">,</span><span class="mi">60</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">],</span><span class="s1">&#39;r--&#39;</span><span class="p">,</span> <span class="n">clear</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="ToneCurveController-1605"><a href="#ToneCurveController-1605"><span class="linenos">1605</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">curve</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="mi">80</span><span class="p">,</span><span class="mi">80</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">],</span><span class="s1">&#39;r--&#39;</span><span class="p">,</span> <span class="n">clear</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="ToneCurveController-1606"><a href="#ToneCurveController-1606"><span class="linenos">1606</span></a>
</span><span id="ToneCurveController-1607"><a href="#ToneCurveController-1607"><span class="linenos">1607</span></a>            <span class="n">processPipe</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getProcessPipe</span><span class="p">()</span>
</span><span id="ToneCurveController-1608"><a href="#ToneCurveController-1608"><span class="linenos">1608</span></a>            <span class="n">idExposure</span> <span class="o">=</span> <span class="n">processPipe</span><span class="o">.</span><span class="n">getProcessNodeByName</span><span class="p">(</span><span class="s2">&quot;tonecurve&quot;</span><span class="p">)</span>
</span><span id="ToneCurveController-1609"><a href="#ToneCurveController-1609"><span class="linenos">1609</span></a>
</span><span id="ToneCurveController-1610"><a href="#ToneCurveController-1610"><span class="linenos">1610</span></a>            <span class="n">bins</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">50</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
</span><span id="ToneCurveController-1611"><a href="#ToneCurveController-1611"><span class="linenos">1611</span></a>
</span><span id="ToneCurveController-1612"><a href="#ToneCurveController-1612"><span class="linenos">1612</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">showInput</span><span class="p">:</span>
</span><span id="ToneCurveController-1613"><a href="#ToneCurveController-1613"><span class="linenos">1613</span></a>                <span class="n">imageInput</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">processPipe</span><span class="o">.</span><span class="n">getInputImage</span><span class="p">())</span>
</span><span id="ToneCurveController-1614"><a href="#ToneCurveController-1614"><span class="linenos">1614</span></a>                <span class="k">if</span> <span class="n">imageInput</span><span class="o">.</span><span class="n">linear</span><span class="p">:</span> <span class="n">imageInputColorData</span> <span class="o">=</span><span class="n">colour</span><span class="o">.</span><span class="n">cctf_encoding</span><span class="p">(</span><span class="n">imageInput</span><span class="o">.</span><span class="n">colorData</span><span class="p">,</span> <span class="n">function</span><span class="o">=</span><span class="s1">&#39;sRGB&#39;</span><span class="p">)</span>
</span><span id="ToneCurveController-1615"><a href="#ToneCurveController-1615"><span class="linenos">1615</span></a>                <span class="k">else</span><span class="p">:</span> <span class="n">imageInputColorData</span> <span class="o">=</span> <span class="n">imageInput</span><span class="o">.</span><span class="n">colorData</span>
</span><span id="ToneCurveController-1616"><a href="#ToneCurveController-1616"><span class="linenos">1616</span></a>                <span class="n">imageInputColorData</span><span class="p">[</span><span class="n">imageInputColorData</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">]</span><span class="o">=</span><span class="mi">1</span>
</span><span id="ToneCurveController-1617"><a href="#ToneCurveController-1617"><span class="linenos">1617</span></a>                <span class="n">imageInputY</span> <span class="o">=</span> <span class="n">colour</span><span class="o">.</span><span class="n">sRGB_to_XYZ</span><span class="p">(</span><span class="n">imageInputColorData</span><span class="p">,</span> <span class="n">apply_cctf_decoding</span><span class="o">=</span><span class="kc">False</span><span class="p">)[:,:,</span><span class="mi">1</span><span class="p">]</span>
</span><span id="ToneCurveController-1618"><a href="#ToneCurveController-1618"><span class="linenos">1618</span></a>                <span class="n">nphistInput</span>  <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">histogram</span><span class="p">(</span><span class="n">imageInputY</span><span class="p">,</span> <span class="n">bins</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="ToneCurveController-1619"><a href="#ToneCurveController-1619"><span class="linenos">1619</span></a>                <span class="n">nphistInput</span>  <span class="o">=</span> <span class="n">nphistInput</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">amax</span><span class="p">(</span><span class="n">nphistInput</span><span class="p">)</span>
</span><span id="ToneCurveController-1620"><a href="#ToneCurveController-1620"><span class="linenos">1620</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">curve</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">bins</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span><span class="n">nphistInput</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span><span class="s1">&#39;k--&#39;</span><span class="p">,</span>  <span class="n">clear</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="ToneCurveController-1621"><a href="#ToneCurveController-1621"><span class="linenos">1621</span></a>
</span><span id="ToneCurveController-1622"><a href="#ToneCurveController-1622"><span class="linenos">1622</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">showbefore</span><span class="p">:</span>
</span><span id="ToneCurveController-1623"><a href="#ToneCurveController-1623"><span class="linenos">1623</span></a>                <span class="n">imageBeforeColorData</span> <span class="o">=</span> <span class="n">processPipe</span><span class="o">.</span><span class="n">processNodes</span><span class="p">[</span><span class="n">idExposure</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">outputImage</span><span class="o">.</span><span class="n">colorData</span>
</span><span id="ToneCurveController-1624"><a href="#ToneCurveController-1624"><span class="linenos">1624</span></a>                <span class="n">imageBeforeColorData</span><span class="p">[</span><span class="n">imageBeforeColorData</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">]</span><span class="o">=</span><span class="mi">1</span>
</span><span id="ToneCurveController-1625"><a href="#ToneCurveController-1625"><span class="linenos">1625</span></a>                <span class="n">imageBeforeY</span> <span class="o">=</span> <span class="n">colour</span><span class="o">.</span><span class="n">sRGB_to_XYZ</span><span class="p">(</span><span class="n">imageBeforeColorData</span><span class="p">,</span> <span class="n">apply_cctf_decoding</span><span class="o">=</span><span class="kc">False</span><span class="p">)[:,:,</span><span class="mi">1</span><span class="p">]</span>
</span><span id="ToneCurveController-1626"><a href="#ToneCurveController-1626"><span class="linenos">1626</span></a>                <span class="n">nphistBefore</span>  <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">histogram</span><span class="p">(</span><span class="n">imageBeforeY</span><span class="p">,</span> <span class="n">bins</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="ToneCurveController-1627"><a href="#ToneCurveController-1627"><span class="linenos">1627</span></a>                <span class="n">nphistBefore</span>  <span class="o">=</span> <span class="n">nphistBefore</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">amax</span><span class="p">(</span><span class="n">nphistBefore</span><span class="p">)</span>
</span><span id="ToneCurveController-1628"><a href="#ToneCurveController-1628"><span class="linenos">1628</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">curve</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">bins</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span><span class="n">nphistBefore</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span><span class="s1">&#39;b--&#39;</span><span class="p">,</span>  <span class="n">clear</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="ToneCurveController-1629"><a href="#ToneCurveController-1629"><span class="linenos">1629</span></a>
</span><span id="ToneCurveController-1630"><a href="#ToneCurveController-1630"><span class="linenos">1630</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">showAfter</span><span class="p">:</span>
</span><span id="ToneCurveController-1631"><a href="#ToneCurveController-1631"><span class="linenos">1631</span></a>                <span class="n">imageAftercolorData</span> <span class="o">=</span> <span class="n">processPipe</span><span class="o">.</span><span class="n">processNodes</span><span class="p">[</span><span class="n">idExposure</span><span class="p">]</span><span class="o">.</span><span class="n">outputImage</span><span class="o">.</span><span class="n">colorData</span>
</span><span id="ToneCurveController-1632"><a href="#ToneCurveController-1632"><span class="linenos">1632</span></a>                <span class="n">imageAftercolorData</span><span class="p">[</span><span class="n">imageAftercolorData</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">]</span><span class="o">=</span><span class="mi">1</span>
</span><span id="ToneCurveController-1633"><a href="#ToneCurveController-1633"><span class="linenos">1633</span></a>                <span class="n">imageAfterY</span>  <span class="o">=</span> <span class="n">colour</span><span class="o">.</span><span class="n">sRGB_to_XYZ</span><span class="p">(</span><span class="n">imageAftercolorData</span><span class="p">,</span>  <span class="n">apply_cctf_decoding</span><span class="o">=</span><span class="kc">False</span><span class="p">)[:,:,</span><span class="mi">1</span><span class="p">]</span>
</span><span id="ToneCurveController-1634"><a href="#ToneCurveController-1634"><span class="linenos">1634</span></a>                <span class="n">nphistAfter</span>   <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">histogram</span><span class="p">(</span><span class="n">imageAfterY</span><span class="p">,</span> <span class="n">bins</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="ToneCurveController-1635"><a href="#ToneCurveController-1635"><span class="linenos">1635</span></a>                <span class="n">nphistAfter</span>   <span class="o">=</span><span class="n">nphistAfter</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">amax</span><span class="p">(</span><span class="n">nphistAfter</span><span class="p">)</span>
</span><span id="ToneCurveController-1636"><a href="#ToneCurveController-1636"><span class="linenos">1636</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">curve</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">bins</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span><span class="n">nphistAfter</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">,</span>     <span class="n">clear</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="ToneCurveController-1637"><a href="#ToneCurveController-1637"><span class="linenos">1637</span></a>
</span><span id="ToneCurveController-1638"><a href="#ToneCurveController-1638"><span class="linenos">1638</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">showOutput</span><span class="p">:</span>
</span><span id="ToneCurveController-1639"><a href="#ToneCurveController-1639"><span class="linenos">1639</span></a>                <span class="n">imageAftercolorData</span> <span class="o">=</span> <span class="n">processPipe</span><span class="o">.</span><span class="n">getImage</span><span class="p">(</span><span class="n">toneMap</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">colorData</span>
</span><span id="ToneCurveController-1640"><a href="#ToneCurveController-1640"><span class="linenos">1640</span></a>                <span class="n">imageAftercolorData</span><span class="p">[</span><span class="n">imageAftercolorData</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">]</span><span class="o">=</span><span class="mi">1</span>
</span><span id="ToneCurveController-1641"><a href="#ToneCurveController-1641"><span class="linenos">1641</span></a>                <span class="n">imageAfterY</span>  <span class="o">=</span> <span class="n">colour</span><span class="o">.</span><span class="n">sRGB_to_XYZ</span><span class="p">(</span><span class="n">imageAftercolorData</span><span class="p">,</span>  <span class="n">apply_cctf_decoding</span><span class="o">=</span><span class="kc">False</span><span class="p">)[:,:,</span><span class="mi">1</span><span class="p">]</span>
</span><span id="ToneCurveController-1642"><a href="#ToneCurveController-1642"><span class="linenos">1642</span></a>                <span class="n">nphistAfter</span>   <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">histogram</span><span class="p">(</span><span class="n">imageAfterY</span><span class="p">,</span> <span class="n">bins</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="ToneCurveController-1643"><a href="#ToneCurveController-1643"><span class="linenos">1643</span></a>                <span class="n">nphistAfter</span>   <span class="o">=</span><span class="n">nphistAfter</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">amax</span><span class="p">(</span><span class="n">nphistAfter</span><span class="p">)</span>
</span><span id="ToneCurveController-1644"><a href="#ToneCurveController-1644"><span class="linenos">1644</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">curve</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">bins</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span><span class="n">nphistAfter</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">,</span>     <span class="n">clear</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="ToneCurveController-1645"><a href="#ToneCurveController-1645"><span class="linenos">1645</span></a>
</span><span id="ToneCurveController-1646"><a href="#ToneCurveController-1646"><span class="linenos">1646</span></a>            <span class="n">controlPointCoordinates</span><span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">values</span><span class="p">()))</span>
</span><span id="ToneCurveController-1647"><a href="#ToneCurveController-1647"><span class="linenos">1647</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">curve</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">controlPointCoordinates</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span><span class="n">controlPointCoordinates</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span><span class="s1">&#39;ro&#39;</span><span class="p">,</span> <span class="n">clear</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="ToneCurveController-1648"><a href="#ToneCurveController-1648"><span class="linenos">1648</span></a>            <span class="n">points</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">curve</span><span class="o">.</span><span class="n">evalpts</span><span class="p">)</span>
</span><span id="ToneCurveController-1649"><a href="#ToneCurveController-1649"><span class="linenos">1649</span></a>            <span class="n">x</span> <span class="o">=</span> <span class="n">points</span><span class="p">[:,</span><span class="mi">0</span><span class="p">]</span>
</span><span id="ToneCurveController-1650"><a href="#ToneCurveController-1650"><span class="linenos">1650</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">curve</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">points</span><span class="p">[</span><span class="n">x</span><span class="o">&lt;</span><span class="mi">100</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span><span class="n">points</span><span class="p">[</span><span class="n">x</span><span class="o">&lt;</span><span class="mi">100</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span><span class="s1">&#39;r&#39;</span><span class="p">,</span><span class="n">clear</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="ToneCurveController-1651"><a href="#ToneCurveController-1651"><span class="linenos">1651</span></a>        <span class="k">except</span><span class="p">:</span>
</span><span id="ToneCurveController-1652"><a href="#ToneCurveController-1652"><span class="linenos">1652</span></a>            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
</span><span id="ToneCurveController-1653"><a href="#ToneCurveController-1653"><span class="linenos">1653</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">plotCurve</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Controller for tone curve editing with B-spline interpolation.</p>

<p>This class manages the tone curve editing interface, allowing users to adjust
the luminance mapping through control points that define a smooth B-spline curve.
It includes automatic curve generation using machine learning, histogram overlay
display, and comprehensive curve visualization options.</p>

<p>The tone curve is a fundamental HDR processing tool that maps input luminance
values to output values, effectively controlling the overall tone mapping
and local contrast of the image.</p>

<p>Attributes:
    - parent: Parent controller for coordination
    - model (model.ToneCurveModel): Tone curve mathematical model
    - view (view.ToneCurveView): Curve editing interface
    - callBackActive (bool): Enable/disable callback processing
    - showInput (bool): Display input image histogram
    - showbefore (bool): Display pre-curve histogram
    - showAfter (bool): Display post-curve histogram<br />
    - showOutput (bool): Display final output histogram
    - weightFile (str): Machine learning model file for auto-curve
    - networkModel: PyTorch neural network for automatic curve generation</p>
</div>


                            <div id="ToneCurveController.__init__" class="classattr">
                                        <input id="ToneCurveController.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">ToneCurveController</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">parent</span></span>)</span>

                <label class="view-source-button" for="ToneCurveController.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ToneCurveController.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ToneCurveController.__init__-1418"><a href="#ToneCurveController.__init__-1418"><span class="linenos">1418</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
</span><span id="ToneCurveController.__init__-1419"><a href="#ToneCurveController.__init__-1419"><span class="linenos">1419</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ToneCurveController.__init__-1420"><a href="#ToneCurveController.__init__-1420"><span class="linenos">1420</span></a><span class="sd">        Initialize the tone curve controller.</span>
</span><span id="ToneCurveController.__init__-1421"><a href="#ToneCurveController.__init__-1421"><span class="linenos">1421</span></a><span class="sd">        </span>
</span><span id="ToneCurveController.__init__-1422"><a href="#ToneCurveController.__init__-1422"><span class="linenos">1422</span></a><span class="sd">        Args:</span>
</span><span id="ToneCurveController.__init__-1423"><a href="#ToneCurveController.__init__-1423"><span class="linenos">1423</span></a><span class="sd">            parent: Parent controller for coordination and image access</span>
</span><span id="ToneCurveController.__init__-1424"><a href="#ToneCurveController.__init__-1424"><span class="linenos">1424</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ToneCurveController.__init__-1425"><a href="#ToneCurveController.__init__-1425"><span class="linenos">1425</span></a>
</span><span id="ToneCurveController.__init__-1426"><a href="#ToneCurveController.__init__-1426"><span class="linenos">1426</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
</span><span id="ToneCurveController.__init__-1427"><a href="#ToneCurveController.__init__-1427"><span class="linenos">1427</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">ToneCurveModel</span><span class="p">()</span>
</span><span id="ToneCurveController.__init__-1428"><a href="#ToneCurveController.__init__-1428"><span class="linenos">1428</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">ToneCurveView</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="ToneCurveController.__init__-1429"><a href="#ToneCurveController.__init__-1429"><span class="linenos">1429</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="ToneCurveController.__init__-1430"><a href="#ToneCurveController.__init__-1430"><span class="linenos">1430</span></a>
</span><span id="ToneCurveController.__init__-1431"><a href="#ToneCurveController.__init__-1431"><span class="linenos">1431</span></a>        <span class="c1"># tone curve display control</span>
</span><span id="ToneCurveController.__init__-1432"><a href="#ToneCurveController.__init__-1432"><span class="linenos">1432</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">showInput</span> <span class="o">=</span><span class="kc">False</span>
</span><span id="ToneCurveController.__init__-1433"><a href="#ToneCurveController.__init__-1433"><span class="linenos">1433</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">showbefore</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="ToneCurveController.__init__-1434"><a href="#ToneCurveController.__init__-1434"><span class="linenos">1434</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">showAfter</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="ToneCurveController.__init__-1435"><a href="#ToneCurveController.__init__-1435"><span class="linenos">1435</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">showOutput</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="ToneCurveController.__init__-1436"><a href="#ToneCurveController.__init__-1436"><span class="linenos">1436</span></a>
</span><span id="ToneCurveController.__init__-1437"><a href="#ToneCurveController.__init__-1437"><span class="linenos">1437</span></a>        <span class="c1"># zj add semi-auto curve</span>
</span><span id="ToneCurveController.__init__-1438"><a href="#ToneCurveController.__init__-1438"><span class="linenos">1438</span></a>        <span class="c1"># machine learning network and weight file </span>
</span><span id="ToneCurveController.__init__-1439"><a href="#ToneCurveController.__init__-1439"><span class="linenos">1439</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">weightFile</span> <span class="o">=</span> <span class="s1">&#39;MSESig505_0419.pth&#39;</span>
</span><span id="ToneCurveController.__init__-1440"><a href="#ToneCurveController.__init__-1440"><span class="linenos">1440</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">networkModel</span> <span class="o">=</span> <span class="kc">None</span>  
</span></pre></div>


            <div class="docstring"><p>Initialize the tone curve controller.</p>

<p>Args:
    parent: Parent controller for coordination and image access</p>
</div>


                            </div>
                            <div id="ToneCurveController.parent" class="classattr">
                                <div class="attr variable">
            <span class="name">parent</span>

        
    </div>
    <a class="headerlink" href="#ToneCurveController.parent"></a>
    
    

                            </div>
                            <div id="ToneCurveController.model" class="classattr">
                                <div class="attr variable">
            <span class="name">model</span>

        
    </div>
    <a class="headerlink" href="#ToneCurveController.model"></a>
    
    

                            </div>
                            <div id="ToneCurveController.view" class="classattr">
                                <div class="attr variable">
            <span class="name">view</span>

        
    </div>
    <a class="headerlink" href="#ToneCurveController.view"></a>
    
    

                            </div>
                            <div id="ToneCurveController.callBackActive" class="classattr">
                                <div class="attr variable">
            <span class="name">callBackActive</span>

        
    </div>
    <a class="headerlink" href="#ToneCurveController.callBackActive"></a>
    
    

                            </div>
                            <div id="ToneCurveController.showInput" class="classattr">
                                <div class="attr variable">
            <span class="name">showInput</span>

        
    </div>
    <a class="headerlink" href="#ToneCurveController.showInput"></a>
    
    

                            </div>
                            <div id="ToneCurveController.showbefore" class="classattr">
                                <div class="attr variable">
            <span class="name">showbefore</span>

        
    </div>
    <a class="headerlink" href="#ToneCurveController.showbefore"></a>
    
    

                            </div>
                            <div id="ToneCurveController.showAfter" class="classattr">
                                <div class="attr variable">
            <span class="name">showAfter</span>

        
    </div>
    <a class="headerlink" href="#ToneCurveController.showAfter"></a>
    
    

                            </div>
                            <div id="ToneCurveController.showOutput" class="classattr">
                                <div class="attr variable">
            <span class="name">showOutput</span>

        
    </div>
    <a class="headerlink" href="#ToneCurveController.showOutput"></a>
    
    

                            </div>
                            <div id="ToneCurveController.weightFile" class="classattr">
                                <div class="attr variable">
            <span class="name">weightFile</span>

        
    </div>
    <a class="headerlink" href="#ToneCurveController.weightFile"></a>
    
    

                            </div>
                            <div id="ToneCurveController.networkModel" class="classattr">
                                <div class="attr variable">
            <span class="name">networkModel</span>

        
    </div>
    <a class="headerlink" href="#ToneCurveController.networkModel"></a>
    
    

                            </div>
                            <div id="ToneCurveController.sliderChange" class="classattr">
                                        <input id="ToneCurveController.sliderChange-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">sliderChange</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">key</span>, </span><span class="param"><span class="n">value</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ToneCurveController.sliderChange-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ToneCurveController.sliderChange"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ToneCurveController.sliderChange-1442"><a href="#ToneCurveController.sliderChange-1442"><span class="linenos">1442</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">sliderChange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
</span><span id="ToneCurveController.sliderChange-1443"><a href="#ToneCurveController.sliderChange-1443"><span class="linenos">1443</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ToneCurveController.sliderChange-1444"><a href="#ToneCurveController.sliderChange-1444"><span class="linenos">1444</span></a><span class="sd">        Handle tone curve control point adjustments.</span>
</span><span id="ToneCurveController.sliderChange-1445"><a href="#ToneCurveController.sliderChange-1445"><span class="linenos">1445</span></a><span class="sd">        </span>
</span><span id="ToneCurveController.sliderChange-1446"><a href="#ToneCurveController.sliderChange-1446"><span class="linenos">1446</span></a><span class="sd">        Processes changes to individual control points (shadows, blacks, mediums,</span>
</span><span id="ToneCurveController.sliderChange-1447"><a href="#ToneCurveController.sliderChange-1447"><span class="linenos">1447</span></a><span class="sd">        whites, highlights), updates the B-spline curve, and triggers processing</span>
</span><span id="ToneCurveController.sliderChange-1448"><a href="#ToneCurveController.sliderChange-1448"><span class="linenos">1448</span></a><span class="sd">        pipeline updates. Auto-scales related control points to maintain curve smoothness.</span>
</span><span id="ToneCurveController.sliderChange-1449"><a href="#ToneCurveController.sliderChange-1449"><span class="linenos">1449</span></a><span class="sd">        </span>
</span><span id="ToneCurveController.sliderChange-1450"><a href="#ToneCurveController.sliderChange-1450"><span class="linenos">1450</span></a><span class="sd">        Args:</span>
</span><span id="ToneCurveController.sliderChange-1451"><a href="#ToneCurveController.sliderChange-1451"><span class="linenos">1451</span></a><span class="sd">            key (str): Control point identifier (&#39;shadows&#39;, &#39;blacks&#39;, etc.)</span>
</span><span id="ToneCurveController.sliderChange-1452"><a href="#ToneCurveController.sliderChange-1452"><span class="linenos">1452</span></a><span class="sd">            value (float): New value for the control point</span>
</span><span id="ToneCurveController.sliderChange-1453"><a href="#ToneCurveController.sliderChange-1453"><span class="linenos">1453</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ToneCurveController.sliderChange-1454"><a href="#ToneCurveController.sliderChange-1454"><span class="linenos">1454</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CB] &gt;&gt; ToneCurveController.sliderChange(&quot;</span><span class="p">,</span><span class="n">key</span><span class="p">,</span><span class="s2">&quot;,&quot;</span><span class="p">,</span><span class="n">value</span><span class="p">,</span><span class="s2">&quot;)[callBackActive:&quot;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span><span class="p">,</span><span class="s2">&quot;] &quot;</span><span class="p">)</span>
</span><span id="ToneCurveController.sliderChange-1455"><a href="#ToneCurveController.sliderChange-1455"><span class="linenos">1455</span></a>
</span><span id="ToneCurveController.sliderChange-1456"><a href="#ToneCurveController.sliderChange-1456"><span class="linenos">1456</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span><span class="p">:</span>
</span><span id="ToneCurveController.sliderChange-1457"><a href="#ToneCurveController.sliderChange-1457"><span class="linenos">1457</span></a>            <span class="n">newValues</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">autoScale</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="ToneCurveController.sliderChange-1458"><a href="#ToneCurveController.sliderChange-1458"><span class="linenos">1458</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">changeToneCurve</span><span class="p">(</span><span class="n">newValues</span><span class="p">)</span> 
</span><span id="ToneCurveController.sliderChange-1459"><a href="#ToneCurveController.sliderChange-1459"><span class="linenos">1459</span></a>  
</span><span id="ToneCurveController.sliderChange-1460"><a href="#ToneCurveController.sliderChange-1460"><span class="linenos">1460</span></a>            <span class="n">points</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">evaluate</span><span class="p">()</span>
</span><span id="ToneCurveController.sliderChange-1461"><a href="#ToneCurveController.sliderChange-1461"><span class="linenos">1461</span></a>
</span><span id="ToneCurveController.sliderChange-1462"><a href="#ToneCurveController.sliderChange-1462"><span class="linenos">1462</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span>  <span class="kc">False</span>
</span><span id="ToneCurveController.sliderChange-1463"><a href="#ToneCurveController.sliderChange-1463"><span class="linenos">1463</span></a>
</span><span id="ToneCurveController.sliderChange-1464"><a href="#ToneCurveController.sliderChange-1464"><span class="linenos">1464</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderShadows</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">newValues</span><span class="p">[</span><span class="s2">&quot;shadows&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="ToneCurveController.sliderChange-1465"><a href="#ToneCurveController.sliderChange-1465"><span class="linenos">1465</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">editShadows</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">newValues</span><span class="p">[</span><span class="s2">&quot;shadows&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="ToneCurveController.sliderChange-1466"><a href="#ToneCurveController.sliderChange-1466"><span class="linenos">1466</span></a>
</span><span id="ToneCurveController.sliderChange-1467"><a href="#ToneCurveController.sliderChange-1467"><span class="linenos">1467</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderBlacks</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">newValues</span><span class="p">[</span><span class="s2">&quot;blacks&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="ToneCurveController.sliderChange-1468"><a href="#ToneCurveController.sliderChange-1468"><span class="linenos">1468</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">editBlacks</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">newValues</span><span class="p">[</span><span class="s2">&quot;blacks&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="ToneCurveController.sliderChange-1469"><a href="#ToneCurveController.sliderChange-1469"><span class="linenos">1469</span></a>
</span><span id="ToneCurveController.sliderChange-1470"><a href="#ToneCurveController.sliderChange-1470"><span class="linenos">1470</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderMediums</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">newValues</span><span class="p">[</span><span class="s2">&quot;mediums&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="ToneCurveController.sliderChange-1471"><a href="#ToneCurveController.sliderChange-1471"><span class="linenos">1471</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">editMediums</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">newValues</span><span class="p">[</span><span class="s2">&quot;mediums&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="ToneCurveController.sliderChange-1472"><a href="#ToneCurveController.sliderChange-1472"><span class="linenos">1472</span></a>
</span><span id="ToneCurveController.sliderChange-1473"><a href="#ToneCurveController.sliderChange-1473"><span class="linenos">1473</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderWhites</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">newValues</span><span class="p">[</span><span class="s2">&quot;whites&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="ToneCurveController.sliderChange-1474"><a href="#ToneCurveController.sliderChange-1474"><span class="linenos">1474</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">editWhites</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">newValues</span><span class="p">[</span><span class="s2">&quot;whites&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="ToneCurveController.sliderChange-1475"><a href="#ToneCurveController.sliderChange-1475"><span class="linenos">1475</span></a>
</span><span id="ToneCurveController.sliderChange-1476"><a href="#ToneCurveController.sliderChange-1476"><span class="linenos">1476</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderHighlights</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">newValues</span><span class="p">[</span><span class="s2">&quot;highlights&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="ToneCurveController.sliderChange-1477"><a href="#ToneCurveController.sliderChange-1477"><span class="linenos">1477</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">editHighlights</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">newValues</span><span class="p">[</span><span class="s2">&quot;highlights&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="ToneCurveController.sliderChange-1478"><a href="#ToneCurveController.sliderChange-1478"><span class="linenos">1478</span></a>
</span><span id="ToneCurveController.sliderChange-1479"><a href="#ToneCurveController.sliderChange-1479"><span class="linenos">1479</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span>  <span class="kc">True</span>
</span></pre></div>


            <div class="docstring"><p>Handle tone curve control point adjustments.</p>

<p>Processes changes to individual control points (shadows, blacks, mediums,
whites, highlights), updates the B-spline curve, and triggers processing
pipeline updates. Auto-scales related control points to maintain curve smoothness.</p>

<p>Args:
    key (str): Control point identifier ('shadows', 'blacks', etc.)
    value (float): New value for the control point</p>
</div>


                            </div>
                            <div id="ToneCurveController.setValues" class="classattr">
                                        <input id="ToneCurveController.setValues-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">setValues</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">valuesDict</span>, </span><span class="param"><span class="n">callBackActive</span><span class="o">=</span><span class="kc">False</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ToneCurveController.setValues-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ToneCurveController.setValues"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ToneCurveController.setValues-1481"><a href="#ToneCurveController.setValues-1481"><span class="linenos">1481</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setValues</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">valuesDict</span><span class="p">,</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="ToneCurveController.setValues-1482"><a href="#ToneCurveController.setValues-1482"><span class="linenos">1482</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ToneCurveController.setValues-1483"><a href="#ToneCurveController.setValues-1483"><span class="linenos">1483</span></a><span class="sd">        Set all tone curve control points programmatically.</span>
</span><span id="ToneCurveController.setValues-1484"><a href="#ToneCurveController.setValues-1484"><span class="linenos">1484</span></a><span class="sd">        </span>
</span><span id="ToneCurveController.setValues-1485"><a href="#ToneCurveController.setValues-1485"><span class="linenos">1485</span></a><span class="sd">        Updates all control points simultaneously and refreshes the interface</span>
</span><span id="ToneCurveController.setValues-1486"><a href="#ToneCurveController.setValues-1486"><span class="linenos">1486</span></a><span class="sd">        to reflect the new curve shape. Typically used for loading saved</span>
</span><span id="ToneCurveController.setValues-1487"><a href="#ToneCurveController.setValues-1487"><span class="linenos">1487</span></a><span class="sd">        curves or applying automatic curve calculations.</span>
</span><span id="ToneCurveController.setValues-1488"><a href="#ToneCurveController.setValues-1488"><span class="linenos">1488</span></a><span class="sd">        </span>
</span><span id="ToneCurveController.setValues-1489"><a href="#ToneCurveController.setValues-1489"><span class="linenos">1489</span></a><span class="sd">        Args:</span>
</span><span id="ToneCurveController.setValues-1490"><a href="#ToneCurveController.setValues-1490"><span class="linenos">1490</span></a><span class="sd">            valuesDict (dict): Dictionary containing all control point values</span>
</span><span id="ToneCurveController.setValues-1491"><a href="#ToneCurveController.setValues-1491"><span class="linenos">1491</span></a><span class="sd">                             with keys like &#39;shadows&#39;, &#39;blacks&#39;, &#39;mediums&#39;, etc.</span>
</span><span id="ToneCurveController.setValues-1492"><a href="#ToneCurveController.setValues-1492"><span class="linenos">1492</span></a><span class="sd">            callBackActive (bool, optional): Whether to trigger callbacks (default: False)</span>
</span><span id="ToneCurveController.setValues-1493"><a href="#ToneCurveController.setValues-1493"><span class="linenos">1493</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ToneCurveController.setValues-1494"><a href="#ToneCurveController.setValues-1494"><span class="linenos">1494</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; ToneCurveController.setValue(&quot;</span><span class="p">,</span><span class="n">valuesDict</span><span class="p">,</span><span class="s2">&quot;) &quot;</span><span class="p">)</span>
</span><span id="ToneCurveController.setValues-1495"><a href="#ToneCurveController.setValues-1495"><span class="linenos">1495</span></a>
</span><span id="ToneCurveController.setValues-1496"><a href="#ToneCurveController.setValues-1496"><span class="linenos">1496</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="n">callBackActive</span>
</span><span id="ToneCurveController.setValues-1497"><a href="#ToneCurveController.setValues-1497"><span class="linenos">1497</span></a>
</span><span id="ToneCurveController.setValues-1498"><a href="#ToneCurveController.setValues-1498"><span class="linenos">1498</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setValues</span><span class="p">(</span><span class="n">valuesDict</span><span class="p">)</span>
</span><span id="ToneCurveController.setValues-1499"><a href="#ToneCurveController.setValues-1499"><span class="linenos">1499</span></a>        <span class="n">points</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">evaluate</span><span class="p">()</span>
</span><span id="ToneCurveController.setValues-1500"><a href="#ToneCurveController.setValues-1500"><span class="linenos">1500</span></a>
</span><span id="ToneCurveController.setValues-1501"><a href="#ToneCurveController.setValues-1501"><span class="linenos">1501</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderShadows</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">valuesDict</span><span class="p">[</span><span class="s2">&quot;shadows&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="ToneCurveController.setValues-1502"><a href="#ToneCurveController.setValues-1502"><span class="linenos">1502</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">editShadows</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">valuesDict</span><span class="p">[</span><span class="s2">&quot;shadows&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="ToneCurveController.setValues-1503"><a href="#ToneCurveController.setValues-1503"><span class="linenos">1503</span></a>
</span><span id="ToneCurveController.setValues-1504"><a href="#ToneCurveController.setValues-1504"><span class="linenos">1504</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderBlacks</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">valuesDict</span><span class="p">[</span><span class="s2">&quot;blacks&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="ToneCurveController.setValues-1505"><a href="#ToneCurveController.setValues-1505"><span class="linenos">1505</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">editBlacks</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">valuesDict</span><span class="p">[</span><span class="s2">&quot;blacks&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="ToneCurveController.setValues-1506"><a href="#ToneCurveController.setValues-1506"><span class="linenos">1506</span></a>
</span><span id="ToneCurveController.setValues-1507"><a href="#ToneCurveController.setValues-1507"><span class="linenos">1507</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderMediums</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">valuesDict</span><span class="p">[</span><span class="s2">&quot;mediums&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="ToneCurveController.setValues-1508"><a href="#ToneCurveController.setValues-1508"><span class="linenos">1508</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">editMediums</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">valuesDict</span><span class="p">[</span><span class="s2">&quot;mediums&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="ToneCurveController.setValues-1509"><a href="#ToneCurveController.setValues-1509"><span class="linenos">1509</span></a>
</span><span id="ToneCurveController.setValues-1510"><a href="#ToneCurveController.setValues-1510"><span class="linenos">1510</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderWhites</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">valuesDict</span><span class="p">[</span><span class="s2">&quot;whites&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="ToneCurveController.setValues-1511"><a href="#ToneCurveController.setValues-1511"><span class="linenos">1511</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">editWhites</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">valuesDict</span><span class="p">[</span><span class="s2">&quot;whites&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="ToneCurveController.setValues-1512"><a href="#ToneCurveController.setValues-1512"><span class="linenos">1512</span></a>
</span><span id="ToneCurveController.setValues-1513"><a href="#ToneCurveController.setValues-1513"><span class="linenos">1513</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderHighlights</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">valuesDict</span><span class="p">[</span><span class="s2">&quot;highlights&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="ToneCurveController.setValues-1514"><a href="#ToneCurveController.setValues-1514"><span class="linenos">1514</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">editHighlights</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">valuesDict</span><span class="p">[</span><span class="s2">&quot;highlights&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="ToneCurveController.setValues-1515"><a href="#ToneCurveController.setValues-1515"><span class="linenos">1515</span></a>
</span><span id="ToneCurveController.setValues-1516"><a href="#ToneCurveController.setValues-1516"><span class="linenos">1516</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">True</span>
</span></pre></div>


            <div class="docstring"><p>Set all tone curve control points programmatically.</p>

<p>Updates all control points simultaneously and refreshes the interface
to reflect the new curve shape. Typically used for loading saved
curves or applying automatic curve calculations.</p>

<p>Args:
    valuesDict (dict): Dictionary containing all control point values
                     with keys like 'shadows', 'blacks', 'mediums', etc.
    callBackActive (bool, optional): Whether to trigger callbacks (default: False)</p>
</div>


                            </div>
                            <div id="ToneCurveController.autoCurve" class="classattr">
                                        <input id="ToneCurveController.autoCurve-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">autoCurve</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ToneCurveController.autoCurve-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ToneCurveController.autoCurve"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ToneCurveController.autoCurve-1519"><a href="#ToneCurveController.autoCurve-1519"><span class="linenos">1519</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">autoCurve</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ToneCurveController.autoCurve-1520"><a href="#ToneCurveController.autoCurve-1520"><span class="linenos">1520</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ToneCurveController.autoCurve-1521"><a href="#ToneCurveController.autoCurve-1521"><span class="linenos">1521</span></a><span class="sd">        Generate tone curve automatically using machine learning analysis.</span>
</span><span id="ToneCurveController.autoCurve-1522"><a href="#ToneCurveController.autoCurve-1522"><span class="linenos">1522</span></a><span class="sd">        </span>
</span><span id="ToneCurveController.autoCurve-1523"><a href="#ToneCurveController.autoCurve-1523"><span class="linenos">1523</span></a><span class="sd">        Analyzes the current image&#39;s histogram distribution and uses a trained</span>
</span><span id="ToneCurveController.autoCurve-1524"><a href="#ToneCurveController.autoCurve-1524"><span class="linenos">1524</span></a><span class="sd">        neural network to predict optimal control point values for enhanced</span>
</span><span id="ToneCurveController.autoCurve-1525"><a href="#ToneCurveController.autoCurve-1525"><span class="linenos">1525</span></a><span class="sd">        image appearance. The ML model considers luminance distribution patterns</span>
</span><span id="ToneCurveController.autoCurve-1526"><a href="#ToneCurveController.autoCurve-1526"><span class="linenos">1526</span></a><span class="sd">        to suggest appropriate tone mapping.</span>
</span><span id="ToneCurveController.autoCurve-1527"><a href="#ToneCurveController.autoCurve-1527"><span class="linenos">1527</span></a><span class="sd">        </span>
</span><span id="ToneCurveController.autoCurve-1528"><a href="#ToneCurveController.autoCurve-1528"><span class="linenos">1528</span></a><span class="sd">        The process involves:</span>
</span><span id="ToneCurveController.autoCurve-1529"><a href="#ToneCurveController.autoCurve-1529"><span class="linenos">1529</span></a><span class="sd">        1. Computing cumulative histogram of image luminance</span>
</span><span id="ToneCurveController.autoCurve-1530"><a href="#ToneCurveController.autoCurve-1530"><span class="linenos">1530</span></a><span class="sd">        2. Feeding histogram to trained neural network</span>
</span><span id="ToneCurveController.autoCurve-1531"><a href="#ToneCurveController.autoCurve-1531"><span class="linenos">1531</span></a><span class="sd">        3. Predicting optimal control point values</span>
</span><span id="ToneCurveController.autoCurve-1532"><a href="#ToneCurveController.autoCurve-1532"><span class="linenos">1532</span></a><span class="sd">        4. Applying the generated curve to the processing pipeline</span>
</span><span id="ToneCurveController.autoCurve-1533"><a href="#ToneCurveController.autoCurve-1533"><span class="linenos">1533</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ToneCurveController.autoCurve-1534"><a href="#ToneCurveController.autoCurve-1534"><span class="linenos">1534</span></a>        <span class="n">processPipe</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getProcessPipe</span><span class="p">()</span>
</span><span id="ToneCurveController.autoCurve-1535"><a href="#ToneCurveController.autoCurve-1535"><span class="linenos">1535</span></a>        <span class="k">if</span> <span class="n">processPipe</span> <span class="o">!=</span> <span class="kc">None</span> <span class="p">:</span>
</span><span id="ToneCurveController.autoCurve-1536"><a href="#ToneCurveController.autoCurve-1536"><span class="linenos">1536</span></a>            <span class="n">idExposure</span> <span class="o">=</span> <span class="n">processPipe</span><span class="o">.</span><span class="n">getProcessNodeByName</span><span class="p">(</span><span class="s2">&quot;tonecurve&quot;</span><span class="p">)</span>
</span><span id="ToneCurveController.autoCurve-1537"><a href="#ToneCurveController.autoCurve-1537"><span class="linenos">1537</span></a>            <span class="n">bins</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">50</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
</span><span id="ToneCurveController.autoCurve-1538"><a href="#ToneCurveController.autoCurve-1538"><span class="linenos">1538</span></a>
</span><span id="ToneCurveController.autoCurve-1539"><a href="#ToneCurveController.autoCurve-1539"><span class="linenos">1539</span></a>            <span class="n">imageBeforeColorData</span> <span class="o">=</span> <span class="n">processPipe</span><span class="o">.</span><span class="n">processNodes</span><span class="p">[</span><span class="n">idExposure</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">outputImage</span><span class="o">.</span><span class="n">colorData</span>
</span><span id="ToneCurveController.autoCurve-1540"><a href="#ToneCurveController.autoCurve-1540"><span class="linenos">1540</span></a>            <span class="n">imageBeforeColorData</span><span class="p">[</span><span class="n">imageBeforeColorData</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">]</span><span class="o">=</span><span class="mi">1</span>
</span><span id="ToneCurveController.autoCurve-1541"><a href="#ToneCurveController.autoCurve-1541"><span class="linenos">1541</span></a>            <span class="n">imageBeforeY</span> <span class="o">=</span> <span class="n">colour</span><span class="o">.</span><span class="n">sRGB_to_XYZ</span><span class="p">(</span><span class="n">imageBeforeColorData</span><span class="p">,</span> <span class="n">apply_cctf_decoding</span><span class="o">=</span><span class="kc">False</span><span class="p">)[:,:,</span><span class="mi">1</span><span class="p">]</span>
</span><span id="ToneCurveController.autoCurve-1542"><a href="#ToneCurveController.autoCurve-1542"><span class="linenos">1542</span></a>            <span class="n">nphistBefore</span>  <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">histogram</span><span class="p">(</span><span class="n">imageBeforeY</span><span class="p">,</span> <span class="n">bins</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="ToneCurveController.autoCurve-1543"><a href="#ToneCurveController.autoCurve-1543"><span class="linenos">1543</span></a>            <span class="n">nphistBefore</span>  <span class="o">=</span> <span class="n">nphistBefore</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">amax</span><span class="p">(</span><span class="n">nphistBefore</span><span class="p">)</span>
</span><span id="ToneCurveController.autoCurve-1544"><a href="#ToneCurveController.autoCurve-1544"><span class="linenos">1544</span></a>
</span><span id="ToneCurveController.autoCurve-1545"><a href="#ToneCurveController.autoCurve-1545"><span class="linenos">1545</span></a>            <span class="n">npImgHistCumuNorm</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty_like</span><span class="p">(</span><span class="n">nphistBefore</span><span class="p">)</span>
</span><span id="ToneCurveController.autoCurve-1546"><a href="#ToneCurveController.autoCurve-1546"><span class="linenos">1546</span></a>            <span class="n">npImgHistCumu</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cumsum</span><span class="p">(</span><span class="n">nphistBefore</span><span class="p">)</span>
</span><span id="ToneCurveController.autoCurve-1547"><a href="#ToneCurveController.autoCurve-1547"><span class="linenos">1547</span></a>            <span class="n">npImgHistCumuNorm</span> <span class="o">=</span> <span class="n">npImgHistCumu</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">npImgHistCumu</span><span class="p">)</span>
</span><span id="ToneCurveController.autoCurve-1548"><a href="#ToneCurveController.autoCurve-1548"><span class="linenos">1548</span></a>            
</span><span id="ToneCurveController.autoCurve-1549"><a href="#ToneCurveController.autoCurve-1549"><span class="linenos">1549</span></a>            <span class="c1">#predict keypoint value</span>
</span><span id="ToneCurveController.autoCurve-1550"><a href="#ToneCurveController.autoCurve-1550"><span class="linenos">1550</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">networkModel</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ToneCurveController.autoCurve-1551"><a href="#ToneCurveController.autoCurve-1551"><span class="linenos">1551</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">networkModel</span> <span class="o">=</span> <span class="n">Net</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
</span><span id="ToneCurveController.autoCurve-1552"><a href="#ToneCurveController.autoCurve-1552"><span class="linenos">1552</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">networkModel</span><span class="o">.</span><span class="n">load_state_dict</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">weightFile</span><span class="p">))</span>
</span><span id="ToneCurveController.autoCurve-1553"><a href="#ToneCurveController.autoCurve-1553"><span class="linenos">1553</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">networkModel</span><span class="o">.</span><span class="n">eval</span><span class="p">()</span>
</span><span id="ToneCurveController.autoCurve-1554"><a href="#ToneCurveController.autoCurve-1554"><span class="linenos">1554</span></a>
</span><span id="ToneCurveController.autoCurve-1555"><a href="#ToneCurveController.autoCurve-1555"><span class="linenos">1555</span></a>            <span class="k">with</span> <span class="n">torch</span><span class="o">.</span><span class="n">no_grad</span><span class="p">():</span>
</span><span id="ToneCurveController.autoCurve-1556"><a href="#ToneCurveController.autoCurve-1556"><span class="linenos">1556</span></a>                <span class="n">x</span> <span class="o">=</span> <span class="n">Variable</span><span class="p">(</span><span class="n">torch</span><span class="o">.</span><span class="n">FloatTensor</span><span class="p">([</span><span class="n">npImgHistCumuNorm</span><span class="o">.</span><span class="n">tolist</span><span class="p">(),]),</span> <span class="n">requires_grad</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="ToneCurveController.autoCurve-1557"><a href="#ToneCurveController.autoCurve-1557"><span class="linenos">1557</span></a>                <span class="n">y_predict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">networkModel</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</span><span id="ToneCurveController.autoCurve-1558"><a href="#ToneCurveController.autoCurve-1558"><span class="linenos">1558</span></a>
</span><span id="ToneCurveController.autoCurve-1559"><a href="#ToneCurveController.autoCurve-1559"><span class="linenos">1559</span></a>            <span class="n">kpc</span> <span class="o">=</span> <span class="p">(</span><span class="n">y_predict</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="mi">100</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span> 
</span><span id="ToneCurveController.autoCurve-1560"><a href="#ToneCurveController.autoCurve-1560"><span class="linenos">1560</span></a>            <span class="n">kpcDict</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;start&#39;</span><span class="p">:[</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">],</span> <span class="s1">&#39;shadows&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">10.0</span><span class="p">,</span><span class="nb">int</span><span class="p">(</span><span class="n">kpc</span><span class="p">[</span><span class="mi">0</span><span class="p">])],</span> <span class="s1">&#39;blacks&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">30.0</span><span class="p">,</span><span class="nb">int</span><span class="p">(</span><span class="n">kpc</span><span class="p">[</span><span class="mi">1</span><span class="p">])],</span> <span class="s1">&#39;mediums&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">50.0</span><span class="p">,</span><span class="nb">int</span><span class="p">(</span><span class="n">kpc</span><span class="p">[</span><span class="mi">2</span><span class="p">])],</span> <span class="s1">&#39;whites&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">70.0</span><span class="p">,</span><span class="nb">int</span><span class="p">(</span><span class="n">kpc</span><span class="p">[</span><span class="mi">3</span><span class="p">])],</span> <span class="s1">&#39;highlights&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">90.0</span><span class="p">,</span><span class="nb">int</span><span class="p">(</span><span class="n">kpc</span><span class="p">[</span><span class="mi">4</span><span class="p">])],</span> <span class="s1">&#39;end&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">100.0</span><span class="p">,</span><span class="mf">100.0</span><span class="p">]}</span>
</span><span id="ToneCurveController.autoCurve-1561"><a href="#ToneCurveController.autoCurve-1561"><span class="linenos">1561</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">setValues</span><span class="p">(</span><span class="n">kpcDict</span><span class="p">,</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
</span><span id="ToneCurveController.autoCurve-1562"><a href="#ToneCurveController.autoCurve-1562"><span class="linenos">1562</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">changeToneCurve</span><span class="p">(</span><span class="n">kpcDict</span><span class="p">)</span> 
</span></pre></div>


            <div class="docstring"><p>Generate tone curve automatically using machine learning analysis.</p>

<p>Analyzes the current image's histogram distribution and uses a trained
neural network to predict optimal control point values for enhanced
image appearance. The ML model considers luminance distribution patterns
to suggest appropriate tone mapping.</p>

<p>The process involves:</p>

<ol>
<li>Computing cumulative histogram of image luminance</li>
<li>Feeding histogram to trained neural network</li>
<li>Predicting optimal control point values</li>
<li>Applying the generated curve to the processing pipeline</li>
</ol>
</div>


                            </div>
                            <div id="ToneCurveController.reset" class="classattr">
                                        <input id="ToneCurveController.reset-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">reset</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">key</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ToneCurveController.reset-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ToneCurveController.reset"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ToneCurveController.reset-1567"><a href="#ToneCurveController.reset-1567"><span class="linenos">1567</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
</span><span id="ToneCurveController.reset-1568"><a href="#ToneCurveController.reset-1568"><span class="linenos">1568</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ToneCurveController.reset-1569"><a href="#ToneCurveController.reset-1569"><span class="linenos">1569</span></a><span class="sd">        Reset specific control point to its default value.</span>
</span><span id="ToneCurveController.reset-1570"><a href="#ToneCurveController.reset-1570"><span class="linenos">1570</span></a><span class="sd">        </span>
</span><span id="ToneCurveController.reset-1571"><a href="#ToneCurveController.reset-1571"><span class="linenos">1571</span></a><span class="sd">        Restores a single control point to its default position and updates</span>
</span><span id="ToneCurveController.reset-1572"><a href="#ToneCurveController.reset-1572"><span class="linenos">1572</span></a><span class="sd">        the curve accordingly. Useful for correcting individual control</span>
</span><span id="ToneCurveController.reset-1573"><a href="#ToneCurveController.reset-1573"><span class="linenos">1573</span></a><span class="sd">        points without affecting the entire curve.</span>
</span><span id="ToneCurveController.reset-1574"><a href="#ToneCurveController.reset-1574"><span class="linenos">1574</span></a><span class="sd">        </span>
</span><span id="ToneCurveController.reset-1575"><a href="#ToneCurveController.reset-1575"><span class="linenos">1575</span></a><span class="sd">        Args:</span>
</span><span id="ToneCurveController.reset-1576"><a href="#ToneCurveController.reset-1576"><span class="linenos">1576</span></a><span class="sd">            key (str): Control point to reset (&#39;shadows&#39;, &#39;blacks&#39;, etc.)</span>
</span><span id="ToneCurveController.reset-1577"><a href="#ToneCurveController.reset-1577"><span class="linenos">1577</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ToneCurveController.reset-1578"><a href="#ToneCurveController.reset-1578"><span class="linenos">1578</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; ToneCurveController.reset(&quot;</span><span class="p">,</span><span class="n">key</span><span class="p">,</span><span class="s2">&quot;) &quot;</span><span class="p">)</span>
</span><span id="ToneCurveController.reset-1579"><a href="#ToneCurveController.reset-1579"><span class="linenos">1579</span></a>
</span><span id="ToneCurveController.reset-1580"><a href="#ToneCurveController.reset-1580"><span class="linenos">1580</span></a>        <span class="n">valuesDefault</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">default</span><span class="p">[</span><span class="n">key</span><span class="p">])[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="ToneCurveController.reset-1581"><a href="#ToneCurveController.reset-1581"><span class="linenos">1581</span></a>        <span class="n">controls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">valuesDefault</span><span class="p">)</span>
</span><span id="ToneCurveController.reset-1582"><a href="#ToneCurveController.reset-1582"><span class="linenos">1582</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">setValues</span><span class="p">(</span><span class="n">controls</span><span class="p">,</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="ToneCurveController.reset-1583"><a href="#ToneCurveController.reset-1583"><span class="linenos">1583</span></a>
</span><span id="ToneCurveController.reset-1584"><a href="#ToneCurveController.reset-1584"><span class="linenos">1584</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">changeToneCurve</span><span class="p">(</span><span class="n">controls</span><span class="p">)</span> 
</span></pre></div>


            <div class="docstring"><p>Reset specific control point to its default value.</p>

<p>Restores a single control point to its default position and updates
the curve accordingly. Useful for correcting individual control
points without affecting the entire curve.</p>

<p>Args:
    key (str): Control point to reset ('shadows', 'blacks', etc.)</p>
</div>


                            </div>
                            <div id="ToneCurveController.plotCurve" class="classattr">
                                        <input id="ToneCurveController.plotCurve-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">plotCurve</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ToneCurveController.plotCurve-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ToneCurveController.plotCurve"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ToneCurveController.plotCurve-1586"><a href="#ToneCurveController.plotCurve-1586"><span class="linenos">1586</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">plotCurve</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="ToneCurveController.plotCurve-1587"><a href="#ToneCurveController.plotCurve-1587"><span class="linenos">1587</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ToneCurveController.plotCurve-1588"><a href="#ToneCurveController.plotCurve-1588"><span class="linenos">1588</span></a><span class="sd">        Display tone curve and histogram overlays.</span>
</span><span id="ToneCurveController.plotCurve-1589"><a href="#ToneCurveController.plotCurve-1589"><span class="linenos">1589</span></a><span class="sd">        </span>
</span><span id="ToneCurveController.plotCurve-1590"><a href="#ToneCurveController.plotCurve-1590"><span class="linenos">1590</span></a><span class="sd">        Renders the current tone curve along with optional histogram overlays</span>
</span><span id="ToneCurveController.plotCurve-1591"><a href="#ToneCurveController.plotCurve-1591"><span class="linenos">1591</span></a><span class="sd">        for input, pre-processing, post-processing, and output stages. Provides</span>
</span><span id="ToneCurveController.plotCurve-1592"><a href="#ToneCurveController.plotCurve-1592"><span class="linenos">1592</span></a><span class="sd">        visual feedback on how the curve affects the image&#39;s tonal distribution.</span>
</span><span id="ToneCurveController.plotCurve-1593"><a href="#ToneCurveController.plotCurve-1593"><span class="linenos">1593</span></a><span class="sd">        </span>
</span><span id="ToneCurveController.plotCurve-1594"><a href="#ToneCurveController.plotCurve-1594"><span class="linenos">1594</span></a><span class="sd">        The plot includes:</span>
</span><span id="ToneCurveController.plotCurve-1595"><a href="#ToneCurveController.plotCurve-1595"><span class="linenos">1595</span></a><span class="sd">        - Grid lines for reference</span>
</span><span id="ToneCurveController.plotCurve-1596"><a href="#ToneCurveController.plotCurve-1596"><span class="linenos">1596</span></a><span class="sd">        - Tone curve visualization</span>
</span><span id="ToneCurveController.plotCurve-1597"><a href="#ToneCurveController.plotCurve-1597"><span class="linenos">1597</span></a><span class="sd">        - Control points markers</span>
</span><span id="ToneCurveController.plotCurve-1598"><a href="#ToneCurveController.plotCurve-1598"><span class="linenos">1598</span></a><span class="sd">        - Optional histogram overlays for different processing stages</span>
</span><span id="ToneCurveController.plotCurve-1599"><a href="#ToneCurveController.plotCurve-1599"><span class="linenos">1599</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ToneCurveController.plotCurve-1600"><a href="#ToneCurveController.plotCurve-1600"><span class="linenos">1600</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="ToneCurveController.plotCurve-1601"><a href="#ToneCurveController.plotCurve-1601"><span class="linenos">1601</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">curve</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">],</span><span class="s1">&#39;r--&#39;</span><span class="p">,</span> <span class="n">clear</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="ToneCurveController.plotCurve-1602"><a href="#ToneCurveController.plotCurve-1602"><span class="linenos">1602</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">curve</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="mi">20</span><span class="p">,</span><span class="mi">20</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">],</span><span class="s1">&#39;r--&#39;</span><span class="p">,</span> <span class="n">clear</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="ToneCurveController.plotCurve-1603"><a href="#ToneCurveController.plotCurve-1603"><span class="linenos">1603</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">curve</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="mi">40</span><span class="p">,</span><span class="mi">40</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">],</span><span class="s1">&#39;r--&#39;</span><span class="p">,</span> <span class="n">clear</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="ToneCurveController.plotCurve-1604"><a href="#ToneCurveController.plotCurve-1604"><span class="linenos">1604</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">curve</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="mi">60</span><span class="p">,</span><span class="mi">60</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">],</span><span class="s1">&#39;r--&#39;</span><span class="p">,</span> <span class="n">clear</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="ToneCurveController.plotCurve-1605"><a href="#ToneCurveController.plotCurve-1605"><span class="linenos">1605</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">curve</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="mi">80</span><span class="p">,</span><span class="mi">80</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">],</span><span class="s1">&#39;r--&#39;</span><span class="p">,</span> <span class="n">clear</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="ToneCurveController.plotCurve-1606"><a href="#ToneCurveController.plotCurve-1606"><span class="linenos">1606</span></a>
</span><span id="ToneCurveController.plotCurve-1607"><a href="#ToneCurveController.plotCurve-1607"><span class="linenos">1607</span></a>            <span class="n">processPipe</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getProcessPipe</span><span class="p">()</span>
</span><span id="ToneCurveController.plotCurve-1608"><a href="#ToneCurveController.plotCurve-1608"><span class="linenos">1608</span></a>            <span class="n">idExposure</span> <span class="o">=</span> <span class="n">processPipe</span><span class="o">.</span><span class="n">getProcessNodeByName</span><span class="p">(</span><span class="s2">&quot;tonecurve&quot;</span><span class="p">)</span>
</span><span id="ToneCurveController.plotCurve-1609"><a href="#ToneCurveController.plotCurve-1609"><span class="linenos">1609</span></a>
</span><span id="ToneCurveController.plotCurve-1610"><a href="#ToneCurveController.plotCurve-1610"><span class="linenos">1610</span></a>            <span class="n">bins</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">50</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
</span><span id="ToneCurveController.plotCurve-1611"><a href="#ToneCurveController.plotCurve-1611"><span class="linenos">1611</span></a>
</span><span id="ToneCurveController.plotCurve-1612"><a href="#ToneCurveController.plotCurve-1612"><span class="linenos">1612</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">showInput</span><span class="p">:</span>
</span><span id="ToneCurveController.plotCurve-1613"><a href="#ToneCurveController.plotCurve-1613"><span class="linenos">1613</span></a>                <span class="n">imageInput</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">processPipe</span><span class="o">.</span><span class="n">getInputImage</span><span class="p">())</span>
</span><span id="ToneCurveController.plotCurve-1614"><a href="#ToneCurveController.plotCurve-1614"><span class="linenos">1614</span></a>                <span class="k">if</span> <span class="n">imageInput</span><span class="o">.</span><span class="n">linear</span><span class="p">:</span> <span class="n">imageInputColorData</span> <span class="o">=</span><span class="n">colour</span><span class="o">.</span><span class="n">cctf_encoding</span><span class="p">(</span><span class="n">imageInput</span><span class="o">.</span><span class="n">colorData</span><span class="p">,</span> <span class="n">function</span><span class="o">=</span><span class="s1">&#39;sRGB&#39;</span><span class="p">)</span>
</span><span id="ToneCurveController.plotCurve-1615"><a href="#ToneCurveController.plotCurve-1615"><span class="linenos">1615</span></a>                <span class="k">else</span><span class="p">:</span> <span class="n">imageInputColorData</span> <span class="o">=</span> <span class="n">imageInput</span><span class="o">.</span><span class="n">colorData</span>
</span><span id="ToneCurveController.plotCurve-1616"><a href="#ToneCurveController.plotCurve-1616"><span class="linenos">1616</span></a>                <span class="n">imageInputColorData</span><span class="p">[</span><span class="n">imageInputColorData</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">]</span><span class="o">=</span><span class="mi">1</span>
</span><span id="ToneCurveController.plotCurve-1617"><a href="#ToneCurveController.plotCurve-1617"><span class="linenos">1617</span></a>                <span class="n">imageInputY</span> <span class="o">=</span> <span class="n">colour</span><span class="o">.</span><span class="n">sRGB_to_XYZ</span><span class="p">(</span><span class="n">imageInputColorData</span><span class="p">,</span> <span class="n">apply_cctf_decoding</span><span class="o">=</span><span class="kc">False</span><span class="p">)[:,:,</span><span class="mi">1</span><span class="p">]</span>
</span><span id="ToneCurveController.plotCurve-1618"><a href="#ToneCurveController.plotCurve-1618"><span class="linenos">1618</span></a>                <span class="n">nphistInput</span>  <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">histogram</span><span class="p">(</span><span class="n">imageInputY</span><span class="p">,</span> <span class="n">bins</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="ToneCurveController.plotCurve-1619"><a href="#ToneCurveController.plotCurve-1619"><span class="linenos">1619</span></a>                <span class="n">nphistInput</span>  <span class="o">=</span> <span class="n">nphistInput</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">amax</span><span class="p">(</span><span class="n">nphistInput</span><span class="p">)</span>
</span><span id="ToneCurveController.plotCurve-1620"><a href="#ToneCurveController.plotCurve-1620"><span class="linenos">1620</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">curve</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">bins</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span><span class="n">nphistInput</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span><span class="s1">&#39;k--&#39;</span><span class="p">,</span>  <span class="n">clear</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="ToneCurveController.plotCurve-1621"><a href="#ToneCurveController.plotCurve-1621"><span class="linenos">1621</span></a>
</span><span id="ToneCurveController.plotCurve-1622"><a href="#ToneCurveController.plotCurve-1622"><span class="linenos">1622</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">showbefore</span><span class="p">:</span>
</span><span id="ToneCurveController.plotCurve-1623"><a href="#ToneCurveController.plotCurve-1623"><span class="linenos">1623</span></a>                <span class="n">imageBeforeColorData</span> <span class="o">=</span> <span class="n">processPipe</span><span class="o">.</span><span class="n">processNodes</span><span class="p">[</span><span class="n">idExposure</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">outputImage</span><span class="o">.</span><span class="n">colorData</span>
</span><span id="ToneCurveController.plotCurve-1624"><a href="#ToneCurveController.plotCurve-1624"><span class="linenos">1624</span></a>                <span class="n">imageBeforeColorData</span><span class="p">[</span><span class="n">imageBeforeColorData</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">]</span><span class="o">=</span><span class="mi">1</span>
</span><span id="ToneCurveController.plotCurve-1625"><a href="#ToneCurveController.plotCurve-1625"><span class="linenos">1625</span></a>                <span class="n">imageBeforeY</span> <span class="o">=</span> <span class="n">colour</span><span class="o">.</span><span class="n">sRGB_to_XYZ</span><span class="p">(</span><span class="n">imageBeforeColorData</span><span class="p">,</span> <span class="n">apply_cctf_decoding</span><span class="o">=</span><span class="kc">False</span><span class="p">)[:,:,</span><span class="mi">1</span><span class="p">]</span>
</span><span id="ToneCurveController.plotCurve-1626"><a href="#ToneCurveController.plotCurve-1626"><span class="linenos">1626</span></a>                <span class="n">nphistBefore</span>  <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">histogram</span><span class="p">(</span><span class="n">imageBeforeY</span><span class="p">,</span> <span class="n">bins</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="ToneCurveController.plotCurve-1627"><a href="#ToneCurveController.plotCurve-1627"><span class="linenos">1627</span></a>                <span class="n">nphistBefore</span>  <span class="o">=</span> <span class="n">nphistBefore</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">amax</span><span class="p">(</span><span class="n">nphistBefore</span><span class="p">)</span>
</span><span id="ToneCurveController.plotCurve-1628"><a href="#ToneCurveController.plotCurve-1628"><span class="linenos">1628</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">curve</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">bins</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span><span class="n">nphistBefore</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span><span class="s1">&#39;b--&#39;</span><span class="p">,</span>  <span class="n">clear</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="ToneCurveController.plotCurve-1629"><a href="#ToneCurveController.plotCurve-1629"><span class="linenos">1629</span></a>
</span><span id="ToneCurveController.plotCurve-1630"><a href="#ToneCurveController.plotCurve-1630"><span class="linenos">1630</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">showAfter</span><span class="p">:</span>
</span><span id="ToneCurveController.plotCurve-1631"><a href="#ToneCurveController.plotCurve-1631"><span class="linenos">1631</span></a>                <span class="n">imageAftercolorData</span> <span class="o">=</span> <span class="n">processPipe</span><span class="o">.</span><span class="n">processNodes</span><span class="p">[</span><span class="n">idExposure</span><span class="p">]</span><span class="o">.</span><span class="n">outputImage</span><span class="o">.</span><span class="n">colorData</span>
</span><span id="ToneCurveController.plotCurve-1632"><a href="#ToneCurveController.plotCurve-1632"><span class="linenos">1632</span></a>                <span class="n">imageAftercolorData</span><span class="p">[</span><span class="n">imageAftercolorData</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">]</span><span class="o">=</span><span class="mi">1</span>
</span><span id="ToneCurveController.plotCurve-1633"><a href="#ToneCurveController.plotCurve-1633"><span class="linenos">1633</span></a>                <span class="n">imageAfterY</span>  <span class="o">=</span> <span class="n">colour</span><span class="o">.</span><span class="n">sRGB_to_XYZ</span><span class="p">(</span><span class="n">imageAftercolorData</span><span class="p">,</span>  <span class="n">apply_cctf_decoding</span><span class="o">=</span><span class="kc">False</span><span class="p">)[:,:,</span><span class="mi">1</span><span class="p">]</span>
</span><span id="ToneCurveController.plotCurve-1634"><a href="#ToneCurveController.plotCurve-1634"><span class="linenos">1634</span></a>                <span class="n">nphistAfter</span>   <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">histogram</span><span class="p">(</span><span class="n">imageAfterY</span><span class="p">,</span> <span class="n">bins</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="ToneCurveController.plotCurve-1635"><a href="#ToneCurveController.plotCurve-1635"><span class="linenos">1635</span></a>                <span class="n">nphistAfter</span>   <span class="o">=</span><span class="n">nphistAfter</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">amax</span><span class="p">(</span><span class="n">nphistAfter</span><span class="p">)</span>
</span><span id="ToneCurveController.plotCurve-1636"><a href="#ToneCurveController.plotCurve-1636"><span class="linenos">1636</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">curve</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">bins</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span><span class="n">nphistAfter</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">,</span>     <span class="n">clear</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="ToneCurveController.plotCurve-1637"><a href="#ToneCurveController.plotCurve-1637"><span class="linenos">1637</span></a>
</span><span id="ToneCurveController.plotCurve-1638"><a href="#ToneCurveController.plotCurve-1638"><span class="linenos">1638</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">showOutput</span><span class="p">:</span>
</span><span id="ToneCurveController.plotCurve-1639"><a href="#ToneCurveController.plotCurve-1639"><span class="linenos">1639</span></a>                <span class="n">imageAftercolorData</span> <span class="o">=</span> <span class="n">processPipe</span><span class="o">.</span><span class="n">getImage</span><span class="p">(</span><span class="n">toneMap</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">colorData</span>
</span><span id="ToneCurveController.plotCurve-1640"><a href="#ToneCurveController.plotCurve-1640"><span class="linenos">1640</span></a>                <span class="n">imageAftercolorData</span><span class="p">[</span><span class="n">imageAftercolorData</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">]</span><span class="o">=</span><span class="mi">1</span>
</span><span id="ToneCurveController.plotCurve-1641"><a href="#ToneCurveController.plotCurve-1641"><span class="linenos">1641</span></a>                <span class="n">imageAfterY</span>  <span class="o">=</span> <span class="n">colour</span><span class="o">.</span><span class="n">sRGB_to_XYZ</span><span class="p">(</span><span class="n">imageAftercolorData</span><span class="p">,</span>  <span class="n">apply_cctf_decoding</span><span class="o">=</span><span class="kc">False</span><span class="p">)[:,:,</span><span class="mi">1</span><span class="p">]</span>
</span><span id="ToneCurveController.plotCurve-1642"><a href="#ToneCurveController.plotCurve-1642"><span class="linenos">1642</span></a>                <span class="n">nphistAfter</span>   <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">histogram</span><span class="p">(</span><span class="n">imageAfterY</span><span class="p">,</span> <span class="n">bins</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="ToneCurveController.plotCurve-1643"><a href="#ToneCurveController.plotCurve-1643"><span class="linenos">1643</span></a>                <span class="n">nphistAfter</span>   <span class="o">=</span><span class="n">nphistAfter</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">amax</span><span class="p">(</span><span class="n">nphistAfter</span><span class="p">)</span>
</span><span id="ToneCurveController.plotCurve-1644"><a href="#ToneCurveController.plotCurve-1644"><span class="linenos">1644</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">curve</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">bins</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span><span class="n">nphistAfter</span><span class="o">*</span><span class="mi">100</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">,</span>     <span class="n">clear</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="ToneCurveController.plotCurve-1645"><a href="#ToneCurveController.plotCurve-1645"><span class="linenos">1645</span></a>
</span><span id="ToneCurveController.plotCurve-1646"><a href="#ToneCurveController.plotCurve-1646"><span class="linenos">1646</span></a>            <span class="n">controlPointCoordinates</span><span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">control</span><span class="o">.</span><span class="n">values</span><span class="p">()))</span>
</span><span id="ToneCurveController.plotCurve-1647"><a href="#ToneCurveController.plotCurve-1647"><span class="linenos">1647</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">curve</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">controlPointCoordinates</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span><span class="n">controlPointCoordinates</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span><span class="s1">&#39;ro&#39;</span><span class="p">,</span> <span class="n">clear</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="ToneCurveController.plotCurve-1648"><a href="#ToneCurveController.plotCurve-1648"><span class="linenos">1648</span></a>            <span class="n">points</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">curve</span><span class="o">.</span><span class="n">evalpts</span><span class="p">)</span>
</span><span id="ToneCurveController.plotCurve-1649"><a href="#ToneCurveController.plotCurve-1649"><span class="linenos">1649</span></a>            <span class="n">x</span> <span class="o">=</span> <span class="n">points</span><span class="p">[:,</span><span class="mi">0</span><span class="p">]</span>
</span><span id="ToneCurveController.plotCurve-1650"><a href="#ToneCurveController.plotCurve-1650"><span class="linenos">1650</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">curve</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">points</span><span class="p">[</span><span class="n">x</span><span class="o">&lt;</span><span class="mi">100</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span><span class="n">points</span><span class="p">[</span><span class="n">x</span><span class="o">&lt;</span><span class="mi">100</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span><span class="s1">&#39;r&#39;</span><span class="p">,</span><span class="n">clear</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="ToneCurveController.plotCurve-1651"><a href="#ToneCurveController.plotCurve-1651"><span class="linenos">1651</span></a>        <span class="k">except</span><span class="p">:</span>
</span><span id="ToneCurveController.plotCurve-1652"><a href="#ToneCurveController.plotCurve-1652"><span class="linenos">1652</span></a>            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
</span><span id="ToneCurveController.plotCurve-1653"><a href="#ToneCurveController.plotCurve-1653"><span class="linenos">1653</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">plotCurve</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Display tone curve and histogram overlays.</p>

<p>Renders the current tone curve along with optional histogram overlays
for input, pre-processing, post-processing, and output stages. Provides
visual feedback on how the curve affects the image's tonal distribution.</p>

<p>The plot includes:</p>

<ul>
<li>Grid lines for reference</li>
<li>Tone curve visualization</li>
<li>Control points markers</li>
<li>Optional histogram overlays for different processing stages</li>
</ul>
</div>


                            </div>
                </section>
                <section id="LightnessMaskController">
                            <input id="LightnessMaskController-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">LightnessMaskController</span>:

                <label class="view-source-button" for="LightnessMaskController-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LightnessMaskController"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LightnessMaskController-1657"><a href="#LightnessMaskController-1657"><span class="linenos">1657</span></a><span class="k">class</span><span class="w"> </span><span class="nc">LightnessMaskController</span><span class="p">():</span>
</span><span id="LightnessMaskController-1658"><a href="#LightnessMaskController-1658"><span class="linenos">1658</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="LightnessMaskController-1659"><a href="#LightnessMaskController-1659"><span class="linenos">1659</span></a><span class="sd">    Controller for lightness-based masking and tone range selection.</span>
</span><span id="LightnessMaskController-1660"><a href="#LightnessMaskController-1660"><span class="linenos">1660</span></a><span class="sd">    </span>
</span><span id="LightnessMaskController-1661"><a href="#LightnessMaskController-1661"><span class="linenos">1661</span></a><span class="sd">    This class manages the lightness mask interface, allowing users to selectively</span>
</span><span id="LightnessMaskController-1662"><a href="#LightnessMaskController-1662"><span class="linenos">1662</span></a><span class="sd">    target specific tonal ranges (shadows, blacks, mediums, whites, highlights) </span>
</span><span id="LightnessMaskController-1663"><a href="#LightnessMaskController-1663"><span class="linenos">1663</span></a><span class="sd">    for localized editing operations. The masking system enables precise control</span>
</span><span id="LightnessMaskController-1664"><a href="#LightnessMaskController-1664"><span class="linenos">1664</span></a><span class="sd">    over HDR processing by limiting effects to specific luminance ranges.</span>
</span><span id="LightnessMaskController-1665"><a href="#LightnessMaskController-1665"><span class="linenos">1665</span></a><span class="sd">    </span>
</span><span id="LightnessMaskController-1666"><a href="#LightnessMaskController-1666"><span class="linenos">1666</span></a><span class="sd">    Lightness masking is essential for HDR editing as it allows photographers</span>
</span><span id="LightnessMaskController-1667"><a href="#LightnessMaskController-1667"><span class="linenos">1667</span></a><span class="sd">    to adjust different tonal ranges independently, creating more natural and</span>
</span><span id="LightnessMaskController-1668"><a href="#LightnessMaskController-1668"><span class="linenos">1668</span></a><span class="sd">    visually pleasing results.</span>
</span><span id="LightnessMaskController-1669"><a href="#LightnessMaskController-1669"><span class="linenos">1669</span></a><span class="sd">    </span>
</span><span id="LightnessMaskController-1670"><a href="#LightnessMaskController-1670"><span class="linenos">1670</span></a><span class="sd">    Attributes:</span>
</span><span id="LightnessMaskController-1671"><a href="#LightnessMaskController-1671"><span class="linenos">1671</span></a><span class="sd">        - parent: Parent controller for coordination</span>
</span><span id="LightnessMaskController-1672"><a href="#LightnessMaskController-1672"><span class="linenos">1672</span></a><span class="sd">        - model (model.LightnessMaskModel): Lightness mask data model</span>
</span><span id="LightnessMaskController-1673"><a href="#LightnessMaskController-1673"><span class="linenos">1673</span></a><span class="sd">        - view (view.LightnessMaskView): Mask selection interface</span>
</span><span id="LightnessMaskController-1674"><a href="#LightnessMaskController-1674"><span class="linenos">1674</span></a><span class="sd">        - callBackActive (bool): Enable/disable callback processing</span>
</span><span id="LightnessMaskController-1675"><a href="#LightnessMaskController-1675"><span class="linenos">1675</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="LightnessMaskController-1676"><a href="#LightnessMaskController-1676"><span class="linenos">1676</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
</span><span id="LightnessMaskController-1677"><a href="#LightnessMaskController-1677"><span class="linenos">1677</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="LightnessMaskController-1678"><a href="#LightnessMaskController-1678"><span class="linenos">1678</span></a><span class="sd">        Initialize the lightness mask controller.</span>
</span><span id="LightnessMaskController-1679"><a href="#LightnessMaskController-1679"><span class="linenos">1679</span></a><span class="sd">        </span>
</span><span id="LightnessMaskController-1680"><a href="#LightnessMaskController-1680"><span class="linenos">1680</span></a><span class="sd">        Args:</span>
</span><span id="LightnessMaskController-1681"><a href="#LightnessMaskController-1681"><span class="linenos">1681</span></a><span class="sd">            parent: Parent controller for coordination and processing pipeline access</span>
</span><span id="LightnessMaskController-1682"><a href="#LightnessMaskController-1682"><span class="linenos">1682</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LightnessMaskController-1683"><a href="#LightnessMaskController-1683"><span class="linenos">1683</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; MaskLightnessController.__init__(&quot;</span><span class="p">,</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
</span><span id="LightnessMaskController-1684"><a href="#LightnessMaskController-1684"><span class="linenos">1684</span></a>
</span><span id="LightnessMaskController-1685"><a href="#LightnessMaskController-1685"><span class="linenos">1685</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">=</span> <span class="n">parent</span>
</span><span id="LightnessMaskController-1686"><a href="#LightnessMaskController-1686"><span class="linenos">1686</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">LightnessMaskModel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="LightnessMaskController-1687"><a href="#LightnessMaskController-1687"><span class="linenos">1687</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">LightnessMaskView</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="LightnessMaskController-1688"><a href="#LightnessMaskController-1688"><span class="linenos">1688</span></a>
</span><span id="LightnessMaskController-1689"><a href="#LightnessMaskController-1689"><span class="linenos">1689</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="LightnessMaskController-1690"><a href="#LightnessMaskController-1690"><span class="linenos">1690</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="LightnessMaskController-1691"><a href="#LightnessMaskController-1691"><span class="linenos">1691</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">maskChange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">key</span><span class="p">,</span> <span class="n">on_off</span><span class="p">):</span>
</span><span id="LightnessMaskController-1692"><a href="#LightnessMaskController-1692"><span class="linenos">1692</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="LightnessMaskController-1693"><a href="#LightnessMaskController-1693"><span class="linenos">1693</span></a><span class="sd">        Handle mask enable/disable for specific tone ranges.</span>
</span><span id="LightnessMaskController-1694"><a href="#LightnessMaskController-1694"><span class="linenos">1694</span></a><span class="sd">        </span>
</span><span id="LightnessMaskController-1695"><a href="#LightnessMaskController-1695"><span class="linenos">1695</span></a><span class="sd">        Processes user interactions with mask checkboxes, updating the mask</span>
</span><span id="LightnessMaskController-1696"><a href="#LightnessMaskController-1696"><span class="linenos">1696</span></a><span class="sd">        state for the specified tonal range and triggering processing updates</span>
</span><span id="LightnessMaskController-1697"><a href="#LightnessMaskController-1697"><span class="linenos">1697</span></a><span class="sd">        to apply the mask changes.</span>
</span><span id="LightnessMaskController-1698"><a href="#LightnessMaskController-1698"><span class="linenos">1698</span></a><span class="sd">        </span>
</span><span id="LightnessMaskController-1699"><a href="#LightnessMaskController-1699"><span class="linenos">1699</span></a><span class="sd">        Args:</span>
</span><span id="LightnessMaskController-1700"><a href="#LightnessMaskController-1700"><span class="linenos">1700</span></a><span class="sd">            key (str): Tone range identifier (&#39;shadows&#39;, &#39;blacks&#39;, &#39;mediums&#39;, </span>
</span><span id="LightnessMaskController-1701"><a href="#LightnessMaskController-1701"><span class="linenos">1701</span></a><span class="sd">                      &#39;whites&#39;, &#39;highlights&#39;)</span>
</span><span id="LightnessMaskController-1702"><a href="#LightnessMaskController-1702"><span class="linenos">1702</span></a><span class="sd">            on_off (bool): Enable (True) or disable (False) the mask for this range</span>
</span><span id="LightnessMaskController-1703"><a href="#LightnessMaskController-1703"><span class="linenos">1703</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LightnessMaskController-1704"><a href="#LightnessMaskController-1704"><span class="linenos">1704</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CB] &gt;&gt; MaskLightnessController.maskChange(&quot;</span><span class="p">,</span><span class="n">key</span><span class="p">,</span><span class="s2">&quot;,&quot;</span><span class="p">,</span><span class="n">on_off</span><span class="p">,</span><span class="s2">&quot;)[callBackActive:&quot;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span><span class="p">,</span><span class="s2">&quot;] &quot;</span><span class="p">)</span>
</span><span id="LightnessMaskController-1705"><a href="#LightnessMaskController-1705"><span class="linenos">1705</span></a>
</span><span id="LightnessMaskController-1706"><a href="#LightnessMaskController-1706"><span class="linenos">1706</span></a>        <span class="n">maskState</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">maskChange</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">on_off</span><span class="p">)</span>  
</span><span id="LightnessMaskController-1707"><a href="#LightnessMaskController-1707"><span class="linenos">1707</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">changeLightnessMask</span><span class="p">(</span><span class="n">maskState</span><span class="p">)</span> 
</span><span id="LightnessMaskController-1708"><a href="#LightnessMaskController-1708"><span class="linenos">1708</span></a>    <span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="LightnessMaskController-1709"><a href="#LightnessMaskController-1709"><span class="linenos">1709</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setValues</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">,</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="LightnessMaskController-1710"><a href="#LightnessMaskController-1710"><span class="linenos">1710</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="LightnessMaskController-1711"><a href="#LightnessMaskController-1711"><span class="linenos">1711</span></a><span class="sd">        Set all mask states programmatically.</span>
</span><span id="LightnessMaskController-1712"><a href="#LightnessMaskController-1712"><span class="linenos">1712</span></a><span class="sd">        </span>
</span><span id="LightnessMaskController-1713"><a href="#LightnessMaskController-1713"><span class="linenos">1713</span></a><span class="sd">        Updates all tone range masks simultaneously and refreshes the interface</span>
</span><span id="LightnessMaskController-1714"><a href="#LightnessMaskController-1714"><span class="linenos">1714</span></a><span class="sd">        to reflect the new mask configuration. Used for loading saved mask</span>
</span><span id="LightnessMaskController-1715"><a href="#LightnessMaskController-1715"><span class="linenos">1715</span></a><span class="sd">        states or batch mask updates.</span>
</span><span id="LightnessMaskController-1716"><a href="#LightnessMaskController-1716"><span class="linenos">1716</span></a><span class="sd">        </span>
</span><span id="LightnessMaskController-1717"><a href="#LightnessMaskController-1717"><span class="linenos">1717</span></a><span class="sd">        Args:</span>
</span><span id="LightnessMaskController-1718"><a href="#LightnessMaskController-1718"><span class="linenos">1718</span></a><span class="sd">            values (dict): Dictionary containing mask states for all tone ranges</span>
</span><span id="LightnessMaskController-1719"><a href="#LightnessMaskController-1719"><span class="linenos">1719</span></a><span class="sd">                          with boolean values for each range</span>
</span><span id="LightnessMaskController-1720"><a href="#LightnessMaskController-1720"><span class="linenos">1720</span></a><span class="sd">            callBackActive (bool, optional): Whether to trigger callbacks (default: False)</span>
</span><span id="LightnessMaskController-1721"><a href="#LightnessMaskController-1721"><span class="linenos">1721</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LightnessMaskController-1722"><a href="#LightnessMaskController-1722"><span class="linenos">1722</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; LightnessMaskController.setValue(&quot;</span><span class="p">,</span><span class="n">values</span><span class="p">,</span><span class="s2">&quot;) &quot;</span><span class="p">)</span>
</span><span id="LightnessMaskController-1723"><a href="#LightnessMaskController-1723"><span class="linenos">1723</span></a>
</span><span id="LightnessMaskController-1724"><a href="#LightnessMaskController-1724"><span class="linenos">1724</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="n">callBackActive</span>
</span><span id="LightnessMaskController-1725"><a href="#LightnessMaskController-1725"><span class="linenos">1725</span></a>
</span><span id="LightnessMaskController-1726"><a href="#LightnessMaskController-1726"><span class="linenos">1726</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setValues</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
</span><span id="LightnessMaskController-1727"><a href="#LightnessMaskController-1727"><span class="linenos">1727</span></a>
</span><span id="LightnessMaskController-1728"><a href="#LightnessMaskController-1728"><span class="linenos">1728</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">checkboxShadows</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="s2">&quot;shadows&quot;</span><span class="p">])</span>
</span><span id="LightnessMaskController-1729"><a href="#LightnessMaskController-1729"><span class="linenos">1729</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">checkboxBlacks</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="s2">&quot;blacks&quot;</span><span class="p">])</span>
</span><span id="LightnessMaskController-1730"><a href="#LightnessMaskController-1730"><span class="linenos">1730</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">checkboxMediums</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="s2">&quot;mediums&quot;</span><span class="p">])</span>
</span><span id="LightnessMaskController-1731"><a href="#LightnessMaskController-1731"><span class="linenos">1731</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">checkboxWhites</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="s2">&quot;whites&quot;</span><span class="p">])</span>
</span><span id="LightnessMaskController-1732"><a href="#LightnessMaskController-1732"><span class="linenos">1732</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">checkboxHighlights</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="s2">&quot;highlights&quot;</span><span class="p">])</span>   
</span><span id="LightnessMaskController-1733"><a href="#LightnessMaskController-1733"><span class="linenos">1733</span></a>
</span><span id="LightnessMaskController-1734"><a href="#LightnessMaskController-1734"><span class="linenos">1734</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">True</span>
</span></pre></div>


            <div class="docstring"><p>Controller for lightness-based masking and tone range selection.</p>

<p>This class manages the lightness mask interface, allowing users to selectively
target specific tonal ranges (shadows, blacks, mediums, whites, highlights) 
for localized editing operations. The masking system enables precise control
over HDR processing by limiting effects to specific luminance ranges.</p>

<p>Lightness masking is essential for HDR editing as it allows photographers
to adjust different tonal ranges independently, creating more natural and
visually pleasing results.</p>

<p>Attributes:
    - parent: Parent controller for coordination
    - model (model.LightnessMaskModel): Lightness mask data model
    - view (view.LightnessMaskView): Mask selection interface
    - callBackActive (bool): Enable/disable callback processing</p>
</div>


                            <div id="LightnessMaskController.__init__" class="classattr">
                                        <input id="LightnessMaskController.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">LightnessMaskController</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">parent</span></span>)</span>

                <label class="view-source-button" for="LightnessMaskController.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LightnessMaskController.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LightnessMaskController.__init__-1676"><a href="#LightnessMaskController.__init__-1676"><span class="linenos">1676</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
</span><span id="LightnessMaskController.__init__-1677"><a href="#LightnessMaskController.__init__-1677"><span class="linenos">1677</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="LightnessMaskController.__init__-1678"><a href="#LightnessMaskController.__init__-1678"><span class="linenos">1678</span></a><span class="sd">        Initialize the lightness mask controller.</span>
</span><span id="LightnessMaskController.__init__-1679"><a href="#LightnessMaskController.__init__-1679"><span class="linenos">1679</span></a><span class="sd">        </span>
</span><span id="LightnessMaskController.__init__-1680"><a href="#LightnessMaskController.__init__-1680"><span class="linenos">1680</span></a><span class="sd">        Args:</span>
</span><span id="LightnessMaskController.__init__-1681"><a href="#LightnessMaskController.__init__-1681"><span class="linenos">1681</span></a><span class="sd">            parent: Parent controller for coordination and processing pipeline access</span>
</span><span id="LightnessMaskController.__init__-1682"><a href="#LightnessMaskController.__init__-1682"><span class="linenos">1682</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LightnessMaskController.__init__-1683"><a href="#LightnessMaskController.__init__-1683"><span class="linenos">1683</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; MaskLightnessController.__init__(&quot;</span><span class="p">,</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
</span><span id="LightnessMaskController.__init__-1684"><a href="#LightnessMaskController.__init__-1684"><span class="linenos">1684</span></a>
</span><span id="LightnessMaskController.__init__-1685"><a href="#LightnessMaskController.__init__-1685"><span class="linenos">1685</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">=</span> <span class="n">parent</span>
</span><span id="LightnessMaskController.__init__-1686"><a href="#LightnessMaskController.__init__-1686"><span class="linenos">1686</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">LightnessMaskModel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="LightnessMaskController.__init__-1687"><a href="#LightnessMaskController.__init__-1687"><span class="linenos">1687</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">LightnessMaskView</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="LightnessMaskController.__init__-1688"><a href="#LightnessMaskController.__init__-1688"><span class="linenos">1688</span></a>
</span><span id="LightnessMaskController.__init__-1689"><a href="#LightnessMaskController.__init__-1689"><span class="linenos">1689</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">True</span>
</span></pre></div>


            <div class="docstring"><p>Initialize the lightness mask controller.</p>

<p>Args:
    parent: Parent controller for coordination and processing pipeline access</p>
</div>


                            </div>
                            <div id="LightnessMaskController.parent" class="classattr">
                                <div class="attr variable">
            <span class="name">parent</span>

        
    </div>
    <a class="headerlink" href="#LightnessMaskController.parent"></a>
    
    

                            </div>
                            <div id="LightnessMaskController.model" class="classattr">
                                <div class="attr variable">
            <span class="name">model</span>

        
    </div>
    <a class="headerlink" href="#LightnessMaskController.model"></a>
    
    

                            </div>
                            <div id="LightnessMaskController.view" class="classattr">
                                <div class="attr variable">
            <span class="name">view</span>

        
    </div>
    <a class="headerlink" href="#LightnessMaskController.view"></a>
    
    

                            </div>
                            <div id="LightnessMaskController.callBackActive" class="classattr">
                                <div class="attr variable">
            <span class="name">callBackActive</span>

        
    </div>
    <a class="headerlink" href="#LightnessMaskController.callBackActive"></a>
    
    

                            </div>
                            <div id="LightnessMaskController.maskChange" class="classattr">
                                        <input id="LightnessMaskController.maskChange-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">maskChange</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">key</span>, </span><span class="param"><span class="n">on_off</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="LightnessMaskController.maskChange-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LightnessMaskController.maskChange"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LightnessMaskController.maskChange-1691"><a href="#LightnessMaskController.maskChange-1691"><span class="linenos">1691</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">maskChange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">key</span><span class="p">,</span> <span class="n">on_off</span><span class="p">):</span>
</span><span id="LightnessMaskController.maskChange-1692"><a href="#LightnessMaskController.maskChange-1692"><span class="linenos">1692</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="LightnessMaskController.maskChange-1693"><a href="#LightnessMaskController.maskChange-1693"><span class="linenos">1693</span></a><span class="sd">        Handle mask enable/disable for specific tone ranges.</span>
</span><span id="LightnessMaskController.maskChange-1694"><a href="#LightnessMaskController.maskChange-1694"><span class="linenos">1694</span></a><span class="sd">        </span>
</span><span id="LightnessMaskController.maskChange-1695"><a href="#LightnessMaskController.maskChange-1695"><span class="linenos">1695</span></a><span class="sd">        Processes user interactions with mask checkboxes, updating the mask</span>
</span><span id="LightnessMaskController.maskChange-1696"><a href="#LightnessMaskController.maskChange-1696"><span class="linenos">1696</span></a><span class="sd">        state for the specified tonal range and triggering processing updates</span>
</span><span id="LightnessMaskController.maskChange-1697"><a href="#LightnessMaskController.maskChange-1697"><span class="linenos">1697</span></a><span class="sd">        to apply the mask changes.</span>
</span><span id="LightnessMaskController.maskChange-1698"><a href="#LightnessMaskController.maskChange-1698"><span class="linenos">1698</span></a><span class="sd">        </span>
</span><span id="LightnessMaskController.maskChange-1699"><a href="#LightnessMaskController.maskChange-1699"><span class="linenos">1699</span></a><span class="sd">        Args:</span>
</span><span id="LightnessMaskController.maskChange-1700"><a href="#LightnessMaskController.maskChange-1700"><span class="linenos">1700</span></a><span class="sd">            key (str): Tone range identifier (&#39;shadows&#39;, &#39;blacks&#39;, &#39;mediums&#39;, </span>
</span><span id="LightnessMaskController.maskChange-1701"><a href="#LightnessMaskController.maskChange-1701"><span class="linenos">1701</span></a><span class="sd">                      &#39;whites&#39;, &#39;highlights&#39;)</span>
</span><span id="LightnessMaskController.maskChange-1702"><a href="#LightnessMaskController.maskChange-1702"><span class="linenos">1702</span></a><span class="sd">            on_off (bool): Enable (True) or disable (False) the mask for this range</span>
</span><span id="LightnessMaskController.maskChange-1703"><a href="#LightnessMaskController.maskChange-1703"><span class="linenos">1703</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LightnessMaskController.maskChange-1704"><a href="#LightnessMaskController.maskChange-1704"><span class="linenos">1704</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CB] &gt;&gt; MaskLightnessController.maskChange(&quot;</span><span class="p">,</span><span class="n">key</span><span class="p">,</span><span class="s2">&quot;,&quot;</span><span class="p">,</span><span class="n">on_off</span><span class="p">,</span><span class="s2">&quot;)[callBackActive:&quot;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span><span class="p">,</span><span class="s2">&quot;] &quot;</span><span class="p">)</span>
</span><span id="LightnessMaskController.maskChange-1705"><a href="#LightnessMaskController.maskChange-1705"><span class="linenos">1705</span></a>
</span><span id="LightnessMaskController.maskChange-1706"><a href="#LightnessMaskController.maskChange-1706"><span class="linenos">1706</span></a>        <span class="n">maskState</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">maskChange</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">on_off</span><span class="p">)</span>  
</span><span id="LightnessMaskController.maskChange-1707"><a href="#LightnessMaskController.maskChange-1707"><span class="linenos">1707</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">changeLightnessMask</span><span class="p">(</span><span class="n">maskState</span><span class="p">)</span> 
</span></pre></div>


            <div class="docstring"><p>Handle mask enable/disable for specific tone ranges.</p>

<p>Processes user interactions with mask checkboxes, updating the mask
state for the specified tonal range and triggering processing updates
to apply the mask changes.</p>

<p>Args:
    key (str): Tone range identifier ('shadows', 'blacks', 'mediums', 
              'whites', 'highlights')
    on_off (bool): Enable (True) or disable (False) the mask for this range</p>
</div>


                            </div>
                            <div id="LightnessMaskController.setValues" class="classattr">
                                        <input id="LightnessMaskController.setValues-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">setValues</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">values</span>, </span><span class="param"><span class="n">callBackActive</span><span class="o">=</span><span class="kc">False</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="LightnessMaskController.setValues-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LightnessMaskController.setValues"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LightnessMaskController.setValues-1709"><a href="#LightnessMaskController.setValues-1709"><span class="linenos">1709</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setValues</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">,</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="LightnessMaskController.setValues-1710"><a href="#LightnessMaskController.setValues-1710"><span class="linenos">1710</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="LightnessMaskController.setValues-1711"><a href="#LightnessMaskController.setValues-1711"><span class="linenos">1711</span></a><span class="sd">        Set all mask states programmatically.</span>
</span><span id="LightnessMaskController.setValues-1712"><a href="#LightnessMaskController.setValues-1712"><span class="linenos">1712</span></a><span class="sd">        </span>
</span><span id="LightnessMaskController.setValues-1713"><a href="#LightnessMaskController.setValues-1713"><span class="linenos">1713</span></a><span class="sd">        Updates all tone range masks simultaneously and refreshes the interface</span>
</span><span id="LightnessMaskController.setValues-1714"><a href="#LightnessMaskController.setValues-1714"><span class="linenos">1714</span></a><span class="sd">        to reflect the new mask configuration. Used for loading saved mask</span>
</span><span id="LightnessMaskController.setValues-1715"><a href="#LightnessMaskController.setValues-1715"><span class="linenos">1715</span></a><span class="sd">        states or batch mask updates.</span>
</span><span id="LightnessMaskController.setValues-1716"><a href="#LightnessMaskController.setValues-1716"><span class="linenos">1716</span></a><span class="sd">        </span>
</span><span id="LightnessMaskController.setValues-1717"><a href="#LightnessMaskController.setValues-1717"><span class="linenos">1717</span></a><span class="sd">        Args:</span>
</span><span id="LightnessMaskController.setValues-1718"><a href="#LightnessMaskController.setValues-1718"><span class="linenos">1718</span></a><span class="sd">            values (dict): Dictionary containing mask states for all tone ranges</span>
</span><span id="LightnessMaskController.setValues-1719"><a href="#LightnessMaskController.setValues-1719"><span class="linenos">1719</span></a><span class="sd">                          with boolean values for each range</span>
</span><span id="LightnessMaskController.setValues-1720"><a href="#LightnessMaskController.setValues-1720"><span class="linenos">1720</span></a><span class="sd">            callBackActive (bool, optional): Whether to trigger callbacks (default: False)</span>
</span><span id="LightnessMaskController.setValues-1721"><a href="#LightnessMaskController.setValues-1721"><span class="linenos">1721</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LightnessMaskController.setValues-1722"><a href="#LightnessMaskController.setValues-1722"><span class="linenos">1722</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; LightnessMaskController.setValue(&quot;</span><span class="p">,</span><span class="n">values</span><span class="p">,</span><span class="s2">&quot;) &quot;</span><span class="p">)</span>
</span><span id="LightnessMaskController.setValues-1723"><a href="#LightnessMaskController.setValues-1723"><span class="linenos">1723</span></a>
</span><span id="LightnessMaskController.setValues-1724"><a href="#LightnessMaskController.setValues-1724"><span class="linenos">1724</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="n">callBackActive</span>
</span><span id="LightnessMaskController.setValues-1725"><a href="#LightnessMaskController.setValues-1725"><span class="linenos">1725</span></a>
</span><span id="LightnessMaskController.setValues-1726"><a href="#LightnessMaskController.setValues-1726"><span class="linenos">1726</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setValues</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
</span><span id="LightnessMaskController.setValues-1727"><a href="#LightnessMaskController.setValues-1727"><span class="linenos">1727</span></a>
</span><span id="LightnessMaskController.setValues-1728"><a href="#LightnessMaskController.setValues-1728"><span class="linenos">1728</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">checkboxShadows</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="s2">&quot;shadows&quot;</span><span class="p">])</span>
</span><span id="LightnessMaskController.setValues-1729"><a href="#LightnessMaskController.setValues-1729"><span class="linenos">1729</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">checkboxBlacks</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="s2">&quot;blacks&quot;</span><span class="p">])</span>
</span><span id="LightnessMaskController.setValues-1730"><a href="#LightnessMaskController.setValues-1730"><span class="linenos">1730</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">checkboxMediums</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="s2">&quot;mediums&quot;</span><span class="p">])</span>
</span><span id="LightnessMaskController.setValues-1731"><a href="#LightnessMaskController.setValues-1731"><span class="linenos">1731</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">checkboxWhites</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="s2">&quot;whites&quot;</span><span class="p">])</span>
</span><span id="LightnessMaskController.setValues-1732"><a href="#LightnessMaskController.setValues-1732"><span class="linenos">1732</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">checkboxHighlights</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="s2">&quot;highlights&quot;</span><span class="p">])</span>   
</span><span id="LightnessMaskController.setValues-1733"><a href="#LightnessMaskController.setValues-1733"><span class="linenos">1733</span></a>
</span><span id="LightnessMaskController.setValues-1734"><a href="#LightnessMaskController.setValues-1734"><span class="linenos">1734</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">True</span>
</span></pre></div>


            <div class="docstring"><p>Set all mask states programmatically.</p>

<p>Updates all tone range masks simultaneously and refreshes the interface
to reflect the new mask configuration. Used for loading saved mask
states or batch mask updates.</p>

<p>Args:
    values (dict): Dictionary containing mask states for all tone ranges
                  with boolean values for each range
    callBackActive (bool, optional): Whether to trigger callbacks (default: False)</p>
</div>


                            </div>
                </section>
                <section id="HDRviewerController">
                            <input id="HDRviewerController-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">HDRviewerController</span>:

                <label class="view-source-button" for="HDRviewerController-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#HDRviewerController"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="HDRviewerController-1738"><a href="#HDRviewerController-1738"><span class="linenos">1738</span></a><span class="k">class</span><span class="w"> </span><span class="nc">HDRviewerController</span><span class="p">():</span>
</span><span id="HDRviewerController-1739"><a href="#HDRviewerController-1739"><span class="linenos">1739</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="HDRviewerController-1740"><a href="#HDRviewerController-1740"><span class="linenos">1740</span></a><span class="sd">    Controller for external HDR display and viewer management.</span>
</span><span id="HDRviewerController-1741"><a href="#HDRviewerController-1741"><span class="linenos">1741</span></a><span class="sd">    </span>
</span><span id="HDRviewerController-1742"><a href="#HDRviewerController-1742"><span class="linenos">1742</span></a><span class="sd">    This class manages the external HDR display functionality, coordinating with</span>
</span><span id="HDRviewerController-1743"><a href="#HDRviewerController-1743"><span class="linenos">1743</span></a><span class="sd">    HDR-capable monitors to show processed images at their full dynamic range.</span>
</span><span id="HDRviewerController-1744"><a href="#HDRviewerController-1744"><span class="linenos">1744</span></a><span class="sd">    It handles display process management, image comparison modes, auto-preview</span>
</span><span id="HDRviewerController-1745"><a href="#HDRviewerController-1745"><span class="linenos">1745</span></a><span class="sd">    functionality, and HDR display scaling.</span>
</span><span id="HDRviewerController-1746"><a href="#HDRviewerController-1746"><span class="linenos">1746</span></a><span class="sd">    </span>
</span><span id="HDRviewerController-1747"><a href="#HDRviewerController-1747"><span class="linenos">1747</span></a><span class="sd">    The HDR viewer enables real-time preview of processing results on calibrated</span>
</span><span id="HDRviewerController-1748"><a href="#HDRviewerController-1748"><span class="linenos">1748</span></a><span class="sd">    HDR displays, providing immediate visual feedback for professional HDR</span>
</span><span id="HDRviewerController-1749"><a href="#HDRviewerController-1749"><span class="linenos">1749</span></a><span class="sd">    image editing workflows.</span>
</span><span id="HDRviewerController-1750"><a href="#HDRviewerController-1750"><span class="linenos">1750</span></a><span class="sd">    </span>
</span><span id="HDRviewerController-1751"><a href="#HDRviewerController-1751"><span class="linenos">1751</span></a><span class="sd">    Attributes:</span>
</span><span id="HDRviewerController-1752"><a href="#HDRviewerController-1752"><span class="linenos">1752</span></a><span class="sd">        - parent: Parent controller for coordination</span>
</span><span id="HDRviewerController-1753"><a href="#HDRviewerController-1753"><span class="linenos">1753</span></a><span class="sd">        - model (model.HDRviewerModel): HDR display data model</span>
</span><span id="HDRviewerController-1754"><a href="#HDRviewerController-1754"><span class="linenos">1754</span></a><span class="sd">        - view: View component (set externally)</span>
</span><span id="HDRviewerController-1755"><a href="#HDRviewerController-1755"><span class="linenos">1755</span></a><span class="sd">        - viewerProcess: External HDR viewer process handle</span>
</span><span id="HDRviewerController-1756"><a href="#HDRviewerController-1756"><span class="linenos">1756</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="HDRviewerController-1757"><a href="#HDRviewerController-1757"><span class="linenos">1757</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
</span><span id="HDRviewerController-1758"><a href="#HDRviewerController-1758"><span class="linenos">1758</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="HDRviewerController-1759"><a href="#HDRviewerController-1759"><span class="linenos">1759</span></a><span class="sd">        Initialize the HDR viewer controller.</span>
</span><span id="HDRviewerController-1760"><a href="#HDRviewerController-1760"><span class="linenos">1760</span></a><span class="sd">        </span>
</span><span id="HDRviewerController-1761"><a href="#HDRviewerController-1761"><span class="linenos">1761</span></a><span class="sd">        Args:</span>
</span><span id="HDRviewerController-1762"><a href="#HDRviewerController-1762"><span class="linenos">1762</span></a><span class="sd">            parent: Parent controller for coordination and image access</span>
</span><span id="HDRviewerController-1763"><a href="#HDRviewerController-1763"><span class="linenos">1763</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="HDRviewerController-1764"><a href="#HDRviewerController-1764"><span class="linenos">1764</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; HDRviewerController.__init__(&quot;</span><span class="p">,</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
</span><span id="HDRviewerController-1765"><a href="#HDRviewerController-1765"><span class="linenos">1765</span></a>
</span><span id="HDRviewerController-1766"><a href="#HDRviewerController-1766"><span class="linenos">1766</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">=</span> <span class="n">parent</span>
</span><span id="HDRviewerController-1767"><a href="#HDRviewerController-1767"><span class="linenos">1767</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">HDRviewerModel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="HDRviewerController-1768"><a href="#HDRviewerController-1768"><span class="linenos">1768</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span> <span class="kc">None</span> 
</span><span id="HDRviewerController-1769"><a href="#HDRviewerController-1769"><span class="linenos">1769</span></a>
</span><span id="HDRviewerController-1770"><a href="#HDRviewerController-1770"><span class="linenos">1770</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">viewerProcess</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="HDRviewerController-1771"><a href="#HDRviewerController-1771"><span class="linenos">1771</span></a>
</span><span id="HDRviewerController-1772"><a href="#HDRviewerController-1772"><span class="linenos">1772</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">displaySplash</span><span class="p">()</span>
</span><span id="HDRviewerController-1773"><a href="#HDRviewerController-1773"><span class="linenos">1773</span></a>
</span><span id="HDRviewerController-1774"><a href="#HDRviewerController-1774"><span class="linenos">1774</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setView</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">view</span><span class="p">):</span> 
</span><span id="HDRviewerController-1775"><a href="#HDRviewerController-1775"><span class="linenos">1775</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="HDRviewerController-1776"><a href="#HDRviewerController-1776"><span class="linenos">1776</span></a><span class="sd">        Set the view component for the HDR viewer.</span>
</span><span id="HDRviewerController-1777"><a href="#HDRviewerController-1777"><span class="linenos">1777</span></a><span class="sd">        </span>
</span><span id="HDRviewerController-1778"><a href="#HDRviewerController-1778"><span class="linenos">1778</span></a><span class="sd">        Args:</span>
</span><span id="HDRviewerController-1779"><a href="#HDRviewerController-1779"><span class="linenos">1779</span></a><span class="sd">            view: View component to associate with this controller</span>
</span><span id="HDRviewerController-1780"><a href="#HDRviewerController-1780"><span class="linenos">1780</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="HDRviewerController-1781"><a href="#HDRviewerController-1781"><span class="linenos">1781</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span> <span class="n">view</span>
</span><span id="HDRviewerController-1782"><a href="#HDRviewerController-1782"><span class="linenos">1782</span></a>
</span><span id="HDRviewerController-1783"><a href="#HDRviewerController-1783"><span class="linenos">1783</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackUpdate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="HDRviewerController-1784"><a href="#HDRviewerController-1784"><span class="linenos">1784</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="HDRviewerController-1785"><a href="#HDRviewerController-1785"><span class="linenos">1785</span></a><span class="sd">        Update HDR display with the current processed image.</span>
</span><span id="HDRviewerController-1786"><a href="#HDRviewerController-1786"><span class="linenos">1786</span></a><span class="sd">        </span>
</span><span id="HDRviewerController-1787"><a href="#HDRviewerController-1787"><span class="linenos">1787</span></a><span class="sd">        Retrieves the currently selected processing pipeline, processes the</span>
</span><span id="HDRviewerController-1788"><a href="#HDRviewerController-1788"><span class="linenos">1788</span></a><span class="sd">        image without tone mapping (preserving HDR values), and displays</span>
</span><span id="HDRviewerController-1789"><a href="#HDRviewerController-1789"><span class="linenos">1789</span></a><span class="sd">        the result on the HDR monitor. Updates the current image reference</span>
</span><span id="HDRviewerController-1790"><a href="#HDRviewerController-1790"><span class="linenos">1790</span></a><span class="sd">        for comparison operations.</span>
</span><span id="HDRviewerController-1791"><a href="#HDRviewerController-1791"><span class="linenos">1791</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="HDRviewerController-1792"><a href="#HDRviewerController-1792"><span class="linenos">1792</span></a>        <span class="n">selectedProcessPipe</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">imageGalleryController</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getSelectedProcessPipe</span><span class="p">()</span>
</span><span id="HDRviewerController-1793"><a href="#HDRviewerController-1793"><span class="linenos">1793</span></a>        <span class="n">img</span> <span class="o">=</span> <span class="n">selectedProcessPipe</span><span class="o">.</span><span class="n">getImage</span><span class="p">(</span><span class="n">toneMap</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="HDRviewerController-1794"><a href="#HDRviewerController-1794"><span class="linenos">1794</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">displayIMG</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
</span><span id="HDRviewerController-1795"><a href="#HDRviewerController-1795"><span class="linenos">1795</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">currentIMG</span> <span class="o">=</span> <span class="n">img</span>
</span><span id="HDRviewerController-1796"><a href="#HDRviewerController-1796"><span class="linenos">1796</span></a>
</span><span id="HDRviewerController-1797"><a href="#HDRviewerController-1797"><span class="linenos">1797</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackAuto</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">on_off</span><span class="p">):</span>
</span><span id="HDRviewerController-1798"><a href="#HDRviewerController-1798"><span class="linenos">1798</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="HDRviewerController-1799"><a href="#HDRviewerController-1799"><span class="linenos">1799</span></a><span class="sd">        Toggle automatic HDR preview updates.</span>
</span><span id="HDRviewerController-1800"><a href="#HDRviewerController-1800"><span class="linenos">1800</span></a><span class="sd">        </span>
</span><span id="HDRviewerController-1801"><a href="#HDRviewerController-1801"><span class="linenos">1801</span></a><span class="sd">        Enables or disables automatic HDR display updates when processing</span>
</span><span id="HDRviewerController-1802"><a href="#HDRviewerController-1802"><span class="linenos">1802</span></a><span class="sd">        parameters change, allowing for real-time preview on HDR monitors.</span>
</span><span id="HDRviewerController-1803"><a href="#HDRviewerController-1803"><span class="linenos">1803</span></a><span class="sd">        </span>
</span><span id="HDRviewerController-1804"><a href="#HDRviewerController-1804"><span class="linenos">1804</span></a><span class="sd">        Args:</span>
</span><span id="HDRviewerController-1805"><a href="#HDRviewerController-1805"><span class="linenos">1805</span></a><span class="sd">            on_off (bool): Enable (True) or disable (False) auto-preview</span>
</span><span id="HDRviewerController-1806"><a href="#HDRviewerController-1806"><span class="linenos">1806</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="HDRviewerController-1807"><a href="#HDRviewerController-1807"><span class="linenos">1807</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">dock</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">childControllers</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">autoPreviewHDR</span> <span class="o">=</span> <span class="n">on_off</span>
</span><span id="HDRviewerController-1808"><a href="#HDRviewerController-1808"><span class="linenos">1808</span></a>
</span><span id="HDRviewerController-1809"><a href="#HDRviewerController-1809"><span class="linenos">1809</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackCompare</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="HDRviewerController-1810"><a href="#HDRviewerController-1810"><span class="linenos">1810</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="HDRviewerController-1811"><a href="#HDRviewerController-1811"><span class="linenos">1811</span></a><span class="sd">        Display before/after comparison on HDR monitor.</span>
</span><span id="HDRviewerController-1812"><a href="#HDRviewerController-1812"><span class="linenos">1812</span></a><span class="sd">        </span>
</span><span id="HDRviewerController-1813"><a href="#HDRviewerController-1813"><span class="linenos">1813</span></a><span class="sd">        Creates a side-by-side comparison showing the previous processing</span>
</span><span id="HDRviewerController-1814"><a href="#HDRviewerController-1814"><span class="linenos">1814</span></a><span class="sd">        result alongside the current result, enabling visual comparison</span>
</span><span id="HDRviewerController-1815"><a href="#HDRviewerController-1815"><span class="linenos">1815</span></a><span class="sd">        of processing changes. If no previous result exists, updates</span>
</span><span id="HDRviewerController-1816"><a href="#HDRviewerController-1816"><span class="linenos">1816</span></a><span class="sd">        with current processing.</span>
</span><span id="HDRviewerController-1817"><a href="#HDRviewerController-1817"><span class="linenos">1817</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="HDRviewerController-1818"><a href="#HDRviewerController-1818"><span class="linenos">1818</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">currentIMG</span><span class="p">:</span>
</span><span id="HDRviewerController-1819"><a href="#HDRviewerController-1819"><span class="linenos">1819</span></a>            <span class="n">old</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">currentIMG</span>
</span><span id="HDRviewerController-1820"><a href="#HDRviewerController-1820"><span class="linenos">1820</span></a>            <span class="n">old</span> <span class="o">=</span> <span class="n">old</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">hdrCore</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">clip</span><span class="p">())</span>
</span><span id="HDRviewerController-1821"><a href="#HDRviewerController-1821"><span class="linenos">1821</span></a>
</span><span id="HDRviewerController-1822"><a href="#HDRviewerController-1822"><span class="linenos">1822</span></a>            <span class="n">sp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">imageGalleryController</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getSelectedProcessPipe</span><span class="p">()</span>
</span><span id="HDRviewerController-1823"><a href="#HDRviewerController-1823"><span class="linenos">1823</span></a>            <span class="n">img</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">getImage</span><span class="p">(</span><span class="n">toneMap</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="HDRviewerController-1824"><a href="#HDRviewerController-1824"><span class="linenos">1824</span></a>            <span class="n">img</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">hdrCore</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">clip</span><span class="p">())</span>
</span><span id="HDRviewerController-1825"><a href="#HDRviewerController-1825"><span class="linenos">1825</span></a>
</span><span id="HDRviewerController-1826"><a href="#HDRviewerController-1826"><span class="linenos">1826</span></a>
</span><span id="HDRviewerController-1827"><a href="#HDRviewerController-1827"><span class="linenos">1827</span></a>            <span class="n">h1</span><span class="p">,</span> <span class="n">w1</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">old</span><span class="o">.</span><span class="n">colorData</span><span class="o">.</span><span class="n">shape</span>
</span><span id="HDRviewerController-1828"><a href="#HDRviewerController-1828"><span class="linenos">1828</span></a>            <span class="n">h2</span><span class="p">,</span> <span class="n">w2</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">colorData</span><span class="o">.</span><span class="n">shape</span>
</span><span id="HDRviewerController-1829"><a href="#HDRviewerController-1829"><span class="linenos">1829</span></a>            <span class="n">hD</span><span class="p">,</span> <span class="n">wD</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">displayModel</span><span class="p">[</span><span class="s1">&#39;shape&#39;</span><span class="p">]</span>
</span><span id="HDRviewerController-1830"><a href="#HDRviewerController-1830"><span class="linenos">1830</span></a>            <span class="n">hM</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">hD</span> <span class="o">-</span> <span class="nb">max</span><span class="p">(</span><span class="n">h1</span><span class="p">,</span><span class="n">h2</span><span class="p">))</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
</span><span id="HDRviewerController-1831"><a href="#HDRviewerController-1831"><span class="linenos">1831</span></a>            <span class="n">wM</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">wD</span> <span class="o">-</span> <span class="p">(</span><span class="n">w1</span><span class="o">+</span><span class="n">w2</span><span class="p">))</span><span class="o">/</span><span class="mi">3</span><span class="p">)</span>
</span><span id="HDRviewerController-1832"><a href="#HDRviewerController-1832"><span class="linenos">1832</span></a>            <span class="n">back</span> <span class="o">=</span>  <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="n">hD</span><span class="p">,</span><span class="n">wD</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span><span class="o">*</span><span class="mf">0.2</span>
</span><span id="HDRviewerController-1833"><a href="#HDRviewerController-1833"><span class="linenos">1833</span></a>
</span><span id="HDRviewerController-1834"><a href="#HDRviewerController-1834"><span class="linenos">1834</span></a>            <span class="n">back</span><span class="p">[</span><span class="n">hM</span><span class="p">:</span><span class="n">hM</span><span class="o">+</span><span class="n">h1</span><span class="p">,</span><span class="n">wM</span><span class="p">:</span><span class="n">wM</span><span class="o">+</span><span class="n">w1</span><span class="p">,:]</span> <span class="o">=</span> <span class="n">old</span><span class="o">.</span><span class="n">colorData</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">displayModel</span><span class="p">[</span><span class="s1">&#39;scaling&#39;</span><span class="p">]</span>
</span><span id="HDRviewerController-1835"><a href="#HDRviewerController-1835"><span class="linenos">1835</span></a>            <span class="n">back</span><span class="p">[</span><span class="n">hM</span><span class="p">:</span><span class="n">hM</span><span class="o">+</span><span class="n">h2</span><span class="p">,</span><span class="mi">2</span><span class="o">*</span><span class="n">wM</span><span class="o">+</span><span class="n">w1</span><span class="p">:</span><span class="mi">2</span><span class="o">*</span><span class="n">wM</span><span class="o">+</span><span class="n">w1</span><span class="o">+</span><span class="n">w2</span><span class="p">,:]</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">colorData</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">displayModel</span><span class="p">[</span><span class="s1">&#39;scaling&#39;</span><span class="p">]</span>
</span><span id="HDRviewerController-1836"><a href="#HDRviewerController-1836"><span class="linenos">1836</span></a>
</span><span id="HDRviewerController-1837"><a href="#HDRviewerController-1837"><span class="linenos">1837</span></a>            <span class="c1"># save as temp.hdr</span>
</span><span id="HDRviewerController-1838"><a href="#HDRviewerController-1838"><span class="linenos">1838</span></a>            <span class="n">colour</span><span class="o">.</span><span class="n">write_image</span><span class="p">(</span><span class="n">back</span><span class="p">,</span><span class="s1">&#39;temp.hdr&#39;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;Imageio&#39;</span><span class="p">)</span>
</span><span id="HDRviewerController-1839"><a href="#HDRviewerController-1839"><span class="linenos">1839</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">displayFile</span><span class="p">(</span><span class="s1">&#39;temp.hdr&#39;</span><span class="p">)</span>
</span><span id="HDRviewerController-1840"><a href="#HDRviewerController-1840"><span class="linenos">1840</span></a>
</span><span id="HDRviewerController-1841"><a href="#HDRviewerController-1841"><span class="linenos">1841</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">currentIMG</span> <span class="o">=</span> <span class="n">img</span>
</span><span id="HDRviewerController-1842"><a href="#HDRviewerController-1842"><span class="linenos">1842</span></a>        <span class="k">else</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">callBackUpdate</span><span class="p">()</span>
</span><span id="HDRviewerController-1843"><a href="#HDRviewerController-1843"><span class="linenos">1843</span></a>
</span><span id="HDRviewerController-1844"><a href="#HDRviewerController-1844"><span class="linenos">1844</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">displayFile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">HDRfilename</span><span class="p">):</span>
</span><span id="HDRviewerController-1845"><a href="#HDRviewerController-1845"><span class="linenos">1845</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="HDRviewerController-1846"><a href="#HDRviewerController-1846"><span class="linenos">1846</span></a><span class="sd">        Display HDR file on external HDR monitor.</span>
</span><span id="HDRviewerController-1847"><a href="#HDRviewerController-1847"><span class="linenos">1847</span></a><span class="sd">        </span>
</span><span id="HDRviewerController-1848"><a href="#HDRviewerController-1848"><span class="linenos">1848</span></a><span class="sd">        Launches or updates the external HDR viewer process to display the</span>
</span><span id="HDRviewerController-1849"><a href="#HDRviewerController-1849"><span class="linenos">1849</span></a><span class="sd">        specified HDR file. Handles process management and error recovery</span>
</span><span id="HDRviewerController-1850"><a href="#HDRviewerController-1850"><span class="linenos">1850</span></a><span class="sd">        for reliable HDR display functionality.</span>
</span><span id="HDRviewerController-1851"><a href="#HDRviewerController-1851"><span class="linenos">1851</span></a><span class="sd">        </span>
</span><span id="HDRviewerController-1852"><a href="#HDRviewerController-1852"><span class="linenos">1852</span></a><span class="sd">        Args:</span>
</span><span id="HDRviewerController-1853"><a href="#HDRviewerController-1853"><span class="linenos">1853</span></a><span class="sd">            HDRfilename (str): Path to HDR file to display</span>
</span><span id="HDRviewerController-1854"><a href="#HDRviewerController-1854"><span class="linenos">1854</span></a><span class="sd">            </span>
</span><span id="HDRviewerController-1855"><a href="#HDRviewerController-1855"><span class="linenos">1855</span></a><span class="sd">        Note:</span>
</span><span id="HDRviewerController-1856"><a href="#HDRviewerController-1856"><span class="linenos">1856</span></a><span class="sd">            Uses HDRImageViewer.exe for Windows-based HDR display.</span>
</span><span id="HDRviewerController-1857"><a href="#HDRviewerController-1857"><span class="linenos">1857</span></a><span class="sd">            Includes automatic process restart if initial launch fails.</span>
</span><span id="HDRviewerController-1858"><a href="#HDRviewerController-1858"><span class="linenos">1858</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="HDRviewerController-1859"><a href="#HDRviewerController-1859"><span class="linenos">1859</span></a>
</span><span id="HDRviewerController-1860"><a href="#HDRviewerController-1860"><span class="linenos">1860</span></a>         <span class="c1"># check that no current display process already open</span>
</span><span id="HDRviewerController-1861"><a href="#HDRviewerController-1861"><span class="linenos">1861</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">viewerProcess</span><span class="p">:</span>
</span><span id="HDRviewerController-1862"><a href="#HDRviewerController-1862"><span class="linenos">1862</span></a>            <span class="c1"># the display HDR process is already running</span>
</span><span id="HDRviewerController-1863"><a href="#HDRviewerController-1863"><span class="linenos">1863</span></a>            <span class="c1"># close current</span>
</span><span id="HDRviewerController-1864"><a href="#HDRviewerController-1864"><span class="linenos">1864</span></a>            <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">([</span><span class="s1">&#39;taskkill&#39;</span><span class="p">,</span> <span class="s1">&#39;/F&#39;</span><span class="p">,</span> <span class="s1">&#39;/T&#39;</span><span class="p">,</span> <span class="s1">&#39;/IM&#39;</span><span class="p">,</span> <span class="s2">&quot;HDRImageViewer*&quot;</span><span class="p">],</span><span class="n">capture_output</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="HDRviewerController-1865"><a href="#HDRviewerController-1865"><span class="linenos">1865</span></a>            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.05</span><span class="p">)</span>
</span><span id="HDRviewerController-1866"><a href="#HDRviewerController-1866"><span class="linenos">1866</span></a>        <span class="c1"># run display HDR process</span>
</span><span id="HDRviewerController-1867"><a href="#HDRviewerController-1867"><span class="linenos">1867</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">viewerProcess</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">([</span><span class="s2">&quot;HDRImageViewer.exe&quot;</span><span class="p">,</span><span class="s2">&quot;-f&quot;</span><span class="p">,</span> <span class="s2">&quot;-input:&quot;</span><span class="o">+</span><span class="n">HDRfilename</span><span class="p">,</span> <span class="s2">&quot;-f&quot;</span><span class="p">,</span> <span class="s2">&quot;-h&quot;</span><span class="p">],</span> <span class="n">shell</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="HDRviewerController-1868"><a href="#HDRviewerController-1868"><span class="linenos">1868</span></a>        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.10</span><span class="p">)</span>
</span><span id="HDRviewerController-1869"><a href="#HDRviewerController-1869"><span class="linenos">1869</span></a>        <span class="n">psData</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">([</span><span class="s1">&#39;tasklist&#39;</span><span class="p">],</span> <span class="n">capture_output</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">universal_newlines</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">stdout</span>
</span><span id="HDRviewerController-1870"><a href="#HDRviewerController-1870"><span class="linenos">1870</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="s1">&#39;HDRImageViewer&#39;</span> <span class="ow">in</span> <span class="n">psData</span><span class="p">:</span> 
</span><span id="HDRviewerController-1871"><a href="#HDRviewerController-1871"><span class="linenos">1871</span></a>            <span class="c1"># re-run display HDR process</span>
</span><span id="HDRviewerController-1872"><a href="#HDRviewerController-1872"><span class="linenos">1872</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">viewerProcess</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">([</span><span class="s2">&quot;HDRImageViewer.exe&quot;</span><span class="p">,</span><span class="s2">&quot;-f&quot;</span><span class="p">,</span> <span class="s2">&quot;-input:&quot;</span><span class="o">+</span><span class="n">HDRfilename</span><span class="p">,</span> <span class="s2">&quot;-f&quot;</span><span class="p">,</span> <span class="s2">&quot;-h&quot;</span><span class="p">],</span> <span class="n">shell</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="HDRviewerController-1873"><a href="#HDRviewerController-1873"><span class="linenos">1873</span></a>
</span><span id="HDRviewerController-1874"><a href="#HDRviewerController-1874"><span class="linenos">1874</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">displayIMG</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">):</span>
</span><span id="HDRviewerController-1875"><a href="#HDRviewerController-1875"><span class="linenos">1875</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="HDRviewerController-1876"><a href="#HDRviewerController-1876"><span class="linenos">1876</span></a><span class="sd">        Display processed image on HDR monitor.</span>
</span><span id="HDRviewerController-1877"><a href="#HDRviewerController-1877"><span class="linenos">1877</span></a><span class="sd">        </span>
</span><span id="HDRviewerController-1878"><a href="#HDRviewerController-1878"><span class="linenos">1878</span></a><span class="sd">        Processes and displays a uHDR Image object on the external HDR monitor,</span>
</span><span id="HDRviewerController-1879"><a href="#HDRviewerController-1879"><span class="linenos">1879</span></a><span class="sd">        applying appropriate clipping, scaling, and centering for optimal</span>
</span><span id="HDRviewerController-1880"><a href="#HDRviewerController-1880"><span class="linenos">1880</span></a><span class="sd">        HDR display presentation.</span>
</span><span id="HDRviewerController-1881"><a href="#HDRviewerController-1881"><span class="linenos">1881</span></a><span class="sd">        </span>
</span><span id="HDRviewerController-1882"><a href="#HDRviewerController-1882"><span class="linenos">1882</span></a><span class="sd">        Args:</span>
</span><span id="HDRviewerController-1883"><a href="#HDRviewerController-1883"><span class="linenos">1883</span></a><span class="sd">            img (hdrCore.image.Image): Processed HDR image to display</span>
</span><span id="HDRviewerController-1884"><a href="#HDRviewerController-1884"><span class="linenos">1884</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="HDRviewerController-1885"><a href="#HDRviewerController-1885"><span class="linenos">1885</span></a>        <span class="n">img</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">hdrCore</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">clip</span><span class="p">())</span>
</span><span id="HDRviewerController-1886"><a href="#HDRviewerController-1886"><span class="linenos">1886</span></a>        <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">scaling</span><span class="p">())</span>
</span><span id="HDRviewerController-1887"><a href="#HDRviewerController-1887"><span class="linenos">1887</span></a>        <span class="n">colorData</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">colorData</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">displayModel</span><span class="p">[</span><span class="s1">&#39;scaling&#39;</span><span class="p">]</span>
</span><span id="HDRviewerController-1888"><a href="#HDRviewerController-1888"><span class="linenos">1888</span></a>
</span><span id="HDRviewerController-1889"><a href="#HDRviewerController-1889"><span class="linenos">1889</span></a>        <span class="n">h</span><span class="p">,</span><span class="n">w</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">colorData</span><span class="o">.</span><span class="n">shape</span>
</span><span id="HDRviewerController-1890"><a href="#HDRviewerController-1890"><span class="linenos">1890</span></a>        <span class="n">hD</span><span class="p">,</span> <span class="n">wD</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">displayModel</span><span class="p">[</span><span class="s1">&#39;shape&#39;</span><span class="p">]</span>
</span><span id="HDRviewerController-1891"><a href="#HDRviewerController-1891"><span class="linenos">1891</span></a>
</span><span id="HDRviewerController-1892"><a href="#HDRviewerController-1892"><span class="linenos">1892</span></a>        <span class="k">if</span> <span class="n">w</span><span class="o">&lt;</span><span class="n">wD</span><span class="p">:</span>
</span><span id="HDRviewerController-1893"><a href="#HDRviewerController-1893"><span class="linenos">1893</span></a>            <span class="n">back</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="n">hD</span><span class="p">,</span><span class="n">wD</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span><span class="o">*</span><span class="mf">0.2</span>
</span><span id="HDRviewerController-1894"><a href="#HDRviewerController-1894"><span class="linenos">1894</span></a>            <span class="n">marginW</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">wD</span><span class="o">-</span><span class="n">w</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
</span><span id="HDRviewerController-1895"><a href="#HDRviewerController-1895"><span class="linenos">1895</span></a>            <span class="n">marginH</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">hD</span><span class="o">-</span><span class="n">h</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
</span><span id="HDRviewerController-1896"><a href="#HDRviewerController-1896"><span class="linenos">1896</span></a>
</span><span id="HDRviewerController-1897"><a href="#HDRviewerController-1897"><span class="linenos">1897</span></a>            <span class="n">back</span><span class="p">[</span><span class="n">marginH</span><span class="p">:</span><span class="n">marginH</span><span class="o">+</span><span class="n">h</span><span class="p">,</span><span class="n">marginW</span><span class="p">:</span><span class="n">marginW</span><span class="o">+</span><span class="n">w</span><span class="p">,:]</span><span class="o">=</span><span class="n">colorData</span>
</span><span id="HDRviewerController-1898"><a href="#HDRviewerController-1898"><span class="linenos">1898</span></a>
</span><span id="HDRviewerController-1899"><a href="#HDRviewerController-1899"><span class="linenos">1899</span></a>        <span class="c1"># save as temp.hdr</span>
</span><span id="HDRviewerController-1900"><a href="#HDRviewerController-1900"><span class="linenos">1900</span></a>        <span class="n">colour</span><span class="o">.</span><span class="n">write_image</span><span class="p">(</span><span class="n">back</span><span class="p">,</span><span class="s1">&#39;temp.hdr&#39;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;Imageio&#39;</span><span class="p">)</span>
</span><span id="HDRviewerController-1901"><a href="#HDRviewerController-1901"><span class="linenos">1901</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">displayFile</span><span class="p">(</span><span class="s1">&#39;temp.hdr&#39;</span><span class="p">)</span>
</span><span id="HDRviewerController-1902"><a href="#HDRviewerController-1902"><span class="linenos">1902</span></a>
</span><span id="HDRviewerController-1903"><a href="#HDRviewerController-1903"><span class="linenos">1903</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">displaySplash</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="HDRviewerController-1904"><a href="#HDRviewerController-1904"><span class="linenos">1904</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="HDRviewerController-1905"><a href="#HDRviewerController-1905"><span class="linenos">1905</span></a><span class="sd">        Display default splash screen on HDR monitor.</span>
</span><span id="HDRviewerController-1906"><a href="#HDRviewerController-1906"><span class="linenos">1906</span></a><span class="sd">        </span>
</span><span id="HDRviewerController-1907"><a href="#HDRviewerController-1907"><span class="linenos">1907</span></a><span class="sd">        Shows the default splash screen image, typically used when no</span>
</span><span id="HDRviewerController-1908"><a href="#HDRviewerController-1908"><span class="linenos">1908</span></a><span class="sd">        specific image is being displayed or during application startup.</span>
</span><span id="HDRviewerController-1909"><a href="#HDRviewerController-1909"><span class="linenos">1909</span></a><span class="sd">        Clears the current image reference.</span>
</span><span id="HDRviewerController-1910"><a href="#HDRviewerController-1910"><span class="linenos">1910</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="HDRviewerController-1911"><a href="#HDRviewerController-1911"><span class="linenos">1911</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">currentIMG</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="HDRviewerController-1912"><a href="#HDRviewerController-1912"><span class="linenos">1912</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">displayFile</span><span class="p">(</span><span class="s1">&#39;grey.hdr&#39;</span><span class="p">)</span>
</span><span id="HDRviewerController-1913"><a href="#HDRviewerController-1913"><span class="linenos">1913</span></a>
</span><span id="HDRviewerController-1914"><a href="#HDRviewerController-1914"><span class="linenos">1914</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="HDRviewerController-1915"><a href="#HDRviewerController-1915"><span class="linenos">1915</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="HDRviewerController-1916"><a href="#HDRviewerController-1916"><span class="linenos">1916</span></a><span class="sd">        Close HDR viewer and terminate display process.</span>
</span><span id="HDRviewerController-1917"><a href="#HDRviewerController-1917"><span class="linenos">1917</span></a><span class="sd">        </span>
</span><span id="HDRviewerController-1918"><a href="#HDRviewerController-1918"><span class="linenos">1918</span></a><span class="sd">        Safely terminates the external HDR viewer process and cleans up</span>
</span><span id="HDRviewerController-1919"><a href="#HDRviewerController-1919"><span class="linenos">1919</span></a><span class="sd">        resources. Should be called during application shutdown or when</span>
</span><span id="HDRviewerController-1920"><a href="#HDRviewerController-1920"><span class="linenos">1920</span></a><span class="sd">        HDR display is no longer needed.</span>
</span><span id="HDRviewerController-1921"><a href="#HDRviewerController-1921"><span class="linenos">1921</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="HDRviewerController-1922"><a href="#HDRviewerController-1922"><span class="linenos">1922</span></a>        <span class="c1"># check that no current display process already open</span>
</span><span id="HDRviewerController-1923"><a href="#HDRviewerController-1923"><span class="linenos">1923</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">viewerProcess</span><span class="p">:</span>
</span><span id="HDRviewerController-1924"><a href="#HDRviewerController-1924"><span class="linenos">1924</span></a>            <span class="c1"># the display HDR process is already running</span>
</span><span id="HDRviewerController-1925"><a href="#HDRviewerController-1925"><span class="linenos">1925</span></a>            <span class="c1"># close current</span>
</span><span id="HDRviewerController-1926"><a href="#HDRviewerController-1926"><span class="linenos">1926</span></a>            <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">([</span><span class="s1">&#39;taskkill&#39;</span><span class="p">,</span> <span class="s1">&#39;/F&#39;</span><span class="p">,</span> <span class="s1">&#39;/T&#39;</span><span class="p">,</span> <span class="s1">&#39;/IM&#39;</span><span class="p">,</span> <span class="s2">&quot;HDRImageViewer*&quot;</span><span class="p">],</span><span class="n">capture_output</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="HDRviewerController-1927"><a href="#HDRviewerController-1927"><span class="linenos">1927</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">viewerProcess</span> <span class="o">=</span> <span class="kc">None</span>
</span></pre></div>


            <div class="docstring"><p>Controller for external HDR display and viewer management.</p>

<p>This class manages the external HDR display functionality, coordinating with
HDR-capable monitors to show processed images at their full dynamic range.
It handles display process management, image comparison modes, auto-preview
functionality, and HDR display scaling.</p>

<p>The HDR viewer enables real-time preview of processing results on calibrated
HDR displays, providing immediate visual feedback for professional HDR
image editing workflows.</p>

<p>Attributes:
    - parent: Parent controller for coordination
    - model (model.HDRviewerModel): HDR display data model
    - view: View component (set externally)
    - viewerProcess: External HDR viewer process handle</p>
</div>


                            <div id="HDRviewerController.__init__" class="classattr">
                                        <input id="HDRviewerController.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">HDRviewerController</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">parent</span></span>)</span>

                <label class="view-source-button" for="HDRviewerController.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#HDRviewerController.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="HDRviewerController.__init__-1757"><a href="#HDRviewerController.__init__-1757"><span class="linenos">1757</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
</span><span id="HDRviewerController.__init__-1758"><a href="#HDRviewerController.__init__-1758"><span class="linenos">1758</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="HDRviewerController.__init__-1759"><a href="#HDRviewerController.__init__-1759"><span class="linenos">1759</span></a><span class="sd">        Initialize the HDR viewer controller.</span>
</span><span id="HDRviewerController.__init__-1760"><a href="#HDRviewerController.__init__-1760"><span class="linenos">1760</span></a><span class="sd">        </span>
</span><span id="HDRviewerController.__init__-1761"><a href="#HDRviewerController.__init__-1761"><span class="linenos">1761</span></a><span class="sd">        Args:</span>
</span><span id="HDRviewerController.__init__-1762"><a href="#HDRviewerController.__init__-1762"><span class="linenos">1762</span></a><span class="sd">            parent: Parent controller for coordination and image access</span>
</span><span id="HDRviewerController.__init__-1763"><a href="#HDRviewerController.__init__-1763"><span class="linenos">1763</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="HDRviewerController.__init__-1764"><a href="#HDRviewerController.__init__-1764"><span class="linenos">1764</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; HDRviewerController.__init__(&quot;</span><span class="p">,</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
</span><span id="HDRviewerController.__init__-1765"><a href="#HDRviewerController.__init__-1765"><span class="linenos">1765</span></a>
</span><span id="HDRviewerController.__init__-1766"><a href="#HDRviewerController.__init__-1766"><span class="linenos">1766</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">=</span> <span class="n">parent</span>
</span><span id="HDRviewerController.__init__-1767"><a href="#HDRviewerController.__init__-1767"><span class="linenos">1767</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">HDRviewerModel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="HDRviewerController.__init__-1768"><a href="#HDRviewerController.__init__-1768"><span class="linenos">1768</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span> <span class="kc">None</span> 
</span><span id="HDRviewerController.__init__-1769"><a href="#HDRviewerController.__init__-1769"><span class="linenos">1769</span></a>
</span><span id="HDRviewerController.__init__-1770"><a href="#HDRviewerController.__init__-1770"><span class="linenos">1770</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">viewerProcess</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="HDRviewerController.__init__-1771"><a href="#HDRviewerController.__init__-1771"><span class="linenos">1771</span></a>
</span><span id="HDRviewerController.__init__-1772"><a href="#HDRviewerController.__init__-1772"><span class="linenos">1772</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">displaySplash</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Initialize the HDR viewer controller.</p>

<p>Args:
    parent: Parent controller for coordination and image access</p>
</div>


                            </div>
                            <div id="HDRviewerController.parent" class="classattr">
                                <div class="attr variable">
            <span class="name">parent</span>

        
    </div>
    <a class="headerlink" href="#HDRviewerController.parent"></a>
    
    

                            </div>
                            <div id="HDRviewerController.model" class="classattr">
                                <div class="attr variable">
            <span class="name">model</span>

        
    </div>
    <a class="headerlink" href="#HDRviewerController.model"></a>
    
    

                            </div>
                            <div id="HDRviewerController.view" class="classattr">
                                <div class="attr variable">
            <span class="name">view</span>

        
    </div>
    <a class="headerlink" href="#HDRviewerController.view"></a>
    
    

                            </div>
                            <div id="HDRviewerController.viewerProcess" class="classattr">
                                <div class="attr variable">
            <span class="name">viewerProcess</span>

        
    </div>
    <a class="headerlink" href="#HDRviewerController.viewerProcess"></a>
    
    

                            </div>
                            <div id="HDRviewerController.setView" class="classattr">
                                        <input id="HDRviewerController.setView-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">setView</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">view</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="HDRviewerController.setView-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#HDRviewerController.setView"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="HDRviewerController.setView-1774"><a href="#HDRviewerController.setView-1774"><span class="linenos">1774</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setView</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">view</span><span class="p">):</span> 
</span><span id="HDRviewerController.setView-1775"><a href="#HDRviewerController.setView-1775"><span class="linenos">1775</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="HDRviewerController.setView-1776"><a href="#HDRviewerController.setView-1776"><span class="linenos">1776</span></a><span class="sd">        Set the view component for the HDR viewer.</span>
</span><span id="HDRviewerController.setView-1777"><a href="#HDRviewerController.setView-1777"><span class="linenos">1777</span></a><span class="sd">        </span>
</span><span id="HDRviewerController.setView-1778"><a href="#HDRviewerController.setView-1778"><span class="linenos">1778</span></a><span class="sd">        Args:</span>
</span><span id="HDRviewerController.setView-1779"><a href="#HDRviewerController.setView-1779"><span class="linenos">1779</span></a><span class="sd">            view: View component to associate with this controller</span>
</span><span id="HDRviewerController.setView-1780"><a href="#HDRviewerController.setView-1780"><span class="linenos">1780</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="HDRviewerController.setView-1781"><a href="#HDRviewerController.setView-1781"><span class="linenos">1781</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span> <span class="n">view</span>
</span></pre></div>


            <div class="docstring"><p>Set the view component for the HDR viewer.</p>

<p>Args:
    view: View component to associate with this controller</p>
</div>


                            </div>
                            <div id="HDRviewerController.callBackUpdate" class="classattr">
                                        <input id="HDRviewerController.callBackUpdate-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">callBackUpdate</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="HDRviewerController.callBackUpdate-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#HDRviewerController.callBackUpdate"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="HDRviewerController.callBackUpdate-1783"><a href="#HDRviewerController.callBackUpdate-1783"><span class="linenos">1783</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackUpdate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="HDRviewerController.callBackUpdate-1784"><a href="#HDRviewerController.callBackUpdate-1784"><span class="linenos">1784</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="HDRviewerController.callBackUpdate-1785"><a href="#HDRviewerController.callBackUpdate-1785"><span class="linenos">1785</span></a><span class="sd">        Update HDR display with the current processed image.</span>
</span><span id="HDRviewerController.callBackUpdate-1786"><a href="#HDRviewerController.callBackUpdate-1786"><span class="linenos">1786</span></a><span class="sd">        </span>
</span><span id="HDRviewerController.callBackUpdate-1787"><a href="#HDRviewerController.callBackUpdate-1787"><span class="linenos">1787</span></a><span class="sd">        Retrieves the currently selected processing pipeline, processes the</span>
</span><span id="HDRviewerController.callBackUpdate-1788"><a href="#HDRviewerController.callBackUpdate-1788"><span class="linenos">1788</span></a><span class="sd">        image without tone mapping (preserving HDR values), and displays</span>
</span><span id="HDRviewerController.callBackUpdate-1789"><a href="#HDRviewerController.callBackUpdate-1789"><span class="linenos">1789</span></a><span class="sd">        the result on the HDR monitor. Updates the current image reference</span>
</span><span id="HDRviewerController.callBackUpdate-1790"><a href="#HDRviewerController.callBackUpdate-1790"><span class="linenos">1790</span></a><span class="sd">        for comparison operations.</span>
</span><span id="HDRviewerController.callBackUpdate-1791"><a href="#HDRviewerController.callBackUpdate-1791"><span class="linenos">1791</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="HDRviewerController.callBackUpdate-1792"><a href="#HDRviewerController.callBackUpdate-1792"><span class="linenos">1792</span></a>        <span class="n">selectedProcessPipe</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">imageGalleryController</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getSelectedProcessPipe</span><span class="p">()</span>
</span><span id="HDRviewerController.callBackUpdate-1793"><a href="#HDRviewerController.callBackUpdate-1793"><span class="linenos">1793</span></a>        <span class="n">img</span> <span class="o">=</span> <span class="n">selectedProcessPipe</span><span class="o">.</span><span class="n">getImage</span><span class="p">(</span><span class="n">toneMap</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="HDRviewerController.callBackUpdate-1794"><a href="#HDRviewerController.callBackUpdate-1794"><span class="linenos">1794</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">displayIMG</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
</span><span id="HDRviewerController.callBackUpdate-1795"><a href="#HDRviewerController.callBackUpdate-1795"><span class="linenos">1795</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">currentIMG</span> <span class="o">=</span> <span class="n">img</span>
</span></pre></div>


            <div class="docstring"><p>Update HDR display with the current processed image.</p>

<p>Retrieves the currently selected processing pipeline, processes the
image without tone mapping (preserving HDR values), and displays
the result on the HDR monitor. Updates the current image reference
for comparison operations.</p>
</div>


                            </div>
                            <div id="HDRviewerController.callBackAuto" class="classattr">
                                        <input id="HDRviewerController.callBackAuto-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">callBackAuto</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">on_off</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="HDRviewerController.callBackAuto-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#HDRviewerController.callBackAuto"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="HDRviewerController.callBackAuto-1797"><a href="#HDRviewerController.callBackAuto-1797"><span class="linenos">1797</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackAuto</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">on_off</span><span class="p">):</span>
</span><span id="HDRviewerController.callBackAuto-1798"><a href="#HDRviewerController.callBackAuto-1798"><span class="linenos">1798</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="HDRviewerController.callBackAuto-1799"><a href="#HDRviewerController.callBackAuto-1799"><span class="linenos">1799</span></a><span class="sd">        Toggle automatic HDR preview updates.</span>
</span><span id="HDRviewerController.callBackAuto-1800"><a href="#HDRviewerController.callBackAuto-1800"><span class="linenos">1800</span></a><span class="sd">        </span>
</span><span id="HDRviewerController.callBackAuto-1801"><a href="#HDRviewerController.callBackAuto-1801"><span class="linenos">1801</span></a><span class="sd">        Enables or disables automatic HDR display updates when processing</span>
</span><span id="HDRviewerController.callBackAuto-1802"><a href="#HDRviewerController.callBackAuto-1802"><span class="linenos">1802</span></a><span class="sd">        parameters change, allowing for real-time preview on HDR monitors.</span>
</span><span id="HDRviewerController.callBackAuto-1803"><a href="#HDRviewerController.callBackAuto-1803"><span class="linenos">1803</span></a><span class="sd">        </span>
</span><span id="HDRviewerController.callBackAuto-1804"><a href="#HDRviewerController.callBackAuto-1804"><span class="linenos">1804</span></a><span class="sd">        Args:</span>
</span><span id="HDRviewerController.callBackAuto-1805"><a href="#HDRviewerController.callBackAuto-1805"><span class="linenos">1805</span></a><span class="sd">            on_off (bool): Enable (True) or disable (False) auto-preview</span>
</span><span id="HDRviewerController.callBackAuto-1806"><a href="#HDRviewerController.callBackAuto-1806"><span class="linenos">1806</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="HDRviewerController.callBackAuto-1807"><a href="#HDRviewerController.callBackAuto-1807"><span class="linenos">1807</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">dock</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">childControllers</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">autoPreviewHDR</span> <span class="o">=</span> <span class="n">on_off</span>
</span></pre></div>


            <div class="docstring"><p>Toggle automatic HDR preview updates.</p>

<p>Enables or disables automatic HDR display updates when processing
parameters change, allowing for real-time preview on HDR monitors.</p>

<p>Args:
    on_off (bool): Enable (True) or disable (False) auto-preview</p>
</div>


                            </div>
                            <div id="HDRviewerController.callBackCompare" class="classattr">
                                        <input id="HDRviewerController.callBackCompare-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">callBackCompare</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="HDRviewerController.callBackCompare-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#HDRviewerController.callBackCompare"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="HDRviewerController.callBackCompare-1809"><a href="#HDRviewerController.callBackCompare-1809"><span class="linenos">1809</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">callBackCompare</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="HDRviewerController.callBackCompare-1810"><a href="#HDRviewerController.callBackCompare-1810"><span class="linenos">1810</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="HDRviewerController.callBackCompare-1811"><a href="#HDRviewerController.callBackCompare-1811"><span class="linenos">1811</span></a><span class="sd">        Display before/after comparison on HDR monitor.</span>
</span><span id="HDRviewerController.callBackCompare-1812"><a href="#HDRviewerController.callBackCompare-1812"><span class="linenos">1812</span></a><span class="sd">        </span>
</span><span id="HDRviewerController.callBackCompare-1813"><a href="#HDRviewerController.callBackCompare-1813"><span class="linenos">1813</span></a><span class="sd">        Creates a side-by-side comparison showing the previous processing</span>
</span><span id="HDRviewerController.callBackCompare-1814"><a href="#HDRviewerController.callBackCompare-1814"><span class="linenos">1814</span></a><span class="sd">        result alongside the current result, enabling visual comparison</span>
</span><span id="HDRviewerController.callBackCompare-1815"><a href="#HDRviewerController.callBackCompare-1815"><span class="linenos">1815</span></a><span class="sd">        of processing changes. If no previous result exists, updates</span>
</span><span id="HDRviewerController.callBackCompare-1816"><a href="#HDRviewerController.callBackCompare-1816"><span class="linenos">1816</span></a><span class="sd">        with current processing.</span>
</span><span id="HDRviewerController.callBackCompare-1817"><a href="#HDRviewerController.callBackCompare-1817"><span class="linenos">1817</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="HDRviewerController.callBackCompare-1818"><a href="#HDRviewerController.callBackCompare-1818"><span class="linenos">1818</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">currentIMG</span><span class="p">:</span>
</span><span id="HDRviewerController.callBackCompare-1819"><a href="#HDRviewerController.callBackCompare-1819"><span class="linenos">1819</span></a>            <span class="n">old</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">currentIMG</span>
</span><span id="HDRviewerController.callBackCompare-1820"><a href="#HDRviewerController.callBackCompare-1820"><span class="linenos">1820</span></a>            <span class="n">old</span> <span class="o">=</span> <span class="n">old</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">hdrCore</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">clip</span><span class="p">())</span>
</span><span id="HDRviewerController.callBackCompare-1821"><a href="#HDRviewerController.callBackCompare-1821"><span class="linenos">1821</span></a>
</span><span id="HDRviewerController.callBackCompare-1822"><a href="#HDRviewerController.callBackCompare-1822"><span class="linenos">1822</span></a>            <span class="n">sp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">imageGalleryController</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getSelectedProcessPipe</span><span class="p">()</span>
</span><span id="HDRviewerController.callBackCompare-1823"><a href="#HDRviewerController.callBackCompare-1823"><span class="linenos">1823</span></a>            <span class="n">img</span> <span class="o">=</span> <span class="n">sp</span><span class="o">.</span><span class="n">getImage</span><span class="p">(</span><span class="n">toneMap</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
</span><span id="HDRviewerController.callBackCompare-1824"><a href="#HDRviewerController.callBackCompare-1824"><span class="linenos">1824</span></a>            <span class="n">img</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">hdrCore</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">clip</span><span class="p">())</span>
</span><span id="HDRviewerController.callBackCompare-1825"><a href="#HDRviewerController.callBackCompare-1825"><span class="linenos">1825</span></a>
</span><span id="HDRviewerController.callBackCompare-1826"><a href="#HDRviewerController.callBackCompare-1826"><span class="linenos">1826</span></a>
</span><span id="HDRviewerController.callBackCompare-1827"><a href="#HDRviewerController.callBackCompare-1827"><span class="linenos">1827</span></a>            <span class="n">h1</span><span class="p">,</span> <span class="n">w1</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">old</span><span class="o">.</span><span class="n">colorData</span><span class="o">.</span><span class="n">shape</span>
</span><span id="HDRviewerController.callBackCompare-1828"><a href="#HDRviewerController.callBackCompare-1828"><span class="linenos">1828</span></a>            <span class="n">h2</span><span class="p">,</span> <span class="n">w2</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">colorData</span><span class="o">.</span><span class="n">shape</span>
</span><span id="HDRviewerController.callBackCompare-1829"><a href="#HDRviewerController.callBackCompare-1829"><span class="linenos">1829</span></a>            <span class="n">hD</span><span class="p">,</span> <span class="n">wD</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">displayModel</span><span class="p">[</span><span class="s1">&#39;shape&#39;</span><span class="p">]</span>
</span><span id="HDRviewerController.callBackCompare-1830"><a href="#HDRviewerController.callBackCompare-1830"><span class="linenos">1830</span></a>            <span class="n">hM</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">hD</span> <span class="o">-</span> <span class="nb">max</span><span class="p">(</span><span class="n">h1</span><span class="p">,</span><span class="n">h2</span><span class="p">))</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
</span><span id="HDRviewerController.callBackCompare-1831"><a href="#HDRviewerController.callBackCompare-1831"><span class="linenos">1831</span></a>            <span class="n">wM</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">wD</span> <span class="o">-</span> <span class="p">(</span><span class="n">w1</span><span class="o">+</span><span class="n">w2</span><span class="p">))</span><span class="o">/</span><span class="mi">3</span><span class="p">)</span>
</span><span id="HDRviewerController.callBackCompare-1832"><a href="#HDRviewerController.callBackCompare-1832"><span class="linenos">1832</span></a>            <span class="n">back</span> <span class="o">=</span>  <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="n">hD</span><span class="p">,</span><span class="n">wD</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span><span class="o">*</span><span class="mf">0.2</span>
</span><span id="HDRviewerController.callBackCompare-1833"><a href="#HDRviewerController.callBackCompare-1833"><span class="linenos">1833</span></a>
</span><span id="HDRviewerController.callBackCompare-1834"><a href="#HDRviewerController.callBackCompare-1834"><span class="linenos">1834</span></a>            <span class="n">back</span><span class="p">[</span><span class="n">hM</span><span class="p">:</span><span class="n">hM</span><span class="o">+</span><span class="n">h1</span><span class="p">,</span><span class="n">wM</span><span class="p">:</span><span class="n">wM</span><span class="o">+</span><span class="n">w1</span><span class="p">,:]</span> <span class="o">=</span> <span class="n">old</span><span class="o">.</span><span class="n">colorData</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">displayModel</span><span class="p">[</span><span class="s1">&#39;scaling&#39;</span><span class="p">]</span>
</span><span id="HDRviewerController.callBackCompare-1835"><a href="#HDRviewerController.callBackCompare-1835"><span class="linenos">1835</span></a>            <span class="n">back</span><span class="p">[</span><span class="n">hM</span><span class="p">:</span><span class="n">hM</span><span class="o">+</span><span class="n">h2</span><span class="p">,</span><span class="mi">2</span><span class="o">*</span><span class="n">wM</span><span class="o">+</span><span class="n">w1</span><span class="p">:</span><span class="mi">2</span><span class="o">*</span><span class="n">wM</span><span class="o">+</span><span class="n">w1</span><span class="o">+</span><span class="n">w2</span><span class="p">,:]</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">colorData</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">displayModel</span><span class="p">[</span><span class="s1">&#39;scaling&#39;</span><span class="p">]</span>
</span><span id="HDRviewerController.callBackCompare-1836"><a href="#HDRviewerController.callBackCompare-1836"><span class="linenos">1836</span></a>
</span><span id="HDRviewerController.callBackCompare-1837"><a href="#HDRviewerController.callBackCompare-1837"><span class="linenos">1837</span></a>            <span class="c1"># save as temp.hdr</span>
</span><span id="HDRviewerController.callBackCompare-1838"><a href="#HDRviewerController.callBackCompare-1838"><span class="linenos">1838</span></a>            <span class="n">colour</span><span class="o">.</span><span class="n">write_image</span><span class="p">(</span><span class="n">back</span><span class="p">,</span><span class="s1">&#39;temp.hdr&#39;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;Imageio&#39;</span><span class="p">)</span>
</span><span id="HDRviewerController.callBackCompare-1839"><a href="#HDRviewerController.callBackCompare-1839"><span class="linenos">1839</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">displayFile</span><span class="p">(</span><span class="s1">&#39;temp.hdr&#39;</span><span class="p">)</span>
</span><span id="HDRviewerController.callBackCompare-1840"><a href="#HDRviewerController.callBackCompare-1840"><span class="linenos">1840</span></a>
</span><span id="HDRviewerController.callBackCompare-1841"><a href="#HDRviewerController.callBackCompare-1841"><span class="linenos">1841</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">currentIMG</span> <span class="o">=</span> <span class="n">img</span>
</span><span id="HDRviewerController.callBackCompare-1842"><a href="#HDRviewerController.callBackCompare-1842"><span class="linenos">1842</span></a>        <span class="k">else</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">callBackUpdate</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Display before/after comparison on HDR monitor.</p>

<p>Creates a side-by-side comparison showing the previous processing
result alongside the current result, enabling visual comparison
of processing changes. If no previous result exists, updates
with current processing.</p>
</div>


                            </div>
                            <div id="HDRviewerController.displayFile" class="classattr">
                                        <input id="HDRviewerController.displayFile-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">displayFile</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">HDRfilename</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="HDRviewerController.displayFile-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#HDRviewerController.displayFile"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="HDRviewerController.displayFile-1844"><a href="#HDRviewerController.displayFile-1844"><span class="linenos">1844</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">displayFile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">HDRfilename</span><span class="p">):</span>
</span><span id="HDRviewerController.displayFile-1845"><a href="#HDRviewerController.displayFile-1845"><span class="linenos">1845</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="HDRviewerController.displayFile-1846"><a href="#HDRviewerController.displayFile-1846"><span class="linenos">1846</span></a><span class="sd">        Display HDR file on external HDR monitor.</span>
</span><span id="HDRviewerController.displayFile-1847"><a href="#HDRviewerController.displayFile-1847"><span class="linenos">1847</span></a><span class="sd">        </span>
</span><span id="HDRviewerController.displayFile-1848"><a href="#HDRviewerController.displayFile-1848"><span class="linenos">1848</span></a><span class="sd">        Launches or updates the external HDR viewer process to display the</span>
</span><span id="HDRviewerController.displayFile-1849"><a href="#HDRviewerController.displayFile-1849"><span class="linenos">1849</span></a><span class="sd">        specified HDR file. Handles process management and error recovery</span>
</span><span id="HDRviewerController.displayFile-1850"><a href="#HDRviewerController.displayFile-1850"><span class="linenos">1850</span></a><span class="sd">        for reliable HDR display functionality.</span>
</span><span id="HDRviewerController.displayFile-1851"><a href="#HDRviewerController.displayFile-1851"><span class="linenos">1851</span></a><span class="sd">        </span>
</span><span id="HDRviewerController.displayFile-1852"><a href="#HDRviewerController.displayFile-1852"><span class="linenos">1852</span></a><span class="sd">        Args:</span>
</span><span id="HDRviewerController.displayFile-1853"><a href="#HDRviewerController.displayFile-1853"><span class="linenos">1853</span></a><span class="sd">            HDRfilename (str): Path to HDR file to display</span>
</span><span id="HDRviewerController.displayFile-1854"><a href="#HDRviewerController.displayFile-1854"><span class="linenos">1854</span></a><span class="sd">            </span>
</span><span id="HDRviewerController.displayFile-1855"><a href="#HDRviewerController.displayFile-1855"><span class="linenos">1855</span></a><span class="sd">        Note:</span>
</span><span id="HDRviewerController.displayFile-1856"><a href="#HDRviewerController.displayFile-1856"><span class="linenos">1856</span></a><span class="sd">            Uses HDRImageViewer.exe for Windows-based HDR display.</span>
</span><span id="HDRviewerController.displayFile-1857"><a href="#HDRviewerController.displayFile-1857"><span class="linenos">1857</span></a><span class="sd">            Includes automatic process restart if initial launch fails.</span>
</span><span id="HDRviewerController.displayFile-1858"><a href="#HDRviewerController.displayFile-1858"><span class="linenos">1858</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="HDRviewerController.displayFile-1859"><a href="#HDRviewerController.displayFile-1859"><span class="linenos">1859</span></a>
</span><span id="HDRviewerController.displayFile-1860"><a href="#HDRviewerController.displayFile-1860"><span class="linenos">1860</span></a>         <span class="c1"># check that no current display process already open</span>
</span><span id="HDRviewerController.displayFile-1861"><a href="#HDRviewerController.displayFile-1861"><span class="linenos">1861</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">viewerProcess</span><span class="p">:</span>
</span><span id="HDRviewerController.displayFile-1862"><a href="#HDRviewerController.displayFile-1862"><span class="linenos">1862</span></a>            <span class="c1"># the display HDR process is already running</span>
</span><span id="HDRviewerController.displayFile-1863"><a href="#HDRviewerController.displayFile-1863"><span class="linenos">1863</span></a>            <span class="c1"># close current</span>
</span><span id="HDRviewerController.displayFile-1864"><a href="#HDRviewerController.displayFile-1864"><span class="linenos">1864</span></a>            <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">([</span><span class="s1">&#39;taskkill&#39;</span><span class="p">,</span> <span class="s1">&#39;/F&#39;</span><span class="p">,</span> <span class="s1">&#39;/T&#39;</span><span class="p">,</span> <span class="s1">&#39;/IM&#39;</span><span class="p">,</span> <span class="s2">&quot;HDRImageViewer*&quot;</span><span class="p">],</span><span class="n">capture_output</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="HDRviewerController.displayFile-1865"><a href="#HDRviewerController.displayFile-1865"><span class="linenos">1865</span></a>            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.05</span><span class="p">)</span>
</span><span id="HDRviewerController.displayFile-1866"><a href="#HDRviewerController.displayFile-1866"><span class="linenos">1866</span></a>        <span class="c1"># run display HDR process</span>
</span><span id="HDRviewerController.displayFile-1867"><a href="#HDRviewerController.displayFile-1867"><span class="linenos">1867</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">viewerProcess</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">([</span><span class="s2">&quot;HDRImageViewer.exe&quot;</span><span class="p">,</span><span class="s2">&quot;-f&quot;</span><span class="p">,</span> <span class="s2">&quot;-input:&quot;</span><span class="o">+</span><span class="n">HDRfilename</span><span class="p">,</span> <span class="s2">&quot;-f&quot;</span><span class="p">,</span> <span class="s2">&quot;-h&quot;</span><span class="p">],</span> <span class="n">shell</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="HDRviewerController.displayFile-1868"><a href="#HDRviewerController.displayFile-1868"><span class="linenos">1868</span></a>        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.10</span><span class="p">)</span>
</span><span id="HDRviewerController.displayFile-1869"><a href="#HDRviewerController.displayFile-1869"><span class="linenos">1869</span></a>        <span class="n">psData</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">([</span><span class="s1">&#39;tasklist&#39;</span><span class="p">],</span> <span class="n">capture_output</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">universal_newlines</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">stdout</span>
</span><span id="HDRviewerController.displayFile-1870"><a href="#HDRviewerController.displayFile-1870"><span class="linenos">1870</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="s1">&#39;HDRImageViewer&#39;</span> <span class="ow">in</span> <span class="n">psData</span><span class="p">:</span> 
</span><span id="HDRviewerController.displayFile-1871"><a href="#HDRviewerController.displayFile-1871"><span class="linenos">1871</span></a>            <span class="c1"># re-run display HDR process</span>
</span><span id="HDRviewerController.displayFile-1872"><a href="#HDRviewerController.displayFile-1872"><span class="linenos">1872</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">viewerProcess</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">([</span><span class="s2">&quot;HDRImageViewer.exe&quot;</span><span class="p">,</span><span class="s2">&quot;-f&quot;</span><span class="p">,</span> <span class="s2">&quot;-input:&quot;</span><span class="o">+</span><span class="n">HDRfilename</span><span class="p">,</span> <span class="s2">&quot;-f&quot;</span><span class="p">,</span> <span class="s2">&quot;-h&quot;</span><span class="p">],</span> <span class="n">shell</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Display HDR file on external HDR monitor.</p>

<p>Launches or updates the external HDR viewer process to display the
specified HDR file. Handles process management and error recovery
for reliable HDR display functionality.</p>

<p>Args:
    HDRfilename (str): Path to HDR file to display</p>

<p>Note:
    Uses HDRImageViewer.exe for Windows-based HDR display.
    Includes automatic process restart if initial launch fails.</p>
</div>


                            </div>
                            <div id="HDRviewerController.displayIMG" class="classattr">
                                        <input id="HDRviewerController.displayIMG-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">displayIMG</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">img</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="HDRviewerController.displayIMG-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#HDRviewerController.displayIMG"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="HDRviewerController.displayIMG-1874"><a href="#HDRviewerController.displayIMG-1874"><span class="linenos">1874</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">displayIMG</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">):</span>
</span><span id="HDRviewerController.displayIMG-1875"><a href="#HDRviewerController.displayIMG-1875"><span class="linenos">1875</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="HDRviewerController.displayIMG-1876"><a href="#HDRviewerController.displayIMG-1876"><span class="linenos">1876</span></a><span class="sd">        Display processed image on HDR monitor.</span>
</span><span id="HDRviewerController.displayIMG-1877"><a href="#HDRviewerController.displayIMG-1877"><span class="linenos">1877</span></a><span class="sd">        </span>
</span><span id="HDRviewerController.displayIMG-1878"><a href="#HDRviewerController.displayIMG-1878"><span class="linenos">1878</span></a><span class="sd">        Processes and displays a uHDR Image object on the external HDR monitor,</span>
</span><span id="HDRviewerController.displayIMG-1879"><a href="#HDRviewerController.displayIMG-1879"><span class="linenos">1879</span></a><span class="sd">        applying appropriate clipping, scaling, and centering for optimal</span>
</span><span id="HDRviewerController.displayIMG-1880"><a href="#HDRviewerController.displayIMG-1880"><span class="linenos">1880</span></a><span class="sd">        HDR display presentation.</span>
</span><span id="HDRviewerController.displayIMG-1881"><a href="#HDRviewerController.displayIMG-1881"><span class="linenos">1881</span></a><span class="sd">        </span>
</span><span id="HDRviewerController.displayIMG-1882"><a href="#HDRviewerController.displayIMG-1882"><span class="linenos">1882</span></a><span class="sd">        Args:</span>
</span><span id="HDRviewerController.displayIMG-1883"><a href="#HDRviewerController.displayIMG-1883"><span class="linenos">1883</span></a><span class="sd">            img (hdrCore.image.Image): Processed HDR image to display</span>
</span><span id="HDRviewerController.displayIMG-1884"><a href="#HDRviewerController.displayIMG-1884"><span class="linenos">1884</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="HDRviewerController.displayIMG-1885"><a href="#HDRviewerController.displayIMG-1885"><span class="linenos">1885</span></a>        <span class="n">img</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">hdrCore</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">clip</span><span class="p">())</span>
</span><span id="HDRviewerController.displayIMG-1886"><a href="#HDRviewerController.displayIMG-1886"><span class="linenos">1886</span></a>        <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">scaling</span><span class="p">())</span>
</span><span id="HDRviewerController.displayIMG-1887"><a href="#HDRviewerController.displayIMG-1887"><span class="linenos">1887</span></a>        <span class="n">colorData</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">colorData</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">displayModel</span><span class="p">[</span><span class="s1">&#39;scaling&#39;</span><span class="p">]</span>
</span><span id="HDRviewerController.displayIMG-1888"><a href="#HDRviewerController.displayIMG-1888"><span class="linenos">1888</span></a>
</span><span id="HDRviewerController.displayIMG-1889"><a href="#HDRviewerController.displayIMG-1889"><span class="linenos">1889</span></a>        <span class="n">h</span><span class="p">,</span><span class="n">w</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">colorData</span><span class="o">.</span><span class="n">shape</span>
</span><span id="HDRviewerController.displayIMG-1890"><a href="#HDRviewerController.displayIMG-1890"><span class="linenos">1890</span></a>        <span class="n">hD</span><span class="p">,</span> <span class="n">wD</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">displayModel</span><span class="p">[</span><span class="s1">&#39;shape&#39;</span><span class="p">]</span>
</span><span id="HDRviewerController.displayIMG-1891"><a href="#HDRviewerController.displayIMG-1891"><span class="linenos">1891</span></a>
</span><span id="HDRviewerController.displayIMG-1892"><a href="#HDRviewerController.displayIMG-1892"><span class="linenos">1892</span></a>        <span class="k">if</span> <span class="n">w</span><span class="o">&lt;</span><span class="n">wD</span><span class="p">:</span>
</span><span id="HDRviewerController.displayIMG-1893"><a href="#HDRviewerController.displayIMG-1893"><span class="linenos">1893</span></a>            <span class="n">back</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="n">hD</span><span class="p">,</span><span class="n">wD</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span><span class="o">*</span><span class="mf">0.2</span>
</span><span id="HDRviewerController.displayIMG-1894"><a href="#HDRviewerController.displayIMG-1894"><span class="linenos">1894</span></a>            <span class="n">marginW</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">wD</span><span class="o">-</span><span class="n">w</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
</span><span id="HDRviewerController.displayIMG-1895"><a href="#HDRviewerController.displayIMG-1895"><span class="linenos">1895</span></a>            <span class="n">marginH</span> <span class="o">=</span> <span class="nb">int</span><span class="p">((</span><span class="n">hD</span><span class="o">-</span><span class="n">h</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
</span><span id="HDRviewerController.displayIMG-1896"><a href="#HDRviewerController.displayIMG-1896"><span class="linenos">1896</span></a>
</span><span id="HDRviewerController.displayIMG-1897"><a href="#HDRviewerController.displayIMG-1897"><span class="linenos">1897</span></a>            <span class="n">back</span><span class="p">[</span><span class="n">marginH</span><span class="p">:</span><span class="n">marginH</span><span class="o">+</span><span class="n">h</span><span class="p">,</span><span class="n">marginW</span><span class="p">:</span><span class="n">marginW</span><span class="o">+</span><span class="n">w</span><span class="p">,:]</span><span class="o">=</span><span class="n">colorData</span>
</span><span id="HDRviewerController.displayIMG-1898"><a href="#HDRviewerController.displayIMG-1898"><span class="linenos">1898</span></a>
</span><span id="HDRviewerController.displayIMG-1899"><a href="#HDRviewerController.displayIMG-1899"><span class="linenos">1899</span></a>        <span class="c1"># save as temp.hdr</span>
</span><span id="HDRviewerController.displayIMG-1900"><a href="#HDRviewerController.displayIMG-1900"><span class="linenos">1900</span></a>        <span class="n">colour</span><span class="o">.</span><span class="n">write_image</span><span class="p">(</span><span class="n">back</span><span class="p">,</span><span class="s1">&#39;temp.hdr&#39;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;Imageio&#39;</span><span class="p">)</span>
</span><span id="HDRviewerController.displayIMG-1901"><a href="#HDRviewerController.displayIMG-1901"><span class="linenos">1901</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">displayFile</span><span class="p">(</span><span class="s1">&#39;temp.hdr&#39;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Display processed image on HDR monitor.</p>

<p>Processes and displays a uHDR Image object on the external HDR monitor,
applying appropriate clipping, scaling, and centering for optimal
HDR display presentation.</p>

<p>Args:
    img (<a href="../hdrCore/image.html#Image">hdrCore.image.Image</a>): Processed HDR image to display</p>
</div>


                            </div>
                            <div id="HDRviewerController.displaySplash" class="classattr">
                                        <input id="HDRviewerController.displaySplash-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">displaySplash</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="HDRviewerController.displaySplash-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#HDRviewerController.displaySplash"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="HDRviewerController.displaySplash-1903"><a href="#HDRviewerController.displaySplash-1903"><span class="linenos">1903</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">displaySplash</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="HDRviewerController.displaySplash-1904"><a href="#HDRviewerController.displaySplash-1904"><span class="linenos">1904</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="HDRviewerController.displaySplash-1905"><a href="#HDRviewerController.displaySplash-1905"><span class="linenos">1905</span></a><span class="sd">        Display default splash screen on HDR monitor.</span>
</span><span id="HDRviewerController.displaySplash-1906"><a href="#HDRviewerController.displaySplash-1906"><span class="linenos">1906</span></a><span class="sd">        </span>
</span><span id="HDRviewerController.displaySplash-1907"><a href="#HDRviewerController.displaySplash-1907"><span class="linenos">1907</span></a><span class="sd">        Shows the default splash screen image, typically used when no</span>
</span><span id="HDRviewerController.displaySplash-1908"><a href="#HDRviewerController.displaySplash-1908"><span class="linenos">1908</span></a><span class="sd">        specific image is being displayed or during application startup.</span>
</span><span id="HDRviewerController.displaySplash-1909"><a href="#HDRviewerController.displaySplash-1909"><span class="linenos">1909</span></a><span class="sd">        Clears the current image reference.</span>
</span><span id="HDRviewerController.displaySplash-1910"><a href="#HDRviewerController.displaySplash-1910"><span class="linenos">1910</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="HDRviewerController.displaySplash-1911"><a href="#HDRviewerController.displaySplash-1911"><span class="linenos">1911</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">currentIMG</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="HDRviewerController.displaySplash-1912"><a href="#HDRviewerController.displaySplash-1912"><span class="linenos">1912</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">displayFile</span><span class="p">(</span><span class="s1">&#39;grey.hdr&#39;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Display default splash screen on HDR monitor.</p>

<p>Shows the default splash screen image, typically used when no
specific image is being displayed or during application startup.
Clears the current image reference.</p>
</div>


                            </div>
                            <div id="HDRviewerController.close" class="classattr">
                                        <input id="HDRviewerController.close-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">close</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="HDRviewerController.close-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#HDRviewerController.close"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="HDRviewerController.close-1914"><a href="#HDRviewerController.close-1914"><span class="linenos">1914</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="HDRviewerController.close-1915"><a href="#HDRviewerController.close-1915"><span class="linenos">1915</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="HDRviewerController.close-1916"><a href="#HDRviewerController.close-1916"><span class="linenos">1916</span></a><span class="sd">        Close HDR viewer and terminate display process.</span>
</span><span id="HDRviewerController.close-1917"><a href="#HDRviewerController.close-1917"><span class="linenos">1917</span></a><span class="sd">        </span>
</span><span id="HDRviewerController.close-1918"><a href="#HDRviewerController.close-1918"><span class="linenos">1918</span></a><span class="sd">        Safely terminates the external HDR viewer process and cleans up</span>
</span><span id="HDRviewerController.close-1919"><a href="#HDRviewerController.close-1919"><span class="linenos">1919</span></a><span class="sd">        resources. Should be called during application shutdown or when</span>
</span><span id="HDRviewerController.close-1920"><a href="#HDRviewerController.close-1920"><span class="linenos">1920</span></a><span class="sd">        HDR display is no longer needed.</span>
</span><span id="HDRviewerController.close-1921"><a href="#HDRviewerController.close-1921"><span class="linenos">1921</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="HDRviewerController.close-1922"><a href="#HDRviewerController.close-1922"><span class="linenos">1922</span></a>        <span class="c1"># check that no current display process already open</span>
</span><span id="HDRviewerController.close-1923"><a href="#HDRviewerController.close-1923"><span class="linenos">1923</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">viewerProcess</span><span class="p">:</span>
</span><span id="HDRviewerController.close-1924"><a href="#HDRviewerController.close-1924"><span class="linenos">1924</span></a>            <span class="c1"># the display HDR process is already running</span>
</span><span id="HDRviewerController.close-1925"><a href="#HDRviewerController.close-1925"><span class="linenos">1925</span></a>            <span class="c1"># close current</span>
</span><span id="HDRviewerController.close-1926"><a href="#HDRviewerController.close-1926"><span class="linenos">1926</span></a>            <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">([</span><span class="s1">&#39;taskkill&#39;</span><span class="p">,</span> <span class="s1">&#39;/F&#39;</span><span class="p">,</span> <span class="s1">&#39;/T&#39;</span><span class="p">,</span> <span class="s1">&#39;/IM&#39;</span><span class="p">,</span> <span class="s2">&quot;HDRImageViewer*&quot;</span><span class="p">],</span><span class="n">capture_output</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="HDRviewerController.close-1927"><a href="#HDRviewerController.close-1927"><span class="linenos">1927</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">viewerProcess</span> <span class="o">=</span> <span class="kc">None</span>
</span></pre></div>


            <div class="docstring"><p>Close HDR viewer and terminate display process.</p>

<p>Safely terminates the external HDR viewer process and cleans up
resources. Should be called during application shutdown or when
HDR display is no longer needed.</p>
</div>


                            </div>
                </section>
                <section id="LchColorSelectorController">
                            <input id="LchColorSelectorController-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">LchColorSelectorController</span>:

                <label class="view-source-button" for="LchColorSelectorController-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LchColorSelectorController"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LchColorSelectorController-1931"><a href="#LchColorSelectorController-1931"><span class="linenos">1931</span></a><span class="k">class</span><span class="w"> </span><span class="nc">LchColorSelectorController</span><span class="p">:</span>
</span><span id="LchColorSelectorController-1932"><a href="#LchColorSelectorController-1932"><span class="linenos">1932</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="LchColorSelectorController-1933"><a href="#LchColorSelectorController-1933"><span class="linenos">1933</span></a><span class="sd">    Controller for LCH color space selective editing interface.</span>
</span><span id="LchColorSelectorController-1934"><a href="#LchColorSelectorController-1934"><span class="linenos">1934</span></a><span class="sd">    </span>
</span><span id="LchColorSelectorController-1935"><a href="#LchColorSelectorController-1935"><span class="linenos">1935</span></a><span class="sd">    This class manages the advanced color editing interface that operates in LCH</span>
</span><span id="LchColorSelectorController-1936"><a href="#LchColorSelectorController-1936"><span class="linenos">1936</span></a><span class="sd">    (Lightness, Chroma, Hue) color space, providing precise control over color</span>
</span><span id="LchColorSelectorController-1937"><a href="#LchColorSelectorController-1937"><span class="linenos">1937</span></a><span class="sd">    selection and modification. It enables photographers to selectively edit</span>
</span><span id="LchColorSelectorController-1938"><a href="#LchColorSelectorController-1938"><span class="linenos">1938</span></a><span class="sd">    specific color ranges with professional-grade precision.</span>
</span><span id="LchColorSelectorController-1939"><a href="#LchColorSelectorController-1939"><span class="linenos">1939</span></a><span class="sd">    </span>
</span><span id="LchColorSelectorController-1940"><a href="#LchColorSelectorController-1940"><span class="linenos">1940</span></a><span class="sd">    The LCH color editor combines color selection tools with editing controls,</span>
</span><span id="LchColorSelectorController-1941"><a href="#LchColorSelectorController-1941"><span class="linenos">1941</span></a><span class="sd">    allowing for targeted adjustments to specific colors while preserving the</span>
</span><span id="LchColorSelectorController-1942"><a href="#LchColorSelectorController-1942"><span class="linenos">1942</span></a><span class="sd">    overall image integrity. This is essential for professional HDR color grading.</span>
</span><span id="LchColorSelectorController-1943"><a href="#LchColorSelectorController-1943"><span class="linenos">1943</span></a><span class="sd">    </span>
</span><span id="LchColorSelectorController-1944"><a href="#LchColorSelectorController-1944"><span class="linenos">1944</span></a><span class="sd">    Attributes:</span>
</span><span id="LchColorSelectorController-1945"><a href="#LchColorSelectorController-1945"><span class="linenos">1945</span></a><span class="sd">        - parent: Parent controller for coordination</span>
</span><span id="LchColorSelectorController-1946"><a href="#LchColorSelectorController-1946"><span class="linenos">1946</span></a><span class="sd">        - model (model.LchColorSelectorModel): LCH color editing data model</span>
</span><span id="LchColorSelectorController-1947"><a href="#LchColorSelectorController-1947"><span class="linenos">1947</span></a><span class="sd">        - view (view.LchColorSelectorView): LCH color editing interface</span>
</span><span id="LchColorSelectorController-1948"><a href="#LchColorSelectorController-1948"><span class="linenos">1948</span></a><span class="sd">        - idName (str): Unique identifier for this color editor instance</span>
</span><span id="LchColorSelectorController-1949"><a href="#LchColorSelectorController-1949"><span class="linenos">1949</span></a><span class="sd">        - callBackActive (bool): Enable/disable callback processing</span>
</span><span id="LchColorSelectorController-1950"><a href="#LchColorSelectorController-1950"><span class="linenos">1950</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="LchColorSelectorController-1951"><a href="#LchColorSelectorController-1951"><span class="linenos">1951</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">idName</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="LchColorSelectorController-1952"><a href="#LchColorSelectorController-1952"><span class="linenos">1952</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="LchColorSelectorController-1953"><a href="#LchColorSelectorController-1953"><span class="linenos">1953</span></a><span class="sd">        Initialize the LCH color selector controller.</span>
</span><span id="LchColorSelectorController-1954"><a href="#LchColorSelectorController-1954"><span class="linenos">1954</span></a><span class="sd">        </span>
</span><span id="LchColorSelectorController-1955"><a href="#LchColorSelectorController-1955"><span class="linenos">1955</span></a><span class="sd">        Args:</span>
</span><span id="LchColorSelectorController-1956"><a href="#LchColorSelectorController-1956"><span class="linenos">1956</span></a><span class="sd">            parent: Parent controller for coordination</span>
</span><span id="LchColorSelectorController-1957"><a href="#LchColorSelectorController-1957"><span class="linenos">1957</span></a><span class="sd">            idName (str, optional): Unique identifier for this editor instance</span>
</span><span id="LchColorSelectorController-1958"><a href="#LchColorSelectorController-1958"><span class="linenos">1958</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LchColorSelectorController-1959"><a href="#LchColorSelectorController-1959"><span class="linenos">1959</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; LchColorSelectorController.__init__(&quot;</span><span class="p">,</span><span class="s2">&quot;) &quot;</span><span class="p">)</span>
</span><span id="LchColorSelectorController-1960"><a href="#LchColorSelectorController-1960"><span class="linenos">1960</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
</span><span id="LchColorSelectorController-1961"><a href="#LchColorSelectorController-1961"><span class="linenos">1961</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span>    <span class="n">model</span><span class="o">.</span><span class="n">LchColorSelectorModel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="LchColorSelectorController-1962"><a href="#LchColorSelectorController-1962"><span class="linenos">1962</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span>     <span class="n">view</span><span class="o">.</span><span class="n">LchColorSelectorView</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="LchColorSelectorController-1963"><a href="#LchColorSelectorController-1963"><span class="linenos">1963</span></a>
</span><span id="LchColorSelectorController-1964"><a href="#LchColorSelectorController-1964"><span class="linenos">1964</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">idName</span> <span class="o">=</span> <span class="n">idName</span>
</span><span id="LchColorSelectorController-1965"><a href="#LchColorSelectorController-1965"><span class="linenos">1965</span></a>
</span><span id="LchColorSelectorController-1966"><a href="#LchColorSelectorController-1966"><span class="linenos">1966</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="LchColorSelectorController-1967"><a href="#LchColorSelectorController-1967"><span class="linenos">1967</span></a>
</span><span id="LchColorSelectorController-1968"><a href="#LchColorSelectorController-1968"><span class="linenos">1968</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">sliderHueChange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vMin</span><span class="p">,</span> <span class="n">vMax</span><span class="p">):</span>
</span><span id="LchColorSelectorController-1969"><a href="#LchColorSelectorController-1969"><span class="linenos">1969</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="LchColorSelectorController-1970"><a href="#LchColorSelectorController-1970"><span class="linenos">1970</span></a><span class="sd">        Handle hue range selection changes.</span>
</span><span id="LchColorSelectorController-1971"><a href="#LchColorSelectorController-1971"><span class="linenos">1971</span></a><span class="sd">        </span>
</span><span id="LchColorSelectorController-1972"><a href="#LchColorSelectorController-1972"><span class="linenos">1972</span></a><span class="sd">        Args:</span>
</span><span id="LchColorSelectorController-1973"><a href="#LchColorSelectorController-1973"><span class="linenos">1973</span></a><span class="sd">            vMin (float): Minimum hue value for selection (0-360 degrees)</span>
</span><span id="LchColorSelectorController-1974"><a href="#LchColorSelectorController-1974"><span class="linenos">1974</span></a><span class="sd">            vMax (float): Maximum hue value for selection (0-360 degrees)</span>
</span><span id="LchColorSelectorController-1975"><a href="#LchColorSelectorController-1975"><span class="linenos">1975</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LchColorSelectorController-1976"><a href="#LchColorSelectorController-1976"><span class="linenos">1976</span></a>        <span class="n">values</span>  <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setHueSelection</span><span class="p">(</span><span class="n">vMin</span><span class="p">,</span><span class="n">vMax</span><span class="p">)</span>
</span><span id="LchColorSelectorController-1977"><a href="#LchColorSelectorController-1977"><span class="linenos">1977</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">changeColorEditor</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">idName</span><span class="p">)</span>
</span><span id="LchColorSelectorController-1978"><a href="#LchColorSelectorController-1978"><span class="linenos">1978</span></a>
</span><span id="LchColorSelectorController-1979"><a href="#LchColorSelectorController-1979"><span class="linenos">1979</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">sliderChromaChange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vMin</span><span class="p">,</span> <span class="n">vMax</span><span class="p">):</span>
</span><span id="LchColorSelectorController-1980"><a href="#LchColorSelectorController-1980"><span class="linenos">1980</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="LchColorSelectorController-1981"><a href="#LchColorSelectorController-1981"><span class="linenos">1981</span></a><span class="sd">        Handle chroma range selection changes.</span>
</span><span id="LchColorSelectorController-1982"><a href="#LchColorSelectorController-1982"><span class="linenos">1982</span></a><span class="sd">        </span>
</span><span id="LchColorSelectorController-1983"><a href="#LchColorSelectorController-1983"><span class="linenos">1983</span></a><span class="sd">        Args:</span>
</span><span id="LchColorSelectorController-1984"><a href="#LchColorSelectorController-1984"><span class="linenos">1984</span></a><span class="sd">            vMin (float): Minimum chroma value for selection (0-100)</span>
</span><span id="LchColorSelectorController-1985"><a href="#LchColorSelectorController-1985"><span class="linenos">1985</span></a><span class="sd">            vMax (float): Maximum chroma value for selection (0-100)</span>
</span><span id="LchColorSelectorController-1986"><a href="#LchColorSelectorController-1986"><span class="linenos">1986</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LchColorSelectorController-1987"><a href="#LchColorSelectorController-1987"><span class="linenos">1987</span></a>        <span class="n">values</span>  <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setChromaSelection</span><span class="p">(</span><span class="n">vMin</span><span class="p">,</span><span class="n">vMax</span><span class="p">)</span>
</span><span id="LchColorSelectorController-1988"><a href="#LchColorSelectorController-1988"><span class="linenos">1988</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">changeColorEditor</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">idName</span><span class="p">)</span>
</span><span id="LchColorSelectorController-1989"><a href="#LchColorSelectorController-1989"><span class="linenos">1989</span></a>
</span><span id="LchColorSelectorController-1990"><a href="#LchColorSelectorController-1990"><span class="linenos">1990</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">sliderLightnessChange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vMin</span><span class="p">,</span> <span class="n">vMax</span><span class="p">):</span>
</span><span id="LchColorSelectorController-1991"><a href="#LchColorSelectorController-1991"><span class="linenos">1991</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="LchColorSelectorController-1992"><a href="#LchColorSelectorController-1992"><span class="linenos">1992</span></a><span class="sd">        Handle lightness range selection changes.</span>
</span><span id="LchColorSelectorController-1993"><a href="#LchColorSelectorController-1993"><span class="linenos">1993</span></a><span class="sd">        </span>
</span><span id="LchColorSelectorController-1994"><a href="#LchColorSelectorController-1994"><span class="linenos">1994</span></a><span class="sd">        Args:</span>
</span><span id="LchColorSelectorController-1995"><a href="#LchColorSelectorController-1995"><span class="linenos">1995</span></a><span class="sd">            vMin (float): Minimum lightness value for selection (0-100)</span>
</span><span id="LchColorSelectorController-1996"><a href="#LchColorSelectorController-1996"><span class="linenos">1996</span></a><span class="sd">            vMax (float): Maximum lightness value for selection (0-100)</span>
</span><span id="LchColorSelectorController-1997"><a href="#LchColorSelectorController-1997"><span class="linenos">1997</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LchColorSelectorController-1998"><a href="#LchColorSelectorController-1998"><span class="linenos">1998</span></a>        <span class="n">values</span>  <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setLightnessSelection</span><span class="p">(</span><span class="n">vMin</span><span class="p">,</span><span class="n">vMax</span><span class="p">)</span>
</span><span id="LchColorSelectorController-1999"><a href="#LchColorSelectorController-1999"><span class="linenos">1999</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">changeColorEditor</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">idName</span><span class="p">)</span>
</span><span id="LchColorSelectorController-2000"><a href="#LchColorSelectorController-2000"><span class="linenos">2000</span></a>
</span><span id="LchColorSelectorController-2001"><a href="#LchColorSelectorController-2001"><span class="linenos">2001</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">sliderExposureChange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ev</span><span class="p">):</span>
</span><span id="LchColorSelectorController-2002"><a href="#LchColorSelectorController-2002"><span class="linenos">2002</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="LchColorSelectorController-2003"><a href="#LchColorSelectorController-2003"><span class="linenos">2003</span></a><span class="sd">        Handle exposure adjustment for selected colors.</span>
</span><span id="LchColorSelectorController-2004"><a href="#LchColorSelectorController-2004"><span class="linenos">2004</span></a><span class="sd">        </span>
</span><span id="LchColorSelectorController-2005"><a href="#LchColorSelectorController-2005"><span class="linenos">2005</span></a><span class="sd">        Args:</span>
</span><span id="LchColorSelectorController-2006"><a href="#LchColorSelectorController-2006"><span class="linenos">2006</span></a><span class="sd">            ev (float): Exposure adjustment in EV stops for selected color range</span>
</span><span id="LchColorSelectorController-2007"><a href="#LchColorSelectorController-2007"><span class="linenos">2007</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LchColorSelectorController-2008"><a href="#LchColorSelectorController-2008"><span class="linenos">2008</span></a>        <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setExposure</span><span class="p">(</span><span class="n">ev</span><span class="p">)</span>
</span><span id="LchColorSelectorController-2009"><a href="#LchColorSelectorController-2009"><span class="linenos">2009</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">changeColorEditor</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">idName</span><span class="p">)</span>
</span><span id="LchColorSelectorController-2010"><a href="#LchColorSelectorController-2010"><span class="linenos">2010</span></a>
</span><span id="LchColorSelectorController-2011"><a href="#LchColorSelectorController-2011"><span class="linenos">2011</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">sliderSaturationChange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sat</span><span class="p">):</span>
</span><span id="LchColorSelectorController-2012"><a href="#LchColorSelectorController-2012"><span class="linenos">2012</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="LchColorSelectorController-2013"><a href="#LchColorSelectorController-2013"><span class="linenos">2013</span></a><span class="sd">        Handle saturation adjustment for selected colors.</span>
</span><span id="LchColorSelectorController-2014"><a href="#LchColorSelectorController-2014"><span class="linenos">2014</span></a><span class="sd">        </span>
</span><span id="LchColorSelectorController-2015"><a href="#LchColorSelectorController-2015"><span class="linenos">2015</span></a><span class="sd">        Args:</span>
</span><span id="LchColorSelectorController-2016"><a href="#LchColorSelectorController-2016"><span class="linenos">2016</span></a><span class="sd">            sat (float): Saturation adjustment for selected color range</span>
</span><span id="LchColorSelectorController-2017"><a href="#LchColorSelectorController-2017"><span class="linenos">2017</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LchColorSelectorController-2018"><a href="#LchColorSelectorController-2018"><span class="linenos">2018</span></a>        <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setSaturation</span><span class="p">(</span><span class="n">sat</span><span class="p">)</span>
</span><span id="LchColorSelectorController-2019"><a href="#LchColorSelectorController-2019"><span class="linenos">2019</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">changeColorEditor</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">idName</span><span class="p">)</span>
</span><span id="LchColorSelectorController-2020"><a href="#LchColorSelectorController-2020"><span class="linenos">2020</span></a>
</span><span id="LchColorSelectorController-2021"><a href="#LchColorSelectorController-2021"><span class="linenos">2021</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">sliderContrastChange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cc</span><span class="p">):</span>
</span><span id="LchColorSelectorController-2022"><a href="#LchColorSelectorController-2022"><span class="linenos">2022</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="LchColorSelectorController-2023"><a href="#LchColorSelectorController-2023"><span class="linenos">2023</span></a><span class="sd">        Handle contrast adjustment for selected colors.</span>
</span><span id="LchColorSelectorController-2024"><a href="#LchColorSelectorController-2024"><span class="linenos">2024</span></a><span class="sd">        </span>
</span><span id="LchColorSelectorController-2025"><a href="#LchColorSelectorController-2025"><span class="linenos">2025</span></a><span class="sd">        Args:</span>
</span><span id="LchColorSelectorController-2026"><a href="#LchColorSelectorController-2026"><span class="linenos">2026</span></a><span class="sd">            cc (float): Contrast adjustment for selected color range</span>
</span><span id="LchColorSelectorController-2027"><a href="#LchColorSelectorController-2027"><span class="linenos">2027</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LchColorSelectorController-2028"><a href="#LchColorSelectorController-2028"><span class="linenos">2028</span></a>        <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setContrast</span><span class="p">(</span><span class="n">cc</span><span class="p">)</span>
</span><span id="LchColorSelectorController-2029"><a href="#LchColorSelectorController-2029"><span class="linenos">2029</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">changeColorEditor</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">idName</span><span class="p">)</span>
</span><span id="LchColorSelectorController-2030"><a href="#LchColorSelectorController-2030"><span class="linenos">2030</span></a>
</span><span id="LchColorSelectorController-2031"><a href="#LchColorSelectorController-2031"><span class="linenos">2031</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">sliderHueShiftChange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hs</span><span class="p">):</span>
</span><span id="LchColorSelectorController-2032"><a href="#LchColorSelectorController-2032"><span class="linenos">2032</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="LchColorSelectorController-2033"><a href="#LchColorSelectorController-2033"><span class="linenos">2033</span></a><span class="sd">        Handle hue shift for selected colors.</span>
</span><span id="LchColorSelectorController-2034"><a href="#LchColorSelectorController-2034"><span class="linenos">2034</span></a><span class="sd">        </span>
</span><span id="LchColorSelectorController-2035"><a href="#LchColorSelectorController-2035"><span class="linenos">2035</span></a><span class="sd">        Args:</span>
</span><span id="LchColorSelectorController-2036"><a href="#LchColorSelectorController-2036"><span class="linenos">2036</span></a><span class="sd">            hs (float): Hue shift amount in degrees for selected color range</span>
</span><span id="LchColorSelectorController-2037"><a href="#LchColorSelectorController-2037"><span class="linenos">2037</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LchColorSelectorController-2038"><a href="#LchColorSelectorController-2038"><span class="linenos">2038</span></a>        <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setHueShift</span><span class="p">(</span><span class="n">hs</span><span class="p">)</span>
</span><span id="LchColorSelectorController-2039"><a href="#LchColorSelectorController-2039"><span class="linenos">2039</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">changeColorEditor</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">idName</span><span class="p">)</span>
</span><span id="LchColorSelectorController-2040"><a href="#LchColorSelectorController-2040"><span class="linenos">2040</span></a>
</span><span id="LchColorSelectorController-2041"><a href="#LchColorSelectorController-2041"><span class="linenos">2041</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">checkboxMaskChange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">value</span><span class="p">):</span> 
</span><span id="LchColorSelectorController-2042"><a href="#LchColorSelectorController-2042"><span class="linenos">2042</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="LchColorSelectorController-2043"><a href="#LchColorSelectorController-2043"><span class="linenos">2043</span></a><span class="sd">        Toggle mask visualization for selected colors.</span>
</span><span id="LchColorSelectorController-2044"><a href="#LchColorSelectorController-2044"><span class="linenos">2044</span></a><span class="sd">        </span>
</span><span id="LchColorSelectorController-2045"><a href="#LchColorSelectorController-2045"><span class="linenos">2045</span></a><span class="sd">        Args:</span>
</span><span id="LchColorSelectorController-2046"><a href="#LchColorSelectorController-2046"><span class="linenos">2046</span></a><span class="sd">            value (bool): Enable (True) or disable (False) mask visualization</span>
</span><span id="LchColorSelectorController-2047"><a href="#LchColorSelectorController-2047"><span class="linenos">2047</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LchColorSelectorController-2048"><a href="#LchColorSelectorController-2048"><span class="linenos">2048</span></a>        <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setMask</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span><span id="LchColorSelectorController-2049"><a href="#LchColorSelectorController-2049"><span class="linenos">2049</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">changeColorEditor</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">idName</span><span class="p">)</span>
</span><span id="LchColorSelectorController-2050"><a href="#LchColorSelectorController-2050"><span class="linenos">2050</span></a>
</span><span id="LchColorSelectorController-2051"><a href="#LchColorSelectorController-2051"><span class="linenos">2051</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setValues</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">,</span> <span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="LchColorSelectorController-2052"><a href="#LchColorSelectorController-2052"><span class="linenos">2052</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="LchColorSelectorController-2053"><a href="#LchColorSelectorController-2053"><span class="linenos">2053</span></a><span class="sd">        Set all color editing parameters programmatically.</span>
</span><span id="LchColorSelectorController-2054"><a href="#LchColorSelectorController-2054"><span class="linenos">2054</span></a><span class="sd">        </span>
</span><span id="LchColorSelectorController-2055"><a href="#LchColorSelectorController-2055"><span class="linenos">2055</span></a><span class="sd">        Updates all selection and editing controls simultaneously, typically</span>
</span><span id="LchColorSelectorController-2056"><a href="#LchColorSelectorController-2056"><span class="linenos">2056</span></a><span class="sd">        used when loading saved color editing presets or initializing the</span>
</span><span id="LchColorSelectorController-2057"><a href="#LchColorSelectorController-2057"><span class="linenos">2057</span></a><span class="sd">        interface with specific values.</span>
</span><span id="LchColorSelectorController-2058"><a href="#LchColorSelectorController-2058"><span class="linenos">2058</span></a><span class="sd">        </span>
</span><span id="LchColorSelectorController-2059"><a href="#LchColorSelectorController-2059"><span class="linenos">2059</span></a><span class="sd">        Args:</span>
</span><span id="LchColorSelectorController-2060"><a href="#LchColorSelectorController-2060"><span class="linenos">2060</span></a><span class="sd">            values (dict): Complete color editing configuration including</span>
</span><span id="LchColorSelectorController-2061"><a href="#LchColorSelectorController-2061"><span class="linenos">2061</span></a><span class="sd">                          selection ranges and editing parameters</span>
</span><span id="LchColorSelectorController-2062"><a href="#LchColorSelectorController-2062"><span class="linenos">2062</span></a><span class="sd">            callBackActive (bool, optional): Whether to trigger callbacks (default: False)</span>
</span><span id="LchColorSelectorController-2063"><a href="#LchColorSelectorController-2063"><span class="linenos">2063</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LchColorSelectorController-2064"><a href="#LchColorSelectorController-2064"><span class="linenos">2064</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; LchColorSelectorController.setValue(&quot;</span><span class="p">,</span><span class="n">values</span><span class="p">,</span><span class="s2">&quot;) &quot;</span><span class="p">)</span>
</span><span id="LchColorSelectorController-2065"><a href="#LchColorSelectorController-2065"><span class="linenos">2065</span></a>
</span><span id="LchColorSelectorController-2066"><a href="#LchColorSelectorController-2066"><span class="linenos">2066</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="n">callBackActive</span>
</span><span id="LchColorSelectorController-2067"><a href="#LchColorSelectorController-2067"><span class="linenos">2067</span></a>        <span class="c1"># slider hue selection</span>
</span><span id="LchColorSelectorController-2068"><a href="#LchColorSelectorController-2068"><span class="linenos">2068</span></a>        <span class="n">v</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="s1">&#39;selection&#39;</span><span class="p">][</span><span class="s1">&#39;hue&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="s1">&#39;hue&#39;</span> <span class="ow">in</span> <span class="n">values</span><span class="p">[</span><span class="s1">&#39;selection&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">else</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">360</span><span class="p">)</span>
</span><span id="LchColorSelectorController-2069"><a href="#LchColorSelectorController-2069"><span class="linenos">2069</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderHueMin</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
</span><span id="LchColorSelectorController-2070"><a href="#LchColorSelectorController-2070"><span class="linenos">2070</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderHueMax</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="LchColorSelectorController-2071"><a href="#LchColorSelectorController-2071"><span class="linenos">2071</span></a>
</span><span id="LchColorSelectorController-2072"><a href="#LchColorSelectorController-2072"><span class="linenos">2072</span></a>        <span class="c1"># slider chroma selection</span>
</span><span id="LchColorSelectorController-2073"><a href="#LchColorSelectorController-2073"><span class="linenos">2073</span></a>        <span class="n">v</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="s1">&#39;selection&#39;</span><span class="p">][</span><span class="s1">&#39;chroma&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="s1">&#39;chroma&#39;</span> <span class="ow">in</span> <span class="n">values</span><span class="p">[</span><span class="s1">&#39;selection&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">else</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
</span><span id="LchColorSelectorController-2074"><a href="#LchColorSelectorController-2074"><span class="linenos">2074</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderChromaMin</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
</span><span id="LchColorSelectorController-2075"><a href="#LchColorSelectorController-2075"><span class="linenos">2075</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderChromaMax</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="LchColorSelectorController-2076"><a href="#LchColorSelectorController-2076"><span class="linenos">2076</span></a>
</span><span id="LchColorSelectorController-2077"><a href="#LchColorSelectorController-2077"><span class="linenos">2077</span></a>        <span class="c1"># slider lightness</span>
</span><span id="LchColorSelectorController-2078"><a href="#LchColorSelectorController-2078"><span class="linenos">2078</span></a>        <span class="n">v</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="s1">&#39;selection&#39;</span><span class="p">][</span><span class="s1">&#39;lightness&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="s1">&#39;lightness&#39;</span> <span class="ow">in</span> <span class="n">values</span><span class="p">[</span><span class="s1">&#39;selection&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">else</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
</span><span id="LchColorSelectorController-2079"><a href="#LchColorSelectorController-2079"><span class="linenos">2079</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderLightMin</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="mi">3</span><span class="p">))</span>
</span><span id="LchColorSelectorController-2080"><a href="#LchColorSelectorController-2080"><span class="linenos">2080</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderLightMax</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="mi">3</span><span class="p">))</span>
</span><span id="LchColorSelectorController-2081"><a href="#LchColorSelectorController-2081"><span class="linenos">2081</span></a>
</span><span id="LchColorSelectorController-2082"><a href="#LchColorSelectorController-2082"><span class="linenos">2082</span></a>        <span class="c1"># hue shift editor</span>
</span><span id="LchColorSelectorController-2083"><a href="#LchColorSelectorController-2083"><span class="linenos">2083</span></a>        <span class="n">v</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="s1">&#39;edit&#39;</span><span class="p">][</span><span class="s1">&#39;hue&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="s1">&#39;hue&#39;</span> <span class="ow">in</span> <span class="n">values</span><span class="p">[</span><span class="s1">&#39;edit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">else</span> <span class="mi">0</span>
</span><span id="LchColorSelectorController-2084"><a href="#LchColorSelectorController-2084"><span class="linenos">2084</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderHueShift</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">v</span><span class="p">))</span>
</span><span id="LchColorSelectorController-2085"><a href="#LchColorSelectorController-2085"><span class="linenos">2085</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">valueHueShift</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">))</span> 
</span><span id="LchColorSelectorController-2086"><a href="#LchColorSelectorController-2086"><span class="linenos">2086</span></a>
</span><span id="LchColorSelectorController-2087"><a href="#LchColorSelectorController-2087"><span class="linenos">2087</span></a>        <span class="c1"># exposure editor</span>
</span><span id="LchColorSelectorController-2088"><a href="#LchColorSelectorController-2088"><span class="linenos">2088</span></a>        <span class="n">v</span> <span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="s1">&#39;edit&#39;</span><span class="p">][</span><span class="s1">&#39;exposure&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="s1">&#39;exposure&#39;</span> <span class="ow">in</span> <span class="n">values</span><span class="p">[</span><span class="s1">&#39;edit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">else</span> <span class="mi">0</span>
</span><span id="LchColorSelectorController-2089"><a href="#LchColorSelectorController-2089"><span class="linenos">2089</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderExposure</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">v</span><span class="o">*</span><span class="mi">30</span><span class="p">))</span>
</span><span id="LchColorSelectorController-2090"><a href="#LchColorSelectorController-2090"><span class="linenos">2090</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">valueExposure</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">))</span> 
</span><span id="LchColorSelectorController-2091"><a href="#LchColorSelectorController-2091"><span class="linenos">2091</span></a>
</span><span id="LchColorSelectorController-2092"><a href="#LchColorSelectorController-2092"><span class="linenos">2092</span></a>        <span class="c1"># contrast editor</span>
</span><span id="LchColorSelectorController-2093"><a href="#LchColorSelectorController-2093"><span class="linenos">2093</span></a>        <span class="n">v</span> <span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="s1">&#39;edit&#39;</span><span class="p">][</span><span class="s1">&#39;contrast&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="s1">&#39;contrast&#39;</span> <span class="ow">in</span> <span class="n">values</span><span class="p">[</span><span class="s1">&#39;edit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">else</span> <span class="mi">0</span>
</span><span id="LchColorSelectorController-2094"><a href="#LchColorSelectorController-2094"><span class="linenos">2094</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderContrast</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">v</span><span class="p">))</span>
</span><span id="LchColorSelectorController-2095"><a href="#LchColorSelectorController-2095"><span class="linenos">2095</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">valueContrast</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">))</span>  
</span><span id="LchColorSelectorController-2096"><a href="#LchColorSelectorController-2096"><span class="linenos">2096</span></a>
</span><span id="LchColorSelectorController-2097"><a href="#LchColorSelectorController-2097"><span class="linenos">2097</span></a>        <span class="c1"># saturation editor</span>
</span><span id="LchColorSelectorController-2098"><a href="#LchColorSelectorController-2098"><span class="linenos">2098</span></a>        <span class="n">v</span> <span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="s1">&#39;edit&#39;</span><span class="p">][</span><span class="s1">&#39;saturation&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="s1">&#39;saturation&#39;</span> <span class="ow">in</span> <span class="n">values</span><span class="p">[</span><span class="s1">&#39;edit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">else</span> <span class="mi">0</span>
</span><span id="LchColorSelectorController-2099"><a href="#LchColorSelectorController-2099"><span class="linenos">2099</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderSaturation</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">v</span><span class="p">))</span>
</span><span id="LchColorSelectorController-2100"><a href="#LchColorSelectorController-2100"><span class="linenos">2100</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">valueSaturation</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">))</span>  
</span><span id="LchColorSelectorController-2101"><a href="#LchColorSelectorController-2101"><span class="linenos">2101</span></a>
</span><span id="LchColorSelectorController-2102"><a href="#LchColorSelectorController-2102"><span class="linenos">2102</span></a>        <span class="c1"># mask</span>
</span><span id="LchColorSelectorController-2103"><a href="#LchColorSelectorController-2103"><span class="linenos">2103</span></a>        <span class="n">v</span> <span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="s1">&#39;mask&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="s1">&#39;mask&#39;</span> <span class="ow">in</span> <span class="n">values</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">else</span> <span class="kc">False</span>
</span><span id="LchColorSelectorController-2104"><a href="#LchColorSelectorController-2104"><span class="linenos">2104</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">checkboxMask</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="s1">&#39;mask&#39;</span><span class="p">])</span>             
</span><span id="LchColorSelectorController-2105"><a href="#LchColorSelectorController-2105"><span class="linenos">2105</span></a>
</span><span id="LchColorSelectorController-2106"><a href="#LchColorSelectorController-2106"><span class="linenos">2106</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setValues</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
</span><span id="LchColorSelectorController-2107"><a href="#LchColorSelectorController-2107"><span class="linenos">2107</span></a>
</span><span id="LchColorSelectorController-2108"><a href="#LchColorSelectorController-2108"><span class="linenos">2108</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="LchColorSelectorController-2109"><a href="#LchColorSelectorController-2109"><span class="linenos">2109</span></a>
</span><span id="LchColorSelectorController-2110"><a href="#LchColorSelectorController-2110"><span class="linenos">2110</span></a>    <span class="c1"># -----</span>
</span><span id="LchColorSelectorController-2111"><a href="#LchColorSelectorController-2111"><span class="linenos">2111</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">resetSelection</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
</span><span id="LchColorSelectorController-2112"><a href="#LchColorSelectorController-2112"><span class="linenos">2112</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="LchColorSelectorController-2113"><a href="#LchColorSelectorController-2113"><span class="linenos">2113</span></a><span class="sd">        Reset color selection parameters to defaults.</span>
</span><span id="LchColorSelectorController-2114"><a href="#LchColorSelectorController-2114"><span class="linenos">2114</span></a><span class="sd">        </span>
</span><span id="LchColorSelectorController-2115"><a href="#LchColorSelectorController-2115"><span class="linenos">2115</span></a><span class="sd">        Restores the color selection range (hue, chroma, lightness) to</span>
</span><span id="LchColorSelectorController-2116"><a href="#LchColorSelectorController-2116"><span class="linenos">2116</span></a><span class="sd">        default values while preserving editing parameters. Useful for</span>
</span><span id="LchColorSelectorController-2117"><a href="#LchColorSelectorController-2117"><span class="linenos">2117</span></a><span class="sd">        starting fresh color selections.</span>
</span><span id="LchColorSelectorController-2118"><a href="#LchColorSelectorController-2118"><span class="linenos">2118</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LchColorSelectorController-2119"><a href="#LchColorSelectorController-2119"><span class="linenos">2119</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; LchColorSelectorController.resetSelection(&quot;</span><span class="p">,</span><span class="s2">&quot;) &quot;</span><span class="p">)</span>
</span><span id="LchColorSelectorController-2120"><a href="#LchColorSelectorController-2120"><span class="linenos">2120</span></a>
</span><span id="LchColorSelectorController-2121"><a href="#LchColorSelectorController-2121"><span class="linenos">2121</span></a>        <span class="n">default</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">default</span><span class="p">)</span>
</span><span id="LchColorSelectorController-2122"><a href="#LchColorSelectorController-2122"><span class="linenos">2122</span></a>        <span class="n">current</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getValues</span><span class="p">())</span>
</span><span id="LchColorSelectorController-2123"><a href="#LchColorSelectorController-2123"><span class="linenos">2123</span></a>        
</span><span id="LchColorSelectorController-2124"><a href="#LchColorSelectorController-2124"><span class="linenos">2124</span></a>        <span class="n">current</span><span class="p">[</span><span class="s1">&#39;selection&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">default</span><span class="p">[</span><span class="s1">&#39;selection&#39;</span><span class="p">]</span>
</span><span id="LchColorSelectorController-2125"><a href="#LchColorSelectorController-2125"><span class="linenos">2125</span></a>
</span><span id="LchColorSelectorController-2126"><a href="#LchColorSelectorController-2126"><span class="linenos">2126</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">setValues</span><span class="p">(</span><span class="n">current</span><span class="p">,</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
</span><span id="LchColorSelectorController-2127"><a href="#LchColorSelectorController-2127"><span class="linenos">2127</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="LchColorSelectorController-2128"><a href="#LchColorSelectorController-2128"><span class="linenos">2128</span></a>
</span><span id="LchColorSelectorController-2129"><a href="#LchColorSelectorController-2129"><span class="linenos">2129</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">resetEdit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
</span><span id="LchColorSelectorController-2130"><a href="#LchColorSelectorController-2130"><span class="linenos">2130</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="LchColorSelectorController-2131"><a href="#LchColorSelectorController-2131"><span class="linenos">2131</span></a><span class="sd">        Reset editing parameters to defaults.</span>
</span><span id="LchColorSelectorController-2132"><a href="#LchColorSelectorController-2132"><span class="linenos">2132</span></a><span class="sd">        </span>
</span><span id="LchColorSelectorController-2133"><a href="#LchColorSelectorController-2133"><span class="linenos">2133</span></a><span class="sd">        Restores all editing adjustments (exposure, saturation, contrast,</span>
</span><span id="LchColorSelectorController-2134"><a href="#LchColorSelectorController-2134"><span class="linenos">2134</span></a><span class="sd">        hue shift) to default values while preserving color selection.</span>
</span><span id="LchColorSelectorController-2135"><a href="#LchColorSelectorController-2135"><span class="linenos">2135</span></a><span class="sd">        Useful for clearing applied adjustments.</span>
</span><span id="LchColorSelectorController-2136"><a href="#LchColorSelectorController-2136"><span class="linenos">2136</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LchColorSelectorController-2137"><a href="#LchColorSelectorController-2137"><span class="linenos">2137</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; LchColorSelectorController.resetEdit(&quot;</span><span class="p">,</span><span class="s2">&quot;) &quot;</span><span class="p">)</span>
</span><span id="LchColorSelectorController-2138"><a href="#LchColorSelectorController-2138"><span class="linenos">2138</span></a>
</span><span id="LchColorSelectorController-2139"><a href="#LchColorSelectorController-2139"><span class="linenos">2139</span></a>        <span class="n">default</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">default</span><span class="p">)</span>
</span><span id="LchColorSelectorController-2140"><a href="#LchColorSelectorController-2140"><span class="linenos">2140</span></a>        <span class="n">current</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getValues</span><span class="p">())</span>
</span><span id="LchColorSelectorController-2141"><a href="#LchColorSelectorController-2141"><span class="linenos">2141</span></a>        
</span><span id="LchColorSelectorController-2142"><a href="#LchColorSelectorController-2142"><span class="linenos">2142</span></a>        <span class="n">current</span><span class="p">[</span><span class="s1">&#39;edit&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">default</span><span class="p">[</span><span class="s1">&#39;edit&#39;</span><span class="p">]</span>
</span><span id="LchColorSelectorController-2143"><a href="#LchColorSelectorController-2143"><span class="linenos">2143</span></a>
</span><span id="LchColorSelectorController-2144"><a href="#LchColorSelectorController-2144"><span class="linenos">2144</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">setValues</span><span class="p">(</span><span class="n">current</span><span class="p">,</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
</span><span id="LchColorSelectorController-2145"><a href="#LchColorSelectorController-2145"><span class="linenos">2145</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">True</span>
</span></pre></div>


            <div class="docstring"><p>Controller for LCH color space selective editing interface.</p>

<p>This class manages the advanced color editing interface that operates in LCH
(Lightness, Chroma, Hue) color space, providing precise control over color
selection and modification. It enables photographers to selectively edit
specific color ranges with professional-grade precision.</p>

<p>The LCH color editor combines color selection tools with editing controls,
allowing for targeted adjustments to specific colors while preserving the
overall image integrity. This is essential for professional HDR color grading.</p>

<p>Attributes:
    - parent: Parent controller for coordination
    - model (model.LchColorSelectorModel): LCH color editing data model
    - view (view.LchColorSelectorView): LCH color editing interface
    - idName (str): Unique identifier for this color editor instance
    - callBackActive (bool): Enable/disable callback processing</p>
</div>


                            <div id="LchColorSelectorController.__init__" class="classattr">
                                        <input id="LchColorSelectorController.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">LchColorSelectorController</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">parent</span>, </span><span class="param"><span class="n">idName</span><span class="o">=</span><span class="kc">None</span></span>)</span>

                <label class="view-source-button" for="LchColorSelectorController.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LchColorSelectorController.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LchColorSelectorController.__init__-1951"><a href="#LchColorSelectorController.__init__-1951"><span class="linenos">1951</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">idName</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="LchColorSelectorController.__init__-1952"><a href="#LchColorSelectorController.__init__-1952"><span class="linenos">1952</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="LchColorSelectorController.__init__-1953"><a href="#LchColorSelectorController.__init__-1953"><span class="linenos">1953</span></a><span class="sd">        Initialize the LCH color selector controller.</span>
</span><span id="LchColorSelectorController.__init__-1954"><a href="#LchColorSelectorController.__init__-1954"><span class="linenos">1954</span></a><span class="sd">        </span>
</span><span id="LchColorSelectorController.__init__-1955"><a href="#LchColorSelectorController.__init__-1955"><span class="linenos">1955</span></a><span class="sd">        Args:</span>
</span><span id="LchColorSelectorController.__init__-1956"><a href="#LchColorSelectorController.__init__-1956"><span class="linenos">1956</span></a><span class="sd">            parent: Parent controller for coordination</span>
</span><span id="LchColorSelectorController.__init__-1957"><a href="#LchColorSelectorController.__init__-1957"><span class="linenos">1957</span></a><span class="sd">            idName (str, optional): Unique identifier for this editor instance</span>
</span><span id="LchColorSelectorController.__init__-1958"><a href="#LchColorSelectorController.__init__-1958"><span class="linenos">1958</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LchColorSelectorController.__init__-1959"><a href="#LchColorSelectorController.__init__-1959"><span class="linenos">1959</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; LchColorSelectorController.__init__(&quot;</span><span class="p">,</span><span class="s2">&quot;) &quot;</span><span class="p">)</span>
</span><span id="LchColorSelectorController.__init__-1960"><a href="#LchColorSelectorController.__init__-1960"><span class="linenos">1960</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
</span><span id="LchColorSelectorController.__init__-1961"><a href="#LchColorSelectorController.__init__-1961"><span class="linenos">1961</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span>    <span class="n">model</span><span class="o">.</span><span class="n">LchColorSelectorModel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="LchColorSelectorController.__init__-1962"><a href="#LchColorSelectorController.__init__-1962"><span class="linenos">1962</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span>     <span class="n">view</span><span class="o">.</span><span class="n">LchColorSelectorView</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="LchColorSelectorController.__init__-1963"><a href="#LchColorSelectorController.__init__-1963"><span class="linenos">1963</span></a>
</span><span id="LchColorSelectorController.__init__-1964"><a href="#LchColorSelectorController.__init__-1964"><span class="linenos">1964</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">idName</span> <span class="o">=</span> <span class="n">idName</span>
</span><span id="LchColorSelectorController.__init__-1965"><a href="#LchColorSelectorController.__init__-1965"><span class="linenos">1965</span></a>
</span><span id="LchColorSelectorController.__init__-1966"><a href="#LchColorSelectorController.__init__-1966"><span class="linenos">1966</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">True</span>
</span></pre></div>


            <div class="docstring"><p>Initialize the LCH color selector controller.</p>

<p>Args:
    parent: Parent controller for coordination
    idName (str, optional): Unique identifier for this editor instance</p>
</div>


                            </div>
                            <div id="LchColorSelectorController.parent" class="classattr">
                                <div class="attr variable">
            <span class="name">parent</span>

        
    </div>
    <a class="headerlink" href="#LchColorSelectorController.parent"></a>
    
    

                            </div>
                            <div id="LchColorSelectorController.model" class="classattr">
                                <div class="attr variable">
            <span class="name">model</span>

        
    </div>
    <a class="headerlink" href="#LchColorSelectorController.model"></a>
    
    

                            </div>
                            <div id="LchColorSelectorController.view" class="classattr">
                                <div class="attr variable">
            <span class="name">view</span>

        
    </div>
    <a class="headerlink" href="#LchColorSelectorController.view"></a>
    
    

                            </div>
                            <div id="LchColorSelectorController.idName" class="classattr">
                                <div class="attr variable">
            <span class="name">idName</span>

        
    </div>
    <a class="headerlink" href="#LchColorSelectorController.idName"></a>
    
    

                            </div>
                            <div id="LchColorSelectorController.callBackActive" class="classattr">
                                <div class="attr variable">
            <span class="name">callBackActive</span>

        
    </div>
    <a class="headerlink" href="#LchColorSelectorController.callBackActive"></a>
    
    

                            </div>
                            <div id="LchColorSelectorController.sliderHueChange" class="classattr">
                                        <input id="LchColorSelectorController.sliderHueChange-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">sliderHueChange</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">vMin</span>, </span><span class="param"><span class="n">vMax</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="LchColorSelectorController.sliderHueChange-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LchColorSelectorController.sliderHueChange"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LchColorSelectorController.sliderHueChange-1968"><a href="#LchColorSelectorController.sliderHueChange-1968"><span class="linenos">1968</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">sliderHueChange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vMin</span><span class="p">,</span> <span class="n">vMax</span><span class="p">):</span>
</span><span id="LchColorSelectorController.sliderHueChange-1969"><a href="#LchColorSelectorController.sliderHueChange-1969"><span class="linenos">1969</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="LchColorSelectorController.sliderHueChange-1970"><a href="#LchColorSelectorController.sliderHueChange-1970"><span class="linenos">1970</span></a><span class="sd">        Handle hue range selection changes.</span>
</span><span id="LchColorSelectorController.sliderHueChange-1971"><a href="#LchColorSelectorController.sliderHueChange-1971"><span class="linenos">1971</span></a><span class="sd">        </span>
</span><span id="LchColorSelectorController.sliderHueChange-1972"><a href="#LchColorSelectorController.sliderHueChange-1972"><span class="linenos">1972</span></a><span class="sd">        Args:</span>
</span><span id="LchColorSelectorController.sliderHueChange-1973"><a href="#LchColorSelectorController.sliderHueChange-1973"><span class="linenos">1973</span></a><span class="sd">            vMin (float): Minimum hue value for selection (0-360 degrees)</span>
</span><span id="LchColorSelectorController.sliderHueChange-1974"><a href="#LchColorSelectorController.sliderHueChange-1974"><span class="linenos">1974</span></a><span class="sd">            vMax (float): Maximum hue value for selection (0-360 degrees)</span>
</span><span id="LchColorSelectorController.sliderHueChange-1975"><a href="#LchColorSelectorController.sliderHueChange-1975"><span class="linenos">1975</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LchColorSelectorController.sliderHueChange-1976"><a href="#LchColorSelectorController.sliderHueChange-1976"><span class="linenos">1976</span></a>        <span class="n">values</span>  <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setHueSelection</span><span class="p">(</span><span class="n">vMin</span><span class="p">,</span><span class="n">vMax</span><span class="p">)</span>
</span><span id="LchColorSelectorController.sliderHueChange-1977"><a href="#LchColorSelectorController.sliderHueChange-1977"><span class="linenos">1977</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">changeColorEditor</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">idName</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Handle hue range selection changes.</p>

<p>Args:
    vMin (float): Minimum hue value for selection (0-360 degrees)
    vMax (float): Maximum hue value for selection (0-360 degrees)</p>
</div>


                            </div>
                            <div id="LchColorSelectorController.sliderChromaChange" class="classattr">
                                        <input id="LchColorSelectorController.sliderChromaChange-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">sliderChromaChange</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">vMin</span>, </span><span class="param"><span class="n">vMax</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="LchColorSelectorController.sliderChromaChange-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LchColorSelectorController.sliderChromaChange"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LchColorSelectorController.sliderChromaChange-1979"><a href="#LchColorSelectorController.sliderChromaChange-1979"><span class="linenos">1979</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">sliderChromaChange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vMin</span><span class="p">,</span> <span class="n">vMax</span><span class="p">):</span>
</span><span id="LchColorSelectorController.sliderChromaChange-1980"><a href="#LchColorSelectorController.sliderChromaChange-1980"><span class="linenos">1980</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="LchColorSelectorController.sliderChromaChange-1981"><a href="#LchColorSelectorController.sliderChromaChange-1981"><span class="linenos">1981</span></a><span class="sd">        Handle chroma range selection changes.</span>
</span><span id="LchColorSelectorController.sliderChromaChange-1982"><a href="#LchColorSelectorController.sliderChromaChange-1982"><span class="linenos">1982</span></a><span class="sd">        </span>
</span><span id="LchColorSelectorController.sliderChromaChange-1983"><a href="#LchColorSelectorController.sliderChromaChange-1983"><span class="linenos">1983</span></a><span class="sd">        Args:</span>
</span><span id="LchColorSelectorController.sliderChromaChange-1984"><a href="#LchColorSelectorController.sliderChromaChange-1984"><span class="linenos">1984</span></a><span class="sd">            vMin (float): Minimum chroma value for selection (0-100)</span>
</span><span id="LchColorSelectorController.sliderChromaChange-1985"><a href="#LchColorSelectorController.sliderChromaChange-1985"><span class="linenos">1985</span></a><span class="sd">            vMax (float): Maximum chroma value for selection (0-100)</span>
</span><span id="LchColorSelectorController.sliderChromaChange-1986"><a href="#LchColorSelectorController.sliderChromaChange-1986"><span class="linenos">1986</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LchColorSelectorController.sliderChromaChange-1987"><a href="#LchColorSelectorController.sliderChromaChange-1987"><span class="linenos">1987</span></a>        <span class="n">values</span>  <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setChromaSelection</span><span class="p">(</span><span class="n">vMin</span><span class="p">,</span><span class="n">vMax</span><span class="p">)</span>
</span><span id="LchColorSelectorController.sliderChromaChange-1988"><a href="#LchColorSelectorController.sliderChromaChange-1988"><span class="linenos">1988</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">changeColorEditor</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">idName</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Handle chroma range selection changes.</p>

<p>Args:
    vMin (float): Minimum chroma value for selection (0-100)
    vMax (float): Maximum chroma value for selection (0-100)</p>
</div>


                            </div>
                            <div id="LchColorSelectorController.sliderLightnessChange" class="classattr">
                                        <input id="LchColorSelectorController.sliderLightnessChange-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">sliderLightnessChange</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">vMin</span>, </span><span class="param"><span class="n">vMax</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="LchColorSelectorController.sliderLightnessChange-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LchColorSelectorController.sliderLightnessChange"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LchColorSelectorController.sliderLightnessChange-1990"><a href="#LchColorSelectorController.sliderLightnessChange-1990"><span class="linenos">1990</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">sliderLightnessChange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vMin</span><span class="p">,</span> <span class="n">vMax</span><span class="p">):</span>
</span><span id="LchColorSelectorController.sliderLightnessChange-1991"><a href="#LchColorSelectorController.sliderLightnessChange-1991"><span class="linenos">1991</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="LchColorSelectorController.sliderLightnessChange-1992"><a href="#LchColorSelectorController.sliderLightnessChange-1992"><span class="linenos">1992</span></a><span class="sd">        Handle lightness range selection changes.</span>
</span><span id="LchColorSelectorController.sliderLightnessChange-1993"><a href="#LchColorSelectorController.sliderLightnessChange-1993"><span class="linenos">1993</span></a><span class="sd">        </span>
</span><span id="LchColorSelectorController.sliderLightnessChange-1994"><a href="#LchColorSelectorController.sliderLightnessChange-1994"><span class="linenos">1994</span></a><span class="sd">        Args:</span>
</span><span id="LchColorSelectorController.sliderLightnessChange-1995"><a href="#LchColorSelectorController.sliderLightnessChange-1995"><span class="linenos">1995</span></a><span class="sd">            vMin (float): Minimum lightness value for selection (0-100)</span>
</span><span id="LchColorSelectorController.sliderLightnessChange-1996"><a href="#LchColorSelectorController.sliderLightnessChange-1996"><span class="linenos">1996</span></a><span class="sd">            vMax (float): Maximum lightness value for selection (0-100)</span>
</span><span id="LchColorSelectorController.sliderLightnessChange-1997"><a href="#LchColorSelectorController.sliderLightnessChange-1997"><span class="linenos">1997</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LchColorSelectorController.sliderLightnessChange-1998"><a href="#LchColorSelectorController.sliderLightnessChange-1998"><span class="linenos">1998</span></a>        <span class="n">values</span>  <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setLightnessSelection</span><span class="p">(</span><span class="n">vMin</span><span class="p">,</span><span class="n">vMax</span><span class="p">)</span>
</span><span id="LchColorSelectorController.sliderLightnessChange-1999"><a href="#LchColorSelectorController.sliderLightnessChange-1999"><span class="linenos">1999</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">changeColorEditor</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">idName</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Handle lightness range selection changes.</p>

<p>Args:
    vMin (float): Minimum lightness value for selection (0-100)
    vMax (float): Maximum lightness value for selection (0-100)</p>
</div>


                            </div>
                            <div id="LchColorSelectorController.sliderExposureChange" class="classattr">
                                        <input id="LchColorSelectorController.sliderExposureChange-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">sliderExposureChange</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">ev</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="LchColorSelectorController.sliderExposureChange-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LchColorSelectorController.sliderExposureChange"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LchColorSelectorController.sliderExposureChange-2001"><a href="#LchColorSelectorController.sliderExposureChange-2001"><span class="linenos">2001</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">sliderExposureChange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ev</span><span class="p">):</span>
</span><span id="LchColorSelectorController.sliderExposureChange-2002"><a href="#LchColorSelectorController.sliderExposureChange-2002"><span class="linenos">2002</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="LchColorSelectorController.sliderExposureChange-2003"><a href="#LchColorSelectorController.sliderExposureChange-2003"><span class="linenos">2003</span></a><span class="sd">        Handle exposure adjustment for selected colors.</span>
</span><span id="LchColorSelectorController.sliderExposureChange-2004"><a href="#LchColorSelectorController.sliderExposureChange-2004"><span class="linenos">2004</span></a><span class="sd">        </span>
</span><span id="LchColorSelectorController.sliderExposureChange-2005"><a href="#LchColorSelectorController.sliderExposureChange-2005"><span class="linenos">2005</span></a><span class="sd">        Args:</span>
</span><span id="LchColorSelectorController.sliderExposureChange-2006"><a href="#LchColorSelectorController.sliderExposureChange-2006"><span class="linenos">2006</span></a><span class="sd">            ev (float): Exposure adjustment in EV stops for selected color range</span>
</span><span id="LchColorSelectorController.sliderExposureChange-2007"><a href="#LchColorSelectorController.sliderExposureChange-2007"><span class="linenos">2007</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LchColorSelectorController.sliderExposureChange-2008"><a href="#LchColorSelectorController.sliderExposureChange-2008"><span class="linenos">2008</span></a>        <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setExposure</span><span class="p">(</span><span class="n">ev</span><span class="p">)</span>
</span><span id="LchColorSelectorController.sliderExposureChange-2009"><a href="#LchColorSelectorController.sliderExposureChange-2009"><span class="linenos">2009</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">changeColorEditor</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">idName</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Handle exposure adjustment for selected colors.</p>

<p>Args:
    ev (float): Exposure adjustment in EV stops for selected color range</p>
</div>


                            </div>
                            <div id="LchColorSelectorController.sliderSaturationChange" class="classattr">
                                        <input id="LchColorSelectorController.sliderSaturationChange-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">sliderSaturationChange</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">sat</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="LchColorSelectorController.sliderSaturationChange-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LchColorSelectorController.sliderSaturationChange"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LchColorSelectorController.sliderSaturationChange-2011"><a href="#LchColorSelectorController.sliderSaturationChange-2011"><span class="linenos">2011</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">sliderSaturationChange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sat</span><span class="p">):</span>
</span><span id="LchColorSelectorController.sliderSaturationChange-2012"><a href="#LchColorSelectorController.sliderSaturationChange-2012"><span class="linenos">2012</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="LchColorSelectorController.sliderSaturationChange-2013"><a href="#LchColorSelectorController.sliderSaturationChange-2013"><span class="linenos">2013</span></a><span class="sd">        Handle saturation adjustment for selected colors.</span>
</span><span id="LchColorSelectorController.sliderSaturationChange-2014"><a href="#LchColorSelectorController.sliderSaturationChange-2014"><span class="linenos">2014</span></a><span class="sd">        </span>
</span><span id="LchColorSelectorController.sliderSaturationChange-2015"><a href="#LchColorSelectorController.sliderSaturationChange-2015"><span class="linenos">2015</span></a><span class="sd">        Args:</span>
</span><span id="LchColorSelectorController.sliderSaturationChange-2016"><a href="#LchColorSelectorController.sliderSaturationChange-2016"><span class="linenos">2016</span></a><span class="sd">            sat (float): Saturation adjustment for selected color range</span>
</span><span id="LchColorSelectorController.sliderSaturationChange-2017"><a href="#LchColorSelectorController.sliderSaturationChange-2017"><span class="linenos">2017</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LchColorSelectorController.sliderSaturationChange-2018"><a href="#LchColorSelectorController.sliderSaturationChange-2018"><span class="linenos">2018</span></a>        <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setSaturation</span><span class="p">(</span><span class="n">sat</span><span class="p">)</span>
</span><span id="LchColorSelectorController.sliderSaturationChange-2019"><a href="#LchColorSelectorController.sliderSaturationChange-2019"><span class="linenos">2019</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">changeColorEditor</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">idName</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Handle saturation adjustment for selected colors.</p>

<p>Args:
    sat (float): Saturation adjustment for selected color range</p>
</div>


                            </div>
                            <div id="LchColorSelectorController.sliderContrastChange" class="classattr">
                                        <input id="LchColorSelectorController.sliderContrastChange-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">sliderContrastChange</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">cc</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="LchColorSelectorController.sliderContrastChange-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LchColorSelectorController.sliderContrastChange"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LchColorSelectorController.sliderContrastChange-2021"><a href="#LchColorSelectorController.sliderContrastChange-2021"><span class="linenos">2021</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">sliderContrastChange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cc</span><span class="p">):</span>
</span><span id="LchColorSelectorController.sliderContrastChange-2022"><a href="#LchColorSelectorController.sliderContrastChange-2022"><span class="linenos">2022</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="LchColorSelectorController.sliderContrastChange-2023"><a href="#LchColorSelectorController.sliderContrastChange-2023"><span class="linenos">2023</span></a><span class="sd">        Handle contrast adjustment for selected colors.</span>
</span><span id="LchColorSelectorController.sliderContrastChange-2024"><a href="#LchColorSelectorController.sliderContrastChange-2024"><span class="linenos">2024</span></a><span class="sd">        </span>
</span><span id="LchColorSelectorController.sliderContrastChange-2025"><a href="#LchColorSelectorController.sliderContrastChange-2025"><span class="linenos">2025</span></a><span class="sd">        Args:</span>
</span><span id="LchColorSelectorController.sliderContrastChange-2026"><a href="#LchColorSelectorController.sliderContrastChange-2026"><span class="linenos">2026</span></a><span class="sd">            cc (float): Contrast adjustment for selected color range</span>
</span><span id="LchColorSelectorController.sliderContrastChange-2027"><a href="#LchColorSelectorController.sliderContrastChange-2027"><span class="linenos">2027</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LchColorSelectorController.sliderContrastChange-2028"><a href="#LchColorSelectorController.sliderContrastChange-2028"><span class="linenos">2028</span></a>        <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setContrast</span><span class="p">(</span><span class="n">cc</span><span class="p">)</span>
</span><span id="LchColorSelectorController.sliderContrastChange-2029"><a href="#LchColorSelectorController.sliderContrastChange-2029"><span class="linenos">2029</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">changeColorEditor</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">idName</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Handle contrast adjustment for selected colors.</p>

<p>Args:
    cc (float): Contrast adjustment for selected color range</p>
</div>


                            </div>
                            <div id="LchColorSelectorController.sliderHueShiftChange" class="classattr">
                                        <input id="LchColorSelectorController.sliderHueShiftChange-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">sliderHueShiftChange</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">hs</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="LchColorSelectorController.sliderHueShiftChange-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LchColorSelectorController.sliderHueShiftChange"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LchColorSelectorController.sliderHueShiftChange-2031"><a href="#LchColorSelectorController.sliderHueShiftChange-2031"><span class="linenos">2031</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">sliderHueShiftChange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hs</span><span class="p">):</span>
</span><span id="LchColorSelectorController.sliderHueShiftChange-2032"><a href="#LchColorSelectorController.sliderHueShiftChange-2032"><span class="linenos">2032</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="LchColorSelectorController.sliderHueShiftChange-2033"><a href="#LchColorSelectorController.sliderHueShiftChange-2033"><span class="linenos">2033</span></a><span class="sd">        Handle hue shift for selected colors.</span>
</span><span id="LchColorSelectorController.sliderHueShiftChange-2034"><a href="#LchColorSelectorController.sliderHueShiftChange-2034"><span class="linenos">2034</span></a><span class="sd">        </span>
</span><span id="LchColorSelectorController.sliderHueShiftChange-2035"><a href="#LchColorSelectorController.sliderHueShiftChange-2035"><span class="linenos">2035</span></a><span class="sd">        Args:</span>
</span><span id="LchColorSelectorController.sliderHueShiftChange-2036"><a href="#LchColorSelectorController.sliderHueShiftChange-2036"><span class="linenos">2036</span></a><span class="sd">            hs (float): Hue shift amount in degrees for selected color range</span>
</span><span id="LchColorSelectorController.sliderHueShiftChange-2037"><a href="#LchColorSelectorController.sliderHueShiftChange-2037"><span class="linenos">2037</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LchColorSelectorController.sliderHueShiftChange-2038"><a href="#LchColorSelectorController.sliderHueShiftChange-2038"><span class="linenos">2038</span></a>        <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setHueShift</span><span class="p">(</span><span class="n">hs</span><span class="p">)</span>
</span><span id="LchColorSelectorController.sliderHueShiftChange-2039"><a href="#LchColorSelectorController.sliderHueShiftChange-2039"><span class="linenos">2039</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">changeColorEditor</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">idName</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Handle hue shift for selected colors.</p>

<p>Args:
    hs (float): Hue shift amount in degrees for selected color range</p>
</div>


                            </div>
                            <div id="LchColorSelectorController.checkboxMaskChange" class="classattr">
                                        <input id="LchColorSelectorController.checkboxMaskChange-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">checkboxMaskChange</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">value</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="LchColorSelectorController.checkboxMaskChange-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LchColorSelectorController.checkboxMaskChange"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LchColorSelectorController.checkboxMaskChange-2041"><a href="#LchColorSelectorController.checkboxMaskChange-2041"><span class="linenos">2041</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">checkboxMaskChange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">value</span><span class="p">):</span> 
</span><span id="LchColorSelectorController.checkboxMaskChange-2042"><a href="#LchColorSelectorController.checkboxMaskChange-2042"><span class="linenos">2042</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="LchColorSelectorController.checkboxMaskChange-2043"><a href="#LchColorSelectorController.checkboxMaskChange-2043"><span class="linenos">2043</span></a><span class="sd">        Toggle mask visualization for selected colors.</span>
</span><span id="LchColorSelectorController.checkboxMaskChange-2044"><a href="#LchColorSelectorController.checkboxMaskChange-2044"><span class="linenos">2044</span></a><span class="sd">        </span>
</span><span id="LchColorSelectorController.checkboxMaskChange-2045"><a href="#LchColorSelectorController.checkboxMaskChange-2045"><span class="linenos">2045</span></a><span class="sd">        Args:</span>
</span><span id="LchColorSelectorController.checkboxMaskChange-2046"><a href="#LchColorSelectorController.checkboxMaskChange-2046"><span class="linenos">2046</span></a><span class="sd">            value (bool): Enable (True) or disable (False) mask visualization</span>
</span><span id="LchColorSelectorController.checkboxMaskChange-2047"><a href="#LchColorSelectorController.checkboxMaskChange-2047"><span class="linenos">2047</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LchColorSelectorController.checkboxMaskChange-2048"><a href="#LchColorSelectorController.checkboxMaskChange-2048"><span class="linenos">2048</span></a>        <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setMask</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</span><span id="LchColorSelectorController.checkboxMaskChange-2049"><a href="#LchColorSelectorController.checkboxMaskChange-2049"><span class="linenos">2049</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">changeColorEditor</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">idName</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Toggle mask visualization for selected colors.</p>

<p>Args:
    value (bool): Enable (True) or disable (False) mask visualization</p>
</div>


                            </div>
                            <div id="LchColorSelectorController.setValues" class="classattr">
                                        <input id="LchColorSelectorController.setValues-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">setValues</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">values</span>, </span><span class="param"><span class="n">callBackActive</span><span class="o">=</span><span class="kc">False</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="LchColorSelectorController.setValues-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LchColorSelectorController.setValues"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LchColorSelectorController.setValues-2051"><a href="#LchColorSelectorController.setValues-2051"><span class="linenos">2051</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setValues</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">,</span> <span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="LchColorSelectorController.setValues-2052"><a href="#LchColorSelectorController.setValues-2052"><span class="linenos">2052</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="LchColorSelectorController.setValues-2053"><a href="#LchColorSelectorController.setValues-2053"><span class="linenos">2053</span></a><span class="sd">        Set all color editing parameters programmatically.</span>
</span><span id="LchColorSelectorController.setValues-2054"><a href="#LchColorSelectorController.setValues-2054"><span class="linenos">2054</span></a><span class="sd">        </span>
</span><span id="LchColorSelectorController.setValues-2055"><a href="#LchColorSelectorController.setValues-2055"><span class="linenos">2055</span></a><span class="sd">        Updates all selection and editing controls simultaneously, typically</span>
</span><span id="LchColorSelectorController.setValues-2056"><a href="#LchColorSelectorController.setValues-2056"><span class="linenos">2056</span></a><span class="sd">        used when loading saved color editing presets or initializing the</span>
</span><span id="LchColorSelectorController.setValues-2057"><a href="#LchColorSelectorController.setValues-2057"><span class="linenos">2057</span></a><span class="sd">        interface with specific values.</span>
</span><span id="LchColorSelectorController.setValues-2058"><a href="#LchColorSelectorController.setValues-2058"><span class="linenos">2058</span></a><span class="sd">        </span>
</span><span id="LchColorSelectorController.setValues-2059"><a href="#LchColorSelectorController.setValues-2059"><span class="linenos">2059</span></a><span class="sd">        Args:</span>
</span><span id="LchColorSelectorController.setValues-2060"><a href="#LchColorSelectorController.setValues-2060"><span class="linenos">2060</span></a><span class="sd">            values (dict): Complete color editing configuration including</span>
</span><span id="LchColorSelectorController.setValues-2061"><a href="#LchColorSelectorController.setValues-2061"><span class="linenos">2061</span></a><span class="sd">                          selection ranges and editing parameters</span>
</span><span id="LchColorSelectorController.setValues-2062"><a href="#LchColorSelectorController.setValues-2062"><span class="linenos">2062</span></a><span class="sd">            callBackActive (bool, optional): Whether to trigger callbacks (default: False)</span>
</span><span id="LchColorSelectorController.setValues-2063"><a href="#LchColorSelectorController.setValues-2063"><span class="linenos">2063</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LchColorSelectorController.setValues-2064"><a href="#LchColorSelectorController.setValues-2064"><span class="linenos">2064</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; LchColorSelectorController.setValue(&quot;</span><span class="p">,</span><span class="n">values</span><span class="p">,</span><span class="s2">&quot;) &quot;</span><span class="p">)</span>
</span><span id="LchColorSelectorController.setValues-2065"><a href="#LchColorSelectorController.setValues-2065"><span class="linenos">2065</span></a>
</span><span id="LchColorSelectorController.setValues-2066"><a href="#LchColorSelectorController.setValues-2066"><span class="linenos">2066</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="n">callBackActive</span>
</span><span id="LchColorSelectorController.setValues-2067"><a href="#LchColorSelectorController.setValues-2067"><span class="linenos">2067</span></a>        <span class="c1"># slider hue selection</span>
</span><span id="LchColorSelectorController.setValues-2068"><a href="#LchColorSelectorController.setValues-2068"><span class="linenos">2068</span></a>        <span class="n">v</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="s1">&#39;selection&#39;</span><span class="p">][</span><span class="s1">&#39;hue&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="s1">&#39;hue&#39;</span> <span class="ow">in</span> <span class="n">values</span><span class="p">[</span><span class="s1">&#39;selection&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">else</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">360</span><span class="p">)</span>
</span><span id="LchColorSelectorController.setValues-2069"><a href="#LchColorSelectorController.setValues-2069"><span class="linenos">2069</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderHueMin</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
</span><span id="LchColorSelectorController.setValues-2070"><a href="#LchColorSelectorController.setValues-2070"><span class="linenos">2070</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderHueMax</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="LchColorSelectorController.setValues-2071"><a href="#LchColorSelectorController.setValues-2071"><span class="linenos">2071</span></a>
</span><span id="LchColorSelectorController.setValues-2072"><a href="#LchColorSelectorController.setValues-2072"><span class="linenos">2072</span></a>        <span class="c1"># slider chroma selection</span>
</span><span id="LchColorSelectorController.setValues-2073"><a href="#LchColorSelectorController.setValues-2073"><span class="linenos">2073</span></a>        <span class="n">v</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="s1">&#39;selection&#39;</span><span class="p">][</span><span class="s1">&#39;chroma&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="s1">&#39;chroma&#39;</span> <span class="ow">in</span> <span class="n">values</span><span class="p">[</span><span class="s1">&#39;selection&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">else</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
</span><span id="LchColorSelectorController.setValues-2074"><a href="#LchColorSelectorController.setValues-2074"><span class="linenos">2074</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderChromaMin</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
</span><span id="LchColorSelectorController.setValues-2075"><a href="#LchColorSelectorController.setValues-2075"><span class="linenos">2075</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderChromaMax</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
</span><span id="LchColorSelectorController.setValues-2076"><a href="#LchColorSelectorController.setValues-2076"><span class="linenos">2076</span></a>
</span><span id="LchColorSelectorController.setValues-2077"><a href="#LchColorSelectorController.setValues-2077"><span class="linenos">2077</span></a>        <span class="c1"># slider lightness</span>
</span><span id="LchColorSelectorController.setValues-2078"><a href="#LchColorSelectorController.setValues-2078"><span class="linenos">2078</span></a>        <span class="n">v</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="s1">&#39;selection&#39;</span><span class="p">][</span><span class="s1">&#39;lightness&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="s1">&#39;lightness&#39;</span> <span class="ow">in</span> <span class="n">values</span><span class="p">[</span><span class="s1">&#39;selection&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">else</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
</span><span id="LchColorSelectorController.setValues-2079"><a href="#LchColorSelectorController.setValues-2079"><span class="linenos">2079</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderLightMin</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="mi">3</span><span class="p">))</span>
</span><span id="LchColorSelectorController.setValues-2080"><a href="#LchColorSelectorController.setValues-2080"><span class="linenos">2080</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderLightMax</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="mi">3</span><span class="p">))</span>
</span><span id="LchColorSelectorController.setValues-2081"><a href="#LchColorSelectorController.setValues-2081"><span class="linenos">2081</span></a>
</span><span id="LchColorSelectorController.setValues-2082"><a href="#LchColorSelectorController.setValues-2082"><span class="linenos">2082</span></a>        <span class="c1"># hue shift editor</span>
</span><span id="LchColorSelectorController.setValues-2083"><a href="#LchColorSelectorController.setValues-2083"><span class="linenos">2083</span></a>        <span class="n">v</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="s1">&#39;edit&#39;</span><span class="p">][</span><span class="s1">&#39;hue&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="s1">&#39;hue&#39;</span> <span class="ow">in</span> <span class="n">values</span><span class="p">[</span><span class="s1">&#39;edit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">else</span> <span class="mi">0</span>
</span><span id="LchColorSelectorController.setValues-2084"><a href="#LchColorSelectorController.setValues-2084"><span class="linenos">2084</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderHueShift</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">v</span><span class="p">))</span>
</span><span id="LchColorSelectorController.setValues-2085"><a href="#LchColorSelectorController.setValues-2085"><span class="linenos">2085</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">valueHueShift</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">))</span> 
</span><span id="LchColorSelectorController.setValues-2086"><a href="#LchColorSelectorController.setValues-2086"><span class="linenos">2086</span></a>
</span><span id="LchColorSelectorController.setValues-2087"><a href="#LchColorSelectorController.setValues-2087"><span class="linenos">2087</span></a>        <span class="c1"># exposure editor</span>
</span><span id="LchColorSelectorController.setValues-2088"><a href="#LchColorSelectorController.setValues-2088"><span class="linenos">2088</span></a>        <span class="n">v</span> <span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="s1">&#39;edit&#39;</span><span class="p">][</span><span class="s1">&#39;exposure&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="s1">&#39;exposure&#39;</span> <span class="ow">in</span> <span class="n">values</span><span class="p">[</span><span class="s1">&#39;edit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">else</span> <span class="mi">0</span>
</span><span id="LchColorSelectorController.setValues-2089"><a href="#LchColorSelectorController.setValues-2089"><span class="linenos">2089</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderExposure</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">v</span><span class="o">*</span><span class="mi">30</span><span class="p">))</span>
</span><span id="LchColorSelectorController.setValues-2090"><a href="#LchColorSelectorController.setValues-2090"><span class="linenos">2090</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">valueExposure</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">))</span> 
</span><span id="LchColorSelectorController.setValues-2091"><a href="#LchColorSelectorController.setValues-2091"><span class="linenos">2091</span></a>
</span><span id="LchColorSelectorController.setValues-2092"><a href="#LchColorSelectorController.setValues-2092"><span class="linenos">2092</span></a>        <span class="c1"># contrast editor</span>
</span><span id="LchColorSelectorController.setValues-2093"><a href="#LchColorSelectorController.setValues-2093"><span class="linenos">2093</span></a>        <span class="n">v</span> <span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="s1">&#39;edit&#39;</span><span class="p">][</span><span class="s1">&#39;contrast&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="s1">&#39;contrast&#39;</span> <span class="ow">in</span> <span class="n">values</span><span class="p">[</span><span class="s1">&#39;edit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">else</span> <span class="mi">0</span>
</span><span id="LchColorSelectorController.setValues-2094"><a href="#LchColorSelectorController.setValues-2094"><span class="linenos">2094</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderContrast</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">v</span><span class="p">))</span>
</span><span id="LchColorSelectorController.setValues-2095"><a href="#LchColorSelectorController.setValues-2095"><span class="linenos">2095</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">valueContrast</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">))</span>  
</span><span id="LchColorSelectorController.setValues-2096"><a href="#LchColorSelectorController.setValues-2096"><span class="linenos">2096</span></a>
</span><span id="LchColorSelectorController.setValues-2097"><a href="#LchColorSelectorController.setValues-2097"><span class="linenos">2097</span></a>        <span class="c1"># saturation editor</span>
</span><span id="LchColorSelectorController.setValues-2098"><a href="#LchColorSelectorController.setValues-2098"><span class="linenos">2098</span></a>        <span class="n">v</span> <span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="s1">&#39;edit&#39;</span><span class="p">][</span><span class="s1">&#39;saturation&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="s1">&#39;saturation&#39;</span> <span class="ow">in</span> <span class="n">values</span><span class="p">[</span><span class="s1">&#39;edit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">else</span> <span class="mi">0</span>
</span><span id="LchColorSelectorController.setValues-2099"><a href="#LchColorSelectorController.setValues-2099"><span class="linenos">2099</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderSaturation</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">v</span><span class="p">))</span>
</span><span id="LchColorSelectorController.setValues-2100"><a href="#LchColorSelectorController.setValues-2100"><span class="linenos">2100</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">valueSaturation</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">))</span>  
</span><span id="LchColorSelectorController.setValues-2101"><a href="#LchColorSelectorController.setValues-2101"><span class="linenos">2101</span></a>
</span><span id="LchColorSelectorController.setValues-2102"><a href="#LchColorSelectorController.setValues-2102"><span class="linenos">2102</span></a>        <span class="c1"># mask</span>
</span><span id="LchColorSelectorController.setValues-2103"><a href="#LchColorSelectorController.setValues-2103"><span class="linenos">2103</span></a>        <span class="n">v</span> <span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="n">values</span><span class="p">[</span><span class="s1">&#39;mask&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="s1">&#39;mask&#39;</span> <span class="ow">in</span> <span class="n">values</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="k">else</span> <span class="kc">False</span>
</span><span id="LchColorSelectorController.setValues-2104"><a href="#LchColorSelectorController.setValues-2104"><span class="linenos">2104</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">checkboxMask</span><span class="o">.</span><span class="n">setChecked</span><span class="p">(</span><span class="n">values</span><span class="p">[</span><span class="s1">&#39;mask&#39;</span><span class="p">])</span>             
</span><span id="LchColorSelectorController.setValues-2105"><a href="#LchColorSelectorController.setValues-2105"><span class="linenos">2105</span></a>
</span><span id="LchColorSelectorController.setValues-2106"><a href="#LchColorSelectorController.setValues-2106"><span class="linenos">2106</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setValues</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
</span><span id="LchColorSelectorController.setValues-2107"><a href="#LchColorSelectorController.setValues-2107"><span class="linenos">2107</span></a>
</span><span id="LchColorSelectorController.setValues-2108"><a href="#LchColorSelectorController.setValues-2108"><span class="linenos">2108</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">True</span>
</span></pre></div>


            <div class="docstring"><p>Set all color editing parameters programmatically.</p>

<p>Updates all selection and editing controls simultaneously, typically
used when loading saved color editing presets or initializing the
interface with specific values.</p>

<p>Args:
    values (dict): Complete color editing configuration including
                  selection ranges and editing parameters
    callBackActive (bool, optional): Whether to trigger callbacks (default: False)</p>
</div>


                            </div>
                            <div id="LchColorSelectorController.resetSelection" class="classattr">
                                        <input id="LchColorSelectorController.resetSelection-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">resetSelection</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="LchColorSelectorController.resetSelection-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LchColorSelectorController.resetSelection"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LchColorSelectorController.resetSelection-2111"><a href="#LchColorSelectorController.resetSelection-2111"><span class="linenos">2111</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">resetSelection</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
</span><span id="LchColorSelectorController.resetSelection-2112"><a href="#LchColorSelectorController.resetSelection-2112"><span class="linenos">2112</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="LchColorSelectorController.resetSelection-2113"><a href="#LchColorSelectorController.resetSelection-2113"><span class="linenos">2113</span></a><span class="sd">        Reset color selection parameters to defaults.</span>
</span><span id="LchColorSelectorController.resetSelection-2114"><a href="#LchColorSelectorController.resetSelection-2114"><span class="linenos">2114</span></a><span class="sd">        </span>
</span><span id="LchColorSelectorController.resetSelection-2115"><a href="#LchColorSelectorController.resetSelection-2115"><span class="linenos">2115</span></a><span class="sd">        Restores the color selection range (hue, chroma, lightness) to</span>
</span><span id="LchColorSelectorController.resetSelection-2116"><a href="#LchColorSelectorController.resetSelection-2116"><span class="linenos">2116</span></a><span class="sd">        default values while preserving editing parameters. Useful for</span>
</span><span id="LchColorSelectorController.resetSelection-2117"><a href="#LchColorSelectorController.resetSelection-2117"><span class="linenos">2117</span></a><span class="sd">        starting fresh color selections.</span>
</span><span id="LchColorSelectorController.resetSelection-2118"><a href="#LchColorSelectorController.resetSelection-2118"><span class="linenos">2118</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LchColorSelectorController.resetSelection-2119"><a href="#LchColorSelectorController.resetSelection-2119"><span class="linenos">2119</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; LchColorSelectorController.resetSelection(&quot;</span><span class="p">,</span><span class="s2">&quot;) &quot;</span><span class="p">)</span>
</span><span id="LchColorSelectorController.resetSelection-2120"><a href="#LchColorSelectorController.resetSelection-2120"><span class="linenos">2120</span></a>
</span><span id="LchColorSelectorController.resetSelection-2121"><a href="#LchColorSelectorController.resetSelection-2121"><span class="linenos">2121</span></a>        <span class="n">default</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">default</span><span class="p">)</span>
</span><span id="LchColorSelectorController.resetSelection-2122"><a href="#LchColorSelectorController.resetSelection-2122"><span class="linenos">2122</span></a>        <span class="n">current</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getValues</span><span class="p">())</span>
</span><span id="LchColorSelectorController.resetSelection-2123"><a href="#LchColorSelectorController.resetSelection-2123"><span class="linenos">2123</span></a>        
</span><span id="LchColorSelectorController.resetSelection-2124"><a href="#LchColorSelectorController.resetSelection-2124"><span class="linenos">2124</span></a>        <span class="n">current</span><span class="p">[</span><span class="s1">&#39;selection&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">default</span><span class="p">[</span><span class="s1">&#39;selection&#39;</span><span class="p">]</span>
</span><span id="LchColorSelectorController.resetSelection-2125"><a href="#LchColorSelectorController.resetSelection-2125"><span class="linenos">2125</span></a>
</span><span id="LchColorSelectorController.resetSelection-2126"><a href="#LchColorSelectorController.resetSelection-2126"><span class="linenos">2126</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">setValues</span><span class="p">(</span><span class="n">current</span><span class="p">,</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
</span><span id="LchColorSelectorController.resetSelection-2127"><a href="#LchColorSelectorController.resetSelection-2127"><span class="linenos">2127</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">True</span>
</span></pre></div>


            <div class="docstring"><p>Reset color selection parameters to defaults.</p>

<p>Restores the color selection range (hue, chroma, lightness) to
default values while preserving editing parameters. Useful for
starting fresh color selections.</p>
</div>


                            </div>
                            <div id="LchColorSelectorController.resetEdit" class="classattr">
                                        <input id="LchColorSelectorController.resetEdit-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">resetEdit</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="LchColorSelectorController.resetEdit-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#LchColorSelectorController.resetEdit"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="LchColorSelectorController.resetEdit-2129"><a href="#LchColorSelectorController.resetEdit-2129"><span class="linenos">2129</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">resetEdit</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
</span><span id="LchColorSelectorController.resetEdit-2130"><a href="#LchColorSelectorController.resetEdit-2130"><span class="linenos">2130</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="LchColorSelectorController.resetEdit-2131"><a href="#LchColorSelectorController.resetEdit-2131"><span class="linenos">2131</span></a><span class="sd">        Reset editing parameters to defaults.</span>
</span><span id="LchColorSelectorController.resetEdit-2132"><a href="#LchColorSelectorController.resetEdit-2132"><span class="linenos">2132</span></a><span class="sd">        </span>
</span><span id="LchColorSelectorController.resetEdit-2133"><a href="#LchColorSelectorController.resetEdit-2133"><span class="linenos">2133</span></a><span class="sd">        Restores all editing adjustments (exposure, saturation, contrast,</span>
</span><span id="LchColorSelectorController.resetEdit-2134"><a href="#LchColorSelectorController.resetEdit-2134"><span class="linenos">2134</span></a><span class="sd">        hue shift) to default values while preserving color selection.</span>
</span><span id="LchColorSelectorController.resetEdit-2135"><a href="#LchColorSelectorController.resetEdit-2135"><span class="linenos">2135</span></a><span class="sd">        Useful for clearing applied adjustments.</span>
</span><span id="LchColorSelectorController.resetEdit-2136"><a href="#LchColorSelectorController.resetEdit-2136"><span class="linenos">2136</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="LchColorSelectorController.resetEdit-2137"><a href="#LchColorSelectorController.resetEdit-2137"><span class="linenos">2137</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; LchColorSelectorController.resetEdit(&quot;</span><span class="p">,</span><span class="s2">&quot;) &quot;</span><span class="p">)</span>
</span><span id="LchColorSelectorController.resetEdit-2138"><a href="#LchColorSelectorController.resetEdit-2138"><span class="linenos">2138</span></a>
</span><span id="LchColorSelectorController.resetEdit-2139"><a href="#LchColorSelectorController.resetEdit-2139"><span class="linenos">2139</span></a>        <span class="n">default</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">default</span><span class="p">)</span>
</span><span id="LchColorSelectorController.resetEdit-2140"><a href="#LchColorSelectorController.resetEdit-2140"><span class="linenos">2140</span></a>        <span class="n">current</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getValues</span><span class="p">())</span>
</span><span id="LchColorSelectorController.resetEdit-2141"><a href="#LchColorSelectorController.resetEdit-2141"><span class="linenos">2141</span></a>        
</span><span id="LchColorSelectorController.resetEdit-2142"><a href="#LchColorSelectorController.resetEdit-2142"><span class="linenos">2142</span></a>        <span class="n">current</span><span class="p">[</span><span class="s1">&#39;edit&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">default</span><span class="p">[</span><span class="s1">&#39;edit&#39;</span><span class="p">]</span>
</span><span id="LchColorSelectorController.resetEdit-2143"><a href="#LchColorSelectorController.resetEdit-2143"><span class="linenos">2143</span></a>
</span><span id="LchColorSelectorController.resetEdit-2144"><a href="#LchColorSelectorController.resetEdit-2144"><span class="linenos">2144</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">setValues</span><span class="p">(</span><span class="n">current</span><span class="p">,</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
</span><span id="LchColorSelectorController.resetEdit-2145"><a href="#LchColorSelectorController.resetEdit-2145"><span class="linenos">2145</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">True</span>
</span></pre></div>


            <div class="docstring"><p>Reset editing parameters to defaults.</p>

<p>Restores all editing adjustments (exposure, saturation, contrast,
hue shift) to default values while preserving color selection.
Useful for clearing applied adjustments.</p>
</div>


                            </div>
                </section>
                <section id="GeometryController">
                            <input id="GeometryController-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">GeometryController</span>:

                <label class="view-source-button" for="GeometryController-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GeometryController"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GeometryController-2149"><a href="#GeometryController-2149"><span class="linenos">2149</span></a><span class="k">class</span><span class="w"> </span><span class="nc">GeometryController</span><span class="p">:</span>
</span><span id="GeometryController-2150"><a href="#GeometryController-2150"><span class="linenos">2150</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GeometryController-2151"><a href="#GeometryController-2151"><span class="linenos">2151</span></a><span class="sd">    Controller for geometric transformations and image adjustments.</span>
</span><span id="GeometryController-2152"><a href="#GeometryController-2152"><span class="linenos">2152</span></a><span class="sd">    </span>
</span><span id="GeometryController-2153"><a href="#GeometryController-2153"><span class="linenos">2153</span></a><span class="sd">    This class manages geometric processing controls including cropping adjustments,</span>
</span><span id="GeometryController-2154"><a href="#GeometryController-2154"><span class="linenos">2154</span></a><span class="sd">    rotation, and spatial positioning. It provides essential tools for correcting</span>
</span><span id="GeometryController-2155"><a href="#GeometryController-2155"><span class="linenos">2155</span></a><span class="sd">    perspective issues, adjusting composition, and applying geometric corrections</span>
</span><span id="GeometryController-2156"><a href="#GeometryController-2156"><span class="linenos">2156</span></a><span class="sd">    to HDR images while preserving image quality.</span>
</span><span id="GeometryController-2157"><a href="#GeometryController-2157"><span class="linenos">2157</span></a><span class="sd">    </span>
</span><span id="GeometryController-2158"><a href="#GeometryController-2158"><span class="linenos">2158</span></a><span class="sd">    The geometry controller handles precision adjustments that are critical for</span>
</span><span id="GeometryController-2159"><a href="#GeometryController-2159"><span class="linenos">2159</span></a><span class="sd">    professional HDR photography, especially when correcting architectural</span>
</span><span id="GeometryController-2160"><a href="#GeometryController-2160"><span class="linenos">2160</span></a><span class="sd">    photography or adjusting horizon lines.</span>
</span><span id="GeometryController-2161"><a href="#GeometryController-2161"><span class="linenos">2161</span></a><span class="sd">    </span>
</span><span id="GeometryController-2162"><a href="#GeometryController-2162"><span class="linenos">2162</span></a><span class="sd">    Attributes:</span>
</span><span id="GeometryController-2163"><a href="#GeometryController-2163"><span class="linenos">2163</span></a><span class="sd">        - parent: Parent controller for coordination</span>
</span><span id="GeometryController-2164"><a href="#GeometryController-2164"><span class="linenos">2164</span></a><span class="sd">        - model (model.GeometryModel): Geometric transformation data model</span>
</span><span id="GeometryController-2165"><a href="#GeometryController-2165"><span class="linenos">2165</span></a><span class="sd">        - view (view.GeometryView): Geometry adjustment interface</span>
</span><span id="GeometryController-2166"><a href="#GeometryController-2166"><span class="linenos">2166</span></a><span class="sd">        - callBackActive (bool): Enable/disable callback processing</span>
</span><span id="GeometryController-2167"><a href="#GeometryController-2167"><span class="linenos">2167</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="GeometryController-2168"><a href="#GeometryController-2168"><span class="linenos">2168</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span> <span class="p">):</span>
</span><span id="GeometryController-2169"><a href="#GeometryController-2169"><span class="linenos">2169</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GeometryController-2170"><a href="#GeometryController-2170"><span class="linenos">2170</span></a><span class="sd">        Initialize the geometry controller.</span>
</span><span id="GeometryController-2171"><a href="#GeometryController-2171"><span class="linenos">2171</span></a><span class="sd">        </span>
</span><span id="GeometryController-2172"><a href="#GeometryController-2172"><span class="linenos">2172</span></a><span class="sd">        Args:</span>
</span><span id="GeometryController-2173"><a href="#GeometryController-2173"><span class="linenos">2173</span></a><span class="sd">            parent: Parent controller for coordination and processing pipeline access</span>
</span><span id="GeometryController-2174"><a href="#GeometryController-2174"><span class="linenos">2174</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GeometryController-2175"><a href="#GeometryController-2175"><span class="linenos">2175</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; GeometryController.__init__(&quot;</span><span class="p">,</span><span class="s2">&quot;) &quot;</span><span class="p">)</span>
</span><span id="GeometryController-2176"><a href="#GeometryController-2176"><span class="linenos">2176</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
</span><span id="GeometryController-2177"><a href="#GeometryController-2177"><span class="linenos">2177</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span>    <span class="n">model</span><span class="o">.</span><span class="n">GeometryModel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="GeometryController-2178"><a href="#GeometryController-2178"><span class="linenos">2178</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span>     <span class="n">view</span><span class="o">.</span><span class="n">GeometryView</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="GeometryController-2179"><a href="#GeometryController-2179"><span class="linenos">2179</span></a>
</span><span id="GeometryController-2180"><a href="#GeometryController-2180"><span class="linenos">2180</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="GeometryController-2181"><a href="#GeometryController-2181"><span class="linenos">2181</span></a>    <span class="c1"># callbacks</span>
</span><span id="GeometryController-2182"><a href="#GeometryController-2182"><span class="linenos">2182</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">sliderCroppingVerticalAdjustementChange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">v</span><span class="p">):</span>
</span><span id="GeometryController-2183"><a href="#GeometryController-2183"><span class="linenos">2183</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GeometryController-2184"><a href="#GeometryController-2184"><span class="linenos">2184</span></a><span class="sd">        Handle vertical cropping position adjustments.</span>
</span><span id="GeometryController-2185"><a href="#GeometryController-2185"><span class="linenos">2185</span></a><span class="sd">        </span>
</span><span id="GeometryController-2186"><a href="#GeometryController-2186"><span class="linenos">2186</span></a><span class="sd">        Adjusts the vertical position of the crop area, allowing users to</span>
</span><span id="GeometryController-2187"><a href="#GeometryController-2187"><span class="linenos">2187</span></a><span class="sd">        reframe the image vertically while maintaining the aspect ratio.</span>
</span><span id="GeometryController-2188"><a href="#GeometryController-2188"><span class="linenos">2188</span></a><span class="sd">        </span>
</span><span id="GeometryController-2189"><a href="#GeometryController-2189"><span class="linenos">2189</span></a><span class="sd">        Args:</span>
</span><span id="GeometryController-2190"><a href="#GeometryController-2190"><span class="linenos">2190</span></a><span class="sd">            v (float): Vertical adjustment value (typically -100 to +100)</span>
</span><span id="GeometryController-2191"><a href="#GeometryController-2191"><span class="linenos">2191</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GeometryController-2192"><a href="#GeometryController-2192"><span class="linenos">2192</span></a>        <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setCroppingVerticalAdjustement</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
</span><span id="GeometryController-2193"><a href="#GeometryController-2193"><span class="linenos">2193</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">changeGeometry</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
</span><span id="GeometryController-2194"><a href="#GeometryController-2194"><span class="linenos">2194</span></a>
</span><span id="GeometryController-2195"><a href="#GeometryController-2195"><span class="linenos">2195</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">sliderRotationChange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">v</span><span class="p">):</span>
</span><span id="GeometryController-2196"><a href="#GeometryController-2196"><span class="linenos">2196</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GeometryController-2197"><a href="#GeometryController-2197"><span class="linenos">2197</span></a><span class="sd">        Handle rotation angle adjustments.</span>
</span><span id="GeometryController-2198"><a href="#GeometryController-2198"><span class="linenos">2198</span></a><span class="sd">        </span>
</span><span id="GeometryController-2199"><a href="#GeometryController-2199"><span class="linenos">2199</span></a><span class="sd">        Adjusts the image rotation angle for correcting tilted horizons or</span>
</span><span id="GeometryController-2200"><a href="#GeometryController-2200"><span class="linenos">2200</span></a><span class="sd">        perspective issues. Rotation is applied with automatic cropping to</span>
</span><span id="GeometryController-2201"><a href="#GeometryController-2201"><span class="linenos">2201</span></a><span class="sd">        maintain rectangular output.</span>
</span><span id="GeometryController-2202"><a href="#GeometryController-2202"><span class="linenos">2202</span></a><span class="sd">        </span>
</span><span id="GeometryController-2203"><a href="#GeometryController-2203"><span class="linenos">2203</span></a><span class="sd">        Args:</span>
</span><span id="GeometryController-2204"><a href="#GeometryController-2204"><span class="linenos">2204</span></a><span class="sd">            v (float): Rotation angle in degrees</span>
</span><span id="GeometryController-2205"><a href="#GeometryController-2205"><span class="linenos">2205</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GeometryController-2206"><a href="#GeometryController-2206"><span class="linenos">2206</span></a>        <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setRotation</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
</span><span id="GeometryController-2207"><a href="#GeometryController-2207"><span class="linenos">2207</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">changeGeometry</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
</span><span id="GeometryController-2208"><a href="#GeometryController-2208"><span class="linenos">2208</span></a>
</span><span id="GeometryController-2209"><a href="#GeometryController-2209"><span class="linenos">2209</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setValues</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">,</span> <span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="GeometryController-2210"><a href="#GeometryController-2210"><span class="linenos">2210</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GeometryController-2211"><a href="#GeometryController-2211"><span class="linenos">2211</span></a><span class="sd">        Set all geometry parameters programmatically.</span>
</span><span id="GeometryController-2212"><a href="#GeometryController-2212"><span class="linenos">2212</span></a><span class="sd">        </span>
</span><span id="GeometryController-2213"><a href="#GeometryController-2213"><span class="linenos">2213</span></a><span class="sd">        Updates all geometric transformation controls simultaneously, typically</span>
</span><span id="GeometryController-2214"><a href="#GeometryController-2214"><span class="linenos">2214</span></a><span class="sd">        used when loading saved geometry settings or batch updates.</span>
</span><span id="GeometryController-2215"><a href="#GeometryController-2215"><span class="linenos">2215</span></a><span class="sd">        </span>
</span><span id="GeometryController-2216"><a href="#GeometryController-2216"><span class="linenos">2216</span></a><span class="sd">        Args:</span>
</span><span id="GeometryController-2217"><a href="#GeometryController-2217"><span class="linenos">2217</span></a><span class="sd">            values (dict): Dictionary containing geometry parameters including</span>
</span><span id="GeometryController-2218"><a href="#GeometryController-2218"><span class="linenos">2218</span></a><span class="sd">                          &#39;up&#39; (vertical adjustment) and &#39;rotation&#39; (angle)</span>
</span><span id="GeometryController-2219"><a href="#GeometryController-2219"><span class="linenos">2219</span></a><span class="sd">            callBackActive (bool, optional): Whether to trigger callbacks (default: False)</span>
</span><span id="GeometryController-2220"><a href="#GeometryController-2220"><span class="linenos">2220</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GeometryController-2221"><a href="#GeometryController-2221"><span class="linenos">2221</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; GeometryController.setValue(&quot;</span><span class="p">,</span><span class="n">values</span><span class="p">,</span><span class="s2">&quot;) &quot;</span><span class="p">)</span>
</span><span id="GeometryController-2222"><a href="#GeometryController-2222"><span class="linenos">2222</span></a>
</span><span id="GeometryController-2223"><a href="#GeometryController-2223"><span class="linenos">2223</span></a>        <span class="n">up</span> <span class="o">=</span>        <span class="n">values</span><span class="p">[</span><span class="s1">&#39;up&#39;</span><span class="p">]</span>        <span class="k">if</span> <span class="s1">&#39;up&#39;</span> <span class="ow">in</span> <span class="n">values</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>        <span class="k">else</span> <span class="mf">0.0</span>
</span><span id="GeometryController-2224"><a href="#GeometryController-2224"><span class="linenos">2224</span></a>        <span class="n">rotation</span> <span class="o">=</span>  <span class="n">values</span><span class="p">[</span><span class="s1">&#39;rotation&#39;</span><span class="p">]</span>  <span class="k">if</span> <span class="s1">&#39;rotation&#39;</span> <span class="ow">in</span> <span class="n">values</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>  <span class="k">else</span> <span class="mf">0.0</span>
</span><span id="GeometryController-2225"><a href="#GeometryController-2225"><span class="linenos">2225</span></a>
</span><span id="GeometryController-2226"><a href="#GeometryController-2226"><span class="linenos">2226</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="n">callBackActive</span>
</span><span id="GeometryController-2227"><a href="#GeometryController-2227"><span class="linenos">2227</span></a>
</span><span id="GeometryController-2228"><a href="#GeometryController-2228"><span class="linenos">2228</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderCroppingVerticalAdjustement</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">up</span><span class="p">))</span>
</span><span id="GeometryController-2229"><a href="#GeometryController-2229"><span class="linenos">2229</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderRotation</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">rotation</span><span class="o">*</span><span class="mi">6</span><span class="p">))</span>
</span><span id="GeometryController-2230"><a href="#GeometryController-2230"><span class="linenos">2230</span></a>       
</span><span id="GeometryController-2231"><a href="#GeometryController-2231"><span class="linenos">2231</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setValues</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
</span><span id="GeometryController-2232"><a href="#GeometryController-2232"><span class="linenos">2232</span></a>
</span><span id="GeometryController-2233"><a href="#GeometryController-2233"><span class="linenos">2233</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">True</span>
</span></pre></div>


            <div class="docstring"><p>Controller for geometric transformations and image adjustments.</p>

<p>This class manages geometric processing controls including cropping adjustments,
rotation, and spatial positioning. It provides essential tools for correcting
perspective issues, adjusting composition, and applying geometric corrections
to HDR images while preserving image quality.</p>

<p>The geometry controller handles precision adjustments that are critical for
professional HDR photography, especially when correcting architectural
photography or adjusting horizon lines.</p>

<p>Attributes:
    - parent: Parent controller for coordination
    - model (model.GeometryModel): Geometric transformation data model
    - view (view.GeometryView): Geometry adjustment interface
    - callBackActive (bool): Enable/disable callback processing</p>
</div>


                            <div id="GeometryController.__init__" class="classattr">
                                        <input id="GeometryController.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">GeometryController</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">parent</span></span>)</span>

                <label class="view-source-button" for="GeometryController.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GeometryController.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GeometryController.__init__-2168"><a href="#GeometryController.__init__-2168"><span class="linenos">2168</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span> <span class="p">):</span>
</span><span id="GeometryController.__init__-2169"><a href="#GeometryController.__init__-2169"><span class="linenos">2169</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GeometryController.__init__-2170"><a href="#GeometryController.__init__-2170"><span class="linenos">2170</span></a><span class="sd">        Initialize the geometry controller.</span>
</span><span id="GeometryController.__init__-2171"><a href="#GeometryController.__init__-2171"><span class="linenos">2171</span></a><span class="sd">        </span>
</span><span id="GeometryController.__init__-2172"><a href="#GeometryController.__init__-2172"><span class="linenos">2172</span></a><span class="sd">        Args:</span>
</span><span id="GeometryController.__init__-2173"><a href="#GeometryController.__init__-2173"><span class="linenos">2173</span></a><span class="sd">            parent: Parent controller for coordination and processing pipeline access</span>
</span><span id="GeometryController.__init__-2174"><a href="#GeometryController.__init__-2174"><span class="linenos">2174</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GeometryController.__init__-2175"><a href="#GeometryController.__init__-2175"><span class="linenos">2175</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; GeometryController.__init__(&quot;</span><span class="p">,</span><span class="s2">&quot;) &quot;</span><span class="p">)</span>
</span><span id="GeometryController.__init__-2176"><a href="#GeometryController.__init__-2176"><span class="linenos">2176</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
</span><span id="GeometryController.__init__-2177"><a href="#GeometryController.__init__-2177"><span class="linenos">2177</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span>    <span class="n">model</span><span class="o">.</span><span class="n">GeometryModel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="GeometryController.__init__-2178"><a href="#GeometryController.__init__-2178"><span class="linenos">2178</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span>     <span class="n">view</span><span class="o">.</span><span class="n">GeometryView</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="GeometryController.__init__-2179"><a href="#GeometryController.__init__-2179"><span class="linenos">2179</span></a>
</span><span id="GeometryController.__init__-2180"><a href="#GeometryController.__init__-2180"><span class="linenos">2180</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">True</span>
</span></pre></div>


            <div class="docstring"><p>Initialize the geometry controller.</p>

<p>Args:
    parent: Parent controller for coordination and processing pipeline access</p>
</div>


                            </div>
                            <div id="GeometryController.parent" class="classattr">
                                <div class="attr variable">
            <span class="name">parent</span>

        
    </div>
    <a class="headerlink" href="#GeometryController.parent"></a>
    
    

                            </div>
                            <div id="GeometryController.model" class="classattr">
                                <div class="attr variable">
            <span class="name">model</span>

        
    </div>
    <a class="headerlink" href="#GeometryController.model"></a>
    
    

                            </div>
                            <div id="GeometryController.view" class="classattr">
                                <div class="attr variable">
            <span class="name">view</span>

        
    </div>
    <a class="headerlink" href="#GeometryController.view"></a>
    
    

                            </div>
                            <div id="GeometryController.callBackActive" class="classattr">
                                <div class="attr variable">
            <span class="name">callBackActive</span>

        
    </div>
    <a class="headerlink" href="#GeometryController.callBackActive"></a>
    
    

                            </div>
                            <div id="GeometryController.sliderCroppingVerticalAdjustementChange" class="classattr">
                                        <input id="GeometryController.sliderCroppingVerticalAdjustementChange-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">sliderCroppingVerticalAdjustementChange</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">v</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="GeometryController.sliderCroppingVerticalAdjustementChange-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GeometryController.sliderCroppingVerticalAdjustementChange"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GeometryController.sliderCroppingVerticalAdjustementChange-2182"><a href="#GeometryController.sliderCroppingVerticalAdjustementChange-2182"><span class="linenos">2182</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">sliderCroppingVerticalAdjustementChange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">v</span><span class="p">):</span>
</span><span id="GeometryController.sliderCroppingVerticalAdjustementChange-2183"><a href="#GeometryController.sliderCroppingVerticalAdjustementChange-2183"><span class="linenos">2183</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GeometryController.sliderCroppingVerticalAdjustementChange-2184"><a href="#GeometryController.sliderCroppingVerticalAdjustementChange-2184"><span class="linenos">2184</span></a><span class="sd">        Handle vertical cropping position adjustments.</span>
</span><span id="GeometryController.sliderCroppingVerticalAdjustementChange-2185"><a href="#GeometryController.sliderCroppingVerticalAdjustementChange-2185"><span class="linenos">2185</span></a><span class="sd">        </span>
</span><span id="GeometryController.sliderCroppingVerticalAdjustementChange-2186"><a href="#GeometryController.sliderCroppingVerticalAdjustementChange-2186"><span class="linenos">2186</span></a><span class="sd">        Adjusts the vertical position of the crop area, allowing users to</span>
</span><span id="GeometryController.sliderCroppingVerticalAdjustementChange-2187"><a href="#GeometryController.sliderCroppingVerticalAdjustementChange-2187"><span class="linenos">2187</span></a><span class="sd">        reframe the image vertically while maintaining the aspect ratio.</span>
</span><span id="GeometryController.sliderCroppingVerticalAdjustementChange-2188"><a href="#GeometryController.sliderCroppingVerticalAdjustementChange-2188"><span class="linenos">2188</span></a><span class="sd">        </span>
</span><span id="GeometryController.sliderCroppingVerticalAdjustementChange-2189"><a href="#GeometryController.sliderCroppingVerticalAdjustementChange-2189"><span class="linenos">2189</span></a><span class="sd">        Args:</span>
</span><span id="GeometryController.sliderCroppingVerticalAdjustementChange-2190"><a href="#GeometryController.sliderCroppingVerticalAdjustementChange-2190"><span class="linenos">2190</span></a><span class="sd">            v (float): Vertical adjustment value (typically -100 to +100)</span>
</span><span id="GeometryController.sliderCroppingVerticalAdjustementChange-2191"><a href="#GeometryController.sliderCroppingVerticalAdjustementChange-2191"><span class="linenos">2191</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GeometryController.sliderCroppingVerticalAdjustementChange-2192"><a href="#GeometryController.sliderCroppingVerticalAdjustementChange-2192"><span class="linenos">2192</span></a>        <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setCroppingVerticalAdjustement</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
</span><span id="GeometryController.sliderCroppingVerticalAdjustementChange-2193"><a href="#GeometryController.sliderCroppingVerticalAdjustementChange-2193"><span class="linenos">2193</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">changeGeometry</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Handle vertical cropping position adjustments.</p>

<p>Adjusts the vertical position of the crop area, allowing users to
reframe the image vertically while maintaining the aspect ratio.</p>

<p>Args:
    v (float): Vertical adjustment value (typically -100 to +100)</p>
</div>


                            </div>
                            <div id="GeometryController.sliderRotationChange" class="classattr">
                                        <input id="GeometryController.sliderRotationChange-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">sliderRotationChange</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">v</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="GeometryController.sliderRotationChange-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GeometryController.sliderRotationChange"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GeometryController.sliderRotationChange-2195"><a href="#GeometryController.sliderRotationChange-2195"><span class="linenos">2195</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">sliderRotationChange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">v</span><span class="p">):</span>
</span><span id="GeometryController.sliderRotationChange-2196"><a href="#GeometryController.sliderRotationChange-2196"><span class="linenos">2196</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GeometryController.sliderRotationChange-2197"><a href="#GeometryController.sliderRotationChange-2197"><span class="linenos">2197</span></a><span class="sd">        Handle rotation angle adjustments.</span>
</span><span id="GeometryController.sliderRotationChange-2198"><a href="#GeometryController.sliderRotationChange-2198"><span class="linenos">2198</span></a><span class="sd">        </span>
</span><span id="GeometryController.sliderRotationChange-2199"><a href="#GeometryController.sliderRotationChange-2199"><span class="linenos">2199</span></a><span class="sd">        Adjusts the image rotation angle for correcting tilted horizons or</span>
</span><span id="GeometryController.sliderRotationChange-2200"><a href="#GeometryController.sliderRotationChange-2200"><span class="linenos">2200</span></a><span class="sd">        perspective issues. Rotation is applied with automatic cropping to</span>
</span><span id="GeometryController.sliderRotationChange-2201"><a href="#GeometryController.sliderRotationChange-2201"><span class="linenos">2201</span></a><span class="sd">        maintain rectangular output.</span>
</span><span id="GeometryController.sliderRotationChange-2202"><a href="#GeometryController.sliderRotationChange-2202"><span class="linenos">2202</span></a><span class="sd">        </span>
</span><span id="GeometryController.sliderRotationChange-2203"><a href="#GeometryController.sliderRotationChange-2203"><span class="linenos">2203</span></a><span class="sd">        Args:</span>
</span><span id="GeometryController.sliderRotationChange-2204"><a href="#GeometryController.sliderRotationChange-2204"><span class="linenos">2204</span></a><span class="sd">            v (float): Rotation angle in degrees</span>
</span><span id="GeometryController.sliderRotationChange-2205"><a href="#GeometryController.sliderRotationChange-2205"><span class="linenos">2205</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GeometryController.sliderRotationChange-2206"><a href="#GeometryController.sliderRotationChange-2206"><span class="linenos">2206</span></a>        <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setRotation</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
</span><span id="GeometryController.sliderRotationChange-2207"><a href="#GeometryController.sliderRotationChange-2207"><span class="linenos">2207</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">changeGeometry</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Handle rotation angle adjustments.</p>

<p>Adjusts the image rotation angle for correcting tilted horizons or
perspective issues. Rotation is applied with automatic cropping to
maintain rectangular output.</p>

<p>Args:
    v (float): Rotation angle in degrees</p>
</div>


                            </div>
                            <div id="GeometryController.setValues" class="classattr">
                                        <input id="GeometryController.setValues-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">setValues</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">values</span>, </span><span class="param"><span class="n">callBackActive</span><span class="o">=</span><span class="kc">False</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="GeometryController.setValues-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#GeometryController.setValues"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="GeometryController.setValues-2209"><a href="#GeometryController.setValues-2209"><span class="linenos">2209</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setValues</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">,</span> <span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="GeometryController.setValues-2210"><a href="#GeometryController.setValues-2210"><span class="linenos">2210</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="GeometryController.setValues-2211"><a href="#GeometryController.setValues-2211"><span class="linenos">2211</span></a><span class="sd">        Set all geometry parameters programmatically.</span>
</span><span id="GeometryController.setValues-2212"><a href="#GeometryController.setValues-2212"><span class="linenos">2212</span></a><span class="sd">        </span>
</span><span id="GeometryController.setValues-2213"><a href="#GeometryController.setValues-2213"><span class="linenos">2213</span></a><span class="sd">        Updates all geometric transformation controls simultaneously, typically</span>
</span><span id="GeometryController.setValues-2214"><a href="#GeometryController.setValues-2214"><span class="linenos">2214</span></a><span class="sd">        used when loading saved geometry settings or batch updates.</span>
</span><span id="GeometryController.setValues-2215"><a href="#GeometryController.setValues-2215"><span class="linenos">2215</span></a><span class="sd">        </span>
</span><span id="GeometryController.setValues-2216"><a href="#GeometryController.setValues-2216"><span class="linenos">2216</span></a><span class="sd">        Args:</span>
</span><span id="GeometryController.setValues-2217"><a href="#GeometryController.setValues-2217"><span class="linenos">2217</span></a><span class="sd">            values (dict): Dictionary containing geometry parameters including</span>
</span><span id="GeometryController.setValues-2218"><a href="#GeometryController.setValues-2218"><span class="linenos">2218</span></a><span class="sd">                          &#39;up&#39; (vertical adjustment) and &#39;rotation&#39; (angle)</span>
</span><span id="GeometryController.setValues-2219"><a href="#GeometryController.setValues-2219"><span class="linenos">2219</span></a><span class="sd">            callBackActive (bool, optional): Whether to trigger callbacks (default: False)</span>
</span><span id="GeometryController.setValues-2220"><a href="#GeometryController.setValues-2220"><span class="linenos">2220</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="GeometryController.setValues-2221"><a href="#GeometryController.setValues-2221"><span class="linenos">2221</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; GeometryController.setValue(&quot;</span><span class="p">,</span><span class="n">values</span><span class="p">,</span><span class="s2">&quot;) &quot;</span><span class="p">)</span>
</span><span id="GeometryController.setValues-2222"><a href="#GeometryController.setValues-2222"><span class="linenos">2222</span></a>
</span><span id="GeometryController.setValues-2223"><a href="#GeometryController.setValues-2223"><span class="linenos">2223</span></a>        <span class="n">up</span> <span class="o">=</span>        <span class="n">values</span><span class="p">[</span><span class="s1">&#39;up&#39;</span><span class="p">]</span>        <span class="k">if</span> <span class="s1">&#39;up&#39;</span> <span class="ow">in</span> <span class="n">values</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>        <span class="k">else</span> <span class="mf">0.0</span>
</span><span id="GeometryController.setValues-2224"><a href="#GeometryController.setValues-2224"><span class="linenos">2224</span></a>        <span class="n">rotation</span> <span class="o">=</span>  <span class="n">values</span><span class="p">[</span><span class="s1">&#39;rotation&#39;</span><span class="p">]</span>  <span class="k">if</span> <span class="s1">&#39;rotation&#39;</span> <span class="ow">in</span> <span class="n">values</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>  <span class="k">else</span> <span class="mf">0.0</span>
</span><span id="GeometryController.setValues-2225"><a href="#GeometryController.setValues-2225"><span class="linenos">2225</span></a>
</span><span id="GeometryController.setValues-2226"><a href="#GeometryController.setValues-2226"><span class="linenos">2226</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="n">callBackActive</span>
</span><span id="GeometryController.setValues-2227"><a href="#GeometryController.setValues-2227"><span class="linenos">2227</span></a>
</span><span id="GeometryController.setValues-2228"><a href="#GeometryController.setValues-2228"><span class="linenos">2228</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderCroppingVerticalAdjustement</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">up</span><span class="p">))</span>
</span><span id="GeometryController.setValues-2229"><a href="#GeometryController.setValues-2229"><span class="linenos">2229</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">sliderRotation</span><span class="o">.</span><span class="n">setValue</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">rotation</span><span class="o">*</span><span class="mi">6</span><span class="p">))</span>
</span><span id="GeometryController.setValues-2230"><a href="#GeometryController.setValues-2230"><span class="linenos">2230</span></a>       
</span><span id="GeometryController.setValues-2231"><a href="#GeometryController.setValues-2231"><span class="linenos">2231</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setValues</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
</span><span id="GeometryController.setValues-2232"><a href="#GeometryController.setValues-2232"><span class="linenos">2232</span></a>
</span><span id="GeometryController.setValues-2233"><a href="#GeometryController.setValues-2233"><span class="linenos">2233</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">True</span>
</span></pre></div>


            <div class="docstring"><p>Set all geometry parameters programmatically.</p>

<p>Updates all geometric transformation controls simultaneously, typically
used when loading saved geometry settings or batch updates.</p>

<p>Args:
    values (dict): Dictionary containing geometry parameters including
                  'up' (vertical adjustment) and 'rotation' (angle)
    callBackActive (bool, optional): Whether to trigger callbacks (default: False)</p>
</div>


                            </div>
                </section>
                <section id="ImageAestheticsController">
                            <input id="ImageAestheticsController-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">ImageAestheticsController</span>:

                <label class="view-source-button" for="ImageAestheticsController-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ImageAestheticsController"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ImageAestheticsController-2237"><a href="#ImageAestheticsController-2237"><span class="linenos">2237</span></a><span class="k">class</span><span class="w"> </span><span class="nc">ImageAestheticsController</span><span class="p">:</span>
</span><span id="ImageAestheticsController-2238"><a href="#ImageAestheticsController-2238"><span class="linenos">2238</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ImageAestheticsController-2239"><a href="#ImageAestheticsController-2239"><span class="linenos">2239</span></a><span class="sd">    Controller for image aesthetics analysis and display.</span>
</span><span id="ImageAestheticsController-2240"><a href="#ImageAestheticsController-2240"><span class="linenos">2240</span></a><span class="sd">    </span>
</span><span id="ImageAestheticsController-2241"><a href="#ImageAestheticsController-2241"><span class="linenos">2241</span></a><span class="sd">    This class manages the MIAM (Machine Intelligence for Aesthetic Metrics)</span>
</span><span id="ImageAestheticsController-2242"><a href="#ImageAestheticsController-2242"><span class="linenos">2242</span></a><span class="sd">    interface, providing comprehensive aesthetic analysis of HDR images including</span>
</span><span id="ImageAestheticsController-2243"><a href="#ImageAestheticsController-2243"><span class="linenos">2243</span></a><span class="sd">    quality scoring, color palette extraction, and aesthetic metrics visualization.</span>
</span><span id="ImageAestheticsController-2244"><a href="#ImageAestheticsController-2244"><span class="linenos">2244</span></a><span class="sd">    </span>
</span><span id="ImageAestheticsController-2245"><a href="#ImageAestheticsController-2245"><span class="linenos">2245</span></a><span class="sd">    The aesthetics controller integrates computer vision algorithms to evaluate</span>
</span><span id="ImageAestheticsController-2246"><a href="#ImageAestheticsController-2246"><span class="linenos">2246</span></a><span class="sd">    image quality across multiple dimensions, helping photographers understand</span>
</span><span id="ImageAestheticsController-2247"><a href="#ImageAestheticsController-2247"><span class="linenos">2247</span></a><span class="sd">    the aesthetic properties of their HDR images and make informed editing decisions.</span>
</span><span id="ImageAestheticsController-2248"><a href="#ImageAestheticsController-2248"><span class="linenos">2248</span></a><span class="sd">    </span>
</span><span id="ImageAestheticsController-2249"><a href="#ImageAestheticsController-2249"><span class="linenos">2249</span></a><span class="sd">    Attributes:</span>
</span><span id="ImageAestheticsController-2250"><a href="#ImageAestheticsController-2250"><span class="linenos">2250</span></a><span class="sd">        - parent: Parent controller for coordination</span>
</span><span id="ImageAestheticsController-2251"><a href="#ImageAestheticsController-2251"><span class="linenos">2251</span></a><span class="sd">        - model (model.ImageAestheticsModel): Aesthetics analysis data model</span>
</span><span id="ImageAestheticsController-2252"><a href="#ImageAestheticsController-2252"><span class="linenos">2252</span></a><span class="sd">        - view (view.ImageAestheticsView): Aesthetics display interface</span>
</span><span id="ImageAestheticsController-2253"><a href="#ImageAestheticsController-2253"><span class="linenos">2253</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="ImageAestheticsController-2254"><a href="#ImageAestheticsController-2254"><span class="linenos">2254</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">HDRcontroller</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="ImageAestheticsController-2255"><a href="#ImageAestheticsController-2255"><span class="linenos">2255</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ImageAestheticsController-2256"><a href="#ImageAestheticsController-2256"><span class="linenos">2256</span></a><span class="sd">        Initialize the image aesthetics controller.</span>
</span><span id="ImageAestheticsController-2257"><a href="#ImageAestheticsController-2257"><span class="linenos">2257</span></a><span class="sd">        </span>
</span><span id="ImageAestheticsController-2258"><a href="#ImageAestheticsController-2258"><span class="linenos">2258</span></a><span class="sd">        Args:</span>
</span><span id="ImageAestheticsController-2259"><a href="#ImageAestheticsController-2259"><span class="linenos">2259</span></a><span class="sd">            parent: Parent controller for coordination</span>
</span><span id="ImageAestheticsController-2260"><a href="#ImageAestheticsController-2260"><span class="linenos">2260</span></a><span class="sd">            HDRcontroller: HDR display controller (not used in current implementation)</span>
</span><span id="ImageAestheticsController-2261"><a href="#ImageAestheticsController-2261"><span class="linenos">2261</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ImageAestheticsController-2262"><a href="#ImageAestheticsController-2262"><span class="linenos">2262</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; AestheticsImageController.__init__(&quot;</span><span class="p">,</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
</span><span id="ImageAestheticsController-2263"><a href="#ImageAestheticsController-2263"><span class="linenos">2263</span></a>
</span><span id="ImageAestheticsController-2264"><a href="#ImageAestheticsController-2264"><span class="linenos">2264</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
</span><span id="ImageAestheticsController-2265"><a href="#ImageAestheticsController-2265"><span class="linenos">2265</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">ImageAestheticsModel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="ImageAestheticsController-2266"><a href="#ImageAestheticsController-2266"><span class="linenos">2266</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">ImageAestheticsView</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="ImageAestheticsController-2267"><a href="#ImageAestheticsController-2267"><span class="linenos">2267</span></a>    <span class="c1"># --------------------------------------------------------------------------------------</span>
</span><span id="ImageAestheticsController-2268"><a href="#ImageAestheticsController-2268"><span class="linenos">2268</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">buildView</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">processPipe</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="ImageAestheticsController-2269"><a href="#ImageAestheticsController-2269"><span class="linenos">2269</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ImageAestheticsController-2270"><a href="#ImageAestheticsController-2270"><span class="linenos">2270</span></a><span class="sd">        Build or rebuild the aesthetics interface view.</span>
</span><span id="ImageAestheticsController-2271"><a href="#ImageAestheticsController-2271"><span class="linenos">2271</span></a><span class="sd">        </span>
</span><span id="ImageAestheticsController-2272"><a href="#ImageAestheticsController-2272"><span class="linenos">2272</span></a><span class="sd">        Reconstructs the aesthetics analysis interface, typically called when</span>
</span><span id="ImageAestheticsController-2273"><a href="#ImageAestheticsController-2273"><span class="linenos">2273</span></a><span class="sd">        switching to the aesthetics panel or refreshing the analysis display.</span>
</span><span id="ImageAestheticsController-2274"><a href="#ImageAestheticsController-2274"><span class="linenos">2274</span></a><span class="sd">        </span>
</span><span id="ImageAestheticsController-2275"><a href="#ImageAestheticsController-2275"><span class="linenos">2275</span></a><span class="sd">        Args:</span>
</span><span id="ImageAestheticsController-2276"><a href="#ImageAestheticsController-2276"><span class="linenos">2276</span></a><span class="sd">            processPipe: Optional processing pipeline to analyze during build</span>
</span><span id="ImageAestheticsController-2277"><a href="#ImageAestheticsController-2277"><span class="linenos">2277</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ImageAestheticsController-2278"><a href="#ImageAestheticsController-2278"><span class="linenos">2278</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; AestheticsImageController.buildView()&quot;</span><span class="p">)</span>
</span><span id="ImageAestheticsController-2279"><a href="#ImageAestheticsController-2279"><span class="linenos">2279</span></a>
</span><span id="ImageAestheticsController-2280"><a href="#ImageAestheticsController-2280"><span class="linenos">2280</span></a>        <span class="c1"># called when MultiDockController recall a controller/view </span>
</span><span id="ImageAestheticsController-2281"><a href="#ImageAestheticsController-2281"><span class="linenos">2281</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">ImageAestheticsView</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="ImageAestheticsController-2282"><a href="#ImageAestheticsController-2282"><span class="linenos">2282</span></a>        <span class="k">if</span> <span class="n">processPipe</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">setProcessPipe</span><span class="p">(</span><span class="n">processPipe</span><span class="p">)</span>
</span><span id="ImageAestheticsController-2283"><a href="#ImageAestheticsController-2283"><span class="linenos">2283</span></a>    <span class="c1"># --------------------------------------------------------------------------------------</span>
</span><span id="ImageAestheticsController-2284"><a href="#ImageAestheticsController-2284"><span class="linenos">2284</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setProcessPipe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">processPipe</span><span class="p">):</span> 
</span><span id="ImageAestheticsController-2285"><a href="#ImageAestheticsController-2285"><span class="linenos">2285</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ImageAestheticsController-2286"><a href="#ImageAestheticsController-2286"><span class="linenos">2286</span></a><span class="sd">        Set processing pipeline for aesthetic analysis.</span>
</span><span id="ImageAestheticsController-2287"><a href="#ImageAestheticsController-2287"><span class="linenos">2287</span></a><span class="sd">        </span>
</span><span id="ImageAestheticsController-2288"><a href="#ImageAestheticsController-2288"><span class="linenos">2288</span></a><span class="sd">        Configures the aesthetics interface to analyze the specified processing</span>
</span><span id="ImageAestheticsController-2289"><a href="#ImageAestheticsController-2289"><span class="linenos">2289</span></a><span class="sd">        pipeline&#39;s image, computing aesthetic metrics and generating visual</span>
</span><span id="ImageAestheticsController-2290"><a href="#ImageAestheticsController-2290"><span class="linenos">2290</span></a><span class="sd">        analysis including color palette extraction.</span>
</span><span id="ImageAestheticsController-2291"><a href="#ImageAestheticsController-2291"><span class="linenos">2291</span></a><span class="sd">        </span>
</span><span id="ImageAestheticsController-2292"><a href="#ImageAestheticsController-2292"><span class="linenos">2292</span></a><span class="sd">        Args:</span>
</span><span id="ImageAestheticsController-2293"><a href="#ImageAestheticsController-2293"><span class="linenos">2293</span></a><span class="sd">            processPipe: Processing pipeline containing image for analysis</span>
</span><span id="ImageAestheticsController-2294"><a href="#ImageAestheticsController-2294"><span class="linenos">2294</span></a><span class="sd">            </span>
</span><span id="ImageAestheticsController-2295"><a href="#ImageAestheticsController-2295"><span class="linenos">2295</span></a><span class="sd">        Returns:</span>
</span><span id="ImageAestheticsController-2296"><a href="#ImageAestheticsController-2296"><span class="linenos">2296</span></a><span class="sd">            bool: True (always successful for aesthetics analysis)</span>
</span><span id="ImageAestheticsController-2297"><a href="#ImageAestheticsController-2297"><span class="linenos">2297</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ImageAestheticsController-2298"><a href="#ImageAestheticsController-2298"><span class="linenos">2298</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; AestheticsImageController.setProcessPipe()&quot;</span><span class="p">)</span>
</span><span id="ImageAestheticsController-2299"><a href="#ImageAestheticsController-2299"><span class="linenos">2299</span></a>
</span><span id="ImageAestheticsController-2300"><a href="#ImageAestheticsController-2300"><span class="linenos">2300</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setProcessPipe</span><span class="p">(</span><span class="n">processPipe</span><span class="p">)</span>
</span><span id="ImageAestheticsController-2301"><a href="#ImageAestheticsController-2301"><span class="linenos">2301</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">setProcessPipe</span><span class="p">(</span><span class="n">processPipe</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getPaletteImage</span><span class="p">())</span>
</span><span id="ImageAestheticsController-2302"><a href="#ImageAestheticsController-2302"><span class="linenos">2302</span></a>
</span><span id="ImageAestheticsController-2303"><a href="#ImageAestheticsController-2303"><span class="linenos">2303</span></a>        <span class="k">return</span> <span class="kc">True</span>
</span></pre></div>


            <div class="docstring"><p>Controller for image aesthetics analysis and display.</p>

<p>This class manages the MIAM (Machine Intelligence for Aesthetic Metrics)
interface, providing comprehensive aesthetic analysis of HDR images including
quality scoring, color palette extraction, and aesthetic metrics visualization.</p>

<p>The aesthetics controller integrates computer vision algorithms to evaluate
image quality across multiple dimensions, helping photographers understand
the aesthetic properties of their HDR images and make informed editing decisions.</p>

<p>Attributes:
    - parent: Parent controller for coordination
    - model (model.ImageAestheticsModel): Aesthetics analysis data model
    - view (view.ImageAestheticsView): Aesthetics display interface</p>
</div>


                            <div id="ImageAestheticsController.__init__" class="classattr">
                                        <input id="ImageAestheticsController.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">ImageAestheticsController</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">parent</span><span class="o">=</span><span class="kc">None</span>, </span><span class="param"><span class="n">HDRcontroller</span><span class="o">=</span><span class="kc">None</span></span>)</span>

                <label class="view-source-button" for="ImageAestheticsController.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ImageAestheticsController.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ImageAestheticsController.__init__-2254"><a href="#ImageAestheticsController.__init__-2254"><span class="linenos">2254</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">HDRcontroller</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="ImageAestheticsController.__init__-2255"><a href="#ImageAestheticsController.__init__-2255"><span class="linenos">2255</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ImageAestheticsController.__init__-2256"><a href="#ImageAestheticsController.__init__-2256"><span class="linenos">2256</span></a><span class="sd">        Initialize the image aesthetics controller.</span>
</span><span id="ImageAestheticsController.__init__-2257"><a href="#ImageAestheticsController.__init__-2257"><span class="linenos">2257</span></a><span class="sd">        </span>
</span><span id="ImageAestheticsController.__init__-2258"><a href="#ImageAestheticsController.__init__-2258"><span class="linenos">2258</span></a><span class="sd">        Args:</span>
</span><span id="ImageAestheticsController.__init__-2259"><a href="#ImageAestheticsController.__init__-2259"><span class="linenos">2259</span></a><span class="sd">            parent: Parent controller for coordination</span>
</span><span id="ImageAestheticsController.__init__-2260"><a href="#ImageAestheticsController.__init__-2260"><span class="linenos">2260</span></a><span class="sd">            HDRcontroller: HDR display controller (not used in current implementation)</span>
</span><span id="ImageAestheticsController.__init__-2261"><a href="#ImageAestheticsController.__init__-2261"><span class="linenos">2261</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ImageAestheticsController.__init__-2262"><a href="#ImageAestheticsController.__init__-2262"><span class="linenos">2262</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; AestheticsImageController.__init__(&quot;</span><span class="p">,</span><span class="s2">&quot;)&quot;</span><span class="p">)</span>
</span><span id="ImageAestheticsController.__init__-2263"><a href="#ImageAestheticsController.__init__-2263"><span class="linenos">2263</span></a>
</span><span id="ImageAestheticsController.__init__-2264"><a href="#ImageAestheticsController.__init__-2264"><span class="linenos">2264</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
</span><span id="ImageAestheticsController.__init__-2265"><a href="#ImageAestheticsController.__init__-2265"><span class="linenos">2265</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">ImageAestheticsModel</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="ImageAestheticsController.__init__-2266"><a href="#ImageAestheticsController.__init__-2266"><span class="linenos">2266</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">ImageAestheticsView</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Initialize the image aesthetics controller.</p>

<p>Args:
    parent: Parent controller for coordination
    HDRcontroller: HDR display controller (not used in current implementation)</p>
</div>


                            </div>
                            <div id="ImageAestheticsController.parent" class="classattr">
                                <div class="attr variable">
            <span class="name">parent</span>

        
    </div>
    <a class="headerlink" href="#ImageAestheticsController.parent"></a>
    
    

                            </div>
                            <div id="ImageAestheticsController.model" class="classattr">
                                <div class="attr variable">
            <span class="name">model</span>

        
    </div>
    <a class="headerlink" href="#ImageAestheticsController.model"></a>
    
    

                            </div>
                            <div id="ImageAestheticsController.view" class="classattr">
                                <div class="attr variable">
            <span class="name">view</span>

        
    </div>
    <a class="headerlink" href="#ImageAestheticsController.view"></a>
    
    

                            </div>
                            <div id="ImageAestheticsController.buildView" class="classattr">
                                        <input id="ImageAestheticsController.buildView-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">buildView</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">processPipe</span><span class="o">=</span><span class="kc">None</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ImageAestheticsController.buildView-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ImageAestheticsController.buildView"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ImageAestheticsController.buildView-2268"><a href="#ImageAestheticsController.buildView-2268"><span class="linenos">2268</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">buildView</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">processPipe</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="ImageAestheticsController.buildView-2269"><a href="#ImageAestheticsController.buildView-2269"><span class="linenos">2269</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ImageAestheticsController.buildView-2270"><a href="#ImageAestheticsController.buildView-2270"><span class="linenos">2270</span></a><span class="sd">        Build or rebuild the aesthetics interface view.</span>
</span><span id="ImageAestheticsController.buildView-2271"><a href="#ImageAestheticsController.buildView-2271"><span class="linenos">2271</span></a><span class="sd">        </span>
</span><span id="ImageAestheticsController.buildView-2272"><a href="#ImageAestheticsController.buildView-2272"><span class="linenos">2272</span></a><span class="sd">        Reconstructs the aesthetics analysis interface, typically called when</span>
</span><span id="ImageAestheticsController.buildView-2273"><a href="#ImageAestheticsController.buildView-2273"><span class="linenos">2273</span></a><span class="sd">        switching to the aesthetics panel or refreshing the analysis display.</span>
</span><span id="ImageAestheticsController.buildView-2274"><a href="#ImageAestheticsController.buildView-2274"><span class="linenos">2274</span></a><span class="sd">        </span>
</span><span id="ImageAestheticsController.buildView-2275"><a href="#ImageAestheticsController.buildView-2275"><span class="linenos">2275</span></a><span class="sd">        Args:</span>
</span><span id="ImageAestheticsController.buildView-2276"><a href="#ImageAestheticsController.buildView-2276"><span class="linenos">2276</span></a><span class="sd">            processPipe: Optional processing pipeline to analyze during build</span>
</span><span id="ImageAestheticsController.buildView-2277"><a href="#ImageAestheticsController.buildView-2277"><span class="linenos">2277</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ImageAestheticsController.buildView-2278"><a href="#ImageAestheticsController.buildView-2278"><span class="linenos">2278</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; AestheticsImageController.buildView()&quot;</span><span class="p">)</span>
</span><span id="ImageAestheticsController.buildView-2279"><a href="#ImageAestheticsController.buildView-2279"><span class="linenos">2279</span></a>
</span><span id="ImageAestheticsController.buildView-2280"><a href="#ImageAestheticsController.buildView-2280"><span class="linenos">2280</span></a>        <span class="c1"># called when MultiDockController recall a controller/view </span>
</span><span id="ImageAestheticsController.buildView-2281"><a href="#ImageAestheticsController.buildView-2281"><span class="linenos">2281</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span> <span class="n">view</span><span class="o">.</span><span class="n">ImageAestheticsView</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="ImageAestheticsController.buildView-2282"><a href="#ImageAestheticsController.buildView-2282"><span class="linenos">2282</span></a>        <span class="k">if</span> <span class="n">processPipe</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">setProcessPipe</span><span class="p">(</span><span class="n">processPipe</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Build or rebuild the aesthetics interface view.</p>

<p>Reconstructs the aesthetics analysis interface, typically called when
switching to the aesthetics panel or refreshing the analysis display.</p>

<p>Args:
    processPipe: Optional processing pipeline to analyze during build</p>
</div>


                            </div>
                            <div id="ImageAestheticsController.setProcessPipe" class="classattr">
                                        <input id="ImageAestheticsController.setProcessPipe-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">setProcessPipe</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">processPipe</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ImageAestheticsController.setProcessPipe-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ImageAestheticsController.setProcessPipe"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ImageAestheticsController.setProcessPipe-2284"><a href="#ImageAestheticsController.setProcessPipe-2284"><span class="linenos">2284</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setProcessPipe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">processPipe</span><span class="p">):</span> 
</span><span id="ImageAestheticsController.setProcessPipe-2285"><a href="#ImageAestheticsController.setProcessPipe-2285"><span class="linenos">2285</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ImageAestheticsController.setProcessPipe-2286"><a href="#ImageAestheticsController.setProcessPipe-2286"><span class="linenos">2286</span></a><span class="sd">        Set processing pipeline for aesthetic analysis.</span>
</span><span id="ImageAestheticsController.setProcessPipe-2287"><a href="#ImageAestheticsController.setProcessPipe-2287"><span class="linenos">2287</span></a><span class="sd">        </span>
</span><span id="ImageAestheticsController.setProcessPipe-2288"><a href="#ImageAestheticsController.setProcessPipe-2288"><span class="linenos">2288</span></a><span class="sd">        Configures the aesthetics interface to analyze the specified processing</span>
</span><span id="ImageAestheticsController.setProcessPipe-2289"><a href="#ImageAestheticsController.setProcessPipe-2289"><span class="linenos">2289</span></a><span class="sd">        pipeline&#39;s image, computing aesthetic metrics and generating visual</span>
</span><span id="ImageAestheticsController.setProcessPipe-2290"><a href="#ImageAestheticsController.setProcessPipe-2290"><span class="linenos">2290</span></a><span class="sd">        analysis including color palette extraction.</span>
</span><span id="ImageAestheticsController.setProcessPipe-2291"><a href="#ImageAestheticsController.setProcessPipe-2291"><span class="linenos">2291</span></a><span class="sd">        </span>
</span><span id="ImageAestheticsController.setProcessPipe-2292"><a href="#ImageAestheticsController.setProcessPipe-2292"><span class="linenos">2292</span></a><span class="sd">        Args:</span>
</span><span id="ImageAestheticsController.setProcessPipe-2293"><a href="#ImageAestheticsController.setProcessPipe-2293"><span class="linenos">2293</span></a><span class="sd">            processPipe: Processing pipeline containing image for analysis</span>
</span><span id="ImageAestheticsController.setProcessPipe-2294"><a href="#ImageAestheticsController.setProcessPipe-2294"><span class="linenos">2294</span></a><span class="sd">            </span>
</span><span id="ImageAestheticsController.setProcessPipe-2295"><a href="#ImageAestheticsController.setProcessPipe-2295"><span class="linenos">2295</span></a><span class="sd">        Returns:</span>
</span><span id="ImageAestheticsController.setProcessPipe-2296"><a href="#ImageAestheticsController.setProcessPipe-2296"><span class="linenos">2296</span></a><span class="sd">            bool: True (always successful for aesthetics analysis)</span>
</span><span id="ImageAestheticsController.setProcessPipe-2297"><a href="#ImageAestheticsController.setProcessPipe-2297"><span class="linenos">2297</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ImageAestheticsController.setProcessPipe-2298"><a href="#ImageAestheticsController.setProcessPipe-2298"><span class="linenos">2298</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; AestheticsImageController.setProcessPipe()&quot;</span><span class="p">)</span>
</span><span id="ImageAestheticsController.setProcessPipe-2299"><a href="#ImageAestheticsController.setProcessPipe-2299"><span class="linenos">2299</span></a>
</span><span id="ImageAestheticsController.setProcessPipe-2300"><a href="#ImageAestheticsController.setProcessPipe-2300"><span class="linenos">2300</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">setProcessPipe</span><span class="p">(</span><span class="n">processPipe</span><span class="p">)</span>
</span><span id="ImageAestheticsController.setProcessPipe-2301"><a href="#ImageAestheticsController.setProcessPipe-2301"><span class="linenos">2301</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">setProcessPipe</span><span class="p">(</span><span class="n">processPipe</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">getPaletteImage</span><span class="p">())</span>
</span><span id="ImageAestheticsController.setProcessPipe-2302"><a href="#ImageAestheticsController.setProcessPipe-2302"><span class="linenos">2302</span></a>
</span><span id="ImageAestheticsController.setProcessPipe-2303"><a href="#ImageAestheticsController.setProcessPipe-2303"><span class="linenos">2303</span></a>        <span class="k">return</span> <span class="kc">True</span>
</span></pre></div>


            <div class="docstring"><p>Set processing pipeline for aesthetic analysis.</p>

<p>Configures the aesthetics interface to analyze the specified processing
pipeline's image, computing aesthetic metrics and generating visual
analysis including color palette extraction.</p>

<p>Args:
    processPipe: Processing pipeline containing image for analysis</p>

<p>Returns:
    bool: True (always successful for aesthetics analysis)</p>
</div>


                            </div>
                </section>
                <section id="messageBox">
                            <input id="messageBox-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">messageBox</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">title</span>, </span><span class="param"><span class="n">text</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="messageBox-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#messageBox"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="messageBox-2309"><a href="#messageBox-2309"><span class="linenos">2309</span></a><span class="k">def</span><span class="w"> </span><span class="nf">messageBox</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
</span><span id="messageBox-2310"><a href="#messageBox-2310"><span class="linenos">2310</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="messageBox-2311"><a href="#messageBox-2311"><span class="linenos">2311</span></a><span class="sd">    Display informational message dialog.</span>
</span><span id="messageBox-2312"><a href="#messageBox-2312"><span class="linenos">2312</span></a><span class="sd">    </span>
</span><span id="messageBox-2313"><a href="#messageBox-2313"><span class="linenos">2313</span></a><span class="sd">    Creates and displays a simple message box with OK button for user notifications.</span>
</span><span id="messageBox-2314"><a href="#messageBox-2314"><span class="linenos">2314</span></a><span class="sd">    </span>
</span><span id="messageBox-2315"><a href="#messageBox-2315"><span class="linenos">2315</span></a><span class="sd">    Args:</span>
</span><span id="messageBox-2316"><a href="#messageBox-2316"><span class="linenos">2316</span></a><span class="sd">        title (str): Dialog window title</span>
</span><span id="messageBox-2317"><a href="#messageBox-2317"><span class="linenos">2317</span></a><span class="sd">        text (str): Message text to display</span>
</span><span id="messageBox-2318"><a href="#messageBox-2318"><span class="linenos">2318</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="messageBox-2319"><a href="#messageBox-2319"><span class="linenos">2319</span></a>    <span class="n">msg</span> <span class="o">=</span> <span class="n">QMessageBox</span><span class="p">()</span>
</span><span id="messageBox-2320"><a href="#messageBox-2320"><span class="linenos">2320</span></a>    <span class="n">msg</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</span><span id="messageBox-2321"><a href="#messageBox-2321"><span class="linenos">2321</span></a>    <span class="n">msg</span><span class="o">.</span><span class="n">setStandardButtons</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Ok</span><span class="p">)</span>
</span><span id="messageBox-2322"><a href="#messageBox-2322"><span class="linenos">2322</span></a>    <span class="n">msg</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
</span><span id="messageBox-2323"><a href="#messageBox-2323"><span class="linenos">2323</span></a>    <span class="n">msg</span><span class="o">.</span><span class="n">setStandardButtons</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Ok</span><span class="p">)</span>
</span><span id="messageBox-2324"><a href="#messageBox-2324"><span class="linenos">2324</span></a>    <span class="n">msg</span><span class="o">.</span><span class="n">setEscapeButton</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Close</span><span class="p">)</span>
</span><span id="messageBox-2325"><a href="#messageBox-2325"><span class="linenos">2325</span></a>    <span class="n">msg</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Display informational message dialog.</p>

<p>Creates and displays a simple message box with OK button for user notifications.</p>

<p>Args:
    title (str): Dialog window title
    text (str): Message text to display</p>
</div>


                </section>
                <section id="okCancelBox">
                            <input id="okCancelBox-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">okCancelBox</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">title</span>, </span><span class="param"><span class="n">text</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="okCancelBox-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#okCancelBox"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="okCancelBox-2327"><a href="#okCancelBox-2327"><span class="linenos">2327</span></a><span class="k">def</span><span class="w"> </span><span class="nf">okCancelBox</span><span class="p">(</span><span class="n">title</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
</span><span id="okCancelBox-2328"><a href="#okCancelBox-2328"><span class="linenos">2328</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="okCancelBox-2329"><a href="#okCancelBox-2329"><span class="linenos">2329</span></a><span class="sd">    Display confirmation dialog with OK/Cancel options.</span>
</span><span id="okCancelBox-2330"><a href="#okCancelBox-2330"><span class="linenos">2330</span></a><span class="sd">    </span>
</span><span id="okCancelBox-2331"><a href="#okCancelBox-2331"><span class="linenos">2331</span></a><span class="sd">    Creates and displays a confirmation dialog allowing user to proceed or cancel.</span>
</span><span id="okCancelBox-2332"><a href="#okCancelBox-2332"><span class="linenos">2332</span></a><span class="sd">    </span>
</span><span id="okCancelBox-2333"><a href="#okCancelBox-2333"><span class="linenos">2333</span></a><span class="sd">    Args:</span>
</span><span id="okCancelBox-2334"><a href="#okCancelBox-2334"><span class="linenos">2334</span></a><span class="sd">        title (str): Dialog window title</span>
</span><span id="okCancelBox-2335"><a href="#okCancelBox-2335"><span class="linenos">2335</span></a><span class="sd">        text (str): Confirmation message text</span>
</span><span id="okCancelBox-2336"><a href="#okCancelBox-2336"><span class="linenos">2336</span></a><span class="sd">        </span>
</span><span id="okCancelBox-2337"><a href="#okCancelBox-2337"><span class="linenos">2337</span></a><span class="sd">    Returns:</span>
</span><span id="okCancelBox-2338"><a href="#okCancelBox-2338"><span class="linenos">2338</span></a><span class="sd">        int: User&#39;s choice (QMessageBox.Ok or QMessageBox.Cancel)</span>
</span><span id="okCancelBox-2339"><a href="#okCancelBox-2339"><span class="linenos">2339</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="okCancelBox-2340"><a href="#okCancelBox-2340"><span class="linenos">2340</span></a>    <span class="n">msg</span> <span class="o">=</span> <span class="n">QMessageBox</span><span class="p">()</span>
</span><span id="okCancelBox-2341"><a href="#okCancelBox-2341"><span class="linenos">2341</span></a>    <span class="n">msg</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</span><span id="okCancelBox-2342"><a href="#okCancelBox-2342"><span class="linenos">2342</span></a>    <span class="n">msg</span><span class="o">.</span><span class="n">setWindowTitle</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
</span><span id="okCancelBox-2343"><a href="#okCancelBox-2343"><span class="linenos">2343</span></a>    <span class="n">msg</span><span class="o">.</span><span class="n">setStandardButtons</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Ok</span> <span class="o">|</span> <span class="n">QMessageBox</span><span class="o">.</span><span class="n">Cancel</span><span class="p">)</span>
</span><span id="okCancelBox-2344"><a href="#okCancelBox-2344"><span class="linenos">2344</span></a>    <span class="n">msg</span><span class="o">.</span><span class="n">setEscapeButton</span><span class="p">(</span><span class="n">QMessageBox</span><span class="o">.</span><span class="n">Close</span><span class="p">)</span>
</span><span id="okCancelBox-2345"><a href="#okCancelBox-2345"><span class="linenos">2345</span></a>    <span class="k">return</span> <span class="n">msg</span><span class="o">.</span><span class="n">exec_</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Display confirmation dialog with OK/Cancel options.</p>

<p>Creates and displays a confirmation dialog allowing user to proceed or cancel.</p>

<p>Args:
    title (str): Dialog window title
    text (str): Confirmation message text</p>

<p>Returns:
    int: User's choice (QMessageBox.Ok or QMessageBox.Cancel)</p>
</div>


                </section>
                <section id="ColorEditorsAutoController">
                            <input id="ColorEditorsAutoController-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">ColorEditorsAutoController</span>:

                <label class="view-source-button" for="ColorEditorsAutoController-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ColorEditorsAutoController"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ColorEditorsAutoController-2349"><a href="#ColorEditorsAutoController-2349"><span class="linenos">2349</span></a><span class="k">class</span><span class="w">  </span><span class="nc">ColorEditorsAutoController</span><span class="p">:</span>
</span><span id="ColorEditorsAutoController-2350"><a href="#ColorEditorsAutoController-2350"><span class="linenos">2350</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ColorEditorsAutoController-2351"><a href="#ColorEditorsAutoController-2351"><span class="linenos">2351</span></a><span class="sd">    Controller for automatic color editor configuration and management.</span>
</span><span id="ColorEditorsAutoController-2352"><a href="#ColorEditorsAutoController-2352"><span class="linenos">2352</span></a><span class="sd">    </span>
</span><span id="ColorEditorsAutoController-2353"><a href="#ColorEditorsAutoController-2353"><span class="linenos">2353</span></a><span class="sd">    This class provides automated color editing capabilities by analyzing image</span>
</span><span id="ColorEditorsAutoController-2354"><a href="#ColorEditorsAutoController-2354"><span class="linenos">2354</span></a><span class="sd">    content and automatically configuring multiple color editor instances with</span>
</span><span id="ColorEditorsAutoController-2355"><a href="#ColorEditorsAutoController-2355"><span class="linenos">2355</span></a><span class="sd">    optimal settings. It uses advanced algorithms to identify dominant colors</span>
</span><span id="ColorEditorsAutoController-2356"><a href="#ColorEditorsAutoController-2356"><span class="linenos">2356</span></a><span class="sd">    and suggest appropriate editing parameters for professional color grading.</span>
</span><span id="ColorEditorsAutoController-2357"><a href="#ColorEditorsAutoController-2357"><span class="linenos">2357</span></a><span class="sd">    </span>
</span><span id="ColorEditorsAutoController-2358"><a href="#ColorEditorsAutoController-2358"><span class="linenos">2358</span></a><span class="sd">    The automatic color editor system streamlines the workflow for complex color</span>
</span><span id="ColorEditorsAutoController-2359"><a href="#ColorEditorsAutoController-2359"><span class="linenos">2359</span></a><span class="sd">    corrections by providing intelligent starting points for manual fine-tuning.</span>
</span><span id="ColorEditorsAutoController-2360"><a href="#ColorEditorsAutoController-2360"><span class="linenos">2360</span></a><span class="sd">    </span>
</span><span id="ColorEditorsAutoController-2361"><a href="#ColorEditorsAutoController-2361"><span class="linenos">2361</span></a><span class="sd">    Attributes:</span>
</span><span id="ColorEditorsAutoController-2362"><a href="#ColorEditorsAutoController-2362"><span class="linenos">2362</span></a><span class="sd">        - parent: Parent controller for coordination</span>
</span><span id="ColorEditorsAutoController-2363"><a href="#ColorEditorsAutoController-2363"><span class="linenos">2363</span></a><span class="sd">        - controlled (list): List of controlled color editor instances</span>
</span><span id="ColorEditorsAutoController-2364"><a href="#ColorEditorsAutoController-2364"><span class="linenos">2364</span></a><span class="sd">        - stepName (str): Processing step name for this auto-controller</span>
</span><span id="ColorEditorsAutoController-2365"><a href="#ColorEditorsAutoController-2365"><span class="linenos">2365</span></a><span class="sd">        - model (model.ColorEditorsAutoModel): Auto-color editing data model</span>
</span><span id="ColorEditorsAutoController-2366"><a href="#ColorEditorsAutoController-2366"><span class="linenos">2366</span></a><span class="sd">        - view (view.ColorEditorsAutoView): Auto-color editing interface</span>
</span><span id="ColorEditorsAutoController-2367"><a href="#ColorEditorsAutoController-2367"><span class="linenos">2367</span></a><span class="sd">        - callBackActive (bool): Enable/disable callback processing</span>
</span><span id="ColorEditorsAutoController-2368"><a href="#ColorEditorsAutoController-2368"><span class="linenos">2368</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="ColorEditorsAutoController-2369"><a href="#ColorEditorsAutoController-2369"><span class="linenos">2369</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">controlledColorEditors</span><span class="p">,</span> <span class="n">stepName</span> <span class="p">):</span>
</span><span id="ColorEditorsAutoController-2370"><a href="#ColorEditorsAutoController-2370"><span class="linenos">2370</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ColorEditorsAutoController-2371"><a href="#ColorEditorsAutoController-2371"><span class="linenos">2371</span></a><span class="sd">        Initialize the automatic color editors controller.</span>
</span><span id="ColorEditorsAutoController-2372"><a href="#ColorEditorsAutoController-2372"><span class="linenos">2372</span></a><span class="sd">        </span>
</span><span id="ColorEditorsAutoController-2373"><a href="#ColorEditorsAutoController-2373"><span class="linenos">2373</span></a><span class="sd">        Args:</span>
</span><span id="ColorEditorsAutoController-2374"><a href="#ColorEditorsAutoController-2374"><span class="linenos">2374</span></a><span class="sd">            parent: Parent controller for coordination</span>
</span><span id="ColorEditorsAutoController-2375"><a href="#ColorEditorsAutoController-2375"><span class="linenos">2375</span></a><span class="sd">            controlledColorEditors (list): List of color editor controllers to manage</span>
</span><span id="ColorEditorsAutoController-2376"><a href="#ColorEditorsAutoController-2376"><span class="linenos">2376</span></a><span class="sd">            stepName (str): Processing step identifier for this auto-controller</span>
</span><span id="ColorEditorsAutoController-2377"><a href="#ColorEditorsAutoController-2377"><span class="linenos">2377</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ColorEditorsAutoController-2378"><a href="#ColorEditorsAutoController-2378"><span class="linenos">2378</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; ColorEditorsAutoController.__init__(&quot;</span><span class="p">,</span><span class="s2">&quot;) &quot;</span><span class="p">)</span>
</span><span id="ColorEditorsAutoController-2379"><a href="#ColorEditorsAutoController-2379"><span class="linenos">2379</span></a>
</span><span id="ColorEditorsAutoController-2380"><a href="#ColorEditorsAutoController-2380"><span class="linenos">2380</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
</span><span id="ColorEditorsAutoController-2381"><a href="#ColorEditorsAutoController-2381"><span class="linenos">2381</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">controlled</span> <span class="o">=</span> <span class="n">controlledColorEditors</span>
</span><span id="ColorEditorsAutoController-2382"><a href="#ColorEditorsAutoController-2382"><span class="linenos">2382</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stepName</span> <span class="o">=</span><span class="n">stepName</span>
</span><span id="ColorEditorsAutoController-2383"><a href="#ColorEditorsAutoController-2383"><span class="linenos">2383</span></a>
</span><span id="ColorEditorsAutoController-2384"><a href="#ColorEditorsAutoController-2384"><span class="linenos">2384</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span>    <span class="n">model</span><span class="o">.</span><span class="n">ColorEditorsAutoModel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stepName</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">controlledColorEditors</span><span class="p">),</span> <span class="n">removeBlack</span><span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
</span><span id="ColorEditorsAutoController-2385"><a href="#ColorEditorsAutoController-2385"><span class="linenos">2385</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span>     <span class="n">view</span><span class="o">.</span><span class="n">ColorEditorsAutoView</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="ColorEditorsAutoController-2386"><a href="#ColorEditorsAutoController-2386"><span class="linenos">2386</span></a>
</span><span id="ColorEditorsAutoController-2387"><a href="#ColorEditorsAutoController-2387"><span class="linenos">2387</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="ColorEditorsAutoController-2388"><a href="#ColorEditorsAutoController-2388"><span class="linenos">2388</span></a>    <span class="c1"># callbacks</span>
</span><span id="ColorEditorsAutoController-2389"><a href="#ColorEditorsAutoController-2389"><span class="linenos">2389</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">auto</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
</span><span id="ColorEditorsAutoController-2390"><a href="#ColorEditorsAutoController-2390"><span class="linenos">2390</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ColorEditorsAutoController-2391"><a href="#ColorEditorsAutoController-2391"><span class="linenos">2391</span></a><span class="sd">        Trigger automatic color editor configuration.</span>
</span><span id="ColorEditorsAutoController-2392"><a href="#ColorEditorsAutoController-2392"><span class="linenos">2392</span></a><span class="sd">        </span>
</span><span id="ColorEditorsAutoController-2393"><a href="#ColorEditorsAutoController-2393"><span class="linenos">2393</span></a><span class="sd">        Analyzes the current image to identify dominant colors and automatically</span>
</span><span id="ColorEditorsAutoController-2394"><a href="#ColorEditorsAutoController-2394"><span class="linenos">2394</span></a><span class="sd">        configures all controlled color editors with appropriate selection ranges</span>
</span><span id="ColorEditorsAutoController-2395"><a href="#ColorEditorsAutoController-2395"><span class="linenos">2395</span></a><span class="sd">        and initial editing parameters. Resets all editors before applying new</span>
</span><span id="ColorEditorsAutoController-2396"><a href="#ColorEditorsAutoController-2396"><span class="linenos">2396</span></a><span class="sd">        automatic configurations.</span>
</span><span id="ColorEditorsAutoController-2397"><a href="#ColorEditorsAutoController-2397"><span class="linenos">2397</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ColorEditorsAutoController-2398"><a href="#ColorEditorsAutoController-2398"><span class="linenos">2398</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; ColorEditorsAutoController.auto(&quot;</span><span class="p">,</span><span class="s2">&quot;) &quot;</span><span class="p">)</span>
</span><span id="ColorEditorsAutoController-2399"><a href="#ColorEditorsAutoController-2399"><span class="linenos">2399</span></a>        <span class="k">for</span> <span class="n">ce</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">controlled</span><span class="p">:</span> <span class="n">ce</span><span class="o">.</span><span class="n">resetSelection</span><span class="p">();</span> <span class="n">ce</span><span class="o">.</span><span class="n">resetEdit</span><span class="p">()</span>
</span><span id="ColorEditorsAutoController-2400"><a href="#ColorEditorsAutoController-2400"><span class="linenos">2400</span></a>        <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span>
</span><span id="ColorEditorsAutoController-2401"><a href="#ColorEditorsAutoController-2401"><span class="linenos">2401</span></a>
</span><span id="ColorEditorsAutoController-2402"><a href="#ColorEditorsAutoController-2402"><span class="linenos">2402</span></a>        <span class="k">if</span> <span class="n">values</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ColorEditorsAutoController-2403"><a href="#ColorEditorsAutoController-2403"><span class="linenos">2403</span></a>            <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">values</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">controlled</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">setValues</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Controller for automatic color editor configuration and management.</p>

<p>This class provides automated color editing capabilities by analyzing image
content and automatically configuring multiple color editor instances with
optimal settings. It uses advanced algorithms to identify dominant colors
and suggest appropriate editing parameters for professional color grading.</p>

<p>The automatic color editor system streamlines the workflow for complex color
corrections by providing intelligent starting points for manual fine-tuning.</p>

<p>Attributes:
    - parent: Parent controller for coordination
    - controlled (list): List of controlled color editor instances
    - stepName (str): Processing step name for this auto-controller
    - model (model.ColorEditorsAutoModel): Auto-color editing data model
    - view (view.ColorEditorsAutoView): Auto-color editing interface
    - callBackActive (bool): Enable/disable callback processing</p>
</div>


                            <div id="ColorEditorsAutoController.__init__" class="classattr">
                                        <input id="ColorEditorsAutoController.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">ColorEditorsAutoController</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">parent</span>, </span><span class="param"><span class="n">controlledColorEditors</span>, </span><span class="param"><span class="n">stepName</span></span>)</span>

                <label class="view-source-button" for="ColorEditorsAutoController.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ColorEditorsAutoController.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ColorEditorsAutoController.__init__-2369"><a href="#ColorEditorsAutoController.__init__-2369"><span class="linenos">2369</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="n">controlledColorEditors</span><span class="p">,</span> <span class="n">stepName</span> <span class="p">):</span>
</span><span id="ColorEditorsAutoController.__init__-2370"><a href="#ColorEditorsAutoController.__init__-2370"><span class="linenos">2370</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ColorEditorsAutoController.__init__-2371"><a href="#ColorEditorsAutoController.__init__-2371"><span class="linenos">2371</span></a><span class="sd">        Initialize the automatic color editors controller.</span>
</span><span id="ColorEditorsAutoController.__init__-2372"><a href="#ColorEditorsAutoController.__init__-2372"><span class="linenos">2372</span></a><span class="sd">        </span>
</span><span id="ColorEditorsAutoController.__init__-2373"><a href="#ColorEditorsAutoController.__init__-2373"><span class="linenos">2373</span></a><span class="sd">        Args:</span>
</span><span id="ColorEditorsAutoController.__init__-2374"><a href="#ColorEditorsAutoController.__init__-2374"><span class="linenos">2374</span></a><span class="sd">            parent: Parent controller for coordination</span>
</span><span id="ColorEditorsAutoController.__init__-2375"><a href="#ColorEditorsAutoController.__init__-2375"><span class="linenos">2375</span></a><span class="sd">            controlledColorEditors (list): List of color editor controllers to manage</span>
</span><span id="ColorEditorsAutoController.__init__-2376"><a href="#ColorEditorsAutoController.__init__-2376"><span class="linenos">2376</span></a><span class="sd">            stepName (str): Processing step identifier for this auto-controller</span>
</span><span id="ColorEditorsAutoController.__init__-2377"><a href="#ColorEditorsAutoController.__init__-2377"><span class="linenos">2377</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ColorEditorsAutoController.__init__-2378"><a href="#ColorEditorsAutoController.__init__-2378"><span class="linenos">2378</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; ColorEditorsAutoController.__init__(&quot;</span><span class="p">,</span><span class="s2">&quot;) &quot;</span><span class="p">)</span>
</span><span id="ColorEditorsAutoController.__init__-2379"><a href="#ColorEditorsAutoController.__init__-2379"><span class="linenos">2379</span></a>
</span><span id="ColorEditorsAutoController.__init__-2380"><a href="#ColorEditorsAutoController.__init__-2380"><span class="linenos">2380</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
</span><span id="ColorEditorsAutoController.__init__-2381"><a href="#ColorEditorsAutoController.__init__-2381"><span class="linenos">2381</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">controlled</span> <span class="o">=</span> <span class="n">controlledColorEditors</span>
</span><span id="ColorEditorsAutoController.__init__-2382"><a href="#ColorEditorsAutoController.__init__-2382"><span class="linenos">2382</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stepName</span> <span class="o">=</span><span class="n">stepName</span>
</span><span id="ColorEditorsAutoController.__init__-2383"><a href="#ColorEditorsAutoController.__init__-2383"><span class="linenos">2383</span></a>
</span><span id="ColorEditorsAutoController.__init__-2384"><a href="#ColorEditorsAutoController.__init__-2384"><span class="linenos">2384</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span>    <span class="n">model</span><span class="o">.</span><span class="n">ColorEditorsAutoModel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stepName</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">controlledColorEditors</span><span class="p">),</span> <span class="n">removeBlack</span><span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
</span><span id="ColorEditorsAutoController.__init__-2385"><a href="#ColorEditorsAutoController.__init__-2385"><span class="linenos">2385</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">view</span> <span class="o">=</span>     <span class="n">view</span><span class="o">.</span><span class="n">ColorEditorsAutoView</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="ColorEditorsAutoController.__init__-2386"><a href="#ColorEditorsAutoController.__init__-2386"><span class="linenos">2386</span></a>
</span><span id="ColorEditorsAutoController.__init__-2387"><a href="#ColorEditorsAutoController.__init__-2387"><span class="linenos">2387</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">True</span>
</span></pre></div>


            <div class="docstring"><p>Initialize the automatic color editors controller.</p>

<p>Args:
    parent: Parent controller for coordination
    controlledColorEditors (list): List of color editor controllers to manage
    stepName (str): Processing step identifier for this auto-controller</p>
</div>


                            </div>
                            <div id="ColorEditorsAutoController.parent" class="classattr">
                                <div class="attr variable">
            <span class="name">parent</span>

        
    </div>
    <a class="headerlink" href="#ColorEditorsAutoController.parent"></a>
    
    

                            </div>
                            <div id="ColorEditorsAutoController.controlled" class="classattr">
                                <div class="attr variable">
            <span class="name">controlled</span>

        
    </div>
    <a class="headerlink" href="#ColorEditorsAutoController.controlled"></a>
    
    

                            </div>
                            <div id="ColorEditorsAutoController.stepName" class="classattr">
                                <div class="attr variable">
            <span class="name">stepName</span>

        
    </div>
    <a class="headerlink" href="#ColorEditorsAutoController.stepName"></a>
    
    

                            </div>
                            <div id="ColorEditorsAutoController.model" class="classattr">
                                <div class="attr variable">
            <span class="name">model</span>

        
    </div>
    <a class="headerlink" href="#ColorEditorsAutoController.model"></a>
    
    

                            </div>
                            <div id="ColorEditorsAutoController.view" class="classattr">
                                <div class="attr variable">
            <span class="name">view</span>

        
    </div>
    <a class="headerlink" href="#ColorEditorsAutoController.view"></a>
    
    

                            </div>
                            <div id="ColorEditorsAutoController.callBackActive" class="classattr">
                                <div class="attr variable">
            <span class="name">callBackActive</span>

        
    </div>
    <a class="headerlink" href="#ColorEditorsAutoController.callBackActive"></a>
    
    

                            </div>
                            <div id="ColorEditorsAutoController.auto" class="classattr">
                                        <input id="ColorEditorsAutoController.auto-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">auto</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ColorEditorsAutoController.auto-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ColorEditorsAutoController.auto"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ColorEditorsAutoController.auto-2389"><a href="#ColorEditorsAutoController.auto-2389"><span class="linenos">2389</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">auto</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span> 
</span><span id="ColorEditorsAutoController.auto-2390"><a href="#ColorEditorsAutoController.auto-2390"><span class="linenos">2390</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ColorEditorsAutoController.auto-2391"><a href="#ColorEditorsAutoController.auto-2391"><span class="linenos">2391</span></a><span class="sd">        Trigger automatic color editor configuration.</span>
</span><span id="ColorEditorsAutoController.auto-2392"><a href="#ColorEditorsAutoController.auto-2392"><span class="linenos">2392</span></a><span class="sd">        </span>
</span><span id="ColorEditorsAutoController.auto-2393"><a href="#ColorEditorsAutoController.auto-2393"><span class="linenos">2393</span></a><span class="sd">        Analyzes the current image to identify dominant colors and automatically</span>
</span><span id="ColorEditorsAutoController.auto-2394"><a href="#ColorEditorsAutoController.auto-2394"><span class="linenos">2394</span></a><span class="sd">        configures all controlled color editors with appropriate selection ranges</span>
</span><span id="ColorEditorsAutoController.auto-2395"><a href="#ColorEditorsAutoController.auto-2395"><span class="linenos">2395</span></a><span class="sd">        and initial editing parameters. Resets all editors before applying new</span>
</span><span id="ColorEditorsAutoController.auto-2396"><a href="#ColorEditorsAutoController.auto-2396"><span class="linenos">2396</span></a><span class="sd">        automatic configurations.</span>
</span><span id="ColorEditorsAutoController.auto-2397"><a href="#ColorEditorsAutoController.auto-2397"><span class="linenos">2397</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ColorEditorsAutoController.auto-2398"><a href="#ColorEditorsAutoController.auto-2398"><span class="linenos">2398</span></a>        <span class="k">if</span> <span class="n">pref</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot; [CONTROL] &gt;&gt; ColorEditorsAutoController.auto(&quot;</span><span class="p">,</span><span class="s2">&quot;) &quot;</span><span class="p">)</span>
</span><span id="ColorEditorsAutoController.auto-2399"><a href="#ColorEditorsAutoController.auto-2399"><span class="linenos">2399</span></a>        <span class="k">for</span> <span class="n">ce</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">controlled</span><span class="p">:</span> <span class="n">ce</span><span class="o">.</span><span class="n">resetSelection</span><span class="p">();</span> <span class="n">ce</span><span class="o">.</span><span class="n">resetEdit</span><span class="p">()</span>
</span><span id="ColorEditorsAutoController.auto-2400"><a href="#ColorEditorsAutoController.auto-2400"><span class="linenos">2400</span></a>        <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span>
</span><span id="ColorEditorsAutoController.auto-2401"><a href="#ColorEditorsAutoController.auto-2401"><span class="linenos">2401</span></a>
</span><span id="ColorEditorsAutoController.auto-2402"><a href="#ColorEditorsAutoController.auto-2402"><span class="linenos">2402</span></a>        <span class="k">if</span> <span class="n">values</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="ColorEditorsAutoController.auto-2403"><a href="#ColorEditorsAutoController.auto-2403"><span class="linenos">2403</span></a>            <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">values</span><span class="p">):</span> <span class="bp">self</span><span class="o">.</span><span class="n">controlled</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">setValues</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">callBackActive</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Trigger automatic color editor configuration.</p>

<p>Analyzes the current image to identify dominant colors and automatically
configures all controlled color editors with appropriate selection ranges
and initial editing parameters. Resets all editors before applying new
automatic configurations.</p>
</div>


                            </div>
                </section>
    </main>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let search, searchErr;

    async function initialize() {
        try {
            search = await new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.type = "text/javascript";
                script.async = true;
                script.onload = () => resolve(window.pdocSearch);
                script.onerror = (e) => reject(e);
                script.src = "../search.js";
                document.getElementsByTagName("head")[0].appendChild(script);
            });
        } catch (e) {
            console.error("Cannot fetch pdoc search index");
            searchErr = "Cannot fetch search index.";
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const term = getSearchTerm();
            if (!term) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!search) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = search(term);

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(term)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(term)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `../${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.kind) {
                    case "function":
                        if (doc.fullname.endsWith(".__init__")) {
                            heading = `<span class="name">${doc.fullname.replace(/\.__init__$/, "")}</span>${doc.signature}`;
                        } else {
                            heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span>${doc.signature}`;
                        }
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        if (doc.bases)
                            heading += `<wbr>(<span class="base">${doc.bases}</span>)`;
                        heading += `:`;
                        break;
                    case "variable":
                        heading = `<span class="name">${doc.fullname}</span>`;
                        if (doc.annotation)
                            heading += `<span class="annotation">${doc.annotation}</span>`;
                        if (doc.default_value)
                            heading += `<span class="default_value"> = ${doc.default_value}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.kind}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>