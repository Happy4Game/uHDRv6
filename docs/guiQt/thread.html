<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 15.0.3"/>
    <title>guiQt.thread API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;z-index:999;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent; z-index:1}nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:.75rem center;margin-bottom:1rem;}.pdoc .alert > em{display:none;}.pdoc .alert > *:last-child{margin-bottom:0;}.pdoc .alert.note{color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .alert.tip{color:#0a3622;background-color:#d1e7dd;border-color:#a3cfbb;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%230a3622%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M2%206a6%206%200%201%201%2010.174%204.31c-.203.196-.359.4-.453.619l-.762%201.769A.5.5%200%200%201%2010.5%2013a.5.5%200%200%201%200%201%20.5.5%200%200%201%200%201l-.224.447a1%201%200%200%201-.894.553H6.618a1%201%200%200%201-.894-.553L5.5%2015a.5.5%200%200%201%200-1%20.5.5%200%200%201%200-1%20.5.5%200%200%201-.46-.302l-.761-1.77a2%202%200%200%200-.453-.618A5.98%205.98%200%200%201%202%206m6-5a5%205%200%200%200-3.479%208.592c.263.254.514.564.676.941L5.83%2012h4.342l.632-1.467c.162-.377.413-.687.676-.941A5%205%200%200%200%208%201%22/%3E%3C/svg%3E");}.pdoc .alert.important{color:#055160;background-color:#cff4fc;border-color:#9eeaf9;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23055160%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M2%200a2%202%200%200%200-2%202v12a2%202%200%200%200%202%202h12a2%202%200%200%200%202-2V2a2%202%200%200%200-2-2zm6%204c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%204.995A.905.905%200%200%201%208%204m.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2%22/%3E%3C/svg%3E");}.pdoc .alert.warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .alert.caution{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M11.46.146A.5.5%200%200%200%2011.107%200H4.893a.5.5%200%200%200-.353.146L.146%204.54A.5.5%200%200%200%200%204.893v6.214a.5.5%200%200%200%20.146.353l4.394%204.394a.5.5%200%200%200%20.353.146h6.214a.5.5%200%200%200%20.353-.146l4.394-4.394a.5.5%200%200%200%20.146-.353V4.893a.5.5%200%200%200-.146-.353zM8%204c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%204.995A.905.905%200%200%201%208%204m.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2%22/%3E%3C/svg%3E");}.pdoc .alert.danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--accent);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .decorator-deprecated{color:#842029;}.pdoc .decorator-deprecated ~ span{filter:grayscale(1) opacity(0.8);}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>            <a class="pdoc-button module-list-button" href="../guiQt.html">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-left" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0v-2z"/>
  <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
</svg>                &nbsp;guiQt</a>


            <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                   pattern=".+" required>



            <h2>API Documentation</h2>
                <ul class="memberlist">
            <li>
                    <a class="class" href="#RequestCompute">RequestCompute</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#RequestCompute.__init__">RequestCompute</a>
                        </li>
                        <li>
                                <a class="variable" href="#RequestCompute.parent">parent</a>
                        </li>
                        <li>
                                <a class="variable" href="#RequestCompute.requestDict">requestDict</a>
                        </li>
                        <li>
                                <a class="variable" href="#RequestCompute.pool">pool</a>
                        </li>
                        <li>
                                <a class="variable" href="#RequestCompute.processpipe">processpipe</a>
                        </li>
                        <li>
                                <a class="variable" href="#RequestCompute.readyToRun">readyToRun</a>
                        </li>
                        <li>
                                <a class="variable" href="#RequestCompute.waitingUpdate">waitingUpdate</a>
                        </li>
                        <li>
                                <a class="function" href="#RequestCompute.setProcessPipe">setProcessPipe</a>
                        </li>
                        <li>
                                <a class="function" href="#RequestCompute.requestCompute">requestCompute</a>
                        </li>
                        <li>
                                <a class="function" href="#RequestCompute.endCompute">endCompute</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#RunCompute">RunCompute</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#RunCompute.__init__">RunCompute</a>
                        </li>
                        <li>
                                <a class="variable" href="#RunCompute.parent">parent</a>
                        </li>
                        <li>
                                <a class="function" href="#RunCompute.run">run</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#RequestLoadImage">RequestLoadImage</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#RequestLoadImage.__init__">RequestLoadImage</a>
                        </li>
                        <li>
                                <a class="variable" href="#RequestLoadImage.parent">parent</a>
                        </li>
                        <li>
                                <a class="variable" href="#RequestLoadImage.pool">pool</a>
                        </li>
                        <li>
                                <a class="variable" href="#RequestLoadImage.requestsDone">requestsDone</a>
                        </li>
                        <li>
                                <a class="function" href="#RequestLoadImage.requestLoad">requestLoad</a>
                        </li>
                        <li>
                                <a class="function" href="#RequestLoadImage.endLoadImage">endLoadImage</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#RunLoadImage">RunLoadImage</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#RunLoadImage.__init__">RunLoadImage</a>
                        </li>
                        <li>
                                <a class="variable" href="#RunLoadImage.parent">parent</a>
                        </li>
                        <li>
                                <a class="variable" href="#RunLoadImage.minIdxInPage">minIdxInPage</a>
                        </li>
                        <li>
                                <a class="variable" href="#RunLoadImage.imgIdxInPage">imgIdxInPage</a>
                        </li>
                        <li>
                                <a class="variable" href="#RunLoadImage.filename">filename</a>
                        </li>
                        <li>
                                <a class="function" href="#RunLoadImage.run">run</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#pCompute">pCompute</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#pCompute.__init__">pCompute</a>
                        </li>
                        <li>
                                <a class="variable" href="#pCompute.callBack">callBack</a>
                        </li>
                        <li>
                                <a class="variable" href="#pCompute.progress">progress</a>
                        </li>
                        <li>
                                <a class="variable" href="#pCompute.nbSplits">nbSplits</a>
                        </li>
                        <li>
                                <a class="variable" href="#pCompute.nbDone">nbDone</a>
                        </li>
                        <li>
                                <a class="variable" href="#pCompute.geometryNode">geometryNode</a>
                        </li>
                        <li>
                                <a class="variable" href="#pCompute.meta">meta</a>
                        </li>
                        <li>
                                <a class="variable" href="#pCompute.splits">splits</a>
                        </li>
                        <li>
                                <a class="variable" href="#pCompute.pool">pool</a>
                        </li>
                        <li>
                                <a class="function" href="#pCompute.endCompute">endCompute</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#pRun">pRun</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#pRun.__init__">pRun</a>
                        </li>
                        <li>
                                <a class="variable" href="#pRun.parent">parent</a>
                        </li>
                        <li>
                                <a class="variable" href="#pRun.processpipe">processpipe</a>
                        </li>
                        <li>
                                <a class="variable" href="#pRun.idx">idx</a>
                        </li>
                        <li>
                                <a class="variable" href="#pRun.toneMap">toneMap</a>
                        </li>
                        <li>
                                <a class="function" href="#pRun.run">run</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#cCompute">cCompute</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#cCompute.__init__">cCompute</a>
                        </li>
                        <li>
                                <a class="variable" href="#cCompute.callBack">callBack</a>
                        </li>
                        <li>
                                <a class="variable" href="#cCompute.progress">progress</a>
                        </li>
                        <li>
                                <a class="variable" href="#cCompute.pool">pool</a>
                        </li>
                        <li>
                                <a class="function" href="#cCompute.endCompute">endCompute</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#cRun">cRun</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#cRun.__init__">cRun</a>
                        </li>
                        <li>
                                <a class="variable" href="#cRun.parent">parent</a>
                        </li>
                        <li>
                                <a class="variable" href="#cRun.processpipe">processpipe</a>
                        </li>
                        <li>
                                <a class="variable" href="#cRun.toneMap">toneMap</a>
                        </li>
                        <li>
                                <a class="function" href="#cRun.run">run</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#RequestAestheticsCompute">RequestAestheticsCompute</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#RequestAestheticsCompute.__init__">RequestAestheticsCompute</a>
                        </li>
                        <li>
                                <a class="variable" href="#RequestAestheticsCompute.parent">parent</a>
                        </li>
                        <li>
                                <a class="variable" href="#RequestAestheticsCompute.requestDict">requestDict</a>
                        </li>
                        <li>
                                <a class="variable" href="#RequestAestheticsCompute.pool">pool</a>
                        </li>
                        <li>
                                <a class="variable" href="#RequestAestheticsCompute.processpipe">processpipe</a>
                        </li>
                        <li>
                                <a class="variable" href="#RequestAestheticsCompute.readyToRun">readyToRun</a>
                        </li>
                        <li>
                                <a class="variable" href="#RequestAestheticsCompute.waitingUpdate">waitingUpdate</a>
                        </li>
                        <li>
                                <a class="function" href="#RequestAestheticsCompute.setProcessPipe">setProcessPipe</a>
                        </li>
                        <li>
                                <a class="function" href="#RequestAestheticsCompute.requestCompute">requestCompute</a>
                        </li>
                        <li>
                                <a class="function" href="#RequestAestheticsCompute.endCompute">endCompute</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#RunAestheticsCompute">RunAestheticsCompute</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#RunAestheticsCompute.__init__">RunAestheticsCompute</a>
                        </li>
                        <li>
                                <a class="variable" href="#RunAestheticsCompute.parent">parent</a>
                        </li>
                        <li>
                                <a class="function" href="#RunAestheticsCompute.run">run</a>
                        </li>
                </ul>

            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
<a href="./../guiQt.html">guiQt</a><wbr>.thread    </h1>

                        <div class="docstring"><p><a href="">guiQt.thread</a> module: Threading and parallel processing management for uHDR.</p>

<p>This module provides comprehensive threading support for uHDR's GUI application,
enabling real-time image processing, parallel computation, and responsive user
interaction. It implements several threading patterns for different use cases:</p>

<p>Threading Classes:
    RequestCompute: Real-time HDR editing with single-threaded sequential processing
    RunCompute: Worker thread for HDR processing pipeline execution
    RequestLoadImage: Parallel image loading and thumbnail generation
    RunLoadImage: Worker thread for individual image loading
    pCompute: Multi-threaded HDR processing with image splitting
    pRun: Worker thread for processing image splits
    cCompute: C++ accelerated HDR processing (single-threaded)
    cRun: Worker thread for C++ pipeline execution
    RequestAestheticsCompute: Aesthetics analysis threading
    RunAestheticsCompute: Worker thread for aesthetics computation</p>

<p>Threading Patterns:</p>

<ol>
<li>Real-time Editing: Uses RequestCompute for immediate UI feedback during editing</li>
<li>Parallel Loading: Uses RequestLoadImage for efficient gallery thumbnail generation  </li>
<li>Split Processing: Uses pCompute for large image processing with progress feedback</li>
<li>C++ Acceleration: Uses cCompute for hardware-accelerated processing</li>
<li>Background Analysis: Uses RequestAestheticsCompute for non-blocking analysis</li>
</ol>

<p>All threading classes use Qt's QThreadPool for efficient thread management
and provide callback mechanisms for result delivery and progress updates.</p>
</div>

                        <input id="mod-thread-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-thread-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos">  1</span></a><span class="c1"># uHDR: HDR image editing software</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos">  2</span></a><span class="c1">#   Copyright (C) 2021  remi cozot </span>
</span><span id="L-3"><a href="#L-3"><span class="linenos">  3</span></a><span class="c1">#</span>
</span><span id="L-4"><a href="#L-4"><span class="linenos">  4</span></a><span class="c1">#    This program is free software: you can redistribute it and/or modify</span>
</span><span id="L-5"><a href="#L-5"><span class="linenos">  5</span></a><span class="c1">#    it under the terms of the GNU General Public License as published by</span>
</span><span id="L-6"><a href="#L-6"><span class="linenos">  6</span></a><span class="c1">#    the Free Software Foundation, either version 3 of the License, or</span>
</span><span id="L-7"><a href="#L-7"><span class="linenos">  7</span></a><span class="c1">#    (at your option) any later version.</span>
</span><span id="L-8"><a href="#L-8"><span class="linenos">  8</span></a><span class="c1">#</span>
</span><span id="L-9"><a href="#L-9"><span class="linenos">  9</span></a><span class="c1">#    This program is distributed in the hope that it will be useful,</span>
</span><span id="L-10"><a href="#L-10"><span class="linenos"> 10</span></a><span class="c1">#    but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
</span><span id="L-11"><a href="#L-11"><span class="linenos"> 11</span></a><span class="c1">#    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
</span><span id="L-12"><a href="#L-12"><span class="linenos"> 12</span></a><span class="c1">#    GNU General Public License for more details.</span>
</span><span id="L-13"><a href="#L-13"><span class="linenos"> 13</span></a><span class="c1">#</span>
</span><span id="L-14"><a href="#L-14"><span class="linenos"> 14</span></a><span class="c1"># hdrCore project 2020</span>
</span><span id="L-15"><a href="#L-15"><span class="linenos"> 15</span></a><span class="c1"># author: remi.cozot@univ-littoral.fr</span>
</span><span id="L-16"><a href="#L-16"><span class="linenos"> 16</span></a>
</span><span id="L-17"><a href="#L-17"><span class="linenos"> 17</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-18"><a href="#L-18"><span class="linenos"> 18</span></a><span class="c1"># --- Package hdrGUI ---------------------------------------------------------</span>
</span><span id="L-19"><a href="#L-19"><span class="linenos"> 19</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-20"><a href="#L-20"><span class="linenos"> 20</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-21"><a href="#L-21"><span class="linenos"> 21</span></a><span class="sd">guiQt.thread module: Threading and parallel processing management for uHDR.</span>
</span><span id="L-22"><a href="#L-22"><span class="linenos"> 22</span></a>
</span><span id="L-23"><a href="#L-23"><span class="linenos"> 23</span></a><span class="sd">This module provides comprehensive threading support for uHDR&#39;s GUI application,</span>
</span><span id="L-24"><a href="#L-24"><span class="linenos"> 24</span></a><span class="sd">enabling real-time image processing, parallel computation, and responsive user</span>
</span><span id="L-25"><a href="#L-25"><span class="linenos"> 25</span></a><span class="sd">interaction. It implements several threading patterns for different use cases:</span>
</span><span id="L-26"><a href="#L-26"><span class="linenos"> 26</span></a>
</span><span id="L-27"><a href="#L-27"><span class="linenos"> 27</span></a><span class="sd">Threading Classes:</span>
</span><span id="L-28"><a href="#L-28"><span class="linenos"> 28</span></a><span class="sd">    RequestCompute: Real-time HDR editing with single-threaded sequential processing</span>
</span><span id="L-29"><a href="#L-29"><span class="linenos"> 29</span></a><span class="sd">    RunCompute: Worker thread for HDR processing pipeline execution</span>
</span><span id="L-30"><a href="#L-30"><span class="linenos"> 30</span></a><span class="sd">    RequestLoadImage: Parallel image loading and thumbnail generation</span>
</span><span id="L-31"><a href="#L-31"><span class="linenos"> 31</span></a><span class="sd">    RunLoadImage: Worker thread for individual image loading</span>
</span><span id="L-32"><a href="#L-32"><span class="linenos"> 32</span></a><span class="sd">    pCompute: Multi-threaded HDR processing with image splitting</span>
</span><span id="L-33"><a href="#L-33"><span class="linenos"> 33</span></a><span class="sd">    pRun: Worker thread for processing image splits</span>
</span><span id="L-34"><a href="#L-34"><span class="linenos"> 34</span></a><span class="sd">    cCompute: C++ accelerated HDR processing (single-threaded)</span>
</span><span id="L-35"><a href="#L-35"><span class="linenos"> 35</span></a><span class="sd">    cRun: Worker thread for C++ pipeline execution</span>
</span><span id="L-36"><a href="#L-36"><span class="linenos"> 36</span></a><span class="sd">    RequestAestheticsCompute: Aesthetics analysis threading</span>
</span><span id="L-37"><a href="#L-37"><span class="linenos"> 37</span></a><span class="sd">    RunAestheticsCompute: Worker thread for aesthetics computation</span>
</span><span id="L-38"><a href="#L-38"><span class="linenos"> 38</span></a>
</span><span id="L-39"><a href="#L-39"><span class="linenos"> 39</span></a><span class="sd">Threading Patterns:</span>
</span><span id="L-40"><a href="#L-40"><span class="linenos"> 40</span></a><span class="sd">1. Real-time Editing: Uses RequestCompute for immediate UI feedback during editing</span>
</span><span id="L-41"><a href="#L-41"><span class="linenos"> 41</span></a><span class="sd">2. Parallel Loading: Uses RequestLoadImage for efficient gallery thumbnail generation  </span>
</span><span id="L-42"><a href="#L-42"><span class="linenos"> 42</span></a><span class="sd">3. Split Processing: Uses pCompute for large image processing with progress feedback</span>
</span><span id="L-43"><a href="#L-43"><span class="linenos"> 43</span></a><span class="sd">4. C++ Acceleration: Uses cCompute for hardware-accelerated processing</span>
</span><span id="L-44"><a href="#L-44"><span class="linenos"> 44</span></a><span class="sd">5. Background Analysis: Uses RequestAestheticsCompute for non-blocking analysis</span>
</span><span id="L-45"><a href="#L-45"><span class="linenos"> 45</span></a>
</span><span id="L-46"><a href="#L-46"><span class="linenos"> 46</span></a><span class="sd">All threading classes use Qt&#39;s QThreadPool for efficient thread management</span>
</span><span id="L-47"><a href="#L-47"><span class="linenos"> 47</span></a><span class="sd">and provide callback mechanisms for result delivery and progress updates.</span>
</span><span id="L-48"><a href="#L-48"><span class="linenos"> 48</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-49"><a href="#L-49"><span class="linenos"> 49</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-50"><a href="#L-50"><span class="linenos"> 50</span></a><span class="c1"># --- Import ------------------------------------------------------------------</span>
</span><span id="L-51"><a href="#L-51"><span class="linenos"> 51</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-52"><a href="#L-52"><span class="linenos"> 52</span></a><span class="kn">import</span><span class="w"> </span><span class="nn">copy</span><span class="o">,</span><span class="w"> </span><span class="nn">time</span><span class="o">,</span><span class="w"> </span><span class="nn">random</span>
</span><span id="L-53"><a href="#L-53"><span class="linenos"> 53</span></a><span class="kn">import</span><span class="w"> </span><span class="nn">hdrCore</span>
</span><span id="L-54"><a href="#L-54"><span class="linenos"> 54</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">.</span><span class="w"> </span><span class="kn">import</span> <span class="n">model</span>
</span><span id="L-55"><a href="#L-55"><span class="linenos"> 55</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">PyQt5.QtCore</span><span class="w"> </span><span class="kn">import</span> <span class="n">QRunnable</span><span class="p">,</span> <span class="n">Qt</span><span class="p">,</span> <span class="n">QThreadPool</span>
</span><span id="L-56"><a href="#L-56"><span class="linenos"> 56</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">timeit</span><span class="w"> </span><span class="kn">import</span> <span class="n">default_timer</span> <span class="k">as</span> <span class="n">timer</span>
</span><span id="L-57"><a href="#L-57"><span class="linenos"> 57</span></a><span class="kn">import</span><span class="w"> </span><span class="nn">preferences.preferences</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pref</span>
</span><span id="L-58"><a href="#L-58"><span class="linenos"> 58</span></a>
</span><span id="L-59"><a href="#L-59"><span class="linenos"> 59</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-60"><a href="#L-60"><span class="linenos"> 60</span></a><span class="c1"># --- Class RequestCompute ----------------------------------------------------</span>
</span><span id="L-61"><a href="#L-61"><span class="linenos"> 61</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-62"><a href="#L-62"><span class="linenos"> 62</span></a><span class="k">class</span><span class="w"> </span><span class="nc">RequestCompute</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
</span><span id="L-63"><a href="#L-63"><span class="linenos"> 63</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-64"><a href="#L-64"><span class="linenos"> 64</span></a><span class="sd">    Real-time HDR processing coordinator for interactive image editing.</span>
</span><span id="L-65"><a href="#L-65"><span class="linenos"> 65</span></a><span class="sd">    </span>
</span><span id="L-66"><a href="#L-66"><span class="linenos"> 66</span></a><span class="sd">    Manages parallel computation of ProcessPipe operations during interactive</span>
</span><span id="L-67"><a href="#L-67"><span class="linenos"> 67</span></a><span class="sd">    editing, ensuring responsive UI while maintaining processing order. Uses</span>
</span><span id="L-68"><a href="#L-68"><span class="linenos"> 68</span></a><span class="sd">    a single dedicated thread to compute process-pipes, storing compute requests</span>
</span><span id="L-69"><a href="#L-69"><span class="linenos"> 69</span></a><span class="sd">    when user changes editing values and restarting computation when previous</span>
</span><span id="L-70"><a href="#L-70"><span class="linenos"> 70</span></a><span class="sd">    processing finishes.</span>
</span><span id="L-71"><a href="#L-71"><span class="linenos"> 71</span></a><span class="sd">    </span>
</span><span id="L-72"><a href="#L-72"><span class="linenos"> 72</span></a><span class="sd">    Key Features:</span>
</span><span id="L-73"><a href="#L-73"><span class="linenos"> 73</span></a><span class="sd">    - Single-threaded sequential processing to avoid resource conflicts</span>
</span><span id="L-74"><a href="#L-74"><span class="linenos"> 74</span></a><span class="sd">    - Request queuing for parameter changes during processing</span>
</span><span id="L-75"><a href="#L-75"><span class="linenos"> 75</span></a><span class="sd">    - Automatic restart for pending updates</span>
</span><span id="L-76"><a href="#L-76"><span class="linenos"> 76</span></a><span class="sd">    - Parent callback for result delivery</span>
</span><span id="L-77"><a href="#L-77"><span class="linenos"> 77</span></a><span class="sd">    </span>
</span><span id="L-78"><a href="#L-78"><span class="linenos"> 78</span></a><span class="sd">    Attributes:</span>
</span><span id="L-79"><a href="#L-79"><span class="linenos"> 79</span></a><span class="sd">        parent (EditImageModel): Parent model for result callbacks</span>
</span><span id="L-80"><a href="#L-80"><span class="linenos"> 80</span></a><span class="sd">        requestDict (dict): Stores pending parameter updates {processNodeId: params}</span>
</span><span id="L-81"><a href="#L-81"><span class="linenos"> 81</span></a><span class="sd">        pool (QThreadPool): Qt thread pool for worker management</span>
</span><span id="L-82"><a href="#L-82"><span class="linenos"> 82</span></a><span class="sd">        processpipe (ProcessPipe): Active processing pipeline reference</span>
</span><span id="L-83"><a href="#L-83"><span class="linenos"> 83</span></a><span class="sd">        readyToRun (bool): Processing availability flag</span>
</span><span id="L-84"><a href="#L-84"><span class="linenos"> 84</span></a><span class="sd">        waitingUpdate (bool): Pending update flag during processing</span>
</span><span id="L-85"><a href="#L-85"><span class="linenos"> 85</span></a><span class="sd">    </span>
</span><span id="L-86"><a href="#L-86"><span class="linenos"> 86</span></a><span class="sd">    Methods:</span>
</span><span id="L-87"><a href="#L-87"><span class="linenos"> 87</span></a><span class="sd">        setProcessPipe: Set active processing pipeline</span>
</span><span id="L-88"><a href="#L-88"><span class="linenos"> 88</span></a><span class="sd">        requestCompute: Queue parameter update and trigger processing</span>
</span><span id="L-89"><a href="#L-89"><span class="linenos"> 89</span></a><span class="sd">        endCompute: Handle processing completion and manage restart</span>
</span><span id="L-90"><a href="#L-90"><span class="linenos"> 90</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-91"><a href="#L-91"><span class="linenos"> 91</span></a>
</span><span id="L-92"><a href="#L-92"><span class="linenos"> 92</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
</span><span id="L-93"><a href="#L-93"><span class="linenos"> 93</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-94"><a href="#L-94"><span class="linenos"> 94</span></a><span class="sd">        Initialize request compute coordinator.</span>
</span><span id="L-95"><a href="#L-95"><span class="linenos"> 95</span></a><span class="sd">        </span>
</span><span id="L-96"><a href="#L-96"><span class="linenos"> 96</span></a><span class="sd">        Args:</span>
</span><span id="L-97"><a href="#L-97"><span class="linenos"> 97</span></a><span class="sd">            parent (EditImageModel): Parent model for result delivery</span>
</span><span id="L-98"><a href="#L-98"><span class="linenos"> 98</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-99"><a href="#L-99"><span class="linenos"> 99</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
</span><span id="L-100"><a href="#L-100"><span class="linenos">100</span></a>
</span><span id="L-101"><a href="#L-101"><span class="linenos">101</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">requestDict</span><span class="o">=</span> <span class="p">{}</span> <span class="c1"># store resqustCompute key:processNodeId, value: processNode params</span>
</span><span id="L-102"><a href="#L-102"><span class="linenos">102</span></a>
</span><span id="L-103"><a href="#L-103"><span class="linenos">103</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pool</span> <span class="o">=</span> <span class="n">QThreadPool</span><span class="o">.</span><span class="n">globalInstance</span><span class="p">()</span>        <span class="c1"># get global pool</span>
</span><span id="L-104"><a href="#L-104"><span class="linenos">104</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">processpipe</span> <span class="o">=</span> <span class="kc">None</span>                         <span class="c1"># processpipe ref</span>
</span><span id="L-105"><a href="#L-105"><span class="linenos">105</span></a>
</span><span id="L-106"><a href="#L-106"><span class="linenos">106</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">readyToRun</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-107"><a href="#L-107"><span class="linenos">107</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">waitingUpdate</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-108"><a href="#L-108"><span class="linenos">108</span></a>
</span><span id="L-109"><a href="#L-109"><span class="linenos">109</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setProcessPipe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">pp</span><span class="p">):</span>
</span><span id="L-110"><a href="#L-110"><span class="linenos">110</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-111"><a href="#L-111"><span class="linenos">111</span></a><span class="sd">        Set the current active processing pipeline.</span>
</span><span id="L-112"><a href="#L-112"><span class="linenos">112</span></a>
</span><span id="L-113"><a href="#L-113"><span class="linenos">113</span></a><span class="sd">        Args:</span>
</span><span id="L-114"><a href="#L-114"><span class="linenos">114</span></a><span class="sd">            pp (ProcessPipe, Required): Processing pipeline to manage</span>
</span><span id="L-115"><a href="#L-115"><span class="linenos">115</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-116"><a href="#L-116"><span class="linenos">116</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">processpipe</span> <span class="o">=</span> <span class="n">pp</span>
</span><span id="L-117"><a href="#L-117"><span class="linenos">117</span></a>    
</span><span id="L-118"><a href="#L-118"><span class="linenos">118</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">requestCompute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="n">params</span><span class="p">):</span>
</span><span id="L-119"><a href="#L-119"><span class="linenos">119</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-120"><a href="#L-120"><span class="linenos">120</span></a><span class="sd">        Queue parameter update and request processing pipeline computation.</span>
</span><span id="L-121"><a href="#L-121"><span class="linenos">121</span></a><span class="sd">        </span>
</span><span id="L-122"><a href="#L-122"><span class="linenos">122</span></a><span class="sd">        Stores new parameters for a process-node and triggers pipeline</span>
</span><span id="L-123"><a href="#L-123"><span class="linenos">123</span></a><span class="sd">        computation. If processing is already running, marks for restart</span>
</span><span id="L-124"><a href="#L-124"><span class="linenos">124</span></a><span class="sd">        when current computation completes.</span>
</span><span id="L-125"><a href="#L-125"><span class="linenos">125</span></a>
</span><span id="L-126"><a href="#L-126"><span class="linenos">126</span></a><span class="sd">        Args:</span>
</span><span id="L-127"><a href="#L-127"><span class="linenos">127</span></a><span class="sd">            id (int, Required): Index of process-node in processing pipeline</span>
</span><span id="L-128"><a href="#L-128"><span class="linenos">128</span></a><span class="sd">            params (dict, Required): Updated parameters for process-node</span>
</span><span id="L-129"><a href="#L-129"><span class="linenos">129</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-130"><a href="#L-130"><span class="linenos">130</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">requestDict</span><span class="p">[</span><span class="nb">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
</span><span id="L-131"><a href="#L-131"><span class="linenos">131</span></a>
</span><span id="L-132"><a href="#L-132"><span class="linenos">132</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">readyToRun</span><span class="p">:</span>
</span><span id="L-133"><a href="#L-133"><span class="linenos">133</span></a>            <span class="c1"># start processing processpipe</span>
</span><span id="L-134"><a href="#L-134"><span class="linenos">134</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">pool</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">RunCompute</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
</span><span id="L-135"><a href="#L-135"><span class="linenos">135</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-136"><a href="#L-136"><span class="linenos">136</span></a>            <span class="c1"># if a computation is already running</span>
</span><span id="L-137"><a href="#L-137"><span class="linenos">137</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">waitingUpdate</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-138"><a href="#L-138"><span class="linenos">138</span></a>
</span><span id="L-139"><a href="#L-139"><span class="linenos">139</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">endCompute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-140"><a href="#L-140"><span class="linenos">140</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-141"><a href="#L-141"><span class="linenos">141</span></a><span class="sd">        Handle processing completion and manage restart.</span>
</span><span id="L-142"><a href="#L-142"><span class="linenos">142</span></a><span class="sd">        </span>
</span><span id="L-143"><a href="#L-143"><span class="linenos">143</span></a><span class="sd">        Called when process-node computation finishes. Retrieves processed</span>
</span><span id="L-144"><a href="#L-144"><span class="linenos">144</span></a><span class="sd">        image, sends it to parent model, and restarts computation if there</span>
</span><span id="L-145"><a href="#L-145"><span class="linenos">145</span></a><span class="sd">        are pending parameter updates.</span>
</span><span id="L-146"><a href="#L-146"><span class="linenos">146</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-147"><a href="#L-147"><span class="linenos">147</span></a>        <span class="n">imgTM</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">processpipe</span><span class="o">.</span><span class="n">getImage</span><span class="p">(</span><span class="n">toneMap</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-148"><a href="#L-148"><span class="linenos">148</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">updateImage</span><span class="p">(</span><span class="n">imgTM</span><span class="p">)</span>
</span><span id="L-149"><a href="#L-149"><span class="linenos">149</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">waitingUpdate</span><span class="p">:</span>
</span><span id="L-150"><a href="#L-150"><span class="linenos">150</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">pool</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">RunCompute</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
</span><span id="L-151"><a href="#L-151"><span class="linenos">151</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">waitingUpdate</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-152"><a href="#L-152"><span class="linenos">152</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-153"><a href="#L-153"><span class="linenos">153</span></a><span class="c1"># --- Class RunCompute --------------------------------------------------------</span>
</span><span id="L-154"><a href="#L-154"><span class="linenos">154</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-155"><a href="#L-155"><span class="linenos">155</span></a><span class="k">class</span><span class="w"> </span><span class="nc">RunCompute</span><span class="p">(</span><span class="n">QRunnable</span><span class="p">):</span>
</span><span id="L-156"><a href="#L-156"><span class="linenos">156</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-157"><a href="#L-157"><span class="linenos">157</span></a><span class="sd">    Worker thread for HDR processing pipeline execution.</span>
</span><span id="L-158"><a href="#L-158"><span class="linenos">158</span></a><span class="sd">    </span>
</span><span id="L-159"><a href="#L-159"><span class="linenos">159</span></a><span class="sd">    Executes ProcessPipe computation on a dedicated thread, supporting both</span>
</span><span id="L-160"><a href="#L-160"><span class="linenos">160</span></a><span class="sd">    Python and C++ acceleration modes. Handles parameter updates and manages</span>
</span><span id="L-161"><a href="#L-161"><span class="linenos">161</span></a><span class="sd">    processing completion callbacks.</span>
</span><span id="L-162"><a href="#L-162"><span class="linenos">162</span></a><span class="sd">    </span>
</span><span id="L-163"><a href="#L-163"><span class="linenos">163</span></a><span class="sd">    Attributes:</span>
</span><span id="L-164"><a href="#L-164"><span class="linenos">164</span></a><span class="sd">        parent (RequestCompute): Parent coordinator for completion callback</span>
</span><span id="L-165"><a href="#L-165"><span class="linenos">165</span></a><span class="sd">    </span>
</span><span id="L-166"><a href="#L-166"><span class="linenos">166</span></a><span class="sd">    Methods:</span>
</span><span id="L-167"><a href="#L-167"><span class="linenos">167</span></a><span class="sd">        run: Main thread execution method with processing logic</span>
</span><span id="L-168"><a href="#L-168"><span class="linenos">168</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-169"><a href="#L-169"><span class="linenos">169</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">parent</span><span class="p">):</span>
</span><span id="L-170"><a href="#L-170"><span class="linenos">170</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-171"><a href="#L-171"><span class="linenos">171</span></a><span class="sd">        Initialize compute worker thread.</span>
</span><span id="L-172"><a href="#L-172"><span class="linenos">172</span></a><span class="sd">        </span>
</span><span id="L-173"><a href="#L-173"><span class="linenos">173</span></a><span class="sd">        Args:</span>
</span><span id="L-174"><a href="#L-174"><span class="linenos">174</span></a><span class="sd">            parent (RequestCompute): Parent coordinator instance</span>
</span><span id="L-175"><a href="#L-175"><span class="linenos">175</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-176"><a href="#L-176"><span class="linenos">176</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="L-177"><a href="#L-177"><span class="linenos">177</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
</span><span id="L-178"><a href="#L-178"><span class="linenos">178</span></a>
</span><span id="L-179"><a href="#L-179"><span class="linenos">179</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-180"><a href="#L-180"><span class="linenos">180</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-181"><a href="#L-181"><span class="linenos">181</span></a><span class="sd">        Main thread execution method.</span>
</span><span id="L-182"><a href="#L-182"><span class="linenos">182</span></a><span class="sd">        </span>
</span><span id="L-183"><a href="#L-183"><span class="linenos">183</span></a><span class="sd">        Executes ProcessPipe computation using either C++ acceleration</span>
</span><span id="L-184"><a href="#L-184"><span class="linenos">184</span></a><span class="sd">        or Python processing. Updates pipeline parameters, performs</span>
</span><span id="L-185"><a href="#L-185"><span class="linenos">185</span></a><span class="sd">        computation, and triggers completion callback.</span>
</span><span id="L-186"><a href="#L-186"><span class="linenos">186</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-187"><a href="#L-187"><span class="linenos">187</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">readyToRun</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-188"><a href="#L-188"><span class="linenos">188</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">requestDict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">processpipe</span><span class="o">.</span><span class="n">setParameters</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">requestDict</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>
</span><span id="L-189"><a href="#L-189"><span class="linenos">189</span></a>        <span class="n">cpp</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-190"><a href="#L-190"><span class="linenos">190</span></a>        <span class="k">if</span> <span class="n">cpp</span><span class="p">:</span>
</span><span id="L-191"><a href="#L-191"><span class="linenos">191</span></a>            <span class="n">img</span>  <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">processpipe</span><span class="o">.</span><span class="n">getInputImage</span><span class="p">())</span>
</span><span id="L-192"><a href="#L-192"><span class="linenos">192</span></a>            <span class="n">imgRes</span> <span class="o">=</span> <span class="n">hdrCore</span><span class="o">.</span><span class="n">coreC</span><span class="o">.</span><span class="n">coreCcompute</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">processpipe</span><span class="p">)</span>
</span><span id="L-193"><a href="#L-193"><span class="linenos">193</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">processpipe</span><span class="o">.</span><span class="n">setOutput</span><span class="p">(</span><span class="n">imgRes</span><span class="p">)</span>
</span><span id="L-194"><a href="#L-194"><span class="linenos">194</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">readyToRun</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-195"><a href="#L-195"><span class="linenos">195</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">endCompute</span><span class="p">()</span>
</span><span id="L-196"><a href="#L-196"><span class="linenos">196</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-197"><a href="#L-197"><span class="linenos">197</span></a>            <span class="n">start</span> <span class="o">=</span> <span class="n">timer</span><span class="p">()</span>
</span><span id="L-198"><a href="#L-198"><span class="linenos">198</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">processpipe</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span>
</span><span id="L-199"><a href="#L-199"><span class="linenos">199</span></a>            <span class="n">dt</span> <span class="o">=</span> <span class="n">timer</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span>
</span><span id="L-200"><a href="#L-200"><span class="linenos">200</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">readyToRun</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-201"><a href="#L-201"><span class="linenos">201</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">endCompute</span><span class="p">()</span>
</span><span id="L-202"><a href="#L-202"><span class="linenos">202</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-203"><a href="#L-203"><span class="linenos">203</span></a><span class="c1"># --- Class RequestLoadImage --------------------------------------------------</span>
</span><span id="L-204"><a href="#L-204"><span class="linenos">204</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-205"><a href="#L-205"><span class="linenos">205</span></a><span class="k">class</span><span class="w"> </span><span class="nc">RequestLoadImage</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
</span><span id="L-206"><a href="#L-206"><span class="linenos">206</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-207"><a href="#L-207"><span class="linenos">207</span></a><span class="sd">    Parallel image loading coordinator for gallery thumbnail generation.</span>
</span><span id="L-208"><a href="#L-208"><span class="linenos">208</span></a><span class="sd">    </span>
</span><span id="L-209"><a href="#L-209"><span class="linenos">209</span></a><span class="sd">    Manages multi-threaded loading of images for gallery display, creating</span>
</span><span id="L-210"><a href="#L-210"><span class="linenos">210</span></a><span class="sd">    new threads for each image load operation. Handles load completion</span>
</span><span id="L-211"><a href="#L-211"><span class="linenos">211</span></a><span class="sd">    callbacks and error recovery with automatic retry mechanisms.</span>
</span><span id="L-212"><a href="#L-212"><span class="linenos">212</span></a><span class="sd">    </span>
</span><span id="L-213"><a href="#L-213"><span class="linenos">213</span></a><span class="sd">    Attributes:</span>
</span><span id="L-214"><a href="#L-214"><span class="linenos">214</span></a><span class="sd">        parent (ImageGalleryModel): Parent model for image registration</span>
</span><span id="L-215"><a href="#L-215"><span class="linenos">215</span></a><span class="sd">        pool (QThreadPool): Qt thread pool for worker management</span>
</span><span id="L-216"><a href="#L-216"><span class="linenos">216</span></a><span class="sd">        requestsDone (dict): Load completion tracking {imageIndex: completed}</span>
</span><span id="L-217"><a href="#L-217"><span class="linenos">217</span></a><span class="sd">    </span>
</span><span id="L-218"><a href="#L-218"><span class="linenos">218</span></a><span class="sd">    Methods:</span>
</span><span id="L-219"><a href="#L-219"><span class="linenos">219</span></a><span class="sd">        requestLoad: Start loading for specific image</span>
</span><span id="L-220"><a href="#L-220"><span class="linenos">220</span></a><span class="sd">        endLoadImage: Handle load completion or retry on failure</span>
</span><span id="L-221"><a href="#L-221"><span class="linenos">221</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-222"><a href="#L-222"><span class="linenos">222</span></a>
</span><span id="L-223"><a href="#L-223"><span class="linenos">223</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
</span><span id="L-224"><a href="#L-224"><span class="linenos">224</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-225"><a href="#L-225"><span class="linenos">225</span></a><span class="sd">        Initialize image loading coordinator.</span>
</span><span id="L-226"><a href="#L-226"><span class="linenos">226</span></a><span class="sd">        </span>
</span><span id="L-227"><a href="#L-227"><span class="linenos">227</span></a><span class="sd">        Args:</span>
</span><span id="L-228"><a href="#L-228"><span class="linenos">228</span></a><span class="sd">            parent (ImageGalleryModel): Parent gallery model</span>
</span><span id="L-229"><a href="#L-229"><span class="linenos">229</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-230"><a href="#L-230"><span class="linenos">230</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
</span><span id="L-231"><a href="#L-231"><span class="linenos">231</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pool</span> <span class="o">=</span> <span class="n">QThreadPool</span><span class="o">.</span><span class="n">globalInstance</span><span class="p">()</span>        <span class="c1"># get a global pool</span>
</span><span id="L-232"><a href="#L-232"><span class="linenos">232</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">requestsDone</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-233"><a href="#L-233"><span class="linenos">233</span></a>
</span><span id="L-234"><a href="#L-234"><span class="linenos">234</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">requestLoad</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">minIdxInPage</span><span class="p">,</span> <span class="n">imgIdxInPage</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
</span><span id="L-235"><a href="#L-235"><span class="linenos">235</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-236"><a href="#L-236"><span class="linenos">236</span></a><span class="sd">        Start image loading for specified gallery position.</span>
</span><span id="L-237"><a href="#L-237"><span class="linenos">237</span></a><span class="sd">        </span>
</span><span id="L-238"><a href="#L-238"><span class="linenos">238</span></a><span class="sd">        Args:</span>
</span><span id="L-239"><a href="#L-239"><span class="linenos">239</span></a><span class="sd">            minIdxInPage (int, Required): First image index in current page</span>
</span><span id="L-240"><a href="#L-240"><span class="linenos">240</span></a><span class="sd">            imgIdxInPage (int, Required): Relative image index within page</span>
</span><span id="L-241"><a href="#L-241"><span class="linenos">241</span></a><span class="sd">            filename (str, Required): Image file path to load</span>
</span><span id="L-242"><a href="#L-242"><span class="linenos">242</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-243"><a href="#L-243"><span class="linenos">243</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">requestsDone</span><span class="p">[</span><span class="n">minIdxInPage</span><span class="o">+</span> <span class="n">imgIdxInPage</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-244"><a href="#L-244"><span class="linenos">244</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pool</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">RunLoadImage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">minIdxInPage</span><span class="p">,</span> <span class="n">imgIdxInPage</span><span class="p">,</span><span class="n">filename</span><span class="p">))</span>
</span><span id="L-245"><a href="#L-245"><span class="linenos">245</span></a>
</span><span id="L-246"><a href="#L-246"><span class="linenos">246</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">endLoadImage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">error</span><span class="p">,</span><span class="n">idx0</span><span class="p">,</span> <span class="n">idx</span><span class="p">,</span><span class="n">processPipe</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
</span><span id="L-247"><a href="#L-247"><span class="linenos">247</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-248"><a href="#L-248"><span class="linenos">248</span></a><span class="sd">        Handle image loading completion or error recovery.</span>
</span><span id="L-249"><a href="#L-249"><span class="linenos">249</span></a><span class="sd">        </span>
</span><span id="L-250"><a href="#L-250"><span class="linenos">250</span></a><span class="sd">        Called when loading completes or fails (IOError, ValueError).</span>
</span><span id="L-251"><a href="#L-251"><span class="linenos">251</span></a><span class="sd">        Updates parent model with ProcessPipe and refreshes view on success.</span>
</span><span id="L-252"><a href="#L-252"><span class="linenos">252</span></a><span class="sd">        Automatically retries loading on failure.</span>
</span><span id="L-253"><a href="#L-253"><span class="linenos">253</span></a>
</span><span id="L-254"><a href="#L-254"><span class="linenos">254</span></a><span class="sd">        Args:</span>
</span><span id="L-255"><a href="#L-255"><span class="linenos">255</span></a><span class="sd">            error (bool, Required): True if loading failed</span>
</span><span id="L-256"><a href="#L-256"><span class="linenos">256</span></a><span class="sd">            idx0 (int, Required): First image index in current page</span>
</span><span id="L-257"><a href="#L-257"><span class="linenos">257</span></a><span class="sd">            idx (int, Required): Relative image index within page</span>
</span><span id="L-258"><a href="#L-258"><span class="linenos">258</span></a><span class="sd">            processPipe (ProcessPipe, Required): Loaded image processing pipeline</span>
</span><span id="L-259"><a href="#L-259"><span class="linenos">259</span></a><span class="sd">            filename (str, Required): Image filename</span>
</span><span id="L-260"><a href="#L-260"><span class="linenos">260</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-261"><a href="#L-261"><span class="linenos">261</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">error</span><span class="p">:</span>
</span><span id="L-262"><a href="#L-262"><span class="linenos">262</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">requestsDone</span><span class="p">[</span><span class="n">idx0</span> <span class="o">+</span> <span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-263"><a href="#L-263"><span class="linenos">263</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">processPipes</span><span class="p">[</span><span class="n">idx0</span> <span class="o">+</span> <span class="n">idx</span><span class="p">]</span><span class="o">=</span> <span class="n">processPipe</span>
</span><span id="L-264"><a href="#L-264"><span class="linenos">264</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">updateImage</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span><span class="n">processPipe</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
</span><span id="L-265"><a href="#L-265"><span class="linenos">265</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-266"><a href="#L-266"><span class="linenos">266</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">requestLoad</span><span class="p">(</span><span class="n">idx0</span><span class="p">,</span> <span class="n">idx</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
</span><span id="L-267"><a href="#L-267"><span class="linenos">267</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-268"><a href="#L-268"><span class="linenos">268</span></a><span class="c1"># --- Class RunLoadImage ------------------------------------------------------</span>
</span><span id="L-269"><a href="#L-269"><span class="linenos">269</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-270"><a href="#L-270"><span class="linenos">270</span></a><span class="k">class</span><span class="w"> </span><span class="nc">RunLoadImage</span><span class="p">(</span><span class="n">QRunnable</span><span class="p">):</span>
</span><span id="L-271"><a href="#L-271"><span class="linenos">271</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-272"><a href="#L-272"><span class="linenos">272</span></a><span class="sd">    Worker thread for individual image loading and ProcessPipe creation.</span>
</span><span id="L-273"><a href="#L-273"><span class="linenos">273</span></a><span class="sd">    </span>
</span><span id="L-274"><a href="#L-274"><span class="linenos">274</span></a><span class="sd">    Loads HDR images, creates associated ProcessPipes with default parameters,</span>
</span><span id="L-275"><a href="#L-275"><span class="linenos">275</span></a><span class="sd">    and performs initial computation for thumbnail generation. Handles</span>
</span><span id="L-276"><a href="#L-276"><span class="linenos">276</span></a><span class="sd">    loading errors gracefully with error reporting.</span>
</span><span id="L-277"><a href="#L-277"><span class="linenos">277</span></a><span class="sd">    </span>
</span><span id="L-278"><a href="#L-278"><span class="linenos">278</span></a><span class="sd">    Attributes:</span>
</span><span id="L-279"><a href="#L-279"><span class="linenos">279</span></a><span class="sd">        parent (RequestLoadImage): Parent coordinator for completion callback</span>
</span><span id="L-280"><a href="#L-280"><span class="linenos">280</span></a><span class="sd">        minIdxInPage (int): First image index in current page</span>
</span><span id="L-281"><a href="#L-281"><span class="linenos">281</span></a><span class="sd">        imgIdxInPage (int): Relative image index within page</span>
</span><span id="L-282"><a href="#L-282"><span class="linenos">282</span></a><span class="sd">        filename (str): Image file path to load</span>
</span><span id="L-283"><a href="#L-283"><span class="linenos">283</span></a><span class="sd">    </span>
</span><span id="L-284"><a href="#L-284"><span class="linenos">284</span></a><span class="sd">    Methods:</span>
</span><span id="L-285"><a href="#L-285"><span class="linenos">285</span></a><span class="sd">        run: Main thread execution with image loading and error handling</span>
</span><span id="L-286"><a href="#L-286"><span class="linenos">286</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-287"><a href="#L-287"><span class="linenos">287</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">parent</span><span class="p">,</span> <span class="n">minIdxInPage</span><span class="p">,</span> <span class="n">imgIdxInPage</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
</span><span id="L-288"><a href="#L-288"><span class="linenos">288</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-289"><a href="#L-289"><span class="linenos">289</span></a><span class="sd">        Initialize image loading worker thread.</span>
</span><span id="L-290"><a href="#L-290"><span class="linenos">290</span></a><span class="sd">        </span>
</span><span id="L-291"><a href="#L-291"><span class="linenos">291</span></a><span class="sd">        Args:</span>
</span><span id="L-292"><a href="#L-292"><span class="linenos">292</span></a><span class="sd">            parent (RequestLoadImage): Parent coordinator instance</span>
</span><span id="L-293"><a href="#L-293"><span class="linenos">293</span></a><span class="sd">            minIdxInPage (int): First image index in current page</span>
</span><span id="L-294"><a href="#L-294"><span class="linenos">294</span></a><span class="sd">            imgIdxInPage (int): Relative image index within page</span>
</span><span id="L-295"><a href="#L-295"><span class="linenos">295</span></a><span class="sd">            filename (str): Image file path to load</span>
</span><span id="L-296"><a href="#L-296"><span class="linenos">296</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-297"><a href="#L-297"><span class="linenos">297</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="L-298"><a href="#L-298"><span class="linenos">298</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
</span><span id="L-299"><a href="#L-299"><span class="linenos">299</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">minIdxInPage</span> <span class="o">=</span> <span class="n">minIdxInPage</span>
</span><span id="L-300"><a href="#L-300"><span class="linenos">300</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">imgIdxInPage</span> <span class="o">=</span> <span class="n">imgIdxInPage</span>
</span><span id="L-301"><a href="#L-301"><span class="linenos">301</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">filename</span> <span class="o">=</span> <span class="n">filename</span>
</span><span id="L-302"><a href="#L-302"><span class="linenos">302</span></a>
</span><span id="L-303"><a href="#L-303"><span class="linenos">303</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-304"><a href="#L-304"><span class="linenos">304</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-305"><a href="#L-305"><span class="linenos">305</span></a><span class="sd">        Main thread execution for image loading.</span>
</span><span id="L-306"><a href="#L-306"><span class="linenos">306</span></a><span class="sd">        </span>
</span><span id="L-307"><a href="#L-307"><span class="linenos">307</span></a><span class="sd">        Loads image file, creates default ProcessPipe, performs initial</span>
</span><span id="L-308"><a href="#L-308"><span class="linenos">308</span></a><span class="sd">        computation, and reports completion or error to parent coordinator.</span>
</span><span id="L-309"><a href="#L-309"><span class="linenos">309</span></a><span class="sd">        Handles IOError and ValueError exceptions gracefully.</span>
</span><span id="L-310"><a href="#L-310"><span class="linenos">310</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-311"><a href="#L-311"><span class="linenos">311</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="L-312"><a href="#L-312"><span class="linenos">312</span></a>            <span class="n">image_</span> <span class="o">=</span> <span class="n">hdrCore</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filename</span><span class="p">,</span> <span class="n">thumb</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-313"><a href="#L-313"><span class="linenos">313</span></a>            <span class="n">processPipe</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">EditImageModel</span><span class="o">.</span><span class="n">buildProcessPipe</span><span class="p">()</span>
</span><span id="L-314"><a href="#L-314"><span class="linenos">314</span></a>            <span class="n">processPipe</span><span class="o">.</span><span class="n">setImage</span><span class="p">(</span><span class="n">image_</span><span class="p">)</span>                      
</span><span id="L-315"><a href="#L-315"><span class="linenos">315</span></a>            <span class="n">processPipe</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span>
</span><span id="L-316"><a href="#L-316"><span class="linenos">316</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">endLoadImage</span><span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">minIdxInPage</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">imgIdxInPage</span><span class="p">,</span> <span class="n">processPipe</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">filename</span><span class="p">)</span>
</span><span id="L-317"><a href="#L-317"><span class="linenos">317</span></a>        <span class="k">except</span><span class="p">(</span><span class="ne">IOError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="L-318"><a href="#L-318"><span class="linenos">318</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">endLoadImage</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">minIdxInPage</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">imgIdxInPage</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">filename</span><span class="p">)</span>
</span><span id="L-319"><a href="#L-319"><span class="linenos">319</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-320"><a href="#L-320"><span class="linenos">320</span></a><span class="c1"># --- Class pCompute ----------------------------------------------------------</span>
</span><span id="L-321"><a href="#L-321"><span class="linenos">321</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-322"><a href="#L-322"><span class="linenos">322</span></a><span class="k">class</span><span class="w"> </span><span class="nc">pCompute</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
</span><span id="L-323"><a href="#L-323"><span class="linenos">323</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-324"><a href="#L-324"><span class="linenos">324</span></a><span class="sd">    Multi-threaded HDR processing with image splitting for large images.</span>
</span><span id="L-325"><a href="#L-325"><span class="linenos">325</span></a><span class="sd">    </span>
</span><span id="L-326"><a href="#L-326"><span class="linenos">326</span></a><span class="sd">    Manages parallel computation of ProcessPipe operations for HDR display</span>
</span><span id="L-327"><a href="#L-327"><span class="linenos">327</span></a><span class="sd">    or export by splitting large images into multiple parts and processing</span>
</span><span id="L-328"><a href="#L-328"><span class="linenos">328</span></a><span class="sd">    them concurrently. Provides progress feedback and handles geometry</span>
</span><span id="L-329"><a href="#L-329"><span class="linenos">329</span></a><span class="sd">    processing separately at the end for optimal performance.</span>
</span><span id="L-330"><a href="#L-330"><span class="linenos">330</span></a><span class="sd">    </span>
</span><span id="L-331"><a href="#L-331"><span class="linenos">331</span></a><span class="sd">    Processing Workflow:</span>
</span><span id="L-332"><a href="#L-332"><span class="linenos">332</span></a><span class="sd">    1. Split input image into grid of smaller sections</span>
</span><span id="L-333"><a href="#L-333"><span class="linenos">333</span></a><span class="sd">    2. Create duplicate ProcessPipes for each split</span>
</span><span id="L-334"><a href="#L-334"><span class="linenos">334</span></a><span class="sd">    3. Process splits in parallel using thread pool</span>
</span><span id="L-335"><a href="#L-335"><span class="linenos">335</span></a><span class="sd">    4. Merge processed splits back into complete image</span>
</span><span id="L-336"><a href="#L-336"><span class="linenos">336</span></a><span class="sd">    5. Apply geometry processing to final merged result</span>
</span><span id="L-337"><a href="#L-337"><span class="linenos">337</span></a><span class="sd">    6. Callback with final processed image</span>
</span><span id="L-338"><a href="#L-338"><span class="linenos">338</span></a><span class="sd">    </span>
</span><span id="L-339"><a href="#L-339"><span class="linenos">339</span></a><span class="sd">    Attributes:</span>
</span><span id="L-340"><a href="#L-340"><span class="linenos">340</span></a><span class="sd">        callBack (function): Completion callback function</span>
</span><span id="L-341"><a href="#L-341"><span class="linenos">341</span></a><span class="sd">        progress (function): Progress update callback function</span>
</span><span id="L-342"><a href="#L-342"><span class="linenos">342</span></a><span class="sd">        nbSplits (int): Total number of image splits to process</span>
</span><span id="L-343"><a href="#L-343"><span class="linenos">343</span></a><span class="sd">        nbDone (int): Number of completed split processing operations</span>
</span><span id="L-344"><a href="#L-344"><span class="linenos">344</span></a><span class="sd">        geometryNode (ProcessNode): Geometry processing node for final step</span>
</span><span id="L-345"><a href="#L-345"><span class="linenos">345</span></a><span class="sd">        meta (metadata): Image metadata for preservation</span>
</span><span id="L-346"><a href="#L-346"><span class="linenos">346</span></a><span class="sd">    </span>
</span><span id="L-347"><a href="#L-347"><span class="linenos">347</span></a><span class="sd">    Methods:</span>
</span><span id="L-348"><a href="#L-348"><span class="linenos">348</span></a><span class="sd">        endCompute: Handle split completion and final merge</span>
</span><span id="L-349"><a href="#L-349"><span class="linenos">349</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-350"><a href="#L-350"><span class="linenos">350</span></a>
</span><span id="L-351"><a href="#L-351"><span class="linenos">351</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">callBack</span><span class="p">,</span> <span class="n">processpipe</span><span class="p">,</span><span class="n">nbWidth</span><span class="p">,</span><span class="n">nbHeight</span><span class="p">,</span> <span class="n">toneMap</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">progress</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">meta</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="L-352"><a href="#L-352"><span class="linenos">352</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-353"><a href="#L-353"><span class="linenos">353</span></a><span class="sd">        Initialize parallel HDR processing with image splitting.</span>
</span><span id="L-354"><a href="#L-354"><span class="linenos">354</span></a><span class="sd">        </span>
</span><span id="L-355"><a href="#L-355"><span class="linenos">355</span></a><span class="sd">        Args:</span>
</span><span id="L-356"><a href="#L-356"><span class="linenos">356</span></a><span class="sd">            callBack (function): Function called when processing completes</span>
</span><span id="L-357"><a href="#L-357"><span class="linenos">357</span></a><span class="sd">            processpipe (ProcessPipe): HDR processing pipeline to apply</span>
</span><span id="L-358"><a href="#L-358"><span class="linenos">358</span></a><span class="sd">            nbWidth (int): Number of horizontal splits</span>
</span><span id="L-359"><a href="#L-359"><span class="linenos">359</span></a><span class="sd">            nbHeight (int): Number of vertical splits  </span>
</span><span id="L-360"><a href="#L-360"><span class="linenos">360</span></a><span class="sd">            toneMap (bool): Apply tone mapping to final result</span>
</span><span id="L-361"><a href="#L-361"><span class="linenos">361</span></a><span class="sd">            progress (function, optional): Progress callback function</span>
</span><span id="L-362"><a href="#L-362"><span class="linenos">362</span></a><span class="sd">            meta (metadata, optional): Image metadata to preserve</span>
</span><span id="L-363"><a href="#L-363"><span class="linenos">363</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-364"><a href="#L-364"><span class="linenos">364</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBack</span> <span class="o">=</span> <span class="n">callBack</span>
</span><span id="L-365"><a href="#L-365"><span class="linenos">365</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">progress</span> <span class="o">=</span><span class="n">progress</span>
</span><span id="L-366"><a href="#L-366"><span class="linenos">366</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">nbSplits</span> <span class="o">=</span> <span class="n">nbWidth</span><span class="o">*</span><span class="n">nbHeight</span>
</span><span id="L-367"><a href="#L-367"><span class="linenos">367</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">nbDone</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-368"><a href="#L-368"><span class="linenos">368</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">geometryNode</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-369"><a href="#L-369"><span class="linenos">369</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">meta</span> <span class="o">=</span> <span class="n">meta</span>
</span><span id="L-370"><a href="#L-370"><span class="linenos">370</span></a>        <span class="c1"># recover and split image</span>
</span><span id="L-371"><a href="#L-371"><span class="linenos">371</span></a>        <span class="nb">input</span> <span class="o">=</span>  <span class="n">processpipe</span><span class="o">.</span><span class="n">getInputImage</span><span class="p">()</span>
</span><span id="L-372"><a href="#L-372"><span class="linenos">372</span></a>
</span><span id="L-373"><a href="#L-373"><span class="linenos">373</span></a>        <span class="c1"># store last processNode (geometry) and remove it from processpipe</span>
</span><span id="L-374"><a href="#L-374"><span class="linenos">374</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">processpipe</span><span class="o">.</span><span class="n">processNodes</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">process</span><span class="p">,</span><span class="n">hdrCore</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">geometry</span><span class="p">):</span>
</span><span id="L-375"><a href="#L-375"><span class="linenos">375</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">geometryNode</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">processpipe</span><span class="o">.</span><span class="n">processNodes</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> 
</span><span id="L-376"><a href="#L-376"><span class="linenos">376</span></a>
</span><span id="L-377"><a href="#L-377"><span class="linenos">377</span></a>            <span class="c1"># remove geometry node (the last one) </span>
</span><span id="L-378"><a href="#L-378"><span class="linenos">378</span></a>            <span class="n">processpipe</span><span class="o">.</span><span class="n">processNodes</span> <span class="o">=</span> <span class="n">processpipe</span><span class="o">.</span><span class="n">processNodes</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-379"><a href="#L-379"><span class="linenos">379</span></a>       
</span><span id="L-380"><a href="#L-380"><span class="linenos">380</span></a>        <span class="c1"># split image and store splited images</span>
</span><span id="L-381"><a href="#L-381"><span class="linenos">381</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">splits</span> <span class="o">=</span> <span class="nb">input</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">nbWidth</span><span class="p">,</span><span class="n">nbHeight</span><span class="p">)</span>
</span><span id="L-382"><a href="#L-382"><span class="linenos">382</span></a>
</span><span id="L-383"><a href="#L-383"><span class="linenos">383</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pool</span> <span class="o">=</span> <span class="n">QThreadPool</span><span class="o">.</span><span class="n">globalInstance</span><span class="p">()</span> 
</span><span id="L-384"><a href="#L-384"><span class="linenos">384</span></a>
</span><span id="L-385"><a href="#L-385"><span class="linenos">385</span></a>        <span class="c1"># duplicate processpipe, set image split and start</span>
</span><span id="L-386"><a href="#L-386"><span class="linenos">386</span></a>        <span class="k">for</span> <span class="n">idxY</span><span class="p">,</span><span class="n">line</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">splits</span><span class="p">):</span>
</span><span id="L-387"><a href="#L-387"><span class="linenos">387</span></a>            <span class="k">for</span> <span class="n">idxX</span><span class="p">,</span><span class="n">split</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">line</span><span class="p">):</span>
</span><span id="L-388"><a href="#L-388"><span class="linenos">388</span></a>                <span class="n">pp</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">processpipe</span><span class="p">)</span>
</span><span id="L-389"><a href="#L-389"><span class="linenos">389</span></a>                <span class="n">pp</span><span class="o">.</span><span class="n">setImage</span><span class="p">(</span><span class="n">split</span><span class="p">)</span>
</span><span id="L-390"><a href="#L-390"><span class="linenos">390</span></a>                <span class="c1"># start compute</span>
</span><span id="L-391"><a href="#L-391"><span class="linenos">391</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">pool</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">pRun</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">pp</span><span class="p">,</span><span class="n">toneMap</span><span class="p">,</span><span class="n">idxX</span><span class="p">,</span><span class="n">idxY</span><span class="p">))</span>
</span><span id="L-392"><a href="#L-392"><span class="linenos">392</span></a>
</span><span id="L-393"><a href="#L-393"><span class="linenos">393</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">endCompute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">idx</span><span class="p">,</span><span class="n">idy</span><span class="p">,</span> <span class="n">split</span><span class="p">):</span>
</span><span id="L-394"><a href="#L-394"><span class="linenos">394</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-395"><a href="#L-395"><span class="linenos">395</span></a><span class="sd">        Handle completion of individual split processing.</span>
</span><span id="L-396"><a href="#L-396"><span class="linenos">396</span></a><span class="sd">        </span>
</span><span id="L-397"><a href="#L-397"><span class="linenos">397</span></a><span class="sd">        Called when each split finishes processing. Tracks completion progress,</span>
</span><span id="L-398"><a href="#L-398"><span class="linenos">398</span></a><span class="sd">        updates progress callback, and triggers final merge and geometry</span>
</span><span id="L-399"><a href="#L-399"><span class="linenos">399</span></a><span class="sd">        processing when all splits are complete.</span>
</span><span id="L-400"><a href="#L-400"><span class="linenos">400</span></a><span class="sd">        </span>
</span><span id="L-401"><a href="#L-401"><span class="linenos">401</span></a><span class="sd">        Args:</span>
</span><span id="L-402"><a href="#L-402"><span class="linenos">402</span></a><span class="sd">            idx (int): X-coordinate of completed split</span>
</span><span id="L-403"><a href="#L-403"><span class="linenos">403</span></a><span class="sd">            idy (int): Y-coordinate of completed split</span>
</span><span id="L-404"><a href="#L-404"><span class="linenos">404</span></a><span class="sd">            split (Image): Processed image split result</span>
</span><span id="L-405"><a href="#L-405"><span class="linenos">405</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-406"><a href="#L-406"><span class="linenos">406</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">splits</span><span class="p">[</span><span class="n">idy</span><span class="p">][</span><span class="n">idx</span><span class="p">]</span><span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">split</span><span class="p">)</span>
</span><span id="L-407"><a href="#L-407"><span class="linenos">407</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">nbDone</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="L-408"><a href="#L-408"><span class="linenos">408</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">progress</span><span class="p">:</span>
</span><span id="L-409"><a href="#L-409"><span class="linenos">409</span></a>            <span class="n">percent</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nbDone</span><span class="o">*</span><span class="mi">100</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">nbSplits</span><span class="p">))</span><span class="o">+</span><span class="s1">&#39;%&#39;</span>
</span><span id="L-410"><a href="#L-410"><span class="linenos">410</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">progress</span><span class="p">(</span><span class="s1">&#39;HDR image process-pipe computation:&#39;</span><span class="o">+</span><span class="n">percent</span><span class="p">)</span>
</span><span id="L-411"><a href="#L-411"><span class="linenos">411</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">nbDone</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">nbSplits</span><span class="p">:</span>
</span><span id="L-412"><a href="#L-412"><span class="linenos">412</span></a>            <span class="n">res</span> <span class="o">=</span> <span class="n">hdrCore</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">splits</span><span class="p">)</span>
</span><span id="L-413"><a href="#L-413"><span class="linenos">413</span></a>            <span class="c1"># process geometry</span>
</span><span id="L-414"><a href="#L-414"><span class="linenos">414</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">geometryNode</span><span class="p">:</span>
</span><span id="L-415"><a href="#L-415"><span class="linenos">415</span></a>                <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">geometryNode</span><span class="o">.</span><span class="n">process</span><span class="o">.</span><span class="n">compute</span><span class="p">(</span><span class="n">res</span><span class="p">,</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">geometryNode</span><span class="o">.</span><span class="n">params</span><span class="p">)</span>
</span><span id="L-416"><a href="#L-416"><span class="linenos">416</span></a>            <span class="c1"># callBack caller</span>
</span><span id="L-417"><a href="#L-417"><span class="linenos">417</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">callBack</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">meta</span><span class="p">)</span>
</span><span id="L-418"><a href="#L-418"><span class="linenos">418</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-419"><a href="#L-419"><span class="linenos">419</span></a><span class="c1"># --- Class pRun --------------------------------------------------------------</span>
</span><span id="L-420"><a href="#L-420"><span class="linenos">420</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-421"><a href="#L-421"><span class="linenos">421</span></a><span class="k">class</span><span class="w"> </span><span class="nc">pRun</span><span class="p">(</span><span class="n">QRunnable</span><span class="p">):</span>
</span><span id="L-422"><a href="#L-422"><span class="linenos">422</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-423"><a href="#L-423"><span class="linenos">423</span></a><span class="sd">    Worker thread for processing individual image splits in parallel.</span>
</span><span id="L-424"><a href="#L-424"><span class="linenos">424</span></a><span class="sd">    </span>
</span><span id="L-425"><a href="#L-425"><span class="linenos">425</span></a><span class="sd">    Executes ProcessPipe computation on a single image split, supporting</span>
</span><span id="L-426"><a href="#L-426"><span class="linenos">426</span></a><span class="sd">    both tone-mapped and HDR output modes. Reports completion back to</span>
</span><span id="L-427"><a href="#L-427"><span class="linenos">427</span></a><span class="sd">    parent pCompute coordinator.</span>
</span><span id="L-428"><a href="#L-428"><span class="linenos">428</span></a><span class="sd">    </span>
</span><span id="L-429"><a href="#L-429"><span class="linenos">429</span></a><span class="sd">    Attributes:</span>
</span><span id="L-430"><a href="#L-430"><span class="linenos">430</span></a><span class="sd">        parent (pCompute): Parent coordinator for completion callback</span>
</span><span id="L-431"><a href="#L-431"><span class="linenos">431</span></a><span class="sd">        processpipe (ProcessPipe): Processing pipeline to apply to split</span>
</span><span id="L-432"><a href="#L-432"><span class="linenos">432</span></a><span class="sd">        idx (tuple): (x, y) coordinates of split in grid</span>
</span><span id="L-433"><a href="#L-433"><span class="linenos">433</span></a><span class="sd">        toneMap (bool): Apply tone mapping to result</span>
</span><span id="L-434"><a href="#L-434"><span class="linenos">434</span></a><span class="sd">    </span>
</span><span id="L-435"><a href="#L-435"><span class="linenos">435</span></a><span class="sd">    Methods:</span>
</span><span id="L-436"><a href="#L-436"><span class="linenos">436</span></a><span class="sd">        run: Main thread execution for split processing</span>
</span><span id="L-437"><a href="#L-437"><span class="linenos">437</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-438"><a href="#L-438"><span class="linenos">438</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">parent</span><span class="p">,</span><span class="n">processpipe</span><span class="p">,</span><span class="n">toneMap</span><span class="p">,</span> <span class="n">idxX</span><span class="p">,</span><span class="n">idxY</span><span class="p">):</span>
</span><span id="L-439"><a href="#L-439"><span class="linenos">439</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-440"><a href="#L-440"><span class="linenos">440</span></a><span class="sd">        Initialize split processing worker thread.</span>
</span><span id="L-441"><a href="#L-441"><span class="linenos">441</span></a><span class="sd">        </span>
</span><span id="L-442"><a href="#L-442"><span class="linenos">442</span></a><span class="sd">        Args:</span>
</span><span id="L-443"><a href="#L-443"><span class="linenos">443</span></a><span class="sd">            parent (pCompute): Parent coordinator instance</span>
</span><span id="L-444"><a href="#L-444"><span class="linenos">444</span></a><span class="sd">            processpipe (ProcessPipe): Processing pipeline to apply</span>
</span><span id="L-445"><a href="#L-445"><span class="linenos">445</span></a><span class="sd">            toneMap (bool): Apply tone mapping to result</span>
</span><span id="L-446"><a href="#L-446"><span class="linenos">446</span></a><span class="sd">            idxX (int): X-coordinate of split in grid</span>
</span><span id="L-447"><a href="#L-447"><span class="linenos">447</span></a><span class="sd">            idxY (int): Y-coordinate of split in grid</span>
</span><span id="L-448"><a href="#L-448"><span class="linenos">448</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-449"><a href="#L-449"><span class="linenos">449</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="L-450"><a href="#L-450"><span class="linenos">450</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
</span><span id="L-451"><a href="#L-451"><span class="linenos">451</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">processpipe</span> <span class="o">=</span> <span class="n">processpipe</span>
</span><span id="L-452"><a href="#L-452"><span class="linenos">452</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">idx</span> <span class="o">=</span> <span class="p">(</span><span class="n">idxX</span><span class="p">,</span><span class="n">idxY</span><span class="p">)</span>
</span><span id="L-453"><a href="#L-453"><span class="linenos">453</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">toneMap</span> <span class="o">=</span> <span class="n">toneMap</span>
</span><span id="L-454"><a href="#L-454"><span class="linenos">454</span></a>
</span><span id="L-455"><a href="#L-455"><span class="linenos">455</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-456"><a href="#L-456"><span class="linenos">456</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-457"><a href="#L-457"><span class="linenos">457</span></a><span class="sd">        Main thread execution for split processing.</span>
</span><span id="L-458"><a href="#L-458"><span class="linenos">458</span></a><span class="sd">        </span>
</span><span id="L-459"><a href="#L-459"><span class="linenos">459</span></a><span class="sd">        Executes ProcessPipe computation on the assigned image split</span>
</span><span id="L-460"><a href="#L-460"><span class="linenos">460</span></a><span class="sd">        and reports completion with processed result to parent coordinator.</span>
</span><span id="L-461"><a href="#L-461"><span class="linenos">461</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-462"><a href="#L-462"><span class="linenos">462</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">processpipe</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span>
</span><span id="L-463"><a href="#L-463"><span class="linenos">463</span></a>        <span class="n">pRes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">processpipe</span><span class="o">.</span><span class="n">getImage</span><span class="p">(</span><span class="n">toneMap</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">toneMap</span><span class="p">)</span>
</span><span id="L-464"><a href="#L-464"><span class="linenos">464</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">endCompute</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">idx</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="bp">self</span><span class="o">.</span><span class="n">idx</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">pRes</span><span class="p">)</span>
</span><span id="L-465"><a href="#L-465"><span class="linenos">465</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-466"><a href="#L-466"><span class="linenos">466</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-467"><a href="#L-467"><span class="linenos">467</span></a>
</span><span id="L-468"><a href="#L-468"><span class="linenos">468</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-469"><a href="#L-469"><span class="linenos">469</span></a><span class="c1"># --- Class cCompute ----------------------------------------------------------</span>
</span><span id="L-470"><a href="#L-470"><span class="linenos">470</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-471"><a href="#L-471"><span class="linenos">471</span></a><span class="k">class</span><span class="w"> </span><span class="nc">cCompute</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
</span><span id="L-472"><a href="#L-472"><span class="linenos">472</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-473"><a href="#L-473"><span class="linenos">473</span></a><span class="sd">    C++ accelerated HDR processing for high-performance computation.</span>
</span><span id="L-474"><a href="#L-474"><span class="linenos">474</span></a><span class="sd">    </span>
</span><span id="L-475"><a href="#L-475"><span class="linenos">475</span></a><span class="sd">    Provides hardware-accelerated HDR processing using C++ backend</span>
</span><span id="L-476"><a href="#L-476"><span class="linenos">476</span></a><span class="sd">    for improved performance on large images or complex operations.</span>
</span><span id="L-477"><a href="#L-477"><span class="linenos">477</span></a><span class="sd">    Uses single-threaded execution with optimized C++ implementation.</span>
</span><span id="L-478"><a href="#L-478"><span class="linenos">478</span></a><span class="sd">    </span>
</span><span id="L-479"><a href="#L-479"><span class="linenos">479</span></a><span class="sd">    Attributes:</span>
</span><span id="L-480"><a href="#L-480"><span class="linenos">480</span></a><span class="sd">        callBack (function): Completion callback function</span>
</span><span id="L-481"><a href="#L-481"><span class="linenos">481</span></a><span class="sd">        progress (function): Progress update callback function</span>
</span><span id="L-482"><a href="#L-482"><span class="linenos">482</span></a><span class="sd">        pool (QThreadPool): Qt thread pool for worker management</span>
</span><span id="L-483"><a href="#L-483"><span class="linenos">483</span></a><span class="sd">    </span>
</span><span id="L-484"><a href="#L-484"><span class="linenos">484</span></a><span class="sd">    Methods:</span>
</span><span id="L-485"><a href="#L-485"><span class="linenos">485</span></a><span class="sd">        endCompute: Handle processing completion</span>
</span><span id="L-486"><a href="#L-486"><span class="linenos">486</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-487"><a href="#L-487"><span class="linenos">487</span></a>
</span><span id="L-488"><a href="#L-488"><span class="linenos">488</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">callBack</span><span class="p">,</span> <span class="n">processpipe</span><span class="p">,</span> <span class="n">toneMap</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">progress</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="L-489"><a href="#L-489"><span class="linenos">489</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-490"><a href="#L-490"><span class="linenos">490</span></a><span class="sd">        Initialize C++ accelerated HDR processing.</span>
</span><span id="L-491"><a href="#L-491"><span class="linenos">491</span></a><span class="sd">        </span>
</span><span id="L-492"><a href="#L-492"><span class="linenos">492</span></a><span class="sd">        Args:</span>
</span><span id="L-493"><a href="#L-493"><span class="linenos">493</span></a><span class="sd">            callBack (function): Function called when processing completes</span>
</span><span id="L-494"><a href="#L-494"><span class="linenos">494</span></a><span class="sd">            processpipe (ProcessPipe): HDR processing pipeline to execute</span>
</span><span id="L-495"><a href="#L-495"><span class="linenos">495</span></a><span class="sd">            toneMap (bool): Apply tone mapping to result</span>
</span><span id="L-496"><a href="#L-496"><span class="linenos">496</span></a><span class="sd">            progress (function, optional): Progress callback function</span>
</span><span id="L-497"><a href="#L-497"><span class="linenos">497</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-498"><a href="#L-498"><span class="linenos">498</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBack</span> <span class="o">=</span> <span class="n">callBack</span>
</span><span id="L-499"><a href="#L-499"><span class="linenos">499</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">progress</span> <span class="o">=</span><span class="n">progress</span>
</span><span id="L-500"><a href="#L-500"><span class="linenos">500</span></a>
</span><span id="L-501"><a href="#L-501"><span class="linenos">501</span></a>        <span class="c1"># recover image</span>
</span><span id="L-502"><a href="#L-502"><span class="linenos">502</span></a>        <span class="nb">input</span> <span class="o">=</span>  <span class="n">processpipe</span><span class="o">.</span><span class="n">getInputImage</span><span class="p">()</span>
</span><span id="L-503"><a href="#L-503"><span class="linenos">503</span></a>
</span><span id="L-504"><a href="#L-504"><span class="linenos">504</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pool</span> <span class="o">=</span> <span class="n">QThreadPool</span><span class="o">.</span><span class="n">globalInstance</span><span class="p">()</span> 
</span><span id="L-505"><a href="#L-505"><span class="linenos">505</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pool</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">cRun</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">processpipe</span><span class="p">,</span><span class="n">toneMap</span><span class="p">))</span>
</span><span id="L-506"><a href="#L-506"><span class="linenos">506</span></a>
</span><span id="L-507"><a href="#L-507"><span class="linenos">507</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">endCompute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">):</span>
</span><span id="L-508"><a href="#L-508"><span class="linenos">508</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-509"><a href="#L-509"><span class="linenos">509</span></a><span class="sd">        Handle processing completion and deliver result.</span>
</span><span id="L-510"><a href="#L-510"><span class="linenos">510</span></a><span class="sd">        </span>
</span><span id="L-511"><a href="#L-511"><span class="linenos">511</span></a><span class="sd">        Args:</span>
</span><span id="L-512"><a href="#L-512"><span class="linenos">512</span></a><span class="sd">            img (Image): Processed HDR image result</span>
</span><span id="L-513"><a href="#L-513"><span class="linenos">513</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-514"><a href="#L-514"><span class="linenos">514</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBack</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
</span><span id="L-515"><a href="#L-515"><span class="linenos">515</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-516"><a href="#L-516"><span class="linenos">516</span></a><span class="c1"># --- Class cRun --------------------------------------------------------------</span>
</span><span id="L-517"><a href="#L-517"><span class="linenos">517</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-518"><a href="#L-518"><span class="linenos">518</span></a><span class="k">class</span><span class="w"> </span><span class="nc">cRun</span><span class="p">(</span><span class="n">QRunnable</span><span class="p">):</span>
</span><span id="L-519"><a href="#L-519"><span class="linenos">519</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-520"><a href="#L-520"><span class="linenos">520</span></a><span class="sd">    Worker thread for C++ accelerated HDR processing execution.</span>
</span><span id="L-521"><a href="#L-521"><span class="linenos">521</span></a><span class="sd">    </span>
</span><span id="L-522"><a href="#L-522"><span class="linenos">522</span></a><span class="sd">    Executes ProcessPipe computation using C++ backend acceleration</span>
</span><span id="L-523"><a href="#L-523"><span class="linenos">523</span></a><span class="sd">    for improved performance. Handles input image copying and result</span>
</span><span id="L-524"><a href="#L-524"><span class="linenos">524</span></a><span class="sd">    delivery to parent coordinator.</span>
</span><span id="L-525"><a href="#L-525"><span class="linenos">525</span></a><span class="sd">    </span>
</span><span id="L-526"><a href="#L-526"><span class="linenos">526</span></a><span class="sd">    Attributes:</span>
</span><span id="L-527"><a href="#L-527"><span class="linenos">527</span></a><span class="sd">        parent (cCompute): Parent coordinator for completion callback</span>
</span><span id="L-528"><a href="#L-528"><span class="linenos">528</span></a><span class="sd">        processpipe (ProcessPipe): Processing pipeline to execute</span>
</span><span id="L-529"><a href="#L-529"><span class="linenos">529</span></a><span class="sd">        toneMap (bool): Apply tone mapping to result</span>
</span><span id="L-530"><a href="#L-530"><span class="linenos">530</span></a><span class="sd">    </span>
</span><span id="L-531"><a href="#L-531"><span class="linenos">531</span></a><span class="sd">    Methods:</span>
</span><span id="L-532"><a href="#L-532"><span class="linenos">532</span></a><span class="sd">        run: Main thread execution with C++ acceleration</span>
</span><span id="L-533"><a href="#L-533"><span class="linenos">533</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-534"><a href="#L-534"><span class="linenos">534</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">parent</span><span class="p">,</span><span class="n">processpipe</span><span class="p">,</span><span class="n">toneMap</span><span class="p">):</span>
</span><span id="L-535"><a href="#L-535"><span class="linenos">535</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-536"><a href="#L-536"><span class="linenos">536</span></a><span class="sd">        Initialize C++ processing worker thread.</span>
</span><span id="L-537"><a href="#L-537"><span class="linenos">537</span></a><span class="sd">        </span>
</span><span id="L-538"><a href="#L-538"><span class="linenos">538</span></a><span class="sd">        Args:</span>
</span><span id="L-539"><a href="#L-539"><span class="linenos">539</span></a><span class="sd">            parent (cCompute): Parent coordinator instance</span>
</span><span id="L-540"><a href="#L-540"><span class="linenos">540</span></a><span class="sd">            processpipe (ProcessPipe): Processing pipeline to execute</span>
</span><span id="L-541"><a href="#L-541"><span class="linenos">541</span></a><span class="sd">            toneMap (bool): Apply tone mapping to result</span>
</span><span id="L-542"><a href="#L-542"><span class="linenos">542</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-543"><a href="#L-543"><span class="linenos">543</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="L-544"><a href="#L-544"><span class="linenos">544</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
</span><span id="L-545"><a href="#L-545"><span class="linenos">545</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">processpipe</span> <span class="o">=</span> <span class="n">processpipe</span>
</span><span id="L-546"><a href="#L-546"><span class="linenos">546</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">toneMap</span> <span class="o">=</span> <span class="n">toneMap</span>
</span><span id="L-547"><a href="#L-547"><span class="linenos">547</span></a>
</span><span id="L-548"><a href="#L-548"><span class="linenos">548</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-549"><a href="#L-549"><span class="linenos">549</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-550"><a href="#L-550"><span class="linenos">550</span></a><span class="sd">        Main thread execution with C++ acceleration.</span>
</span><span id="L-551"><a href="#L-551"><span class="linenos">551</span></a><span class="sd">        </span>
</span><span id="L-552"><a href="#L-552"><span class="linenos">552</span></a><span class="sd">        Executes ProcessPipe computation using C++ backend (hdrCore.coreC)</span>
</span><span id="L-553"><a href="#L-553"><span class="linenos">553</span></a><span class="sd">        for improved performance. Copies input image, processes through</span>
</span><span id="L-554"><a href="#L-554"><span class="linenos">554</span></a><span class="sd">        C++ pipeline, and reports completion to parent coordinator.</span>
</span><span id="L-555"><a href="#L-555"><span class="linenos">555</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-556"><a href="#L-556"><span class="linenos">556</span></a>        <span class="n">img</span>  <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">processpipe</span><span class="o">.</span><span class="n">getInputImage</span><span class="p">())</span>
</span><span id="L-557"><a href="#L-557"><span class="linenos">557</span></a>        <span class="n">imgRes</span> <span class="o">=</span> <span class="n">hdrCore</span><span class="o">.</span><span class="n">coreC</span><span class="o">.</span><span class="n">coreCcompute</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">processpipe</span><span class="p">)</span>
</span><span id="L-558"><a href="#L-558"><span class="linenos">558</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">processpipe</span><span class="o">.</span><span class="n">setOutput</span><span class="p">(</span><span class="n">imgRes</span><span class="p">)</span>
</span><span id="L-559"><a href="#L-559"><span class="linenos">559</span></a>
</span><span id="L-560"><a href="#L-560"><span class="linenos">560</span></a>        <span class="n">pRes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">processpipe</span><span class="o">.</span><span class="n">getImage</span><span class="p">(</span><span class="n">toneMap</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">toneMap</span><span class="p">)</span>
</span><span id="L-561"><a href="#L-561"><span class="linenos">561</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">endCompute</span><span class="p">(</span><span class="n">pRes</span><span class="p">)</span>
</span><span id="L-562"><a href="#L-562"><span class="linenos">562</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-563"><a href="#L-563"><span class="linenos">563</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-564"><a href="#L-564"><span class="linenos">564</span></a>
</span><span id="L-565"><a href="#L-565"><span class="linenos">565</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-566"><a href="#L-566"><span class="linenos">566</span></a><span class="c1"># --- Class RequestAestheticsCompute ----------------------------------------------------</span>
</span><span id="L-567"><a href="#L-567"><span class="linenos">567</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-568"><a href="#L-568"><span class="linenos">568</span></a><span class="k">class</span><span class="w"> </span><span class="nc">RequestAestheticsCompute</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
</span><span id="L-569"><a href="#L-569"><span class="linenos">569</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-570"><a href="#L-570"><span class="linenos">570</span></a><span class="sd">    Threading coordinator for image aesthetics analysis and computation.</span>
</span><span id="L-571"><a href="#L-571"><span class="linenos">571</span></a><span class="sd">    </span>
</span><span id="L-572"><a href="#L-572"><span class="linenos">572</span></a><span class="sd">    Manages parallel computation of aesthetic analysis including color palette</span>
</span><span id="L-573"><a href="#L-573"><span class="linenos">573</span></a><span class="sd">    extraction, composition analysis, and visual quality assessment. Uses</span>
</span><span id="L-574"><a href="#L-574"><span class="linenos">574</span></a><span class="sd">    single-threaded sequential processing to maintain analysis order while</span>
</span><span id="L-575"><a href="#L-575"><span class="linenos">575</span></a><span class="sd">    providing non-blocking background computation.</span>
</span><span id="L-576"><a href="#L-576"><span class="linenos">576</span></a><span class="sd">    </span>
</span><span id="L-577"><a href="#L-577"><span class="linenos">577</span></a><span class="sd">    Similar to RequestCompute but specialized for aesthetics analysis workflows</span>
</span><span id="L-578"><a href="#L-578"><span class="linenos">578</span></a><span class="sd">    that may have different performance characteristics and requirements.</span>
</span><span id="L-579"><a href="#L-579"><span class="linenos">579</span></a><span class="sd">    </span>
</span><span id="L-580"><a href="#L-580"><span class="linenos">580</span></a><span class="sd">    Attributes:</span>
</span><span id="L-581"><a href="#L-581"><span class="linenos">581</span></a><span class="sd">        parent: Parent model for result callbacks  </span>
</span><span id="L-582"><a href="#L-582"><span class="linenos">582</span></a><span class="sd">        requestDict (dict): Stores pending parameter updates</span>
</span><span id="L-583"><a href="#L-583"><span class="linenos">583</span></a><span class="sd">        pool (QThreadPool): Qt thread pool for worker management</span>
</span><span id="L-584"><a href="#L-584"><span class="linenos">584</span></a><span class="sd">        processpipe (ProcessPipe): Active processing pipeline reference</span>
</span><span id="L-585"><a href="#L-585"><span class="linenos">585</span></a><span class="sd">        readyToRun (bool): Processing availability flag</span>
</span><span id="L-586"><a href="#L-586"><span class="linenos">586</span></a><span class="sd">        waitingUpdate (bool): Pending update flag during processing</span>
</span><span id="L-587"><a href="#L-587"><span class="linenos">587</span></a><span class="sd">    </span>
</span><span id="L-588"><a href="#L-588"><span class="linenos">588</span></a><span class="sd">    Methods:</span>
</span><span id="L-589"><a href="#L-589"><span class="linenos">589</span></a><span class="sd">        setProcessPipe: Set active processing pipeline</span>
</span><span id="L-590"><a href="#L-590"><span class="linenos">590</span></a><span class="sd">        requestCompute: Queue parameter update and trigger processing  </span>
</span><span id="L-591"><a href="#L-591"><span class="linenos">591</span></a><span class="sd">        endCompute: Handle processing completion and manage restart</span>
</span><span id="L-592"><a href="#L-592"><span class="linenos">592</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-593"><a href="#L-593"><span class="linenos">593</span></a>
</span><span id="L-594"><a href="#L-594"><span class="linenos">594</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
</span><span id="L-595"><a href="#L-595"><span class="linenos">595</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-596"><a href="#L-596"><span class="linenos">596</span></a><span class="sd">        Initialize aesthetics compute coordinator.</span>
</span><span id="L-597"><a href="#L-597"><span class="linenos">597</span></a><span class="sd">        </span>
</span><span id="L-598"><a href="#L-598"><span class="linenos">598</span></a><span class="sd">        Args:</span>
</span><span id="L-599"><a href="#L-599"><span class="linenos">599</span></a><span class="sd">            parent: Parent model for result delivery</span>
</span><span id="L-600"><a href="#L-600"><span class="linenos">600</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-601"><a href="#L-601"><span class="linenos">601</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
</span><span id="L-602"><a href="#L-602"><span class="linenos">602</span></a>
</span><span id="L-603"><a href="#L-603"><span class="linenos">603</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">requestDict</span><span class="o">=</span> <span class="p">{}</span> <span class="c1"># store resqustCompute key:processNodeId, value: processNode params</span>
</span><span id="L-604"><a href="#L-604"><span class="linenos">604</span></a>
</span><span id="L-605"><a href="#L-605"><span class="linenos">605</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pool</span> <span class="o">=</span> <span class="n">QThreadPool</span><span class="o">.</span><span class="n">globalInstance</span><span class="p">()</span>        <span class="c1"># get global pool</span>
</span><span id="L-606"><a href="#L-606"><span class="linenos">606</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">processpipe</span> <span class="o">=</span> <span class="kc">None</span>                         <span class="c1"># processpipe ref</span>
</span><span id="L-607"><a href="#L-607"><span class="linenos">607</span></a>
</span><span id="L-608"><a href="#L-608"><span class="linenos">608</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">readyToRun</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-609"><a href="#L-609"><span class="linenos">609</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">waitingUpdate</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-610"><a href="#L-610"><span class="linenos">610</span></a>
</span><span id="L-611"><a href="#L-611"><span class="linenos">611</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setProcessPipe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">pp</span><span class="p">):</span>
</span><span id="L-612"><a href="#L-612"><span class="linenos">612</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-613"><a href="#L-613"><span class="linenos">613</span></a><span class="sd">        Set the current active processing pipeline.</span>
</span><span id="L-614"><a href="#L-614"><span class="linenos">614</span></a>
</span><span id="L-615"><a href="#L-615"><span class="linenos">615</span></a><span class="sd">        Args:</span>
</span><span id="L-616"><a href="#L-616"><span class="linenos">616</span></a><span class="sd">            pp (ProcessPipe, Required): Processing pipeline to manage</span>
</span><span id="L-617"><a href="#L-617"><span class="linenos">617</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-618"><a href="#L-618"><span class="linenos">618</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">processpipe</span> <span class="o">=</span> <span class="n">pp</span>
</span><span id="L-619"><a href="#L-619"><span class="linenos">619</span></a>    
</span><span id="L-620"><a href="#L-620"><span class="linenos">620</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">requestCompute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="n">params</span><span class="p">):</span>
</span><span id="L-621"><a href="#L-621"><span class="linenos">621</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-622"><a href="#L-622"><span class="linenos">622</span></a><span class="sd">        Queue parameter update and request aesthetics computation.</span>
</span><span id="L-623"><a href="#L-623"><span class="linenos">623</span></a>
</span><span id="L-624"><a href="#L-624"><span class="linenos">624</span></a><span class="sd">        Args:</span>
</span><span id="L-625"><a href="#L-625"><span class="linenos">625</span></a><span class="sd">            id (int, Required): Index of process-node in processing pipeline</span>
</span><span id="L-626"><a href="#L-626"><span class="linenos">626</span></a><span class="sd">            params (dict, Required): Updated parameters for process-node</span>
</span><span id="L-627"><a href="#L-627"><span class="linenos">627</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-628"><a href="#L-628"><span class="linenos">628</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">requestDict</span><span class="p">[</span><span class="nb">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
</span><span id="L-629"><a href="#L-629"><span class="linenos">629</span></a>
</span><span id="L-630"><a href="#L-630"><span class="linenos">630</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">readyToRun</span><span class="p">:</span>
</span><span id="L-631"><a href="#L-631"><span class="linenos">631</span></a>            <span class="c1"># start processing processpipe</span>
</span><span id="L-632"><a href="#L-632"><span class="linenos">632</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">pool</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">RunAestheticsCompute</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
</span><span id="L-633"><a href="#L-633"><span class="linenos">633</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-634"><a href="#L-634"><span class="linenos">634</span></a>            <span class="c1"># if a computation is already running</span>
</span><span id="L-635"><a href="#L-635"><span class="linenos">635</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">waitingUpdate</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-636"><a href="#L-636"><span class="linenos">636</span></a>
</span><span id="L-637"><a href="#L-637"><span class="linenos">637</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">endCompute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-638"><a href="#L-638"><span class="linenos">638</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-639"><a href="#L-639"><span class="linenos">639</span></a><span class="sd">        Handle aesthetics processing completion and manage restart.</span>
</span><span id="L-640"><a href="#L-640"><span class="linenos">640</span></a><span class="sd">        </span>
</span><span id="L-641"><a href="#L-641"><span class="linenos">641</span></a><span class="sd">        Called when aesthetics computation finishes. Retrieves processed</span>
</span><span id="L-642"><a href="#L-642"><span class="linenos">642</span></a><span class="sd">        image, sends it to parent model, and restarts computation if there</span>
</span><span id="L-643"><a href="#L-643"><span class="linenos">643</span></a><span class="sd">        are pending parameter updates.</span>
</span><span id="L-644"><a href="#L-644"><span class="linenos">644</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-645"><a href="#L-645"><span class="linenos">645</span></a>        <span class="n">imgTM</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">processpipe</span><span class="o">.</span><span class="n">getImage</span><span class="p">(</span><span class="n">toneMap</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-646"><a href="#L-646"><span class="linenos">646</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">updateImage</span><span class="p">(</span><span class="n">imgTM</span><span class="p">)</span>
</span><span id="L-647"><a href="#L-647"><span class="linenos">647</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">waitingUpdate</span><span class="p">:</span>
</span><span id="L-648"><a href="#L-648"><span class="linenos">648</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">pool</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">RunAestheticsCompute</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
</span><span id="L-649"><a href="#L-649"><span class="linenos">649</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">waitingUpdate</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-650"><a href="#L-650"><span class="linenos">650</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-651"><a href="#L-651"><span class="linenos">651</span></a><span class="c1"># --- Class RunCompute --------------------------------------------------------</span>
</span><span id="L-652"><a href="#L-652"><span class="linenos">652</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-653"><a href="#L-653"><span class="linenos">653</span></a><span class="k">class</span><span class="w"> </span><span class="nc">RunAestheticsCompute</span><span class="p">(</span><span class="n">QRunnable</span><span class="p">):</span>
</span><span id="L-654"><a href="#L-654"><span class="linenos">654</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-655"><a href="#L-655"><span class="linenos">655</span></a><span class="sd">    Worker thread for aesthetics analysis and computation execution.</span>
</span><span id="L-656"><a href="#L-656"><span class="linenos">656</span></a><span class="sd">    </span>
</span><span id="L-657"><a href="#L-657"><span class="linenos">657</span></a><span class="sd">    Executes ProcessPipe computation focused on aesthetics analysis including</span>
</span><span id="L-658"><a href="#L-658"><span class="linenos">658</span></a><span class="sd">    color palette extraction, composition metrics, and visual quality assessment.</span>
</span><span id="L-659"><a href="#L-659"><span class="linenos">659</span></a><span class="sd">    Uses Python-based processing for flexibility in analysis algorithms.</span>
</span><span id="L-660"><a href="#L-660"><span class="linenos">660</span></a><span class="sd">    </span>
</span><span id="L-661"><a href="#L-661"><span class="linenos">661</span></a><span class="sd">    Attributes:</span>
</span><span id="L-662"><a href="#L-662"><span class="linenos">662</span></a><span class="sd">        parent (RequestAestheticsCompute): Parent coordinator for completion callback</span>
</span><span id="L-663"><a href="#L-663"><span class="linenos">663</span></a><span class="sd">    </span>
</span><span id="L-664"><a href="#L-664"><span class="linenos">664</span></a><span class="sd">    Methods:</span>
</span><span id="L-665"><a href="#L-665"><span class="linenos">665</span></a><span class="sd">        run: Main thread execution for aesthetics processing</span>
</span><span id="L-666"><a href="#L-666"><span class="linenos">666</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-667"><a href="#L-667"><span class="linenos">667</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">parent</span><span class="p">):</span>
</span><span id="L-668"><a href="#L-668"><span class="linenos">668</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-669"><a href="#L-669"><span class="linenos">669</span></a><span class="sd">        Initialize aesthetics compute worker thread.</span>
</span><span id="L-670"><a href="#L-670"><span class="linenos">670</span></a><span class="sd">        </span>
</span><span id="L-671"><a href="#L-671"><span class="linenos">671</span></a><span class="sd">        Args:</span>
</span><span id="L-672"><a href="#L-672"><span class="linenos">672</span></a><span class="sd">            parent (RequestAestheticsCompute): Parent coordinator instance</span>
</span><span id="L-673"><a href="#L-673"><span class="linenos">673</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-674"><a href="#L-674"><span class="linenos">674</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="L-675"><a href="#L-675"><span class="linenos">675</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
</span><span id="L-676"><a href="#L-676"><span class="linenos">676</span></a>
</span><span id="L-677"><a href="#L-677"><span class="linenos">677</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-678"><a href="#L-678"><span class="linenos">678</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-679"><a href="#L-679"><span class="linenos">679</span></a><span class="sd">        Main thread execution for aesthetics processing.</span>
</span><span id="L-680"><a href="#L-680"><span class="linenos">680</span></a><span class="sd">        </span>
</span><span id="L-681"><a href="#L-681"><span class="linenos">681</span></a><span class="sd">        Executes ProcessPipe computation with focus on aesthetics analysis.</span>
</span><span id="L-682"><a href="#L-682"><span class="linenos">682</span></a><span class="sd">        Updates pipeline parameters, performs Python-based computation</span>
</span><span id="L-683"><a href="#L-683"><span class="linenos">683</span></a><span class="sd">        with timing metrics, and triggers completion callback.</span>
</span><span id="L-684"><a href="#L-684"><span class="linenos">684</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-685"><a href="#L-685"><span class="linenos">685</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">readyToRun</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-686"><a href="#L-686"><span class="linenos">686</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">requestDict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">processpipe</span><span class="o">.</span><span class="n">setParameters</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">requestDict</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>
</span><span id="L-687"><a href="#L-687"><span class="linenos">687</span></a>        <span class="n">start</span> <span class="o">=</span> <span class="n">timer</span><span class="p">()</span>
</span><span id="L-688"><a href="#L-688"><span class="linenos">688</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">processpipe</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span>
</span><span id="L-689"><a href="#L-689"><span class="linenos">689</span></a>        <span class="n">dt</span> <span class="o">=</span> <span class="n">timer</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span>
</span><span id="L-690"><a href="#L-690"><span class="linenos">690</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">readyToRun</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-691"><a href="#L-691"><span class="linenos">691</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">endCompute</span><span class="p">()</span>
</span><span id="L-692"><a href="#L-692"><span class="linenos">692</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-693"><a href="#L-693"><span class="linenos">693</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span></pre></div>


            </section>
                <section id="RequestCompute">
                            <input id="RequestCompute-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">RequestCompute</span>:

                <label class="view-source-button" for="RequestCompute-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RequestCompute"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RequestCompute-63"><a href="#RequestCompute-63"><span class="linenos"> 63</span></a><span class="k">class</span><span class="w"> </span><span class="nc">RequestCompute</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
</span><span id="RequestCompute-64"><a href="#RequestCompute-64"><span class="linenos"> 64</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="RequestCompute-65"><a href="#RequestCompute-65"><span class="linenos"> 65</span></a><span class="sd">    Real-time HDR processing coordinator for interactive image editing.</span>
</span><span id="RequestCompute-66"><a href="#RequestCompute-66"><span class="linenos"> 66</span></a><span class="sd">    </span>
</span><span id="RequestCompute-67"><a href="#RequestCompute-67"><span class="linenos"> 67</span></a><span class="sd">    Manages parallel computation of ProcessPipe operations during interactive</span>
</span><span id="RequestCompute-68"><a href="#RequestCompute-68"><span class="linenos"> 68</span></a><span class="sd">    editing, ensuring responsive UI while maintaining processing order. Uses</span>
</span><span id="RequestCompute-69"><a href="#RequestCompute-69"><span class="linenos"> 69</span></a><span class="sd">    a single dedicated thread to compute process-pipes, storing compute requests</span>
</span><span id="RequestCompute-70"><a href="#RequestCompute-70"><span class="linenos"> 70</span></a><span class="sd">    when user changes editing values and restarting computation when previous</span>
</span><span id="RequestCompute-71"><a href="#RequestCompute-71"><span class="linenos"> 71</span></a><span class="sd">    processing finishes.</span>
</span><span id="RequestCompute-72"><a href="#RequestCompute-72"><span class="linenos"> 72</span></a><span class="sd">    </span>
</span><span id="RequestCompute-73"><a href="#RequestCompute-73"><span class="linenos"> 73</span></a><span class="sd">    Key Features:</span>
</span><span id="RequestCompute-74"><a href="#RequestCompute-74"><span class="linenos"> 74</span></a><span class="sd">    - Single-threaded sequential processing to avoid resource conflicts</span>
</span><span id="RequestCompute-75"><a href="#RequestCompute-75"><span class="linenos"> 75</span></a><span class="sd">    - Request queuing for parameter changes during processing</span>
</span><span id="RequestCompute-76"><a href="#RequestCompute-76"><span class="linenos"> 76</span></a><span class="sd">    - Automatic restart for pending updates</span>
</span><span id="RequestCompute-77"><a href="#RequestCompute-77"><span class="linenos"> 77</span></a><span class="sd">    - Parent callback for result delivery</span>
</span><span id="RequestCompute-78"><a href="#RequestCompute-78"><span class="linenos"> 78</span></a><span class="sd">    </span>
</span><span id="RequestCompute-79"><a href="#RequestCompute-79"><span class="linenos"> 79</span></a><span class="sd">    Attributes:</span>
</span><span id="RequestCompute-80"><a href="#RequestCompute-80"><span class="linenos"> 80</span></a><span class="sd">        parent (EditImageModel): Parent model for result callbacks</span>
</span><span id="RequestCompute-81"><a href="#RequestCompute-81"><span class="linenos"> 81</span></a><span class="sd">        requestDict (dict): Stores pending parameter updates {processNodeId: params}</span>
</span><span id="RequestCompute-82"><a href="#RequestCompute-82"><span class="linenos"> 82</span></a><span class="sd">        pool (QThreadPool): Qt thread pool for worker management</span>
</span><span id="RequestCompute-83"><a href="#RequestCompute-83"><span class="linenos"> 83</span></a><span class="sd">        processpipe (ProcessPipe): Active processing pipeline reference</span>
</span><span id="RequestCompute-84"><a href="#RequestCompute-84"><span class="linenos"> 84</span></a><span class="sd">        readyToRun (bool): Processing availability flag</span>
</span><span id="RequestCompute-85"><a href="#RequestCompute-85"><span class="linenos"> 85</span></a><span class="sd">        waitingUpdate (bool): Pending update flag during processing</span>
</span><span id="RequestCompute-86"><a href="#RequestCompute-86"><span class="linenos"> 86</span></a><span class="sd">    </span>
</span><span id="RequestCompute-87"><a href="#RequestCompute-87"><span class="linenos"> 87</span></a><span class="sd">    Methods:</span>
</span><span id="RequestCompute-88"><a href="#RequestCompute-88"><span class="linenos"> 88</span></a><span class="sd">        setProcessPipe: Set active processing pipeline</span>
</span><span id="RequestCompute-89"><a href="#RequestCompute-89"><span class="linenos"> 89</span></a><span class="sd">        requestCompute: Queue parameter update and trigger processing</span>
</span><span id="RequestCompute-90"><a href="#RequestCompute-90"><span class="linenos"> 90</span></a><span class="sd">        endCompute: Handle processing completion and manage restart</span>
</span><span id="RequestCompute-91"><a href="#RequestCompute-91"><span class="linenos"> 91</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="RequestCompute-92"><a href="#RequestCompute-92"><span class="linenos"> 92</span></a>
</span><span id="RequestCompute-93"><a href="#RequestCompute-93"><span class="linenos"> 93</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
</span><span id="RequestCompute-94"><a href="#RequestCompute-94"><span class="linenos"> 94</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="RequestCompute-95"><a href="#RequestCompute-95"><span class="linenos"> 95</span></a><span class="sd">        Initialize request compute coordinator.</span>
</span><span id="RequestCompute-96"><a href="#RequestCompute-96"><span class="linenos"> 96</span></a><span class="sd">        </span>
</span><span id="RequestCompute-97"><a href="#RequestCompute-97"><span class="linenos"> 97</span></a><span class="sd">        Args:</span>
</span><span id="RequestCompute-98"><a href="#RequestCompute-98"><span class="linenos"> 98</span></a><span class="sd">            parent (EditImageModel): Parent model for result delivery</span>
</span><span id="RequestCompute-99"><a href="#RequestCompute-99"><span class="linenos"> 99</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RequestCompute-100"><a href="#RequestCompute-100"><span class="linenos">100</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
</span><span id="RequestCompute-101"><a href="#RequestCompute-101"><span class="linenos">101</span></a>
</span><span id="RequestCompute-102"><a href="#RequestCompute-102"><span class="linenos">102</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">requestDict</span><span class="o">=</span> <span class="p">{}</span> <span class="c1"># store resqustCompute key:processNodeId, value: processNode params</span>
</span><span id="RequestCompute-103"><a href="#RequestCompute-103"><span class="linenos">103</span></a>
</span><span id="RequestCompute-104"><a href="#RequestCompute-104"><span class="linenos">104</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pool</span> <span class="o">=</span> <span class="n">QThreadPool</span><span class="o">.</span><span class="n">globalInstance</span><span class="p">()</span>        <span class="c1"># get global pool</span>
</span><span id="RequestCompute-105"><a href="#RequestCompute-105"><span class="linenos">105</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">processpipe</span> <span class="o">=</span> <span class="kc">None</span>                         <span class="c1"># processpipe ref</span>
</span><span id="RequestCompute-106"><a href="#RequestCompute-106"><span class="linenos">106</span></a>
</span><span id="RequestCompute-107"><a href="#RequestCompute-107"><span class="linenos">107</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">readyToRun</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="RequestCompute-108"><a href="#RequestCompute-108"><span class="linenos">108</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">waitingUpdate</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="RequestCompute-109"><a href="#RequestCompute-109"><span class="linenos">109</span></a>
</span><span id="RequestCompute-110"><a href="#RequestCompute-110"><span class="linenos">110</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setProcessPipe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">pp</span><span class="p">):</span>
</span><span id="RequestCompute-111"><a href="#RequestCompute-111"><span class="linenos">111</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="RequestCompute-112"><a href="#RequestCompute-112"><span class="linenos">112</span></a><span class="sd">        Set the current active processing pipeline.</span>
</span><span id="RequestCompute-113"><a href="#RequestCompute-113"><span class="linenos">113</span></a>
</span><span id="RequestCompute-114"><a href="#RequestCompute-114"><span class="linenos">114</span></a><span class="sd">        Args:</span>
</span><span id="RequestCompute-115"><a href="#RequestCompute-115"><span class="linenos">115</span></a><span class="sd">            pp (ProcessPipe, Required): Processing pipeline to manage</span>
</span><span id="RequestCompute-116"><a href="#RequestCompute-116"><span class="linenos">116</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RequestCompute-117"><a href="#RequestCompute-117"><span class="linenos">117</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">processpipe</span> <span class="o">=</span> <span class="n">pp</span>
</span><span id="RequestCompute-118"><a href="#RequestCompute-118"><span class="linenos">118</span></a>    
</span><span id="RequestCompute-119"><a href="#RequestCompute-119"><span class="linenos">119</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">requestCompute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="n">params</span><span class="p">):</span>
</span><span id="RequestCompute-120"><a href="#RequestCompute-120"><span class="linenos">120</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="RequestCompute-121"><a href="#RequestCompute-121"><span class="linenos">121</span></a><span class="sd">        Queue parameter update and request processing pipeline computation.</span>
</span><span id="RequestCompute-122"><a href="#RequestCompute-122"><span class="linenos">122</span></a><span class="sd">        </span>
</span><span id="RequestCompute-123"><a href="#RequestCompute-123"><span class="linenos">123</span></a><span class="sd">        Stores new parameters for a process-node and triggers pipeline</span>
</span><span id="RequestCompute-124"><a href="#RequestCompute-124"><span class="linenos">124</span></a><span class="sd">        computation. If processing is already running, marks for restart</span>
</span><span id="RequestCompute-125"><a href="#RequestCompute-125"><span class="linenos">125</span></a><span class="sd">        when current computation completes.</span>
</span><span id="RequestCompute-126"><a href="#RequestCompute-126"><span class="linenos">126</span></a>
</span><span id="RequestCompute-127"><a href="#RequestCompute-127"><span class="linenos">127</span></a><span class="sd">        Args:</span>
</span><span id="RequestCompute-128"><a href="#RequestCompute-128"><span class="linenos">128</span></a><span class="sd">            id (int, Required): Index of process-node in processing pipeline</span>
</span><span id="RequestCompute-129"><a href="#RequestCompute-129"><span class="linenos">129</span></a><span class="sd">            params (dict, Required): Updated parameters for process-node</span>
</span><span id="RequestCompute-130"><a href="#RequestCompute-130"><span class="linenos">130</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RequestCompute-131"><a href="#RequestCompute-131"><span class="linenos">131</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">requestDict</span><span class="p">[</span><span class="nb">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
</span><span id="RequestCompute-132"><a href="#RequestCompute-132"><span class="linenos">132</span></a>
</span><span id="RequestCompute-133"><a href="#RequestCompute-133"><span class="linenos">133</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">readyToRun</span><span class="p">:</span>
</span><span id="RequestCompute-134"><a href="#RequestCompute-134"><span class="linenos">134</span></a>            <span class="c1"># start processing processpipe</span>
</span><span id="RequestCompute-135"><a href="#RequestCompute-135"><span class="linenos">135</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">pool</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">RunCompute</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
</span><span id="RequestCompute-136"><a href="#RequestCompute-136"><span class="linenos">136</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="RequestCompute-137"><a href="#RequestCompute-137"><span class="linenos">137</span></a>            <span class="c1"># if a computation is already running</span>
</span><span id="RequestCompute-138"><a href="#RequestCompute-138"><span class="linenos">138</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">waitingUpdate</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="RequestCompute-139"><a href="#RequestCompute-139"><span class="linenos">139</span></a>
</span><span id="RequestCompute-140"><a href="#RequestCompute-140"><span class="linenos">140</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">endCompute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="RequestCompute-141"><a href="#RequestCompute-141"><span class="linenos">141</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="RequestCompute-142"><a href="#RequestCompute-142"><span class="linenos">142</span></a><span class="sd">        Handle processing completion and manage restart.</span>
</span><span id="RequestCompute-143"><a href="#RequestCompute-143"><span class="linenos">143</span></a><span class="sd">        </span>
</span><span id="RequestCompute-144"><a href="#RequestCompute-144"><span class="linenos">144</span></a><span class="sd">        Called when process-node computation finishes. Retrieves processed</span>
</span><span id="RequestCompute-145"><a href="#RequestCompute-145"><span class="linenos">145</span></a><span class="sd">        image, sends it to parent model, and restarts computation if there</span>
</span><span id="RequestCompute-146"><a href="#RequestCompute-146"><span class="linenos">146</span></a><span class="sd">        are pending parameter updates.</span>
</span><span id="RequestCompute-147"><a href="#RequestCompute-147"><span class="linenos">147</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RequestCompute-148"><a href="#RequestCompute-148"><span class="linenos">148</span></a>        <span class="n">imgTM</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">processpipe</span><span class="o">.</span><span class="n">getImage</span><span class="p">(</span><span class="n">toneMap</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="RequestCompute-149"><a href="#RequestCompute-149"><span class="linenos">149</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">updateImage</span><span class="p">(</span><span class="n">imgTM</span><span class="p">)</span>
</span><span id="RequestCompute-150"><a href="#RequestCompute-150"><span class="linenos">150</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">waitingUpdate</span><span class="p">:</span>
</span><span id="RequestCompute-151"><a href="#RequestCompute-151"><span class="linenos">151</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">pool</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">RunCompute</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
</span><span id="RequestCompute-152"><a href="#RequestCompute-152"><span class="linenos">152</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">waitingUpdate</span> <span class="o">=</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Real-time HDR processing coordinator for interactive image editing.</p>

<p>Manages parallel computation of ProcessPipe operations during interactive
editing, ensuring responsive UI while maintaining processing order. Uses
a single dedicated thread to compute process-pipes, storing compute requests
when user changes editing values and restarting computation when previous
processing finishes.</p>

<p>Key Features:</p>

<ul>
<li>Single-threaded sequential processing to avoid resource conflicts</li>
<li>Request queuing for parameter changes during processing</li>
<li>Automatic restart for pending updates</li>
<li>Parent callback for result delivery</li>
</ul>

<p>Attributes:
    parent (EditImageModel): Parent model for result callbacks
    requestDict (dict): Stores pending parameter updates {processNodeId: params}
    pool (QThreadPool): Qt thread pool for worker management
    processpipe (ProcessPipe): Active processing pipeline reference
    readyToRun (bool): Processing availability flag
    waitingUpdate (bool): Pending update flag during processing</p>

<p>Methods:
    setProcessPipe: Set active processing pipeline
    requestCompute: Queue parameter update and trigger processing
    endCompute: Handle processing completion and manage restart</p>
</div>


                            <div id="RequestCompute.__init__" class="classattr">
                                        <input id="RequestCompute.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">RequestCompute</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">parent</span></span>)</span>

                <label class="view-source-button" for="RequestCompute.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RequestCompute.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RequestCompute.__init__-93"><a href="#RequestCompute.__init__-93"><span class="linenos"> 93</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
</span><span id="RequestCompute.__init__-94"><a href="#RequestCompute.__init__-94"><span class="linenos"> 94</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="RequestCompute.__init__-95"><a href="#RequestCompute.__init__-95"><span class="linenos"> 95</span></a><span class="sd">        Initialize request compute coordinator.</span>
</span><span id="RequestCompute.__init__-96"><a href="#RequestCompute.__init__-96"><span class="linenos"> 96</span></a><span class="sd">        </span>
</span><span id="RequestCompute.__init__-97"><a href="#RequestCompute.__init__-97"><span class="linenos"> 97</span></a><span class="sd">        Args:</span>
</span><span id="RequestCompute.__init__-98"><a href="#RequestCompute.__init__-98"><span class="linenos"> 98</span></a><span class="sd">            parent (EditImageModel): Parent model for result delivery</span>
</span><span id="RequestCompute.__init__-99"><a href="#RequestCompute.__init__-99"><span class="linenos"> 99</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RequestCompute.__init__-100"><a href="#RequestCompute.__init__-100"><span class="linenos">100</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
</span><span id="RequestCompute.__init__-101"><a href="#RequestCompute.__init__-101"><span class="linenos">101</span></a>
</span><span id="RequestCompute.__init__-102"><a href="#RequestCompute.__init__-102"><span class="linenos">102</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">requestDict</span><span class="o">=</span> <span class="p">{}</span> <span class="c1"># store resqustCompute key:processNodeId, value: processNode params</span>
</span><span id="RequestCompute.__init__-103"><a href="#RequestCompute.__init__-103"><span class="linenos">103</span></a>
</span><span id="RequestCompute.__init__-104"><a href="#RequestCompute.__init__-104"><span class="linenos">104</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pool</span> <span class="o">=</span> <span class="n">QThreadPool</span><span class="o">.</span><span class="n">globalInstance</span><span class="p">()</span>        <span class="c1"># get global pool</span>
</span><span id="RequestCompute.__init__-105"><a href="#RequestCompute.__init__-105"><span class="linenos">105</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">processpipe</span> <span class="o">=</span> <span class="kc">None</span>                         <span class="c1"># processpipe ref</span>
</span><span id="RequestCompute.__init__-106"><a href="#RequestCompute.__init__-106"><span class="linenos">106</span></a>
</span><span id="RequestCompute.__init__-107"><a href="#RequestCompute.__init__-107"><span class="linenos">107</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">readyToRun</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="RequestCompute.__init__-108"><a href="#RequestCompute.__init__-108"><span class="linenos">108</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">waitingUpdate</span> <span class="o">=</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Initialize request compute coordinator.</p>

<p>Args:
    parent (EditImageModel): Parent model for result delivery</p>
</div>


                            </div>
                            <div id="RequestCompute.parent" class="classattr">
                                <div class="attr variable">
            <span class="name">parent</span>

        
    </div>
    <a class="headerlink" href="#RequestCompute.parent"></a>
    
    

                            </div>
                            <div id="RequestCompute.requestDict" class="classattr">
                                <div class="attr variable">
            <span class="name">requestDict</span>

        
    </div>
    <a class="headerlink" href="#RequestCompute.requestDict"></a>
    
    

                            </div>
                            <div id="RequestCompute.pool" class="classattr">
                                <div class="attr variable">
            <span class="name">pool</span>

        
    </div>
    <a class="headerlink" href="#RequestCompute.pool"></a>
    
    

                            </div>
                            <div id="RequestCompute.processpipe" class="classattr">
                                <div class="attr variable">
            <span class="name">processpipe</span>

        
    </div>
    <a class="headerlink" href="#RequestCompute.processpipe"></a>
    
    

                            </div>
                            <div id="RequestCompute.readyToRun" class="classattr">
                                <div class="attr variable">
            <span class="name">readyToRun</span>

        
    </div>
    <a class="headerlink" href="#RequestCompute.readyToRun"></a>
    
    

                            </div>
                            <div id="RequestCompute.waitingUpdate" class="classattr">
                                <div class="attr variable">
            <span class="name">waitingUpdate</span>

        
    </div>
    <a class="headerlink" href="#RequestCompute.waitingUpdate"></a>
    
    

                            </div>
                            <div id="RequestCompute.setProcessPipe" class="classattr">
                                        <input id="RequestCompute.setProcessPipe-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">setProcessPipe</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">pp</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="RequestCompute.setProcessPipe-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RequestCompute.setProcessPipe"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RequestCompute.setProcessPipe-110"><a href="#RequestCompute.setProcessPipe-110"><span class="linenos">110</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setProcessPipe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">pp</span><span class="p">):</span>
</span><span id="RequestCompute.setProcessPipe-111"><a href="#RequestCompute.setProcessPipe-111"><span class="linenos">111</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="RequestCompute.setProcessPipe-112"><a href="#RequestCompute.setProcessPipe-112"><span class="linenos">112</span></a><span class="sd">        Set the current active processing pipeline.</span>
</span><span id="RequestCompute.setProcessPipe-113"><a href="#RequestCompute.setProcessPipe-113"><span class="linenos">113</span></a>
</span><span id="RequestCompute.setProcessPipe-114"><a href="#RequestCompute.setProcessPipe-114"><span class="linenos">114</span></a><span class="sd">        Args:</span>
</span><span id="RequestCompute.setProcessPipe-115"><a href="#RequestCompute.setProcessPipe-115"><span class="linenos">115</span></a><span class="sd">            pp (ProcessPipe, Required): Processing pipeline to manage</span>
</span><span id="RequestCompute.setProcessPipe-116"><a href="#RequestCompute.setProcessPipe-116"><span class="linenos">116</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RequestCompute.setProcessPipe-117"><a href="#RequestCompute.setProcessPipe-117"><span class="linenos">117</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">processpipe</span> <span class="o">=</span> <span class="n">pp</span>
</span></pre></div>


            <div class="docstring"><p>Set the current active processing pipeline.</p>

<p>Args:
    pp (ProcessPipe, Required): Processing pipeline to manage</p>
</div>


                            </div>
                            <div id="RequestCompute.requestCompute" class="classattr">
                                        <input id="RequestCompute.requestCompute-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">requestCompute</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="nb">id</span>, </span><span class="param"><span class="n">params</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="RequestCompute.requestCompute-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RequestCompute.requestCompute"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RequestCompute.requestCompute-119"><a href="#RequestCompute.requestCompute-119"><span class="linenos">119</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">requestCompute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="n">params</span><span class="p">):</span>
</span><span id="RequestCompute.requestCompute-120"><a href="#RequestCompute.requestCompute-120"><span class="linenos">120</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="RequestCompute.requestCompute-121"><a href="#RequestCompute.requestCompute-121"><span class="linenos">121</span></a><span class="sd">        Queue parameter update and request processing pipeline computation.</span>
</span><span id="RequestCompute.requestCompute-122"><a href="#RequestCompute.requestCompute-122"><span class="linenos">122</span></a><span class="sd">        </span>
</span><span id="RequestCompute.requestCompute-123"><a href="#RequestCompute.requestCompute-123"><span class="linenos">123</span></a><span class="sd">        Stores new parameters for a process-node and triggers pipeline</span>
</span><span id="RequestCompute.requestCompute-124"><a href="#RequestCompute.requestCompute-124"><span class="linenos">124</span></a><span class="sd">        computation. If processing is already running, marks for restart</span>
</span><span id="RequestCompute.requestCompute-125"><a href="#RequestCompute.requestCompute-125"><span class="linenos">125</span></a><span class="sd">        when current computation completes.</span>
</span><span id="RequestCompute.requestCompute-126"><a href="#RequestCompute.requestCompute-126"><span class="linenos">126</span></a>
</span><span id="RequestCompute.requestCompute-127"><a href="#RequestCompute.requestCompute-127"><span class="linenos">127</span></a><span class="sd">        Args:</span>
</span><span id="RequestCompute.requestCompute-128"><a href="#RequestCompute.requestCompute-128"><span class="linenos">128</span></a><span class="sd">            id (int, Required): Index of process-node in processing pipeline</span>
</span><span id="RequestCompute.requestCompute-129"><a href="#RequestCompute.requestCompute-129"><span class="linenos">129</span></a><span class="sd">            params (dict, Required): Updated parameters for process-node</span>
</span><span id="RequestCompute.requestCompute-130"><a href="#RequestCompute.requestCompute-130"><span class="linenos">130</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RequestCompute.requestCompute-131"><a href="#RequestCompute.requestCompute-131"><span class="linenos">131</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">requestDict</span><span class="p">[</span><span class="nb">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
</span><span id="RequestCompute.requestCompute-132"><a href="#RequestCompute.requestCompute-132"><span class="linenos">132</span></a>
</span><span id="RequestCompute.requestCompute-133"><a href="#RequestCompute.requestCompute-133"><span class="linenos">133</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">readyToRun</span><span class="p">:</span>
</span><span id="RequestCompute.requestCompute-134"><a href="#RequestCompute.requestCompute-134"><span class="linenos">134</span></a>            <span class="c1"># start processing processpipe</span>
</span><span id="RequestCompute.requestCompute-135"><a href="#RequestCompute.requestCompute-135"><span class="linenos">135</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">pool</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">RunCompute</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
</span><span id="RequestCompute.requestCompute-136"><a href="#RequestCompute.requestCompute-136"><span class="linenos">136</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="RequestCompute.requestCompute-137"><a href="#RequestCompute.requestCompute-137"><span class="linenos">137</span></a>            <span class="c1"># if a computation is already running</span>
</span><span id="RequestCompute.requestCompute-138"><a href="#RequestCompute.requestCompute-138"><span class="linenos">138</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">waitingUpdate</span> <span class="o">=</span> <span class="kc">True</span>
</span></pre></div>


            <div class="docstring"><p>Queue parameter update and request processing pipeline computation.</p>

<p>Stores new parameters for a process-node and triggers pipeline
computation. If processing is already running, marks for restart
when current computation completes.</p>

<p>Args:
    id (int, Required): Index of process-node in processing pipeline
    params (dict, Required): Updated parameters for process-node</p>
</div>


                            </div>
                            <div id="RequestCompute.endCompute" class="classattr">
                                        <input id="RequestCompute.endCompute-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">endCompute</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="RequestCompute.endCompute-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RequestCompute.endCompute"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RequestCompute.endCompute-140"><a href="#RequestCompute.endCompute-140"><span class="linenos">140</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">endCompute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="RequestCompute.endCompute-141"><a href="#RequestCompute.endCompute-141"><span class="linenos">141</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="RequestCompute.endCompute-142"><a href="#RequestCompute.endCompute-142"><span class="linenos">142</span></a><span class="sd">        Handle processing completion and manage restart.</span>
</span><span id="RequestCompute.endCompute-143"><a href="#RequestCompute.endCompute-143"><span class="linenos">143</span></a><span class="sd">        </span>
</span><span id="RequestCompute.endCompute-144"><a href="#RequestCompute.endCompute-144"><span class="linenos">144</span></a><span class="sd">        Called when process-node computation finishes. Retrieves processed</span>
</span><span id="RequestCompute.endCompute-145"><a href="#RequestCompute.endCompute-145"><span class="linenos">145</span></a><span class="sd">        image, sends it to parent model, and restarts computation if there</span>
</span><span id="RequestCompute.endCompute-146"><a href="#RequestCompute.endCompute-146"><span class="linenos">146</span></a><span class="sd">        are pending parameter updates.</span>
</span><span id="RequestCompute.endCompute-147"><a href="#RequestCompute.endCompute-147"><span class="linenos">147</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RequestCompute.endCompute-148"><a href="#RequestCompute.endCompute-148"><span class="linenos">148</span></a>        <span class="n">imgTM</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">processpipe</span><span class="o">.</span><span class="n">getImage</span><span class="p">(</span><span class="n">toneMap</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="RequestCompute.endCompute-149"><a href="#RequestCompute.endCompute-149"><span class="linenos">149</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">updateImage</span><span class="p">(</span><span class="n">imgTM</span><span class="p">)</span>
</span><span id="RequestCompute.endCompute-150"><a href="#RequestCompute.endCompute-150"><span class="linenos">150</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">waitingUpdate</span><span class="p">:</span>
</span><span id="RequestCompute.endCompute-151"><a href="#RequestCompute.endCompute-151"><span class="linenos">151</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">pool</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">RunCompute</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
</span><span id="RequestCompute.endCompute-152"><a href="#RequestCompute.endCompute-152"><span class="linenos">152</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">waitingUpdate</span> <span class="o">=</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Handle processing completion and manage restart.</p>

<p>Called when process-node computation finishes. Retrieves processed
image, sends it to parent model, and restarts computation if there
are pending parameter updates.</p>
</div>


                            </div>
                </section>
                <section id="RunCompute">
                            <input id="RunCompute-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">RunCompute</span><wbr>(<span class="base">PyQt5.QtCore.QRunnable</span>):

                <label class="view-source-button" for="RunCompute-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RunCompute"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RunCompute-156"><a href="#RunCompute-156"><span class="linenos">156</span></a><span class="k">class</span><span class="w"> </span><span class="nc">RunCompute</span><span class="p">(</span><span class="n">QRunnable</span><span class="p">):</span>
</span><span id="RunCompute-157"><a href="#RunCompute-157"><span class="linenos">157</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="RunCompute-158"><a href="#RunCompute-158"><span class="linenos">158</span></a><span class="sd">    Worker thread for HDR processing pipeline execution.</span>
</span><span id="RunCompute-159"><a href="#RunCompute-159"><span class="linenos">159</span></a><span class="sd">    </span>
</span><span id="RunCompute-160"><a href="#RunCompute-160"><span class="linenos">160</span></a><span class="sd">    Executes ProcessPipe computation on a dedicated thread, supporting both</span>
</span><span id="RunCompute-161"><a href="#RunCompute-161"><span class="linenos">161</span></a><span class="sd">    Python and C++ acceleration modes. Handles parameter updates and manages</span>
</span><span id="RunCompute-162"><a href="#RunCompute-162"><span class="linenos">162</span></a><span class="sd">    processing completion callbacks.</span>
</span><span id="RunCompute-163"><a href="#RunCompute-163"><span class="linenos">163</span></a><span class="sd">    </span>
</span><span id="RunCompute-164"><a href="#RunCompute-164"><span class="linenos">164</span></a><span class="sd">    Attributes:</span>
</span><span id="RunCompute-165"><a href="#RunCompute-165"><span class="linenos">165</span></a><span class="sd">        parent (RequestCompute): Parent coordinator for completion callback</span>
</span><span id="RunCompute-166"><a href="#RunCompute-166"><span class="linenos">166</span></a><span class="sd">    </span>
</span><span id="RunCompute-167"><a href="#RunCompute-167"><span class="linenos">167</span></a><span class="sd">    Methods:</span>
</span><span id="RunCompute-168"><a href="#RunCompute-168"><span class="linenos">168</span></a><span class="sd">        run: Main thread execution method with processing logic</span>
</span><span id="RunCompute-169"><a href="#RunCompute-169"><span class="linenos">169</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="RunCompute-170"><a href="#RunCompute-170"><span class="linenos">170</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">parent</span><span class="p">):</span>
</span><span id="RunCompute-171"><a href="#RunCompute-171"><span class="linenos">171</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="RunCompute-172"><a href="#RunCompute-172"><span class="linenos">172</span></a><span class="sd">        Initialize compute worker thread.</span>
</span><span id="RunCompute-173"><a href="#RunCompute-173"><span class="linenos">173</span></a><span class="sd">        </span>
</span><span id="RunCompute-174"><a href="#RunCompute-174"><span class="linenos">174</span></a><span class="sd">        Args:</span>
</span><span id="RunCompute-175"><a href="#RunCompute-175"><span class="linenos">175</span></a><span class="sd">            parent (RequestCompute): Parent coordinator instance</span>
</span><span id="RunCompute-176"><a href="#RunCompute-176"><span class="linenos">176</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RunCompute-177"><a href="#RunCompute-177"><span class="linenos">177</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="RunCompute-178"><a href="#RunCompute-178"><span class="linenos">178</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
</span><span id="RunCompute-179"><a href="#RunCompute-179"><span class="linenos">179</span></a>
</span><span id="RunCompute-180"><a href="#RunCompute-180"><span class="linenos">180</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="RunCompute-181"><a href="#RunCompute-181"><span class="linenos">181</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="RunCompute-182"><a href="#RunCompute-182"><span class="linenos">182</span></a><span class="sd">        Main thread execution method.</span>
</span><span id="RunCompute-183"><a href="#RunCompute-183"><span class="linenos">183</span></a><span class="sd">        </span>
</span><span id="RunCompute-184"><a href="#RunCompute-184"><span class="linenos">184</span></a><span class="sd">        Executes ProcessPipe computation using either C++ acceleration</span>
</span><span id="RunCompute-185"><a href="#RunCompute-185"><span class="linenos">185</span></a><span class="sd">        or Python processing. Updates pipeline parameters, performs</span>
</span><span id="RunCompute-186"><a href="#RunCompute-186"><span class="linenos">186</span></a><span class="sd">        computation, and triggers completion callback.</span>
</span><span id="RunCompute-187"><a href="#RunCompute-187"><span class="linenos">187</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RunCompute-188"><a href="#RunCompute-188"><span class="linenos">188</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">readyToRun</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="RunCompute-189"><a href="#RunCompute-189"><span class="linenos">189</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">requestDict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">processpipe</span><span class="o">.</span><span class="n">setParameters</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">requestDict</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>
</span><span id="RunCompute-190"><a href="#RunCompute-190"><span class="linenos">190</span></a>        <span class="n">cpp</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="RunCompute-191"><a href="#RunCompute-191"><span class="linenos">191</span></a>        <span class="k">if</span> <span class="n">cpp</span><span class="p">:</span>
</span><span id="RunCompute-192"><a href="#RunCompute-192"><span class="linenos">192</span></a>            <span class="n">img</span>  <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">processpipe</span><span class="o">.</span><span class="n">getInputImage</span><span class="p">())</span>
</span><span id="RunCompute-193"><a href="#RunCompute-193"><span class="linenos">193</span></a>            <span class="n">imgRes</span> <span class="o">=</span> <span class="n">hdrCore</span><span class="o">.</span><span class="n">coreC</span><span class="o">.</span><span class="n">coreCcompute</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">processpipe</span><span class="p">)</span>
</span><span id="RunCompute-194"><a href="#RunCompute-194"><span class="linenos">194</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">processpipe</span><span class="o">.</span><span class="n">setOutput</span><span class="p">(</span><span class="n">imgRes</span><span class="p">)</span>
</span><span id="RunCompute-195"><a href="#RunCompute-195"><span class="linenos">195</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">readyToRun</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="RunCompute-196"><a href="#RunCompute-196"><span class="linenos">196</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">endCompute</span><span class="p">()</span>
</span><span id="RunCompute-197"><a href="#RunCompute-197"><span class="linenos">197</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="RunCompute-198"><a href="#RunCompute-198"><span class="linenos">198</span></a>            <span class="n">start</span> <span class="o">=</span> <span class="n">timer</span><span class="p">()</span>
</span><span id="RunCompute-199"><a href="#RunCompute-199"><span class="linenos">199</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">processpipe</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span>
</span><span id="RunCompute-200"><a href="#RunCompute-200"><span class="linenos">200</span></a>            <span class="n">dt</span> <span class="o">=</span> <span class="n">timer</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span>
</span><span id="RunCompute-201"><a href="#RunCompute-201"><span class="linenos">201</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">readyToRun</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="RunCompute-202"><a href="#RunCompute-202"><span class="linenos">202</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">endCompute</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Worker thread for HDR processing pipeline execution.</p>

<p>Executes ProcessPipe computation on a dedicated thread, supporting both
Python and C++ acceleration modes. Handles parameter updates and manages
processing completion callbacks.</p>

<p>Attributes:
    parent (RequestCompute): Parent coordinator for completion callback</p>

<p>Methods:
    run: Main thread execution method with processing logic</p>
</div>


                            <div id="RunCompute.__init__" class="classattr">
                                        <input id="RunCompute.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">RunCompute</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">parent</span></span>)</span>

                <label class="view-source-button" for="RunCompute.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RunCompute.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RunCompute.__init__-170"><a href="#RunCompute.__init__-170"><span class="linenos">170</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">parent</span><span class="p">):</span>
</span><span id="RunCompute.__init__-171"><a href="#RunCompute.__init__-171"><span class="linenos">171</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="RunCompute.__init__-172"><a href="#RunCompute.__init__-172"><span class="linenos">172</span></a><span class="sd">        Initialize compute worker thread.</span>
</span><span id="RunCompute.__init__-173"><a href="#RunCompute.__init__-173"><span class="linenos">173</span></a><span class="sd">        </span>
</span><span id="RunCompute.__init__-174"><a href="#RunCompute.__init__-174"><span class="linenos">174</span></a><span class="sd">        Args:</span>
</span><span id="RunCompute.__init__-175"><a href="#RunCompute.__init__-175"><span class="linenos">175</span></a><span class="sd">            parent (RequestCompute): Parent coordinator instance</span>
</span><span id="RunCompute.__init__-176"><a href="#RunCompute.__init__-176"><span class="linenos">176</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RunCompute.__init__-177"><a href="#RunCompute.__init__-177"><span class="linenos">177</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="RunCompute.__init__-178"><a href="#RunCompute.__init__-178"><span class="linenos">178</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
</span></pre></div>


            <div class="docstring"><p>Initialize compute worker thread.</p>

<p>Args:
    parent (RequestCompute): Parent coordinator instance</p>
</div>


                            </div>
                            <div id="RunCompute.parent" class="classattr">
                                <div class="attr variable">
            <span class="name">parent</span>

        
    </div>
    <a class="headerlink" href="#RunCompute.parent"></a>
    
    

                            </div>
                            <div id="RunCompute.run" class="classattr">
                                        <input id="RunCompute.run-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">run</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="RunCompute.run-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RunCompute.run"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RunCompute.run-180"><a href="#RunCompute.run-180"><span class="linenos">180</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="RunCompute.run-181"><a href="#RunCompute.run-181"><span class="linenos">181</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="RunCompute.run-182"><a href="#RunCompute.run-182"><span class="linenos">182</span></a><span class="sd">        Main thread execution method.</span>
</span><span id="RunCompute.run-183"><a href="#RunCompute.run-183"><span class="linenos">183</span></a><span class="sd">        </span>
</span><span id="RunCompute.run-184"><a href="#RunCompute.run-184"><span class="linenos">184</span></a><span class="sd">        Executes ProcessPipe computation using either C++ acceleration</span>
</span><span id="RunCompute.run-185"><a href="#RunCompute.run-185"><span class="linenos">185</span></a><span class="sd">        or Python processing. Updates pipeline parameters, performs</span>
</span><span id="RunCompute.run-186"><a href="#RunCompute.run-186"><span class="linenos">186</span></a><span class="sd">        computation, and triggers completion callback.</span>
</span><span id="RunCompute.run-187"><a href="#RunCompute.run-187"><span class="linenos">187</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RunCompute.run-188"><a href="#RunCompute.run-188"><span class="linenos">188</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">readyToRun</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="RunCompute.run-189"><a href="#RunCompute.run-189"><span class="linenos">189</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">requestDict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">processpipe</span><span class="o">.</span><span class="n">setParameters</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">requestDict</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>
</span><span id="RunCompute.run-190"><a href="#RunCompute.run-190"><span class="linenos">190</span></a>        <span class="n">cpp</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="RunCompute.run-191"><a href="#RunCompute.run-191"><span class="linenos">191</span></a>        <span class="k">if</span> <span class="n">cpp</span><span class="p">:</span>
</span><span id="RunCompute.run-192"><a href="#RunCompute.run-192"><span class="linenos">192</span></a>            <span class="n">img</span>  <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">processpipe</span><span class="o">.</span><span class="n">getInputImage</span><span class="p">())</span>
</span><span id="RunCompute.run-193"><a href="#RunCompute.run-193"><span class="linenos">193</span></a>            <span class="n">imgRes</span> <span class="o">=</span> <span class="n">hdrCore</span><span class="o">.</span><span class="n">coreC</span><span class="o">.</span><span class="n">coreCcompute</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">processpipe</span><span class="p">)</span>
</span><span id="RunCompute.run-194"><a href="#RunCompute.run-194"><span class="linenos">194</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">processpipe</span><span class="o">.</span><span class="n">setOutput</span><span class="p">(</span><span class="n">imgRes</span><span class="p">)</span>
</span><span id="RunCompute.run-195"><a href="#RunCompute.run-195"><span class="linenos">195</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">readyToRun</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="RunCompute.run-196"><a href="#RunCompute.run-196"><span class="linenos">196</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">endCompute</span><span class="p">()</span>
</span><span id="RunCompute.run-197"><a href="#RunCompute.run-197"><span class="linenos">197</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="RunCompute.run-198"><a href="#RunCompute.run-198"><span class="linenos">198</span></a>            <span class="n">start</span> <span class="o">=</span> <span class="n">timer</span><span class="p">()</span>
</span><span id="RunCompute.run-199"><a href="#RunCompute.run-199"><span class="linenos">199</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">processpipe</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span>
</span><span id="RunCompute.run-200"><a href="#RunCompute.run-200"><span class="linenos">200</span></a>            <span class="n">dt</span> <span class="o">=</span> <span class="n">timer</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span>
</span><span id="RunCompute.run-201"><a href="#RunCompute.run-201"><span class="linenos">201</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">readyToRun</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="RunCompute.run-202"><a href="#RunCompute.run-202"><span class="linenos">202</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">endCompute</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Main thread execution method.</p>

<p>Executes ProcessPipe computation using either C++ acceleration
or Python processing. Updates pipeline parameters, performs
computation, and triggers completion callback.</p>
</div>


                            </div>
                </section>
                <section id="RequestLoadImage">
                            <input id="RequestLoadImage-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">RequestLoadImage</span>:

                <label class="view-source-button" for="RequestLoadImage-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RequestLoadImage"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RequestLoadImage-206"><a href="#RequestLoadImage-206"><span class="linenos">206</span></a><span class="k">class</span><span class="w"> </span><span class="nc">RequestLoadImage</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
</span><span id="RequestLoadImage-207"><a href="#RequestLoadImage-207"><span class="linenos">207</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="RequestLoadImage-208"><a href="#RequestLoadImage-208"><span class="linenos">208</span></a><span class="sd">    Parallel image loading coordinator for gallery thumbnail generation.</span>
</span><span id="RequestLoadImage-209"><a href="#RequestLoadImage-209"><span class="linenos">209</span></a><span class="sd">    </span>
</span><span id="RequestLoadImage-210"><a href="#RequestLoadImage-210"><span class="linenos">210</span></a><span class="sd">    Manages multi-threaded loading of images for gallery display, creating</span>
</span><span id="RequestLoadImage-211"><a href="#RequestLoadImage-211"><span class="linenos">211</span></a><span class="sd">    new threads for each image load operation. Handles load completion</span>
</span><span id="RequestLoadImage-212"><a href="#RequestLoadImage-212"><span class="linenos">212</span></a><span class="sd">    callbacks and error recovery with automatic retry mechanisms.</span>
</span><span id="RequestLoadImage-213"><a href="#RequestLoadImage-213"><span class="linenos">213</span></a><span class="sd">    </span>
</span><span id="RequestLoadImage-214"><a href="#RequestLoadImage-214"><span class="linenos">214</span></a><span class="sd">    Attributes:</span>
</span><span id="RequestLoadImage-215"><a href="#RequestLoadImage-215"><span class="linenos">215</span></a><span class="sd">        parent (ImageGalleryModel): Parent model for image registration</span>
</span><span id="RequestLoadImage-216"><a href="#RequestLoadImage-216"><span class="linenos">216</span></a><span class="sd">        pool (QThreadPool): Qt thread pool for worker management</span>
</span><span id="RequestLoadImage-217"><a href="#RequestLoadImage-217"><span class="linenos">217</span></a><span class="sd">        requestsDone (dict): Load completion tracking {imageIndex: completed}</span>
</span><span id="RequestLoadImage-218"><a href="#RequestLoadImage-218"><span class="linenos">218</span></a><span class="sd">    </span>
</span><span id="RequestLoadImage-219"><a href="#RequestLoadImage-219"><span class="linenos">219</span></a><span class="sd">    Methods:</span>
</span><span id="RequestLoadImage-220"><a href="#RequestLoadImage-220"><span class="linenos">220</span></a><span class="sd">        requestLoad: Start loading for specific image</span>
</span><span id="RequestLoadImage-221"><a href="#RequestLoadImage-221"><span class="linenos">221</span></a><span class="sd">        endLoadImage: Handle load completion or retry on failure</span>
</span><span id="RequestLoadImage-222"><a href="#RequestLoadImage-222"><span class="linenos">222</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="RequestLoadImage-223"><a href="#RequestLoadImage-223"><span class="linenos">223</span></a>
</span><span id="RequestLoadImage-224"><a href="#RequestLoadImage-224"><span class="linenos">224</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
</span><span id="RequestLoadImage-225"><a href="#RequestLoadImage-225"><span class="linenos">225</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="RequestLoadImage-226"><a href="#RequestLoadImage-226"><span class="linenos">226</span></a><span class="sd">        Initialize image loading coordinator.</span>
</span><span id="RequestLoadImage-227"><a href="#RequestLoadImage-227"><span class="linenos">227</span></a><span class="sd">        </span>
</span><span id="RequestLoadImage-228"><a href="#RequestLoadImage-228"><span class="linenos">228</span></a><span class="sd">        Args:</span>
</span><span id="RequestLoadImage-229"><a href="#RequestLoadImage-229"><span class="linenos">229</span></a><span class="sd">            parent (ImageGalleryModel): Parent gallery model</span>
</span><span id="RequestLoadImage-230"><a href="#RequestLoadImage-230"><span class="linenos">230</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RequestLoadImage-231"><a href="#RequestLoadImage-231"><span class="linenos">231</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
</span><span id="RequestLoadImage-232"><a href="#RequestLoadImage-232"><span class="linenos">232</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pool</span> <span class="o">=</span> <span class="n">QThreadPool</span><span class="o">.</span><span class="n">globalInstance</span><span class="p">()</span>        <span class="c1"># get a global pool</span>
</span><span id="RequestLoadImage-233"><a href="#RequestLoadImage-233"><span class="linenos">233</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">requestsDone</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="RequestLoadImage-234"><a href="#RequestLoadImage-234"><span class="linenos">234</span></a>
</span><span id="RequestLoadImage-235"><a href="#RequestLoadImage-235"><span class="linenos">235</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">requestLoad</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">minIdxInPage</span><span class="p">,</span> <span class="n">imgIdxInPage</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
</span><span id="RequestLoadImage-236"><a href="#RequestLoadImage-236"><span class="linenos">236</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="RequestLoadImage-237"><a href="#RequestLoadImage-237"><span class="linenos">237</span></a><span class="sd">        Start image loading for specified gallery position.</span>
</span><span id="RequestLoadImage-238"><a href="#RequestLoadImage-238"><span class="linenos">238</span></a><span class="sd">        </span>
</span><span id="RequestLoadImage-239"><a href="#RequestLoadImage-239"><span class="linenos">239</span></a><span class="sd">        Args:</span>
</span><span id="RequestLoadImage-240"><a href="#RequestLoadImage-240"><span class="linenos">240</span></a><span class="sd">            minIdxInPage (int, Required): First image index in current page</span>
</span><span id="RequestLoadImage-241"><a href="#RequestLoadImage-241"><span class="linenos">241</span></a><span class="sd">            imgIdxInPage (int, Required): Relative image index within page</span>
</span><span id="RequestLoadImage-242"><a href="#RequestLoadImage-242"><span class="linenos">242</span></a><span class="sd">            filename (str, Required): Image file path to load</span>
</span><span id="RequestLoadImage-243"><a href="#RequestLoadImage-243"><span class="linenos">243</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RequestLoadImage-244"><a href="#RequestLoadImage-244"><span class="linenos">244</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">requestsDone</span><span class="p">[</span><span class="n">minIdxInPage</span><span class="o">+</span> <span class="n">imgIdxInPage</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="RequestLoadImage-245"><a href="#RequestLoadImage-245"><span class="linenos">245</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pool</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">RunLoadImage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">minIdxInPage</span><span class="p">,</span> <span class="n">imgIdxInPage</span><span class="p">,</span><span class="n">filename</span><span class="p">))</span>
</span><span id="RequestLoadImage-246"><a href="#RequestLoadImage-246"><span class="linenos">246</span></a>
</span><span id="RequestLoadImage-247"><a href="#RequestLoadImage-247"><span class="linenos">247</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">endLoadImage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">error</span><span class="p">,</span><span class="n">idx0</span><span class="p">,</span> <span class="n">idx</span><span class="p">,</span><span class="n">processPipe</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
</span><span id="RequestLoadImage-248"><a href="#RequestLoadImage-248"><span class="linenos">248</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="RequestLoadImage-249"><a href="#RequestLoadImage-249"><span class="linenos">249</span></a><span class="sd">        Handle image loading completion or error recovery.</span>
</span><span id="RequestLoadImage-250"><a href="#RequestLoadImage-250"><span class="linenos">250</span></a><span class="sd">        </span>
</span><span id="RequestLoadImage-251"><a href="#RequestLoadImage-251"><span class="linenos">251</span></a><span class="sd">        Called when loading completes or fails (IOError, ValueError).</span>
</span><span id="RequestLoadImage-252"><a href="#RequestLoadImage-252"><span class="linenos">252</span></a><span class="sd">        Updates parent model with ProcessPipe and refreshes view on success.</span>
</span><span id="RequestLoadImage-253"><a href="#RequestLoadImage-253"><span class="linenos">253</span></a><span class="sd">        Automatically retries loading on failure.</span>
</span><span id="RequestLoadImage-254"><a href="#RequestLoadImage-254"><span class="linenos">254</span></a>
</span><span id="RequestLoadImage-255"><a href="#RequestLoadImage-255"><span class="linenos">255</span></a><span class="sd">        Args:</span>
</span><span id="RequestLoadImage-256"><a href="#RequestLoadImage-256"><span class="linenos">256</span></a><span class="sd">            error (bool, Required): True if loading failed</span>
</span><span id="RequestLoadImage-257"><a href="#RequestLoadImage-257"><span class="linenos">257</span></a><span class="sd">            idx0 (int, Required): First image index in current page</span>
</span><span id="RequestLoadImage-258"><a href="#RequestLoadImage-258"><span class="linenos">258</span></a><span class="sd">            idx (int, Required): Relative image index within page</span>
</span><span id="RequestLoadImage-259"><a href="#RequestLoadImage-259"><span class="linenos">259</span></a><span class="sd">            processPipe (ProcessPipe, Required): Loaded image processing pipeline</span>
</span><span id="RequestLoadImage-260"><a href="#RequestLoadImage-260"><span class="linenos">260</span></a><span class="sd">            filename (str, Required): Image filename</span>
</span><span id="RequestLoadImage-261"><a href="#RequestLoadImage-261"><span class="linenos">261</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RequestLoadImage-262"><a href="#RequestLoadImage-262"><span class="linenos">262</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">error</span><span class="p">:</span>
</span><span id="RequestLoadImage-263"><a href="#RequestLoadImage-263"><span class="linenos">263</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">requestsDone</span><span class="p">[</span><span class="n">idx0</span> <span class="o">+</span> <span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="RequestLoadImage-264"><a href="#RequestLoadImage-264"><span class="linenos">264</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">processPipes</span><span class="p">[</span><span class="n">idx0</span> <span class="o">+</span> <span class="n">idx</span><span class="p">]</span><span class="o">=</span> <span class="n">processPipe</span>
</span><span id="RequestLoadImage-265"><a href="#RequestLoadImage-265"><span class="linenos">265</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">updateImage</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span><span class="n">processPipe</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
</span><span id="RequestLoadImage-266"><a href="#RequestLoadImage-266"><span class="linenos">266</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="RequestLoadImage-267"><a href="#RequestLoadImage-267"><span class="linenos">267</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">requestLoad</span><span class="p">(</span><span class="n">idx0</span><span class="p">,</span> <span class="n">idx</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Parallel image loading coordinator for gallery thumbnail generation.</p>

<p>Manages multi-threaded loading of images for gallery display, creating
new threads for each image load operation. Handles load completion
callbacks and error recovery with automatic retry mechanisms.</p>

<p>Attributes:
    parent (ImageGalleryModel): Parent model for image registration
    pool (QThreadPool): Qt thread pool for worker management
    requestsDone (dict): Load completion tracking {imageIndex: completed}</p>

<p>Methods:
    requestLoad: Start loading for specific image
    endLoadImage: Handle load completion or retry on failure</p>
</div>


                            <div id="RequestLoadImage.__init__" class="classattr">
                                        <input id="RequestLoadImage.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">RequestLoadImage</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">parent</span></span>)</span>

                <label class="view-source-button" for="RequestLoadImage.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RequestLoadImage.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RequestLoadImage.__init__-224"><a href="#RequestLoadImage.__init__-224"><span class="linenos">224</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
</span><span id="RequestLoadImage.__init__-225"><a href="#RequestLoadImage.__init__-225"><span class="linenos">225</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="RequestLoadImage.__init__-226"><a href="#RequestLoadImage.__init__-226"><span class="linenos">226</span></a><span class="sd">        Initialize image loading coordinator.</span>
</span><span id="RequestLoadImage.__init__-227"><a href="#RequestLoadImage.__init__-227"><span class="linenos">227</span></a><span class="sd">        </span>
</span><span id="RequestLoadImage.__init__-228"><a href="#RequestLoadImage.__init__-228"><span class="linenos">228</span></a><span class="sd">        Args:</span>
</span><span id="RequestLoadImage.__init__-229"><a href="#RequestLoadImage.__init__-229"><span class="linenos">229</span></a><span class="sd">            parent (ImageGalleryModel): Parent gallery model</span>
</span><span id="RequestLoadImage.__init__-230"><a href="#RequestLoadImage.__init__-230"><span class="linenos">230</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RequestLoadImage.__init__-231"><a href="#RequestLoadImage.__init__-231"><span class="linenos">231</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
</span><span id="RequestLoadImage.__init__-232"><a href="#RequestLoadImage.__init__-232"><span class="linenos">232</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pool</span> <span class="o">=</span> <span class="n">QThreadPool</span><span class="o">.</span><span class="n">globalInstance</span><span class="p">()</span>        <span class="c1"># get a global pool</span>
</span><span id="RequestLoadImage.__init__-233"><a href="#RequestLoadImage.__init__-233"><span class="linenos">233</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">requestsDone</span> <span class="o">=</span> <span class="p">{}</span>
</span></pre></div>


            <div class="docstring"><p>Initialize image loading coordinator.</p>

<p>Args:
    parent (ImageGalleryModel): Parent gallery model</p>
</div>


                            </div>
                            <div id="RequestLoadImage.parent" class="classattr">
                                <div class="attr variable">
            <span class="name">parent</span>

        
    </div>
    <a class="headerlink" href="#RequestLoadImage.parent"></a>
    
    

                            </div>
                            <div id="RequestLoadImage.pool" class="classattr">
                                <div class="attr variable">
            <span class="name">pool</span>

        
    </div>
    <a class="headerlink" href="#RequestLoadImage.pool"></a>
    
    

                            </div>
                            <div id="RequestLoadImage.requestsDone" class="classattr">
                                <div class="attr variable">
            <span class="name">requestsDone</span>

        
    </div>
    <a class="headerlink" href="#RequestLoadImage.requestsDone"></a>
    
    

                            </div>
                            <div id="RequestLoadImage.requestLoad" class="classattr">
                                        <input id="RequestLoadImage.requestLoad-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">requestLoad</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">minIdxInPage</span>, </span><span class="param"><span class="n">imgIdxInPage</span>, </span><span class="param"><span class="n">filename</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="RequestLoadImage.requestLoad-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RequestLoadImage.requestLoad"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RequestLoadImage.requestLoad-235"><a href="#RequestLoadImage.requestLoad-235"><span class="linenos">235</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">requestLoad</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">minIdxInPage</span><span class="p">,</span> <span class="n">imgIdxInPage</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
</span><span id="RequestLoadImage.requestLoad-236"><a href="#RequestLoadImage.requestLoad-236"><span class="linenos">236</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="RequestLoadImage.requestLoad-237"><a href="#RequestLoadImage.requestLoad-237"><span class="linenos">237</span></a><span class="sd">        Start image loading for specified gallery position.</span>
</span><span id="RequestLoadImage.requestLoad-238"><a href="#RequestLoadImage.requestLoad-238"><span class="linenos">238</span></a><span class="sd">        </span>
</span><span id="RequestLoadImage.requestLoad-239"><a href="#RequestLoadImage.requestLoad-239"><span class="linenos">239</span></a><span class="sd">        Args:</span>
</span><span id="RequestLoadImage.requestLoad-240"><a href="#RequestLoadImage.requestLoad-240"><span class="linenos">240</span></a><span class="sd">            minIdxInPage (int, Required): First image index in current page</span>
</span><span id="RequestLoadImage.requestLoad-241"><a href="#RequestLoadImage.requestLoad-241"><span class="linenos">241</span></a><span class="sd">            imgIdxInPage (int, Required): Relative image index within page</span>
</span><span id="RequestLoadImage.requestLoad-242"><a href="#RequestLoadImage.requestLoad-242"><span class="linenos">242</span></a><span class="sd">            filename (str, Required): Image file path to load</span>
</span><span id="RequestLoadImage.requestLoad-243"><a href="#RequestLoadImage.requestLoad-243"><span class="linenos">243</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RequestLoadImage.requestLoad-244"><a href="#RequestLoadImage.requestLoad-244"><span class="linenos">244</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">requestsDone</span><span class="p">[</span><span class="n">minIdxInPage</span><span class="o">+</span> <span class="n">imgIdxInPage</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="RequestLoadImage.requestLoad-245"><a href="#RequestLoadImage.requestLoad-245"><span class="linenos">245</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pool</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">RunLoadImage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">minIdxInPage</span><span class="p">,</span> <span class="n">imgIdxInPage</span><span class="p">,</span><span class="n">filename</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>Start image loading for specified gallery position.</p>

<p>Args:
    minIdxInPage (int, Required): First image index in current page
    imgIdxInPage (int, Required): Relative image index within page
    filename (str, Required): Image file path to load</p>
</div>


                            </div>
                            <div id="RequestLoadImage.endLoadImage" class="classattr">
                                        <input id="RequestLoadImage.endLoadImage-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">endLoadImage</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">error</span>, </span><span class="param"><span class="n">idx0</span>, </span><span class="param"><span class="n">idx</span>, </span><span class="param"><span class="n">processPipe</span>, </span><span class="param"><span class="n">filename</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="RequestLoadImage.endLoadImage-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RequestLoadImage.endLoadImage"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RequestLoadImage.endLoadImage-247"><a href="#RequestLoadImage.endLoadImage-247"><span class="linenos">247</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">endLoadImage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">error</span><span class="p">,</span><span class="n">idx0</span><span class="p">,</span> <span class="n">idx</span><span class="p">,</span><span class="n">processPipe</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
</span><span id="RequestLoadImage.endLoadImage-248"><a href="#RequestLoadImage.endLoadImage-248"><span class="linenos">248</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="RequestLoadImage.endLoadImage-249"><a href="#RequestLoadImage.endLoadImage-249"><span class="linenos">249</span></a><span class="sd">        Handle image loading completion or error recovery.</span>
</span><span id="RequestLoadImage.endLoadImage-250"><a href="#RequestLoadImage.endLoadImage-250"><span class="linenos">250</span></a><span class="sd">        </span>
</span><span id="RequestLoadImage.endLoadImage-251"><a href="#RequestLoadImage.endLoadImage-251"><span class="linenos">251</span></a><span class="sd">        Called when loading completes or fails (IOError, ValueError).</span>
</span><span id="RequestLoadImage.endLoadImage-252"><a href="#RequestLoadImage.endLoadImage-252"><span class="linenos">252</span></a><span class="sd">        Updates parent model with ProcessPipe and refreshes view on success.</span>
</span><span id="RequestLoadImage.endLoadImage-253"><a href="#RequestLoadImage.endLoadImage-253"><span class="linenos">253</span></a><span class="sd">        Automatically retries loading on failure.</span>
</span><span id="RequestLoadImage.endLoadImage-254"><a href="#RequestLoadImage.endLoadImage-254"><span class="linenos">254</span></a>
</span><span id="RequestLoadImage.endLoadImage-255"><a href="#RequestLoadImage.endLoadImage-255"><span class="linenos">255</span></a><span class="sd">        Args:</span>
</span><span id="RequestLoadImage.endLoadImage-256"><a href="#RequestLoadImage.endLoadImage-256"><span class="linenos">256</span></a><span class="sd">            error (bool, Required): True if loading failed</span>
</span><span id="RequestLoadImage.endLoadImage-257"><a href="#RequestLoadImage.endLoadImage-257"><span class="linenos">257</span></a><span class="sd">            idx0 (int, Required): First image index in current page</span>
</span><span id="RequestLoadImage.endLoadImage-258"><a href="#RequestLoadImage.endLoadImage-258"><span class="linenos">258</span></a><span class="sd">            idx (int, Required): Relative image index within page</span>
</span><span id="RequestLoadImage.endLoadImage-259"><a href="#RequestLoadImage.endLoadImage-259"><span class="linenos">259</span></a><span class="sd">            processPipe (ProcessPipe, Required): Loaded image processing pipeline</span>
</span><span id="RequestLoadImage.endLoadImage-260"><a href="#RequestLoadImage.endLoadImage-260"><span class="linenos">260</span></a><span class="sd">            filename (str, Required): Image filename</span>
</span><span id="RequestLoadImage.endLoadImage-261"><a href="#RequestLoadImage.endLoadImage-261"><span class="linenos">261</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RequestLoadImage.endLoadImage-262"><a href="#RequestLoadImage.endLoadImage-262"><span class="linenos">262</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">error</span><span class="p">:</span>
</span><span id="RequestLoadImage.endLoadImage-263"><a href="#RequestLoadImage.endLoadImage-263"><span class="linenos">263</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">requestsDone</span><span class="p">[</span><span class="n">idx0</span> <span class="o">+</span> <span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="RequestLoadImage.endLoadImage-264"><a href="#RequestLoadImage.endLoadImage-264"><span class="linenos">264</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">processPipes</span><span class="p">[</span><span class="n">idx0</span> <span class="o">+</span> <span class="n">idx</span><span class="p">]</span><span class="o">=</span> <span class="n">processPipe</span>
</span><span id="RequestLoadImage.endLoadImage-265"><a href="#RequestLoadImage.endLoadImage-265"><span class="linenos">265</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">updateImage</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span><span class="n">processPipe</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
</span><span id="RequestLoadImage.endLoadImage-266"><a href="#RequestLoadImage.endLoadImage-266"><span class="linenos">266</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="RequestLoadImage.endLoadImage-267"><a href="#RequestLoadImage.endLoadImage-267"><span class="linenos">267</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">requestLoad</span><span class="p">(</span><span class="n">idx0</span><span class="p">,</span> <span class="n">idx</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Handle image loading completion or error recovery.</p>

<p>Called when loading completes or fails (IOError, ValueError).
Updates parent model with ProcessPipe and refreshes view on success.
Automatically retries loading on failure.</p>

<p>Args:
    error (bool, Required): True if loading failed
    idx0 (int, Required): First image index in current page
    idx (int, Required): Relative image index within page
    processPipe (ProcessPipe, Required): Loaded image processing pipeline
    filename (str, Required): Image filename</p>
</div>


                            </div>
                </section>
                <section id="RunLoadImage">
                            <input id="RunLoadImage-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">RunLoadImage</span><wbr>(<span class="base">PyQt5.QtCore.QRunnable</span>):

                <label class="view-source-button" for="RunLoadImage-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RunLoadImage"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RunLoadImage-271"><a href="#RunLoadImage-271"><span class="linenos">271</span></a><span class="k">class</span><span class="w"> </span><span class="nc">RunLoadImage</span><span class="p">(</span><span class="n">QRunnable</span><span class="p">):</span>
</span><span id="RunLoadImage-272"><a href="#RunLoadImage-272"><span class="linenos">272</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="RunLoadImage-273"><a href="#RunLoadImage-273"><span class="linenos">273</span></a><span class="sd">    Worker thread for individual image loading and ProcessPipe creation.</span>
</span><span id="RunLoadImage-274"><a href="#RunLoadImage-274"><span class="linenos">274</span></a><span class="sd">    </span>
</span><span id="RunLoadImage-275"><a href="#RunLoadImage-275"><span class="linenos">275</span></a><span class="sd">    Loads HDR images, creates associated ProcessPipes with default parameters,</span>
</span><span id="RunLoadImage-276"><a href="#RunLoadImage-276"><span class="linenos">276</span></a><span class="sd">    and performs initial computation for thumbnail generation. Handles</span>
</span><span id="RunLoadImage-277"><a href="#RunLoadImage-277"><span class="linenos">277</span></a><span class="sd">    loading errors gracefully with error reporting.</span>
</span><span id="RunLoadImage-278"><a href="#RunLoadImage-278"><span class="linenos">278</span></a><span class="sd">    </span>
</span><span id="RunLoadImage-279"><a href="#RunLoadImage-279"><span class="linenos">279</span></a><span class="sd">    Attributes:</span>
</span><span id="RunLoadImage-280"><a href="#RunLoadImage-280"><span class="linenos">280</span></a><span class="sd">        parent (RequestLoadImage): Parent coordinator for completion callback</span>
</span><span id="RunLoadImage-281"><a href="#RunLoadImage-281"><span class="linenos">281</span></a><span class="sd">        minIdxInPage (int): First image index in current page</span>
</span><span id="RunLoadImage-282"><a href="#RunLoadImage-282"><span class="linenos">282</span></a><span class="sd">        imgIdxInPage (int): Relative image index within page</span>
</span><span id="RunLoadImage-283"><a href="#RunLoadImage-283"><span class="linenos">283</span></a><span class="sd">        filename (str): Image file path to load</span>
</span><span id="RunLoadImage-284"><a href="#RunLoadImage-284"><span class="linenos">284</span></a><span class="sd">    </span>
</span><span id="RunLoadImage-285"><a href="#RunLoadImage-285"><span class="linenos">285</span></a><span class="sd">    Methods:</span>
</span><span id="RunLoadImage-286"><a href="#RunLoadImage-286"><span class="linenos">286</span></a><span class="sd">        run: Main thread execution with image loading and error handling</span>
</span><span id="RunLoadImage-287"><a href="#RunLoadImage-287"><span class="linenos">287</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="RunLoadImage-288"><a href="#RunLoadImage-288"><span class="linenos">288</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">parent</span><span class="p">,</span> <span class="n">minIdxInPage</span><span class="p">,</span> <span class="n">imgIdxInPage</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
</span><span id="RunLoadImage-289"><a href="#RunLoadImage-289"><span class="linenos">289</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="RunLoadImage-290"><a href="#RunLoadImage-290"><span class="linenos">290</span></a><span class="sd">        Initialize image loading worker thread.</span>
</span><span id="RunLoadImage-291"><a href="#RunLoadImage-291"><span class="linenos">291</span></a><span class="sd">        </span>
</span><span id="RunLoadImage-292"><a href="#RunLoadImage-292"><span class="linenos">292</span></a><span class="sd">        Args:</span>
</span><span id="RunLoadImage-293"><a href="#RunLoadImage-293"><span class="linenos">293</span></a><span class="sd">            parent (RequestLoadImage): Parent coordinator instance</span>
</span><span id="RunLoadImage-294"><a href="#RunLoadImage-294"><span class="linenos">294</span></a><span class="sd">            minIdxInPage (int): First image index in current page</span>
</span><span id="RunLoadImage-295"><a href="#RunLoadImage-295"><span class="linenos">295</span></a><span class="sd">            imgIdxInPage (int): Relative image index within page</span>
</span><span id="RunLoadImage-296"><a href="#RunLoadImage-296"><span class="linenos">296</span></a><span class="sd">            filename (str): Image file path to load</span>
</span><span id="RunLoadImage-297"><a href="#RunLoadImage-297"><span class="linenos">297</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RunLoadImage-298"><a href="#RunLoadImage-298"><span class="linenos">298</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="RunLoadImage-299"><a href="#RunLoadImage-299"><span class="linenos">299</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
</span><span id="RunLoadImage-300"><a href="#RunLoadImage-300"><span class="linenos">300</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">minIdxInPage</span> <span class="o">=</span> <span class="n">minIdxInPage</span>
</span><span id="RunLoadImage-301"><a href="#RunLoadImage-301"><span class="linenos">301</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">imgIdxInPage</span> <span class="o">=</span> <span class="n">imgIdxInPage</span>
</span><span id="RunLoadImage-302"><a href="#RunLoadImage-302"><span class="linenos">302</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">filename</span> <span class="o">=</span> <span class="n">filename</span>
</span><span id="RunLoadImage-303"><a href="#RunLoadImage-303"><span class="linenos">303</span></a>
</span><span id="RunLoadImage-304"><a href="#RunLoadImage-304"><span class="linenos">304</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="RunLoadImage-305"><a href="#RunLoadImage-305"><span class="linenos">305</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="RunLoadImage-306"><a href="#RunLoadImage-306"><span class="linenos">306</span></a><span class="sd">        Main thread execution for image loading.</span>
</span><span id="RunLoadImage-307"><a href="#RunLoadImage-307"><span class="linenos">307</span></a><span class="sd">        </span>
</span><span id="RunLoadImage-308"><a href="#RunLoadImage-308"><span class="linenos">308</span></a><span class="sd">        Loads image file, creates default ProcessPipe, performs initial</span>
</span><span id="RunLoadImage-309"><a href="#RunLoadImage-309"><span class="linenos">309</span></a><span class="sd">        computation, and reports completion or error to parent coordinator.</span>
</span><span id="RunLoadImage-310"><a href="#RunLoadImage-310"><span class="linenos">310</span></a><span class="sd">        Handles IOError and ValueError exceptions gracefully.</span>
</span><span id="RunLoadImage-311"><a href="#RunLoadImage-311"><span class="linenos">311</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RunLoadImage-312"><a href="#RunLoadImage-312"><span class="linenos">312</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="RunLoadImage-313"><a href="#RunLoadImage-313"><span class="linenos">313</span></a>            <span class="n">image_</span> <span class="o">=</span> <span class="n">hdrCore</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filename</span><span class="p">,</span> <span class="n">thumb</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="RunLoadImage-314"><a href="#RunLoadImage-314"><span class="linenos">314</span></a>            <span class="n">processPipe</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">EditImageModel</span><span class="o">.</span><span class="n">buildProcessPipe</span><span class="p">()</span>
</span><span id="RunLoadImage-315"><a href="#RunLoadImage-315"><span class="linenos">315</span></a>            <span class="n">processPipe</span><span class="o">.</span><span class="n">setImage</span><span class="p">(</span><span class="n">image_</span><span class="p">)</span>                      
</span><span id="RunLoadImage-316"><a href="#RunLoadImage-316"><span class="linenos">316</span></a>            <span class="n">processPipe</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span>
</span><span id="RunLoadImage-317"><a href="#RunLoadImage-317"><span class="linenos">317</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">endLoadImage</span><span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">minIdxInPage</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">imgIdxInPage</span><span class="p">,</span> <span class="n">processPipe</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">filename</span><span class="p">)</span>
</span><span id="RunLoadImage-318"><a href="#RunLoadImage-318"><span class="linenos">318</span></a>        <span class="k">except</span><span class="p">(</span><span class="ne">IOError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="RunLoadImage-319"><a href="#RunLoadImage-319"><span class="linenos">319</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">endLoadImage</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">minIdxInPage</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">imgIdxInPage</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">filename</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Worker thread for individual image loading and ProcessPipe creation.</p>

<p>Loads HDR images, creates associated ProcessPipes with default parameters,
and performs initial computation for thumbnail generation. Handles
loading errors gracefully with error reporting.</p>

<p>Attributes:
    parent (RequestLoadImage): Parent coordinator for completion callback
    minIdxInPage (int): First image index in current page
    imgIdxInPage (int): Relative image index within page
    filename (str): Image file path to load</p>

<p>Methods:
    run: Main thread execution with image loading and error handling</p>
</div>


                            <div id="RunLoadImage.__init__" class="classattr">
                                        <input id="RunLoadImage.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">RunLoadImage</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">parent</span>, </span><span class="param"><span class="n">minIdxInPage</span>, </span><span class="param"><span class="n">imgIdxInPage</span>, </span><span class="param"><span class="n">filename</span></span>)</span>

                <label class="view-source-button" for="RunLoadImage.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RunLoadImage.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RunLoadImage.__init__-288"><a href="#RunLoadImage.__init__-288"><span class="linenos">288</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">parent</span><span class="p">,</span> <span class="n">minIdxInPage</span><span class="p">,</span> <span class="n">imgIdxInPage</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
</span><span id="RunLoadImage.__init__-289"><a href="#RunLoadImage.__init__-289"><span class="linenos">289</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="RunLoadImage.__init__-290"><a href="#RunLoadImage.__init__-290"><span class="linenos">290</span></a><span class="sd">        Initialize image loading worker thread.</span>
</span><span id="RunLoadImage.__init__-291"><a href="#RunLoadImage.__init__-291"><span class="linenos">291</span></a><span class="sd">        </span>
</span><span id="RunLoadImage.__init__-292"><a href="#RunLoadImage.__init__-292"><span class="linenos">292</span></a><span class="sd">        Args:</span>
</span><span id="RunLoadImage.__init__-293"><a href="#RunLoadImage.__init__-293"><span class="linenos">293</span></a><span class="sd">            parent (RequestLoadImage): Parent coordinator instance</span>
</span><span id="RunLoadImage.__init__-294"><a href="#RunLoadImage.__init__-294"><span class="linenos">294</span></a><span class="sd">            minIdxInPage (int): First image index in current page</span>
</span><span id="RunLoadImage.__init__-295"><a href="#RunLoadImage.__init__-295"><span class="linenos">295</span></a><span class="sd">            imgIdxInPage (int): Relative image index within page</span>
</span><span id="RunLoadImage.__init__-296"><a href="#RunLoadImage.__init__-296"><span class="linenos">296</span></a><span class="sd">            filename (str): Image file path to load</span>
</span><span id="RunLoadImage.__init__-297"><a href="#RunLoadImage.__init__-297"><span class="linenos">297</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RunLoadImage.__init__-298"><a href="#RunLoadImage.__init__-298"><span class="linenos">298</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="RunLoadImage.__init__-299"><a href="#RunLoadImage.__init__-299"><span class="linenos">299</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
</span><span id="RunLoadImage.__init__-300"><a href="#RunLoadImage.__init__-300"><span class="linenos">300</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">minIdxInPage</span> <span class="o">=</span> <span class="n">minIdxInPage</span>
</span><span id="RunLoadImage.__init__-301"><a href="#RunLoadImage.__init__-301"><span class="linenos">301</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">imgIdxInPage</span> <span class="o">=</span> <span class="n">imgIdxInPage</span>
</span><span id="RunLoadImage.__init__-302"><a href="#RunLoadImage.__init__-302"><span class="linenos">302</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">filename</span> <span class="o">=</span> <span class="n">filename</span>
</span></pre></div>


            <div class="docstring"><p>Initialize image loading worker thread.</p>

<p>Args:
    parent (RequestLoadImage): Parent coordinator instance
    minIdxInPage (int): First image index in current page
    imgIdxInPage (int): Relative image index within page
    filename (str): Image file path to load</p>
</div>


                            </div>
                            <div id="RunLoadImage.parent" class="classattr">
                                <div class="attr variable">
            <span class="name">parent</span>

        
    </div>
    <a class="headerlink" href="#RunLoadImage.parent"></a>
    
    

                            </div>
                            <div id="RunLoadImage.minIdxInPage" class="classattr">
                                <div class="attr variable">
            <span class="name">minIdxInPage</span>

        
    </div>
    <a class="headerlink" href="#RunLoadImage.minIdxInPage"></a>
    
    

                            </div>
                            <div id="RunLoadImage.imgIdxInPage" class="classattr">
                                <div class="attr variable">
            <span class="name">imgIdxInPage</span>

        
    </div>
    <a class="headerlink" href="#RunLoadImage.imgIdxInPage"></a>
    
    

                            </div>
                            <div id="RunLoadImage.filename" class="classattr">
                                <div class="attr variable">
            <span class="name">filename</span>

        
    </div>
    <a class="headerlink" href="#RunLoadImage.filename"></a>
    
    

                            </div>
                            <div id="RunLoadImage.run" class="classattr">
                                        <input id="RunLoadImage.run-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">run</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="RunLoadImage.run-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RunLoadImage.run"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RunLoadImage.run-304"><a href="#RunLoadImage.run-304"><span class="linenos">304</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="RunLoadImage.run-305"><a href="#RunLoadImage.run-305"><span class="linenos">305</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="RunLoadImage.run-306"><a href="#RunLoadImage.run-306"><span class="linenos">306</span></a><span class="sd">        Main thread execution for image loading.</span>
</span><span id="RunLoadImage.run-307"><a href="#RunLoadImage.run-307"><span class="linenos">307</span></a><span class="sd">        </span>
</span><span id="RunLoadImage.run-308"><a href="#RunLoadImage.run-308"><span class="linenos">308</span></a><span class="sd">        Loads image file, creates default ProcessPipe, performs initial</span>
</span><span id="RunLoadImage.run-309"><a href="#RunLoadImage.run-309"><span class="linenos">309</span></a><span class="sd">        computation, and reports completion or error to parent coordinator.</span>
</span><span id="RunLoadImage.run-310"><a href="#RunLoadImage.run-310"><span class="linenos">310</span></a><span class="sd">        Handles IOError and ValueError exceptions gracefully.</span>
</span><span id="RunLoadImage.run-311"><a href="#RunLoadImage.run-311"><span class="linenos">311</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RunLoadImage.run-312"><a href="#RunLoadImage.run-312"><span class="linenos">312</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="RunLoadImage.run-313"><a href="#RunLoadImage.run-313"><span class="linenos">313</span></a>            <span class="n">image_</span> <span class="o">=</span> <span class="n">hdrCore</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filename</span><span class="p">,</span> <span class="n">thumb</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="RunLoadImage.run-314"><a href="#RunLoadImage.run-314"><span class="linenos">314</span></a>            <span class="n">processPipe</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">EditImageModel</span><span class="o">.</span><span class="n">buildProcessPipe</span><span class="p">()</span>
</span><span id="RunLoadImage.run-315"><a href="#RunLoadImage.run-315"><span class="linenos">315</span></a>            <span class="n">processPipe</span><span class="o">.</span><span class="n">setImage</span><span class="p">(</span><span class="n">image_</span><span class="p">)</span>                      
</span><span id="RunLoadImage.run-316"><a href="#RunLoadImage.run-316"><span class="linenos">316</span></a>            <span class="n">processPipe</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span>
</span><span id="RunLoadImage.run-317"><a href="#RunLoadImage.run-317"><span class="linenos">317</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">endLoadImage</span><span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">minIdxInPage</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">imgIdxInPage</span><span class="p">,</span> <span class="n">processPipe</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">filename</span><span class="p">)</span>
</span><span id="RunLoadImage.run-318"><a href="#RunLoadImage.run-318"><span class="linenos">318</span></a>        <span class="k">except</span><span class="p">(</span><span class="ne">IOError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span><span id="RunLoadImage.run-319"><a href="#RunLoadImage.run-319"><span class="linenos">319</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">endLoadImage</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">minIdxInPage</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">imgIdxInPage</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">filename</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Main thread execution for image loading.</p>

<p>Loads image file, creates default ProcessPipe, performs initial
computation, and reports completion or error to parent coordinator.
Handles IOError and ValueError exceptions gracefully.</p>
</div>


                            </div>
                </section>
                <section id="pCompute">
                            <input id="pCompute-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">pCompute</span>:

                <label class="view-source-button" for="pCompute-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#pCompute"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="pCompute-323"><a href="#pCompute-323"><span class="linenos">323</span></a><span class="k">class</span><span class="w"> </span><span class="nc">pCompute</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
</span><span id="pCompute-324"><a href="#pCompute-324"><span class="linenos">324</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="pCompute-325"><a href="#pCompute-325"><span class="linenos">325</span></a><span class="sd">    Multi-threaded HDR processing with image splitting for large images.</span>
</span><span id="pCompute-326"><a href="#pCompute-326"><span class="linenos">326</span></a><span class="sd">    </span>
</span><span id="pCompute-327"><a href="#pCompute-327"><span class="linenos">327</span></a><span class="sd">    Manages parallel computation of ProcessPipe operations for HDR display</span>
</span><span id="pCompute-328"><a href="#pCompute-328"><span class="linenos">328</span></a><span class="sd">    or export by splitting large images into multiple parts and processing</span>
</span><span id="pCompute-329"><a href="#pCompute-329"><span class="linenos">329</span></a><span class="sd">    them concurrently. Provides progress feedback and handles geometry</span>
</span><span id="pCompute-330"><a href="#pCompute-330"><span class="linenos">330</span></a><span class="sd">    processing separately at the end for optimal performance.</span>
</span><span id="pCompute-331"><a href="#pCompute-331"><span class="linenos">331</span></a><span class="sd">    </span>
</span><span id="pCompute-332"><a href="#pCompute-332"><span class="linenos">332</span></a><span class="sd">    Processing Workflow:</span>
</span><span id="pCompute-333"><a href="#pCompute-333"><span class="linenos">333</span></a><span class="sd">    1. Split input image into grid of smaller sections</span>
</span><span id="pCompute-334"><a href="#pCompute-334"><span class="linenos">334</span></a><span class="sd">    2. Create duplicate ProcessPipes for each split</span>
</span><span id="pCompute-335"><a href="#pCompute-335"><span class="linenos">335</span></a><span class="sd">    3. Process splits in parallel using thread pool</span>
</span><span id="pCompute-336"><a href="#pCompute-336"><span class="linenos">336</span></a><span class="sd">    4. Merge processed splits back into complete image</span>
</span><span id="pCompute-337"><a href="#pCompute-337"><span class="linenos">337</span></a><span class="sd">    5. Apply geometry processing to final merged result</span>
</span><span id="pCompute-338"><a href="#pCompute-338"><span class="linenos">338</span></a><span class="sd">    6. Callback with final processed image</span>
</span><span id="pCompute-339"><a href="#pCompute-339"><span class="linenos">339</span></a><span class="sd">    </span>
</span><span id="pCompute-340"><a href="#pCompute-340"><span class="linenos">340</span></a><span class="sd">    Attributes:</span>
</span><span id="pCompute-341"><a href="#pCompute-341"><span class="linenos">341</span></a><span class="sd">        callBack (function): Completion callback function</span>
</span><span id="pCompute-342"><a href="#pCompute-342"><span class="linenos">342</span></a><span class="sd">        progress (function): Progress update callback function</span>
</span><span id="pCompute-343"><a href="#pCompute-343"><span class="linenos">343</span></a><span class="sd">        nbSplits (int): Total number of image splits to process</span>
</span><span id="pCompute-344"><a href="#pCompute-344"><span class="linenos">344</span></a><span class="sd">        nbDone (int): Number of completed split processing operations</span>
</span><span id="pCompute-345"><a href="#pCompute-345"><span class="linenos">345</span></a><span class="sd">        geometryNode (ProcessNode): Geometry processing node for final step</span>
</span><span id="pCompute-346"><a href="#pCompute-346"><span class="linenos">346</span></a><span class="sd">        meta (metadata): Image metadata for preservation</span>
</span><span id="pCompute-347"><a href="#pCompute-347"><span class="linenos">347</span></a><span class="sd">    </span>
</span><span id="pCompute-348"><a href="#pCompute-348"><span class="linenos">348</span></a><span class="sd">    Methods:</span>
</span><span id="pCompute-349"><a href="#pCompute-349"><span class="linenos">349</span></a><span class="sd">        endCompute: Handle split completion and final merge</span>
</span><span id="pCompute-350"><a href="#pCompute-350"><span class="linenos">350</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="pCompute-351"><a href="#pCompute-351"><span class="linenos">351</span></a>
</span><span id="pCompute-352"><a href="#pCompute-352"><span class="linenos">352</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">callBack</span><span class="p">,</span> <span class="n">processpipe</span><span class="p">,</span><span class="n">nbWidth</span><span class="p">,</span><span class="n">nbHeight</span><span class="p">,</span> <span class="n">toneMap</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">progress</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">meta</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="pCompute-353"><a href="#pCompute-353"><span class="linenos">353</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="pCompute-354"><a href="#pCompute-354"><span class="linenos">354</span></a><span class="sd">        Initialize parallel HDR processing with image splitting.</span>
</span><span id="pCompute-355"><a href="#pCompute-355"><span class="linenos">355</span></a><span class="sd">        </span>
</span><span id="pCompute-356"><a href="#pCompute-356"><span class="linenos">356</span></a><span class="sd">        Args:</span>
</span><span id="pCompute-357"><a href="#pCompute-357"><span class="linenos">357</span></a><span class="sd">            callBack (function): Function called when processing completes</span>
</span><span id="pCompute-358"><a href="#pCompute-358"><span class="linenos">358</span></a><span class="sd">            processpipe (ProcessPipe): HDR processing pipeline to apply</span>
</span><span id="pCompute-359"><a href="#pCompute-359"><span class="linenos">359</span></a><span class="sd">            nbWidth (int): Number of horizontal splits</span>
</span><span id="pCompute-360"><a href="#pCompute-360"><span class="linenos">360</span></a><span class="sd">            nbHeight (int): Number of vertical splits  </span>
</span><span id="pCompute-361"><a href="#pCompute-361"><span class="linenos">361</span></a><span class="sd">            toneMap (bool): Apply tone mapping to final result</span>
</span><span id="pCompute-362"><a href="#pCompute-362"><span class="linenos">362</span></a><span class="sd">            progress (function, optional): Progress callback function</span>
</span><span id="pCompute-363"><a href="#pCompute-363"><span class="linenos">363</span></a><span class="sd">            meta (metadata, optional): Image metadata to preserve</span>
</span><span id="pCompute-364"><a href="#pCompute-364"><span class="linenos">364</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="pCompute-365"><a href="#pCompute-365"><span class="linenos">365</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBack</span> <span class="o">=</span> <span class="n">callBack</span>
</span><span id="pCompute-366"><a href="#pCompute-366"><span class="linenos">366</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">progress</span> <span class="o">=</span><span class="n">progress</span>
</span><span id="pCompute-367"><a href="#pCompute-367"><span class="linenos">367</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">nbSplits</span> <span class="o">=</span> <span class="n">nbWidth</span><span class="o">*</span><span class="n">nbHeight</span>
</span><span id="pCompute-368"><a href="#pCompute-368"><span class="linenos">368</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">nbDone</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="pCompute-369"><a href="#pCompute-369"><span class="linenos">369</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">geometryNode</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="pCompute-370"><a href="#pCompute-370"><span class="linenos">370</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">meta</span> <span class="o">=</span> <span class="n">meta</span>
</span><span id="pCompute-371"><a href="#pCompute-371"><span class="linenos">371</span></a>        <span class="c1"># recover and split image</span>
</span><span id="pCompute-372"><a href="#pCompute-372"><span class="linenos">372</span></a>        <span class="nb">input</span> <span class="o">=</span>  <span class="n">processpipe</span><span class="o">.</span><span class="n">getInputImage</span><span class="p">()</span>
</span><span id="pCompute-373"><a href="#pCompute-373"><span class="linenos">373</span></a>
</span><span id="pCompute-374"><a href="#pCompute-374"><span class="linenos">374</span></a>        <span class="c1"># store last processNode (geometry) and remove it from processpipe</span>
</span><span id="pCompute-375"><a href="#pCompute-375"><span class="linenos">375</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">processpipe</span><span class="o">.</span><span class="n">processNodes</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">process</span><span class="p">,</span><span class="n">hdrCore</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">geometry</span><span class="p">):</span>
</span><span id="pCompute-376"><a href="#pCompute-376"><span class="linenos">376</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">geometryNode</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">processpipe</span><span class="o">.</span><span class="n">processNodes</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> 
</span><span id="pCompute-377"><a href="#pCompute-377"><span class="linenos">377</span></a>
</span><span id="pCompute-378"><a href="#pCompute-378"><span class="linenos">378</span></a>            <span class="c1"># remove geometry node (the last one) </span>
</span><span id="pCompute-379"><a href="#pCompute-379"><span class="linenos">379</span></a>            <span class="n">processpipe</span><span class="o">.</span><span class="n">processNodes</span> <span class="o">=</span> <span class="n">processpipe</span><span class="o">.</span><span class="n">processNodes</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="pCompute-380"><a href="#pCompute-380"><span class="linenos">380</span></a>       
</span><span id="pCompute-381"><a href="#pCompute-381"><span class="linenos">381</span></a>        <span class="c1"># split image and store splited images</span>
</span><span id="pCompute-382"><a href="#pCompute-382"><span class="linenos">382</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">splits</span> <span class="o">=</span> <span class="nb">input</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">nbWidth</span><span class="p">,</span><span class="n">nbHeight</span><span class="p">)</span>
</span><span id="pCompute-383"><a href="#pCompute-383"><span class="linenos">383</span></a>
</span><span id="pCompute-384"><a href="#pCompute-384"><span class="linenos">384</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pool</span> <span class="o">=</span> <span class="n">QThreadPool</span><span class="o">.</span><span class="n">globalInstance</span><span class="p">()</span> 
</span><span id="pCompute-385"><a href="#pCompute-385"><span class="linenos">385</span></a>
</span><span id="pCompute-386"><a href="#pCompute-386"><span class="linenos">386</span></a>        <span class="c1"># duplicate processpipe, set image split and start</span>
</span><span id="pCompute-387"><a href="#pCompute-387"><span class="linenos">387</span></a>        <span class="k">for</span> <span class="n">idxY</span><span class="p">,</span><span class="n">line</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">splits</span><span class="p">):</span>
</span><span id="pCompute-388"><a href="#pCompute-388"><span class="linenos">388</span></a>            <span class="k">for</span> <span class="n">idxX</span><span class="p">,</span><span class="n">split</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">line</span><span class="p">):</span>
</span><span id="pCompute-389"><a href="#pCompute-389"><span class="linenos">389</span></a>                <span class="n">pp</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">processpipe</span><span class="p">)</span>
</span><span id="pCompute-390"><a href="#pCompute-390"><span class="linenos">390</span></a>                <span class="n">pp</span><span class="o">.</span><span class="n">setImage</span><span class="p">(</span><span class="n">split</span><span class="p">)</span>
</span><span id="pCompute-391"><a href="#pCompute-391"><span class="linenos">391</span></a>                <span class="c1"># start compute</span>
</span><span id="pCompute-392"><a href="#pCompute-392"><span class="linenos">392</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">pool</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">pRun</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">pp</span><span class="p">,</span><span class="n">toneMap</span><span class="p">,</span><span class="n">idxX</span><span class="p">,</span><span class="n">idxY</span><span class="p">))</span>
</span><span id="pCompute-393"><a href="#pCompute-393"><span class="linenos">393</span></a>
</span><span id="pCompute-394"><a href="#pCompute-394"><span class="linenos">394</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">endCompute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">idx</span><span class="p">,</span><span class="n">idy</span><span class="p">,</span> <span class="n">split</span><span class="p">):</span>
</span><span id="pCompute-395"><a href="#pCompute-395"><span class="linenos">395</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="pCompute-396"><a href="#pCompute-396"><span class="linenos">396</span></a><span class="sd">        Handle completion of individual split processing.</span>
</span><span id="pCompute-397"><a href="#pCompute-397"><span class="linenos">397</span></a><span class="sd">        </span>
</span><span id="pCompute-398"><a href="#pCompute-398"><span class="linenos">398</span></a><span class="sd">        Called when each split finishes processing. Tracks completion progress,</span>
</span><span id="pCompute-399"><a href="#pCompute-399"><span class="linenos">399</span></a><span class="sd">        updates progress callback, and triggers final merge and geometry</span>
</span><span id="pCompute-400"><a href="#pCompute-400"><span class="linenos">400</span></a><span class="sd">        processing when all splits are complete.</span>
</span><span id="pCompute-401"><a href="#pCompute-401"><span class="linenos">401</span></a><span class="sd">        </span>
</span><span id="pCompute-402"><a href="#pCompute-402"><span class="linenos">402</span></a><span class="sd">        Args:</span>
</span><span id="pCompute-403"><a href="#pCompute-403"><span class="linenos">403</span></a><span class="sd">            idx (int): X-coordinate of completed split</span>
</span><span id="pCompute-404"><a href="#pCompute-404"><span class="linenos">404</span></a><span class="sd">            idy (int): Y-coordinate of completed split</span>
</span><span id="pCompute-405"><a href="#pCompute-405"><span class="linenos">405</span></a><span class="sd">            split (Image): Processed image split result</span>
</span><span id="pCompute-406"><a href="#pCompute-406"><span class="linenos">406</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="pCompute-407"><a href="#pCompute-407"><span class="linenos">407</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">splits</span><span class="p">[</span><span class="n">idy</span><span class="p">][</span><span class="n">idx</span><span class="p">]</span><span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">split</span><span class="p">)</span>
</span><span id="pCompute-408"><a href="#pCompute-408"><span class="linenos">408</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">nbDone</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="pCompute-409"><a href="#pCompute-409"><span class="linenos">409</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">progress</span><span class="p">:</span>
</span><span id="pCompute-410"><a href="#pCompute-410"><span class="linenos">410</span></a>            <span class="n">percent</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nbDone</span><span class="o">*</span><span class="mi">100</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">nbSplits</span><span class="p">))</span><span class="o">+</span><span class="s1">&#39;%&#39;</span>
</span><span id="pCompute-411"><a href="#pCompute-411"><span class="linenos">411</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">progress</span><span class="p">(</span><span class="s1">&#39;HDR image process-pipe computation:&#39;</span><span class="o">+</span><span class="n">percent</span><span class="p">)</span>
</span><span id="pCompute-412"><a href="#pCompute-412"><span class="linenos">412</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">nbDone</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">nbSplits</span><span class="p">:</span>
</span><span id="pCompute-413"><a href="#pCompute-413"><span class="linenos">413</span></a>            <span class="n">res</span> <span class="o">=</span> <span class="n">hdrCore</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">splits</span><span class="p">)</span>
</span><span id="pCompute-414"><a href="#pCompute-414"><span class="linenos">414</span></a>            <span class="c1"># process geometry</span>
</span><span id="pCompute-415"><a href="#pCompute-415"><span class="linenos">415</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">geometryNode</span><span class="p">:</span>
</span><span id="pCompute-416"><a href="#pCompute-416"><span class="linenos">416</span></a>                <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">geometryNode</span><span class="o">.</span><span class="n">process</span><span class="o">.</span><span class="n">compute</span><span class="p">(</span><span class="n">res</span><span class="p">,</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">geometryNode</span><span class="o">.</span><span class="n">params</span><span class="p">)</span>
</span><span id="pCompute-417"><a href="#pCompute-417"><span class="linenos">417</span></a>            <span class="c1"># callBack caller</span>
</span><span id="pCompute-418"><a href="#pCompute-418"><span class="linenos">418</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">callBack</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">meta</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Multi-threaded HDR processing with image splitting for large images.</p>

<p>Manages parallel computation of ProcessPipe operations for HDR display
or export by splitting large images into multiple parts and processing
them concurrently. Provides progress feedback and handles geometry
processing separately at the end for optimal performance.</p>

<p>Processing Workflow:</p>

<ol>
<li>Split input image into grid of smaller sections</li>
<li>Create duplicate ProcessPipes for each split</li>
<li>Process splits in parallel using thread pool</li>
<li>Merge processed splits back into complete image</li>
<li>Apply geometry processing to final merged result</li>
<li>Callback with final processed image</li>
</ol>

<p>Attributes:
    callBack (function): Completion callback function
    progress (function): Progress update callback function
    nbSplits (int): Total number of image splits to process
    nbDone (int): Number of completed split processing operations
    geometryNode (ProcessNode): Geometry processing node for final step
    meta (metadata): Image metadata for preservation</p>

<p>Methods:
    endCompute: Handle split completion and final merge</p>
</div>


                            <div id="pCompute.__init__" class="classattr">
                                        <input id="pCompute.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">pCompute</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">callBack</span>,</span><span class="param">	<span class="n">processpipe</span>,</span><span class="param">	<span class="n">nbWidth</span>,</span><span class="param">	<span class="n">nbHeight</span>,</span><span class="param">	<span class="n">toneMap</span><span class="o">=</span><span class="kc">True</span>,</span><span class="param">	<span class="n">progress</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">meta</span><span class="o">=</span><span class="kc">None</span></span>)</span>

                <label class="view-source-button" for="pCompute.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#pCompute.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="pCompute.__init__-352"><a href="#pCompute.__init__-352"><span class="linenos">352</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">callBack</span><span class="p">,</span> <span class="n">processpipe</span><span class="p">,</span><span class="n">nbWidth</span><span class="p">,</span><span class="n">nbHeight</span><span class="p">,</span> <span class="n">toneMap</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">progress</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">meta</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="pCompute.__init__-353"><a href="#pCompute.__init__-353"><span class="linenos">353</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="pCompute.__init__-354"><a href="#pCompute.__init__-354"><span class="linenos">354</span></a><span class="sd">        Initialize parallel HDR processing with image splitting.</span>
</span><span id="pCompute.__init__-355"><a href="#pCompute.__init__-355"><span class="linenos">355</span></a><span class="sd">        </span>
</span><span id="pCompute.__init__-356"><a href="#pCompute.__init__-356"><span class="linenos">356</span></a><span class="sd">        Args:</span>
</span><span id="pCompute.__init__-357"><a href="#pCompute.__init__-357"><span class="linenos">357</span></a><span class="sd">            callBack (function): Function called when processing completes</span>
</span><span id="pCompute.__init__-358"><a href="#pCompute.__init__-358"><span class="linenos">358</span></a><span class="sd">            processpipe (ProcessPipe): HDR processing pipeline to apply</span>
</span><span id="pCompute.__init__-359"><a href="#pCompute.__init__-359"><span class="linenos">359</span></a><span class="sd">            nbWidth (int): Number of horizontal splits</span>
</span><span id="pCompute.__init__-360"><a href="#pCompute.__init__-360"><span class="linenos">360</span></a><span class="sd">            nbHeight (int): Number of vertical splits  </span>
</span><span id="pCompute.__init__-361"><a href="#pCompute.__init__-361"><span class="linenos">361</span></a><span class="sd">            toneMap (bool): Apply tone mapping to final result</span>
</span><span id="pCompute.__init__-362"><a href="#pCompute.__init__-362"><span class="linenos">362</span></a><span class="sd">            progress (function, optional): Progress callback function</span>
</span><span id="pCompute.__init__-363"><a href="#pCompute.__init__-363"><span class="linenos">363</span></a><span class="sd">            meta (metadata, optional): Image metadata to preserve</span>
</span><span id="pCompute.__init__-364"><a href="#pCompute.__init__-364"><span class="linenos">364</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="pCompute.__init__-365"><a href="#pCompute.__init__-365"><span class="linenos">365</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBack</span> <span class="o">=</span> <span class="n">callBack</span>
</span><span id="pCompute.__init__-366"><a href="#pCompute.__init__-366"><span class="linenos">366</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">progress</span> <span class="o">=</span><span class="n">progress</span>
</span><span id="pCompute.__init__-367"><a href="#pCompute.__init__-367"><span class="linenos">367</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">nbSplits</span> <span class="o">=</span> <span class="n">nbWidth</span><span class="o">*</span><span class="n">nbHeight</span>
</span><span id="pCompute.__init__-368"><a href="#pCompute.__init__-368"><span class="linenos">368</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">nbDone</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="pCompute.__init__-369"><a href="#pCompute.__init__-369"><span class="linenos">369</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">geometryNode</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="pCompute.__init__-370"><a href="#pCompute.__init__-370"><span class="linenos">370</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">meta</span> <span class="o">=</span> <span class="n">meta</span>
</span><span id="pCompute.__init__-371"><a href="#pCompute.__init__-371"><span class="linenos">371</span></a>        <span class="c1"># recover and split image</span>
</span><span id="pCompute.__init__-372"><a href="#pCompute.__init__-372"><span class="linenos">372</span></a>        <span class="nb">input</span> <span class="o">=</span>  <span class="n">processpipe</span><span class="o">.</span><span class="n">getInputImage</span><span class="p">()</span>
</span><span id="pCompute.__init__-373"><a href="#pCompute.__init__-373"><span class="linenos">373</span></a>
</span><span id="pCompute.__init__-374"><a href="#pCompute.__init__-374"><span class="linenos">374</span></a>        <span class="c1"># store last processNode (geometry) and remove it from processpipe</span>
</span><span id="pCompute.__init__-375"><a href="#pCompute.__init__-375"><span class="linenos">375</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">processpipe</span><span class="o">.</span><span class="n">processNodes</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">process</span><span class="p">,</span><span class="n">hdrCore</span><span class="o">.</span><span class="n">processing</span><span class="o">.</span><span class="n">geometry</span><span class="p">):</span>
</span><span id="pCompute.__init__-376"><a href="#pCompute.__init__-376"><span class="linenos">376</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">geometryNode</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">processpipe</span><span class="o">.</span><span class="n">processNodes</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> 
</span><span id="pCompute.__init__-377"><a href="#pCompute.__init__-377"><span class="linenos">377</span></a>
</span><span id="pCompute.__init__-378"><a href="#pCompute.__init__-378"><span class="linenos">378</span></a>            <span class="c1"># remove geometry node (the last one) </span>
</span><span id="pCompute.__init__-379"><a href="#pCompute.__init__-379"><span class="linenos">379</span></a>            <span class="n">processpipe</span><span class="o">.</span><span class="n">processNodes</span> <span class="o">=</span> <span class="n">processpipe</span><span class="o">.</span><span class="n">processNodes</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span><span id="pCompute.__init__-380"><a href="#pCompute.__init__-380"><span class="linenos">380</span></a>       
</span><span id="pCompute.__init__-381"><a href="#pCompute.__init__-381"><span class="linenos">381</span></a>        <span class="c1"># split image and store splited images</span>
</span><span id="pCompute.__init__-382"><a href="#pCompute.__init__-382"><span class="linenos">382</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">splits</span> <span class="o">=</span> <span class="nb">input</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">nbWidth</span><span class="p">,</span><span class="n">nbHeight</span><span class="p">)</span>
</span><span id="pCompute.__init__-383"><a href="#pCompute.__init__-383"><span class="linenos">383</span></a>
</span><span id="pCompute.__init__-384"><a href="#pCompute.__init__-384"><span class="linenos">384</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pool</span> <span class="o">=</span> <span class="n">QThreadPool</span><span class="o">.</span><span class="n">globalInstance</span><span class="p">()</span> 
</span><span id="pCompute.__init__-385"><a href="#pCompute.__init__-385"><span class="linenos">385</span></a>
</span><span id="pCompute.__init__-386"><a href="#pCompute.__init__-386"><span class="linenos">386</span></a>        <span class="c1"># duplicate processpipe, set image split and start</span>
</span><span id="pCompute.__init__-387"><a href="#pCompute.__init__-387"><span class="linenos">387</span></a>        <span class="k">for</span> <span class="n">idxY</span><span class="p">,</span><span class="n">line</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">splits</span><span class="p">):</span>
</span><span id="pCompute.__init__-388"><a href="#pCompute.__init__-388"><span class="linenos">388</span></a>            <span class="k">for</span> <span class="n">idxX</span><span class="p">,</span><span class="n">split</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">line</span><span class="p">):</span>
</span><span id="pCompute.__init__-389"><a href="#pCompute.__init__-389"><span class="linenos">389</span></a>                <span class="n">pp</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">processpipe</span><span class="p">)</span>
</span><span id="pCompute.__init__-390"><a href="#pCompute.__init__-390"><span class="linenos">390</span></a>                <span class="n">pp</span><span class="o">.</span><span class="n">setImage</span><span class="p">(</span><span class="n">split</span><span class="p">)</span>
</span><span id="pCompute.__init__-391"><a href="#pCompute.__init__-391"><span class="linenos">391</span></a>                <span class="c1"># start compute</span>
</span><span id="pCompute.__init__-392"><a href="#pCompute.__init__-392"><span class="linenos">392</span></a>                <span class="bp">self</span><span class="o">.</span><span class="n">pool</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">pRun</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">pp</span><span class="p">,</span><span class="n">toneMap</span><span class="p">,</span><span class="n">idxX</span><span class="p">,</span><span class="n">idxY</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>Initialize parallel HDR processing with image splitting.</p>

<p>Args:
    callBack (function): Function called when processing completes
    processpipe (ProcessPipe): HDR processing pipeline to apply
    nbWidth (int): Number of horizontal splits
    nbHeight (int): Number of vertical splits<br />
    toneMap (bool): Apply tone mapping to final result
    progress (function, optional): Progress callback function
    meta (metadata, optional): Image metadata to preserve</p>
</div>


                            </div>
                            <div id="pCompute.callBack" class="classattr">
                                <div class="attr variable">
            <span class="name">callBack</span>

        
    </div>
    <a class="headerlink" href="#pCompute.callBack"></a>
    
    

                            </div>
                            <div id="pCompute.progress" class="classattr">
                                <div class="attr variable">
            <span class="name">progress</span>

        
    </div>
    <a class="headerlink" href="#pCompute.progress"></a>
    
    

                            </div>
                            <div id="pCompute.nbSplits" class="classattr">
                                <div class="attr variable">
            <span class="name">nbSplits</span>

        
    </div>
    <a class="headerlink" href="#pCompute.nbSplits"></a>
    
    

                            </div>
                            <div id="pCompute.nbDone" class="classattr">
                                <div class="attr variable">
            <span class="name">nbDone</span>

        
    </div>
    <a class="headerlink" href="#pCompute.nbDone"></a>
    
    

                            </div>
                            <div id="pCompute.geometryNode" class="classattr">
                                <div class="attr variable">
            <span class="name">geometryNode</span>

        
    </div>
    <a class="headerlink" href="#pCompute.geometryNode"></a>
    
    

                            </div>
                            <div id="pCompute.meta" class="classattr">
                                <div class="attr variable">
            <span class="name">meta</span>

        
    </div>
    <a class="headerlink" href="#pCompute.meta"></a>
    
    

                            </div>
                            <div id="pCompute.splits" class="classattr">
                                <div class="attr variable">
            <span class="name">splits</span>

        
    </div>
    <a class="headerlink" href="#pCompute.splits"></a>
    
    

                            </div>
                            <div id="pCompute.pool" class="classattr">
                                <div class="attr variable">
            <span class="name">pool</span>

        
    </div>
    <a class="headerlink" href="#pCompute.pool"></a>
    
    

                            </div>
                            <div id="pCompute.endCompute" class="classattr">
                                        <input id="pCompute.endCompute-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">endCompute</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">idx</span>, </span><span class="param"><span class="n">idy</span>, </span><span class="param"><span class="n">split</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="pCompute.endCompute-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#pCompute.endCompute"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="pCompute.endCompute-394"><a href="#pCompute.endCompute-394"><span class="linenos">394</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">endCompute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">idx</span><span class="p">,</span><span class="n">idy</span><span class="p">,</span> <span class="n">split</span><span class="p">):</span>
</span><span id="pCompute.endCompute-395"><a href="#pCompute.endCompute-395"><span class="linenos">395</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="pCompute.endCompute-396"><a href="#pCompute.endCompute-396"><span class="linenos">396</span></a><span class="sd">        Handle completion of individual split processing.</span>
</span><span id="pCompute.endCompute-397"><a href="#pCompute.endCompute-397"><span class="linenos">397</span></a><span class="sd">        </span>
</span><span id="pCompute.endCompute-398"><a href="#pCompute.endCompute-398"><span class="linenos">398</span></a><span class="sd">        Called when each split finishes processing. Tracks completion progress,</span>
</span><span id="pCompute.endCompute-399"><a href="#pCompute.endCompute-399"><span class="linenos">399</span></a><span class="sd">        updates progress callback, and triggers final merge and geometry</span>
</span><span id="pCompute.endCompute-400"><a href="#pCompute.endCompute-400"><span class="linenos">400</span></a><span class="sd">        processing when all splits are complete.</span>
</span><span id="pCompute.endCompute-401"><a href="#pCompute.endCompute-401"><span class="linenos">401</span></a><span class="sd">        </span>
</span><span id="pCompute.endCompute-402"><a href="#pCompute.endCompute-402"><span class="linenos">402</span></a><span class="sd">        Args:</span>
</span><span id="pCompute.endCompute-403"><a href="#pCompute.endCompute-403"><span class="linenos">403</span></a><span class="sd">            idx (int): X-coordinate of completed split</span>
</span><span id="pCompute.endCompute-404"><a href="#pCompute.endCompute-404"><span class="linenos">404</span></a><span class="sd">            idy (int): Y-coordinate of completed split</span>
</span><span id="pCompute.endCompute-405"><a href="#pCompute.endCompute-405"><span class="linenos">405</span></a><span class="sd">            split (Image): Processed image split result</span>
</span><span id="pCompute.endCompute-406"><a href="#pCompute.endCompute-406"><span class="linenos">406</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="pCompute.endCompute-407"><a href="#pCompute.endCompute-407"><span class="linenos">407</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">splits</span><span class="p">[</span><span class="n">idy</span><span class="p">][</span><span class="n">idx</span><span class="p">]</span><span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">split</span><span class="p">)</span>
</span><span id="pCompute.endCompute-408"><a href="#pCompute.endCompute-408"><span class="linenos">408</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">nbDone</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="pCompute.endCompute-409"><a href="#pCompute.endCompute-409"><span class="linenos">409</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">progress</span><span class="p">:</span>
</span><span id="pCompute.endCompute-410"><a href="#pCompute.endCompute-410"><span class="linenos">410</span></a>            <span class="n">percent</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">nbDone</span><span class="o">*</span><span class="mi">100</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">nbSplits</span><span class="p">))</span><span class="o">+</span><span class="s1">&#39;%&#39;</span>
</span><span id="pCompute.endCompute-411"><a href="#pCompute.endCompute-411"><span class="linenos">411</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">progress</span><span class="p">(</span><span class="s1">&#39;HDR image process-pipe computation:&#39;</span><span class="o">+</span><span class="n">percent</span><span class="p">)</span>
</span><span id="pCompute.endCompute-412"><a href="#pCompute.endCompute-412"><span class="linenos">412</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">nbDone</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">nbSplits</span><span class="p">:</span>
</span><span id="pCompute.endCompute-413"><a href="#pCompute.endCompute-413"><span class="linenos">413</span></a>            <span class="n">res</span> <span class="o">=</span> <span class="n">hdrCore</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">Image</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">splits</span><span class="p">)</span>
</span><span id="pCompute.endCompute-414"><a href="#pCompute.endCompute-414"><span class="linenos">414</span></a>            <span class="c1"># process geometry</span>
</span><span id="pCompute.endCompute-415"><a href="#pCompute.endCompute-415"><span class="linenos">415</span></a>            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">geometryNode</span><span class="p">:</span>
</span><span id="pCompute.endCompute-416"><a href="#pCompute.endCompute-416"><span class="linenos">416</span></a>                <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">geometryNode</span><span class="o">.</span><span class="n">process</span><span class="o">.</span><span class="n">compute</span><span class="p">(</span><span class="n">res</span><span class="p">,</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">geometryNode</span><span class="o">.</span><span class="n">params</span><span class="p">)</span>
</span><span id="pCompute.endCompute-417"><a href="#pCompute.endCompute-417"><span class="linenos">417</span></a>            <span class="c1"># callBack caller</span>
</span><span id="pCompute.endCompute-418"><a href="#pCompute.endCompute-418"><span class="linenos">418</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">callBack</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">meta</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Handle completion of individual split processing.</p>

<p>Called when each split finishes processing. Tracks completion progress,
updates progress callback, and triggers final merge and geometry
processing when all splits are complete.</p>

<p>Args:
    idx (int): X-coordinate of completed split
    idy (int): Y-coordinate of completed split
    split (Image): Processed image split result</p>
</div>


                            </div>
                </section>
                <section id="pRun">
                            <input id="pRun-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">pRun</span><wbr>(<span class="base">PyQt5.QtCore.QRunnable</span>):

                <label class="view-source-button" for="pRun-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#pRun"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="pRun-422"><a href="#pRun-422"><span class="linenos">422</span></a><span class="k">class</span><span class="w"> </span><span class="nc">pRun</span><span class="p">(</span><span class="n">QRunnable</span><span class="p">):</span>
</span><span id="pRun-423"><a href="#pRun-423"><span class="linenos">423</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="pRun-424"><a href="#pRun-424"><span class="linenos">424</span></a><span class="sd">    Worker thread for processing individual image splits in parallel.</span>
</span><span id="pRun-425"><a href="#pRun-425"><span class="linenos">425</span></a><span class="sd">    </span>
</span><span id="pRun-426"><a href="#pRun-426"><span class="linenos">426</span></a><span class="sd">    Executes ProcessPipe computation on a single image split, supporting</span>
</span><span id="pRun-427"><a href="#pRun-427"><span class="linenos">427</span></a><span class="sd">    both tone-mapped and HDR output modes. Reports completion back to</span>
</span><span id="pRun-428"><a href="#pRun-428"><span class="linenos">428</span></a><span class="sd">    parent pCompute coordinator.</span>
</span><span id="pRun-429"><a href="#pRun-429"><span class="linenos">429</span></a><span class="sd">    </span>
</span><span id="pRun-430"><a href="#pRun-430"><span class="linenos">430</span></a><span class="sd">    Attributes:</span>
</span><span id="pRun-431"><a href="#pRun-431"><span class="linenos">431</span></a><span class="sd">        parent (pCompute): Parent coordinator for completion callback</span>
</span><span id="pRun-432"><a href="#pRun-432"><span class="linenos">432</span></a><span class="sd">        processpipe (ProcessPipe): Processing pipeline to apply to split</span>
</span><span id="pRun-433"><a href="#pRun-433"><span class="linenos">433</span></a><span class="sd">        idx (tuple): (x, y) coordinates of split in grid</span>
</span><span id="pRun-434"><a href="#pRun-434"><span class="linenos">434</span></a><span class="sd">        toneMap (bool): Apply tone mapping to result</span>
</span><span id="pRun-435"><a href="#pRun-435"><span class="linenos">435</span></a><span class="sd">    </span>
</span><span id="pRun-436"><a href="#pRun-436"><span class="linenos">436</span></a><span class="sd">    Methods:</span>
</span><span id="pRun-437"><a href="#pRun-437"><span class="linenos">437</span></a><span class="sd">        run: Main thread execution for split processing</span>
</span><span id="pRun-438"><a href="#pRun-438"><span class="linenos">438</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="pRun-439"><a href="#pRun-439"><span class="linenos">439</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">parent</span><span class="p">,</span><span class="n">processpipe</span><span class="p">,</span><span class="n">toneMap</span><span class="p">,</span> <span class="n">idxX</span><span class="p">,</span><span class="n">idxY</span><span class="p">):</span>
</span><span id="pRun-440"><a href="#pRun-440"><span class="linenos">440</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="pRun-441"><a href="#pRun-441"><span class="linenos">441</span></a><span class="sd">        Initialize split processing worker thread.</span>
</span><span id="pRun-442"><a href="#pRun-442"><span class="linenos">442</span></a><span class="sd">        </span>
</span><span id="pRun-443"><a href="#pRun-443"><span class="linenos">443</span></a><span class="sd">        Args:</span>
</span><span id="pRun-444"><a href="#pRun-444"><span class="linenos">444</span></a><span class="sd">            parent (pCompute): Parent coordinator instance</span>
</span><span id="pRun-445"><a href="#pRun-445"><span class="linenos">445</span></a><span class="sd">            processpipe (ProcessPipe): Processing pipeline to apply</span>
</span><span id="pRun-446"><a href="#pRun-446"><span class="linenos">446</span></a><span class="sd">            toneMap (bool): Apply tone mapping to result</span>
</span><span id="pRun-447"><a href="#pRun-447"><span class="linenos">447</span></a><span class="sd">            idxX (int): X-coordinate of split in grid</span>
</span><span id="pRun-448"><a href="#pRun-448"><span class="linenos">448</span></a><span class="sd">            idxY (int): Y-coordinate of split in grid</span>
</span><span id="pRun-449"><a href="#pRun-449"><span class="linenos">449</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="pRun-450"><a href="#pRun-450"><span class="linenos">450</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="pRun-451"><a href="#pRun-451"><span class="linenos">451</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
</span><span id="pRun-452"><a href="#pRun-452"><span class="linenos">452</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">processpipe</span> <span class="o">=</span> <span class="n">processpipe</span>
</span><span id="pRun-453"><a href="#pRun-453"><span class="linenos">453</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">idx</span> <span class="o">=</span> <span class="p">(</span><span class="n">idxX</span><span class="p">,</span><span class="n">idxY</span><span class="p">)</span>
</span><span id="pRun-454"><a href="#pRun-454"><span class="linenos">454</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">toneMap</span> <span class="o">=</span> <span class="n">toneMap</span>
</span><span id="pRun-455"><a href="#pRun-455"><span class="linenos">455</span></a>
</span><span id="pRun-456"><a href="#pRun-456"><span class="linenos">456</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="pRun-457"><a href="#pRun-457"><span class="linenos">457</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="pRun-458"><a href="#pRun-458"><span class="linenos">458</span></a><span class="sd">        Main thread execution for split processing.</span>
</span><span id="pRun-459"><a href="#pRun-459"><span class="linenos">459</span></a><span class="sd">        </span>
</span><span id="pRun-460"><a href="#pRun-460"><span class="linenos">460</span></a><span class="sd">        Executes ProcessPipe computation on the assigned image split</span>
</span><span id="pRun-461"><a href="#pRun-461"><span class="linenos">461</span></a><span class="sd">        and reports completion with processed result to parent coordinator.</span>
</span><span id="pRun-462"><a href="#pRun-462"><span class="linenos">462</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="pRun-463"><a href="#pRun-463"><span class="linenos">463</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">processpipe</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span>
</span><span id="pRun-464"><a href="#pRun-464"><span class="linenos">464</span></a>        <span class="n">pRes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">processpipe</span><span class="o">.</span><span class="n">getImage</span><span class="p">(</span><span class="n">toneMap</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">toneMap</span><span class="p">)</span>
</span><span id="pRun-465"><a href="#pRun-465"><span class="linenos">465</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">endCompute</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">idx</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="bp">self</span><span class="o">.</span><span class="n">idx</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">pRes</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Worker thread for processing individual image splits in parallel.</p>

<p>Executes ProcessPipe computation on a single image split, supporting
both tone-mapped and HDR output modes. Reports completion back to
parent pCompute coordinator.</p>

<p>Attributes:
    parent (pCompute): Parent coordinator for completion callback
    processpipe (ProcessPipe): Processing pipeline to apply to split
    idx (tuple): (x, y) coordinates of split in grid
    toneMap (bool): Apply tone mapping to result</p>

<p>Methods:
    run: Main thread execution for split processing</p>
</div>


                            <div id="pRun.__init__" class="classattr">
                                        <input id="pRun.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">pRun</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">parent</span>, </span><span class="param"><span class="n">processpipe</span>, </span><span class="param"><span class="n">toneMap</span>, </span><span class="param"><span class="n">idxX</span>, </span><span class="param"><span class="n">idxY</span></span>)</span>

                <label class="view-source-button" for="pRun.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#pRun.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="pRun.__init__-439"><a href="#pRun.__init__-439"><span class="linenos">439</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">parent</span><span class="p">,</span><span class="n">processpipe</span><span class="p">,</span><span class="n">toneMap</span><span class="p">,</span> <span class="n">idxX</span><span class="p">,</span><span class="n">idxY</span><span class="p">):</span>
</span><span id="pRun.__init__-440"><a href="#pRun.__init__-440"><span class="linenos">440</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="pRun.__init__-441"><a href="#pRun.__init__-441"><span class="linenos">441</span></a><span class="sd">        Initialize split processing worker thread.</span>
</span><span id="pRun.__init__-442"><a href="#pRun.__init__-442"><span class="linenos">442</span></a><span class="sd">        </span>
</span><span id="pRun.__init__-443"><a href="#pRun.__init__-443"><span class="linenos">443</span></a><span class="sd">        Args:</span>
</span><span id="pRun.__init__-444"><a href="#pRun.__init__-444"><span class="linenos">444</span></a><span class="sd">            parent (pCompute): Parent coordinator instance</span>
</span><span id="pRun.__init__-445"><a href="#pRun.__init__-445"><span class="linenos">445</span></a><span class="sd">            processpipe (ProcessPipe): Processing pipeline to apply</span>
</span><span id="pRun.__init__-446"><a href="#pRun.__init__-446"><span class="linenos">446</span></a><span class="sd">            toneMap (bool): Apply tone mapping to result</span>
</span><span id="pRun.__init__-447"><a href="#pRun.__init__-447"><span class="linenos">447</span></a><span class="sd">            idxX (int): X-coordinate of split in grid</span>
</span><span id="pRun.__init__-448"><a href="#pRun.__init__-448"><span class="linenos">448</span></a><span class="sd">            idxY (int): Y-coordinate of split in grid</span>
</span><span id="pRun.__init__-449"><a href="#pRun.__init__-449"><span class="linenos">449</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="pRun.__init__-450"><a href="#pRun.__init__-450"><span class="linenos">450</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="pRun.__init__-451"><a href="#pRun.__init__-451"><span class="linenos">451</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
</span><span id="pRun.__init__-452"><a href="#pRun.__init__-452"><span class="linenos">452</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">processpipe</span> <span class="o">=</span> <span class="n">processpipe</span>
</span><span id="pRun.__init__-453"><a href="#pRun.__init__-453"><span class="linenos">453</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">idx</span> <span class="o">=</span> <span class="p">(</span><span class="n">idxX</span><span class="p">,</span><span class="n">idxY</span><span class="p">)</span>
</span><span id="pRun.__init__-454"><a href="#pRun.__init__-454"><span class="linenos">454</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">toneMap</span> <span class="o">=</span> <span class="n">toneMap</span>
</span></pre></div>


            <div class="docstring"><p>Initialize split processing worker thread.</p>

<p>Args:
    parent (pCompute): Parent coordinator instance
    processpipe (ProcessPipe): Processing pipeline to apply
    toneMap (bool): Apply tone mapping to result
    idxX (int): X-coordinate of split in grid
    idxY (int): Y-coordinate of split in grid</p>
</div>


                            </div>
                            <div id="pRun.parent" class="classattr">
                                <div class="attr variable">
            <span class="name">parent</span>

        
    </div>
    <a class="headerlink" href="#pRun.parent"></a>
    
    

                            </div>
                            <div id="pRun.processpipe" class="classattr">
                                <div class="attr variable">
            <span class="name">processpipe</span>

        
    </div>
    <a class="headerlink" href="#pRun.processpipe"></a>
    
    

                            </div>
                            <div id="pRun.idx" class="classattr">
                                <div class="attr variable">
            <span class="name">idx</span>

        
    </div>
    <a class="headerlink" href="#pRun.idx"></a>
    
    

                            </div>
                            <div id="pRun.toneMap" class="classattr">
                                <div class="attr variable">
            <span class="name">toneMap</span>

        
    </div>
    <a class="headerlink" href="#pRun.toneMap"></a>
    
    

                            </div>
                            <div id="pRun.run" class="classattr">
                                        <input id="pRun.run-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">run</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="pRun.run-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#pRun.run"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="pRun.run-456"><a href="#pRun.run-456"><span class="linenos">456</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="pRun.run-457"><a href="#pRun.run-457"><span class="linenos">457</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="pRun.run-458"><a href="#pRun.run-458"><span class="linenos">458</span></a><span class="sd">        Main thread execution for split processing.</span>
</span><span id="pRun.run-459"><a href="#pRun.run-459"><span class="linenos">459</span></a><span class="sd">        </span>
</span><span id="pRun.run-460"><a href="#pRun.run-460"><span class="linenos">460</span></a><span class="sd">        Executes ProcessPipe computation on the assigned image split</span>
</span><span id="pRun.run-461"><a href="#pRun.run-461"><span class="linenos">461</span></a><span class="sd">        and reports completion with processed result to parent coordinator.</span>
</span><span id="pRun.run-462"><a href="#pRun.run-462"><span class="linenos">462</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="pRun.run-463"><a href="#pRun.run-463"><span class="linenos">463</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">processpipe</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span>
</span><span id="pRun.run-464"><a href="#pRun.run-464"><span class="linenos">464</span></a>        <span class="n">pRes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">processpipe</span><span class="o">.</span><span class="n">getImage</span><span class="p">(</span><span class="n">toneMap</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">toneMap</span><span class="p">)</span>
</span><span id="pRun.run-465"><a href="#pRun.run-465"><span class="linenos">465</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">endCompute</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">idx</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="bp">self</span><span class="o">.</span><span class="n">idx</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">pRes</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Main thread execution for split processing.</p>

<p>Executes ProcessPipe computation on the assigned image split
and reports completion with processed result to parent coordinator.</p>
</div>


                            </div>
                </section>
                <section id="cCompute">
                            <input id="cCompute-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">cCompute</span>:

                <label class="view-source-button" for="cCompute-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#cCompute"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="cCompute-472"><a href="#cCompute-472"><span class="linenos">472</span></a><span class="k">class</span><span class="w"> </span><span class="nc">cCompute</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
</span><span id="cCompute-473"><a href="#cCompute-473"><span class="linenos">473</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="cCompute-474"><a href="#cCompute-474"><span class="linenos">474</span></a><span class="sd">    C++ accelerated HDR processing for high-performance computation.</span>
</span><span id="cCompute-475"><a href="#cCompute-475"><span class="linenos">475</span></a><span class="sd">    </span>
</span><span id="cCompute-476"><a href="#cCompute-476"><span class="linenos">476</span></a><span class="sd">    Provides hardware-accelerated HDR processing using C++ backend</span>
</span><span id="cCompute-477"><a href="#cCompute-477"><span class="linenos">477</span></a><span class="sd">    for improved performance on large images or complex operations.</span>
</span><span id="cCompute-478"><a href="#cCompute-478"><span class="linenos">478</span></a><span class="sd">    Uses single-threaded execution with optimized C++ implementation.</span>
</span><span id="cCompute-479"><a href="#cCompute-479"><span class="linenos">479</span></a><span class="sd">    </span>
</span><span id="cCompute-480"><a href="#cCompute-480"><span class="linenos">480</span></a><span class="sd">    Attributes:</span>
</span><span id="cCompute-481"><a href="#cCompute-481"><span class="linenos">481</span></a><span class="sd">        callBack (function): Completion callback function</span>
</span><span id="cCompute-482"><a href="#cCompute-482"><span class="linenos">482</span></a><span class="sd">        progress (function): Progress update callback function</span>
</span><span id="cCompute-483"><a href="#cCompute-483"><span class="linenos">483</span></a><span class="sd">        pool (QThreadPool): Qt thread pool for worker management</span>
</span><span id="cCompute-484"><a href="#cCompute-484"><span class="linenos">484</span></a><span class="sd">    </span>
</span><span id="cCompute-485"><a href="#cCompute-485"><span class="linenos">485</span></a><span class="sd">    Methods:</span>
</span><span id="cCompute-486"><a href="#cCompute-486"><span class="linenos">486</span></a><span class="sd">        endCompute: Handle processing completion</span>
</span><span id="cCompute-487"><a href="#cCompute-487"><span class="linenos">487</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="cCompute-488"><a href="#cCompute-488"><span class="linenos">488</span></a>
</span><span id="cCompute-489"><a href="#cCompute-489"><span class="linenos">489</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">callBack</span><span class="p">,</span> <span class="n">processpipe</span><span class="p">,</span> <span class="n">toneMap</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">progress</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="cCompute-490"><a href="#cCompute-490"><span class="linenos">490</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="cCompute-491"><a href="#cCompute-491"><span class="linenos">491</span></a><span class="sd">        Initialize C++ accelerated HDR processing.</span>
</span><span id="cCompute-492"><a href="#cCompute-492"><span class="linenos">492</span></a><span class="sd">        </span>
</span><span id="cCompute-493"><a href="#cCompute-493"><span class="linenos">493</span></a><span class="sd">        Args:</span>
</span><span id="cCompute-494"><a href="#cCompute-494"><span class="linenos">494</span></a><span class="sd">            callBack (function): Function called when processing completes</span>
</span><span id="cCompute-495"><a href="#cCompute-495"><span class="linenos">495</span></a><span class="sd">            processpipe (ProcessPipe): HDR processing pipeline to execute</span>
</span><span id="cCompute-496"><a href="#cCompute-496"><span class="linenos">496</span></a><span class="sd">            toneMap (bool): Apply tone mapping to result</span>
</span><span id="cCompute-497"><a href="#cCompute-497"><span class="linenos">497</span></a><span class="sd">            progress (function, optional): Progress callback function</span>
</span><span id="cCompute-498"><a href="#cCompute-498"><span class="linenos">498</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="cCompute-499"><a href="#cCompute-499"><span class="linenos">499</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBack</span> <span class="o">=</span> <span class="n">callBack</span>
</span><span id="cCompute-500"><a href="#cCompute-500"><span class="linenos">500</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">progress</span> <span class="o">=</span><span class="n">progress</span>
</span><span id="cCompute-501"><a href="#cCompute-501"><span class="linenos">501</span></a>
</span><span id="cCompute-502"><a href="#cCompute-502"><span class="linenos">502</span></a>        <span class="c1"># recover image</span>
</span><span id="cCompute-503"><a href="#cCompute-503"><span class="linenos">503</span></a>        <span class="nb">input</span> <span class="o">=</span>  <span class="n">processpipe</span><span class="o">.</span><span class="n">getInputImage</span><span class="p">()</span>
</span><span id="cCompute-504"><a href="#cCompute-504"><span class="linenos">504</span></a>
</span><span id="cCompute-505"><a href="#cCompute-505"><span class="linenos">505</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pool</span> <span class="o">=</span> <span class="n">QThreadPool</span><span class="o">.</span><span class="n">globalInstance</span><span class="p">()</span> 
</span><span id="cCompute-506"><a href="#cCompute-506"><span class="linenos">506</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pool</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">cRun</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">processpipe</span><span class="p">,</span><span class="n">toneMap</span><span class="p">))</span>
</span><span id="cCompute-507"><a href="#cCompute-507"><span class="linenos">507</span></a>
</span><span id="cCompute-508"><a href="#cCompute-508"><span class="linenos">508</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">endCompute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">):</span>
</span><span id="cCompute-509"><a href="#cCompute-509"><span class="linenos">509</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="cCompute-510"><a href="#cCompute-510"><span class="linenos">510</span></a><span class="sd">        Handle processing completion and deliver result.</span>
</span><span id="cCompute-511"><a href="#cCompute-511"><span class="linenos">511</span></a><span class="sd">        </span>
</span><span id="cCompute-512"><a href="#cCompute-512"><span class="linenos">512</span></a><span class="sd">        Args:</span>
</span><span id="cCompute-513"><a href="#cCompute-513"><span class="linenos">513</span></a><span class="sd">            img (Image): Processed HDR image result</span>
</span><span id="cCompute-514"><a href="#cCompute-514"><span class="linenos">514</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="cCompute-515"><a href="#cCompute-515"><span class="linenos">515</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBack</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>C++ accelerated HDR processing for high-performance computation.</p>

<p>Provides hardware-accelerated HDR processing using C++ backend
for improved performance on large images or complex operations.
Uses single-threaded execution with optimized C++ implementation.</p>

<p>Attributes:
    callBack (function): Completion callback function
    progress (function): Progress update callback function
    pool (QThreadPool): Qt thread pool for worker management</p>

<p>Methods:
    endCompute: Handle processing completion</p>
</div>


                            <div id="cCompute.__init__" class="classattr">
                                        <input id="cCompute.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">cCompute</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">callBack</span>, </span><span class="param"><span class="n">processpipe</span>, </span><span class="param"><span class="n">toneMap</span><span class="o">=</span><span class="kc">True</span>, </span><span class="param"><span class="n">progress</span><span class="o">=</span><span class="kc">None</span></span>)</span>

                <label class="view-source-button" for="cCompute.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#cCompute.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="cCompute.__init__-489"><a href="#cCompute.__init__-489"><span class="linenos">489</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">callBack</span><span class="p">,</span> <span class="n">processpipe</span><span class="p">,</span> <span class="n">toneMap</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">progress</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="cCompute.__init__-490"><a href="#cCompute.__init__-490"><span class="linenos">490</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="cCompute.__init__-491"><a href="#cCompute.__init__-491"><span class="linenos">491</span></a><span class="sd">        Initialize C++ accelerated HDR processing.</span>
</span><span id="cCompute.__init__-492"><a href="#cCompute.__init__-492"><span class="linenos">492</span></a><span class="sd">        </span>
</span><span id="cCompute.__init__-493"><a href="#cCompute.__init__-493"><span class="linenos">493</span></a><span class="sd">        Args:</span>
</span><span id="cCompute.__init__-494"><a href="#cCompute.__init__-494"><span class="linenos">494</span></a><span class="sd">            callBack (function): Function called when processing completes</span>
</span><span id="cCompute.__init__-495"><a href="#cCompute.__init__-495"><span class="linenos">495</span></a><span class="sd">            processpipe (ProcessPipe): HDR processing pipeline to execute</span>
</span><span id="cCompute.__init__-496"><a href="#cCompute.__init__-496"><span class="linenos">496</span></a><span class="sd">            toneMap (bool): Apply tone mapping to result</span>
</span><span id="cCompute.__init__-497"><a href="#cCompute.__init__-497"><span class="linenos">497</span></a><span class="sd">            progress (function, optional): Progress callback function</span>
</span><span id="cCompute.__init__-498"><a href="#cCompute.__init__-498"><span class="linenos">498</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="cCompute.__init__-499"><a href="#cCompute.__init__-499"><span class="linenos">499</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBack</span> <span class="o">=</span> <span class="n">callBack</span>
</span><span id="cCompute.__init__-500"><a href="#cCompute.__init__-500"><span class="linenos">500</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">progress</span> <span class="o">=</span><span class="n">progress</span>
</span><span id="cCompute.__init__-501"><a href="#cCompute.__init__-501"><span class="linenos">501</span></a>
</span><span id="cCompute.__init__-502"><a href="#cCompute.__init__-502"><span class="linenos">502</span></a>        <span class="c1"># recover image</span>
</span><span id="cCompute.__init__-503"><a href="#cCompute.__init__-503"><span class="linenos">503</span></a>        <span class="nb">input</span> <span class="o">=</span>  <span class="n">processpipe</span><span class="o">.</span><span class="n">getInputImage</span><span class="p">()</span>
</span><span id="cCompute.__init__-504"><a href="#cCompute.__init__-504"><span class="linenos">504</span></a>
</span><span id="cCompute.__init__-505"><a href="#cCompute.__init__-505"><span class="linenos">505</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pool</span> <span class="o">=</span> <span class="n">QThreadPool</span><span class="o">.</span><span class="n">globalInstance</span><span class="p">()</span> 
</span><span id="cCompute.__init__-506"><a href="#cCompute.__init__-506"><span class="linenos">506</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pool</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">cRun</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">processpipe</span><span class="p">,</span><span class="n">toneMap</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>Initialize C++ accelerated HDR processing.</p>

<p>Args:
    callBack (function): Function called when processing completes
    processpipe (ProcessPipe): HDR processing pipeline to execute
    toneMap (bool): Apply tone mapping to result
    progress (function, optional): Progress callback function</p>
</div>


                            </div>
                            <div id="cCompute.callBack" class="classattr">
                                <div class="attr variable">
            <span class="name">callBack</span>

        
    </div>
    <a class="headerlink" href="#cCompute.callBack"></a>
    
    

                            </div>
                            <div id="cCompute.progress" class="classattr">
                                <div class="attr variable">
            <span class="name">progress</span>

        
    </div>
    <a class="headerlink" href="#cCompute.progress"></a>
    
    

                            </div>
                            <div id="cCompute.pool" class="classattr">
                                <div class="attr variable">
            <span class="name">pool</span>

        
    </div>
    <a class="headerlink" href="#cCompute.pool"></a>
    
    

                            </div>
                            <div id="cCompute.endCompute" class="classattr">
                                        <input id="cCompute.endCompute-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">endCompute</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">img</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="cCompute.endCompute-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#cCompute.endCompute"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="cCompute.endCompute-508"><a href="#cCompute.endCompute-508"><span class="linenos">508</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">endCompute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">):</span>
</span><span id="cCompute.endCompute-509"><a href="#cCompute.endCompute-509"><span class="linenos">509</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="cCompute.endCompute-510"><a href="#cCompute.endCompute-510"><span class="linenos">510</span></a><span class="sd">        Handle processing completion and deliver result.</span>
</span><span id="cCompute.endCompute-511"><a href="#cCompute.endCompute-511"><span class="linenos">511</span></a><span class="sd">        </span>
</span><span id="cCompute.endCompute-512"><a href="#cCompute.endCompute-512"><span class="linenos">512</span></a><span class="sd">        Args:</span>
</span><span id="cCompute.endCompute-513"><a href="#cCompute.endCompute-513"><span class="linenos">513</span></a><span class="sd">            img (Image): Processed HDR image result</span>
</span><span id="cCompute.endCompute-514"><a href="#cCompute.endCompute-514"><span class="linenos">514</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="cCompute.endCompute-515"><a href="#cCompute.endCompute-515"><span class="linenos">515</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">callBack</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Handle processing completion and deliver result.</p>

<p>Args:
    img (Image): Processed HDR image result</p>
</div>


                            </div>
                </section>
                <section id="cRun">
                            <input id="cRun-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">cRun</span><wbr>(<span class="base">PyQt5.QtCore.QRunnable</span>):

                <label class="view-source-button" for="cRun-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#cRun"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="cRun-519"><a href="#cRun-519"><span class="linenos">519</span></a><span class="k">class</span><span class="w"> </span><span class="nc">cRun</span><span class="p">(</span><span class="n">QRunnable</span><span class="p">):</span>
</span><span id="cRun-520"><a href="#cRun-520"><span class="linenos">520</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="cRun-521"><a href="#cRun-521"><span class="linenos">521</span></a><span class="sd">    Worker thread for C++ accelerated HDR processing execution.</span>
</span><span id="cRun-522"><a href="#cRun-522"><span class="linenos">522</span></a><span class="sd">    </span>
</span><span id="cRun-523"><a href="#cRun-523"><span class="linenos">523</span></a><span class="sd">    Executes ProcessPipe computation using C++ backend acceleration</span>
</span><span id="cRun-524"><a href="#cRun-524"><span class="linenos">524</span></a><span class="sd">    for improved performance. Handles input image copying and result</span>
</span><span id="cRun-525"><a href="#cRun-525"><span class="linenos">525</span></a><span class="sd">    delivery to parent coordinator.</span>
</span><span id="cRun-526"><a href="#cRun-526"><span class="linenos">526</span></a><span class="sd">    </span>
</span><span id="cRun-527"><a href="#cRun-527"><span class="linenos">527</span></a><span class="sd">    Attributes:</span>
</span><span id="cRun-528"><a href="#cRun-528"><span class="linenos">528</span></a><span class="sd">        parent (cCompute): Parent coordinator for completion callback</span>
</span><span id="cRun-529"><a href="#cRun-529"><span class="linenos">529</span></a><span class="sd">        processpipe (ProcessPipe): Processing pipeline to execute</span>
</span><span id="cRun-530"><a href="#cRun-530"><span class="linenos">530</span></a><span class="sd">        toneMap (bool): Apply tone mapping to result</span>
</span><span id="cRun-531"><a href="#cRun-531"><span class="linenos">531</span></a><span class="sd">    </span>
</span><span id="cRun-532"><a href="#cRun-532"><span class="linenos">532</span></a><span class="sd">    Methods:</span>
</span><span id="cRun-533"><a href="#cRun-533"><span class="linenos">533</span></a><span class="sd">        run: Main thread execution with C++ acceleration</span>
</span><span id="cRun-534"><a href="#cRun-534"><span class="linenos">534</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="cRun-535"><a href="#cRun-535"><span class="linenos">535</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">parent</span><span class="p">,</span><span class="n">processpipe</span><span class="p">,</span><span class="n">toneMap</span><span class="p">):</span>
</span><span id="cRun-536"><a href="#cRun-536"><span class="linenos">536</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="cRun-537"><a href="#cRun-537"><span class="linenos">537</span></a><span class="sd">        Initialize C++ processing worker thread.</span>
</span><span id="cRun-538"><a href="#cRun-538"><span class="linenos">538</span></a><span class="sd">        </span>
</span><span id="cRun-539"><a href="#cRun-539"><span class="linenos">539</span></a><span class="sd">        Args:</span>
</span><span id="cRun-540"><a href="#cRun-540"><span class="linenos">540</span></a><span class="sd">            parent (cCompute): Parent coordinator instance</span>
</span><span id="cRun-541"><a href="#cRun-541"><span class="linenos">541</span></a><span class="sd">            processpipe (ProcessPipe): Processing pipeline to execute</span>
</span><span id="cRun-542"><a href="#cRun-542"><span class="linenos">542</span></a><span class="sd">            toneMap (bool): Apply tone mapping to result</span>
</span><span id="cRun-543"><a href="#cRun-543"><span class="linenos">543</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="cRun-544"><a href="#cRun-544"><span class="linenos">544</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="cRun-545"><a href="#cRun-545"><span class="linenos">545</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
</span><span id="cRun-546"><a href="#cRun-546"><span class="linenos">546</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">processpipe</span> <span class="o">=</span> <span class="n">processpipe</span>
</span><span id="cRun-547"><a href="#cRun-547"><span class="linenos">547</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">toneMap</span> <span class="o">=</span> <span class="n">toneMap</span>
</span><span id="cRun-548"><a href="#cRun-548"><span class="linenos">548</span></a>
</span><span id="cRun-549"><a href="#cRun-549"><span class="linenos">549</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="cRun-550"><a href="#cRun-550"><span class="linenos">550</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="cRun-551"><a href="#cRun-551"><span class="linenos">551</span></a><span class="sd">        Main thread execution with C++ acceleration.</span>
</span><span id="cRun-552"><a href="#cRun-552"><span class="linenos">552</span></a><span class="sd">        </span>
</span><span id="cRun-553"><a href="#cRun-553"><span class="linenos">553</span></a><span class="sd">        Executes ProcessPipe computation using C++ backend (hdrCore.coreC)</span>
</span><span id="cRun-554"><a href="#cRun-554"><span class="linenos">554</span></a><span class="sd">        for improved performance. Copies input image, processes through</span>
</span><span id="cRun-555"><a href="#cRun-555"><span class="linenos">555</span></a><span class="sd">        C++ pipeline, and reports completion to parent coordinator.</span>
</span><span id="cRun-556"><a href="#cRun-556"><span class="linenos">556</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="cRun-557"><a href="#cRun-557"><span class="linenos">557</span></a>        <span class="n">img</span>  <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">processpipe</span><span class="o">.</span><span class="n">getInputImage</span><span class="p">())</span>
</span><span id="cRun-558"><a href="#cRun-558"><span class="linenos">558</span></a>        <span class="n">imgRes</span> <span class="o">=</span> <span class="n">hdrCore</span><span class="o">.</span><span class="n">coreC</span><span class="o">.</span><span class="n">coreCcompute</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">processpipe</span><span class="p">)</span>
</span><span id="cRun-559"><a href="#cRun-559"><span class="linenos">559</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">processpipe</span><span class="o">.</span><span class="n">setOutput</span><span class="p">(</span><span class="n">imgRes</span><span class="p">)</span>
</span><span id="cRun-560"><a href="#cRun-560"><span class="linenos">560</span></a>
</span><span id="cRun-561"><a href="#cRun-561"><span class="linenos">561</span></a>        <span class="n">pRes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">processpipe</span><span class="o">.</span><span class="n">getImage</span><span class="p">(</span><span class="n">toneMap</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">toneMap</span><span class="p">)</span>
</span><span id="cRun-562"><a href="#cRun-562"><span class="linenos">562</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">endCompute</span><span class="p">(</span><span class="n">pRes</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Worker thread for C++ accelerated HDR processing execution.</p>

<p>Executes ProcessPipe computation using C++ backend acceleration
for improved performance. Handles input image copying and result
delivery to parent coordinator.</p>

<p>Attributes:
    parent (cCompute): Parent coordinator for completion callback
    processpipe (ProcessPipe): Processing pipeline to execute
    toneMap (bool): Apply tone mapping to result</p>

<p>Methods:
    run: Main thread execution with C++ acceleration</p>
</div>


                            <div id="cRun.__init__" class="classattr">
                                        <input id="cRun.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">cRun</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">parent</span>, </span><span class="param"><span class="n">processpipe</span>, </span><span class="param"><span class="n">toneMap</span></span>)</span>

                <label class="view-source-button" for="cRun.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#cRun.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="cRun.__init__-535"><a href="#cRun.__init__-535"><span class="linenos">535</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">parent</span><span class="p">,</span><span class="n">processpipe</span><span class="p">,</span><span class="n">toneMap</span><span class="p">):</span>
</span><span id="cRun.__init__-536"><a href="#cRun.__init__-536"><span class="linenos">536</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="cRun.__init__-537"><a href="#cRun.__init__-537"><span class="linenos">537</span></a><span class="sd">        Initialize C++ processing worker thread.</span>
</span><span id="cRun.__init__-538"><a href="#cRun.__init__-538"><span class="linenos">538</span></a><span class="sd">        </span>
</span><span id="cRun.__init__-539"><a href="#cRun.__init__-539"><span class="linenos">539</span></a><span class="sd">        Args:</span>
</span><span id="cRun.__init__-540"><a href="#cRun.__init__-540"><span class="linenos">540</span></a><span class="sd">            parent (cCompute): Parent coordinator instance</span>
</span><span id="cRun.__init__-541"><a href="#cRun.__init__-541"><span class="linenos">541</span></a><span class="sd">            processpipe (ProcessPipe): Processing pipeline to execute</span>
</span><span id="cRun.__init__-542"><a href="#cRun.__init__-542"><span class="linenos">542</span></a><span class="sd">            toneMap (bool): Apply tone mapping to result</span>
</span><span id="cRun.__init__-543"><a href="#cRun.__init__-543"><span class="linenos">543</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="cRun.__init__-544"><a href="#cRun.__init__-544"><span class="linenos">544</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="cRun.__init__-545"><a href="#cRun.__init__-545"><span class="linenos">545</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
</span><span id="cRun.__init__-546"><a href="#cRun.__init__-546"><span class="linenos">546</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">processpipe</span> <span class="o">=</span> <span class="n">processpipe</span>
</span><span id="cRun.__init__-547"><a href="#cRun.__init__-547"><span class="linenos">547</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">toneMap</span> <span class="o">=</span> <span class="n">toneMap</span>
</span></pre></div>


            <div class="docstring"><p>Initialize C++ processing worker thread.</p>

<p>Args:
    parent (cCompute): Parent coordinator instance
    processpipe (ProcessPipe): Processing pipeline to execute
    toneMap (bool): Apply tone mapping to result</p>
</div>


                            </div>
                            <div id="cRun.parent" class="classattr">
                                <div class="attr variable">
            <span class="name">parent</span>

        
    </div>
    <a class="headerlink" href="#cRun.parent"></a>
    
    

                            </div>
                            <div id="cRun.processpipe" class="classattr">
                                <div class="attr variable">
            <span class="name">processpipe</span>

        
    </div>
    <a class="headerlink" href="#cRun.processpipe"></a>
    
    

                            </div>
                            <div id="cRun.toneMap" class="classattr">
                                <div class="attr variable">
            <span class="name">toneMap</span>

        
    </div>
    <a class="headerlink" href="#cRun.toneMap"></a>
    
    

                            </div>
                            <div id="cRun.run" class="classattr">
                                        <input id="cRun.run-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">run</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="cRun.run-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#cRun.run"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="cRun.run-549"><a href="#cRun.run-549"><span class="linenos">549</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="cRun.run-550"><a href="#cRun.run-550"><span class="linenos">550</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="cRun.run-551"><a href="#cRun.run-551"><span class="linenos">551</span></a><span class="sd">        Main thread execution with C++ acceleration.</span>
</span><span id="cRun.run-552"><a href="#cRun.run-552"><span class="linenos">552</span></a><span class="sd">        </span>
</span><span id="cRun.run-553"><a href="#cRun.run-553"><span class="linenos">553</span></a><span class="sd">        Executes ProcessPipe computation using C++ backend (hdrCore.coreC)</span>
</span><span id="cRun.run-554"><a href="#cRun.run-554"><span class="linenos">554</span></a><span class="sd">        for improved performance. Copies input image, processes through</span>
</span><span id="cRun.run-555"><a href="#cRun.run-555"><span class="linenos">555</span></a><span class="sd">        C++ pipeline, and reports completion to parent coordinator.</span>
</span><span id="cRun.run-556"><a href="#cRun.run-556"><span class="linenos">556</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="cRun.run-557"><a href="#cRun.run-557"><span class="linenos">557</span></a>        <span class="n">img</span>  <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">processpipe</span><span class="o">.</span><span class="n">getInputImage</span><span class="p">())</span>
</span><span id="cRun.run-558"><a href="#cRun.run-558"><span class="linenos">558</span></a>        <span class="n">imgRes</span> <span class="o">=</span> <span class="n">hdrCore</span><span class="o">.</span><span class="n">coreC</span><span class="o">.</span><span class="n">coreCcompute</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">processpipe</span><span class="p">)</span>
</span><span id="cRun.run-559"><a href="#cRun.run-559"><span class="linenos">559</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">processpipe</span><span class="o">.</span><span class="n">setOutput</span><span class="p">(</span><span class="n">imgRes</span><span class="p">)</span>
</span><span id="cRun.run-560"><a href="#cRun.run-560"><span class="linenos">560</span></a>
</span><span id="cRun.run-561"><a href="#cRun.run-561"><span class="linenos">561</span></a>        <span class="n">pRes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">processpipe</span><span class="o">.</span><span class="n">getImage</span><span class="p">(</span><span class="n">toneMap</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">toneMap</span><span class="p">)</span>
</span><span id="cRun.run-562"><a href="#cRun.run-562"><span class="linenos">562</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">endCompute</span><span class="p">(</span><span class="n">pRes</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Main thread execution with C++ acceleration.</p>

<p>Executes ProcessPipe computation using C++ backend (<a href="../hdrCore/coreC.html">hdrCore.coreC</a>)
for improved performance. Copies input image, processes through
C++ pipeline, and reports completion to parent coordinator.</p>
</div>


                            </div>
                </section>
                <section id="RequestAestheticsCompute">
                            <input id="RequestAestheticsCompute-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">RequestAestheticsCompute</span>:

                <label class="view-source-button" for="RequestAestheticsCompute-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RequestAestheticsCompute"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RequestAestheticsCompute-569"><a href="#RequestAestheticsCompute-569"><span class="linenos">569</span></a><span class="k">class</span><span class="w"> </span><span class="nc">RequestAestheticsCompute</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
</span><span id="RequestAestheticsCompute-570"><a href="#RequestAestheticsCompute-570"><span class="linenos">570</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="RequestAestheticsCompute-571"><a href="#RequestAestheticsCompute-571"><span class="linenos">571</span></a><span class="sd">    Threading coordinator for image aesthetics analysis and computation.</span>
</span><span id="RequestAestheticsCompute-572"><a href="#RequestAestheticsCompute-572"><span class="linenos">572</span></a><span class="sd">    </span>
</span><span id="RequestAestheticsCompute-573"><a href="#RequestAestheticsCompute-573"><span class="linenos">573</span></a><span class="sd">    Manages parallel computation of aesthetic analysis including color palette</span>
</span><span id="RequestAestheticsCompute-574"><a href="#RequestAestheticsCompute-574"><span class="linenos">574</span></a><span class="sd">    extraction, composition analysis, and visual quality assessment. Uses</span>
</span><span id="RequestAestheticsCompute-575"><a href="#RequestAestheticsCompute-575"><span class="linenos">575</span></a><span class="sd">    single-threaded sequential processing to maintain analysis order while</span>
</span><span id="RequestAestheticsCompute-576"><a href="#RequestAestheticsCompute-576"><span class="linenos">576</span></a><span class="sd">    providing non-blocking background computation.</span>
</span><span id="RequestAestheticsCompute-577"><a href="#RequestAestheticsCompute-577"><span class="linenos">577</span></a><span class="sd">    </span>
</span><span id="RequestAestheticsCompute-578"><a href="#RequestAestheticsCompute-578"><span class="linenos">578</span></a><span class="sd">    Similar to RequestCompute but specialized for aesthetics analysis workflows</span>
</span><span id="RequestAestheticsCompute-579"><a href="#RequestAestheticsCompute-579"><span class="linenos">579</span></a><span class="sd">    that may have different performance characteristics and requirements.</span>
</span><span id="RequestAestheticsCompute-580"><a href="#RequestAestheticsCompute-580"><span class="linenos">580</span></a><span class="sd">    </span>
</span><span id="RequestAestheticsCompute-581"><a href="#RequestAestheticsCompute-581"><span class="linenos">581</span></a><span class="sd">    Attributes:</span>
</span><span id="RequestAestheticsCompute-582"><a href="#RequestAestheticsCompute-582"><span class="linenos">582</span></a><span class="sd">        parent: Parent model for result callbacks  </span>
</span><span id="RequestAestheticsCompute-583"><a href="#RequestAestheticsCompute-583"><span class="linenos">583</span></a><span class="sd">        requestDict (dict): Stores pending parameter updates</span>
</span><span id="RequestAestheticsCompute-584"><a href="#RequestAestheticsCompute-584"><span class="linenos">584</span></a><span class="sd">        pool (QThreadPool): Qt thread pool for worker management</span>
</span><span id="RequestAestheticsCompute-585"><a href="#RequestAestheticsCompute-585"><span class="linenos">585</span></a><span class="sd">        processpipe (ProcessPipe): Active processing pipeline reference</span>
</span><span id="RequestAestheticsCompute-586"><a href="#RequestAestheticsCompute-586"><span class="linenos">586</span></a><span class="sd">        readyToRun (bool): Processing availability flag</span>
</span><span id="RequestAestheticsCompute-587"><a href="#RequestAestheticsCompute-587"><span class="linenos">587</span></a><span class="sd">        waitingUpdate (bool): Pending update flag during processing</span>
</span><span id="RequestAestheticsCompute-588"><a href="#RequestAestheticsCompute-588"><span class="linenos">588</span></a><span class="sd">    </span>
</span><span id="RequestAestheticsCompute-589"><a href="#RequestAestheticsCompute-589"><span class="linenos">589</span></a><span class="sd">    Methods:</span>
</span><span id="RequestAestheticsCompute-590"><a href="#RequestAestheticsCompute-590"><span class="linenos">590</span></a><span class="sd">        setProcessPipe: Set active processing pipeline</span>
</span><span id="RequestAestheticsCompute-591"><a href="#RequestAestheticsCompute-591"><span class="linenos">591</span></a><span class="sd">        requestCompute: Queue parameter update and trigger processing  </span>
</span><span id="RequestAestheticsCompute-592"><a href="#RequestAestheticsCompute-592"><span class="linenos">592</span></a><span class="sd">        endCompute: Handle processing completion and manage restart</span>
</span><span id="RequestAestheticsCompute-593"><a href="#RequestAestheticsCompute-593"><span class="linenos">593</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="RequestAestheticsCompute-594"><a href="#RequestAestheticsCompute-594"><span class="linenos">594</span></a>
</span><span id="RequestAestheticsCompute-595"><a href="#RequestAestheticsCompute-595"><span class="linenos">595</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
</span><span id="RequestAestheticsCompute-596"><a href="#RequestAestheticsCompute-596"><span class="linenos">596</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="RequestAestheticsCompute-597"><a href="#RequestAestheticsCompute-597"><span class="linenos">597</span></a><span class="sd">        Initialize aesthetics compute coordinator.</span>
</span><span id="RequestAestheticsCompute-598"><a href="#RequestAestheticsCompute-598"><span class="linenos">598</span></a><span class="sd">        </span>
</span><span id="RequestAestheticsCompute-599"><a href="#RequestAestheticsCompute-599"><span class="linenos">599</span></a><span class="sd">        Args:</span>
</span><span id="RequestAestheticsCompute-600"><a href="#RequestAestheticsCompute-600"><span class="linenos">600</span></a><span class="sd">            parent: Parent model for result delivery</span>
</span><span id="RequestAestheticsCompute-601"><a href="#RequestAestheticsCompute-601"><span class="linenos">601</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RequestAestheticsCompute-602"><a href="#RequestAestheticsCompute-602"><span class="linenos">602</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
</span><span id="RequestAestheticsCompute-603"><a href="#RequestAestheticsCompute-603"><span class="linenos">603</span></a>
</span><span id="RequestAestheticsCompute-604"><a href="#RequestAestheticsCompute-604"><span class="linenos">604</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">requestDict</span><span class="o">=</span> <span class="p">{}</span> <span class="c1"># store resqustCompute key:processNodeId, value: processNode params</span>
</span><span id="RequestAestheticsCompute-605"><a href="#RequestAestheticsCompute-605"><span class="linenos">605</span></a>
</span><span id="RequestAestheticsCompute-606"><a href="#RequestAestheticsCompute-606"><span class="linenos">606</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pool</span> <span class="o">=</span> <span class="n">QThreadPool</span><span class="o">.</span><span class="n">globalInstance</span><span class="p">()</span>        <span class="c1"># get global pool</span>
</span><span id="RequestAestheticsCompute-607"><a href="#RequestAestheticsCompute-607"><span class="linenos">607</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">processpipe</span> <span class="o">=</span> <span class="kc">None</span>                         <span class="c1"># processpipe ref</span>
</span><span id="RequestAestheticsCompute-608"><a href="#RequestAestheticsCompute-608"><span class="linenos">608</span></a>
</span><span id="RequestAestheticsCompute-609"><a href="#RequestAestheticsCompute-609"><span class="linenos">609</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">readyToRun</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="RequestAestheticsCompute-610"><a href="#RequestAestheticsCompute-610"><span class="linenos">610</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">waitingUpdate</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="RequestAestheticsCompute-611"><a href="#RequestAestheticsCompute-611"><span class="linenos">611</span></a>
</span><span id="RequestAestheticsCompute-612"><a href="#RequestAestheticsCompute-612"><span class="linenos">612</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setProcessPipe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">pp</span><span class="p">):</span>
</span><span id="RequestAestheticsCompute-613"><a href="#RequestAestheticsCompute-613"><span class="linenos">613</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="RequestAestheticsCompute-614"><a href="#RequestAestheticsCompute-614"><span class="linenos">614</span></a><span class="sd">        Set the current active processing pipeline.</span>
</span><span id="RequestAestheticsCompute-615"><a href="#RequestAestheticsCompute-615"><span class="linenos">615</span></a>
</span><span id="RequestAestheticsCompute-616"><a href="#RequestAestheticsCompute-616"><span class="linenos">616</span></a><span class="sd">        Args:</span>
</span><span id="RequestAestheticsCompute-617"><a href="#RequestAestheticsCompute-617"><span class="linenos">617</span></a><span class="sd">            pp (ProcessPipe, Required): Processing pipeline to manage</span>
</span><span id="RequestAestheticsCompute-618"><a href="#RequestAestheticsCompute-618"><span class="linenos">618</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RequestAestheticsCompute-619"><a href="#RequestAestheticsCompute-619"><span class="linenos">619</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">processpipe</span> <span class="o">=</span> <span class="n">pp</span>
</span><span id="RequestAestheticsCompute-620"><a href="#RequestAestheticsCompute-620"><span class="linenos">620</span></a>    
</span><span id="RequestAestheticsCompute-621"><a href="#RequestAestheticsCompute-621"><span class="linenos">621</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">requestCompute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="n">params</span><span class="p">):</span>
</span><span id="RequestAestheticsCompute-622"><a href="#RequestAestheticsCompute-622"><span class="linenos">622</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="RequestAestheticsCompute-623"><a href="#RequestAestheticsCompute-623"><span class="linenos">623</span></a><span class="sd">        Queue parameter update and request aesthetics computation.</span>
</span><span id="RequestAestheticsCompute-624"><a href="#RequestAestheticsCompute-624"><span class="linenos">624</span></a>
</span><span id="RequestAestheticsCompute-625"><a href="#RequestAestheticsCompute-625"><span class="linenos">625</span></a><span class="sd">        Args:</span>
</span><span id="RequestAestheticsCompute-626"><a href="#RequestAestheticsCompute-626"><span class="linenos">626</span></a><span class="sd">            id (int, Required): Index of process-node in processing pipeline</span>
</span><span id="RequestAestheticsCompute-627"><a href="#RequestAestheticsCompute-627"><span class="linenos">627</span></a><span class="sd">            params (dict, Required): Updated parameters for process-node</span>
</span><span id="RequestAestheticsCompute-628"><a href="#RequestAestheticsCompute-628"><span class="linenos">628</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RequestAestheticsCompute-629"><a href="#RequestAestheticsCompute-629"><span class="linenos">629</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">requestDict</span><span class="p">[</span><span class="nb">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
</span><span id="RequestAestheticsCompute-630"><a href="#RequestAestheticsCompute-630"><span class="linenos">630</span></a>
</span><span id="RequestAestheticsCompute-631"><a href="#RequestAestheticsCompute-631"><span class="linenos">631</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">readyToRun</span><span class="p">:</span>
</span><span id="RequestAestheticsCompute-632"><a href="#RequestAestheticsCompute-632"><span class="linenos">632</span></a>            <span class="c1"># start processing processpipe</span>
</span><span id="RequestAestheticsCompute-633"><a href="#RequestAestheticsCompute-633"><span class="linenos">633</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">pool</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">RunAestheticsCompute</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
</span><span id="RequestAestheticsCompute-634"><a href="#RequestAestheticsCompute-634"><span class="linenos">634</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="RequestAestheticsCompute-635"><a href="#RequestAestheticsCompute-635"><span class="linenos">635</span></a>            <span class="c1"># if a computation is already running</span>
</span><span id="RequestAestheticsCompute-636"><a href="#RequestAestheticsCompute-636"><span class="linenos">636</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">waitingUpdate</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="RequestAestheticsCompute-637"><a href="#RequestAestheticsCompute-637"><span class="linenos">637</span></a>
</span><span id="RequestAestheticsCompute-638"><a href="#RequestAestheticsCompute-638"><span class="linenos">638</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">endCompute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="RequestAestheticsCompute-639"><a href="#RequestAestheticsCompute-639"><span class="linenos">639</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="RequestAestheticsCompute-640"><a href="#RequestAestheticsCompute-640"><span class="linenos">640</span></a><span class="sd">        Handle aesthetics processing completion and manage restart.</span>
</span><span id="RequestAestheticsCompute-641"><a href="#RequestAestheticsCompute-641"><span class="linenos">641</span></a><span class="sd">        </span>
</span><span id="RequestAestheticsCompute-642"><a href="#RequestAestheticsCompute-642"><span class="linenos">642</span></a><span class="sd">        Called when aesthetics computation finishes. Retrieves processed</span>
</span><span id="RequestAestheticsCompute-643"><a href="#RequestAestheticsCompute-643"><span class="linenos">643</span></a><span class="sd">        image, sends it to parent model, and restarts computation if there</span>
</span><span id="RequestAestheticsCompute-644"><a href="#RequestAestheticsCompute-644"><span class="linenos">644</span></a><span class="sd">        are pending parameter updates.</span>
</span><span id="RequestAestheticsCompute-645"><a href="#RequestAestheticsCompute-645"><span class="linenos">645</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RequestAestheticsCompute-646"><a href="#RequestAestheticsCompute-646"><span class="linenos">646</span></a>        <span class="n">imgTM</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">processpipe</span><span class="o">.</span><span class="n">getImage</span><span class="p">(</span><span class="n">toneMap</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="RequestAestheticsCompute-647"><a href="#RequestAestheticsCompute-647"><span class="linenos">647</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">updateImage</span><span class="p">(</span><span class="n">imgTM</span><span class="p">)</span>
</span><span id="RequestAestheticsCompute-648"><a href="#RequestAestheticsCompute-648"><span class="linenos">648</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">waitingUpdate</span><span class="p">:</span>
</span><span id="RequestAestheticsCompute-649"><a href="#RequestAestheticsCompute-649"><span class="linenos">649</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">pool</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">RunAestheticsCompute</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
</span><span id="RequestAestheticsCompute-650"><a href="#RequestAestheticsCompute-650"><span class="linenos">650</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">waitingUpdate</span> <span class="o">=</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Threading coordinator for image aesthetics analysis and computation.</p>

<p>Manages parallel computation of aesthetic analysis including color palette
extraction, composition analysis, and visual quality assessment. Uses
single-threaded sequential processing to maintain analysis order while
providing non-blocking background computation.</p>

<p>Similar to RequestCompute but specialized for aesthetics analysis workflows
that may have different performance characteristics and requirements.</p>

<p>Attributes:
    parent: Parent model for result callbacks<br />
    requestDict (dict): Stores pending parameter updates
    pool (QThreadPool): Qt thread pool for worker management
    processpipe (ProcessPipe): Active processing pipeline reference
    readyToRun (bool): Processing availability flag
    waitingUpdate (bool): Pending update flag during processing</p>

<p>Methods:
    setProcessPipe: Set active processing pipeline
    requestCompute: Queue parameter update and trigger processing<br />
    endCompute: Handle processing completion and manage restart</p>
</div>


                            <div id="RequestAestheticsCompute.__init__" class="classattr">
                                        <input id="RequestAestheticsCompute.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">RequestAestheticsCompute</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">parent</span></span>)</span>

                <label class="view-source-button" for="RequestAestheticsCompute.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RequestAestheticsCompute.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RequestAestheticsCompute.__init__-595"><a href="#RequestAestheticsCompute.__init__-595"><span class="linenos">595</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
</span><span id="RequestAestheticsCompute.__init__-596"><a href="#RequestAestheticsCompute.__init__-596"><span class="linenos">596</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="RequestAestheticsCompute.__init__-597"><a href="#RequestAestheticsCompute.__init__-597"><span class="linenos">597</span></a><span class="sd">        Initialize aesthetics compute coordinator.</span>
</span><span id="RequestAestheticsCompute.__init__-598"><a href="#RequestAestheticsCompute.__init__-598"><span class="linenos">598</span></a><span class="sd">        </span>
</span><span id="RequestAestheticsCompute.__init__-599"><a href="#RequestAestheticsCompute.__init__-599"><span class="linenos">599</span></a><span class="sd">        Args:</span>
</span><span id="RequestAestheticsCompute.__init__-600"><a href="#RequestAestheticsCompute.__init__-600"><span class="linenos">600</span></a><span class="sd">            parent: Parent model for result delivery</span>
</span><span id="RequestAestheticsCompute.__init__-601"><a href="#RequestAestheticsCompute.__init__-601"><span class="linenos">601</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RequestAestheticsCompute.__init__-602"><a href="#RequestAestheticsCompute.__init__-602"><span class="linenos">602</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
</span><span id="RequestAestheticsCompute.__init__-603"><a href="#RequestAestheticsCompute.__init__-603"><span class="linenos">603</span></a>
</span><span id="RequestAestheticsCompute.__init__-604"><a href="#RequestAestheticsCompute.__init__-604"><span class="linenos">604</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">requestDict</span><span class="o">=</span> <span class="p">{}</span> <span class="c1"># store resqustCompute key:processNodeId, value: processNode params</span>
</span><span id="RequestAestheticsCompute.__init__-605"><a href="#RequestAestheticsCompute.__init__-605"><span class="linenos">605</span></a>
</span><span id="RequestAestheticsCompute.__init__-606"><a href="#RequestAestheticsCompute.__init__-606"><span class="linenos">606</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">pool</span> <span class="o">=</span> <span class="n">QThreadPool</span><span class="o">.</span><span class="n">globalInstance</span><span class="p">()</span>        <span class="c1"># get global pool</span>
</span><span id="RequestAestheticsCompute.__init__-607"><a href="#RequestAestheticsCompute.__init__-607"><span class="linenos">607</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">processpipe</span> <span class="o">=</span> <span class="kc">None</span>                         <span class="c1"># processpipe ref</span>
</span><span id="RequestAestheticsCompute.__init__-608"><a href="#RequestAestheticsCompute.__init__-608"><span class="linenos">608</span></a>
</span><span id="RequestAestheticsCompute.__init__-609"><a href="#RequestAestheticsCompute.__init__-609"><span class="linenos">609</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">readyToRun</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="RequestAestheticsCompute.__init__-610"><a href="#RequestAestheticsCompute.__init__-610"><span class="linenos">610</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">waitingUpdate</span> <span class="o">=</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Initialize aesthetics compute coordinator.</p>

<p>Args:
    parent: Parent model for result delivery</p>
</div>


                            </div>
                            <div id="RequestAestheticsCompute.parent" class="classattr">
                                <div class="attr variable">
            <span class="name">parent</span>

        
    </div>
    <a class="headerlink" href="#RequestAestheticsCompute.parent"></a>
    
    

                            </div>
                            <div id="RequestAestheticsCompute.requestDict" class="classattr">
                                <div class="attr variable">
            <span class="name">requestDict</span>

        
    </div>
    <a class="headerlink" href="#RequestAestheticsCompute.requestDict"></a>
    
    

                            </div>
                            <div id="RequestAestheticsCompute.pool" class="classattr">
                                <div class="attr variable">
            <span class="name">pool</span>

        
    </div>
    <a class="headerlink" href="#RequestAestheticsCompute.pool"></a>
    
    

                            </div>
                            <div id="RequestAestheticsCompute.processpipe" class="classattr">
                                <div class="attr variable">
            <span class="name">processpipe</span>

        
    </div>
    <a class="headerlink" href="#RequestAestheticsCompute.processpipe"></a>
    
    

                            </div>
                            <div id="RequestAestheticsCompute.readyToRun" class="classattr">
                                <div class="attr variable">
            <span class="name">readyToRun</span>

        
    </div>
    <a class="headerlink" href="#RequestAestheticsCompute.readyToRun"></a>
    
    

                            </div>
                            <div id="RequestAestheticsCompute.waitingUpdate" class="classattr">
                                <div class="attr variable">
            <span class="name">waitingUpdate</span>

        
    </div>
    <a class="headerlink" href="#RequestAestheticsCompute.waitingUpdate"></a>
    
    

                            </div>
                            <div id="RequestAestheticsCompute.setProcessPipe" class="classattr">
                                        <input id="RequestAestheticsCompute.setProcessPipe-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">setProcessPipe</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">pp</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="RequestAestheticsCompute.setProcessPipe-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RequestAestheticsCompute.setProcessPipe"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RequestAestheticsCompute.setProcessPipe-612"><a href="#RequestAestheticsCompute.setProcessPipe-612"><span class="linenos">612</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">setProcessPipe</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">pp</span><span class="p">):</span>
</span><span id="RequestAestheticsCompute.setProcessPipe-613"><a href="#RequestAestheticsCompute.setProcessPipe-613"><span class="linenos">613</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="RequestAestheticsCompute.setProcessPipe-614"><a href="#RequestAestheticsCompute.setProcessPipe-614"><span class="linenos">614</span></a><span class="sd">        Set the current active processing pipeline.</span>
</span><span id="RequestAestheticsCompute.setProcessPipe-615"><a href="#RequestAestheticsCompute.setProcessPipe-615"><span class="linenos">615</span></a>
</span><span id="RequestAestheticsCompute.setProcessPipe-616"><a href="#RequestAestheticsCompute.setProcessPipe-616"><span class="linenos">616</span></a><span class="sd">        Args:</span>
</span><span id="RequestAestheticsCompute.setProcessPipe-617"><a href="#RequestAestheticsCompute.setProcessPipe-617"><span class="linenos">617</span></a><span class="sd">            pp (ProcessPipe, Required): Processing pipeline to manage</span>
</span><span id="RequestAestheticsCompute.setProcessPipe-618"><a href="#RequestAestheticsCompute.setProcessPipe-618"><span class="linenos">618</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RequestAestheticsCompute.setProcessPipe-619"><a href="#RequestAestheticsCompute.setProcessPipe-619"><span class="linenos">619</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">processpipe</span> <span class="o">=</span> <span class="n">pp</span>
</span></pre></div>


            <div class="docstring"><p>Set the current active processing pipeline.</p>

<p>Args:
    pp (ProcessPipe, Required): Processing pipeline to manage</p>
</div>


                            </div>
                            <div id="RequestAestheticsCompute.requestCompute" class="classattr">
                                        <input id="RequestAestheticsCompute.requestCompute-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">requestCompute</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="nb">id</span>, </span><span class="param"><span class="n">params</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="RequestAestheticsCompute.requestCompute-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RequestAestheticsCompute.requestCompute"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RequestAestheticsCompute.requestCompute-621"><a href="#RequestAestheticsCompute.requestCompute-621"><span class="linenos">621</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">requestCompute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">id</span><span class="p">,</span> <span class="n">params</span><span class="p">):</span>
</span><span id="RequestAestheticsCompute.requestCompute-622"><a href="#RequestAestheticsCompute.requestCompute-622"><span class="linenos">622</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="RequestAestheticsCompute.requestCompute-623"><a href="#RequestAestheticsCompute.requestCompute-623"><span class="linenos">623</span></a><span class="sd">        Queue parameter update and request aesthetics computation.</span>
</span><span id="RequestAestheticsCompute.requestCompute-624"><a href="#RequestAestheticsCompute.requestCompute-624"><span class="linenos">624</span></a>
</span><span id="RequestAestheticsCompute.requestCompute-625"><a href="#RequestAestheticsCompute.requestCompute-625"><span class="linenos">625</span></a><span class="sd">        Args:</span>
</span><span id="RequestAestheticsCompute.requestCompute-626"><a href="#RequestAestheticsCompute.requestCompute-626"><span class="linenos">626</span></a><span class="sd">            id (int, Required): Index of process-node in processing pipeline</span>
</span><span id="RequestAestheticsCompute.requestCompute-627"><a href="#RequestAestheticsCompute.requestCompute-627"><span class="linenos">627</span></a><span class="sd">            params (dict, Required): Updated parameters for process-node</span>
</span><span id="RequestAestheticsCompute.requestCompute-628"><a href="#RequestAestheticsCompute.requestCompute-628"><span class="linenos">628</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RequestAestheticsCompute.requestCompute-629"><a href="#RequestAestheticsCompute.requestCompute-629"><span class="linenos">629</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">requestDict</span><span class="p">[</span><span class="nb">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
</span><span id="RequestAestheticsCompute.requestCompute-630"><a href="#RequestAestheticsCompute.requestCompute-630"><span class="linenos">630</span></a>
</span><span id="RequestAestheticsCompute.requestCompute-631"><a href="#RequestAestheticsCompute.requestCompute-631"><span class="linenos">631</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">readyToRun</span><span class="p">:</span>
</span><span id="RequestAestheticsCompute.requestCompute-632"><a href="#RequestAestheticsCompute.requestCompute-632"><span class="linenos">632</span></a>            <span class="c1"># start processing processpipe</span>
</span><span id="RequestAestheticsCompute.requestCompute-633"><a href="#RequestAestheticsCompute.requestCompute-633"><span class="linenos">633</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">pool</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">RunAestheticsCompute</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
</span><span id="RequestAestheticsCompute.requestCompute-634"><a href="#RequestAestheticsCompute.requestCompute-634"><span class="linenos">634</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="RequestAestheticsCompute.requestCompute-635"><a href="#RequestAestheticsCompute.requestCompute-635"><span class="linenos">635</span></a>            <span class="c1"># if a computation is already running</span>
</span><span id="RequestAestheticsCompute.requestCompute-636"><a href="#RequestAestheticsCompute.requestCompute-636"><span class="linenos">636</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">waitingUpdate</span> <span class="o">=</span> <span class="kc">True</span>
</span></pre></div>


            <div class="docstring"><p>Queue parameter update and request aesthetics computation.</p>

<p>Args:
    id (int, Required): Index of process-node in processing pipeline
    params (dict, Required): Updated parameters for process-node</p>
</div>


                            </div>
                            <div id="RequestAestheticsCompute.endCompute" class="classattr">
                                        <input id="RequestAestheticsCompute.endCompute-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">endCompute</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="RequestAestheticsCompute.endCompute-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RequestAestheticsCompute.endCompute"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RequestAestheticsCompute.endCompute-638"><a href="#RequestAestheticsCompute.endCompute-638"><span class="linenos">638</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">endCompute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="RequestAestheticsCompute.endCompute-639"><a href="#RequestAestheticsCompute.endCompute-639"><span class="linenos">639</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="RequestAestheticsCompute.endCompute-640"><a href="#RequestAestheticsCompute.endCompute-640"><span class="linenos">640</span></a><span class="sd">        Handle aesthetics processing completion and manage restart.</span>
</span><span id="RequestAestheticsCompute.endCompute-641"><a href="#RequestAestheticsCompute.endCompute-641"><span class="linenos">641</span></a><span class="sd">        </span>
</span><span id="RequestAestheticsCompute.endCompute-642"><a href="#RequestAestheticsCompute.endCompute-642"><span class="linenos">642</span></a><span class="sd">        Called when aesthetics computation finishes. Retrieves processed</span>
</span><span id="RequestAestheticsCompute.endCompute-643"><a href="#RequestAestheticsCompute.endCompute-643"><span class="linenos">643</span></a><span class="sd">        image, sends it to parent model, and restarts computation if there</span>
</span><span id="RequestAestheticsCompute.endCompute-644"><a href="#RequestAestheticsCompute.endCompute-644"><span class="linenos">644</span></a><span class="sd">        are pending parameter updates.</span>
</span><span id="RequestAestheticsCompute.endCompute-645"><a href="#RequestAestheticsCompute.endCompute-645"><span class="linenos">645</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RequestAestheticsCompute.endCompute-646"><a href="#RequestAestheticsCompute.endCompute-646"><span class="linenos">646</span></a>        <span class="n">imgTM</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">processpipe</span><span class="o">.</span><span class="n">getImage</span><span class="p">(</span><span class="n">toneMap</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="RequestAestheticsCompute.endCompute-647"><a href="#RequestAestheticsCompute.endCompute-647"><span class="linenos">647</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">updateImage</span><span class="p">(</span><span class="n">imgTM</span><span class="p">)</span>
</span><span id="RequestAestheticsCompute.endCompute-648"><a href="#RequestAestheticsCompute.endCompute-648"><span class="linenos">648</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">waitingUpdate</span><span class="p">:</span>
</span><span id="RequestAestheticsCompute.endCompute-649"><a href="#RequestAestheticsCompute.endCompute-649"><span class="linenos">649</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">pool</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">RunAestheticsCompute</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
</span><span id="RequestAestheticsCompute.endCompute-650"><a href="#RequestAestheticsCompute.endCompute-650"><span class="linenos">650</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">waitingUpdate</span> <span class="o">=</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Handle aesthetics processing completion and manage restart.</p>

<p>Called when aesthetics computation finishes. Retrieves processed
image, sends it to parent model, and restarts computation if there
are pending parameter updates.</p>
</div>


                            </div>
                </section>
                <section id="RunAestheticsCompute">
                            <input id="RunAestheticsCompute-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">RunAestheticsCompute</span><wbr>(<span class="base">PyQt5.QtCore.QRunnable</span>):

                <label class="view-source-button" for="RunAestheticsCompute-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RunAestheticsCompute"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RunAestheticsCompute-654"><a href="#RunAestheticsCompute-654"><span class="linenos">654</span></a><span class="k">class</span><span class="w"> </span><span class="nc">RunAestheticsCompute</span><span class="p">(</span><span class="n">QRunnable</span><span class="p">):</span>
</span><span id="RunAestheticsCompute-655"><a href="#RunAestheticsCompute-655"><span class="linenos">655</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="RunAestheticsCompute-656"><a href="#RunAestheticsCompute-656"><span class="linenos">656</span></a><span class="sd">    Worker thread for aesthetics analysis and computation execution.</span>
</span><span id="RunAestheticsCompute-657"><a href="#RunAestheticsCompute-657"><span class="linenos">657</span></a><span class="sd">    </span>
</span><span id="RunAestheticsCompute-658"><a href="#RunAestheticsCompute-658"><span class="linenos">658</span></a><span class="sd">    Executes ProcessPipe computation focused on aesthetics analysis including</span>
</span><span id="RunAestheticsCompute-659"><a href="#RunAestheticsCompute-659"><span class="linenos">659</span></a><span class="sd">    color palette extraction, composition metrics, and visual quality assessment.</span>
</span><span id="RunAestheticsCompute-660"><a href="#RunAestheticsCompute-660"><span class="linenos">660</span></a><span class="sd">    Uses Python-based processing for flexibility in analysis algorithms.</span>
</span><span id="RunAestheticsCompute-661"><a href="#RunAestheticsCompute-661"><span class="linenos">661</span></a><span class="sd">    </span>
</span><span id="RunAestheticsCompute-662"><a href="#RunAestheticsCompute-662"><span class="linenos">662</span></a><span class="sd">    Attributes:</span>
</span><span id="RunAestheticsCompute-663"><a href="#RunAestheticsCompute-663"><span class="linenos">663</span></a><span class="sd">        parent (RequestAestheticsCompute): Parent coordinator for completion callback</span>
</span><span id="RunAestheticsCompute-664"><a href="#RunAestheticsCompute-664"><span class="linenos">664</span></a><span class="sd">    </span>
</span><span id="RunAestheticsCompute-665"><a href="#RunAestheticsCompute-665"><span class="linenos">665</span></a><span class="sd">    Methods:</span>
</span><span id="RunAestheticsCompute-666"><a href="#RunAestheticsCompute-666"><span class="linenos">666</span></a><span class="sd">        run: Main thread execution for aesthetics processing</span>
</span><span id="RunAestheticsCompute-667"><a href="#RunAestheticsCompute-667"><span class="linenos">667</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="RunAestheticsCompute-668"><a href="#RunAestheticsCompute-668"><span class="linenos">668</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">parent</span><span class="p">):</span>
</span><span id="RunAestheticsCompute-669"><a href="#RunAestheticsCompute-669"><span class="linenos">669</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="RunAestheticsCompute-670"><a href="#RunAestheticsCompute-670"><span class="linenos">670</span></a><span class="sd">        Initialize aesthetics compute worker thread.</span>
</span><span id="RunAestheticsCompute-671"><a href="#RunAestheticsCompute-671"><span class="linenos">671</span></a><span class="sd">        </span>
</span><span id="RunAestheticsCompute-672"><a href="#RunAestheticsCompute-672"><span class="linenos">672</span></a><span class="sd">        Args:</span>
</span><span id="RunAestheticsCompute-673"><a href="#RunAestheticsCompute-673"><span class="linenos">673</span></a><span class="sd">            parent (RequestAestheticsCompute): Parent coordinator instance</span>
</span><span id="RunAestheticsCompute-674"><a href="#RunAestheticsCompute-674"><span class="linenos">674</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RunAestheticsCompute-675"><a href="#RunAestheticsCompute-675"><span class="linenos">675</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="RunAestheticsCompute-676"><a href="#RunAestheticsCompute-676"><span class="linenos">676</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
</span><span id="RunAestheticsCompute-677"><a href="#RunAestheticsCompute-677"><span class="linenos">677</span></a>
</span><span id="RunAestheticsCompute-678"><a href="#RunAestheticsCompute-678"><span class="linenos">678</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="RunAestheticsCompute-679"><a href="#RunAestheticsCompute-679"><span class="linenos">679</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="RunAestheticsCompute-680"><a href="#RunAestheticsCompute-680"><span class="linenos">680</span></a><span class="sd">        Main thread execution for aesthetics processing.</span>
</span><span id="RunAestheticsCompute-681"><a href="#RunAestheticsCompute-681"><span class="linenos">681</span></a><span class="sd">        </span>
</span><span id="RunAestheticsCompute-682"><a href="#RunAestheticsCompute-682"><span class="linenos">682</span></a><span class="sd">        Executes ProcessPipe computation with focus on aesthetics analysis.</span>
</span><span id="RunAestheticsCompute-683"><a href="#RunAestheticsCompute-683"><span class="linenos">683</span></a><span class="sd">        Updates pipeline parameters, performs Python-based computation</span>
</span><span id="RunAestheticsCompute-684"><a href="#RunAestheticsCompute-684"><span class="linenos">684</span></a><span class="sd">        with timing metrics, and triggers completion callback.</span>
</span><span id="RunAestheticsCompute-685"><a href="#RunAestheticsCompute-685"><span class="linenos">685</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RunAestheticsCompute-686"><a href="#RunAestheticsCompute-686"><span class="linenos">686</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">readyToRun</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="RunAestheticsCompute-687"><a href="#RunAestheticsCompute-687"><span class="linenos">687</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">requestDict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">processpipe</span><span class="o">.</span><span class="n">setParameters</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">requestDict</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>
</span><span id="RunAestheticsCompute-688"><a href="#RunAestheticsCompute-688"><span class="linenos">688</span></a>        <span class="n">start</span> <span class="o">=</span> <span class="n">timer</span><span class="p">()</span>
</span><span id="RunAestheticsCompute-689"><a href="#RunAestheticsCompute-689"><span class="linenos">689</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">processpipe</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span>
</span><span id="RunAestheticsCompute-690"><a href="#RunAestheticsCompute-690"><span class="linenos">690</span></a>        <span class="n">dt</span> <span class="o">=</span> <span class="n">timer</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span>
</span><span id="RunAestheticsCompute-691"><a href="#RunAestheticsCompute-691"><span class="linenos">691</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">readyToRun</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="RunAestheticsCompute-692"><a href="#RunAestheticsCompute-692"><span class="linenos">692</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">endCompute</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Worker thread for aesthetics analysis and computation execution.</p>

<p>Executes ProcessPipe computation focused on aesthetics analysis including
color palette extraction, composition metrics, and visual quality assessment.
Uses Python-based processing for flexibility in analysis algorithms.</p>

<p>Attributes:
    parent (RequestAestheticsCompute): Parent coordinator for completion callback</p>

<p>Methods:
    run: Main thread execution for aesthetics processing</p>
</div>


                            <div id="RunAestheticsCompute.__init__" class="classattr">
                                        <input id="RunAestheticsCompute.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">RunAestheticsCompute</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">parent</span></span>)</span>

                <label class="view-source-button" for="RunAestheticsCompute.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RunAestheticsCompute.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RunAestheticsCompute.__init__-668"><a href="#RunAestheticsCompute.__init__-668"><span class="linenos">668</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">parent</span><span class="p">):</span>
</span><span id="RunAestheticsCompute.__init__-669"><a href="#RunAestheticsCompute.__init__-669"><span class="linenos">669</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="RunAestheticsCompute.__init__-670"><a href="#RunAestheticsCompute.__init__-670"><span class="linenos">670</span></a><span class="sd">        Initialize aesthetics compute worker thread.</span>
</span><span id="RunAestheticsCompute.__init__-671"><a href="#RunAestheticsCompute.__init__-671"><span class="linenos">671</span></a><span class="sd">        </span>
</span><span id="RunAestheticsCompute.__init__-672"><a href="#RunAestheticsCompute.__init__-672"><span class="linenos">672</span></a><span class="sd">        Args:</span>
</span><span id="RunAestheticsCompute.__init__-673"><a href="#RunAestheticsCompute.__init__-673"><span class="linenos">673</span></a><span class="sd">            parent (RequestAestheticsCompute): Parent coordinator instance</span>
</span><span id="RunAestheticsCompute.__init__-674"><a href="#RunAestheticsCompute.__init__-674"><span class="linenos">674</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RunAestheticsCompute.__init__-675"><a href="#RunAestheticsCompute.__init__-675"><span class="linenos">675</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span><span id="RunAestheticsCompute.__init__-676"><a href="#RunAestheticsCompute.__init__-676"><span class="linenos">676</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">parent</span>
</span></pre></div>


            <div class="docstring"><p>Initialize aesthetics compute worker thread.</p>

<p>Args:
    parent (RequestAestheticsCompute): Parent coordinator instance</p>
</div>


                            </div>
                            <div id="RunAestheticsCompute.parent" class="classattr">
                                <div class="attr variable">
            <span class="name">parent</span>

        
    </div>
    <a class="headerlink" href="#RunAestheticsCompute.parent"></a>
    
    

                            </div>
                            <div id="RunAestheticsCompute.run" class="classattr">
                                        <input id="RunAestheticsCompute.run-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">run</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="RunAestheticsCompute.run-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#RunAestheticsCompute.run"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="RunAestheticsCompute.run-678"><a href="#RunAestheticsCompute.run-678"><span class="linenos">678</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="RunAestheticsCompute.run-679"><a href="#RunAestheticsCompute.run-679"><span class="linenos">679</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="RunAestheticsCompute.run-680"><a href="#RunAestheticsCompute.run-680"><span class="linenos">680</span></a><span class="sd">        Main thread execution for aesthetics processing.</span>
</span><span id="RunAestheticsCompute.run-681"><a href="#RunAestheticsCompute.run-681"><span class="linenos">681</span></a><span class="sd">        </span>
</span><span id="RunAestheticsCompute.run-682"><a href="#RunAestheticsCompute.run-682"><span class="linenos">682</span></a><span class="sd">        Executes ProcessPipe computation with focus on aesthetics analysis.</span>
</span><span id="RunAestheticsCompute.run-683"><a href="#RunAestheticsCompute.run-683"><span class="linenos">683</span></a><span class="sd">        Updates pipeline parameters, performs Python-based computation</span>
</span><span id="RunAestheticsCompute.run-684"><a href="#RunAestheticsCompute.run-684"><span class="linenos">684</span></a><span class="sd">        with timing metrics, and triggers completion callback.</span>
</span><span id="RunAestheticsCompute.run-685"><a href="#RunAestheticsCompute.run-685"><span class="linenos">685</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="RunAestheticsCompute.run-686"><a href="#RunAestheticsCompute.run-686"><span class="linenos">686</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">readyToRun</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="RunAestheticsCompute.run-687"><a href="#RunAestheticsCompute.run-687"><span class="linenos">687</span></a>        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">requestDict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">processpipe</span><span class="o">.</span><span class="n">setParameters</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">requestDict</span><span class="p">[</span><span class="n">k</span><span class="p">])</span>
</span><span id="RunAestheticsCompute.run-688"><a href="#RunAestheticsCompute.run-688"><span class="linenos">688</span></a>        <span class="n">start</span> <span class="o">=</span> <span class="n">timer</span><span class="p">()</span>
</span><span id="RunAestheticsCompute.run-689"><a href="#RunAestheticsCompute.run-689"><span class="linenos">689</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">processpipe</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span>
</span><span id="RunAestheticsCompute.run-690"><a href="#RunAestheticsCompute.run-690"><span class="linenos">690</span></a>        <span class="n">dt</span> <span class="o">=</span> <span class="n">timer</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span>
</span><span id="RunAestheticsCompute.run-691"><a href="#RunAestheticsCompute.run-691"><span class="linenos">691</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">readyToRun</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="RunAestheticsCompute.run-692"><a href="#RunAestheticsCompute.run-692"><span class="linenos">692</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">endCompute</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Main thread execution for aesthetics processing.</p>

<p>Executes ProcessPipe computation with focus on aesthetics analysis.
Updates pipeline parameters, performs Python-based computation
with timing metrics, and triggers completion callback.</p>
</div>


                            </div>
                </section>
    </main>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let search, searchErr;

    async function initialize() {
        try {
            search = await new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.type = "text/javascript";
                script.async = true;
                script.onload = () => resolve(window.pdocSearch);
                script.onerror = (e) => reject(e);
                script.src = "../search.js";
                document.getElementsByTagName("head")[0].appendChild(script);
            });
        } catch (e) {
            console.error("Cannot fetch pdoc search index");
            searchErr = "Cannot fetch search index.";
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const term = getSearchTerm();
            if (!term) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!search) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = search(term);

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(term)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(term)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `../${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.kind) {
                    case "function":
                        if (doc.fullname.endsWith(".__init__")) {
                            heading = `<span class="name">${doc.fullname.replace(/\.__init__$/, "")}</span>${doc.signature}`;
                        } else {
                            heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span>${doc.signature}`;
                        }
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        if (doc.bases)
                            heading += `<wbr>(<span class="base">${doc.bases}</span>)`;
                        heading += `:`;
                        break;
                    case "variable":
                        heading = `<span class="name">${doc.fullname}</span>`;
                        if (doc.annotation)
                            heading += `<span class="annotation">${doc.annotation}</span>`;
                        if (doc.default_value)
                            heading += `<span class="default_value"> = ${doc.default_value}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.kind}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>