<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 15.0.3"/>
    <title>hdrCore.image API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;z-index:999;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent; z-index:1}nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:.75rem center;margin-bottom:1rem;}.pdoc .alert > em{display:none;}.pdoc .alert > *:last-child{margin-bottom:0;}.pdoc .alert.note{color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .alert.tip{color:#0a3622;background-color:#d1e7dd;border-color:#a3cfbb;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%230a3622%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M2%206a6%206%200%201%201%2010.174%204.31c-.203.196-.359.4-.453.619l-.762%201.769A.5.5%200%200%201%2010.5%2013a.5.5%200%200%201%200%201%20.5.5%200%200%201%200%201l-.224.447a1%201%200%200%201-.894.553H6.618a1%201%200%200%201-.894-.553L5.5%2015a.5.5%200%200%201%200-1%20.5.5%200%200%201%200-1%20.5.5%200%200%201-.46-.302l-.761-1.77a2%202%200%200%200-.453-.618A5.98%205.98%200%200%201%202%206m6-5a5%205%200%200%200-3.479%208.592c.263.254.514.564.676.941L5.83%2012h4.342l.632-1.467c.162-.377.413-.687.676-.941A5%205%200%200%200%208%201%22/%3E%3C/svg%3E");}.pdoc .alert.important{color:#055160;background-color:#cff4fc;border-color:#9eeaf9;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23055160%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M2%200a2%202%200%200%200-2%202v12a2%202%200%200%200%202%202h12a2%202%200%200%200%202-2V2a2%202%200%200%200-2-2zm6%204c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%204.995A.905.905%200%200%201%208%204m.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2%22/%3E%3C/svg%3E");}.pdoc .alert.warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .alert.caution{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M11.46.146A.5.5%200%200%200%2011.107%200H4.893a.5.5%200%200%200-.353.146L.146%204.54A.5.5%200%200%200%200%204.893v6.214a.5.5%200%200%200%20.146.353l4.394%204.394a.5.5%200%200%200%20.353.146h6.214a.5.5%200%200%200%20.353-.146l4.394-4.394a.5.5%200%200%200%20.146-.353V4.893a.5.5%200%200%200-.146-.353zM8%204c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%204.995A.905.905%200%200%201%208%204m.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2%22/%3E%3C/svg%3E");}.pdoc .alert.danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--accent);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .decorator-deprecated{color:#842029;}.pdoc .decorator-deprecated ~ span{filter:grayscale(1) opacity(0.8);}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>            <a class="pdoc-button module-list-button" href="../hdrCore.html">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-left" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0v-2z"/>
  <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
</svg>                &nbsp;hdrCore</a>


            <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                   pattern=".+" required>



            <h2>API Documentation</h2>
                <ul class="memberlist">
            <li>
                    <a class="class" href="#imageType">imageType</a>
                            <ul class="memberlist">
                        <li>
                                <a class="variable" href="#imageType.SDR">SDR</a>
                        </li>
                        <li>
                                <a class="variable" href="#imageType.ARW">ARW</a>
                        </li>
                        <li>
                                <a class="variable" href="#imageType.HDR">HDR</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#channel">channel</a>
                            <ul class="memberlist">
                        <li>
                                <a class="variable" href="#channel.sR">sR</a>
                        </li>
                        <li>
                                <a class="variable" href="#channel.sG">sG</a>
                        </li>
                        <li>
                                <a class="variable" href="#channel.sB">sB</a>
                        </li>
                        <li>
                                <a class="variable" href="#channel.sRGB">sRGB</a>
                        </li>
                        <li>
                                <a class="variable" href="#channel.X">X</a>
                        </li>
                        <li>
                                <a class="variable" href="#channel.Y">Y</a>
                        </li>
                        <li>
                                <a class="variable" href="#channel.Z">Z</a>
                        </li>
                        <li>
                                <a class="variable" href="#channel.XYZ">XYZ</a>
                        </li>
                        <li>
                                <a class="variable" href="#channel.L">L</a>
                        </li>
                        <li>
                                <a class="variable" href="#channel.a">a</a>
                        </li>
                        <li>
                                <a class="variable" href="#channel.b">b</a>
                        </li>
                        <li>
                                <a class="variable" href="#channel.Lab">Lab</a>
                        </li>
                        <li>
                                <a class="function" href="#channel.colorSpace">colorSpace</a>
                        </li>
                        <li>
                                <a class="function" href="#channel.getValue">getValue</a>
                        </li>
                        <li>
                                <a class="function" href="#channel.toChannel">toChannel</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Image">Image</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Image.__init__">Image</a>
                        </li>
                        <li>
                                <a class="variable" href="#Image.path">path</a>
                        </li>
                        <li>
                                <a class="variable" href="#Image.name">name</a>
                        </li>
                        <li>
                                <a class="variable" href="#Image.colorData">colorData</a>
                        </li>
                        <li>
                                <a class="variable" href="#Image.shape">shape</a>
                        </li>
                        <li>
                                <a class="variable" href="#Image.type">type</a>
                        </li>
                        <li>
                                <a class="variable" href="#Image.linear">linear</a>
                        </li>
                        <li>
                                <a class="variable" href="#Image.colorSpace">colorSpace</a>
                        </li>
                        <li>
                                <a class="variable" href="#Image.scalingFactor">scalingFactor</a>
                        </li>
                        <li>
                                <a class="variable" href="#Image.metadata">metadata</a>
                        </li>
                        <li>
                                <a class="variable" href="#Image.histogram">histogram</a>
                        </li>
                        <li>
                                <a class="function" href="#Image.isHDR">isHDR</a>
                        </li>
                        <li>
                                <a class="function" href="#Image.process">process</a>
                        </li>
                        <li>
                                <a class="function" href="#Image.read">read</a>
                        </li>
                        <li>
                                <a class="function" href="#Image.write">write</a>
                        </li>
                        <li>
                                <a class="function" href="#Image.toOne">toOne</a>
                        </li>
                        <li>
                                <a class="function" href="#Image.getChannel">getChannel</a>
                        </li>
                        <li>
                                <a class="function" href="#Image.getDynamicRange">getDynamicRange</a>
                        </li>
                        <li>
                                <a class="function" href="#Image.buildHistogram">buildHistogram</a>
                        </li>
                        <li>
                                <a class="function" href="#Image.plot">plot</a>
                        </li>
                        <li>
                                <a class="function" href="#Image.buildLchColorData">buildLchColorData</a>
                        </li>
                        <li>
                                <a class="function" href="#Image.split">split</a>
                        </li>
                        <li>
                                <a class="function" href="#Image.merge">merge</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#ColorSpace">ColorSpace</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#ColorSpace.Lab">Lab</a>
                        </li>
                        <li>
                                <a class="function" href="#ColorSpace.Lch">Lch</a>
                        </li>
                        <li>
                                <a class="function" href="#ColorSpace.sRGB">sRGB</a>
                        </li>
                        <li>
                                <a class="function" href="#ColorSpace.scRGB">scRGB</a>
                        </li>
                        <li>
                                <a class="function" href="#ColorSpace.XYZ">XYZ</a>
                        </li>
                        <li>
                                <a class="function" href="#ColorSpace.build">build</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#Histogram">Histogram</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Histogram.__init__">Histogram</a>
                        </li>
                        <li>
                                <a class="variable" href="#Histogram.name">name</a>
                        </li>
                        <li>
                                <a class="variable" href="#Histogram.channel">channel</a>
                        </li>
                        <li>
                                <a class="variable" href="#Histogram.histValue">histValue</a>
                        </li>
                        <li>
                                <a class="variable" href="#Histogram.edgeValue">edgeValue</a>
                        </li>
                        <li>
                                <a class="variable" href="#Histogram.logSpace">logSpace</a>
                        </li>
                        <li>
                                <a class="function" href="#Histogram.normalise">normalise</a>
                        </li>
                        <li>
                                <a class="function" href="#Histogram.build">build</a>
                        </li>
                        <li>
                                <a class="function" href="#Histogram.plot">plot</a>
                        </li>
                        <li>
                                <a class="function" href="#Histogram.toNumpy">toNumpy</a>
                        </li>
                </ul>

            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
<a href="./../hdrCore.html">hdrCore</a><wbr>.image    </h1>

                        <div class="docstring"><p>HDR Core Image Module</p>

<p>This module provides the fundamental image classes and utilities for HDR image processing
within the uHDR system. It includes comprehensive image data structures, color space
management, histogram computation, and image manipulation capabilities.</p>

<p>The module supports multiple image types (SDR, RAW, HDR) and provides robust color space
conversion and channel management. It integrates with various image formats and metadata
systems for complete HDR imaging workflows.</p>

<p>Classes:
    imageType: Enumeration for different image types (SDR, ARW, HDR)
    channel: Channel identification and color space management
    Image: Core image data structure with processing capabilities
    ColorSpace: Color space definitions and transformations
    Histogram: Image histogram computation and analysis</p>

<p>Key Features:
    - Multi-format image loading (HDR, RAW, JPEG)
    - Color space conversions (sRGB, XYZ, Lab, LCH)
    - HDR-specific processing and metadata handling
    - Thumbnail generation and caching
    - Dynamic range computation
    - Image splitting and merging operations</p>
</div>

                        <input id="mod-image-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-image-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos">  1</span></a><span class="c1"># uHDR: HDR image editing software</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos">  2</span></a><span class="c1">#   Copyright (C) 2021  remi cozot </span>
</span><span id="L-3"><a href="#L-3"><span class="linenos">  3</span></a><span class="c1">#</span>
</span><span id="L-4"><a href="#L-4"><span class="linenos">  4</span></a><span class="c1">#    This program is free software: you can redistribute it and/or modify</span>
</span><span id="L-5"><a href="#L-5"><span class="linenos">  5</span></a><span class="c1">#    it under the terms of the GNU General Public License as published by</span>
</span><span id="L-6"><a href="#L-6"><span class="linenos">  6</span></a><span class="c1">#    the Free Software Foundation, either version 3 of the License, or</span>
</span><span id="L-7"><a href="#L-7"><span class="linenos">  7</span></a><span class="c1">#    (at your option) any later version.</span>
</span><span id="L-8"><a href="#L-8"><span class="linenos">  8</span></a><span class="c1">#</span>
</span><span id="L-9"><a href="#L-9"><span class="linenos">  9</span></a><span class="c1">#    This program is distributed in the hope that it will be useful,</span>
</span><span id="L-10"><a href="#L-10"><span class="linenos"> 10</span></a><span class="c1">#    but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
</span><span id="L-11"><a href="#L-11"><span class="linenos"> 11</span></a><span class="c1">#    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
</span><span id="L-12"><a href="#L-12"><span class="linenos"> 12</span></a><span class="c1">#    GNU General Public License for more details.</span>
</span><span id="L-13"><a href="#L-13"><span class="linenos"> 13</span></a><span class="c1">#</span>
</span><span id="L-14"><a href="#L-14"><span class="linenos"> 14</span></a><span class="c1"># hdrCore project 2020</span>
</span><span id="L-15"><a href="#L-15"><span class="linenos"> 15</span></a><span class="c1"># author: remi.cozot@univ-littoral.fr</span>
</span><span id="L-16"><a href="#L-16"><span class="linenos"> 16</span></a>
</span><span id="L-17"><a href="#L-17"><span class="linenos"> 17</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-18"><a href="#L-18"><span class="linenos"> 18</span></a><span class="c1"># --- Package hdrCore ---------------------------------------------------------</span>
</span><span id="L-19"><a href="#L-19"><span class="linenos"> 19</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-20"><a href="#L-20"><span class="linenos"> 20</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-21"><a href="#L-21"><span class="linenos"> 21</span></a><span class="sd">HDR Core Image Module</span>
</span><span id="L-22"><a href="#L-22"><span class="linenos"> 22</span></a>
</span><span id="L-23"><a href="#L-23"><span class="linenos"> 23</span></a><span class="sd">This module provides the fundamental image classes and utilities for HDR image processing</span>
</span><span id="L-24"><a href="#L-24"><span class="linenos"> 24</span></a><span class="sd">within the uHDR system. It includes comprehensive image data structures, color space</span>
</span><span id="L-25"><a href="#L-25"><span class="linenos"> 25</span></a><span class="sd">management, histogram computation, and image manipulation capabilities.</span>
</span><span id="L-26"><a href="#L-26"><span class="linenos"> 26</span></a>
</span><span id="L-27"><a href="#L-27"><span class="linenos"> 27</span></a><span class="sd">The module supports multiple image types (SDR, RAW, HDR) and provides robust color space</span>
</span><span id="L-28"><a href="#L-28"><span class="linenos"> 28</span></a><span class="sd">conversion and channel management. It integrates with various image formats and metadata</span>
</span><span id="L-29"><a href="#L-29"><span class="linenos"> 29</span></a><span class="sd">systems for complete HDR imaging workflows.</span>
</span><span id="L-30"><a href="#L-30"><span class="linenos"> 30</span></a>
</span><span id="L-31"><a href="#L-31"><span class="linenos"> 31</span></a><span class="sd">Classes:</span>
</span><span id="L-32"><a href="#L-32"><span class="linenos"> 32</span></a><span class="sd">    imageType: Enumeration for different image types (SDR, ARW, HDR)</span>
</span><span id="L-33"><a href="#L-33"><span class="linenos"> 33</span></a><span class="sd">    channel: Channel identification and color space management</span>
</span><span id="L-34"><a href="#L-34"><span class="linenos"> 34</span></a><span class="sd">    Image: Core image data structure with processing capabilities</span>
</span><span id="L-35"><a href="#L-35"><span class="linenos"> 35</span></a><span class="sd">    ColorSpace: Color space definitions and transformations</span>
</span><span id="L-36"><a href="#L-36"><span class="linenos"> 36</span></a><span class="sd">    Histogram: Image histogram computation and analysis</span>
</span><span id="L-37"><a href="#L-37"><span class="linenos"> 37</span></a>
</span><span id="L-38"><a href="#L-38"><span class="linenos"> 38</span></a><span class="sd">Key Features:</span>
</span><span id="L-39"><a href="#L-39"><span class="linenos"> 39</span></a><span class="sd">    - Multi-format image loading (HDR, RAW, JPEG)</span>
</span><span id="L-40"><a href="#L-40"><span class="linenos"> 40</span></a><span class="sd">    - Color space conversions (sRGB, XYZ, Lab, LCH)</span>
</span><span id="L-41"><a href="#L-41"><span class="linenos"> 41</span></a><span class="sd">    - HDR-specific processing and metadata handling</span>
</span><span id="L-42"><a href="#L-42"><span class="linenos"> 42</span></a><span class="sd">    - Thumbnail generation and caching</span>
</span><span id="L-43"><a href="#L-43"><span class="linenos"> 43</span></a><span class="sd">    - Dynamic range computation</span>
</span><span id="L-44"><a href="#L-44"><span class="linenos"> 44</span></a><span class="sd">    - Image splitting and merging operations</span>
</span><span id="L-45"><a href="#L-45"><span class="linenos"> 45</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-46"><a href="#L-46"><span class="linenos"> 46</span></a>
</span><span id="L-47"><a href="#L-47"><span class="linenos"> 47</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-48"><a href="#L-48"><span class="linenos"> 48</span></a><span class="c1"># --- Import ------------------------------------------------------------------</span>
</span><span id="L-49"><a href="#L-49"><span class="linenos"> 49</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-50"><a href="#L-50"><span class="linenos"> 50</span></a><span class="kn">import</span><span class="w"> </span><span class="nn">enum</span><span class="o">,</span><span class="w"> </span><span class="nn">rawpy</span><span class="o">,</span><span class="w"> </span><span class="nn">colour</span><span class="o">,</span><span class="w"> </span><span class="nn">imageio</span><span class="o">,</span><span class="w"> </span><span class="nn">copy</span><span class="o">,</span><span class="w"> </span><span class="nn">os</span><span class="o">,</span><span class="w"> </span><span class="nn">functools</span><span class="o">,</span><span class="w"> </span><span class="nn">skimage.transform</span>
</span><span id="L-51"><a href="#L-51"><span class="linenos"> 51</span></a><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
</span><span id="L-52"><a href="#L-52"><span class="linenos"> 52</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">.</span><span class="w"> </span><span class="kn">import</span> <span class="n">utils</span><span class="p">,</span> <span class="n">processing</span><span class="p">,</span> <span class="n">metadata</span>
</span><span id="L-53"><a href="#L-53"><span class="linenos"> 53</span></a><span class="kn">import</span><span class="w"> </span><span class="nn">preferences.preferences</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pref</span>
</span><span id="L-54"><a href="#L-54"><span class="linenos"> 54</span></a>
</span><span id="L-55"><a href="#L-55"><span class="linenos"> 55</span></a><span class="n">imageio</span><span class="o">.</span><span class="n">plugins</span><span class="o">.</span><span class="n">freeimage</span><span class="o">.</span><span class="n">download</span><span class="p">()</span>
</span><span id="L-56"><a href="#L-56"><span class="linenos"> 56</span></a>
</span><span id="L-57"><a href="#L-57"><span class="linenos"> 57</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-58"><a href="#L-58"><span class="linenos"> 58</span></a><span class="c1"># --- Class imageType --------------------------------------------------------</span>
</span><span id="L-59"><a href="#L-59"><span class="linenos"> 59</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-60"><a href="#L-60"><span class="linenos"> 60</span></a><span class="k">class</span><span class="w"> </span><span class="nc">imageType</span><span class="p">(</span><span class="n">enum</span><span class="o">.</span><span class="n">Enum</span><span class="p">):</span>
</span><span id="L-61"><a href="#L-61"><span class="linenos"> 61</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-62"><a href="#L-62"><span class="linenos"> 62</span></a><span class="sd">    Enumeration for different image file types supported by uHDR.</span>
</span><span id="L-63"><a href="#L-63"><span class="linenos"> 63</span></a><span class="sd">    </span>
</span><span id="L-64"><a href="#L-64"><span class="linenos"> 64</span></a><span class="sd">    This enumeration defines the standard image types that can be processed</span>
</span><span id="L-65"><a href="#L-65"><span class="linenos"> 65</span></a><span class="sd">    within the HDR imaging pipeline, each with specific handling requirements.</span>
</span><span id="L-66"><a href="#L-66"><span class="linenos"> 66</span></a><span class="sd">    </span>
</span><span id="L-67"><a href="#L-67"><span class="linenos"> 67</span></a><span class="sd">    Attributes:</span>
</span><span id="L-68"><a href="#L-68"><span class="linenos"> 68</span></a><span class="sd">        SDR (int): Standard Dynamic Range images (.jpg, .png)</span>
</span><span id="L-69"><a href="#L-69"><span class="linenos"> 69</span></a><span class="sd">        ARW (int): Sony RAW image files (.arw)</span>
</span><span id="L-70"><a href="#L-70"><span class="linenos"> 70</span></a><span class="sd">        HDR (int): High Dynamic Range images (.hdr, .exr)</span>
</span><span id="L-71"><a href="#L-71"><span class="linenos"> 71</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-72"><a href="#L-72"><span class="linenos"> 72</span></a>
</span><span id="L-73"><a href="#L-73"><span class="linenos"> 73</span></a>    <span class="n">SDR</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># SDR image:                (.jpg)</span>
</span><span id="L-74"><a href="#L-74"><span class="linenos"> 74</span></a>    <span class="n">ARW</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># raw image file: sony ARW  (.arw)</span>
</span><span id="L-75"><a href="#L-75"><span class="linenos"> 75</span></a>    <span class="n">HDR</span> <span class="o">=</span> <span class="mi">2</span> <span class="c1"># hdr file:                 (.hdr)</span>
</span><span id="L-76"><a href="#L-76"><span class="linenos"> 76</span></a>
</span><span id="L-77"><a href="#L-77"><span class="linenos"> 77</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-78"><a href="#L-78"><span class="linenos"> 78</span></a><span class="c1"># --- Class channel ----------------------------------------------------------</span>
</span><span id="L-79"><a href="#L-79"><span class="linenos"> 79</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-80"><a href="#L-80"><span class="linenos"> 80</span></a><span class="k">class</span><span class="w"> </span><span class="nc">channel</span><span class="p">(</span><span class="n">enum</span><span class="o">.</span><span class="n">Enum</span><span class="p">):</span>
</span><span id="L-81"><a href="#L-81"><span class="linenos"> 81</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-82"><a href="#L-82"><span class="linenos"> 82</span></a><span class="sd">    Channel identification and color space management enumeration.</span>
</span><span id="L-83"><a href="#L-83"><span class="linenos"> 83</span></a><span class="sd">    </span>
</span><span id="L-84"><a href="#L-84"><span class="linenos"> 84</span></a><span class="sd">    This class provides constants and methods for managing individual color channels</span>
</span><span id="L-85"><a href="#L-85"><span class="linenos"> 85</span></a><span class="sd">    across different color spaces (sRGB, XYZ, Lab). It supports both single channel</span>
</span><span id="L-86"><a href="#L-86"><span class="linenos"> 86</span></a><span class="sd">    access and full color space operations.</span>
</span><span id="L-87"><a href="#L-87"><span class="linenos"> 87</span></a><span class="sd">    </span>
</span><span id="L-88"><a href="#L-88"><span class="linenos"> 88</span></a><span class="sd">    Attributes:</span>
</span><span id="L-89"><a href="#L-89"><span class="linenos"> 89</span></a><span class="sd">        sR, sG, sB (int): Individual sRGB color channels (0, 1, 2)</span>
</span><span id="L-90"><a href="#L-90"><span class="linenos"> 90</span></a><span class="sd">        sRGB (int): Full sRGB color space identifier (3)</span>
</span><span id="L-91"><a href="#L-91"><span class="linenos"> 91</span></a><span class="sd">        X, Y, Z (int): Individual XYZ color channels (4, 5, 6)</span>
</span><span id="L-92"><a href="#L-92"><span class="linenos"> 92</span></a><span class="sd">        XYZ (int): Full XYZ color space identifier (7)</span>
</span><span id="L-93"><a href="#L-93"><span class="linenos"> 93</span></a><span class="sd">        L, a, b (int): Individual Lab color channels (8, 9, 10)</span>
</span><span id="L-94"><a href="#L-94"><span class="linenos"> 94</span></a><span class="sd">        Lab (int): Full Lab color space identifier (11)</span>
</span><span id="L-95"><a href="#L-95"><span class="linenos"> 95</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-96"><a href="#L-96"><span class="linenos"> 96</span></a>    
</span><span id="L-97"><a href="#L-97"><span class="linenos"> 97</span></a>    <span class="n">sR</span>      <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-98"><a href="#L-98"><span class="linenos"> 98</span></a>    <span class="n">sG</span>      <span class="o">=</span> <span class="mi">1</span>
</span><span id="L-99"><a href="#L-99"><span class="linenos"> 99</span></a>    <span class="n">sB</span>      <span class="o">=</span> <span class="mi">2</span>
</span><span id="L-100"><a href="#L-100"><span class="linenos">100</span></a>
</span><span id="L-101"><a href="#L-101"><span class="linenos">101</span></a>    <span class="n">sRGB</span>    <span class="o">=</span> <span class="mi">3</span>
</span><span id="L-102"><a href="#L-102"><span class="linenos">102</span></a>
</span><span id="L-103"><a href="#L-103"><span class="linenos">103</span></a>    <span class="n">X</span>       <span class="o">=</span> <span class="mi">4</span>
</span><span id="L-104"><a href="#L-104"><span class="linenos">104</span></a>    <span class="n">Y</span>       <span class="o">=</span> <span class="mi">5</span>
</span><span id="L-105"><a href="#L-105"><span class="linenos">105</span></a>    <span class="n">Z</span>       <span class="o">=</span> <span class="mi">6</span>
</span><span id="L-106"><a href="#L-106"><span class="linenos">106</span></a>
</span><span id="L-107"><a href="#L-107"><span class="linenos">107</span></a>    <span class="n">XYZ</span>     <span class="o">=</span> <span class="mi">7</span>
</span><span id="L-108"><a href="#L-108"><span class="linenos">108</span></a>
</span><span id="L-109"><a href="#L-109"><span class="linenos">109</span></a>    <span class="n">L</span>       <span class="o">=</span> <span class="mi">8</span>
</span><span id="L-110"><a href="#L-110"><span class="linenos">110</span></a>    <span class="n">a</span>       <span class="o">=</span> <span class="mi">9</span>
</span><span id="L-111"><a href="#L-111"><span class="linenos">111</span></a>    <span class="n">b</span>       <span class="o">=</span> <span class="mi">10</span>
</span><span id="L-112"><a href="#L-112"><span class="linenos">112</span></a>
</span><span id="L-113"><a href="#L-113"><span class="linenos">113</span></a>    <span class="n">Lab</span>     <span class="o">=</span> <span class="mi">11</span>
</span><span id="L-114"><a href="#L-114"><span class="linenos">114</span></a>
</span><span id="L-115"><a href="#L-115"><span class="linenos">115</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">colorSpace</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-116"><a href="#L-116"><span class="linenos">116</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-117"><a href="#L-117"><span class="linenos">117</span></a><span class="sd">        Retrieve the color space name for this channel.</span>
</span><span id="L-118"><a href="#L-118"><span class="linenos">118</span></a><span class="sd">        </span>
</span><span id="L-119"><a href="#L-119"><span class="linenos">119</span></a><span class="sd">        Returns:</span>
</span><span id="L-120"><a href="#L-120"><span class="linenos">120</span></a><span class="sd">            str: Color space type (&#39;sRGB&#39;, &#39;XYZ&#39;, or &#39;Lab&#39;)</span>
</span><span id="L-121"><a href="#L-121"><span class="linenos">121</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-122"><a href="#L-122"><span class="linenos">122</span></a>        <span class="n">csIdx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">//</span> <span class="mi">4</span>
</span><span id="L-123"><a href="#L-123"><span class="linenos">123</span></a>        <span class="n">res</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-124"><a href="#L-124"><span class="linenos">124</span></a>        <span class="k">if</span> <span class="n">csIdx</span>   <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>    <span class="n">res</span> <span class="o">=</span><span class="s1">&#39;sRGB&#39;</span>
</span><span id="L-125"><a href="#L-125"><span class="linenos">125</span></a>        <span class="k">elif</span> <span class="n">csIdx</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>    <span class="n">res</span> <span class="o">=</span> <span class="s1">&#39;XYZ&#39;</span>
</span><span id="L-126"><a href="#L-126"><span class="linenos">126</span></a>        <span class="k">elif</span> <span class="n">csIdx</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>    <span class="n">res</span> <span class="o">=</span> <span class="s1">&#39;Lab&#39;</span>
</span><span id="L-127"><a href="#L-127"><span class="linenos">127</span></a>
</span><span id="L-128"><a href="#L-128"><span class="linenos">128</span></a>        <span class="k">return</span> <span class="n">res</span>
</span><span id="L-129"><a href="#L-129"><span class="linenos">129</span></a>
</span><span id="L-130"><a href="#L-130"><span class="linenos">130</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getValue</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-131"><a href="#L-131"><span class="linenos">131</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-132"><a href="#L-132"><span class="linenos">132</span></a><span class="sd">        Retrieve the channel index within its color space.</span>
</span><span id="L-133"><a href="#L-133"><span class="linenos">133</span></a><span class="sd">        </span>
</span><span id="L-134"><a href="#L-134"><span class="linenos">134</span></a><span class="sd">        Returns:</span>
</span><span id="L-135"><a href="#L-135"><span class="linenos">135</span></a><span class="sd">            int: Channel index (0-3) within the color space</span>
</span><span id="L-136"><a href="#L-136"><span class="linenos">136</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-137"><a href="#L-137"><span class="linenos">137</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">%</span> <span class="mi">4</span>
</span><span id="L-138"><a href="#L-138"><span class="linenos">138</span></a>
</span><span id="L-139"><a href="#L-139"><span class="linenos">139</span></a>    <span class="nd">@staticmethod</span>
</span><span id="L-140"><a href="#L-140"><span class="linenos">140</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">toChannel</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
</span><span id="L-141"><a href="#L-141"><span class="linenos">141</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-142"><a href="#L-142"><span class="linenos">142</span></a><span class="sd">        Convert a channel name string to its corresponding channel constant.</span>
</span><span id="L-143"><a href="#L-143"><span class="linenos">143</span></a><span class="sd">        </span>
</span><span id="L-144"><a href="#L-144"><span class="linenos">144</span></a><span class="sd">        Args:</span>
</span><span id="L-145"><a href="#L-145"><span class="linenos">145</span></a><span class="sd">            s (str): Channel name (&#39;sR&#39;, &#39;sG&#39;, &#39;sB&#39;, &#39;X&#39;, &#39;Y&#39;, &#39;Z&#39;, &#39;L&#39;, &#39;a&#39;, &#39;b&#39;)</span>
</span><span id="L-146"><a href="#L-146"><span class="linenos">146</span></a><span class="sd">            </span>
</span><span id="L-147"><a href="#L-147"><span class="linenos">147</span></a><span class="sd">        Returns:</span>
</span><span id="L-148"><a href="#L-148"><span class="linenos">148</span></a><span class="sd">            channel: Corresponding channel enumeration value</span>
</span><span id="L-149"><a href="#L-149"><span class="linenos">149</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-150"><a href="#L-150"><span class="linenos">150</span></a>        <span class="k">if</span> <span class="n">s</span><span class="o">==</span><span class="s1">&#39;sR&#39;</span> <span class="p">:</span>    <span class="k">return</span> <span class="n">channel</span><span class="o">.</span><span class="n">sR</span>
</span><span id="L-151"><a href="#L-151"><span class="linenos">151</span></a>        <span class="k">elif</span> <span class="n">s</span><span class="o">==</span><span class="s1">&#39;sG&#39;</span> <span class="p">:</span>  <span class="k">return</span> <span class="n">channel</span><span class="o">.</span><span class="n">sG</span>
</span><span id="L-152"><a href="#L-152"><span class="linenos">152</span></a>        <span class="k">elif</span> <span class="n">s</span><span class="o">==</span><span class="s1">&#39;sB&#39;</span> <span class="p">:</span>  <span class="k">return</span> <span class="n">channel</span><span class="o">.</span><span class="n">sB</span>
</span><span id="L-153"><a href="#L-153"><span class="linenos">153</span></a>
</span><span id="L-154"><a href="#L-154"><span class="linenos">154</span></a>        <span class="k">elif</span> <span class="n">s</span><span class="o">==</span><span class="s1">&#39;X&#39;</span> <span class="p">:</span>   <span class="k">return</span> <span class="n">channel</span><span class="o">.</span><span class="n">X</span>
</span><span id="L-155"><a href="#L-155"><span class="linenos">155</span></a>        <span class="k">elif</span> <span class="n">s</span><span class="o">==</span><span class="s1">&#39;Y&#39;</span> <span class="p">:</span>   <span class="k">return</span> <span class="n">channel</span><span class="o">.</span><span class="n">Y</span>
</span><span id="L-156"><a href="#L-156"><span class="linenos">156</span></a>        <span class="k">elif</span> <span class="n">s</span><span class="o">==</span><span class="s1">&#39;Z&#39;</span> <span class="p">:</span>   <span class="k">return</span> <span class="n">channel</span><span class="o">.</span><span class="n">Z</span>
</span><span id="L-157"><a href="#L-157"><span class="linenos">157</span></a>
</span><span id="L-158"><a href="#L-158"><span class="linenos">158</span></a>        <span class="k">elif</span> <span class="n">s</span><span class="o">==</span><span class="s1">&#39;L&#39;</span> <span class="p">:</span>   <span class="k">return</span> <span class="n">channel</span><span class="o">.</span><span class="n">L</span>
</span><span id="L-159"><a href="#L-159"><span class="linenos">159</span></a>        <span class="k">elif</span> <span class="n">s</span><span class="o">==</span><span class="s1">&#39;a&#39;</span> <span class="p">:</span>   <span class="k">return</span> <span class="n">channel</span><span class="o">.</span><span class="n">a</span>
</span><span id="L-160"><a href="#L-160"><span class="linenos">160</span></a>        <span class="k">elif</span> <span class="n">s</span><span class="o">==</span><span class="s1">&#39;b&#39;</span> <span class="p">:</span>   <span class="k">return</span> <span class="n">channel</span><span class="o">.</span><span class="n">b</span>
</span><span id="L-161"><a href="#L-161"><span class="linenos">161</span></a>
</span><span id="L-162"><a href="#L-162"><span class="linenos">162</span></a>        <span class="k">else</span><span class="p">:</span>           <span class="k">return</span> <span class="n">channel</span><span class="o">.</span><span class="n">L</span>       
</span><span id="L-163"><a href="#L-163"><span class="linenos">163</span></a><span class="c1"># -----------------------------------------------------------------------------        </span>
</span><span id="L-164"><a href="#L-164"><span class="linenos">164</span></a><span class="c1"># --- Class Image ------------------------------------------------------------</span>
</span><span id="L-165"><a href="#L-165"><span class="linenos">165</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-166"><a href="#L-166"><span class="linenos">166</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Image</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
</span><span id="L-167"><a href="#L-167"><span class="linenos">167</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-168"><a href="#L-168"><span class="linenos">168</span></a><span class="sd">    Core HDR image data structure with comprehensive processing capabilities.</span>
</span><span id="L-169"><a href="#L-169"><span class="linenos">169</span></a><span class="sd">    </span>
</span><span id="L-170"><a href="#L-170"><span class="linenos">170</span></a><span class="sd">    This class represents the fundamental image object in the uHDR system, containing</span>
</span><span id="L-171"><a href="#L-171"><span class="linenos">171</span></a><span class="sd">    pixel data, metadata, and all necessary information for HDR image processing.</span>
</span><span id="L-172"><a href="#L-172"><span class="linenos">172</span></a><span class="sd">    It supports various image formats, color spaces, and provides methods for</span>
</span><span id="L-173"><a href="#L-173"><span class="linenos">173</span></a><span class="sd">    image manipulation, analysis, and processing pipeline integration.</span>
</span><span id="L-174"><a href="#L-174"><span class="linenos">174</span></a><span class="sd">    </span>
</span><span id="L-175"><a href="#L-175"><span class="linenos">175</span></a><span class="sd">    Attributes:</span>
</span><span id="L-176"><a href="#L-176"><span class="linenos">176</span></a><span class="sd">        path (str): Directory path to the image file</span>
</span><span id="L-177"><a href="#L-177"><span class="linenos">177</span></a><span class="sd">        name (str): Image filename with extension</span>
</span><span id="L-178"><a href="#L-178"><span class="linenos">178</span></a><span class="sd">        colorData (numpy.ndarray): Image pixel data as 3D array (height, width, channels)</span>
</span><span id="L-179"><a href="#L-179"><span class="linenos">179</span></a><span class="sd">        shape (tuple): Image dimensions (height, width, channels)</span>
</span><span id="L-180"><a href="#L-180"><span class="linenos">180</span></a><span class="sd">        type (imageType): Image type classification (SDR, ARW, HDR)</span>
</span><span id="L-181"><a href="#L-181"><span class="linenos">181</span></a><span class="sd">        linear (bool): Whether image data is in linear color space</span>
</span><span id="L-182"><a href="#L-182"><span class="linenos">182</span></a><span class="sd">        colorSpace (colour.models.RGB_COLOURSPACES): Current color space definition</span>
</span><span id="L-183"><a href="#L-183"><span class="linenos">183</span></a><span class="sd">        scalingFactor (float): Scaling factor for normalizing to [0,1] range</span>
</span><span id="L-184"><a href="#L-184"><span class="linenos">184</span></a><span class="sd">        metadata (hdrCore.metadata.metadata): Associated metadata object</span>
</span><span id="L-185"><a href="#L-185"><span class="linenos">185</span></a><span class="sd">        histogram (Histogram): Image histogram data</span>
</span><span id="L-186"><a href="#L-186"><span class="linenos">186</span></a><span class="sd">    </span>
</span><span id="L-187"><a href="#L-187"><span class="linenos">187</span></a><span class="sd">    Methods:</span>
</span><span id="L-188"><a href="#L-188"><span class="linenos">188</span></a><span class="sd">        isHDR: Check if image is HDR type</span>
</span><span id="L-189"><a href="#L-189"><span class="linenos">189</span></a><span class="sd">        process: Apply processing operations</span>
</span><span id="L-190"><a href="#L-190"><span class="linenos">190</span></a><span class="sd">        write: Save image and metadata to disk</span>
</span><span id="L-191"><a href="#L-191"><span class="linenos">191</span></a><span class="sd">        getChannel: Extract specific color channel</span>
</span><span id="L-192"><a href="#L-192"><span class="linenos">192</span></a><span class="sd">        getDynamicRange: Calculate image dynamic range</span>
</span><span id="L-193"><a href="#L-193"><span class="linenos">193</span></a><span class="sd">        buildHistogram: Generate image histogram</span>
</span><span id="L-194"><a href="#L-194"><span class="linenos">194</span></a><span class="sd">        plot: Display image with optional tone mapping</span>
</span><span id="L-195"><a href="#L-195"><span class="linenos">195</span></a><span class="sd">        split: Divide image into sub-images</span>
</span><span id="L-196"><a href="#L-196"><span class="linenos">196</span></a><span class="sd">        </span>
</span><span id="L-197"><a href="#L-197"><span class="linenos">197</span></a><span class="sd">    Static Methods:</span>
</span><span id="L-198"><a href="#L-198"><span class="linenos">198</span></a><span class="sd">        read: Load image from file with format detection</span>
</span><span id="L-199"><a href="#L-199"><span class="linenos">199</span></a><span class="sd">        merge: Combine sub-images into single image</span>
</span><span id="L-200"><a href="#L-200"><span class="linenos">200</span></a><span class="sd">        buildLchColorData: Generate synthetic LCH color data</span>
</span><span id="L-201"><a href="#L-201"><span class="linenos">201</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-202"><a href="#L-202"><span class="linenos">202</span></a>
</span><span id="L-203"><a href="#L-203"><span class="linenos">203</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">colorData</span><span class="p">,</span> <span class="nb">type</span><span class="p">,</span> <span class="n">linear</span><span class="p">,</span> <span class="n">colorspace</span><span class="p">,</span> <span class="n">scalingFactor</span><span class="o">=</span><span class="mf">1.0</span><span class="p">):</span>
</span><span id="L-204"><a href="#L-204"><span class="linenos">204</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-205"><a href="#L-205"><span class="linenos">205</span></a><span class="sd">        Initialize a new Image object with specified parameters.</span>
</span><span id="L-206"><a href="#L-206"><span class="linenos">206</span></a><span class="sd">            </span>
</span><span id="L-207"><a href="#L-207"><span class="linenos">207</span></a><span class="sd">        Args:</span>
</span><span id="L-208"><a href="#L-208"><span class="linenos">208</span></a><span class="sd">            path (str): Directory path to the image file</span>
</span><span id="L-209"><a href="#L-209"><span class="linenos">209</span></a><span class="sd">            name (str): Image filename with extension</span>
</span><span id="L-210"><a href="#L-210"><span class="linenos">210</span></a><span class="sd">            colorData (numpy.ndarray): Pixel data array with shape (height, width, channels)</span>
</span><span id="L-211"><a href="#L-211"><span class="linenos">211</span></a><span class="sd">            type (imageType): Image type classification</span>
</span><span id="L-212"><a href="#L-212"><span class="linenos">212</span></a><span class="sd">            linear (bool): True if image data is in linear color space</span>
</span><span id="L-213"><a href="#L-213"><span class="linenos">213</span></a><span class="sd">            colorspace (colour.models.RGB_COLOURSPACES): Color space definition</span>
</span><span id="L-214"><a href="#L-214"><span class="linenos">214</span></a><span class="sd">            scalingFactor (float, optional): Scaling factor for [0,1] normalization (default: 1.0)</span>
</span><span id="L-215"><a href="#L-215"><span class="linenos">215</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-216"><a href="#L-216"><span class="linenos">216</span></a>
</span><span id="L-217"><a href="#L-217"><span class="linenos">217</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">path</span>           <span class="o">=</span> <span class="n">path</span>                          <span class="c1"># path to file          (str)</span>
</span><span id="L-218"><a href="#L-218"><span class="linenos">218</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">name</span>           <span class="o">=</span> <span class="n">name</span>                          <span class="c1"># filename              (str)</span>
</span><span id="L-219"><a href="#L-219"><span class="linenos">219</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">colorData</span>      <span class="o">=</span> <span class="n">colorData</span>                     <span class="c1"># float color data      (numpy.ndarray)</span>
</span><span id="L-220"><a href="#L-220"><span class="linenos">220</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">shape</span>          <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">colorData</span><span class="o">.</span><span class="n">shape</span>          <span class="c1"># image size height,width, color channel number (tuple)</span>
</span><span id="L-221"><a href="#L-221"><span class="linenos">221</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">type</span>           <span class="o">=</span> <span class="nb">type</span>                          <span class="c1"># image type            (hdrCore.image.imageType)</span>
</span><span id="L-222"><a href="#L-222"><span class="linenos">222</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">linear</span>         <span class="o">=</span> <span class="n">linear</span>                        <span class="c1"># image in RGB linear   (bool)</span>
</span><span id="L-223"><a href="#L-223"><span class="linenos">223</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">colorSpace</span>     <span class="o">=</span> <span class="n">colorspace</span>                    <span class="c1"># colorSpace            (colour.models.RGB_COLOURSPACES)</span>
</span><span id="L-224"><a href="#L-224"><span class="linenos">224</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">scalingFactor</span>  <span class="o">=</span> <span class="n">scalingFactor</span>                 <span class="c1"># scaling to factor to range [0,1] (float)</span>
</span><span id="L-225"><a href="#L-225"><span class="linenos">225</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span>       <span class="o">=</span> <span class="kc">None</span>                          <span class="c1"># associated meta data  (hdrCore.metadata.metadata)   </span>
</span><span id="L-226"><a href="#L-226"><span class="linenos">226</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">histogram</span>      <span class="o">=</span> <span class="kc">None</span>                          <span class="c1"># histogram             (hdrCore.image.Histogram)</span>
</span><span id="L-227"><a href="#L-227"><span class="linenos">227</span></a>
</span><span id="L-228"><a href="#L-228"><span class="linenos">228</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">isHDR</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-229"><a href="#L-229"><span class="linenos">229</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-230"><a href="#L-230"><span class="linenos">230</span></a><span class="sd">        Check if the image is of HDR type.</span>
</span><span id="L-231"><a href="#L-231"><span class="linenos">231</span></a><span class="sd">        </span>
</span><span id="L-232"><a href="#L-232"><span class="linenos">232</span></a><span class="sd">        Returns:</span>
</span><span id="L-233"><a href="#L-233"><span class="linenos">233</span></a><span class="sd">            bool: True if the image is HDR, False otherwise</span>
</span><span id="L-234"><a href="#L-234"><span class="linenos">234</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-235"><a href="#L-235"><span class="linenos">235</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">imageType</span><span class="o">.</span><span class="n">HDR</span>
</span><span id="L-236"><a href="#L-236"><span class="linenos">236</span></a>
</span><span id="L-237"><a href="#L-237"><span class="linenos">237</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">process</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="L-238"><a href="#L-238"><span class="linenos">238</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-239"><a href="#L-239"><span class="linenos">239</span></a><span class="sd">        Apply a processing operation to the image.</span>
</span><span id="L-240"><a href="#L-240"><span class="linenos">240</span></a><span class="sd">        </span>
</span><span id="L-241"><a href="#L-241"><span class="linenos">241</span></a><span class="sd">        This method applies a Processing object to the current image and returns</span>
</span><span id="L-242"><a href="#L-242"><span class="linenos">242</span></a><span class="sd">        a new processed image. The processing operation is defined by the process</span>
</span><span id="L-243"><a href="#L-243"><span class="linenos">243</span></a><span class="sd">        parameter and its compute method.</span>
</span><span id="L-244"><a href="#L-244"><span class="linenos">244</span></a><span class="sd">        </span>
</span><span id="L-245"><a href="#L-245"><span class="linenos">245</span></a><span class="sd">        Args:</span>
</span><span id="L-246"><a href="#L-246"><span class="linenos">246</span></a><span class="sd">            process (Processing): Processing object with compute method</span>
</span><span id="L-247"><a href="#L-247"><span class="linenos">247</span></a><span class="sd">            **kwargs: Additional parameters passed to the processing operation</span>
</span><span id="L-248"><a href="#L-248"><span class="linenos">248</span></a><span class="sd">                </span>
</span><span id="L-249"><a href="#L-249"><span class="linenos">249</span></a><span class="sd">        Returns:</span>
</span><span id="L-250"><a href="#L-250"><span class="linenos">250</span></a><span class="sd">            Image: New image object with processing applied</span>
</span><span id="L-251"><a href="#L-251"><span class="linenos">251</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-252"><a href="#L-252"><span class="linenos">252</span></a>        <span class="k">return</span> <span class="n">process</span><span class="o">.</span><span class="n">compute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="L-253"><a href="#L-253"><span class="linenos">253</span></a>
</span><span id="L-254"><a href="#L-254"><span class="linenos">254</span></a>    <span class="nd">@staticmethod</span>
</span><span id="L-255"><a href="#L-255"><span class="linenos">255</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">read</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">thumb</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="L-256"><a href="#L-256"><span class="linenos">256</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-257"><a href="#L-257"><span class="linenos">257</span></a><span class="sd">        Load an image from file with automatic format detection.</span>
</span><span id="L-258"><a href="#L-258"><span class="linenos">258</span></a><span class="sd">        </span>
</span><span id="L-259"><a href="#L-259"><span class="linenos">259</span></a><span class="sd">        This method provides comprehensive image loading with support for various</span>
</span><span id="L-260"><a href="#L-260"><span class="linenos">260</span></a><span class="sd">        formats including HDR (.hdr), RAW (.arw), and standard formats (.jpg).</span>
</span><span id="L-261"><a href="#L-261"><span class="linenos">261</span></a><span class="sd">        It handles thumbnail generation, metadata extraction, and color space</span>
</span><span id="L-262"><a href="#L-262"><span class="linenos">262</span></a><span class="sd">        configuration automatically.</span>
</span><span id="L-263"><a href="#L-263"><span class="linenos">263</span></a><span class="sd">        </span>
</span><span id="L-264"><a href="#L-264"><span class="linenos">264</span></a><span class="sd">        Args:</span>
</span><span id="L-265"><a href="#L-265"><span class="linenos">265</span></a><span class="sd">            filename (str): Complete path to the image file</span>
</span><span id="L-266"><a href="#L-266"><span class="linenos">266</span></a><span class="sd">            thumb (bool, optional): Whether to load/create thumbnail version (default: False)</span>
</span><span id="L-267"><a href="#L-267"><span class="linenos">267</span></a><span class="sd">                </span>
</span><span id="L-268"><a href="#L-268"><span class="linenos">268</span></a><span class="sd">        Returns:</span>
</span><span id="L-269"><a href="#L-269"><span class="linenos">269</span></a><span class="sd">            Image: Loaded image object with metadata and proper color space configuration</span>
</span><span id="L-270"><a href="#L-270"><span class="linenos">270</span></a><span class="sd">            </span>
</span><span id="L-271"><a href="#L-271"><span class="linenos">271</span></a><span class="sd">        Note:</span>
</span><span id="L-272"><a href="#L-272"><span class="linenos">272</span></a><span class="sd">            - For HDR images: Creates thumbnails in ./thumbnails/ directory when requested</span>
</span><span id="L-273"><a href="#L-273"><span class="linenos">273</span></a><span class="sd">            - For RAW images: Uses rawpy with sRGB output and camera white balance</span>
</span><span id="L-274"><a href="#L-274"><span class="linenos">274</span></a><span class="sd">            - Automatically loads existing metadata from .json files if available</span>
</span><span id="L-275"><a href="#L-275"><span class="linenos">275</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-276"><a href="#L-276"><span class="linenos">276</span></a>
</span><span id="L-277"><a href="#L-277"><span class="linenos">277</span></a>        <span class="n">imgDouble</span><span class="p">,</span> <span class="n">imgDoubleFull</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
</span><span id="L-278"><a href="#L-278"><span class="linenos">278</span></a>        <span class="c1"># image name</span>
</span><span id="L-279"><a href="#L-279"><span class="linenos">279</span></a>        <span class="n">path</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">ext</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">filenamesplit</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
</span><span id="L-280"><a href="#L-280"><span class="linenos">280</span></a>
</span><span id="L-281"><a href="#L-281"><span class="linenos">281</span></a>        <span class="c1"># load raw file using rawpy</span>
</span><span id="L-282"><a href="#L-282"><span class="linenos">282</span></a>        <span class="k">if</span> <span class="n">ext</span><span class="o">==</span><span class="s2">&quot;arw&quot;</span><span class="p">:</span>
</span><span id="L-283"><a href="#L-283"><span class="linenos">283</span></a>            <span class="n">outBit</span> <span class="o">=</span> <span class="mi">16</span>
</span><span id="L-284"><a href="#L-284"><span class="linenos">284</span></a>            <span class="n">raw</span> <span class="o">=</span> <span class="n">rawpy</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
</span><span id="L-285"><a href="#L-285"><span class="linenos">285</span></a>            <span class="n">ppParams</span> <span class="o">=</span> <span class="n">rawpy</span><span class="o">.</span><span class="n">Params</span><span class="p">(</span><span class="n">demosaic_algorithm</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">half_size</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> 
</span><span id="L-286"><a href="#L-286"><span class="linenos">286</span></a>                                            <span class="n">four_color_rgb</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">dcb_iterations</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> 
</span><span id="L-287"><a href="#L-287"><span class="linenos">287</span></a>                                            <span class="n">dcb_enhance</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">fbdd_noise_reduction</span><span class="o">=</span><span class="n">rawpy</span><span class="o">.</span><span class="n">FBDDNoiseReductionMode</span><span class="o">.</span><span class="n">Off</span><span class="p">,</span> 
</span><span id="L-288"><a href="#L-288"><span class="linenos">288</span></a>                                            <span class="n">noise_thr</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">median_filter_passes</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> 
</span><span id="L-289"><a href="#L-289"><span class="linenos">289</span></a>                                            <span class="n">use_camera_wb</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>                                 <span class="c1"># default False</span>
</span><span id="L-290"><a href="#L-290"><span class="linenos">290</span></a>                                            <span class="n">use_auto_wb</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> 
</span><span id="L-291"><a href="#L-291"><span class="linenos">291</span></a>                                            <span class="n">user_wb</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
</span><span id="L-292"><a href="#L-292"><span class="linenos">292</span></a>                                            <span class="n">output_color</span><span class="o">=</span><span class="n">rawpy</span><span class="o">.</span><span class="n">ColorSpace</span><span class="o">.</span><span class="n">sRGB</span><span class="p">,</span>                 <span class="c1"># output in SRGB</span>
</span><span id="L-293"><a href="#L-293"><span class="linenos">293</span></a>                                            <span class="n">output_bps</span><span class="o">=</span><span class="n">outBit</span><span class="p">,</span>                                  <span class="c1"># default 8</span>
</span><span id="L-294"><a href="#L-294"><span class="linenos">294</span></a>                                            <span class="n">user_flip</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">user_black</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
</span><span id="L-295"><a href="#L-295"><span class="linenos">295</span></a>                                            <span class="n">user_sat</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">no_auto_bright</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> 
</span><span id="L-296"><a href="#L-296"><span class="linenos">296</span></a>                                            <span class="n">auto_bright_thr</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">adjust_maximum_thr</span><span class="o">=</span><span class="mf">0.75</span><span class="p">,</span> 
</span><span id="L-297"><a href="#L-297"><span class="linenos">297</span></a>                                            <span class="n">bright</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">highlight_mode</span><span class="o">=</span><span class="n">rawpy</span><span class="o">.</span><span class="n">HighlightMode</span><span class="o">.</span><span class="n">Clip</span><span class="p">,</span> 
</span><span id="L-298"><a href="#L-298"><span class="linenos">298</span></a>                                            <span class="n">exp_shift</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">exp_preserve_highlights</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> 
</span><span id="L-299"><a href="#L-299"><span class="linenos">299</span></a>                                            <span class="n">no_auto_scale</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="L-300"><a href="#L-300"><span class="linenos">300</span></a>                                            <span class="n">gamma</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>                                         <span class="c1"># linear output</span>
</span><span id="L-301"><a href="#L-301"><span class="linenos">301</span></a>                                            <span class="n">chromatic_aberration</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">bad_pixels_path</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</span><span id="L-302"><a href="#L-302"><span class="linenos">302</span></a>            <span class="n">imgDouble</span> <span class="o">=</span> <span class="n">colour</span><span class="o">.</span><span class="n">utilities</span><span class="o">.</span><span class="n">as_float_array</span><span class="p">(</span><span class="n">raw</span><span class="o">.</span><span class="n">postprocess</span><span class="p">(</span><span class="n">ppParams</span><span class="p">))</span><span class="o">/</span><span class="p">(</span><span class="nb">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">16</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-303"><a href="#L-303"><span class="linenos">303</span></a>            <span class="n">raw</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="L-304"><a href="#L-304"><span class="linenos">304</span></a>            <span class="n">scalingFactor</span><span class="p">,</span> <span class="nb">type</span><span class="p">,</span> <span class="n">linear</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span> <span class="n">imageType</span><span class="o">.</span><span class="n">ARW</span><span class="p">,</span> <span class="kc">True</span>
</span><span id="L-305"><a href="#L-305"><span class="linenos">305</span></a>
</span><span id="L-306"><a href="#L-306"><span class="linenos">306</span></a>        <span class="c1"># load jpg, tiff, hdr file using colour</span>
</span><span id="L-307"><a href="#L-307"><span class="linenos">307</span></a>        <span class="k">elif</span> <span class="n">ext</span><span class="o">==</span><span class="s2">&quot;jpg&quot;</span><span class="p">:</span>
</span><span id="L-308"><a href="#L-308"><span class="linenos">308</span></a>            <span class="n">imgDouble</span> <span class="o">=</span> <span class="n">colour</span><span class="o">.</span><span class="n">read_image</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">bit_depth</span><span class="o">=</span><span class="s1">&#39;float32&#39;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;Imageio&#39;</span><span class="p">)</span>
</span><span id="L-309"><a href="#L-309"><span class="linenos">309</span></a>            <span class="n">scalingFactor</span><span class="p">,</span> <span class="nb">type</span><span class="p">,</span> <span class="n">linear</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span> <span class="n">imageType</span><span class="o">.</span><span class="n">SDR</span><span class="p">,</span> <span class="kc">False</span>
</span><span id="L-310"><a href="#L-310"><span class="linenos">310</span></a>
</span><span id="L-311"><a href="#L-311"><span class="linenos">311</span></a>        <span class="c1"># post processing for HDR scaling to [ ,1]</span>
</span><span id="L-312"><a href="#L-312"><span class="linenos">312</span></a>        <span class="k">elif</span> <span class="n">ext</span> <span class="o">==</span><span class="s2">&quot;hdr&quot;</span><span class="p">:</span>
</span><span id="L-313"><a href="#L-313"><span class="linenos">313</span></a>            <span class="k">if</span> <span class="n">thumb</span><span class="p">:</span> 
</span><span id="L-314"><a href="#L-314"><span class="linenos">314</span></a>                <span class="c1"># do not read input only the thumbnail</span>
</span><span id="L-315"><a href="#L-315"><span class="linenos">315</span></a>                <span class="n">searchStr</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="s2">&quot;thumbnails&quot;</span><span class="p">,</span><span class="s2">&quot;_&quot;</span><span class="o">+</span><span class="n">name</span><span class="o">+</span><span class="s2">&quot;.&quot;</span><span class="o">+</span><span class="n">ext</span><span class="p">)</span>
</span><span id="L-316"><a href="#L-316"><span class="linenos">316</span></a>                <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">searchStr</span><span class="p">):</span> 
</span><span id="L-317"><a href="#L-317"><span class="linenos">317</span></a>                    <span class="n">imgDouble</span> <span class="o">=</span> <span class="n">colour</span><span class="o">.</span><span class="n">read_image</span><span class="p">(</span><span class="n">searchStr</span><span class="p">,</span> <span class="n">bit_depth</span><span class="o">=</span><span class="s1">&#39;float32&#39;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;Imageio&#39;</span><span class="p">)</span> <span class="c1"># &lt;--- read thumbnail of input file</span>
</span><span id="L-318"><a href="#L-318"><span class="linenos">318</span></a>
</span><span id="L-319"><a href="#L-319"><span class="linenos">319</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-320"><a href="#L-320"><span class="linenos">320</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="s2">&quot;thumbnails&quot;</span><span class="p">)):</span> <span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="s2">&quot;thumbnails&quot;</span><span class="p">))</span>
</span><span id="L-321"><a href="#L-321"><span class="linenos">321</span></a>
</span><span id="L-322"><a href="#L-322"><span class="linenos">322</span></a>                    <span class="c1"># read image and create thumbnail</span>
</span><span id="L-323"><a href="#L-323"><span class="linenos">323</span></a>                    <span class="n">imgDouble</span> <span class="o">=</span> <span class="n">colour</span><span class="o">.</span><span class="n">read_image</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">bit_depth</span><span class="o">=</span><span class="s1">&#39;float32&#39;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;Imageio&#39;</span><span class="p">)</span> <span class="c1"># &lt;--- read input file</span>
</span><span id="L-324"><a href="#L-324"><span class="linenos">324</span></a>
</span><span id="L-325"><a href="#L-325"><span class="linenos">325</span></a>                    <span class="c1"># resize to thumbnail size</span>
</span><span id="L-326"><a href="#L-326"><span class="linenos">326</span></a>                    <span class="n">iY</span><span class="p">,</span> <span class="n">iX</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">imgDouble</span><span class="o">.</span><span class="n">shape</span>
</span><span id="L-327"><a href="#L-327"><span class="linenos">327</span></a>                    <span class="n">maxX</span> <span class="o">=</span> <span class="n">processing</span><span class="o">.</span><span class="n">ProcessPipe</span><span class="o">.</span><span class="n">maxSize</span>
</span><span id="L-328"><a href="#L-328"><span class="linenos">328</span></a>                    <span class="n">factor</span> <span class="o">=</span> <span class="n">maxX</span><span class="o">/</span><span class="n">iX</span>
</span><span id="L-329"><a href="#L-329"><span class="linenos">329</span></a>                    <span class="n">imgDoubleFull</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">imgDouble</span><span class="p">)</span>
</span><span id="L-330"><a href="#L-330"><span class="linenos">330</span></a>                    <span class="n">imgThumbnail</span> <span class="o">=</span>  <span class="n">skimage</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="n">imgDouble</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">iY</span> <span class="o">*</span> <span class="n">factor</span><span class="p">),</span><span class="n">maxX</span> <span class="p">))</span>
</span><span id="L-331"><a href="#L-331"><span class="linenos">331</span></a>                    <span class="c1"># save thumbnail</span>
</span><span id="L-332"><a href="#L-332"><span class="linenos">332</span></a>                    <span class="n">colour</span><span class="o">.</span><span class="n">write_image</span><span class="p">(</span><span class="n">imgThumbnail</span><span class="p">,</span><span class="n">searchStr</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;Imageio&#39;</span><span class="p">)</span>
</span><span id="L-333"><a href="#L-333"><span class="linenos">333</span></a>
</span><span id="L-334"><a href="#L-334"><span class="linenos">334</span></a>                    <span class="n">imgDouble</span> <span class="o">=</span> <span class="n">imgThumbnail</span>
</span><span id="L-335"><a href="#L-335"><span class="linenos">335</span></a>
</span><span id="L-336"><a href="#L-336"><span class="linenos">336</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-337"><a href="#L-337"><span class="linenos">337</span></a>                <span class="c1"># thumb set to False, read input not the thumbnail</span>
</span><span id="L-338"><a href="#L-338"><span class="linenos">338</span></a>                <span class="n">imgDouble</span> <span class="o">=</span> <span class="n">colour</span><span class="o">.</span><span class="n">read_image</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">bit_depth</span><span class="o">=</span><span class="s1">&#39;float32&#39;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;Imageio&#39;</span><span class="p">)</span>
</span><span id="L-339"><a href="#L-339"><span class="linenos">339</span></a>
</span><span id="L-340"><a href="#L-340"><span class="linenos">340</span></a>            <span class="nb">type</span> <span class="o">=</span> <span class="n">imageType</span><span class="o">.</span><span class="n">HDR</span>
</span><span id="L-341"><a href="#L-341"><span class="linenos">341</span></a>            <span class="n">linear</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-342"><a href="#L-342"><span class="linenos">342</span></a>            <span class="n">scalingFactor</span> <span class="o">=</span> <span class="mf">1.0</span>
</span><span id="L-343"><a href="#L-343"><span class="linenos">343</span></a>
</span><span id="L-344"><a href="#L-344"><span class="linenos">344</span></a>        <span class="c1"># create image object</span>
</span><span id="L-345"><a href="#L-345"><span class="linenos">345</span></a>        <span class="n">res</span> <span class="o">=</span>  <span class="n">Image</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">name</span><span class="o">+</span><span class="s1">&#39;.&#39;</span><span class="o">+</span><span class="n">ext</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">(</span><span class="n">imgDouble</span><span class="p">),</span><span class="nb">type</span><span class="p">,</span> <span class="n">linear</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">scalingFactor</span><span class="p">)</span>           <span class="c1"># colorspace = None will be set in metadata.metadata.build(res)</span>
</span><span id="L-346"><a href="#L-346"><span class="linenos">346</span></a>        <span class="n">res</span><span class="o">.</span><span class="n">metadata</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>                                                         <span class="c1"># build metadata (read if json file exists, else recover from exif data)</span>
</span><span id="L-347"><a href="#L-347"><span class="linenos">347</span></a>
</span><span id="L-348"><a href="#L-348"><span class="linenos">348</span></a>        <span class="c1"># update path</span>
</span><span id="L-349"><a href="#L-349"><span class="linenos">349</span></a>        <span class="n">res</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;path&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</span><span id="L-350"><a href="#L-350"><span class="linenos">350</span></a>        <span class="c1"># update size</span>
</span><span id="L-351"><a href="#L-351"><span class="linenos">351</span></a>        <span class="k">if</span> <span class="n">thumb</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">imgDoubleFull</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
</span><span id="L-352"><a href="#L-352"><span class="linenos">352</span></a>            <span class="n">h</span><span class="p">,</span><span class="n">w</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="n">imgDoubleFull</span><span class="o">.</span><span class="n">shape</span>
</span><span id="L-353"><a href="#L-353"><span class="linenos">353</span></a>            <span class="n">res</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;exif&#39;</span><span class="p">][</span><span class="s1">&#39;Image Width&#39;</span><span class="p">]</span>    <span class="o">=</span> <span class="n">w</span>
</span><span id="L-354"><a href="#L-354"><span class="linenos">354</span></a>            <span class="n">res</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;exif&#39;</span><span class="p">][</span><span class="s1">&#39;Image Height&#39;</span><span class="p">]</span>   <span class="o">=</span> <span class="n">h</span>
</span><span id="L-355"><a href="#L-355"><span class="linenos">355</span></a>
</span><span id="L-356"><a href="#L-356"><span class="linenos">356</span></a>        <span class="c1"># update image.colorSpace from metadata</span>
</span><span id="L-357"><a href="#L-357"><span class="linenos">357</span></a>        <span class="n">RGBcolorspace</span> <span class="o">=</span> <span class="n">ColorSpace</span><span class="o">.</span><span class="n">sRGB</span><span class="p">()</span> <span class="c1"># delfault color space</span>
</span><span id="L-358"><a href="#L-358"><span class="linenos">358</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="s1">&#39;sRGB&#39;</span> <span class="ow">in</span> <span class="n">res</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;exif&#39;</span><span class="p">][</span><span class="s1">&#39;Color Space&#39;</span><span class="p">]):</span>
</span><span id="L-359"><a href="#L-359"><span class="linenos">359</span></a>            <span class="n">res</span><span class="o">.</span><span class="n">colorSpace</span> <span class="o">=</span> <span class="n">RGBcolorspace</span> 
</span><span id="L-360"><a href="#L-360"><span class="linenos">360</span></a>        <span class="k">else</span><span class="p">:</span> <span class="c1"># &#39;sRGB&#39; in color space &lt;from exif&gt;</span>
</span><span id="L-361"><a href="#L-361"><span class="linenos">361</span></a>            <span class="n">res</span><span class="o">.</span><span class="n">colorSpace</span> <span class="o">=</span> <span class="n">RGBcolorspace</span> 
</span><span id="L-362"><a href="#L-362"><span class="linenos">362</span></a>
</span><span id="L-363"><a href="#L-363"><span class="linenos">363</span></a>        <span class="c1"># display ready image</span>
</span><span id="L-364"><a href="#L-364"><span class="linenos">364</span></a>        <span class="k">if</span> <span class="s1">&#39;display&#39;</span> <span class="ow">in</span> <span class="n">res</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-365"><a href="#L-365"><span class="linenos">365</span></a>            <span class="n">disp</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;display&#39;</span><span class="p">]</span>
</span><span id="L-366"><a href="#L-366"><span class="linenos">366</span></a>            <span class="k">if</span> <span class="n">disp</span> <span class="ow">in</span> <span class="n">pref</span><span class="o">.</span><span class="n">getHDRdisplays</span><span class="p">()</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-367"><a href="#L-367"><span class="linenos">367</span></a>                <span class="n">scaling</span> <span class="o">=</span> <span class="n">pref</span><span class="o">.</span><span class="n">getHDRdisplays</span><span class="p">()[</span><span class="n">disp</span><span class="p">][</span><span class="s1">&#39;scaling&#39;</span><span class="p">]</span>
</span><span id="L-368"><a href="#L-368"><span class="linenos">368</span></a>                <span class="n">res</span><span class="o">.</span><span class="n">colorData</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">colorData</span><span class="o">/</span><span class="n">scaling</span>  
</span><span id="L-369"><a href="#L-369"><span class="linenos">369</span></a>
</span><span id="L-370"><a href="#L-370"><span class="linenos">370</span></a>        <span class="k">return</span> <span class="n">res</span>
</span><span id="L-371"><a href="#L-371"><span class="linenos">371</span></a>
</span><span id="L-372"><a href="#L-372"><span class="linenos">372</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">filename</span><span class="p">):</span>
</span><span id="L-373"><a href="#L-373"><span class="linenos">373</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-374"><a href="#L-374"><span class="linenos">374</span></a><span class="sd">        Save the image and its metadata to disk.</span>
</span><span id="L-375"><a href="#L-375"><span class="linenos">375</span></a><span class="sd">        </span>
</span><span id="L-376"><a href="#L-376"><span class="linenos">376</span></a><span class="sd">        This method saves HDR images to disk along with their associated metadata</span>
</span><span id="L-377"><a href="#L-377"><span class="linenos">377</span></a><span class="sd">        in a JSON file. It updates the image&#39;s path and filename information</span>
</span><span id="L-378"><a href="#L-378"><span class="linenos">378</span></a><span class="sd">        before saving.</span>
</span><span id="L-379"><a href="#L-379"><span class="linenos">379</span></a>
</span><span id="L-380"><a href="#L-380"><span class="linenos">380</span></a><span class="sd">        Args:</span>
</span><span id="L-381"><a href="#L-381"><span class="linenos">381</span></a><span class="sd">            filename (str): Target filename for saving the image</span>
</span><span id="L-382"><a href="#L-382"><span class="linenos">382</span></a><span class="sd">            </span>
</span><span id="L-383"><a href="#L-383"><span class="linenos">383</span></a><span class="sd">        Note:</span>
</span><span id="L-384"><a href="#L-384"><span class="linenos">384</span></a><span class="sd">            Only HDR images can be written using this method. The metadata</span>
</span><span id="L-385"><a href="#L-385"><span class="linenos">385</span></a><span class="sd">            is automatically saved to a corresponding .json file.</span>
</span><span id="L-386"><a href="#L-386"><span class="linenos">386</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-387"><a href="#L-387"><span class="linenos">387</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">isHDR</span><span class="p">():</span>
</span><span id="L-388"><a href="#L-388"><span class="linenos">388</span></a>
</span><span id="L-389"><a href="#L-389"><span class="linenos">389</span></a>            <span class="n">path</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">ext</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">filenamesplit</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
</span><span id="L-390"><a href="#L-390"><span class="linenos">390</span></a>            <span class="n">colour</span><span class="o">.</span><span class="n">write_image</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">colorData</span><span class="p">,</span><span class="n">filename</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;Imageio&#39;</span><span class="p">)</span>
</span><span id="L-391"><a href="#L-391"><span class="linenos">391</span></a>
</span><span id="L-392"><a href="#L-392"><span class="linenos">392</span></a>            <span class="c1"># update filename related metadata before saving</span>
</span><span id="L-393"><a href="#L-393"><span class="linenos">393</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">+</span><span class="s1">&#39;.&#39;</span><span class="o">+</span><span class="n">ext</span>
</span><span id="L-394"><a href="#L-394"><span class="linenos">394</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">path</span>  <span class="o">=</span> <span class="n">path</span>
</span><span id="L-395"><a href="#L-395"><span class="linenos">395</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">image</span> <span class="o">=</span> <span class="bp">self</span>
</span><span id="L-396"><a href="#L-396"><span class="linenos">396</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;filename&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">name</span><span class="o">+</span><span class="s1">&#39;.&#39;</span><span class="o">+</span><span class="n">ext</span>
</span><span id="L-397"><a href="#L-397"><span class="linenos">397</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;path&#39;</span><span class="p">]</span> <span class="o">=</span>     <span class="n">path</span>
</span><span id="L-398"><a href="#L-398"><span class="linenos">398</span></a>
</span><span id="L-399"><a href="#L-399"><span class="linenos">399</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span id="L-400"><a href="#L-400"><span class="linenos">400</span></a>
</span><span id="L-401"><a href="#L-401"><span class="linenos">401</span></a>    <span class="nd">@staticmethod</span>
</span><span id="L-402"><a href="#L-402"><span class="linenos">402</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">toOne</span><span class="p">(</span><span class="n">colorData</span><span class="p">):</span>
</span><span id="L-403"><a href="#L-403"><span class="linenos">403</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-404"><a href="#L-404"><span class="linenos">404</span></a><span class="sd">        Scale image color data to [0, 1] range based on maximum RGB values.</span>
</span><span id="L-405"><a href="#L-405"><span class="linenos">405</span></a><span class="sd">        </span>
</span><span id="L-406"><a href="#L-406"><span class="linenos">406</span></a><span class="sd">        This utility method normalizes image data by finding the maximum value</span>
</span><span id="L-407"><a href="#L-407"><span class="linenos">407</span></a><span class="sd">        across all RGB channels and scaling accordingly.</span>
</span><span id="L-408"><a href="#L-408"><span class="linenos">408</span></a>
</span><span id="L-409"><a href="#L-409"><span class="linenos">409</span></a><span class="sd">        Args:</span>
</span><span id="L-410"><a href="#L-410"><span class="linenos">410</span></a><span class="sd">            colorData (numpy.ndarray): Input image color data</span>
</span><span id="L-411"><a href="#L-411"><span class="linenos">411</span></a><span class="sd">                </span>
</span><span id="L-412"><a href="#L-412"><span class="linenos">412</span></a><span class="sd">        Returns:</span>
</span><span id="L-413"><a href="#L-413"><span class="linenos">413</span></a><span class="sd">            tuple: (scaled_color_data, scaling_factor)</span>
</span><span id="L-414"><a href="#L-414"><span class="linenos">414</span></a><span class="sd">                - scaled_color_data: Normalized image data in [0,1] range</span>
</span><span id="L-415"><a href="#L-415"><span class="linenos">415</span></a><span class="sd">                - scaling_factor: Applied scaling factor (1/max_value)</span>
</span><span id="L-416"><a href="#L-416"><span class="linenos">416</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-417"><a href="#L-417"><span class="linenos">417</span></a>
</span><span id="L-418"><a href="#L-418"><span class="linenos">418</span></a>        <span class="n">imgVector</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">ndarray2vector</span><span class="p">(</span><span class="n">colorData</span><span class="p">)</span>
</span><span id="L-419"><a href="#L-419"><span class="linenos">419</span></a>        <span class="n">R</span><span class="p">,</span> <span class="n">G</span><span class="p">,</span> <span class="n">B</span> <span class="o">=</span> <span class="n">imgVector</span><span class="p">[:,</span><span class="mi">0</span><span class="p">],</span> <span class="n">imgVector</span><span class="p">[:,</span><span class="mi">1</span><span class="p">],</span> <span class="n">imgVector</span><span class="p">[:,</span><span class="mi">2</span><span class="p">]</span>
</span><span id="L-420"><a href="#L-420"><span class="linenos">420</span></a>        <span class="n">maxRGB</span> <span class="o">=</span> <span class="nb">max</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">amax</span><span class="p">(</span><span class="n">R</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">amax</span><span class="p">(</span><span class="n">G</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">amax</span><span class="p">(</span><span class="n">B</span><span class="p">)])</span> 
</span><span id="L-421"><a href="#L-421"><span class="linenos">421</span></a>
</span><span id="L-422"><a href="#L-422"><span class="linenos">422</span></a>        <span class="k">return</span> <span class="n">colorData</span><span class="o">/</span><span class="n">maxRGB</span><span class="p">,</span> <span class="mf">1.0</span><span class="o">/</span><span class="n">maxRGB</span>
</span><span id="L-423"><a href="#L-423"><span class="linenos">423</span></a>
</span><span id="L-424"><a href="#L-424"><span class="linenos">424</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getChannel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">channel</span><span class="p">):</span>
</span><span id="L-425"><a href="#L-425"><span class="linenos">425</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-426"><a href="#L-426"><span class="linenos">426</span></a><span class="sd">        Extract a specific color channel from the image.</span>
</span><span id="L-427"><a href="#L-427"><span class="linenos">427</span></a><span class="sd">        </span>
</span><span id="L-428"><a href="#L-428"><span class="linenos">428</span></a><span class="sd">        This method extracts individual color channels (R, G, B, X, Y, Z, L, a, b)</span>
</span><span id="L-429"><a href="#L-429"><span class="linenos">429</span></a><span class="sd">        by converting to the appropriate color space and returning the requested channel.</span>
</span><span id="L-430"><a href="#L-430"><span class="linenos">430</span></a>
</span><span id="L-431"><a href="#L-431"><span class="linenos">431</span></a><span class="sd">        Args:</span>
</span><span id="L-432"><a href="#L-432"><span class="linenos">432</span></a><span class="sd">            channel (channel): Channel identifier (e.g., channel.sR, channel.Y, channel.L)</span>
</span><span id="L-433"><a href="#L-433"><span class="linenos">433</span></a><span class="sd">        </span>
</span><span id="L-434"><a href="#L-434"><span class="linenos">434</span></a><span class="sd">        Returns:</span>
</span><span id="L-435"><a href="#L-435"><span class="linenos">435</span></a><span class="sd">            numpy.ndarray or None: 2D array containing the channel data, or None for invalid channels</span>
</span><span id="L-436"><a href="#L-436"><span class="linenos">436</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-437"><a href="#L-437"><span class="linenos">437</span></a>
</span><span id="L-438"><a href="#L-438"><span class="linenos">438</span></a>        <span class="c1"># take into account colorSpace</span>
</span><span id="L-439"><a href="#L-439"><span class="linenos">439</span></a>        <span class="n">destColor</span> <span class="o">=</span> <span class="n">channel</span><span class="o">.</span><span class="n">colorSpace</span><span class="p">()</span>
</span><span id="L-440"><a href="#L-440"><span class="linenos">440</span></a>        <span class="n">image</span> <span class="o">=</span> <span class="n">processing</span><span class="o">.</span><span class="n">ColorSpaceTransform</span><span class="p">()</span><span class="o">.</span><span class="n">compute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">dest</span><span class="o">=</span><span class="n">destColor</span><span class="p">)</span>
</span><span id="L-441"><a href="#L-441"><span class="linenos">441</span></a>
</span><span id="L-442"><a href="#L-442"><span class="linenos">442</span></a>        <span class="k">if</span> <span class="n">channel</span><span class="o">.</span><span class="n">getValue</span><span class="p">()</span> <span class="o">&lt;</span><span class="mi">3</span><span class="p">:</span>
</span><span id="L-443"><a href="#L-443"><span class="linenos">443</span></a>            <span class="k">return</span> <span class="n">image</span><span class="o">.</span><span class="n">colorData</span><span class="p">[:,:,</span><span class="n">channel</span><span class="o">.</span><span class="n">getValue</span><span class="p">()]</span>
</span><span id="L-444"><a href="#L-444"><span class="linenos">444</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-445"><a href="#L-445"><span class="linenos">445</span></a>            <span class="k">return</span> <span class="kc">None</span>
</span><span id="L-446"><a href="#L-446"><span class="linenos">446</span></a>
</span><span id="L-447"><a href="#L-447"><span class="linenos">447</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getDynamicRange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">percentile</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="L-448"><a href="#L-448"><span class="linenos">448</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-449"><a href="#L-449"><span class="linenos">449</span></a><span class="sd">        Calculate the dynamic range of the image in stops.</span>
</span><span id="L-450"><a href="#L-450"><span class="linenos">450</span></a><span class="sd">        </span>
</span><span id="L-451"><a href="#L-451"><span class="linenos">451</span></a><span class="sd">        Computes the dynamic range by analyzing the Y (luminance) channel</span>
</span><span id="L-452"><a href="#L-452"><span class="linenos">452</span></a><span class="sd">        and calculating the log2 ratio between maximum and minimum values.</span>
</span><span id="L-453"><a href="#L-453"><span class="linenos">453</span></a>
</span><span id="L-454"><a href="#L-454"><span class="linenos">454</span></a><span class="sd">        Args:</span>
</span><span id="L-455"><a href="#L-455"><span class="linenos">455</span></a><span class="sd">            percentile (float, optional): Percentile for robust min/max calculation.</span>
</span><span id="L-456"><a href="#L-456"><span class="linenos">456</span></a><span class="sd">                                        If None, uses actual min/max excluding zeros.</span>
</span><span id="L-457"><a href="#L-457"><span class="linenos">457</span></a><span class="sd">                </span>
</span><span id="L-458"><a href="#L-458"><span class="linenos">458</span></a><span class="sd">        Returns:</span>
</span><span id="L-459"><a href="#L-459"><span class="linenos">459</span></a><span class="sd">            float: Dynamic range in stops (log2 scale)</span>
</span><span id="L-460"><a href="#L-460"><span class="linenos">460</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-461"><a href="#L-461"><span class="linenos">461</span></a>
</span><span id="L-462"><a href="#L-462"><span class="linenos">462</span></a>        <span class="n">Y_min</span><span class="p">,</span><span class="n">Y_max</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
</span><span id="L-463"><a href="#L-463"><span class="linenos">463</span></a>        <span class="n">Y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getChannel</span><span class="p">(</span><span class="n">channel</span><span class="o">.</span><span class="n">Y</span><span class="p">)</span>
</span><span id="L-464"><a href="#L-464"><span class="linenos">464</span></a>
</span><span id="L-465"><a href="#L-465"><span class="linenos">465</span></a>        <span class="k">if</span> <span class="n">percentile</span> <span class="o">==</span> <span class="kc">None</span> <span class="p">:</span> <span class="n">Y_min</span><span class="p">,</span> <span class="n">Y_max</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">amin</span><span class="p">(</span><span class="n">Y</span><span class="p">[</span><span class="n">Y</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">]),</span> <span class="n">np</span><span class="o">.</span><span class="n">amax</span><span class="p">(</span><span class="n">Y</span><span class="p">)</span>                  <span class="c1"># use min and max</span>
</span><span id="L-466"><a href="#L-466"><span class="linenos">466</span></a>        <span class="k">else</span><span class="p">:</span> <span class="n">Y_min</span><span class="p">,</span> <span class="n">Y_max</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">percentile</span><span class="p">(</span><span class="n">Y</span><span class="p">[</span><span class="n">Y</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">],</span><span class="n">percentile</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">percentile</span><span class="p">(</span><span class="n">Y</span><span class="p">,</span><span class="mi">100</span><span class="o">-</span><span class="n">percentile</span><span class="p">)</span>   <span class="c1"># percentile</span>
</span><span id="L-467"><a href="#L-467"><span class="linenos">467</span></a>
</span><span id="L-468"><a href="#L-468"><span class="linenos">468</span></a>        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">log2</span><span class="p">(</span><span class="n">Y_max</span><span class="p">)</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">log2</span><span class="p">(</span><span class="n">Y_min</span><span class="p">)</span>
</span><span id="L-469"><a href="#L-469"><span class="linenos">469</span></a>
</span><span id="L-470"><a href="#L-470"><span class="linenos">470</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">buildHistogram</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">channel</span><span class="p">):</span>
</span><span id="L-471"><a href="#L-471"><span class="linenos">471</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-472"><a href="#L-472"><span class="linenos">472</span></a><span class="sd">        Generate a histogram for the specified image channel.</span>
</span><span id="L-473"><a href="#L-473"><span class="linenos">473</span></a><span class="sd">        </span>
</span><span id="L-474"><a href="#L-474"><span class="linenos">474</span></a><span class="sd">        Creates and stores a histogram object for the given channel, which can</span>
</span><span id="L-475"><a href="#L-475"><span class="linenos">475</span></a><span class="sd">        be used for analysis and display purposes.</span>
</span><span id="L-476"><a href="#L-476"><span class="linenos">476</span></a>
</span><span id="L-477"><a href="#L-477"><span class="linenos">477</span></a><span class="sd">        Args:</span>
</span><span id="L-478"><a href="#L-478"><span class="linenos">478</span></a><span class="sd">            channel (channel): Channel to analyze for histogram generation</span>
</span><span id="L-479"><a href="#L-479"><span class="linenos">479</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-480"><a href="#L-480"><span class="linenos">480</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">histogram</span> <span class="o">=</span> <span class="n">Histogram</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="p">,</span> <span class="n">nbBins</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="nb">range</span><span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">logSpace</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">isHDR</span><span class="p">())</span>
</span><span id="L-481"><a href="#L-481"><span class="linenos">481</span></a>
</span><span id="L-482"><a href="#L-482"><span class="linenos">482</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">ax</span><span class="p">,</span><span class="n">displayTitle</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">title</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">forceToneMapping</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">TMO</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="L-483"><a href="#L-483"><span class="linenos">483</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-484"><a href="#L-484"><span class="linenos">484</span></a><span class="sd">        Display the image on a matplotlib axis with optional tone mapping.</span>
</span><span id="L-485"><a href="#L-485"><span class="linenos">485</span></a><span class="sd">        </span>
</span><span id="L-486"><a href="#L-486"><span class="linenos">486</span></a><span class="sd">        This method handles proper display of both SDR and HDR images, applying</span>
</span><span id="L-487"><a href="#L-487"><span class="linenos">487</span></a><span class="sd">        tone mapping when necessary for HDR content.</span>
</span><span id="L-488"><a href="#L-488"><span class="linenos">488</span></a>
</span><span id="L-489"><a href="#L-489"><span class="linenos">489</span></a><span class="sd">        Args:</span>
</span><span id="L-490"><a href="#L-490"><span class="linenos">490</span></a><span class="sd">            ax (matplotlib.axes.Axes): Matplotlib axis for displaying the image</span>
</span><span id="L-491"><a href="#L-491"><span class="linenos">491</span></a><span class="sd">            displayTitle (bool, optional): Whether to show title (default: False)</span>
</span><span id="L-492"><a href="#L-492"><span class="linenos">492</span></a><span class="sd">            title (str, optional): Custom title text (default: auto-generated)</span>
</span><span id="L-493"><a href="#L-493"><span class="linenos">493</span></a><span class="sd">            forceToneMapping (bool, optional): Apply tone mapping to HDR images (default: True)</span>
</span><span id="L-494"><a href="#L-494"><span class="linenos">494</span></a><span class="sd">            TMO (Processing, optional): Custom tone mapping operator (default: CCTF encoding)</span>
</span><span id="L-495"><a href="#L-495"><span class="linenos">495</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-496"><a href="#L-496"><span class="linenos">496</span></a>        <span class="c1"># default values</span>
</span><span id="L-497"><a href="#L-497"><span class="linenos">497</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">title</span><span class="p">:</span> <span class="n">title</span><span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="o">+</span><span class="s2">&quot;(&quot;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">colorSpace</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span><span class="s2">&quot; | &quot;</span><span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;)&quot;</span>
</span><span id="L-498"><a href="#L-498"><span class="linenos">498</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">TMO</span><span class="p">:</span> <span class="n">TMO</span> <span class="o">=</span> <span class="n">processing</span><span class="o">.</span><span class="n">tmo_cctf</span><span class="p">()</span>
</span><span id="L-499"><a href="#L-499"><span class="linenos">499</span></a>        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">imageType</span><span class="o">.</span><span class="n">HDR</span><span class="p">))</span> <span class="ow">or</span> <span class="p">(</span><span class="ow">not</span>  <span class="n">forceToneMapping</span><span class="p">):</span> 
</span><span id="L-500"><a href="#L-500"><span class="linenos">500</span></a>            <span class="n">ax</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">colorData</span><span class="p">)</span>
</span><span id="L-501"><a href="#L-501"><span class="linenos">501</span></a>        <span class="k">else</span><span class="p">:</span> <span class="c1"># HDR and forceToneMapping</span>
</span><span id="L-502"><a href="#L-502"><span class="linenos">502</span></a>            <span class="n">ax</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">TMO</span><span class="p">)</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">processing</span><span class="o">.</span><span class="n">clip</span><span class="p">())</span><span class="o">.</span><span class="n">colorData</span><span class="p">)</span>
</span><span id="L-503"><a href="#L-503"><span class="linenos">503</span></a>            <span class="n">title</span> <span class="o">=</span> <span class="n">title</span><span class="o">+</span><span class="s2">&quot;[auto TMo]&quot;</span>
</span><span id="L-504"><a href="#L-504"><span class="linenos">504</span></a>        <span class="k">if</span> <span class="n">displayTitle</span><span class="p">:</span>  <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
</span><span id="L-505"><a href="#L-505"><span class="linenos">505</span></a>        <span class="n">ax</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s2">&quot;off&quot;</span><span class="p">)</span>
</span><span id="L-506"><a href="#L-506"><span class="linenos">506</span></a>
</span><span id="L-507"><a href="#L-507"><span class="linenos">507</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-508"><a href="#L-508"><span class="linenos">508</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-509"><a href="#L-509"><span class="linenos">509</span></a><span class="sd">        Generate a detailed string representation of the image object.</span>
</span><span id="L-510"><a href="#L-510"><span class="linenos">510</span></a><span class="sd">        </span>
</span><span id="L-511"><a href="#L-511"><span class="linenos">511</span></a><span class="sd">        Returns:</span>
</span><span id="L-512"><a href="#L-512"><span class="linenos">512</span></a><span class="sd">            str: Comprehensive description including all image properties</span>
</span><span id="L-513"><a href="#L-513"><span class="linenos">513</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-514"><a href="#L-514"><span class="linenos">514</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">colorSpace</span><span class="p">:</span>
</span><span id="L-515"><a href="#L-515"><span class="linenos">515</span></a>            <span class="n">colorSpaceSTR</span> <span class="o">=</span> <span class="s2">&quot;None&quot;</span>
</span><span id="L-516"><a href="#L-516"><span class="linenos">516</span></a>        <span class="k">else</span><span class="p">:</span> 
</span><span id="L-517"><a href="#L-517"><span class="linenos">517</span></a>            <span class="n">colorSpaceSTR</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">colorSpace</span><span class="o">.</span><span class="n">name</span>
</span><span id="L-518"><a href="#L-518"><span class="linenos">518</span></a>        <span class="n">res</span> <span class="o">=</span>   <span class="s2">&quot;&lt;class Image:</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> \
</span><span id="L-519"><a href="#L-519"><span class="linenos">519</span></a>                <span class="s2">&quot;</span><span class="se">\t</span><span class="s2"> name: &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> \
</span><span id="L-520"><a href="#L-520"><span class="linenos">520</span></a>                <span class="s2">&quot;</span><span class="se">\t</span><span class="s2"> path: &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> \
</span><span id="L-521"><a href="#L-521"><span class="linenos">521</span></a>                <span class="s2">&quot;</span><span class="se">\t</span><span class="s2"> shape: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span> <span class="o">+</span>  <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> \
</span><span id="L-522"><a href="#L-522"><span class="linenos">522</span></a>                <span class="s2">&quot;</span><span class="se">\t</span><span class="s2"> type: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">)</span> <span class="o">+</span>  <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span>\
</span><span id="L-523"><a href="#L-523"><span class="linenos">523</span></a>                <span class="s2">&quot;</span><span class="se">\t</span><span class="s2"> linear: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">linear</span><span class="p">)</span> <span class="o">+</span>  <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span>\
</span><span id="L-524"><a href="#L-524"><span class="linenos">524</span></a>                <span class="s2">&quot;</span><span class="se">\t</span><span class="s2"> scaling to [0,1]: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scalingFactor</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span>\
</span><span id="L-525"><a href="#L-525"><span class="linenos">525</span></a>                <span class="s2">&quot;</span><span class="se">\t</span><span class="s2"> color space: &quot;</span> <span class="o">+</span> <span class="n">colorSpaceSTR</span> <span class="o">+</span> <span class="s2">&quot;&gt;&quot;</span>
</span><span id="L-526"><a href="#L-526"><span class="linenos">526</span></a>        <span class="k">return</span> <span class="n">res</span>
</span><span id="L-527"><a href="#L-527"><span class="linenos">527</span></a>
</span><span id="L-528"><a href="#L-528"><span class="linenos">528</span></a>    <span class="nd">@staticmethod</span>
</span><span id="L-529"><a href="#L-529"><span class="linenos">529</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">buildLchColorData</span><span class="p">(</span><span class="n">L</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">h</span><span class="p">,</span><span class="n">size</span><span class="p">,</span><span class="n">width</span><span class="p">,</span><span class="n">height</span><span class="p">):</span>
</span><span id="L-530"><a href="#L-530"><span class="linenos">530</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-531"><a href="#L-531"><span class="linenos">531</span></a><span class="sd">        Generate synthetic LCH color data for visualization and testing.</span>
</span><span id="L-532"><a href="#L-532"><span class="linenos">532</span></a><span class="sd">        </span>
</span><span id="L-533"><a href="#L-533"><span class="linenos">533</span></a><span class="sd">        Creates artificial color data in LCH space with specified lightness,</span>
</span><span id="L-534"><a href="#L-534"><span class="linenos">534</span></a><span class="sd">        chroma, and hue ranges. Useful for color space visualization and</span>
</span><span id="L-535"><a href="#L-535"><span class="linenos">535</span></a><span class="sd">        testing color transformations.</span>
</span><span id="L-536"><a href="#L-536"><span class="linenos">536</span></a>
</span><span id="L-537"><a href="#L-537"><span class="linenos">537</span></a><span class="sd">        Args:</span>
</span><span id="L-538"><a href="#L-538"><span class="linenos">538</span></a><span class="sd">            L (tuple): Lightness range (min, max)</span>
</span><span id="L-539"><a href="#L-539"><span class="linenos">539</span></a><span class="sd">            c (tuple): Chroma range (min, max) </span>
</span><span id="L-540"><a href="#L-540"><span class="linenos">540</span></a><span class="sd">            h (tuple): Hue range (min, max)</span>
</span><span id="L-541"><a href="#L-541"><span class="linenos">541</span></a><span class="sd">            size (tuple): Output image dimensions (height, width)</span>
</span><span id="L-542"><a href="#L-542"><span class="linenos">542</span></a><span class="sd">            width (str): Primary axis for width (&#39;L&#39;, &#39;c&#39;, or &#39;h&#39;)</span>
</span><span id="L-543"><a href="#L-543"><span class="linenos">543</span></a><span class="sd">            height (str): Primary axis for height (&#39;L&#39;, &#39;c&#39;, or &#39;h&#39;)</span>
</span><span id="L-544"><a href="#L-544"><span class="linenos">544</span></a><span class="sd">                </span>
</span><span id="L-545"><a href="#L-545"><span class="linenos">545</span></a><span class="sd">        Returns:</span>
</span><span id="L-546"><a href="#L-546"><span class="linenos">546</span></a><span class="sd">            numpy.ndarray: Generated LCH color data with shape (height, width, 3)</span>
</span><span id="L-547"><a href="#L-547"><span class="linenos">547</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-548"><a href="#L-548"><span class="linenos">548</span></a>
</span><span id="L-549"><a href="#L-549"><span class="linenos">549</span></a>        <span class="n">colorData</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="mi">3</span><span class="p">))</span>
</span><span id="L-550"><a href="#L-550"><span class="linenos">550</span></a>        <span class="n">Lmin</span><span class="p">,</span> <span class="n">Lmax</span> <span class="o">=</span> <span class="n">L</span> <span class="k">if</span> <span class="n">L</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">L</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">else</span> <span class="p">(</span><span class="n">L</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">L</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="L-551"><a href="#L-551"><span class="linenos">551</span></a>        <span class="n">cmin</span><span class="p">,</span> <span class="n">cmax</span> <span class="o">=</span> <span class="n">c</span> <span class="k">if</span> <span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">c</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">else</span> <span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="L-552"><a href="#L-552"><span class="linenos">552</span></a>        <span class="n">hmin</span><span class="p">,</span> <span class="n">hmax</span> <span class="o">=</span> <span class="n">h</span>
</span><span id="L-553"><a href="#L-553"><span class="linenos">553</span></a>
</span><span id="L-554"><a href="#L-554"><span class="linenos">554</span></a>        <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-555"><a href="#L-555"><span class="linenos">555</span></a>        <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-556"><a href="#L-556"><span class="linenos">556</span></a>
</span><span id="L-557"><a href="#L-557"><span class="linenos">557</span></a>        <span class="k">if</span> <span class="n">width</span><span class="o">==</span><span class="s1">&#39;L&#39;</span><span class="p">:</span>
</span><span id="L-558"><a href="#L-558"><span class="linenos">558</span></a>            <span class="k">if</span> <span class="n">height</span><span class="o">==</span><span class="s1">&#39;c&#39;</span><span class="p">:</span>
</span><span id="L-559"><a href="#L-559"><span class="linenos">559</span></a>                <span class="c1">#     +-------------------------------+</span>
</span><span id="L-560"><a href="#L-560"><span class="linenos">560</span></a>                <span class="c1">#  c  |                               |</span>
</span><span id="L-561"><a href="#L-561"><span class="linenos">561</span></a>                <span class="c1">#     +-------------------------------+</span>
</span><span id="L-562"><a href="#L-562"><span class="linenos">562</span></a>                <span class="c1">#                Lightness</span>
</span><span id="L-563"><a href="#L-563"><span class="linenos">563</span></a>                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">xmin</span><span class="p">,</span><span class="n">xmax</span><span class="p">):</span>
</span><span id="L-564"><a href="#L-564"><span class="linenos">564</span></a>                    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ymin</span><span class="p">,</span><span class="n">ymax</span><span class="p">):</span>
</span><span id="L-565"><a href="#L-565"><span class="linenos">565</span></a>                        <span class="n">u</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="n">x</span><span class="o">/</span><span class="p">(</span><span class="n">xmax</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="n">y</span><span class="o">/</span><span class="p">(</span><span class="n">ymax</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-566"><a href="#L-566"><span class="linenos">566</span></a>                        <span class="n">Lu</span> <span class="o">=</span> <span class="n">Lmin</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">u</span><span class="p">)</span><span class="o">+</span><span class="n">Lmax</span><span class="o">*</span><span class="n">u</span>
</span><span id="L-567"><a href="#L-567"><span class="linenos">567</span></a>                        <span class="n">cv</span> <span class="o">=</span> <span class="n">cmin</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">v</span><span class="p">)</span> <span class="o">+</span> <span class="n">cmax</span><span class="o">*</span><span class="n">v</span>
</span><span id="L-568"><a href="#L-568"><span class="linenos">568</span></a>                        <span class="n">hh</span> <span class="o">=</span> <span class="p">(</span><span class="n">hmin</span><span class="o">+</span><span class="n">hmax</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span>
</span><span id="L-569"><a href="#L-569"><span class="linenos">569</span></a>                        <span class="n">colorData</span><span class="p">[</span><span class="n">y</span><span class="p">,</span><span class="n">x</span><span class="p">,:]</span> <span class="o">=</span> <span class="p">[</span><span class="n">Lu</span><span class="p">,</span><span class="n">cv</span><span class="p">,</span><span class="n">hh</span><span class="p">]</span>
</span><span id="L-570"><a href="#L-570"><span class="linenos">570</span></a>            <span class="k">elif</span> <span class="n">height</span><span class="o">==</span><span class="s1">&#39;h&#39;</span><span class="p">:</span>
</span><span id="L-571"><a href="#L-571"><span class="linenos">571</span></a>                <span class="c1">#     +-------------------------------+</span>
</span><span id="L-572"><a href="#L-572"><span class="linenos">572</span></a>                <span class="c1">#  h  |                               |</span>
</span><span id="L-573"><a href="#L-573"><span class="linenos">573</span></a>                <span class="c1">#     +-------------------------------+</span>
</span><span id="L-574"><a href="#L-574"><span class="linenos">574</span></a>                <span class="c1">#                Lightness</span>
</span><span id="L-575"><a href="#L-575"><span class="linenos">575</span></a>                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">xmin</span><span class="p">,</span><span class="n">xmax</span><span class="p">):</span>
</span><span id="L-576"><a href="#L-576"><span class="linenos">576</span></a>                    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ymin</span><span class="p">,</span><span class="n">ymax</span><span class="p">):</span>
</span><span id="L-577"><a href="#L-577"><span class="linenos">577</span></a>                        <span class="n">u</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="n">x</span><span class="o">/</span><span class="p">(</span><span class="n">xmax</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="n">y</span><span class="o">/</span><span class="p">(</span><span class="n">ymax</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-578"><a href="#L-578"><span class="linenos">578</span></a>                        <span class="n">Lu</span> <span class="o">=</span> <span class="n">Lmin</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">u</span><span class="p">)</span><span class="o">+</span><span class="n">Lmax</span><span class="o">*</span><span class="n">u</span>
</span><span id="L-579"><a href="#L-579"><span class="linenos">579</span></a>                        <span class="k">if</span> <span class="n">hmin</span> <span class="o">&lt;=</span> <span class="n">hmax</span><span class="p">:</span>
</span><span id="L-580"><a href="#L-580"><span class="linenos">580</span></a>                            <span class="n">hv</span> <span class="o">=</span> <span class="n">hmin</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">v</span><span class="p">)</span> <span class="o">+</span> <span class="n">hmax</span><span class="o">*</span><span class="n">v</span>
</span><span id="L-581"><a href="#L-581"><span class="linenos">581</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-582"><a href="#L-582"><span class="linenos">582</span></a>                            <span class="c1"># hmin = 340 / hmax=20 -&gt; hmin = hmin-360 &gt;&gt; hmin = -20, hmax =20</span>
</span><span id="L-583"><a href="#L-583"><span class="linenos">583</span></a>                            <span class="n">hv</span> <span class="o">=</span> <span class="p">(</span><span class="n">hmin</span><span class="o">-</span><span class="mi">360</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">v</span><span class="p">)</span> <span class="o">+</span> <span class="n">hmax</span><span class="o">*</span><span class="n">v</span>
</span><span id="L-584"><a href="#L-584"><span class="linenos">584</span></a>                            <span class="k">if</span> <span class="n">hv</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span> <span class="n">hv</span> <span class="o">=</span> <span class="mi">360</span> <span class="o">+</span><span class="n">hv</span>
</span><span id="L-585"><a href="#L-585"><span class="linenos">585</span></a>                        <span class="n">cc</span> <span class="o">=</span> <span class="p">(</span><span class="n">cmin</span><span class="o">+</span><span class="n">cmax</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span>
</span><span id="L-586"><a href="#L-586"><span class="linenos">586</span></a>                        <span class="n">colorData</span><span class="p">[</span><span class="n">y</span><span class="p">,</span><span class="n">x</span><span class="p">,:]</span> <span class="o">=</span> <span class="p">[</span><span class="n">Lu</span><span class="p">,</span><span class="n">cc</span><span class="p">,</span><span class="n">hv</span><span class="p">]</span>
</span><span id="L-587"><a href="#L-587"><span class="linenos">587</span></a>        <span class="k">elif</span> <span class="n">width</span><span class="o">==</span><span class="s1">&#39;c&#39;</span><span class="p">:</span>
</span><span id="L-588"><a href="#L-588"><span class="linenos">588</span></a>            <span class="k">if</span> <span class="n">height</span><span class="o">==</span><span class="s1">&#39;L&#39;</span><span class="p">:</span>
</span><span id="L-589"><a href="#L-589"><span class="linenos">589</span></a>                <span class="c1">#     +-------------------------------+</span>
</span><span id="L-590"><a href="#L-590"><span class="linenos">590</span></a>                <span class="c1">#  L  |                               |</span>
</span><span id="L-591"><a href="#L-591"><span class="linenos">591</span></a>                <span class="c1">#     +-------------------------------+</span>
</span><span id="L-592"><a href="#L-592"><span class="linenos">592</span></a>                <span class="c1">#                chroma</span>
</span><span id="L-593"><a href="#L-593"><span class="linenos">593</span></a>                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">xmin</span><span class="p">,</span><span class="n">xmax</span><span class="p">):</span>
</span><span id="L-594"><a href="#L-594"><span class="linenos">594</span></a>                    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ymin</span><span class="p">,</span><span class="n">ymax</span><span class="p">):</span>
</span><span id="L-595"><a href="#L-595"><span class="linenos">595</span></a>                        <span class="n">u</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="n">x</span><span class="o">/</span><span class="p">(</span><span class="n">xmax</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="n">y</span><span class="o">/</span><span class="p">(</span><span class="n">ymax</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-596"><a href="#L-596"><span class="linenos">596</span></a>                        <span class="n">cu</span> <span class="o">=</span> <span class="n">cmin</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">u</span><span class="p">)</span> <span class="o">+</span> <span class="n">cmax</span><span class="o">*</span><span class="n">u</span>
</span><span id="L-597"><a href="#L-597"><span class="linenos">597</span></a>                        <span class="n">Lv</span> <span class="o">=</span> <span class="n">Lmin</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">v</span><span class="p">)</span><span class="o">+</span><span class="n">Lmax</span><span class="o">*</span><span class="n">v</span>
</span><span id="L-598"><a href="#L-598"><span class="linenos">598</span></a>                        <span class="n">hh</span> <span class="o">=</span> <span class="p">(</span><span class="n">hmin</span><span class="o">+</span><span class="n">hmax</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span>
</span><span id="L-599"><a href="#L-599"><span class="linenos">599</span></a>                        <span class="n">colorData</span><span class="p">[</span><span class="n">y</span><span class="p">,</span><span class="n">x</span><span class="p">,:]</span> <span class="o">=</span> <span class="p">[</span><span class="n">Lv</span><span class="p">,</span><span class="n">cu</span><span class="p">,</span><span class="n">hh</span><span class="p">]</span>
</span><span id="L-600"><a href="#L-600"><span class="linenos">600</span></a>            <span class="k">elif</span> <span class="n">height</span><span class="o">==</span><span class="s1">&#39;h&#39;</span><span class="p">:</span>
</span><span id="L-601"><a href="#L-601"><span class="linenos">601</span></a>                <span class="c1">#     +-------------------------------+</span>
</span><span id="L-602"><a href="#L-602"><span class="linenos">602</span></a>                <span class="c1">#  h  |                               |</span>
</span><span id="L-603"><a href="#L-603"><span class="linenos">603</span></a>                <span class="c1">#     +-------------------------------+</span>
</span><span id="L-604"><a href="#L-604"><span class="linenos">604</span></a>                <span class="c1">#                chroma</span>
</span><span id="L-605"><a href="#L-605"><span class="linenos">605</span></a>                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">xmin</span><span class="p">,</span><span class="n">xmax</span><span class="p">):</span>
</span><span id="L-606"><a href="#L-606"><span class="linenos">606</span></a>                    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ymin</span><span class="p">,</span><span class="n">ymax</span><span class="p">):</span>
</span><span id="L-607"><a href="#L-607"><span class="linenos">607</span></a>                        <span class="n">u</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="n">x</span><span class="o">/</span><span class="p">(</span><span class="n">xmax</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="n">y</span><span class="o">/</span><span class="p">(</span><span class="n">ymax</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-608"><a href="#L-608"><span class="linenos">608</span></a>                        <span class="n">cu</span> <span class="o">=</span> <span class="n">cmin</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">u</span><span class="p">)</span> <span class="o">+</span> <span class="n">cmax</span><span class="o">*</span><span class="n">u</span>
</span><span id="L-609"><a href="#L-609"><span class="linenos">609</span></a>                        <span class="k">if</span> <span class="n">hmin</span> <span class="o">&lt;=</span> <span class="n">hmax</span><span class="p">:</span>
</span><span id="L-610"><a href="#L-610"><span class="linenos">610</span></a>                            <span class="n">hv</span> <span class="o">=</span> <span class="n">hmin</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">v</span><span class="p">)</span> <span class="o">+</span> <span class="n">hmax</span><span class="o">*</span><span class="n">v</span>
</span><span id="L-611"><a href="#L-611"><span class="linenos">611</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-612"><a href="#L-612"><span class="linenos">612</span></a>                            <span class="c1"># hmin = 340 / hmax=20 -&gt; hmin = hmin-360 &gt;&gt; hmin = -20, hmax =20</span>
</span><span id="L-613"><a href="#L-613"><span class="linenos">613</span></a>                            <span class="n">hv</span> <span class="o">=</span> <span class="p">(</span><span class="n">hmin</span><span class="o">-</span><span class="mi">360</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">v</span><span class="p">)</span> <span class="o">+</span> <span class="n">hmax</span><span class="o">*</span><span class="n">v</span>
</span><span id="L-614"><a href="#L-614"><span class="linenos">614</span></a>                            <span class="k">if</span> <span class="n">hv</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span> <span class="n">hv</span> <span class="o">=</span> <span class="mi">360</span> <span class="o">+</span><span class="n">hv</span>
</span><span id="L-615"><a href="#L-615"><span class="linenos">615</span></a>                        <span class="n">LL</span> <span class="o">=</span> <span class="p">(</span><span class="n">Lmin</span><span class="o">+</span><span class="n">Lmax</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span>
</span><span id="L-616"><a href="#L-616"><span class="linenos">616</span></a>                        <span class="n">colorData</span><span class="p">[</span><span class="n">y</span><span class="p">,</span><span class="n">x</span><span class="p">,:]</span> <span class="o">=</span> <span class="p">[</span><span class="n">LL</span><span class="p">,</span><span class="n">cu</span><span class="p">,</span><span class="n">hv</span><span class="p">]</span>
</span><span id="L-617"><a href="#L-617"><span class="linenos">617</span></a>        <span class="k">elif</span> <span class="n">width</span> <span class="o">==</span> <span class="s1">&#39;h&#39;</span><span class="p">:</span>
</span><span id="L-618"><a href="#L-618"><span class="linenos">618</span></a>            <span class="k">if</span> <span class="n">height</span><span class="o">==</span><span class="s1">&#39;L&#39;</span><span class="p">:</span>
</span><span id="L-619"><a href="#L-619"><span class="linenos">619</span></a>                <span class="c1">#     +-------------------------------+</span>
</span><span id="L-620"><a href="#L-620"><span class="linenos">620</span></a>                <span class="c1">#  L  |                               |</span>
</span><span id="L-621"><a href="#L-621"><span class="linenos">621</span></a>                <span class="c1">#     +-------------------------------+</span>
</span><span id="L-622"><a href="#L-622"><span class="linenos">622</span></a>                <span class="c1">#                hue</span>
</span><span id="L-623"><a href="#L-623"><span class="linenos">623</span></a>                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">xmin</span><span class="p">,</span><span class="n">xmax</span><span class="p">):</span>
</span><span id="L-624"><a href="#L-624"><span class="linenos">624</span></a>                    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ymin</span><span class="p">,</span><span class="n">ymax</span><span class="p">):</span>
</span><span id="L-625"><a href="#L-625"><span class="linenos">625</span></a>                        <span class="n">u</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="n">x</span><span class="o">/</span><span class="p">(</span><span class="n">xmax</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="n">y</span><span class="o">/</span><span class="p">(</span><span class="n">ymax</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-626"><a href="#L-626"><span class="linenos">626</span></a>                        <span class="k">if</span> <span class="n">hmin</span> <span class="o">&lt;=</span> <span class="n">hmax</span><span class="p">:</span>
</span><span id="L-627"><a href="#L-627"><span class="linenos">627</span></a>                            <span class="n">hu</span> <span class="o">=</span> <span class="n">hmin</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">u</span><span class="p">)</span> <span class="o">+</span> <span class="n">hmax</span><span class="o">*</span><span class="n">u</span>
</span><span id="L-628"><a href="#L-628"><span class="linenos">628</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-629"><a href="#L-629"><span class="linenos">629</span></a>                            <span class="c1"># hmin = 340 / hmax=20 -&gt; hmin = hmin-360 &gt;&gt; hmin = -20, hmax =20</span>
</span><span id="L-630"><a href="#L-630"><span class="linenos">630</span></a>                            <span class="n">hu</span> <span class="o">=</span> <span class="p">(</span><span class="n">hmin</span><span class="o">-</span><span class="mi">360</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">u</span><span class="p">)</span> <span class="o">+</span> <span class="n">hmax</span><span class="o">*</span><span class="n">u</span>
</span><span id="L-631"><a href="#L-631"><span class="linenos">631</span></a>                            <span class="k">if</span> <span class="n">hu</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span> <span class="n">hv</span> <span class="o">=</span> <span class="mi">360</span> <span class="o">+</span><span class="n">hu</span>
</span><span id="L-632"><a href="#L-632"><span class="linenos">632</span></a>                        <span class="n">Lv</span> <span class="o">=</span> <span class="n">Lmin</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">v</span><span class="p">)</span><span class="o">+</span><span class="n">Lmax</span><span class="o">*</span><span class="n">v</span>
</span><span id="L-633"><a href="#L-633"><span class="linenos">633</span></a>                        <span class="n">cc</span> <span class="o">=</span> <span class="p">(</span><span class="n">cmin</span><span class="o">+</span><span class="n">cmax</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span>
</span><span id="L-634"><a href="#L-634"><span class="linenos">634</span></a>                        <span class="n">colorData</span><span class="p">[</span><span class="n">y</span><span class="p">,</span><span class="n">x</span><span class="p">,:]</span> <span class="o">=</span> <span class="p">[</span><span class="n">Lv</span><span class="p">,</span><span class="n">cc</span><span class="p">,</span><span class="n">hu</span><span class="p">]</span>
</span><span id="L-635"><a href="#L-635"><span class="linenos">635</span></a>            <span class="k">elif</span> <span class="n">height</span><span class="o">==</span><span class="s1">&#39;c&#39;</span><span class="p">:</span>
</span><span id="L-636"><a href="#L-636"><span class="linenos">636</span></a>                <span class="c1">#     +-------------------------------+</span>
</span><span id="L-637"><a href="#L-637"><span class="linenos">637</span></a>                <span class="c1">#  c  |                               |</span>
</span><span id="L-638"><a href="#L-638"><span class="linenos">638</span></a>                <span class="c1">#     +-------------------------------+</span>
</span><span id="L-639"><a href="#L-639"><span class="linenos">639</span></a>                <span class="c1">#                hue</span>
</span><span id="L-640"><a href="#L-640"><span class="linenos">640</span></a>                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">xmin</span><span class="p">,</span><span class="n">xmax</span><span class="p">):</span>
</span><span id="L-641"><a href="#L-641"><span class="linenos">641</span></a>                    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ymin</span><span class="p">,</span><span class="n">ymax</span><span class="p">):</span>
</span><span id="L-642"><a href="#L-642"><span class="linenos">642</span></a>                        <span class="n">u</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="n">x</span><span class="o">/</span><span class="p">(</span><span class="n">xmax</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="n">y</span><span class="o">/</span><span class="p">(</span><span class="n">ymax</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-643"><a href="#L-643"><span class="linenos">643</span></a>                        <span class="k">if</span> <span class="n">hmin</span> <span class="o">&lt;=</span> <span class="n">hmax</span><span class="p">:</span>
</span><span id="L-644"><a href="#L-644"><span class="linenos">644</span></a>                            <span class="n">hu</span> <span class="o">=</span> <span class="n">hmin</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">u</span><span class="p">)</span> <span class="o">+</span> <span class="n">hmax</span><span class="o">*</span><span class="n">u</span>
</span><span id="L-645"><a href="#L-645"><span class="linenos">645</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="L-646"><a href="#L-646"><span class="linenos">646</span></a>                            <span class="c1"># hmin = 340 / hmax=20 -&gt; hmin = hmin-360 &gt;&gt; hmin = -20, hmax =20</span>
</span><span id="L-647"><a href="#L-647"><span class="linenos">647</span></a>                            <span class="n">hu</span> <span class="o">=</span> <span class="p">(</span><span class="n">hmin</span><span class="o">-</span><span class="mi">360</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">u</span><span class="p">)</span> <span class="o">+</span> <span class="n">hmax</span><span class="o">*</span><span class="n">u</span>
</span><span id="L-648"><a href="#L-648"><span class="linenos">648</span></a>                            <span class="k">if</span> <span class="n">hu</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span> <span class="n">hv</span> <span class="o">=</span> <span class="mi">360</span> <span class="o">+</span><span class="n">hu</span>
</span><span id="L-649"><a href="#L-649"><span class="linenos">649</span></a>                        <span class="n">cv</span> <span class="o">=</span> <span class="n">cmin</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">v</span><span class="p">)</span><span class="o">+</span><span class="n">cmax</span><span class="o">*</span><span class="n">v</span>
</span><span id="L-650"><a href="#L-650"><span class="linenos">650</span></a>                        <span class="n">LL</span> <span class="o">=</span> <span class="p">(</span><span class="n">Lmin</span><span class="o">+</span><span class="n">Lmax</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span>
</span><span id="L-651"><a href="#L-651"><span class="linenos">651</span></a>                        <span class="n">colorData</span><span class="p">[</span><span class="n">y</span><span class="p">,</span><span class="n">x</span><span class="p">,:]</span> <span class="o">=</span> <span class="p">[</span><span class="n">LL</span><span class="p">,</span><span class="n">cv</span><span class="p">,</span><span class="n">hu</span><span class="p">]</span>
</span><span id="L-652"><a href="#L-652"><span class="linenos">652</span></a>
</span><span id="L-653"><a href="#L-653"><span class="linenos">653</span></a>        <span class="k">return</span> <span class="n">colorData</span>
</span><span id="L-654"><a href="#L-654"><span class="linenos">654</span></a>
</span><span id="L-655"><a href="#L-655"><span class="linenos">655</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">split</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">widthSegment</span><span class="p">,</span><span class="n">heightSegment</span><span class="p">):</span>
</span><span id="L-656"><a href="#L-656"><span class="linenos">656</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-657"><a href="#L-657"><span class="linenos">657</span></a><span class="sd">        Divide the image into a grid of sub-images.</span>
</span><span id="L-658"><a href="#L-658"><span class="linenos">658</span></a><span class="sd">        </span>
</span><span id="L-659"><a href="#L-659"><span class="linenos">659</span></a><span class="sd">        Splits the current image into widthSegment × heightSegment sub-images,</span>
</span><span id="L-660"><a href="#L-660"><span class="linenos">660</span></a><span class="sd">        each maintaining the same properties as the original image.</span>
</span><span id="L-661"><a href="#L-661"><span class="linenos">661</span></a>
</span><span id="L-662"><a href="#L-662"><span class="linenos">662</span></a><span class="sd">        Args:</span>
</span><span id="L-663"><a href="#L-663"><span class="linenos">663</span></a><span class="sd">            widthSegment (int): Number of horizontal segments</span>
</span><span id="L-664"><a href="#L-664"><span class="linenos">664</span></a><span class="sd">            heightSegment (int): Number of vertical segments</span>
</span><span id="L-665"><a href="#L-665"><span class="linenos">665</span></a>
</span><span id="L-666"><a href="#L-666"><span class="linenos">666</span></a><span class="sd">        Returns:</span>
</span><span id="L-667"><a href="#L-667"><span class="linenos">667</span></a><span class="sd">            list: 2D list of Image objects representing the sub-images</span>
</span><span id="L-668"><a href="#L-668"><span class="linenos">668</span></a><span class="sd">                 Arranged as [row][column] where each element is an Image</span>
</span><span id="L-669"><a href="#L-669"><span class="linenos">669</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-670"><a href="#L-670"><span class="linenos">670</span></a>        <span class="n">imageHeight</span><span class="p">,</span><span class="n">imageWidth</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">colorData</span><span class="o">.</span><span class="n">shape</span>
</span><span id="L-671"><a href="#L-671"><span class="linenos">671</span></a>        <span class="n">widthLimit</span> <span class="o">=</span> <span class="p">[(</span><span class="n">i</span><span class="o">*</span><span class="p">(</span><span class="n">imageWidth</span><span class="o">//</span><span class="n">widthSegment</span><span class="p">))</span>  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">widthSegment</span><span class="p">)]</span><span class="o">+</span><span class="p">[</span><span class="n">imageWidth</span><span class="p">]</span>
</span><span id="L-672"><a href="#L-672"><span class="linenos">672</span></a>        <span class="n">heightLimit</span> <span class="o">=</span> <span class="p">[(</span><span class="n">i</span><span class="o">*</span><span class="p">(</span><span class="n">imageHeight</span><span class="o">//</span><span class="n">heightSegment</span><span class="p">))</span>  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">widthSegment</span><span class="p">)]</span><span class="o">+</span><span class="p">[</span><span class="n">imageHeight</span><span class="p">]</span>
</span><span id="L-673"><a href="#L-673"><span class="linenos">673</span></a>
</span><span id="L-674"><a href="#L-674"><span class="linenos">674</span></a>        <span class="n">res</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-675"><a href="#L-675"><span class="linenos">675</span></a>
</span><span id="L-676"><a href="#L-676"><span class="linenos">676</span></a>        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">heightSegment</span><span class="p">):</span>
</span><span id="L-677"><a href="#L-677"><span class="linenos">677</span></a>            <span class="n">lines</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="L-678"><a href="#L-678"><span class="linenos">678</span></a>            <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">widthSegment</span><span class="p">):</span>
</span><span id="L-679"><a href="#L-679"><span class="linenos">679</span></a>                <span class="n">cData</span> <span class="o">=</span>  <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">colorData</span><span class="p">[(</span><span class="n">heightLimit</span><span class="p">[</span><span class="n">line</span><span class="p">]):(</span><span class="n">heightLimit</span><span class="p">[</span><span class="n">line</span><span class="o">+</span><span class="mi">1</span><span class="p">]),(</span><span class="n">widthLimit</span><span class="p">[</span><span class="n">col</span><span class="p">]):(</span><span class="n">widthLimit</span><span class="p">[</span><span class="n">col</span><span class="o">+</span><span class="mi">1</span><span class="p">]),:])</span>
</span><span id="L-680"><a href="#L-680"><span class="linenos">680</span></a>                <span class="n">imgTemp</span> <span class="o">=</span> <span class="n">Image</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">),</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">),</span> <span class="n">cData</span><span class="p">,</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">linear</span><span class="p">,</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">colorSpace</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">scalingFactor</span><span class="p">)</span>
</span><span id="L-681"><a href="#L-681"><span class="linenos">681</span></a>                <span class="n">imgTemp</span><span class="o">.</span><span class="n">metadata</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">)</span>
</span><span id="L-682"><a href="#L-682"><span class="linenos">682</span></a>                <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">imgTemp</span><span class="p">)</span>
</span><span id="L-683"><a href="#L-683"><span class="linenos">683</span></a>            <span class="n">res</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>
</span><span id="L-684"><a href="#L-684"><span class="linenos">684</span></a>
</span><span id="L-685"><a href="#L-685"><span class="linenos">685</span></a>        <span class="k">return</span> <span class="n">res</span>
</span><span id="L-686"><a href="#L-686"><span class="linenos">686</span></a>
</span><span id="L-687"><a href="#L-687"><span class="linenos">687</span></a>    <span class="nd">@staticmethod</span>
</span><span id="L-688"><a href="#L-688"><span class="linenos">688</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">merge</span><span class="p">(</span><span class="n">imgList</span><span class="p">):</span>
</span><span id="L-689"><a href="#L-689"><span class="linenos">689</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-690"><a href="#L-690"><span class="linenos">690</span></a><span class="sd">        Combine a 2D list of images into a single merged image.</span>
</span><span id="L-691"><a href="#L-691"><span class="linenos">691</span></a><span class="sd">        </span>
</span><span id="L-692"><a href="#L-692"><span class="linenos">692</span></a><span class="sd">        Reconstructs a complete image from sub-images that were previously split,</span>
</span><span id="L-693"><a href="#L-693"><span class="linenos">693</span></a><span class="sd">        assuming all sub-images have compatible dimensions and properties.</span>
</span><span id="L-694"><a href="#L-694"><span class="linenos">694</span></a>
</span><span id="L-695"><a href="#L-695"><span class="linenos">695</span></a><span class="sd">        Args:</span>
</span><span id="L-696"><a href="#L-696"><span class="linenos">696</span></a><span class="sd">            imgList (list): 2D list of Image objects to merge</span>
</span><span id="L-697"><a href="#L-697"><span class="linenos">697</span></a>
</span><span id="L-698"><a href="#L-698"><span class="linenos">698</span></a><span class="sd">        Returns:</span>
</span><span id="L-699"><a href="#L-699"><span class="linenos">699</span></a><span class="sd">            Image: Single merged image with combined pixel data</span>
</span><span id="L-700"><a href="#L-700"><span class="linenos">700</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-701"><a href="#L-701"><span class="linenos">701</span></a>        <span class="n">totalWidth</span><span class="o">=</span> <span class="n">functools</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">:</span> <span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">,</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">img</span><span class="p">:</span> <span class="n">img</span><span class="o">.</span><span class="n">colorData</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">imgList</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span><span class="mi">0</span><span class="p">)</span>
</span><span id="L-702"><a href="#L-702"><span class="linenos">702</span></a>        <span class="n">totalHeight</span><span class="o">=</span> <span class="n">functools</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">:</span> <span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">,</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">imgList</span><span class="p">:</span> <span class="n">imgList</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">imgList</span><span class="p">),</span><span class="mi">0</span><span class="p">)</span>
</span><span id="L-703"><a href="#L-703"><span class="linenos">703</span></a>
</span><span id="L-704"><a href="#L-704"><span class="linenos">704</span></a>        <span class="n">cData</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">totalHeight</span><span class="p">,</span><span class="n">totalWidth</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
</span><span id="L-705"><a href="#L-705"><span class="linenos">705</span></a>
</span><span id="L-706"><a href="#L-706"><span class="linenos">706</span></a>        <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="L-707"><a href="#L-707"><span class="linenos">707</span></a>        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">imgList</span><span class="p">:</span>
</span><span id="L-708"><a href="#L-708"><span class="linenos">708</span></a>            <span class="n">x</span><span class="o">=</span><span class="mi">0</span>
</span><span id="L-709"><a href="#L-709"><span class="linenos">709</span></a>            <span class="k">for</span> <span class="n">img</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
</span><span id="L-710"><a href="#L-710"><span class="linenos">710</span></a>                <span class="n">cData</span><span class="p">[</span><span class="n">y</span><span class="p">:(</span><span class="n">y</span><span class="o">+</span><span class="n">img</span><span class="o">.</span><span class="n">colorData</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span><span class="n">x</span><span class="p">:(</span><span class="n">x</span><span class="o">+</span><span class="n">img</span><span class="o">.</span><span class="n">colorData</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]),:]</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">colorData</span>
</span><span id="L-711"><a href="#L-711"><span class="linenos">711</span></a>                <span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="o">+</span><span class="n">img</span><span class="o">.</span><span class="n">colorData</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="L-712"><a href="#L-712"><span class="linenos">712</span></a>            <span class="n">y</span> <span class="o">=</span> <span class="n">y</span> <span class="o">+</span> <span class="n">line</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">colorData</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="L-713"><a href="#L-713"><span class="linenos">713</span></a>        <span class="k">return</span> <span class="n">Image</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">imgList</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">path</span><span class="p">),</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">imgList</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="p">),</span> <span class="n">cData</span><span class="p">,</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">imgList</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">type</span><span class="p">),</span> <span class="n">imgList</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">linear</span><span class="p">,</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">imgList</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">colorSpace</span><span class="p">),</span> <span class="n">imgList</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">scalingFactor</span><span class="p">)</span>
</span><span id="L-714"><a href="#L-714"><span class="linenos">714</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-715"><a href="#L-715"><span class="linenos">715</span></a><span class="c1"># --- Class ColorSpace -------------------------------------------------------</span>
</span><span id="L-716"><a href="#L-716"><span class="linenos">716</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-717"><a href="#L-717"><span class="linenos">717</span></a><span class="k">class</span><span class="w"> </span><span class="nc">ColorSpace</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
</span><span id="L-718"><a href="#L-718"><span class="linenos">718</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-719"><a href="#L-719"><span class="linenos">719</span></a><span class="sd">    Color space definitions and factory methods for HDR imaging.</span>
</span><span id="L-720"><a href="#L-720"><span class="linenos">720</span></a><span class="sd">    </span>
</span><span id="L-721"><a href="#L-721"><span class="linenos">721</span></a><span class="sd">    This class provides static methods for creating and managing various color</span>
</span><span id="L-722"><a href="#L-722"><span class="linenos">722</span></a><span class="sd">    spaces used in HDR image processing. It serves as a centralized interface</span>
</span><span id="L-723"><a href="#L-723"><span class="linenos">723</span></a><span class="sd">    for color space creation and configuration.</span>
</span><span id="L-724"><a href="#L-724"><span class="linenos">724</span></a><span class="sd">    </span>
</span><span id="L-725"><a href="#L-725"><span class="linenos">725</span></a><span class="sd">    Static Methods:</span>
</span><span id="L-726"><a href="#L-726"><span class="linenos">726</span></a><span class="sd">        Lab: Create Lab color space definition</span>
</span><span id="L-727"><a href="#L-727"><span class="linenos">727</span></a><span class="sd">        Lch: Create LCH color space definition  </span>
</span><span id="L-728"><a href="#L-728"><span class="linenos">728</span></a><span class="sd">        sRGB: Create standard sRGB color space</span>
</span><span id="L-729"><a href="#L-729"><span class="linenos">729</span></a><span class="sd">        scRGB: Create extended sRGB color space for HDR</span>
</span><span id="L-730"><a href="#L-730"><span class="linenos">730</span></a><span class="sd">        XYZ: Create XYZ color space definition</span>
</span><span id="L-731"><a href="#L-731"><span class="linenos">731</span></a><span class="sd">        build: Factory method for creating color spaces by name</span>
</span><span id="L-732"><a href="#L-732"><span class="linenos">732</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-733"><a href="#L-733"><span class="linenos">733</span></a>
</span><span id="L-734"><a href="#L-734"><span class="linenos">734</span></a>    <span class="nd">@staticmethod</span>
</span><span id="L-735"><a href="#L-735"><span class="linenos">735</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">Lab</span><span class="p">():</span>
</span><span id="L-736"><a href="#L-736"><span class="linenos">736</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-737"><a href="#L-737"><span class="linenos">737</span></a><span class="sd">        Create a Lab color space definition for HDR processing.</span>
</span><span id="L-738"><a href="#L-738"><span class="linenos">738</span></a><span class="sd">        </span>
</span><span id="L-739"><a href="#L-739"><span class="linenos">739</span></a><span class="sd">        Returns:</span>
</span><span id="L-740"><a href="#L-740"><span class="linenos">740</span></a><span class="sd">            colour.RGB_Colourspace: Lab color space configuration</span>
</span><span id="L-741"><a href="#L-741"><span class="linenos">741</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-742"><a href="#L-742"><span class="linenos">742</span></a>        <span class="k">return</span> <span class="n">colour</span><span class="o">.</span><span class="n">RGB_Colourspace</span><span class="p">(</span><span class="s1">&#39;Lab&#39;</span><span class="p">,</span> <span class="n">primaries</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.73470</span><span class="p">,</span> <span class="mf">0.26530</span><span class="p">,</span> <span class="mf">0.00000</span><span class="p">,</span> <span class="mf">1.00000</span><span class="p">,</span> <span class="mf">0.00010</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.07700</span><span class="p">]),</span> <span class="n">whitepoint</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.32168</span><span class="p">,</span> <span class="mf">0.33767</span><span class="p">]))</span>
</span><span id="L-743"><a href="#L-743"><span class="linenos">743</span></a>     
</span><span id="L-744"><a href="#L-744"><span class="linenos">744</span></a>    <span class="nd">@staticmethod</span>                                 
</span><span id="L-745"><a href="#L-745"><span class="linenos">745</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">Lch</span><span class="p">():</span>
</span><span id="L-746"><a href="#L-746"><span class="linenos">746</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-747"><a href="#L-747"><span class="linenos">747</span></a><span class="sd">        Create an LCH color space definition for HDR processing.</span>
</span><span id="L-748"><a href="#L-748"><span class="linenos">748</span></a><span class="sd">        </span>
</span><span id="L-749"><a href="#L-749"><span class="linenos">749</span></a><span class="sd">        Returns:</span>
</span><span id="L-750"><a href="#L-750"><span class="linenos">750</span></a><span class="sd">            colour.RGB_Colourspace: LCH color space configuration</span>
</span><span id="L-751"><a href="#L-751"><span class="linenos">751</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-752"><a href="#L-752"><span class="linenos">752</span></a>        <span class="k">return</span> <span class="n">colour</span><span class="o">.</span><span class="n">RGB_Colourspace</span><span class="p">(</span><span class="s1">&#39;Lch&#39;</span><span class="p">,</span> <span class="n">primaries</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.73470</span><span class="p">,</span> <span class="mf">0.26530</span><span class="p">,</span> <span class="mf">0.00000</span><span class="p">,</span> <span class="mf">1.00000</span><span class="p">,</span> <span class="mf">0.00010</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.07700</span><span class="p">]),</span> <span class="n">whitepoint</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.32168</span><span class="p">,</span> <span class="mf">0.33767</span><span class="p">]))</span>
</span><span id="L-753"><a href="#L-753"><span class="linenos">753</span></a>
</span><span id="L-754"><a href="#L-754"><span class="linenos">754</span></a>    <span class="nd">@staticmethod</span>
</span><span id="L-755"><a href="#L-755"><span class="linenos">755</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">sRGB</span><span class="p">():</span>
</span><span id="L-756"><a href="#L-756"><span class="linenos">756</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-757"><a href="#L-757"><span class="linenos">757</span></a><span class="sd">        Create a standard sRGB color space definition.</span>
</span><span id="L-758"><a href="#L-758"><span class="linenos">758</span></a><span class="sd">        </span>
</span><span id="L-759"><a href="#L-759"><span class="linenos">759</span></a><span class="sd">        Returns:</span>
</span><span id="L-760"><a href="#L-760"><span class="linenos">760</span></a><span class="sd">            colour.RGB_Colourspace: sRGB color space configuration</span>
</span><span id="L-761"><a href="#L-761"><span class="linenos">761</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-762"><a href="#L-762"><span class="linenos">762</span></a>        <span class="k">return</span> <span class="n">colour</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">RGB_COLOURSPACES</span><span class="p">[</span><span class="s1">&#39;sRGB&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="L-763"><a href="#L-763"><span class="linenos">763</span></a>
</span><span id="L-764"><a href="#L-764"><span class="linenos">764</span></a>    <span class="nd">@staticmethod</span>
</span><span id="L-765"><a href="#L-765"><span class="linenos">765</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">scRGB</span><span class="p">():</span>
</span><span id="L-766"><a href="#L-766"><span class="linenos">766</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-767"><a href="#L-767"><span class="linenos">767</span></a><span class="sd">        Create an extended sRGB color space for HDR content.</span>
</span><span id="L-768"><a href="#L-768"><span class="linenos">768</span></a><span class="sd">        </span>
</span><span id="L-769"><a href="#L-769"><span class="linenos">769</span></a><span class="sd">        This variant of sRGB removes the gamma correction for HDR processing,</span>
</span><span id="L-770"><a href="#L-770"><span class="linenos">770</span></a><span class="sd">        providing linear RGB values with extended range.</span>
</span><span id="L-771"><a href="#L-771"><span class="linenos">771</span></a><span class="sd">        </span>
</span><span id="L-772"><a href="#L-772"><span class="linenos">772</span></a><span class="sd">        Returns:</span>
</span><span id="L-773"><a href="#L-773"><span class="linenos">773</span></a><span class="sd">            colour.RGB_Colourspace: Extended sRGB color space for HDR</span>
</span><span id="L-774"><a href="#L-774"><span class="linenos">774</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-775"><a href="#L-775"><span class="linenos">775</span></a>        <span class="n">colorSpace</span> <span class="o">=</span> <span class="n">colour</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">RGB_COLOURSPACES</span><span class="p">[</span><span class="s1">&#39;sRGB&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="L-776"><a href="#L-776"><span class="linenos">776</span></a>        <span class="n">colorSpace</span><span class="o">.</span><span class="n">cctf_decoding</span><span class="o">=</span><span class="kc">None</span>
</span><span id="L-777"><a href="#L-777"><span class="linenos">777</span></a>        <span class="k">return</span> <span class="n">colorSpace</span>
</span><span id="L-778"><a href="#L-778"><span class="linenos">778</span></a>
</span><span id="L-779"><a href="#L-779"><span class="linenos">779</span></a>    <span class="nd">@staticmethod</span>
</span><span id="L-780"><a href="#L-780"><span class="linenos">780</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">XYZ</span><span class="p">():</span>
</span><span id="L-781"><a href="#L-781"><span class="linenos">781</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-782"><a href="#L-782"><span class="linenos">782</span></a><span class="sd">        Create an XYZ color space definition.</span>
</span><span id="L-783"><a href="#L-783"><span class="linenos">783</span></a><span class="sd">        </span>
</span><span id="L-784"><a href="#L-784"><span class="linenos">784</span></a><span class="sd">        Returns:</span>
</span><span id="L-785"><a href="#L-785"><span class="linenos">785</span></a><span class="sd">            colour.RGB_Colourspace: XYZ color space configuration</span>
</span><span id="L-786"><a href="#L-786"><span class="linenos">786</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-787"><a href="#L-787"><span class="linenos">787</span></a>        <span class="k">return</span> <span class="n">colour</span><span class="o">.</span><span class="n">RGB_Colourspace</span><span class="p">(</span><span class="s1">&#39;XYZ&#39;</span><span class="p">,</span> <span class="n">primaries</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.73470</span><span class="p">,</span> <span class="mf">0.26530</span><span class="p">,</span> <span class="mf">0.00000</span><span class="p">,</span> <span class="mf">1.00000</span><span class="p">,</span> <span class="mf">0.00010</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.07700</span><span class="p">]),</span> <span class="n">whitepoint</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.32168</span><span class="p">,</span> <span class="mf">0.33767</span><span class="p">]))</span>
</span><span id="L-788"><a href="#L-788"><span class="linenos">788</span></a>
</span><span id="L-789"><a href="#L-789"><span class="linenos">789</span></a>    <span class="nd">@staticmethod</span>
</span><span id="L-790"><a href="#L-790"><span class="linenos">790</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">build</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;sRGB&#39;</span><span class="p">):</span>
</span><span id="L-791"><a href="#L-791"><span class="linenos">791</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-792"><a href="#L-792"><span class="linenos">792</span></a><span class="sd">        Factory method to create color spaces by name.</span>
</span><span id="L-793"><a href="#L-793"><span class="linenos">793</span></a><span class="sd">        </span>
</span><span id="L-794"><a href="#L-794"><span class="linenos">794</span></a><span class="sd">        Args:</span>
</span><span id="L-795"><a href="#L-795"><span class="linenos">795</span></a><span class="sd">            name (str, optional): Color space name (&#39;sRGB&#39;, &#39;scRGB&#39;, &#39;Lab&#39;, &#39;Lch&#39;, &#39;XYZ&#39;)</span>
</span><span id="L-796"><a href="#L-796"><span class="linenos">796</span></a><span class="sd">                                 Defaults to &#39;sRGB&#39;</span>
</span><span id="L-797"><a href="#L-797"><span class="linenos">797</span></a><span class="sd">        </span>
</span><span id="L-798"><a href="#L-798"><span class="linenos">798</span></a><span class="sd">        Returns:</span>
</span><span id="L-799"><a href="#L-799"><span class="linenos">799</span></a><span class="sd">            colour.RGB_Colourspace or None: Requested color space or None if unknown</span>
</span><span id="L-800"><a href="#L-800"><span class="linenos">800</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-801"><a href="#L-801"><span class="linenos">801</span></a>        <span class="n">cs</span>  <span class="o">=</span> <span class="kc">None</span>
</span><span id="L-802"><a href="#L-802"><span class="linenos">802</span></a>        <span class="k">if</span> <span class="n">name</span><span class="o">==</span> <span class="s1">&#39;sRGB&#39;</span><span class="p">:</span> <span class="n">cs</span> <span class="o">=</span>  <span class="n">ColorSpace</span><span class="o">.</span><span class="n">sRGB</span><span class="p">()</span>
</span><span id="L-803"><a href="#L-803"><span class="linenos">803</span></a>        <span class="k">if</span> <span class="n">name</span><span class="o">==</span> <span class="s1">&#39;scRGB&#39;</span><span class="p">:</span> <span class="n">cs</span> <span class="o">=</span>  <span class="n">ColorSpace</span><span class="o">.</span><span class="n">scRGB</span><span class="p">()</span>
</span><span id="L-804"><a href="#L-804"><span class="linenos">804</span></a>        <span class="k">if</span> <span class="n">name</span><span class="o">==</span> <span class="s1">&#39;Lab&#39;</span> <span class="p">:</span> <span class="n">cs</span> <span class="o">=</span>  <span class="n">ColorSpace</span><span class="o">.</span><span class="n">Lab</span><span class="p">()</span>
</span><span id="L-805"><a href="#L-805"><span class="linenos">805</span></a>        <span class="k">if</span> <span class="n">name</span><span class="o">==</span> <span class="s1">&#39;Lch&#39;</span> <span class="p">:</span> <span class="n">cs</span> <span class="o">=</span>  <span class="n">ColorSpace</span><span class="o">.</span><span class="n">Lch</span><span class="p">()</span>
</span><span id="L-806"><a href="#L-806"><span class="linenos">806</span></a>        <span class="k">if</span> <span class="n">name</span><span class="o">==</span> <span class="s1">&#39;XYZ&#39;</span> <span class="p">:</span> <span class="n">cs</span> <span class="o">=</span>  <span class="n">ColorSpace</span><span class="o">.</span><span class="n">XYZ</span><span class="p">()</span>
</span><span id="L-807"><a href="#L-807"><span class="linenos">807</span></a>        <span class="k">return</span> <span class="n">cs</span> 
</span><span id="L-808"><a href="#L-808"><span class="linenos">808</span></a><span class="c1"># -----------------------------------------------------------------------------     </span>
</span><span id="L-809"><a href="#L-809"><span class="linenos">809</span></a><span class="c1"># --- Class Histogram --------------------------------------------------------</span>
</span><span id="L-810"><a href="#L-810"><span class="linenos">810</span></a><span class="c1"># -----------------------------------------------------------------------------</span>
</span><span id="L-811"><a href="#L-811"><span class="linenos">811</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Histogram</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
</span><span id="L-812"><a href="#L-812"><span class="linenos">812</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-813"><a href="#L-813"><span class="linenos">813</span></a><span class="sd">    Image histogram computation and analysis for HDR imaging.</span>
</span><span id="L-814"><a href="#L-814"><span class="linenos">814</span></a><span class="sd">    </span>
</span><span id="L-815"><a href="#L-815"><span class="linenos">815</span></a><span class="sd">    This class provides comprehensive histogram generation and analysis capabilities</span>
</span><span id="L-816"><a href="#L-816"><span class="linenos">816</span></a><span class="sd">    for HDR images, supporting both linear and logarithmic scales for different</span>
</span><span id="L-817"><a href="#L-817"><span class="linenos">817</span></a><span class="sd">    dynamic ranges.</span>
</span><span id="L-818"><a href="#L-818"><span class="linenos">818</span></a><span class="sd">    </span>
</span><span id="L-819"><a href="#L-819"><span class="linenos">819</span></a><span class="sd">    Attributes:</span>
</span><span id="L-820"><a href="#L-820"><span class="linenos">820</span></a><span class="sd">        name (str): Descriptive name for the histogram</span>
</span><span id="L-821"><a href="#L-821"><span class="linenos">821</span></a><span class="sd">        channel (channel): Color channel analyzed</span>
</span><span id="L-822"><a href="#L-822"><span class="linenos">822</span></a><span class="sd">        histValue (numpy.ndarray): Histogram bin values</span>
</span><span id="L-823"><a href="#L-823"><span class="linenos">823</span></a><span class="sd">        edgeValue (numpy.ndarray): Histogram bin edges</span>
</span><span id="L-824"><a href="#L-824"><span class="linenos">824</span></a><span class="sd">        logSpace (bool): Whether histogram uses logarithmic spacing</span>
</span><span id="L-825"><a href="#L-825"><span class="linenos">825</span></a><span class="sd">    </span>
</span><span id="L-826"><a href="#L-826"><span class="linenos">826</span></a><span class="sd">    Methods:</span>
</span><span id="L-827"><a href="#L-827"><span class="linenos">827</span></a><span class="sd">        normalise: Normalize histogram values</span>
</span><span id="L-828"><a href="#L-828"><span class="linenos">828</span></a><span class="sd">        plot: Display histogram on matplotlib axis</span>
</span><span id="L-829"><a href="#L-829"><span class="linenos">829</span></a><span class="sd">        toNumpy: Convert histogram to numpy array</span>
</span><span id="L-830"><a href="#L-830"><span class="linenos">830</span></a><span class="sd">        </span>
</span><span id="L-831"><a href="#L-831"><span class="linenos">831</span></a><span class="sd">    Static Methods:</span>
</span><span id="L-832"><a href="#L-832"><span class="linenos">832</span></a><span class="sd">        build: Generate histogram from image and channel</span>
</span><span id="L-833"><a href="#L-833"><span class="linenos">833</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-834"><a href="#L-834"><span class="linenos">834</span></a>    
</span><span id="L-835"><a href="#L-835"><span class="linenos">835</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">histValue</span><span class="p">,</span><span class="n">edgeValue</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">channel</span><span class="p">,</span><span class="n">logSpace</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="L-836"><a href="#L-836"><span class="linenos">836</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-837"><a href="#L-837"><span class="linenos">837</span></a><span class="sd">        Initialize a histogram object with computed values.</span>
</span><span id="L-838"><a href="#L-838"><span class="linenos">838</span></a>
</span><span id="L-839"><a href="#L-839"><span class="linenos">839</span></a><span class="sd">        Args:</span>
</span><span id="L-840"><a href="#L-840"><span class="linenos">840</span></a><span class="sd">            histValue (numpy.ndarray): Histogram bin counts</span>
</span><span id="L-841"><a href="#L-841"><span class="linenos">841</span></a><span class="sd">            edgeValue (numpy.ndarray): Histogram bin edge positions</span>
</span><span id="L-842"><a href="#L-842"><span class="linenos">842</span></a><span class="sd">            name (str): Descriptive name for the histogram</span>
</span><span id="L-843"><a href="#L-843"><span class="linenos">843</span></a><span class="sd">            channel (channel): Color channel that was analyzed</span>
</span><span id="L-844"><a href="#L-844"><span class="linenos">844</span></a><span class="sd">            logSpace (bool, optional): Whether bins use logarithmic spacing (default: False)</span>
</span><span id="L-845"><a href="#L-845"><span class="linenos">845</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-846"><a href="#L-846"><span class="linenos">846</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">name</span>           <span class="o">=</span> <span class="n">name</span>
</span><span id="L-847"><a href="#L-847"><span class="linenos">847</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">channel</span>        <span class="o">=</span> <span class="n">channel</span>
</span><span id="L-848"><a href="#L-848"><span class="linenos">848</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">histValue</span>      <span class="o">=</span> <span class="n">histValue</span>
</span><span id="L-849"><a href="#L-849"><span class="linenos">849</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">edgeValue</span>      <span class="o">=</span> <span class="n">edgeValue</span>
</span><span id="L-850"><a href="#L-850"><span class="linenos">850</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logSpace</span>       <span class="o">=</span> <span class="n">logSpace</span>    
</span><span id="L-851"><a href="#L-851"><span class="linenos">851</span></a>
</span><span id="L-852"><a href="#L-852"><span class="linenos">852</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-853"><a href="#L-853"><span class="linenos">853</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-854"><a href="#L-854"><span class="linenos">854</span></a><span class="sd">        Generate a detailed string representation of the histogram.</span>
</span><span id="L-855"><a href="#L-855"><span class="linenos">855</span></a><span class="sd">        </span>
</span><span id="L-856"><a href="#L-856"><span class="linenos">856</span></a><span class="sd">        Returns:</span>
</span><span id="L-857"><a href="#L-857"><span class="linenos">857</span></a><span class="sd">            str: Comprehensive histogram description</span>
</span><span id="L-858"><a href="#L-858"><span class="linenos">858</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-859"><a href="#L-859"><span class="linenos">859</span></a>        <span class="n">res</span> <span class="o">=</span>   <span class="s2">&quot;&lt;class Histogram: </span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> \
</span><span id="L-860"><a href="#L-860"><span class="linenos">860</span></a>                <span class="s2">&quot;t name:&quot;</span>               <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>                 <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>  <span class="o">+</span> \
</span><span id="L-861"><a href="#L-861"><span class="linenos">861</span></a>                <span class="s2">&quot;</span><span class="se">\t</span><span class="s2"> nb bins: &quot;</span>        <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">histValue</span><span class="p">))</span>    <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>  <span class="o">+</span> \
</span><span id="L-862"><a href="#L-862"><span class="linenos">862</span></a>                <span class="s2">&quot;</span><span class="se">\t</span><span class="s2"> channel: &quot;</span>        <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">channel</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>      <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>  <span class="o">+</span> \
</span><span id="L-863"><a href="#L-863"><span class="linenos">863</span></a>                <span class="s2">&quot;</span><span class="se">\t</span><span class="s2"> logSpace: &quot;</span>       <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">logSpace</span><span class="p">)</span>          <span class="o">+</span> <span class="s2">&quot;&gt;&quot;</span>  
</span><span id="L-864"><a href="#L-864"><span class="linenos">864</span></a>        <span class="k">return</span> <span class="n">res</span>
</span><span id="L-865"><a href="#L-865"><span class="linenos">865</span></a>
</span><span id="L-866"><a href="#L-866"><span class="linenos">866</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-867"><a href="#L-867"><span class="linenos">867</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-868"><a href="#L-868"><span class="linenos">868</span></a><span class="sd">        Generate a human-readable string representation.</span>
</span><span id="L-869"><a href="#L-869"><span class="linenos">869</span></a><span class="sd">        </span>
</span><span id="L-870"><a href="#L-870"><span class="linenos">870</span></a><span class="sd">        Returns:</span>
</span><span id="L-871"><a href="#L-871"><span class="linenos">871</span></a><span class="sd">            str: Same as __repr__ for consistency</span>
</span><span id="L-872"><a href="#L-872"><span class="linenos">872</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-873"><a href="#L-873"><span class="linenos">873</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span>
</span><span id="L-874"><a href="#L-874"><span class="linenos">874</span></a>
</span><span id="L-875"><a href="#L-875"><span class="linenos">875</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">normalise</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">norm</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="L-876"><a href="#L-876"><span class="linenos">876</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-877"><a href="#L-877"><span class="linenos">877</span></a><span class="sd">        Normalize histogram values according to specified norm.</span>
</span><span id="L-878"><a href="#L-878"><span class="linenos">878</span></a>
</span><span id="L-879"><a href="#L-879"><span class="linenos">879</span></a><span class="sd">        Args:</span>
</span><span id="L-880"><a href="#L-880"><span class="linenos">880</span></a><span class="sd">            norm (str, optional): Normalization method (&#39;probability&#39; or &#39;dot&#39;)</span>
</span><span id="L-881"><a href="#L-881"><span class="linenos">881</span></a><span class="sd">                                 Defaults to &#39;probability&#39;</span>
</span><span id="L-882"><a href="#L-882"><span class="linenos">882</span></a><span class="sd">                </span>
</span><span id="L-883"><a href="#L-883"><span class="linenos">883</span></a><span class="sd">        Returns:</span>
</span><span id="L-884"><a href="#L-884"><span class="linenos">884</span></a><span class="sd">            Histogram: New normalized histogram object</span>
</span><span id="L-885"><a href="#L-885"><span class="linenos">885</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-886"><a href="#L-886"><span class="linenos">886</span></a>        <span class="n">res</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="L-887"><a href="#L-887"><span class="linenos">887</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">norm</span><span class="p">:</span> <span class="n">norm</span> <span class="o">=</span> <span class="s1">&#39;probability&#39;</span>
</span><span id="L-888"><a href="#L-888"><span class="linenos">888</span></a>        <span class="k">if</span> <span class="n">norm</span> <span class="o">==</span> <span class="s1">&#39;probability&#39;</span><span class="p">:</span>
</span><span id="L-889"><a href="#L-889"><span class="linenos">889</span></a>            <span class="nb">sum</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">histValue</span><span class="p">)</span>
</span><span id="L-890"><a href="#L-890"><span class="linenos">890</span></a>            <span class="n">res</span><span class="o">.</span><span class="n">histValue</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">histValue</span><span class="o">/</span><span class="nb">sum</span>
</span><span id="L-891"><a href="#L-891"><span class="linenos">891</span></a>        <span class="k">elif</span> <span class="n">norm</span> <span class="o">==</span> <span class="s1">&#39;dot&#39;</span><span class="p">:</span>
</span><span id="L-892"><a href="#L-892"><span class="linenos">892</span></a>            <span class="n">dot2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">histValue</span><span class="p">,</span><span class="n">res</span><span class="o">.</span><span class="n">histValue</span><span class="p">)</span>
</span><span id="L-893"><a href="#L-893"><span class="linenos">893</span></a>            <span class="n">res</span><span class="o">.</span><span class="n">histValue</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">histValue</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">dot2</span><span class="p">)</span>
</span><span id="L-894"><a href="#L-894"><span class="linenos">894</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-895"><a href="#L-895"><span class="linenos">895</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;WARNING[Histogram.normalise(&quot;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="s2">&quot;): unknown norm:&quot;</span><span class="p">,</span> <span class="n">norm</span><span class="p">,</span><span class="s2">&quot;!]&quot;</span><span class="p">)</span>
</span><span id="L-896"><a href="#L-896"><span class="linenos">896</span></a>        <span class="k">return</span> <span class="n">res</span>
</span><span id="L-897"><a href="#L-897"><span class="linenos">897</span></a>
</span><span id="L-898"><a href="#L-898"><span class="linenos">898</span></a>    <span class="nd">@staticmethod</span>
</span><span id="L-899"><a href="#L-899"><span class="linenos">899</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">build</span><span class="p">(</span><span class="n">img</span><span class="p">,</span><span class="n">channel</span><span class="p">,</span><span class="n">nbBins</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span><span class="nb">range</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">logSpace</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="L-900"><a href="#L-900"><span class="linenos">900</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-901"><a href="#L-901"><span class="linenos">901</span></a><span class="sd">        Generate a histogram from an image channel.</span>
</span><span id="L-902"><a href="#L-902"><span class="linenos">902</span></a>
</span><span id="L-903"><a href="#L-903"><span class="linenos">903</span></a><span class="sd">        Args:</span>
</span><span id="L-904"><a href="#L-904"><span class="linenos">904</span></a><span class="sd">            img (Image): Source image for histogram generation</span>
</span><span id="L-905"><a href="#L-905"><span class="linenos">905</span></a><span class="sd">            channel (channel): Color channel to analyze</span>
</span><span id="L-906"><a href="#L-906"><span class="linenos">906</span></a><span class="sd">            nbBins (int, optional): Number of histogram bins (default: 100)</span>
</span><span id="L-907"><a href="#L-907"><span class="linenos">907</span></a><span class="sd">            range (tuple, optional): Value range for histogram (min, max)</span>
</span><span id="L-908"><a href="#L-908"><span class="linenos">908</span></a><span class="sd">                                   If None, determined automatically</span>
</span><span id="L-909"><a href="#L-909"><span class="linenos">909</span></a><span class="sd">            logSpace (bool or str, optional): Use logarithmic bin spacing</span>
</span><span id="L-910"><a href="#L-910"><span class="linenos">910</span></a><span class="sd">                                            &#39;auto&#39; determines from image type</span>
</span><span id="L-911"><a href="#L-911"><span class="linenos">911</span></a><span class="sd">                </span>
</span><span id="L-912"><a href="#L-912"><span class="linenos">912</span></a><span class="sd">        Returns:</span>
</span><span id="L-913"><a href="#L-913"><span class="linenos">913</span></a><span class="sd">            Histogram: Generated histogram object with computed values</span>
</span><span id="L-914"><a href="#L-914"><span class="linenos">914</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-915"><a href="#L-915"><span class="linenos">915</span></a>        <span class="c1"># logSpace</span>
</span><span id="L-916"><a href="#L-916"><span class="linenos">916</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">logSpace</span><span class="p">,(</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">str</span><span class="p">)):</span> <span class="n">logSpace</span> <span class="o">=</span> <span class="s1">&#39;auto&#39;</span>
</span><span id="L-917"><a href="#L-917"><span class="linenos">917</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">logSpace</span><span class="p">,</span><span class="nb">str</span><span class="p">):</span>
</span><span id="L-918"><a href="#L-918"><span class="linenos">918</span></a>            <span class="k">if</span> <span class="n">logSpace</span><span class="o">==</span><span class="s1">&#39;auto&#39;</span><span class="p">:</span>
</span><span id="L-919"><a href="#L-919"><span class="linenos">919</span></a>                <span class="k">if</span> <span class="n">img</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">image</span><span class="o">.</span><span class="n">imageType</span><span class="o">.</span><span class="n">imageType</span><span class="o">.</span><span class="n">SDR</span> <span class="p">:</span> <span class="n">logSpace</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-920"><a href="#L-920"><span class="linenos">920</span></a>                <span class="k">if</span> <span class="n">img</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">image</span><span class="o">.</span><span class="n">imageType</span><span class="o">.</span><span class="n">imageType</span><span class="o">.</span><span class="n">HDR</span> <span class="p">:</span> <span class="n">logSpace</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="L-921"><a href="#L-921"><span class="linenos">921</span></a>            <span class="k">else</span><span class="p">:</span> <span class="n">logSpace</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-922"><a href="#L-922"><span class="linenos">922</span></a>
</span><span id="L-923"><a href="#L-923"><span class="linenos">923</span></a>        <span class="n">channelVector</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">ndarray2vector</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">getChannel</span><span class="p">(</span><span class="n">channel</span><span class="p">))</span>
</span><span id="L-924"><a href="#L-924"><span class="linenos">924</span></a>        <span class="c1"># range</span>
</span><span id="L-925"><a href="#L-925"><span class="linenos">925</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">range</span><span class="p">:</span> 
</span><span id="L-926"><a href="#L-926"><span class="linenos">926</span></a>            <span class="k">if</span> <span class="n">channel</span><span class="o">.</span><span class="n">colorSpace</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;Lab&#39;</span><span class="p">:</span>
</span><span id="L-927"><a href="#L-927"><span class="linenos">927</span></a>                <span class="nb">range</span><span class="o">=</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">100.0</span><span class="p">)</span>
</span><span id="L-928"><a href="#L-928"><span class="linenos">928</span></a>            <span class="k">elif</span> <span class="n">channel</span><span class="o">.</span><span class="n">colorSpace</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;sRGB&#39;</span><span class="ow">or</span> <span class="n">channel</span><span class="o">.</span><span class="n">colorSpace</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;XYZ&#39;</span><span class="p">:</span>
</span><span id="L-929"><a href="#L-929"><span class="linenos">929</span></a>                <span class="nb">range</span><span class="o">=</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">1.0</span><span class="p">)</span>
</span><span id="L-930"><a href="#L-930"><span class="linenos">930</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="L-931"><a href="#L-931"><span class="linenos">931</span></a>                <span class="nb">range</span><span class="o">=</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">1.0</span><span class="p">)</span>
</span><span id="L-932"><a href="#L-932"><span class="linenos">932</span></a>
</span><span id="L-933"><a href="#L-933"><span class="linenos">933</span></a>        <span class="c1"># compute bins</span>
</span><span id="L-934"><a href="#L-934"><span class="linenos">934</span></a>        <span class="k">if</span> <span class="n">logSpace</span><span class="p">:</span>
</span><span id="L-935"><a href="#L-935"><span class="linenos">935</span></a>            <span class="n">minChannel</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">amin</span><span class="p">(</span><span class="n">channelVector</span><span class="p">)</span>
</span><span id="L-936"><a href="#L-936"><span class="linenos">936</span></a>            <span class="n">maxChannel</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">amax</span><span class="p">(</span><span class="n">channelVector</span><span class="p">)</span>
</span><span id="L-937"><a href="#L-937"><span class="linenos">937</span></a>            <span class="c1">#bins</span>
</span><span id="L-938"><a href="#L-938"><span class="linenos">938</span></a>            <span class="n">bins</span> <span class="o">=</span> <span class="mi">10</span> <span class="o">**</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">minChannel</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">maxChannel</span><span class="p">),</span> <span class="n">nbBins</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-939"><a href="#L-939"><span class="linenos">939</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-940"><a href="#L-940"><span class="linenos">940</span></a>            <span class="n">bins</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="nb">range</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="nb">range</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">nbBins</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-941"><a href="#L-941"><span class="linenos">941</span></a>
</span><span id="L-942"><a href="#L-942"><span class="linenos">942</span></a>        <span class="n">nphist</span><span class="p">,</span> <span class="n">npedges</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">histogram</span><span class="p">(</span><span class="n">channelVector</span><span class="p">,</span> <span class="n">bins</span><span class="p">)</span>
</span><span id="L-943"><a href="#L-943"><span class="linenos">943</span></a>
</span><span id="L-944"><a href="#L-944"><span class="linenos">944</span></a>        <span class="n">nphist</span> <span class="o">=</span> <span class="n">nphist</span><span class="o">/</span><span class="n">channelVector</span><span class="o">.</span><span class="n">shape</span>
</span><span id="L-945"><a href="#L-945"><span class="linenos">945</span></a>        <span class="k">return</span> <span class="n">Histogram</span><span class="p">(</span><span class="n">nphist</span><span class="p">,</span> 
</span><span id="L-946"><a href="#L-946"><span class="linenos">946</span></a>                         <span class="n">npedges</span><span class="p">,</span> 
</span><span id="L-947"><a href="#L-947"><span class="linenos">947</span></a>                         <span class="s1">&#39;hist_&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">channel</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;_&#39;</span><span class="o">+</span><span class="n">img</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> 
</span><span id="L-948"><a href="#L-948"><span class="linenos">948</span></a>                         <span class="n">channel</span><span class="p">,</span>
</span><span id="L-949"><a href="#L-949"><span class="linenos">949</span></a>                         <span class="n">logSpace</span> <span class="o">=</span> <span class="n">logSpace</span>
</span><span id="L-950"><a href="#L-950"><span class="linenos">950</span></a>                         <span class="p">)</span>
</span><span id="L-951"><a href="#L-951"><span class="linenos">951</span></a>
</span><span id="L-952"><a href="#L-952"><span class="linenos">952</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">ax</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">,</span><span class="n">shortName</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">title</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
</span><span id="L-953"><a href="#L-953"><span class="linenos">953</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-954"><a href="#L-954"><span class="linenos">954</span></a><span class="sd">        Display the histogram on a matplotlib axis.</span>
</span><span id="L-955"><a href="#L-955"><span class="linenos">955</span></a>
</span><span id="L-956"><a href="#L-956"><span class="linenos">956</span></a><span class="sd">        Args:</span>
</span><span id="L-957"><a href="#L-957"><span class="linenos">957</span></a><span class="sd">            ax (matplotlib.axes.Axes): Matplotlib axis for plotting</span>
</span><span id="L-958"><a href="#L-958"><span class="linenos">958</span></a><span class="sd">            color (str, optional): Plot color (default: &#39;r&#39;)</span>
</span><span id="L-959"><a href="#L-959"><span class="linenos">959</span></a><span class="sd">            shortName (bool, optional): Use abbreviated name (default: True)</span>
</span><span id="L-960"><a href="#L-960"><span class="linenos">960</span></a><span class="sd">            title (bool, optional): Show title (default: True)</span>
</span><span id="L-961"><a href="#L-961"><span class="linenos">961</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-962"><a href="#L-962"><span class="linenos">962</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">color</span> <span class="p">:</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;r&#39;</span>
</span><span id="L-963"><a href="#L-963"><span class="linenos">963</span></a>        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">edgeValue</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span><span class="bp">self</span><span class="o">.</span><span class="n">histValue</span><span class="p">,</span><span class="n">color</span><span class="p">)</span>
</span><span id="L-964"><a href="#L-964"><span class="linenos">964</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">logSpace</span><span class="p">:</span> <span class="n">ax</span><span class="o">.</span><span class="n">set_xscale</span><span class="p">(</span><span class="s2">&quot;log&quot;</span><span class="p">)</span>
</span><span id="L-965"><a href="#L-965"><span class="linenos">965</span></a>        <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="s2">&quot;(H(&quot;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">channel</span><span class="o">.</span><span class="n">name</span><span class="o">+</span><span class="s2">&quot;))&quot;</span><span class="k">if</span> <span class="n">shortName</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="o">+</span><span class="s2">&quot;(Histogram:&quot;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">channel</span><span class="o">.</span><span class="n">name</span><span class="o">+</span><span class="s2">&quot;)&quot;</span>
</span><span id="L-966"><a href="#L-966"><span class="linenos">966</span></a>        <span class="k">if</span> <span class="n">title</span><span class="p">:</span> <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="L-967"><a href="#L-967"><span class="linenos">967</span></a>
</span><span id="L-968"><a href="#L-968"><span class="linenos">968</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">toNumpy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="L-969"><a href="#L-969"><span class="linenos">969</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-970"><a href="#L-970"><span class="linenos">970</span></a><span class="sd">        Convert histogram values to numpy array.</span>
</span><span id="L-971"><a href="#L-971"><span class="linenos">971</span></a><span class="sd">        </span>
</span><span id="L-972"><a href="#L-972"><span class="linenos">972</span></a><span class="sd">        Returns:</span>
</span><span id="L-973"><a href="#L-973"><span class="linenos">973</span></a><span class="sd">            numpy.ndarray: Histogram bin values as numpy array</span>
</span><span id="L-974"><a href="#L-974"><span class="linenos">974</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-975"><a href="#L-975"><span class="linenos">975</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">histValue</span>
</span></pre></div>


            </section>
                <section id="imageType">
                            <input id="imageType-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">imageType</span><wbr>(<span class="base">enum.Enum</span>):

                <label class="view-source-button" for="imageType-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#imageType"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="imageType-61"><a href="#imageType-61"><span class="linenos">61</span></a><span class="k">class</span><span class="w"> </span><span class="nc">imageType</span><span class="p">(</span><span class="n">enum</span><span class="o">.</span><span class="n">Enum</span><span class="p">):</span>
</span><span id="imageType-62"><a href="#imageType-62"><span class="linenos">62</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="imageType-63"><a href="#imageType-63"><span class="linenos">63</span></a><span class="sd">    Enumeration for different image file types supported by uHDR.</span>
</span><span id="imageType-64"><a href="#imageType-64"><span class="linenos">64</span></a><span class="sd">    </span>
</span><span id="imageType-65"><a href="#imageType-65"><span class="linenos">65</span></a><span class="sd">    This enumeration defines the standard image types that can be processed</span>
</span><span id="imageType-66"><a href="#imageType-66"><span class="linenos">66</span></a><span class="sd">    within the HDR imaging pipeline, each with specific handling requirements.</span>
</span><span id="imageType-67"><a href="#imageType-67"><span class="linenos">67</span></a><span class="sd">    </span>
</span><span id="imageType-68"><a href="#imageType-68"><span class="linenos">68</span></a><span class="sd">    Attributes:</span>
</span><span id="imageType-69"><a href="#imageType-69"><span class="linenos">69</span></a><span class="sd">        SDR (int): Standard Dynamic Range images (.jpg, .png)</span>
</span><span id="imageType-70"><a href="#imageType-70"><span class="linenos">70</span></a><span class="sd">        ARW (int): Sony RAW image files (.arw)</span>
</span><span id="imageType-71"><a href="#imageType-71"><span class="linenos">71</span></a><span class="sd">        HDR (int): High Dynamic Range images (.hdr, .exr)</span>
</span><span id="imageType-72"><a href="#imageType-72"><span class="linenos">72</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="imageType-73"><a href="#imageType-73"><span class="linenos">73</span></a>
</span><span id="imageType-74"><a href="#imageType-74"><span class="linenos">74</span></a>    <span class="n">SDR</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1"># SDR image:                (.jpg)</span>
</span><span id="imageType-75"><a href="#imageType-75"><span class="linenos">75</span></a>    <span class="n">ARW</span> <span class="o">=</span> <span class="mi">1</span> <span class="c1"># raw image file: sony ARW  (.arw)</span>
</span><span id="imageType-76"><a href="#imageType-76"><span class="linenos">76</span></a>    <span class="n">HDR</span> <span class="o">=</span> <span class="mi">2</span> <span class="c1"># hdr file:                 (.hdr)</span>
</span></pre></div>


            <div class="docstring"><p>Enumeration for different image file types supported by uHDR.</p>

<p>This enumeration defines the standard image types that can be processed
within the HDR imaging pipeline, each with specific handling requirements.</p>

<p>Attributes:
    SDR (int): Standard Dynamic Range images (.jpg, .png)
    ARW (int): Sony RAW image files (.arw)
    HDR (int): High Dynamic Range images (.hdr, .exr)</p>
</div>


                            <div id="imageType.SDR" class="classattr">
                                <div class="attr variable">
            <span class="name">SDR</span>        =
<span class="default_value">&lt;<a href="#imageType.SDR">imageType.SDR</a>: 0&gt;</span>

        
    </div>
    <a class="headerlink" href="#imageType.SDR"></a>
    
    

                            </div>
                            <div id="imageType.ARW" class="classattr">
                                <div class="attr variable">
            <span class="name">ARW</span>        =
<span class="default_value">&lt;<a href="#imageType.ARW">imageType.ARW</a>: 1&gt;</span>

        
    </div>
    <a class="headerlink" href="#imageType.ARW"></a>
    
    

                            </div>
                            <div id="imageType.HDR" class="classattr">
                                <div class="attr variable">
            <span class="name">HDR</span>        =
<span class="default_value">&lt;<a href="#imageType.HDR">imageType.HDR</a>: 2&gt;</span>

        
    </div>
    <a class="headerlink" href="#imageType.HDR"></a>
    
    

                            </div>
                </section>
                <section id="channel">
                            <input id="channel-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">channel</span><wbr>(<span class="base">enum.Enum</span>):

                <label class="view-source-button" for="channel-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#channel"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="channel-81"><a href="#channel-81"><span class="linenos"> 81</span></a><span class="k">class</span><span class="w"> </span><span class="nc">channel</span><span class="p">(</span><span class="n">enum</span><span class="o">.</span><span class="n">Enum</span><span class="p">):</span>
</span><span id="channel-82"><a href="#channel-82"><span class="linenos"> 82</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="channel-83"><a href="#channel-83"><span class="linenos"> 83</span></a><span class="sd">    Channel identification and color space management enumeration.</span>
</span><span id="channel-84"><a href="#channel-84"><span class="linenos"> 84</span></a><span class="sd">    </span>
</span><span id="channel-85"><a href="#channel-85"><span class="linenos"> 85</span></a><span class="sd">    This class provides constants and methods for managing individual color channels</span>
</span><span id="channel-86"><a href="#channel-86"><span class="linenos"> 86</span></a><span class="sd">    across different color spaces (sRGB, XYZ, Lab). It supports both single channel</span>
</span><span id="channel-87"><a href="#channel-87"><span class="linenos"> 87</span></a><span class="sd">    access and full color space operations.</span>
</span><span id="channel-88"><a href="#channel-88"><span class="linenos"> 88</span></a><span class="sd">    </span>
</span><span id="channel-89"><a href="#channel-89"><span class="linenos"> 89</span></a><span class="sd">    Attributes:</span>
</span><span id="channel-90"><a href="#channel-90"><span class="linenos"> 90</span></a><span class="sd">        sR, sG, sB (int): Individual sRGB color channels (0, 1, 2)</span>
</span><span id="channel-91"><a href="#channel-91"><span class="linenos"> 91</span></a><span class="sd">        sRGB (int): Full sRGB color space identifier (3)</span>
</span><span id="channel-92"><a href="#channel-92"><span class="linenos"> 92</span></a><span class="sd">        X, Y, Z (int): Individual XYZ color channels (4, 5, 6)</span>
</span><span id="channel-93"><a href="#channel-93"><span class="linenos"> 93</span></a><span class="sd">        XYZ (int): Full XYZ color space identifier (7)</span>
</span><span id="channel-94"><a href="#channel-94"><span class="linenos"> 94</span></a><span class="sd">        L, a, b (int): Individual Lab color channels (8, 9, 10)</span>
</span><span id="channel-95"><a href="#channel-95"><span class="linenos"> 95</span></a><span class="sd">        Lab (int): Full Lab color space identifier (11)</span>
</span><span id="channel-96"><a href="#channel-96"><span class="linenos"> 96</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="channel-97"><a href="#channel-97"><span class="linenos"> 97</span></a>    
</span><span id="channel-98"><a href="#channel-98"><span class="linenos"> 98</span></a>    <span class="n">sR</span>      <span class="o">=</span> <span class="mi">0</span>
</span><span id="channel-99"><a href="#channel-99"><span class="linenos"> 99</span></a>    <span class="n">sG</span>      <span class="o">=</span> <span class="mi">1</span>
</span><span id="channel-100"><a href="#channel-100"><span class="linenos">100</span></a>    <span class="n">sB</span>      <span class="o">=</span> <span class="mi">2</span>
</span><span id="channel-101"><a href="#channel-101"><span class="linenos">101</span></a>
</span><span id="channel-102"><a href="#channel-102"><span class="linenos">102</span></a>    <span class="n">sRGB</span>    <span class="o">=</span> <span class="mi">3</span>
</span><span id="channel-103"><a href="#channel-103"><span class="linenos">103</span></a>
</span><span id="channel-104"><a href="#channel-104"><span class="linenos">104</span></a>    <span class="n">X</span>       <span class="o">=</span> <span class="mi">4</span>
</span><span id="channel-105"><a href="#channel-105"><span class="linenos">105</span></a>    <span class="n">Y</span>       <span class="o">=</span> <span class="mi">5</span>
</span><span id="channel-106"><a href="#channel-106"><span class="linenos">106</span></a>    <span class="n">Z</span>       <span class="o">=</span> <span class="mi">6</span>
</span><span id="channel-107"><a href="#channel-107"><span class="linenos">107</span></a>
</span><span id="channel-108"><a href="#channel-108"><span class="linenos">108</span></a>    <span class="n">XYZ</span>     <span class="o">=</span> <span class="mi">7</span>
</span><span id="channel-109"><a href="#channel-109"><span class="linenos">109</span></a>
</span><span id="channel-110"><a href="#channel-110"><span class="linenos">110</span></a>    <span class="n">L</span>       <span class="o">=</span> <span class="mi">8</span>
</span><span id="channel-111"><a href="#channel-111"><span class="linenos">111</span></a>    <span class="n">a</span>       <span class="o">=</span> <span class="mi">9</span>
</span><span id="channel-112"><a href="#channel-112"><span class="linenos">112</span></a>    <span class="n">b</span>       <span class="o">=</span> <span class="mi">10</span>
</span><span id="channel-113"><a href="#channel-113"><span class="linenos">113</span></a>
</span><span id="channel-114"><a href="#channel-114"><span class="linenos">114</span></a>    <span class="n">Lab</span>     <span class="o">=</span> <span class="mi">11</span>
</span><span id="channel-115"><a href="#channel-115"><span class="linenos">115</span></a>
</span><span id="channel-116"><a href="#channel-116"><span class="linenos">116</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">colorSpace</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="channel-117"><a href="#channel-117"><span class="linenos">117</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="channel-118"><a href="#channel-118"><span class="linenos">118</span></a><span class="sd">        Retrieve the color space name for this channel.</span>
</span><span id="channel-119"><a href="#channel-119"><span class="linenos">119</span></a><span class="sd">        </span>
</span><span id="channel-120"><a href="#channel-120"><span class="linenos">120</span></a><span class="sd">        Returns:</span>
</span><span id="channel-121"><a href="#channel-121"><span class="linenos">121</span></a><span class="sd">            str: Color space type (&#39;sRGB&#39;, &#39;XYZ&#39;, or &#39;Lab&#39;)</span>
</span><span id="channel-122"><a href="#channel-122"><span class="linenos">122</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="channel-123"><a href="#channel-123"><span class="linenos">123</span></a>        <span class="n">csIdx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">//</span> <span class="mi">4</span>
</span><span id="channel-124"><a href="#channel-124"><span class="linenos">124</span></a>        <span class="n">res</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="channel-125"><a href="#channel-125"><span class="linenos">125</span></a>        <span class="k">if</span> <span class="n">csIdx</span>   <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>    <span class="n">res</span> <span class="o">=</span><span class="s1">&#39;sRGB&#39;</span>
</span><span id="channel-126"><a href="#channel-126"><span class="linenos">126</span></a>        <span class="k">elif</span> <span class="n">csIdx</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>    <span class="n">res</span> <span class="o">=</span> <span class="s1">&#39;XYZ&#39;</span>
</span><span id="channel-127"><a href="#channel-127"><span class="linenos">127</span></a>        <span class="k">elif</span> <span class="n">csIdx</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>    <span class="n">res</span> <span class="o">=</span> <span class="s1">&#39;Lab&#39;</span>
</span><span id="channel-128"><a href="#channel-128"><span class="linenos">128</span></a>
</span><span id="channel-129"><a href="#channel-129"><span class="linenos">129</span></a>        <span class="k">return</span> <span class="n">res</span>
</span><span id="channel-130"><a href="#channel-130"><span class="linenos">130</span></a>
</span><span id="channel-131"><a href="#channel-131"><span class="linenos">131</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getValue</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="channel-132"><a href="#channel-132"><span class="linenos">132</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="channel-133"><a href="#channel-133"><span class="linenos">133</span></a><span class="sd">        Retrieve the channel index within its color space.</span>
</span><span id="channel-134"><a href="#channel-134"><span class="linenos">134</span></a><span class="sd">        </span>
</span><span id="channel-135"><a href="#channel-135"><span class="linenos">135</span></a><span class="sd">        Returns:</span>
</span><span id="channel-136"><a href="#channel-136"><span class="linenos">136</span></a><span class="sd">            int: Channel index (0-3) within the color space</span>
</span><span id="channel-137"><a href="#channel-137"><span class="linenos">137</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="channel-138"><a href="#channel-138"><span class="linenos">138</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">%</span> <span class="mi">4</span>
</span><span id="channel-139"><a href="#channel-139"><span class="linenos">139</span></a>
</span><span id="channel-140"><a href="#channel-140"><span class="linenos">140</span></a>    <span class="nd">@staticmethod</span>
</span><span id="channel-141"><a href="#channel-141"><span class="linenos">141</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">toChannel</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
</span><span id="channel-142"><a href="#channel-142"><span class="linenos">142</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="channel-143"><a href="#channel-143"><span class="linenos">143</span></a><span class="sd">        Convert a channel name string to its corresponding channel constant.</span>
</span><span id="channel-144"><a href="#channel-144"><span class="linenos">144</span></a><span class="sd">        </span>
</span><span id="channel-145"><a href="#channel-145"><span class="linenos">145</span></a><span class="sd">        Args:</span>
</span><span id="channel-146"><a href="#channel-146"><span class="linenos">146</span></a><span class="sd">            s (str): Channel name (&#39;sR&#39;, &#39;sG&#39;, &#39;sB&#39;, &#39;X&#39;, &#39;Y&#39;, &#39;Z&#39;, &#39;L&#39;, &#39;a&#39;, &#39;b&#39;)</span>
</span><span id="channel-147"><a href="#channel-147"><span class="linenos">147</span></a><span class="sd">            </span>
</span><span id="channel-148"><a href="#channel-148"><span class="linenos">148</span></a><span class="sd">        Returns:</span>
</span><span id="channel-149"><a href="#channel-149"><span class="linenos">149</span></a><span class="sd">            channel: Corresponding channel enumeration value</span>
</span><span id="channel-150"><a href="#channel-150"><span class="linenos">150</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="channel-151"><a href="#channel-151"><span class="linenos">151</span></a>        <span class="k">if</span> <span class="n">s</span><span class="o">==</span><span class="s1">&#39;sR&#39;</span> <span class="p">:</span>    <span class="k">return</span> <span class="n">channel</span><span class="o">.</span><span class="n">sR</span>
</span><span id="channel-152"><a href="#channel-152"><span class="linenos">152</span></a>        <span class="k">elif</span> <span class="n">s</span><span class="o">==</span><span class="s1">&#39;sG&#39;</span> <span class="p">:</span>  <span class="k">return</span> <span class="n">channel</span><span class="o">.</span><span class="n">sG</span>
</span><span id="channel-153"><a href="#channel-153"><span class="linenos">153</span></a>        <span class="k">elif</span> <span class="n">s</span><span class="o">==</span><span class="s1">&#39;sB&#39;</span> <span class="p">:</span>  <span class="k">return</span> <span class="n">channel</span><span class="o">.</span><span class="n">sB</span>
</span><span id="channel-154"><a href="#channel-154"><span class="linenos">154</span></a>
</span><span id="channel-155"><a href="#channel-155"><span class="linenos">155</span></a>        <span class="k">elif</span> <span class="n">s</span><span class="o">==</span><span class="s1">&#39;X&#39;</span> <span class="p">:</span>   <span class="k">return</span> <span class="n">channel</span><span class="o">.</span><span class="n">X</span>
</span><span id="channel-156"><a href="#channel-156"><span class="linenos">156</span></a>        <span class="k">elif</span> <span class="n">s</span><span class="o">==</span><span class="s1">&#39;Y&#39;</span> <span class="p">:</span>   <span class="k">return</span> <span class="n">channel</span><span class="o">.</span><span class="n">Y</span>
</span><span id="channel-157"><a href="#channel-157"><span class="linenos">157</span></a>        <span class="k">elif</span> <span class="n">s</span><span class="o">==</span><span class="s1">&#39;Z&#39;</span> <span class="p">:</span>   <span class="k">return</span> <span class="n">channel</span><span class="o">.</span><span class="n">Z</span>
</span><span id="channel-158"><a href="#channel-158"><span class="linenos">158</span></a>
</span><span id="channel-159"><a href="#channel-159"><span class="linenos">159</span></a>        <span class="k">elif</span> <span class="n">s</span><span class="o">==</span><span class="s1">&#39;L&#39;</span> <span class="p">:</span>   <span class="k">return</span> <span class="n">channel</span><span class="o">.</span><span class="n">L</span>
</span><span id="channel-160"><a href="#channel-160"><span class="linenos">160</span></a>        <span class="k">elif</span> <span class="n">s</span><span class="o">==</span><span class="s1">&#39;a&#39;</span> <span class="p">:</span>   <span class="k">return</span> <span class="n">channel</span><span class="o">.</span><span class="n">a</span>
</span><span id="channel-161"><a href="#channel-161"><span class="linenos">161</span></a>        <span class="k">elif</span> <span class="n">s</span><span class="o">==</span><span class="s1">&#39;b&#39;</span> <span class="p">:</span>   <span class="k">return</span> <span class="n">channel</span><span class="o">.</span><span class="n">b</span>
</span><span id="channel-162"><a href="#channel-162"><span class="linenos">162</span></a>
</span><span id="channel-163"><a href="#channel-163"><span class="linenos">163</span></a>        <span class="k">else</span><span class="p">:</span>           <span class="k">return</span> <span class="n">channel</span><span class="o">.</span><span class="n">L</span>       
</span></pre></div>


            <div class="docstring"><p>Channel identification and color space management enumeration.</p>

<p>This class provides constants and methods for managing individual color channels
across different color spaces (sRGB, XYZ, Lab). It supports both single channel
access and full color space operations.</p>

<p>Attributes:
    sR, sG, sB (int): Individual sRGB color channels (0, 1, 2)
    sRGB (int): Full sRGB color space identifier (3)
    X, Y, Z (int): Individual XYZ color channels (4, 5, 6)
    XYZ (int): Full XYZ color space identifier (7)
    L, a, b (int): Individual Lab color channels (8, 9, 10)
    Lab (int): Full Lab color space identifier (11)</p>
</div>


                            <div id="channel.sR" class="classattr">
                                <div class="attr variable">
            <span class="name">sR</span>        =
<span class="default_value">&lt;<a href="#channel.sR">channel.sR</a>: 0&gt;</span>

        
    </div>
    <a class="headerlink" href="#channel.sR"></a>
    
    

                            </div>
                            <div id="channel.sG" class="classattr">
                                <div class="attr variable">
            <span class="name">sG</span>        =
<span class="default_value">&lt;<a href="#channel.sG">channel.sG</a>: 1&gt;</span>

        
    </div>
    <a class="headerlink" href="#channel.sG"></a>
    
    

                            </div>
                            <div id="channel.sB" class="classattr">
                                <div class="attr variable">
            <span class="name">sB</span>        =
<span class="default_value">&lt;<a href="#channel.sB">channel.sB</a>: 2&gt;</span>

        
    </div>
    <a class="headerlink" href="#channel.sB"></a>
    
    

                            </div>
                            <div id="channel.sRGB" class="classattr">
                                <div class="attr variable">
            <span class="name">sRGB</span>        =
<span class="default_value">&lt;<a href="#channel.sRGB">channel.sRGB</a>: 3&gt;</span>

        
    </div>
    <a class="headerlink" href="#channel.sRGB"></a>
    
    

                            </div>
                            <div id="channel.X" class="classattr">
                                <div class="attr variable">
            <span class="name">X</span>        =
<span class="default_value">&lt;<a href="#channel.X">channel.X</a>: 4&gt;</span>

        
    </div>
    <a class="headerlink" href="#channel.X"></a>
    
    

                            </div>
                            <div id="channel.Y" class="classattr">
                                <div class="attr variable">
            <span class="name">Y</span>        =
<span class="default_value">&lt;<a href="#channel.Y">channel.Y</a>: 5&gt;</span>

        
    </div>
    <a class="headerlink" href="#channel.Y"></a>
    
    

                            </div>
                            <div id="channel.Z" class="classattr">
                                <div class="attr variable">
            <span class="name">Z</span>        =
<span class="default_value">&lt;<a href="#channel.Z">channel.Z</a>: 6&gt;</span>

        
    </div>
    <a class="headerlink" href="#channel.Z"></a>
    
    

                            </div>
                            <div id="channel.XYZ" class="classattr">
                                <div class="attr variable">
            <span class="name">XYZ</span>        =
<span class="default_value">&lt;<a href="#channel.XYZ">channel.XYZ</a>: 7&gt;</span>

        
    </div>
    <a class="headerlink" href="#channel.XYZ"></a>
    
    

                            </div>
                            <div id="channel.L" class="classattr">
                                <div class="attr variable">
            <span class="name">L</span>        =
<span class="default_value">&lt;<a href="#channel.L">channel.L</a>: 8&gt;</span>

        
    </div>
    <a class="headerlink" href="#channel.L"></a>
    
    

                            </div>
                            <div id="channel.a" class="classattr">
                                <div class="attr variable">
            <span class="name">a</span>        =
<span class="default_value">&lt;<a href="#channel.a">channel.a</a>: 9&gt;</span>

        
    </div>
    <a class="headerlink" href="#channel.a"></a>
    
    

                            </div>
                            <div id="channel.b" class="classattr">
                                <div class="attr variable">
            <span class="name">b</span>        =
<span class="default_value">&lt;<a href="#channel.b">channel.b</a>: 10&gt;</span>

        
    </div>
    <a class="headerlink" href="#channel.b"></a>
    
    

                            </div>
                            <div id="channel.Lab" class="classattr">
                                <div class="attr variable">
            <span class="name">Lab</span>        =
<span class="default_value">&lt;<a href="#channel.Lab">channel.Lab</a>: 11&gt;</span>

        
    </div>
    <a class="headerlink" href="#channel.Lab"></a>
    
    

                            </div>
                            <div id="channel.colorSpace" class="classattr">
                                        <input id="channel.colorSpace-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">colorSpace</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="channel.colorSpace-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#channel.colorSpace"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="channel.colorSpace-116"><a href="#channel.colorSpace-116"><span class="linenos">116</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">colorSpace</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="channel.colorSpace-117"><a href="#channel.colorSpace-117"><span class="linenos">117</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="channel.colorSpace-118"><a href="#channel.colorSpace-118"><span class="linenos">118</span></a><span class="sd">        Retrieve the color space name for this channel.</span>
</span><span id="channel.colorSpace-119"><a href="#channel.colorSpace-119"><span class="linenos">119</span></a><span class="sd">        </span>
</span><span id="channel.colorSpace-120"><a href="#channel.colorSpace-120"><span class="linenos">120</span></a><span class="sd">        Returns:</span>
</span><span id="channel.colorSpace-121"><a href="#channel.colorSpace-121"><span class="linenos">121</span></a><span class="sd">            str: Color space type (&#39;sRGB&#39;, &#39;XYZ&#39;, or &#39;Lab&#39;)</span>
</span><span id="channel.colorSpace-122"><a href="#channel.colorSpace-122"><span class="linenos">122</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="channel.colorSpace-123"><a href="#channel.colorSpace-123"><span class="linenos">123</span></a>        <span class="n">csIdx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">//</span> <span class="mi">4</span>
</span><span id="channel.colorSpace-124"><a href="#channel.colorSpace-124"><span class="linenos">124</span></a>        <span class="n">res</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="channel.colorSpace-125"><a href="#channel.colorSpace-125"><span class="linenos">125</span></a>        <span class="k">if</span> <span class="n">csIdx</span>   <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>    <span class="n">res</span> <span class="o">=</span><span class="s1">&#39;sRGB&#39;</span>
</span><span id="channel.colorSpace-126"><a href="#channel.colorSpace-126"><span class="linenos">126</span></a>        <span class="k">elif</span> <span class="n">csIdx</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>    <span class="n">res</span> <span class="o">=</span> <span class="s1">&#39;XYZ&#39;</span>
</span><span id="channel.colorSpace-127"><a href="#channel.colorSpace-127"><span class="linenos">127</span></a>        <span class="k">elif</span> <span class="n">csIdx</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>    <span class="n">res</span> <span class="o">=</span> <span class="s1">&#39;Lab&#39;</span>
</span><span id="channel.colorSpace-128"><a href="#channel.colorSpace-128"><span class="linenos">128</span></a>
</span><span id="channel.colorSpace-129"><a href="#channel.colorSpace-129"><span class="linenos">129</span></a>        <span class="k">return</span> <span class="n">res</span>
</span></pre></div>


            <div class="docstring"><p>Retrieve the color space name for this channel.</p>

<p>Returns:
    str: Color space type ('sRGB', 'XYZ', or 'Lab')</p>
</div>


                            </div>
                            <div id="channel.getValue" class="classattr">
                                        <input id="channel.getValue-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">getValue</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="channel.getValue-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#channel.getValue"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="channel.getValue-131"><a href="#channel.getValue-131"><span class="linenos">131</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getValue</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="channel.getValue-132"><a href="#channel.getValue-132"><span class="linenos">132</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="channel.getValue-133"><a href="#channel.getValue-133"><span class="linenos">133</span></a><span class="sd">        Retrieve the channel index within its color space.</span>
</span><span id="channel.getValue-134"><a href="#channel.getValue-134"><span class="linenos">134</span></a><span class="sd">        </span>
</span><span id="channel.getValue-135"><a href="#channel.getValue-135"><span class="linenos">135</span></a><span class="sd">        Returns:</span>
</span><span id="channel.getValue-136"><a href="#channel.getValue-136"><span class="linenos">136</span></a><span class="sd">            int: Channel index (0-3) within the color space</span>
</span><span id="channel.getValue-137"><a href="#channel.getValue-137"><span class="linenos">137</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="channel.getValue-138"><a href="#channel.getValue-138"><span class="linenos">138</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">%</span> <span class="mi">4</span>
</span></pre></div>


            <div class="docstring"><p>Retrieve the channel index within its color space.</p>

<p>Returns:
    int: Channel index (0-3) within the color space</p>
</div>


                            </div>
                            <div id="channel.toChannel" class="classattr">
                                        <input id="channel.toChannel-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-staticmethod">@staticmethod</div>

        <span class="def">def</span>
        <span class="name">toChannel</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">s</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="channel.toChannel-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#channel.toChannel"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="channel.toChannel-140"><a href="#channel.toChannel-140"><span class="linenos">140</span></a>    <span class="nd">@staticmethod</span>
</span><span id="channel.toChannel-141"><a href="#channel.toChannel-141"><span class="linenos">141</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">toChannel</span><span class="p">(</span><span class="n">s</span><span class="p">):</span>
</span><span id="channel.toChannel-142"><a href="#channel.toChannel-142"><span class="linenos">142</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="channel.toChannel-143"><a href="#channel.toChannel-143"><span class="linenos">143</span></a><span class="sd">        Convert a channel name string to its corresponding channel constant.</span>
</span><span id="channel.toChannel-144"><a href="#channel.toChannel-144"><span class="linenos">144</span></a><span class="sd">        </span>
</span><span id="channel.toChannel-145"><a href="#channel.toChannel-145"><span class="linenos">145</span></a><span class="sd">        Args:</span>
</span><span id="channel.toChannel-146"><a href="#channel.toChannel-146"><span class="linenos">146</span></a><span class="sd">            s (str): Channel name (&#39;sR&#39;, &#39;sG&#39;, &#39;sB&#39;, &#39;X&#39;, &#39;Y&#39;, &#39;Z&#39;, &#39;L&#39;, &#39;a&#39;, &#39;b&#39;)</span>
</span><span id="channel.toChannel-147"><a href="#channel.toChannel-147"><span class="linenos">147</span></a><span class="sd">            </span>
</span><span id="channel.toChannel-148"><a href="#channel.toChannel-148"><span class="linenos">148</span></a><span class="sd">        Returns:</span>
</span><span id="channel.toChannel-149"><a href="#channel.toChannel-149"><span class="linenos">149</span></a><span class="sd">            channel: Corresponding channel enumeration value</span>
</span><span id="channel.toChannel-150"><a href="#channel.toChannel-150"><span class="linenos">150</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="channel.toChannel-151"><a href="#channel.toChannel-151"><span class="linenos">151</span></a>        <span class="k">if</span> <span class="n">s</span><span class="o">==</span><span class="s1">&#39;sR&#39;</span> <span class="p">:</span>    <span class="k">return</span> <span class="n">channel</span><span class="o">.</span><span class="n">sR</span>
</span><span id="channel.toChannel-152"><a href="#channel.toChannel-152"><span class="linenos">152</span></a>        <span class="k">elif</span> <span class="n">s</span><span class="o">==</span><span class="s1">&#39;sG&#39;</span> <span class="p">:</span>  <span class="k">return</span> <span class="n">channel</span><span class="o">.</span><span class="n">sG</span>
</span><span id="channel.toChannel-153"><a href="#channel.toChannel-153"><span class="linenos">153</span></a>        <span class="k">elif</span> <span class="n">s</span><span class="o">==</span><span class="s1">&#39;sB&#39;</span> <span class="p">:</span>  <span class="k">return</span> <span class="n">channel</span><span class="o">.</span><span class="n">sB</span>
</span><span id="channel.toChannel-154"><a href="#channel.toChannel-154"><span class="linenos">154</span></a>
</span><span id="channel.toChannel-155"><a href="#channel.toChannel-155"><span class="linenos">155</span></a>        <span class="k">elif</span> <span class="n">s</span><span class="o">==</span><span class="s1">&#39;X&#39;</span> <span class="p">:</span>   <span class="k">return</span> <span class="n">channel</span><span class="o">.</span><span class="n">X</span>
</span><span id="channel.toChannel-156"><a href="#channel.toChannel-156"><span class="linenos">156</span></a>        <span class="k">elif</span> <span class="n">s</span><span class="o">==</span><span class="s1">&#39;Y&#39;</span> <span class="p">:</span>   <span class="k">return</span> <span class="n">channel</span><span class="o">.</span><span class="n">Y</span>
</span><span id="channel.toChannel-157"><a href="#channel.toChannel-157"><span class="linenos">157</span></a>        <span class="k">elif</span> <span class="n">s</span><span class="o">==</span><span class="s1">&#39;Z&#39;</span> <span class="p">:</span>   <span class="k">return</span> <span class="n">channel</span><span class="o">.</span><span class="n">Z</span>
</span><span id="channel.toChannel-158"><a href="#channel.toChannel-158"><span class="linenos">158</span></a>
</span><span id="channel.toChannel-159"><a href="#channel.toChannel-159"><span class="linenos">159</span></a>        <span class="k">elif</span> <span class="n">s</span><span class="o">==</span><span class="s1">&#39;L&#39;</span> <span class="p">:</span>   <span class="k">return</span> <span class="n">channel</span><span class="o">.</span><span class="n">L</span>
</span><span id="channel.toChannel-160"><a href="#channel.toChannel-160"><span class="linenos">160</span></a>        <span class="k">elif</span> <span class="n">s</span><span class="o">==</span><span class="s1">&#39;a&#39;</span> <span class="p">:</span>   <span class="k">return</span> <span class="n">channel</span><span class="o">.</span><span class="n">a</span>
</span><span id="channel.toChannel-161"><a href="#channel.toChannel-161"><span class="linenos">161</span></a>        <span class="k">elif</span> <span class="n">s</span><span class="o">==</span><span class="s1">&#39;b&#39;</span> <span class="p">:</span>   <span class="k">return</span> <span class="n">channel</span><span class="o">.</span><span class="n">b</span>
</span><span id="channel.toChannel-162"><a href="#channel.toChannel-162"><span class="linenos">162</span></a>
</span><span id="channel.toChannel-163"><a href="#channel.toChannel-163"><span class="linenos">163</span></a>        <span class="k">else</span><span class="p">:</span>           <span class="k">return</span> <span class="n">channel</span><span class="o">.</span><span class="n">L</span>       
</span></pre></div>


            <div class="docstring"><p>Convert a channel name string to its corresponding channel constant.</p>

<p>Args:
    s (str): Channel name ('sR', 'sG', 'sB', 'X', 'Y', 'Z', 'L', 'a', 'b')</p>

<p>Returns:
    channel: Corresponding channel enumeration value</p>
</div>


                            </div>
                </section>
                <section id="Image">
                            <input id="Image-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Image</span>:

                <label class="view-source-button" for="Image-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Image"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Image-167"><a href="#Image-167"><span class="linenos">167</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Image</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
</span><span id="Image-168"><a href="#Image-168"><span class="linenos">168</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Image-169"><a href="#Image-169"><span class="linenos">169</span></a><span class="sd">    Core HDR image data structure with comprehensive processing capabilities.</span>
</span><span id="Image-170"><a href="#Image-170"><span class="linenos">170</span></a><span class="sd">    </span>
</span><span id="Image-171"><a href="#Image-171"><span class="linenos">171</span></a><span class="sd">    This class represents the fundamental image object in the uHDR system, containing</span>
</span><span id="Image-172"><a href="#Image-172"><span class="linenos">172</span></a><span class="sd">    pixel data, metadata, and all necessary information for HDR image processing.</span>
</span><span id="Image-173"><a href="#Image-173"><span class="linenos">173</span></a><span class="sd">    It supports various image formats, color spaces, and provides methods for</span>
</span><span id="Image-174"><a href="#Image-174"><span class="linenos">174</span></a><span class="sd">    image manipulation, analysis, and processing pipeline integration.</span>
</span><span id="Image-175"><a href="#Image-175"><span class="linenos">175</span></a><span class="sd">    </span>
</span><span id="Image-176"><a href="#Image-176"><span class="linenos">176</span></a><span class="sd">    Attributes:</span>
</span><span id="Image-177"><a href="#Image-177"><span class="linenos">177</span></a><span class="sd">        path (str): Directory path to the image file</span>
</span><span id="Image-178"><a href="#Image-178"><span class="linenos">178</span></a><span class="sd">        name (str): Image filename with extension</span>
</span><span id="Image-179"><a href="#Image-179"><span class="linenos">179</span></a><span class="sd">        colorData (numpy.ndarray): Image pixel data as 3D array (height, width, channels)</span>
</span><span id="Image-180"><a href="#Image-180"><span class="linenos">180</span></a><span class="sd">        shape (tuple): Image dimensions (height, width, channels)</span>
</span><span id="Image-181"><a href="#Image-181"><span class="linenos">181</span></a><span class="sd">        type (imageType): Image type classification (SDR, ARW, HDR)</span>
</span><span id="Image-182"><a href="#Image-182"><span class="linenos">182</span></a><span class="sd">        linear (bool): Whether image data is in linear color space</span>
</span><span id="Image-183"><a href="#Image-183"><span class="linenos">183</span></a><span class="sd">        colorSpace (colour.models.RGB_COLOURSPACES): Current color space definition</span>
</span><span id="Image-184"><a href="#Image-184"><span class="linenos">184</span></a><span class="sd">        scalingFactor (float): Scaling factor for normalizing to [0,1] range</span>
</span><span id="Image-185"><a href="#Image-185"><span class="linenos">185</span></a><span class="sd">        metadata (hdrCore.metadata.metadata): Associated metadata object</span>
</span><span id="Image-186"><a href="#Image-186"><span class="linenos">186</span></a><span class="sd">        histogram (Histogram): Image histogram data</span>
</span><span id="Image-187"><a href="#Image-187"><span class="linenos">187</span></a><span class="sd">    </span>
</span><span id="Image-188"><a href="#Image-188"><span class="linenos">188</span></a><span class="sd">    Methods:</span>
</span><span id="Image-189"><a href="#Image-189"><span class="linenos">189</span></a><span class="sd">        isHDR: Check if image is HDR type</span>
</span><span id="Image-190"><a href="#Image-190"><span class="linenos">190</span></a><span class="sd">        process: Apply processing operations</span>
</span><span id="Image-191"><a href="#Image-191"><span class="linenos">191</span></a><span class="sd">        write: Save image and metadata to disk</span>
</span><span id="Image-192"><a href="#Image-192"><span class="linenos">192</span></a><span class="sd">        getChannel: Extract specific color channel</span>
</span><span id="Image-193"><a href="#Image-193"><span class="linenos">193</span></a><span class="sd">        getDynamicRange: Calculate image dynamic range</span>
</span><span id="Image-194"><a href="#Image-194"><span class="linenos">194</span></a><span class="sd">        buildHistogram: Generate image histogram</span>
</span><span id="Image-195"><a href="#Image-195"><span class="linenos">195</span></a><span class="sd">        plot: Display image with optional tone mapping</span>
</span><span id="Image-196"><a href="#Image-196"><span class="linenos">196</span></a><span class="sd">        split: Divide image into sub-images</span>
</span><span id="Image-197"><a href="#Image-197"><span class="linenos">197</span></a><span class="sd">        </span>
</span><span id="Image-198"><a href="#Image-198"><span class="linenos">198</span></a><span class="sd">    Static Methods:</span>
</span><span id="Image-199"><a href="#Image-199"><span class="linenos">199</span></a><span class="sd">        read: Load image from file with format detection</span>
</span><span id="Image-200"><a href="#Image-200"><span class="linenos">200</span></a><span class="sd">        merge: Combine sub-images into single image</span>
</span><span id="Image-201"><a href="#Image-201"><span class="linenos">201</span></a><span class="sd">        buildLchColorData: Generate synthetic LCH color data</span>
</span><span id="Image-202"><a href="#Image-202"><span class="linenos">202</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Image-203"><a href="#Image-203"><span class="linenos">203</span></a>
</span><span id="Image-204"><a href="#Image-204"><span class="linenos">204</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">colorData</span><span class="p">,</span> <span class="nb">type</span><span class="p">,</span> <span class="n">linear</span><span class="p">,</span> <span class="n">colorspace</span><span class="p">,</span> <span class="n">scalingFactor</span><span class="o">=</span><span class="mf">1.0</span><span class="p">):</span>
</span><span id="Image-205"><a href="#Image-205"><span class="linenos">205</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Image-206"><a href="#Image-206"><span class="linenos">206</span></a><span class="sd">        Initialize a new Image object with specified parameters.</span>
</span><span id="Image-207"><a href="#Image-207"><span class="linenos">207</span></a><span class="sd">            </span>
</span><span id="Image-208"><a href="#Image-208"><span class="linenos">208</span></a><span class="sd">        Args:</span>
</span><span id="Image-209"><a href="#Image-209"><span class="linenos">209</span></a><span class="sd">            path (str): Directory path to the image file</span>
</span><span id="Image-210"><a href="#Image-210"><span class="linenos">210</span></a><span class="sd">            name (str): Image filename with extension</span>
</span><span id="Image-211"><a href="#Image-211"><span class="linenos">211</span></a><span class="sd">            colorData (numpy.ndarray): Pixel data array with shape (height, width, channels)</span>
</span><span id="Image-212"><a href="#Image-212"><span class="linenos">212</span></a><span class="sd">            type (imageType): Image type classification</span>
</span><span id="Image-213"><a href="#Image-213"><span class="linenos">213</span></a><span class="sd">            linear (bool): True if image data is in linear color space</span>
</span><span id="Image-214"><a href="#Image-214"><span class="linenos">214</span></a><span class="sd">            colorspace (colour.models.RGB_COLOURSPACES): Color space definition</span>
</span><span id="Image-215"><a href="#Image-215"><span class="linenos">215</span></a><span class="sd">            scalingFactor (float, optional): Scaling factor for [0,1] normalization (default: 1.0)</span>
</span><span id="Image-216"><a href="#Image-216"><span class="linenos">216</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Image-217"><a href="#Image-217"><span class="linenos">217</span></a>
</span><span id="Image-218"><a href="#Image-218"><span class="linenos">218</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">path</span>           <span class="o">=</span> <span class="n">path</span>                          <span class="c1"># path to file          (str)</span>
</span><span id="Image-219"><a href="#Image-219"><span class="linenos">219</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">name</span>           <span class="o">=</span> <span class="n">name</span>                          <span class="c1"># filename              (str)</span>
</span><span id="Image-220"><a href="#Image-220"><span class="linenos">220</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">colorData</span>      <span class="o">=</span> <span class="n">colorData</span>                     <span class="c1"># float color data      (numpy.ndarray)</span>
</span><span id="Image-221"><a href="#Image-221"><span class="linenos">221</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">shape</span>          <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">colorData</span><span class="o">.</span><span class="n">shape</span>          <span class="c1"># image size height,width, color channel number (tuple)</span>
</span><span id="Image-222"><a href="#Image-222"><span class="linenos">222</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">type</span>           <span class="o">=</span> <span class="nb">type</span>                          <span class="c1"># image type            (hdrCore.image.imageType)</span>
</span><span id="Image-223"><a href="#Image-223"><span class="linenos">223</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">linear</span>         <span class="o">=</span> <span class="n">linear</span>                        <span class="c1"># image in RGB linear   (bool)</span>
</span><span id="Image-224"><a href="#Image-224"><span class="linenos">224</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">colorSpace</span>     <span class="o">=</span> <span class="n">colorspace</span>                    <span class="c1"># colorSpace            (colour.models.RGB_COLOURSPACES)</span>
</span><span id="Image-225"><a href="#Image-225"><span class="linenos">225</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">scalingFactor</span>  <span class="o">=</span> <span class="n">scalingFactor</span>                 <span class="c1"># scaling to factor to range [0,1] (float)</span>
</span><span id="Image-226"><a href="#Image-226"><span class="linenos">226</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span>       <span class="o">=</span> <span class="kc">None</span>                          <span class="c1"># associated meta data  (hdrCore.metadata.metadata)   </span>
</span><span id="Image-227"><a href="#Image-227"><span class="linenos">227</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">histogram</span>      <span class="o">=</span> <span class="kc">None</span>                          <span class="c1"># histogram             (hdrCore.image.Histogram)</span>
</span><span id="Image-228"><a href="#Image-228"><span class="linenos">228</span></a>
</span><span id="Image-229"><a href="#Image-229"><span class="linenos">229</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">isHDR</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Image-230"><a href="#Image-230"><span class="linenos">230</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Image-231"><a href="#Image-231"><span class="linenos">231</span></a><span class="sd">        Check if the image is of HDR type.</span>
</span><span id="Image-232"><a href="#Image-232"><span class="linenos">232</span></a><span class="sd">        </span>
</span><span id="Image-233"><a href="#Image-233"><span class="linenos">233</span></a><span class="sd">        Returns:</span>
</span><span id="Image-234"><a href="#Image-234"><span class="linenos">234</span></a><span class="sd">            bool: True if the image is HDR, False otherwise</span>
</span><span id="Image-235"><a href="#Image-235"><span class="linenos">235</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Image-236"><a href="#Image-236"><span class="linenos">236</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">imageType</span><span class="o">.</span><span class="n">HDR</span>
</span><span id="Image-237"><a href="#Image-237"><span class="linenos">237</span></a>
</span><span id="Image-238"><a href="#Image-238"><span class="linenos">238</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">process</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="Image-239"><a href="#Image-239"><span class="linenos">239</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Image-240"><a href="#Image-240"><span class="linenos">240</span></a><span class="sd">        Apply a processing operation to the image.</span>
</span><span id="Image-241"><a href="#Image-241"><span class="linenos">241</span></a><span class="sd">        </span>
</span><span id="Image-242"><a href="#Image-242"><span class="linenos">242</span></a><span class="sd">        This method applies a Processing object to the current image and returns</span>
</span><span id="Image-243"><a href="#Image-243"><span class="linenos">243</span></a><span class="sd">        a new processed image. The processing operation is defined by the process</span>
</span><span id="Image-244"><a href="#Image-244"><span class="linenos">244</span></a><span class="sd">        parameter and its compute method.</span>
</span><span id="Image-245"><a href="#Image-245"><span class="linenos">245</span></a><span class="sd">        </span>
</span><span id="Image-246"><a href="#Image-246"><span class="linenos">246</span></a><span class="sd">        Args:</span>
</span><span id="Image-247"><a href="#Image-247"><span class="linenos">247</span></a><span class="sd">            process (Processing): Processing object with compute method</span>
</span><span id="Image-248"><a href="#Image-248"><span class="linenos">248</span></a><span class="sd">            **kwargs: Additional parameters passed to the processing operation</span>
</span><span id="Image-249"><a href="#Image-249"><span class="linenos">249</span></a><span class="sd">                </span>
</span><span id="Image-250"><a href="#Image-250"><span class="linenos">250</span></a><span class="sd">        Returns:</span>
</span><span id="Image-251"><a href="#Image-251"><span class="linenos">251</span></a><span class="sd">            Image: New image object with processing applied</span>
</span><span id="Image-252"><a href="#Image-252"><span class="linenos">252</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Image-253"><a href="#Image-253"><span class="linenos">253</span></a>        <span class="k">return</span> <span class="n">process</span><span class="o">.</span><span class="n">compute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span><span id="Image-254"><a href="#Image-254"><span class="linenos">254</span></a>
</span><span id="Image-255"><a href="#Image-255"><span class="linenos">255</span></a>    <span class="nd">@staticmethod</span>
</span><span id="Image-256"><a href="#Image-256"><span class="linenos">256</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">read</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">thumb</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="Image-257"><a href="#Image-257"><span class="linenos">257</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Image-258"><a href="#Image-258"><span class="linenos">258</span></a><span class="sd">        Load an image from file with automatic format detection.</span>
</span><span id="Image-259"><a href="#Image-259"><span class="linenos">259</span></a><span class="sd">        </span>
</span><span id="Image-260"><a href="#Image-260"><span class="linenos">260</span></a><span class="sd">        This method provides comprehensive image loading with support for various</span>
</span><span id="Image-261"><a href="#Image-261"><span class="linenos">261</span></a><span class="sd">        formats including HDR (.hdr), RAW (.arw), and standard formats (.jpg).</span>
</span><span id="Image-262"><a href="#Image-262"><span class="linenos">262</span></a><span class="sd">        It handles thumbnail generation, metadata extraction, and color space</span>
</span><span id="Image-263"><a href="#Image-263"><span class="linenos">263</span></a><span class="sd">        configuration automatically.</span>
</span><span id="Image-264"><a href="#Image-264"><span class="linenos">264</span></a><span class="sd">        </span>
</span><span id="Image-265"><a href="#Image-265"><span class="linenos">265</span></a><span class="sd">        Args:</span>
</span><span id="Image-266"><a href="#Image-266"><span class="linenos">266</span></a><span class="sd">            filename (str): Complete path to the image file</span>
</span><span id="Image-267"><a href="#Image-267"><span class="linenos">267</span></a><span class="sd">            thumb (bool, optional): Whether to load/create thumbnail version (default: False)</span>
</span><span id="Image-268"><a href="#Image-268"><span class="linenos">268</span></a><span class="sd">                </span>
</span><span id="Image-269"><a href="#Image-269"><span class="linenos">269</span></a><span class="sd">        Returns:</span>
</span><span id="Image-270"><a href="#Image-270"><span class="linenos">270</span></a><span class="sd">            Image: Loaded image object with metadata and proper color space configuration</span>
</span><span id="Image-271"><a href="#Image-271"><span class="linenos">271</span></a><span class="sd">            </span>
</span><span id="Image-272"><a href="#Image-272"><span class="linenos">272</span></a><span class="sd">        Note:</span>
</span><span id="Image-273"><a href="#Image-273"><span class="linenos">273</span></a><span class="sd">            - For HDR images: Creates thumbnails in ./thumbnails/ directory when requested</span>
</span><span id="Image-274"><a href="#Image-274"><span class="linenos">274</span></a><span class="sd">            - For RAW images: Uses rawpy with sRGB output and camera white balance</span>
</span><span id="Image-275"><a href="#Image-275"><span class="linenos">275</span></a><span class="sd">            - Automatically loads existing metadata from .json files if available</span>
</span><span id="Image-276"><a href="#Image-276"><span class="linenos">276</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Image-277"><a href="#Image-277"><span class="linenos">277</span></a>
</span><span id="Image-278"><a href="#Image-278"><span class="linenos">278</span></a>        <span class="n">imgDouble</span><span class="p">,</span> <span class="n">imgDoubleFull</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
</span><span id="Image-279"><a href="#Image-279"><span class="linenos">279</span></a>        <span class="c1"># image name</span>
</span><span id="Image-280"><a href="#Image-280"><span class="linenos">280</span></a>        <span class="n">path</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">ext</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">filenamesplit</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
</span><span id="Image-281"><a href="#Image-281"><span class="linenos">281</span></a>
</span><span id="Image-282"><a href="#Image-282"><span class="linenos">282</span></a>        <span class="c1"># load raw file using rawpy</span>
</span><span id="Image-283"><a href="#Image-283"><span class="linenos">283</span></a>        <span class="k">if</span> <span class="n">ext</span><span class="o">==</span><span class="s2">&quot;arw&quot;</span><span class="p">:</span>
</span><span id="Image-284"><a href="#Image-284"><span class="linenos">284</span></a>            <span class="n">outBit</span> <span class="o">=</span> <span class="mi">16</span>
</span><span id="Image-285"><a href="#Image-285"><span class="linenos">285</span></a>            <span class="n">raw</span> <span class="o">=</span> <span class="n">rawpy</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
</span><span id="Image-286"><a href="#Image-286"><span class="linenos">286</span></a>            <span class="n">ppParams</span> <span class="o">=</span> <span class="n">rawpy</span><span class="o">.</span><span class="n">Params</span><span class="p">(</span><span class="n">demosaic_algorithm</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">half_size</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> 
</span><span id="Image-287"><a href="#Image-287"><span class="linenos">287</span></a>                                            <span class="n">four_color_rgb</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">dcb_iterations</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> 
</span><span id="Image-288"><a href="#Image-288"><span class="linenos">288</span></a>                                            <span class="n">dcb_enhance</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">fbdd_noise_reduction</span><span class="o">=</span><span class="n">rawpy</span><span class="o">.</span><span class="n">FBDDNoiseReductionMode</span><span class="o">.</span><span class="n">Off</span><span class="p">,</span> 
</span><span id="Image-289"><a href="#Image-289"><span class="linenos">289</span></a>                                            <span class="n">noise_thr</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">median_filter_passes</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> 
</span><span id="Image-290"><a href="#Image-290"><span class="linenos">290</span></a>                                            <span class="n">use_camera_wb</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>                                 <span class="c1"># default False</span>
</span><span id="Image-291"><a href="#Image-291"><span class="linenos">291</span></a>                                            <span class="n">use_auto_wb</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> 
</span><span id="Image-292"><a href="#Image-292"><span class="linenos">292</span></a>                                            <span class="n">user_wb</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
</span><span id="Image-293"><a href="#Image-293"><span class="linenos">293</span></a>                                            <span class="n">output_color</span><span class="o">=</span><span class="n">rawpy</span><span class="o">.</span><span class="n">ColorSpace</span><span class="o">.</span><span class="n">sRGB</span><span class="p">,</span>                 <span class="c1"># output in SRGB</span>
</span><span id="Image-294"><a href="#Image-294"><span class="linenos">294</span></a>                                            <span class="n">output_bps</span><span class="o">=</span><span class="n">outBit</span><span class="p">,</span>                                  <span class="c1"># default 8</span>
</span><span id="Image-295"><a href="#Image-295"><span class="linenos">295</span></a>                                            <span class="n">user_flip</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">user_black</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
</span><span id="Image-296"><a href="#Image-296"><span class="linenos">296</span></a>                                            <span class="n">user_sat</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">no_auto_bright</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> 
</span><span id="Image-297"><a href="#Image-297"><span class="linenos">297</span></a>                                            <span class="n">auto_bright_thr</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">adjust_maximum_thr</span><span class="o">=</span><span class="mf">0.75</span><span class="p">,</span> 
</span><span id="Image-298"><a href="#Image-298"><span class="linenos">298</span></a>                                            <span class="n">bright</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">highlight_mode</span><span class="o">=</span><span class="n">rawpy</span><span class="o">.</span><span class="n">HighlightMode</span><span class="o">.</span><span class="n">Clip</span><span class="p">,</span> 
</span><span id="Image-299"><a href="#Image-299"><span class="linenos">299</span></a>                                            <span class="n">exp_shift</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">exp_preserve_highlights</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> 
</span><span id="Image-300"><a href="#Image-300"><span class="linenos">300</span></a>                                            <span class="n">no_auto_scale</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="Image-301"><a href="#Image-301"><span class="linenos">301</span></a>                                            <span class="n">gamma</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>                                         <span class="c1"># linear output</span>
</span><span id="Image-302"><a href="#Image-302"><span class="linenos">302</span></a>                                            <span class="n">chromatic_aberration</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">bad_pixels_path</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</span><span id="Image-303"><a href="#Image-303"><span class="linenos">303</span></a>            <span class="n">imgDouble</span> <span class="o">=</span> <span class="n">colour</span><span class="o">.</span><span class="n">utilities</span><span class="o">.</span><span class="n">as_float_array</span><span class="p">(</span><span class="n">raw</span><span class="o">.</span><span class="n">postprocess</span><span class="p">(</span><span class="n">ppParams</span><span class="p">))</span><span class="o">/</span><span class="p">(</span><span class="nb">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">16</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</span><span id="Image-304"><a href="#Image-304"><span class="linenos">304</span></a>            <span class="n">raw</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="Image-305"><a href="#Image-305"><span class="linenos">305</span></a>            <span class="n">scalingFactor</span><span class="p">,</span> <span class="nb">type</span><span class="p">,</span> <span class="n">linear</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span> <span class="n">imageType</span><span class="o">.</span><span class="n">ARW</span><span class="p">,</span> <span class="kc">True</span>
</span><span id="Image-306"><a href="#Image-306"><span class="linenos">306</span></a>
</span><span id="Image-307"><a href="#Image-307"><span class="linenos">307</span></a>        <span class="c1"># load jpg, tiff, hdr file using colour</span>
</span><span id="Image-308"><a href="#Image-308"><span class="linenos">308</span></a>        <span class="k">elif</span> <span class="n">ext</span><span class="o">==</span><span class="s2">&quot;jpg&quot;</span><span class="p">:</span>
</span><span id="Image-309"><a href="#Image-309"><span class="linenos">309</span></a>            <span class="n">imgDouble</span> <span class="o">=</span> <span class="n">colour</span><span class="o">.</span><span class="n">read_image</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">bit_depth</span><span class="o">=</span><span class="s1">&#39;float32&#39;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;Imageio&#39;</span><span class="p">)</span>
</span><span id="Image-310"><a href="#Image-310"><span class="linenos">310</span></a>            <span class="n">scalingFactor</span><span class="p">,</span> <span class="nb">type</span><span class="p">,</span> <span class="n">linear</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span> <span class="n">imageType</span><span class="o">.</span><span class="n">SDR</span><span class="p">,</span> <span class="kc">False</span>
</span><span id="Image-311"><a href="#Image-311"><span class="linenos">311</span></a>
</span><span id="Image-312"><a href="#Image-312"><span class="linenos">312</span></a>        <span class="c1"># post processing for HDR scaling to [ ,1]</span>
</span><span id="Image-313"><a href="#Image-313"><span class="linenos">313</span></a>        <span class="k">elif</span> <span class="n">ext</span> <span class="o">==</span><span class="s2">&quot;hdr&quot;</span><span class="p">:</span>
</span><span id="Image-314"><a href="#Image-314"><span class="linenos">314</span></a>            <span class="k">if</span> <span class="n">thumb</span><span class="p">:</span> 
</span><span id="Image-315"><a href="#Image-315"><span class="linenos">315</span></a>                <span class="c1"># do not read input only the thumbnail</span>
</span><span id="Image-316"><a href="#Image-316"><span class="linenos">316</span></a>                <span class="n">searchStr</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="s2">&quot;thumbnails&quot;</span><span class="p">,</span><span class="s2">&quot;_&quot;</span><span class="o">+</span><span class="n">name</span><span class="o">+</span><span class="s2">&quot;.&quot;</span><span class="o">+</span><span class="n">ext</span><span class="p">)</span>
</span><span id="Image-317"><a href="#Image-317"><span class="linenos">317</span></a>                <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">searchStr</span><span class="p">):</span> 
</span><span id="Image-318"><a href="#Image-318"><span class="linenos">318</span></a>                    <span class="n">imgDouble</span> <span class="o">=</span> <span class="n">colour</span><span class="o">.</span><span class="n">read_image</span><span class="p">(</span><span class="n">searchStr</span><span class="p">,</span> <span class="n">bit_depth</span><span class="o">=</span><span class="s1">&#39;float32&#39;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;Imageio&#39;</span><span class="p">)</span> <span class="c1"># &lt;--- read thumbnail of input file</span>
</span><span id="Image-319"><a href="#Image-319"><span class="linenos">319</span></a>
</span><span id="Image-320"><a href="#Image-320"><span class="linenos">320</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="Image-321"><a href="#Image-321"><span class="linenos">321</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="s2">&quot;thumbnails&quot;</span><span class="p">)):</span> <span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="s2">&quot;thumbnails&quot;</span><span class="p">))</span>
</span><span id="Image-322"><a href="#Image-322"><span class="linenos">322</span></a>
</span><span id="Image-323"><a href="#Image-323"><span class="linenos">323</span></a>                    <span class="c1"># read image and create thumbnail</span>
</span><span id="Image-324"><a href="#Image-324"><span class="linenos">324</span></a>                    <span class="n">imgDouble</span> <span class="o">=</span> <span class="n">colour</span><span class="o">.</span><span class="n">read_image</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">bit_depth</span><span class="o">=</span><span class="s1">&#39;float32&#39;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;Imageio&#39;</span><span class="p">)</span> <span class="c1"># &lt;--- read input file</span>
</span><span id="Image-325"><a href="#Image-325"><span class="linenos">325</span></a>
</span><span id="Image-326"><a href="#Image-326"><span class="linenos">326</span></a>                    <span class="c1"># resize to thumbnail size</span>
</span><span id="Image-327"><a href="#Image-327"><span class="linenos">327</span></a>                    <span class="n">iY</span><span class="p">,</span> <span class="n">iX</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">imgDouble</span><span class="o">.</span><span class="n">shape</span>
</span><span id="Image-328"><a href="#Image-328"><span class="linenos">328</span></a>                    <span class="n">maxX</span> <span class="o">=</span> <span class="n">processing</span><span class="o">.</span><span class="n">ProcessPipe</span><span class="o">.</span><span class="n">maxSize</span>
</span><span id="Image-329"><a href="#Image-329"><span class="linenos">329</span></a>                    <span class="n">factor</span> <span class="o">=</span> <span class="n">maxX</span><span class="o">/</span><span class="n">iX</span>
</span><span id="Image-330"><a href="#Image-330"><span class="linenos">330</span></a>                    <span class="n">imgDoubleFull</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">imgDouble</span><span class="p">)</span>
</span><span id="Image-331"><a href="#Image-331"><span class="linenos">331</span></a>                    <span class="n">imgThumbnail</span> <span class="o">=</span>  <span class="n">skimage</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="n">imgDouble</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">iY</span> <span class="o">*</span> <span class="n">factor</span><span class="p">),</span><span class="n">maxX</span> <span class="p">))</span>
</span><span id="Image-332"><a href="#Image-332"><span class="linenos">332</span></a>                    <span class="c1"># save thumbnail</span>
</span><span id="Image-333"><a href="#Image-333"><span class="linenos">333</span></a>                    <span class="n">colour</span><span class="o">.</span><span class="n">write_image</span><span class="p">(</span><span class="n">imgThumbnail</span><span class="p">,</span><span class="n">searchStr</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;Imageio&#39;</span><span class="p">)</span>
</span><span id="Image-334"><a href="#Image-334"><span class="linenos">334</span></a>
</span><span id="Image-335"><a href="#Image-335"><span class="linenos">335</span></a>                    <span class="n">imgDouble</span> <span class="o">=</span> <span class="n">imgThumbnail</span>
</span><span id="Image-336"><a href="#Image-336"><span class="linenos">336</span></a>
</span><span id="Image-337"><a href="#Image-337"><span class="linenos">337</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="Image-338"><a href="#Image-338"><span class="linenos">338</span></a>                <span class="c1"># thumb set to False, read input not the thumbnail</span>
</span><span id="Image-339"><a href="#Image-339"><span class="linenos">339</span></a>                <span class="n">imgDouble</span> <span class="o">=</span> <span class="n">colour</span><span class="o">.</span><span class="n">read_image</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">bit_depth</span><span class="o">=</span><span class="s1">&#39;float32&#39;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;Imageio&#39;</span><span class="p">)</span>
</span><span id="Image-340"><a href="#Image-340"><span class="linenos">340</span></a>
</span><span id="Image-341"><a href="#Image-341"><span class="linenos">341</span></a>            <span class="nb">type</span> <span class="o">=</span> <span class="n">imageType</span><span class="o">.</span><span class="n">HDR</span>
</span><span id="Image-342"><a href="#Image-342"><span class="linenos">342</span></a>            <span class="n">linear</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="Image-343"><a href="#Image-343"><span class="linenos">343</span></a>            <span class="n">scalingFactor</span> <span class="o">=</span> <span class="mf">1.0</span>
</span><span id="Image-344"><a href="#Image-344"><span class="linenos">344</span></a>
</span><span id="Image-345"><a href="#Image-345"><span class="linenos">345</span></a>        <span class="c1"># create image object</span>
</span><span id="Image-346"><a href="#Image-346"><span class="linenos">346</span></a>        <span class="n">res</span> <span class="o">=</span>  <span class="n">Image</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">name</span><span class="o">+</span><span class="s1">&#39;.&#39;</span><span class="o">+</span><span class="n">ext</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">(</span><span class="n">imgDouble</span><span class="p">),</span><span class="nb">type</span><span class="p">,</span> <span class="n">linear</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">scalingFactor</span><span class="p">)</span>           <span class="c1"># colorspace = None will be set in metadata.metadata.build(res)</span>
</span><span id="Image-347"><a href="#Image-347"><span class="linenos">347</span></a>        <span class="n">res</span><span class="o">.</span><span class="n">metadata</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>                                                         <span class="c1"># build metadata (read if json file exists, else recover from exif data)</span>
</span><span id="Image-348"><a href="#Image-348"><span class="linenos">348</span></a>
</span><span id="Image-349"><a href="#Image-349"><span class="linenos">349</span></a>        <span class="c1"># update path</span>
</span><span id="Image-350"><a href="#Image-350"><span class="linenos">350</span></a>        <span class="n">res</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;path&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</span><span id="Image-351"><a href="#Image-351"><span class="linenos">351</span></a>        <span class="c1"># update size</span>
</span><span id="Image-352"><a href="#Image-352"><span class="linenos">352</span></a>        <span class="k">if</span> <span class="n">thumb</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">imgDoubleFull</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
</span><span id="Image-353"><a href="#Image-353"><span class="linenos">353</span></a>            <span class="n">h</span><span class="p">,</span><span class="n">w</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="n">imgDoubleFull</span><span class="o">.</span><span class="n">shape</span>
</span><span id="Image-354"><a href="#Image-354"><span class="linenos">354</span></a>            <span class="n">res</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;exif&#39;</span><span class="p">][</span><span class="s1">&#39;Image Width&#39;</span><span class="p">]</span>    <span class="o">=</span> <span class="n">w</span>
</span><span id="Image-355"><a href="#Image-355"><span class="linenos">355</span></a>            <span class="n">res</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;exif&#39;</span><span class="p">][</span><span class="s1">&#39;Image Height&#39;</span><span class="p">]</span>   <span class="o">=</span> <span class="n">h</span>
</span><span id="Image-356"><a href="#Image-356"><span class="linenos">356</span></a>
</span><span id="Image-357"><a href="#Image-357"><span class="linenos">357</span></a>        <span class="c1"># update image.colorSpace from metadata</span>
</span><span id="Image-358"><a href="#Image-358"><span class="linenos">358</span></a>        <span class="n">RGBcolorspace</span> <span class="o">=</span> <span class="n">ColorSpace</span><span class="o">.</span><span class="n">sRGB</span><span class="p">()</span> <span class="c1"># delfault color space</span>
</span><span id="Image-359"><a href="#Image-359"><span class="linenos">359</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="s1">&#39;sRGB&#39;</span> <span class="ow">in</span> <span class="n">res</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;exif&#39;</span><span class="p">][</span><span class="s1">&#39;Color Space&#39;</span><span class="p">]):</span>
</span><span id="Image-360"><a href="#Image-360"><span class="linenos">360</span></a>            <span class="n">res</span><span class="o">.</span><span class="n">colorSpace</span> <span class="o">=</span> <span class="n">RGBcolorspace</span> 
</span><span id="Image-361"><a href="#Image-361"><span class="linenos">361</span></a>        <span class="k">else</span><span class="p">:</span> <span class="c1"># &#39;sRGB&#39; in color space &lt;from exif&gt;</span>
</span><span id="Image-362"><a href="#Image-362"><span class="linenos">362</span></a>            <span class="n">res</span><span class="o">.</span><span class="n">colorSpace</span> <span class="o">=</span> <span class="n">RGBcolorspace</span> 
</span><span id="Image-363"><a href="#Image-363"><span class="linenos">363</span></a>
</span><span id="Image-364"><a href="#Image-364"><span class="linenos">364</span></a>        <span class="c1"># display ready image</span>
</span><span id="Image-365"><a href="#Image-365"><span class="linenos">365</span></a>        <span class="k">if</span> <span class="s1">&#39;display&#39;</span> <span class="ow">in</span> <span class="n">res</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="Image-366"><a href="#Image-366"><span class="linenos">366</span></a>            <span class="n">disp</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;display&#39;</span><span class="p">]</span>
</span><span id="Image-367"><a href="#Image-367"><span class="linenos">367</span></a>            <span class="k">if</span> <span class="n">disp</span> <span class="ow">in</span> <span class="n">pref</span><span class="o">.</span><span class="n">getHDRdisplays</span><span class="p">()</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="Image-368"><a href="#Image-368"><span class="linenos">368</span></a>                <span class="n">scaling</span> <span class="o">=</span> <span class="n">pref</span><span class="o">.</span><span class="n">getHDRdisplays</span><span class="p">()[</span><span class="n">disp</span><span class="p">][</span><span class="s1">&#39;scaling&#39;</span><span class="p">]</span>
</span><span id="Image-369"><a href="#Image-369"><span class="linenos">369</span></a>                <span class="n">res</span><span class="o">.</span><span class="n">colorData</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">colorData</span><span class="o">/</span><span class="n">scaling</span>  
</span><span id="Image-370"><a href="#Image-370"><span class="linenos">370</span></a>
</span><span id="Image-371"><a href="#Image-371"><span class="linenos">371</span></a>        <span class="k">return</span> <span class="n">res</span>
</span><span id="Image-372"><a href="#Image-372"><span class="linenos">372</span></a>
</span><span id="Image-373"><a href="#Image-373"><span class="linenos">373</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">filename</span><span class="p">):</span>
</span><span id="Image-374"><a href="#Image-374"><span class="linenos">374</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Image-375"><a href="#Image-375"><span class="linenos">375</span></a><span class="sd">        Save the image and its metadata to disk.</span>
</span><span id="Image-376"><a href="#Image-376"><span class="linenos">376</span></a><span class="sd">        </span>
</span><span id="Image-377"><a href="#Image-377"><span class="linenos">377</span></a><span class="sd">        This method saves HDR images to disk along with their associated metadata</span>
</span><span id="Image-378"><a href="#Image-378"><span class="linenos">378</span></a><span class="sd">        in a JSON file. It updates the image&#39;s path and filename information</span>
</span><span id="Image-379"><a href="#Image-379"><span class="linenos">379</span></a><span class="sd">        before saving.</span>
</span><span id="Image-380"><a href="#Image-380"><span class="linenos">380</span></a>
</span><span id="Image-381"><a href="#Image-381"><span class="linenos">381</span></a><span class="sd">        Args:</span>
</span><span id="Image-382"><a href="#Image-382"><span class="linenos">382</span></a><span class="sd">            filename (str): Target filename for saving the image</span>
</span><span id="Image-383"><a href="#Image-383"><span class="linenos">383</span></a><span class="sd">            </span>
</span><span id="Image-384"><a href="#Image-384"><span class="linenos">384</span></a><span class="sd">        Note:</span>
</span><span id="Image-385"><a href="#Image-385"><span class="linenos">385</span></a><span class="sd">            Only HDR images can be written using this method. The metadata</span>
</span><span id="Image-386"><a href="#Image-386"><span class="linenos">386</span></a><span class="sd">            is automatically saved to a corresponding .json file.</span>
</span><span id="Image-387"><a href="#Image-387"><span class="linenos">387</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Image-388"><a href="#Image-388"><span class="linenos">388</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">isHDR</span><span class="p">():</span>
</span><span id="Image-389"><a href="#Image-389"><span class="linenos">389</span></a>
</span><span id="Image-390"><a href="#Image-390"><span class="linenos">390</span></a>            <span class="n">path</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">ext</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">filenamesplit</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
</span><span id="Image-391"><a href="#Image-391"><span class="linenos">391</span></a>            <span class="n">colour</span><span class="o">.</span><span class="n">write_image</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">colorData</span><span class="p">,</span><span class="n">filename</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;Imageio&#39;</span><span class="p">)</span>
</span><span id="Image-392"><a href="#Image-392"><span class="linenos">392</span></a>
</span><span id="Image-393"><a href="#Image-393"><span class="linenos">393</span></a>            <span class="c1"># update filename related metadata before saving</span>
</span><span id="Image-394"><a href="#Image-394"><span class="linenos">394</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">+</span><span class="s1">&#39;.&#39;</span><span class="o">+</span><span class="n">ext</span>
</span><span id="Image-395"><a href="#Image-395"><span class="linenos">395</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">path</span>  <span class="o">=</span> <span class="n">path</span>
</span><span id="Image-396"><a href="#Image-396"><span class="linenos">396</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">image</span> <span class="o">=</span> <span class="bp">self</span>
</span><span id="Image-397"><a href="#Image-397"><span class="linenos">397</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;filename&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">name</span><span class="o">+</span><span class="s1">&#39;.&#39;</span><span class="o">+</span><span class="n">ext</span>
</span><span id="Image-398"><a href="#Image-398"><span class="linenos">398</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;path&#39;</span><span class="p">]</span> <span class="o">=</span>     <span class="n">path</span>
</span><span id="Image-399"><a href="#Image-399"><span class="linenos">399</span></a>
</span><span id="Image-400"><a href="#Image-400"><span class="linenos">400</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span><span id="Image-401"><a href="#Image-401"><span class="linenos">401</span></a>
</span><span id="Image-402"><a href="#Image-402"><span class="linenos">402</span></a>    <span class="nd">@staticmethod</span>
</span><span id="Image-403"><a href="#Image-403"><span class="linenos">403</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">toOne</span><span class="p">(</span><span class="n">colorData</span><span class="p">):</span>
</span><span id="Image-404"><a href="#Image-404"><span class="linenos">404</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Image-405"><a href="#Image-405"><span class="linenos">405</span></a><span class="sd">        Scale image color data to [0, 1] range based on maximum RGB values.</span>
</span><span id="Image-406"><a href="#Image-406"><span class="linenos">406</span></a><span class="sd">        </span>
</span><span id="Image-407"><a href="#Image-407"><span class="linenos">407</span></a><span class="sd">        This utility method normalizes image data by finding the maximum value</span>
</span><span id="Image-408"><a href="#Image-408"><span class="linenos">408</span></a><span class="sd">        across all RGB channels and scaling accordingly.</span>
</span><span id="Image-409"><a href="#Image-409"><span class="linenos">409</span></a>
</span><span id="Image-410"><a href="#Image-410"><span class="linenos">410</span></a><span class="sd">        Args:</span>
</span><span id="Image-411"><a href="#Image-411"><span class="linenos">411</span></a><span class="sd">            colorData (numpy.ndarray): Input image color data</span>
</span><span id="Image-412"><a href="#Image-412"><span class="linenos">412</span></a><span class="sd">                </span>
</span><span id="Image-413"><a href="#Image-413"><span class="linenos">413</span></a><span class="sd">        Returns:</span>
</span><span id="Image-414"><a href="#Image-414"><span class="linenos">414</span></a><span class="sd">            tuple: (scaled_color_data, scaling_factor)</span>
</span><span id="Image-415"><a href="#Image-415"><span class="linenos">415</span></a><span class="sd">                - scaled_color_data: Normalized image data in [0,1] range</span>
</span><span id="Image-416"><a href="#Image-416"><span class="linenos">416</span></a><span class="sd">                - scaling_factor: Applied scaling factor (1/max_value)</span>
</span><span id="Image-417"><a href="#Image-417"><span class="linenos">417</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Image-418"><a href="#Image-418"><span class="linenos">418</span></a>
</span><span id="Image-419"><a href="#Image-419"><span class="linenos">419</span></a>        <span class="n">imgVector</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">ndarray2vector</span><span class="p">(</span><span class="n">colorData</span><span class="p">)</span>
</span><span id="Image-420"><a href="#Image-420"><span class="linenos">420</span></a>        <span class="n">R</span><span class="p">,</span> <span class="n">G</span><span class="p">,</span> <span class="n">B</span> <span class="o">=</span> <span class="n">imgVector</span><span class="p">[:,</span><span class="mi">0</span><span class="p">],</span> <span class="n">imgVector</span><span class="p">[:,</span><span class="mi">1</span><span class="p">],</span> <span class="n">imgVector</span><span class="p">[:,</span><span class="mi">2</span><span class="p">]</span>
</span><span id="Image-421"><a href="#Image-421"><span class="linenos">421</span></a>        <span class="n">maxRGB</span> <span class="o">=</span> <span class="nb">max</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">amax</span><span class="p">(</span><span class="n">R</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">amax</span><span class="p">(</span><span class="n">G</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">amax</span><span class="p">(</span><span class="n">B</span><span class="p">)])</span> 
</span><span id="Image-422"><a href="#Image-422"><span class="linenos">422</span></a>
</span><span id="Image-423"><a href="#Image-423"><span class="linenos">423</span></a>        <span class="k">return</span> <span class="n">colorData</span><span class="o">/</span><span class="n">maxRGB</span><span class="p">,</span> <span class="mf">1.0</span><span class="o">/</span><span class="n">maxRGB</span>
</span><span id="Image-424"><a href="#Image-424"><span class="linenos">424</span></a>
</span><span id="Image-425"><a href="#Image-425"><span class="linenos">425</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getChannel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">channel</span><span class="p">):</span>
</span><span id="Image-426"><a href="#Image-426"><span class="linenos">426</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Image-427"><a href="#Image-427"><span class="linenos">427</span></a><span class="sd">        Extract a specific color channel from the image.</span>
</span><span id="Image-428"><a href="#Image-428"><span class="linenos">428</span></a><span class="sd">        </span>
</span><span id="Image-429"><a href="#Image-429"><span class="linenos">429</span></a><span class="sd">        This method extracts individual color channels (R, G, B, X, Y, Z, L, a, b)</span>
</span><span id="Image-430"><a href="#Image-430"><span class="linenos">430</span></a><span class="sd">        by converting to the appropriate color space and returning the requested channel.</span>
</span><span id="Image-431"><a href="#Image-431"><span class="linenos">431</span></a>
</span><span id="Image-432"><a href="#Image-432"><span class="linenos">432</span></a><span class="sd">        Args:</span>
</span><span id="Image-433"><a href="#Image-433"><span class="linenos">433</span></a><span class="sd">            channel (channel): Channel identifier (e.g., channel.sR, channel.Y, channel.L)</span>
</span><span id="Image-434"><a href="#Image-434"><span class="linenos">434</span></a><span class="sd">        </span>
</span><span id="Image-435"><a href="#Image-435"><span class="linenos">435</span></a><span class="sd">        Returns:</span>
</span><span id="Image-436"><a href="#Image-436"><span class="linenos">436</span></a><span class="sd">            numpy.ndarray or None: 2D array containing the channel data, or None for invalid channels</span>
</span><span id="Image-437"><a href="#Image-437"><span class="linenos">437</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Image-438"><a href="#Image-438"><span class="linenos">438</span></a>
</span><span id="Image-439"><a href="#Image-439"><span class="linenos">439</span></a>        <span class="c1"># take into account colorSpace</span>
</span><span id="Image-440"><a href="#Image-440"><span class="linenos">440</span></a>        <span class="n">destColor</span> <span class="o">=</span> <span class="n">channel</span><span class="o">.</span><span class="n">colorSpace</span><span class="p">()</span>
</span><span id="Image-441"><a href="#Image-441"><span class="linenos">441</span></a>        <span class="n">image</span> <span class="o">=</span> <span class="n">processing</span><span class="o">.</span><span class="n">ColorSpaceTransform</span><span class="p">()</span><span class="o">.</span><span class="n">compute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">dest</span><span class="o">=</span><span class="n">destColor</span><span class="p">)</span>
</span><span id="Image-442"><a href="#Image-442"><span class="linenos">442</span></a>
</span><span id="Image-443"><a href="#Image-443"><span class="linenos">443</span></a>        <span class="k">if</span> <span class="n">channel</span><span class="o">.</span><span class="n">getValue</span><span class="p">()</span> <span class="o">&lt;</span><span class="mi">3</span><span class="p">:</span>
</span><span id="Image-444"><a href="#Image-444"><span class="linenos">444</span></a>            <span class="k">return</span> <span class="n">image</span><span class="o">.</span><span class="n">colorData</span><span class="p">[:,:,</span><span class="n">channel</span><span class="o">.</span><span class="n">getValue</span><span class="p">()]</span>
</span><span id="Image-445"><a href="#Image-445"><span class="linenos">445</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Image-446"><a href="#Image-446"><span class="linenos">446</span></a>            <span class="k">return</span> <span class="kc">None</span>
</span><span id="Image-447"><a href="#Image-447"><span class="linenos">447</span></a>
</span><span id="Image-448"><a href="#Image-448"><span class="linenos">448</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getDynamicRange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">percentile</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="Image-449"><a href="#Image-449"><span class="linenos">449</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Image-450"><a href="#Image-450"><span class="linenos">450</span></a><span class="sd">        Calculate the dynamic range of the image in stops.</span>
</span><span id="Image-451"><a href="#Image-451"><span class="linenos">451</span></a><span class="sd">        </span>
</span><span id="Image-452"><a href="#Image-452"><span class="linenos">452</span></a><span class="sd">        Computes the dynamic range by analyzing the Y (luminance) channel</span>
</span><span id="Image-453"><a href="#Image-453"><span class="linenos">453</span></a><span class="sd">        and calculating the log2 ratio between maximum and minimum values.</span>
</span><span id="Image-454"><a href="#Image-454"><span class="linenos">454</span></a>
</span><span id="Image-455"><a href="#Image-455"><span class="linenos">455</span></a><span class="sd">        Args:</span>
</span><span id="Image-456"><a href="#Image-456"><span class="linenos">456</span></a><span class="sd">            percentile (float, optional): Percentile for robust min/max calculation.</span>
</span><span id="Image-457"><a href="#Image-457"><span class="linenos">457</span></a><span class="sd">                                        If None, uses actual min/max excluding zeros.</span>
</span><span id="Image-458"><a href="#Image-458"><span class="linenos">458</span></a><span class="sd">                </span>
</span><span id="Image-459"><a href="#Image-459"><span class="linenos">459</span></a><span class="sd">        Returns:</span>
</span><span id="Image-460"><a href="#Image-460"><span class="linenos">460</span></a><span class="sd">            float: Dynamic range in stops (log2 scale)</span>
</span><span id="Image-461"><a href="#Image-461"><span class="linenos">461</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Image-462"><a href="#Image-462"><span class="linenos">462</span></a>
</span><span id="Image-463"><a href="#Image-463"><span class="linenos">463</span></a>        <span class="n">Y_min</span><span class="p">,</span><span class="n">Y_max</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
</span><span id="Image-464"><a href="#Image-464"><span class="linenos">464</span></a>        <span class="n">Y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getChannel</span><span class="p">(</span><span class="n">channel</span><span class="o">.</span><span class="n">Y</span><span class="p">)</span>
</span><span id="Image-465"><a href="#Image-465"><span class="linenos">465</span></a>
</span><span id="Image-466"><a href="#Image-466"><span class="linenos">466</span></a>        <span class="k">if</span> <span class="n">percentile</span> <span class="o">==</span> <span class="kc">None</span> <span class="p">:</span> <span class="n">Y_min</span><span class="p">,</span> <span class="n">Y_max</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">amin</span><span class="p">(</span><span class="n">Y</span><span class="p">[</span><span class="n">Y</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">]),</span> <span class="n">np</span><span class="o">.</span><span class="n">amax</span><span class="p">(</span><span class="n">Y</span><span class="p">)</span>                  <span class="c1"># use min and max</span>
</span><span id="Image-467"><a href="#Image-467"><span class="linenos">467</span></a>        <span class="k">else</span><span class="p">:</span> <span class="n">Y_min</span><span class="p">,</span> <span class="n">Y_max</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">percentile</span><span class="p">(</span><span class="n">Y</span><span class="p">[</span><span class="n">Y</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">],</span><span class="n">percentile</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">percentile</span><span class="p">(</span><span class="n">Y</span><span class="p">,</span><span class="mi">100</span><span class="o">-</span><span class="n">percentile</span><span class="p">)</span>   <span class="c1"># percentile</span>
</span><span id="Image-468"><a href="#Image-468"><span class="linenos">468</span></a>
</span><span id="Image-469"><a href="#Image-469"><span class="linenos">469</span></a>        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">log2</span><span class="p">(</span><span class="n">Y_max</span><span class="p">)</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">log2</span><span class="p">(</span><span class="n">Y_min</span><span class="p">)</span>
</span><span id="Image-470"><a href="#Image-470"><span class="linenos">470</span></a>
</span><span id="Image-471"><a href="#Image-471"><span class="linenos">471</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">buildHistogram</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">channel</span><span class="p">):</span>
</span><span id="Image-472"><a href="#Image-472"><span class="linenos">472</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Image-473"><a href="#Image-473"><span class="linenos">473</span></a><span class="sd">        Generate a histogram for the specified image channel.</span>
</span><span id="Image-474"><a href="#Image-474"><span class="linenos">474</span></a><span class="sd">        </span>
</span><span id="Image-475"><a href="#Image-475"><span class="linenos">475</span></a><span class="sd">        Creates and stores a histogram object for the given channel, which can</span>
</span><span id="Image-476"><a href="#Image-476"><span class="linenos">476</span></a><span class="sd">        be used for analysis and display purposes.</span>
</span><span id="Image-477"><a href="#Image-477"><span class="linenos">477</span></a>
</span><span id="Image-478"><a href="#Image-478"><span class="linenos">478</span></a><span class="sd">        Args:</span>
</span><span id="Image-479"><a href="#Image-479"><span class="linenos">479</span></a><span class="sd">            channel (channel): Channel to analyze for histogram generation</span>
</span><span id="Image-480"><a href="#Image-480"><span class="linenos">480</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Image-481"><a href="#Image-481"><span class="linenos">481</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">histogram</span> <span class="o">=</span> <span class="n">Histogram</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="p">,</span> <span class="n">nbBins</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="nb">range</span><span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">logSpace</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">isHDR</span><span class="p">())</span>
</span><span id="Image-482"><a href="#Image-482"><span class="linenos">482</span></a>
</span><span id="Image-483"><a href="#Image-483"><span class="linenos">483</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">ax</span><span class="p">,</span><span class="n">displayTitle</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">title</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">forceToneMapping</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">TMO</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="Image-484"><a href="#Image-484"><span class="linenos">484</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Image-485"><a href="#Image-485"><span class="linenos">485</span></a><span class="sd">        Display the image on a matplotlib axis with optional tone mapping.</span>
</span><span id="Image-486"><a href="#Image-486"><span class="linenos">486</span></a><span class="sd">        </span>
</span><span id="Image-487"><a href="#Image-487"><span class="linenos">487</span></a><span class="sd">        This method handles proper display of both SDR and HDR images, applying</span>
</span><span id="Image-488"><a href="#Image-488"><span class="linenos">488</span></a><span class="sd">        tone mapping when necessary for HDR content.</span>
</span><span id="Image-489"><a href="#Image-489"><span class="linenos">489</span></a>
</span><span id="Image-490"><a href="#Image-490"><span class="linenos">490</span></a><span class="sd">        Args:</span>
</span><span id="Image-491"><a href="#Image-491"><span class="linenos">491</span></a><span class="sd">            ax (matplotlib.axes.Axes): Matplotlib axis for displaying the image</span>
</span><span id="Image-492"><a href="#Image-492"><span class="linenos">492</span></a><span class="sd">            displayTitle (bool, optional): Whether to show title (default: False)</span>
</span><span id="Image-493"><a href="#Image-493"><span class="linenos">493</span></a><span class="sd">            title (str, optional): Custom title text (default: auto-generated)</span>
</span><span id="Image-494"><a href="#Image-494"><span class="linenos">494</span></a><span class="sd">            forceToneMapping (bool, optional): Apply tone mapping to HDR images (default: True)</span>
</span><span id="Image-495"><a href="#Image-495"><span class="linenos">495</span></a><span class="sd">            TMO (Processing, optional): Custom tone mapping operator (default: CCTF encoding)</span>
</span><span id="Image-496"><a href="#Image-496"><span class="linenos">496</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Image-497"><a href="#Image-497"><span class="linenos">497</span></a>        <span class="c1"># default values</span>
</span><span id="Image-498"><a href="#Image-498"><span class="linenos">498</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">title</span><span class="p">:</span> <span class="n">title</span><span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="o">+</span><span class="s2">&quot;(&quot;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">colorSpace</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span><span class="s2">&quot; | &quot;</span><span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;)&quot;</span>
</span><span id="Image-499"><a href="#Image-499"><span class="linenos">499</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">TMO</span><span class="p">:</span> <span class="n">TMO</span> <span class="o">=</span> <span class="n">processing</span><span class="o">.</span><span class="n">tmo_cctf</span><span class="p">()</span>
</span><span id="Image-500"><a href="#Image-500"><span class="linenos">500</span></a>        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">imageType</span><span class="o">.</span><span class="n">HDR</span><span class="p">))</span> <span class="ow">or</span> <span class="p">(</span><span class="ow">not</span>  <span class="n">forceToneMapping</span><span class="p">):</span> 
</span><span id="Image-501"><a href="#Image-501"><span class="linenos">501</span></a>            <span class="n">ax</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">colorData</span><span class="p">)</span>
</span><span id="Image-502"><a href="#Image-502"><span class="linenos">502</span></a>        <span class="k">else</span><span class="p">:</span> <span class="c1"># HDR and forceToneMapping</span>
</span><span id="Image-503"><a href="#Image-503"><span class="linenos">503</span></a>            <span class="n">ax</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">TMO</span><span class="p">)</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">processing</span><span class="o">.</span><span class="n">clip</span><span class="p">())</span><span class="o">.</span><span class="n">colorData</span><span class="p">)</span>
</span><span id="Image-504"><a href="#Image-504"><span class="linenos">504</span></a>            <span class="n">title</span> <span class="o">=</span> <span class="n">title</span><span class="o">+</span><span class="s2">&quot;[auto TMo]&quot;</span>
</span><span id="Image-505"><a href="#Image-505"><span class="linenos">505</span></a>        <span class="k">if</span> <span class="n">displayTitle</span><span class="p">:</span>  <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
</span><span id="Image-506"><a href="#Image-506"><span class="linenos">506</span></a>        <span class="n">ax</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s2">&quot;off&quot;</span><span class="p">)</span>
</span><span id="Image-507"><a href="#Image-507"><span class="linenos">507</span></a>
</span><span id="Image-508"><a href="#Image-508"><span class="linenos">508</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Image-509"><a href="#Image-509"><span class="linenos">509</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Image-510"><a href="#Image-510"><span class="linenos">510</span></a><span class="sd">        Generate a detailed string representation of the image object.</span>
</span><span id="Image-511"><a href="#Image-511"><span class="linenos">511</span></a><span class="sd">        </span>
</span><span id="Image-512"><a href="#Image-512"><span class="linenos">512</span></a><span class="sd">        Returns:</span>
</span><span id="Image-513"><a href="#Image-513"><span class="linenos">513</span></a><span class="sd">            str: Comprehensive description including all image properties</span>
</span><span id="Image-514"><a href="#Image-514"><span class="linenos">514</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Image-515"><a href="#Image-515"><span class="linenos">515</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">colorSpace</span><span class="p">:</span>
</span><span id="Image-516"><a href="#Image-516"><span class="linenos">516</span></a>            <span class="n">colorSpaceSTR</span> <span class="o">=</span> <span class="s2">&quot;None&quot;</span>
</span><span id="Image-517"><a href="#Image-517"><span class="linenos">517</span></a>        <span class="k">else</span><span class="p">:</span> 
</span><span id="Image-518"><a href="#Image-518"><span class="linenos">518</span></a>            <span class="n">colorSpaceSTR</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">colorSpace</span><span class="o">.</span><span class="n">name</span>
</span><span id="Image-519"><a href="#Image-519"><span class="linenos">519</span></a>        <span class="n">res</span> <span class="o">=</span>   <span class="s2">&quot;&lt;class Image:</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> \
</span><span id="Image-520"><a href="#Image-520"><span class="linenos">520</span></a>                <span class="s2">&quot;</span><span class="se">\t</span><span class="s2"> name: &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> \
</span><span id="Image-521"><a href="#Image-521"><span class="linenos">521</span></a>                <span class="s2">&quot;</span><span class="se">\t</span><span class="s2"> path: &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> \
</span><span id="Image-522"><a href="#Image-522"><span class="linenos">522</span></a>                <span class="s2">&quot;</span><span class="se">\t</span><span class="s2"> shape: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span> <span class="o">+</span>  <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> \
</span><span id="Image-523"><a href="#Image-523"><span class="linenos">523</span></a>                <span class="s2">&quot;</span><span class="se">\t</span><span class="s2"> type: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">)</span> <span class="o">+</span>  <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span>\
</span><span id="Image-524"><a href="#Image-524"><span class="linenos">524</span></a>                <span class="s2">&quot;</span><span class="se">\t</span><span class="s2"> linear: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">linear</span><span class="p">)</span> <span class="o">+</span>  <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span>\
</span><span id="Image-525"><a href="#Image-525"><span class="linenos">525</span></a>                <span class="s2">&quot;</span><span class="se">\t</span><span class="s2"> scaling to [0,1]: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">scalingFactor</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span>\
</span><span id="Image-526"><a href="#Image-526"><span class="linenos">526</span></a>                <span class="s2">&quot;</span><span class="se">\t</span><span class="s2"> color space: &quot;</span> <span class="o">+</span> <span class="n">colorSpaceSTR</span> <span class="o">+</span> <span class="s2">&quot;&gt;&quot;</span>
</span><span id="Image-527"><a href="#Image-527"><span class="linenos">527</span></a>        <span class="k">return</span> <span class="n">res</span>
</span><span id="Image-528"><a href="#Image-528"><span class="linenos">528</span></a>
</span><span id="Image-529"><a href="#Image-529"><span class="linenos">529</span></a>    <span class="nd">@staticmethod</span>
</span><span id="Image-530"><a href="#Image-530"><span class="linenos">530</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">buildLchColorData</span><span class="p">(</span><span class="n">L</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">h</span><span class="p">,</span><span class="n">size</span><span class="p">,</span><span class="n">width</span><span class="p">,</span><span class="n">height</span><span class="p">):</span>
</span><span id="Image-531"><a href="#Image-531"><span class="linenos">531</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Image-532"><a href="#Image-532"><span class="linenos">532</span></a><span class="sd">        Generate synthetic LCH color data for visualization and testing.</span>
</span><span id="Image-533"><a href="#Image-533"><span class="linenos">533</span></a><span class="sd">        </span>
</span><span id="Image-534"><a href="#Image-534"><span class="linenos">534</span></a><span class="sd">        Creates artificial color data in LCH space with specified lightness,</span>
</span><span id="Image-535"><a href="#Image-535"><span class="linenos">535</span></a><span class="sd">        chroma, and hue ranges. Useful for color space visualization and</span>
</span><span id="Image-536"><a href="#Image-536"><span class="linenos">536</span></a><span class="sd">        testing color transformations.</span>
</span><span id="Image-537"><a href="#Image-537"><span class="linenos">537</span></a>
</span><span id="Image-538"><a href="#Image-538"><span class="linenos">538</span></a><span class="sd">        Args:</span>
</span><span id="Image-539"><a href="#Image-539"><span class="linenos">539</span></a><span class="sd">            L (tuple): Lightness range (min, max)</span>
</span><span id="Image-540"><a href="#Image-540"><span class="linenos">540</span></a><span class="sd">            c (tuple): Chroma range (min, max) </span>
</span><span id="Image-541"><a href="#Image-541"><span class="linenos">541</span></a><span class="sd">            h (tuple): Hue range (min, max)</span>
</span><span id="Image-542"><a href="#Image-542"><span class="linenos">542</span></a><span class="sd">            size (tuple): Output image dimensions (height, width)</span>
</span><span id="Image-543"><a href="#Image-543"><span class="linenos">543</span></a><span class="sd">            width (str): Primary axis for width (&#39;L&#39;, &#39;c&#39;, or &#39;h&#39;)</span>
</span><span id="Image-544"><a href="#Image-544"><span class="linenos">544</span></a><span class="sd">            height (str): Primary axis for height (&#39;L&#39;, &#39;c&#39;, or &#39;h&#39;)</span>
</span><span id="Image-545"><a href="#Image-545"><span class="linenos">545</span></a><span class="sd">                </span>
</span><span id="Image-546"><a href="#Image-546"><span class="linenos">546</span></a><span class="sd">        Returns:</span>
</span><span id="Image-547"><a href="#Image-547"><span class="linenos">547</span></a><span class="sd">            numpy.ndarray: Generated LCH color data with shape (height, width, 3)</span>
</span><span id="Image-548"><a href="#Image-548"><span class="linenos">548</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Image-549"><a href="#Image-549"><span class="linenos">549</span></a>
</span><span id="Image-550"><a href="#Image-550"><span class="linenos">550</span></a>        <span class="n">colorData</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="mi">3</span><span class="p">))</span>
</span><span id="Image-551"><a href="#Image-551"><span class="linenos">551</span></a>        <span class="n">Lmin</span><span class="p">,</span> <span class="n">Lmax</span> <span class="o">=</span> <span class="n">L</span> <span class="k">if</span> <span class="n">L</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">L</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">else</span> <span class="p">(</span><span class="n">L</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">L</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="Image-552"><a href="#Image-552"><span class="linenos">552</span></a>        <span class="n">cmin</span><span class="p">,</span> <span class="n">cmax</span> <span class="o">=</span> <span class="n">c</span> <span class="k">if</span> <span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">c</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">else</span> <span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="Image-553"><a href="#Image-553"><span class="linenos">553</span></a>        <span class="n">hmin</span><span class="p">,</span> <span class="n">hmax</span> <span class="o">=</span> <span class="n">h</span>
</span><span id="Image-554"><a href="#Image-554"><span class="linenos">554</span></a>
</span><span id="Image-555"><a href="#Image-555"><span class="linenos">555</span></a>        <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="Image-556"><a href="#Image-556"><span class="linenos">556</span></a>        <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="Image-557"><a href="#Image-557"><span class="linenos">557</span></a>
</span><span id="Image-558"><a href="#Image-558"><span class="linenos">558</span></a>        <span class="k">if</span> <span class="n">width</span><span class="o">==</span><span class="s1">&#39;L&#39;</span><span class="p">:</span>
</span><span id="Image-559"><a href="#Image-559"><span class="linenos">559</span></a>            <span class="k">if</span> <span class="n">height</span><span class="o">==</span><span class="s1">&#39;c&#39;</span><span class="p">:</span>
</span><span id="Image-560"><a href="#Image-560"><span class="linenos">560</span></a>                <span class="c1">#     +-------------------------------+</span>
</span><span id="Image-561"><a href="#Image-561"><span class="linenos">561</span></a>                <span class="c1">#  c  |                               |</span>
</span><span id="Image-562"><a href="#Image-562"><span class="linenos">562</span></a>                <span class="c1">#     +-------------------------------+</span>
</span><span id="Image-563"><a href="#Image-563"><span class="linenos">563</span></a>                <span class="c1">#                Lightness</span>
</span><span id="Image-564"><a href="#Image-564"><span class="linenos">564</span></a>                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">xmin</span><span class="p">,</span><span class="n">xmax</span><span class="p">):</span>
</span><span id="Image-565"><a href="#Image-565"><span class="linenos">565</span></a>                    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ymin</span><span class="p">,</span><span class="n">ymax</span><span class="p">):</span>
</span><span id="Image-566"><a href="#Image-566"><span class="linenos">566</span></a>                        <span class="n">u</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="n">x</span><span class="o">/</span><span class="p">(</span><span class="n">xmax</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="n">y</span><span class="o">/</span><span class="p">(</span><span class="n">ymax</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</span><span id="Image-567"><a href="#Image-567"><span class="linenos">567</span></a>                        <span class="n">Lu</span> <span class="o">=</span> <span class="n">Lmin</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">u</span><span class="p">)</span><span class="o">+</span><span class="n">Lmax</span><span class="o">*</span><span class="n">u</span>
</span><span id="Image-568"><a href="#Image-568"><span class="linenos">568</span></a>                        <span class="n">cv</span> <span class="o">=</span> <span class="n">cmin</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">v</span><span class="p">)</span> <span class="o">+</span> <span class="n">cmax</span><span class="o">*</span><span class="n">v</span>
</span><span id="Image-569"><a href="#Image-569"><span class="linenos">569</span></a>                        <span class="n">hh</span> <span class="o">=</span> <span class="p">(</span><span class="n">hmin</span><span class="o">+</span><span class="n">hmax</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span>
</span><span id="Image-570"><a href="#Image-570"><span class="linenos">570</span></a>                        <span class="n">colorData</span><span class="p">[</span><span class="n">y</span><span class="p">,</span><span class="n">x</span><span class="p">,:]</span> <span class="o">=</span> <span class="p">[</span><span class="n">Lu</span><span class="p">,</span><span class="n">cv</span><span class="p">,</span><span class="n">hh</span><span class="p">]</span>
</span><span id="Image-571"><a href="#Image-571"><span class="linenos">571</span></a>            <span class="k">elif</span> <span class="n">height</span><span class="o">==</span><span class="s1">&#39;h&#39;</span><span class="p">:</span>
</span><span id="Image-572"><a href="#Image-572"><span class="linenos">572</span></a>                <span class="c1">#     +-------------------------------+</span>
</span><span id="Image-573"><a href="#Image-573"><span class="linenos">573</span></a>                <span class="c1">#  h  |                               |</span>
</span><span id="Image-574"><a href="#Image-574"><span class="linenos">574</span></a>                <span class="c1">#     +-------------------------------+</span>
</span><span id="Image-575"><a href="#Image-575"><span class="linenos">575</span></a>                <span class="c1">#                Lightness</span>
</span><span id="Image-576"><a href="#Image-576"><span class="linenos">576</span></a>                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">xmin</span><span class="p">,</span><span class="n">xmax</span><span class="p">):</span>
</span><span id="Image-577"><a href="#Image-577"><span class="linenos">577</span></a>                    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ymin</span><span class="p">,</span><span class="n">ymax</span><span class="p">):</span>
</span><span id="Image-578"><a href="#Image-578"><span class="linenos">578</span></a>                        <span class="n">u</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="n">x</span><span class="o">/</span><span class="p">(</span><span class="n">xmax</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="n">y</span><span class="o">/</span><span class="p">(</span><span class="n">ymax</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</span><span id="Image-579"><a href="#Image-579"><span class="linenos">579</span></a>                        <span class="n">Lu</span> <span class="o">=</span> <span class="n">Lmin</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">u</span><span class="p">)</span><span class="o">+</span><span class="n">Lmax</span><span class="o">*</span><span class="n">u</span>
</span><span id="Image-580"><a href="#Image-580"><span class="linenos">580</span></a>                        <span class="k">if</span> <span class="n">hmin</span> <span class="o">&lt;=</span> <span class="n">hmax</span><span class="p">:</span>
</span><span id="Image-581"><a href="#Image-581"><span class="linenos">581</span></a>                            <span class="n">hv</span> <span class="o">=</span> <span class="n">hmin</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">v</span><span class="p">)</span> <span class="o">+</span> <span class="n">hmax</span><span class="o">*</span><span class="n">v</span>
</span><span id="Image-582"><a href="#Image-582"><span class="linenos">582</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="Image-583"><a href="#Image-583"><span class="linenos">583</span></a>                            <span class="c1"># hmin = 340 / hmax=20 -&gt; hmin = hmin-360 &gt;&gt; hmin = -20, hmax =20</span>
</span><span id="Image-584"><a href="#Image-584"><span class="linenos">584</span></a>                            <span class="n">hv</span> <span class="o">=</span> <span class="p">(</span><span class="n">hmin</span><span class="o">-</span><span class="mi">360</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">v</span><span class="p">)</span> <span class="o">+</span> <span class="n">hmax</span><span class="o">*</span><span class="n">v</span>
</span><span id="Image-585"><a href="#Image-585"><span class="linenos">585</span></a>                            <span class="k">if</span> <span class="n">hv</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span> <span class="n">hv</span> <span class="o">=</span> <span class="mi">360</span> <span class="o">+</span><span class="n">hv</span>
</span><span id="Image-586"><a href="#Image-586"><span class="linenos">586</span></a>                        <span class="n">cc</span> <span class="o">=</span> <span class="p">(</span><span class="n">cmin</span><span class="o">+</span><span class="n">cmax</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span>
</span><span id="Image-587"><a href="#Image-587"><span class="linenos">587</span></a>                        <span class="n">colorData</span><span class="p">[</span><span class="n">y</span><span class="p">,</span><span class="n">x</span><span class="p">,:]</span> <span class="o">=</span> <span class="p">[</span><span class="n">Lu</span><span class="p">,</span><span class="n">cc</span><span class="p">,</span><span class="n">hv</span><span class="p">]</span>
</span><span id="Image-588"><a href="#Image-588"><span class="linenos">588</span></a>        <span class="k">elif</span> <span class="n">width</span><span class="o">==</span><span class="s1">&#39;c&#39;</span><span class="p">:</span>
</span><span id="Image-589"><a href="#Image-589"><span class="linenos">589</span></a>            <span class="k">if</span> <span class="n">height</span><span class="o">==</span><span class="s1">&#39;L&#39;</span><span class="p">:</span>
</span><span id="Image-590"><a href="#Image-590"><span class="linenos">590</span></a>                <span class="c1">#     +-------------------------------+</span>
</span><span id="Image-591"><a href="#Image-591"><span class="linenos">591</span></a>                <span class="c1">#  L  |                               |</span>
</span><span id="Image-592"><a href="#Image-592"><span class="linenos">592</span></a>                <span class="c1">#     +-------------------------------+</span>
</span><span id="Image-593"><a href="#Image-593"><span class="linenos">593</span></a>                <span class="c1">#                chroma</span>
</span><span id="Image-594"><a href="#Image-594"><span class="linenos">594</span></a>                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">xmin</span><span class="p">,</span><span class="n">xmax</span><span class="p">):</span>
</span><span id="Image-595"><a href="#Image-595"><span class="linenos">595</span></a>                    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ymin</span><span class="p">,</span><span class="n">ymax</span><span class="p">):</span>
</span><span id="Image-596"><a href="#Image-596"><span class="linenos">596</span></a>                        <span class="n">u</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="n">x</span><span class="o">/</span><span class="p">(</span><span class="n">xmax</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="n">y</span><span class="o">/</span><span class="p">(</span><span class="n">ymax</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</span><span id="Image-597"><a href="#Image-597"><span class="linenos">597</span></a>                        <span class="n">cu</span> <span class="o">=</span> <span class="n">cmin</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">u</span><span class="p">)</span> <span class="o">+</span> <span class="n">cmax</span><span class="o">*</span><span class="n">u</span>
</span><span id="Image-598"><a href="#Image-598"><span class="linenos">598</span></a>                        <span class="n">Lv</span> <span class="o">=</span> <span class="n">Lmin</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">v</span><span class="p">)</span><span class="o">+</span><span class="n">Lmax</span><span class="o">*</span><span class="n">v</span>
</span><span id="Image-599"><a href="#Image-599"><span class="linenos">599</span></a>                        <span class="n">hh</span> <span class="o">=</span> <span class="p">(</span><span class="n">hmin</span><span class="o">+</span><span class="n">hmax</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span>
</span><span id="Image-600"><a href="#Image-600"><span class="linenos">600</span></a>                        <span class="n">colorData</span><span class="p">[</span><span class="n">y</span><span class="p">,</span><span class="n">x</span><span class="p">,:]</span> <span class="o">=</span> <span class="p">[</span><span class="n">Lv</span><span class="p">,</span><span class="n">cu</span><span class="p">,</span><span class="n">hh</span><span class="p">]</span>
</span><span id="Image-601"><a href="#Image-601"><span class="linenos">601</span></a>            <span class="k">elif</span> <span class="n">height</span><span class="o">==</span><span class="s1">&#39;h&#39;</span><span class="p">:</span>
</span><span id="Image-602"><a href="#Image-602"><span class="linenos">602</span></a>                <span class="c1">#     +-------------------------------+</span>
</span><span id="Image-603"><a href="#Image-603"><span class="linenos">603</span></a>                <span class="c1">#  h  |                               |</span>
</span><span id="Image-604"><a href="#Image-604"><span class="linenos">604</span></a>                <span class="c1">#     +-------------------------------+</span>
</span><span id="Image-605"><a href="#Image-605"><span class="linenos">605</span></a>                <span class="c1">#                chroma</span>
</span><span id="Image-606"><a href="#Image-606"><span class="linenos">606</span></a>                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">xmin</span><span class="p">,</span><span class="n">xmax</span><span class="p">):</span>
</span><span id="Image-607"><a href="#Image-607"><span class="linenos">607</span></a>                    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ymin</span><span class="p">,</span><span class="n">ymax</span><span class="p">):</span>
</span><span id="Image-608"><a href="#Image-608"><span class="linenos">608</span></a>                        <span class="n">u</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="n">x</span><span class="o">/</span><span class="p">(</span><span class="n">xmax</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="n">y</span><span class="o">/</span><span class="p">(</span><span class="n">ymax</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</span><span id="Image-609"><a href="#Image-609"><span class="linenos">609</span></a>                        <span class="n">cu</span> <span class="o">=</span> <span class="n">cmin</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">u</span><span class="p">)</span> <span class="o">+</span> <span class="n">cmax</span><span class="o">*</span><span class="n">u</span>
</span><span id="Image-610"><a href="#Image-610"><span class="linenos">610</span></a>                        <span class="k">if</span> <span class="n">hmin</span> <span class="o">&lt;=</span> <span class="n">hmax</span><span class="p">:</span>
</span><span id="Image-611"><a href="#Image-611"><span class="linenos">611</span></a>                            <span class="n">hv</span> <span class="o">=</span> <span class="n">hmin</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">v</span><span class="p">)</span> <span class="o">+</span> <span class="n">hmax</span><span class="o">*</span><span class="n">v</span>
</span><span id="Image-612"><a href="#Image-612"><span class="linenos">612</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="Image-613"><a href="#Image-613"><span class="linenos">613</span></a>                            <span class="c1"># hmin = 340 / hmax=20 -&gt; hmin = hmin-360 &gt;&gt; hmin = -20, hmax =20</span>
</span><span id="Image-614"><a href="#Image-614"><span class="linenos">614</span></a>                            <span class="n">hv</span> <span class="o">=</span> <span class="p">(</span><span class="n">hmin</span><span class="o">-</span><span class="mi">360</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">v</span><span class="p">)</span> <span class="o">+</span> <span class="n">hmax</span><span class="o">*</span><span class="n">v</span>
</span><span id="Image-615"><a href="#Image-615"><span class="linenos">615</span></a>                            <span class="k">if</span> <span class="n">hv</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span> <span class="n">hv</span> <span class="o">=</span> <span class="mi">360</span> <span class="o">+</span><span class="n">hv</span>
</span><span id="Image-616"><a href="#Image-616"><span class="linenos">616</span></a>                        <span class="n">LL</span> <span class="o">=</span> <span class="p">(</span><span class="n">Lmin</span><span class="o">+</span><span class="n">Lmax</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span>
</span><span id="Image-617"><a href="#Image-617"><span class="linenos">617</span></a>                        <span class="n">colorData</span><span class="p">[</span><span class="n">y</span><span class="p">,</span><span class="n">x</span><span class="p">,:]</span> <span class="o">=</span> <span class="p">[</span><span class="n">LL</span><span class="p">,</span><span class="n">cu</span><span class="p">,</span><span class="n">hv</span><span class="p">]</span>
</span><span id="Image-618"><a href="#Image-618"><span class="linenos">618</span></a>        <span class="k">elif</span> <span class="n">width</span> <span class="o">==</span> <span class="s1">&#39;h&#39;</span><span class="p">:</span>
</span><span id="Image-619"><a href="#Image-619"><span class="linenos">619</span></a>            <span class="k">if</span> <span class="n">height</span><span class="o">==</span><span class="s1">&#39;L&#39;</span><span class="p">:</span>
</span><span id="Image-620"><a href="#Image-620"><span class="linenos">620</span></a>                <span class="c1">#     +-------------------------------+</span>
</span><span id="Image-621"><a href="#Image-621"><span class="linenos">621</span></a>                <span class="c1">#  L  |                               |</span>
</span><span id="Image-622"><a href="#Image-622"><span class="linenos">622</span></a>                <span class="c1">#     +-------------------------------+</span>
</span><span id="Image-623"><a href="#Image-623"><span class="linenos">623</span></a>                <span class="c1">#                hue</span>
</span><span id="Image-624"><a href="#Image-624"><span class="linenos">624</span></a>                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">xmin</span><span class="p">,</span><span class="n">xmax</span><span class="p">):</span>
</span><span id="Image-625"><a href="#Image-625"><span class="linenos">625</span></a>                    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ymin</span><span class="p">,</span><span class="n">ymax</span><span class="p">):</span>
</span><span id="Image-626"><a href="#Image-626"><span class="linenos">626</span></a>                        <span class="n">u</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="n">x</span><span class="o">/</span><span class="p">(</span><span class="n">xmax</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="n">y</span><span class="o">/</span><span class="p">(</span><span class="n">ymax</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</span><span id="Image-627"><a href="#Image-627"><span class="linenos">627</span></a>                        <span class="k">if</span> <span class="n">hmin</span> <span class="o">&lt;=</span> <span class="n">hmax</span><span class="p">:</span>
</span><span id="Image-628"><a href="#Image-628"><span class="linenos">628</span></a>                            <span class="n">hu</span> <span class="o">=</span> <span class="n">hmin</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">u</span><span class="p">)</span> <span class="o">+</span> <span class="n">hmax</span><span class="o">*</span><span class="n">u</span>
</span><span id="Image-629"><a href="#Image-629"><span class="linenos">629</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="Image-630"><a href="#Image-630"><span class="linenos">630</span></a>                            <span class="c1"># hmin = 340 / hmax=20 -&gt; hmin = hmin-360 &gt;&gt; hmin = -20, hmax =20</span>
</span><span id="Image-631"><a href="#Image-631"><span class="linenos">631</span></a>                            <span class="n">hu</span> <span class="o">=</span> <span class="p">(</span><span class="n">hmin</span><span class="o">-</span><span class="mi">360</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">u</span><span class="p">)</span> <span class="o">+</span> <span class="n">hmax</span><span class="o">*</span><span class="n">u</span>
</span><span id="Image-632"><a href="#Image-632"><span class="linenos">632</span></a>                            <span class="k">if</span> <span class="n">hu</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span> <span class="n">hv</span> <span class="o">=</span> <span class="mi">360</span> <span class="o">+</span><span class="n">hu</span>
</span><span id="Image-633"><a href="#Image-633"><span class="linenos">633</span></a>                        <span class="n">Lv</span> <span class="o">=</span> <span class="n">Lmin</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">v</span><span class="p">)</span><span class="o">+</span><span class="n">Lmax</span><span class="o">*</span><span class="n">v</span>
</span><span id="Image-634"><a href="#Image-634"><span class="linenos">634</span></a>                        <span class="n">cc</span> <span class="o">=</span> <span class="p">(</span><span class="n">cmin</span><span class="o">+</span><span class="n">cmax</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span>
</span><span id="Image-635"><a href="#Image-635"><span class="linenos">635</span></a>                        <span class="n">colorData</span><span class="p">[</span><span class="n">y</span><span class="p">,</span><span class="n">x</span><span class="p">,:]</span> <span class="o">=</span> <span class="p">[</span><span class="n">Lv</span><span class="p">,</span><span class="n">cc</span><span class="p">,</span><span class="n">hu</span><span class="p">]</span>
</span><span id="Image-636"><a href="#Image-636"><span class="linenos">636</span></a>            <span class="k">elif</span> <span class="n">height</span><span class="o">==</span><span class="s1">&#39;c&#39;</span><span class="p">:</span>
</span><span id="Image-637"><a href="#Image-637"><span class="linenos">637</span></a>                <span class="c1">#     +-------------------------------+</span>
</span><span id="Image-638"><a href="#Image-638"><span class="linenos">638</span></a>                <span class="c1">#  c  |                               |</span>
</span><span id="Image-639"><a href="#Image-639"><span class="linenos">639</span></a>                <span class="c1">#     +-------------------------------+</span>
</span><span id="Image-640"><a href="#Image-640"><span class="linenos">640</span></a>                <span class="c1">#                hue</span>
</span><span id="Image-641"><a href="#Image-641"><span class="linenos">641</span></a>                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">xmin</span><span class="p">,</span><span class="n">xmax</span><span class="p">):</span>
</span><span id="Image-642"><a href="#Image-642"><span class="linenos">642</span></a>                    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ymin</span><span class="p">,</span><span class="n">ymax</span><span class="p">):</span>
</span><span id="Image-643"><a href="#Image-643"><span class="linenos">643</span></a>                        <span class="n">u</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="n">x</span><span class="o">/</span><span class="p">(</span><span class="n">xmax</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="n">y</span><span class="o">/</span><span class="p">(</span><span class="n">ymax</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</span><span id="Image-644"><a href="#Image-644"><span class="linenos">644</span></a>                        <span class="k">if</span> <span class="n">hmin</span> <span class="o">&lt;=</span> <span class="n">hmax</span><span class="p">:</span>
</span><span id="Image-645"><a href="#Image-645"><span class="linenos">645</span></a>                            <span class="n">hu</span> <span class="o">=</span> <span class="n">hmin</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">u</span><span class="p">)</span> <span class="o">+</span> <span class="n">hmax</span><span class="o">*</span><span class="n">u</span>
</span><span id="Image-646"><a href="#Image-646"><span class="linenos">646</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="Image-647"><a href="#Image-647"><span class="linenos">647</span></a>                            <span class="c1"># hmin = 340 / hmax=20 -&gt; hmin = hmin-360 &gt;&gt; hmin = -20, hmax =20</span>
</span><span id="Image-648"><a href="#Image-648"><span class="linenos">648</span></a>                            <span class="n">hu</span> <span class="o">=</span> <span class="p">(</span><span class="n">hmin</span><span class="o">-</span><span class="mi">360</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">u</span><span class="p">)</span> <span class="o">+</span> <span class="n">hmax</span><span class="o">*</span><span class="n">u</span>
</span><span id="Image-649"><a href="#Image-649"><span class="linenos">649</span></a>                            <span class="k">if</span> <span class="n">hu</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span> <span class="n">hv</span> <span class="o">=</span> <span class="mi">360</span> <span class="o">+</span><span class="n">hu</span>
</span><span id="Image-650"><a href="#Image-650"><span class="linenos">650</span></a>                        <span class="n">cv</span> <span class="o">=</span> <span class="n">cmin</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">v</span><span class="p">)</span><span class="o">+</span><span class="n">cmax</span><span class="o">*</span><span class="n">v</span>
</span><span id="Image-651"><a href="#Image-651"><span class="linenos">651</span></a>                        <span class="n">LL</span> <span class="o">=</span> <span class="p">(</span><span class="n">Lmin</span><span class="o">+</span><span class="n">Lmax</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span>
</span><span id="Image-652"><a href="#Image-652"><span class="linenos">652</span></a>                        <span class="n">colorData</span><span class="p">[</span><span class="n">y</span><span class="p">,</span><span class="n">x</span><span class="p">,:]</span> <span class="o">=</span> <span class="p">[</span><span class="n">LL</span><span class="p">,</span><span class="n">cv</span><span class="p">,</span><span class="n">hu</span><span class="p">]</span>
</span><span id="Image-653"><a href="#Image-653"><span class="linenos">653</span></a>
</span><span id="Image-654"><a href="#Image-654"><span class="linenos">654</span></a>        <span class="k">return</span> <span class="n">colorData</span>
</span><span id="Image-655"><a href="#Image-655"><span class="linenos">655</span></a>
</span><span id="Image-656"><a href="#Image-656"><span class="linenos">656</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">split</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">widthSegment</span><span class="p">,</span><span class="n">heightSegment</span><span class="p">):</span>
</span><span id="Image-657"><a href="#Image-657"><span class="linenos">657</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Image-658"><a href="#Image-658"><span class="linenos">658</span></a><span class="sd">        Divide the image into a grid of sub-images.</span>
</span><span id="Image-659"><a href="#Image-659"><span class="linenos">659</span></a><span class="sd">        </span>
</span><span id="Image-660"><a href="#Image-660"><span class="linenos">660</span></a><span class="sd">        Splits the current image into widthSegment × heightSegment sub-images,</span>
</span><span id="Image-661"><a href="#Image-661"><span class="linenos">661</span></a><span class="sd">        each maintaining the same properties as the original image.</span>
</span><span id="Image-662"><a href="#Image-662"><span class="linenos">662</span></a>
</span><span id="Image-663"><a href="#Image-663"><span class="linenos">663</span></a><span class="sd">        Args:</span>
</span><span id="Image-664"><a href="#Image-664"><span class="linenos">664</span></a><span class="sd">            widthSegment (int): Number of horizontal segments</span>
</span><span id="Image-665"><a href="#Image-665"><span class="linenos">665</span></a><span class="sd">            heightSegment (int): Number of vertical segments</span>
</span><span id="Image-666"><a href="#Image-666"><span class="linenos">666</span></a>
</span><span id="Image-667"><a href="#Image-667"><span class="linenos">667</span></a><span class="sd">        Returns:</span>
</span><span id="Image-668"><a href="#Image-668"><span class="linenos">668</span></a><span class="sd">            list: 2D list of Image objects representing the sub-images</span>
</span><span id="Image-669"><a href="#Image-669"><span class="linenos">669</span></a><span class="sd">                 Arranged as [row][column] where each element is an Image</span>
</span><span id="Image-670"><a href="#Image-670"><span class="linenos">670</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Image-671"><a href="#Image-671"><span class="linenos">671</span></a>        <span class="n">imageHeight</span><span class="p">,</span><span class="n">imageWidth</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">colorData</span><span class="o">.</span><span class="n">shape</span>
</span><span id="Image-672"><a href="#Image-672"><span class="linenos">672</span></a>        <span class="n">widthLimit</span> <span class="o">=</span> <span class="p">[(</span><span class="n">i</span><span class="o">*</span><span class="p">(</span><span class="n">imageWidth</span><span class="o">//</span><span class="n">widthSegment</span><span class="p">))</span>  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">widthSegment</span><span class="p">)]</span><span class="o">+</span><span class="p">[</span><span class="n">imageWidth</span><span class="p">]</span>
</span><span id="Image-673"><a href="#Image-673"><span class="linenos">673</span></a>        <span class="n">heightLimit</span> <span class="o">=</span> <span class="p">[(</span><span class="n">i</span><span class="o">*</span><span class="p">(</span><span class="n">imageHeight</span><span class="o">//</span><span class="n">heightSegment</span><span class="p">))</span>  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">widthSegment</span><span class="p">)]</span><span class="o">+</span><span class="p">[</span><span class="n">imageHeight</span><span class="p">]</span>
</span><span id="Image-674"><a href="#Image-674"><span class="linenos">674</span></a>
</span><span id="Image-675"><a href="#Image-675"><span class="linenos">675</span></a>        <span class="n">res</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Image-676"><a href="#Image-676"><span class="linenos">676</span></a>
</span><span id="Image-677"><a href="#Image-677"><span class="linenos">677</span></a>        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">heightSegment</span><span class="p">):</span>
</span><span id="Image-678"><a href="#Image-678"><span class="linenos">678</span></a>            <span class="n">lines</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Image-679"><a href="#Image-679"><span class="linenos">679</span></a>            <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">widthSegment</span><span class="p">):</span>
</span><span id="Image-680"><a href="#Image-680"><span class="linenos">680</span></a>                <span class="n">cData</span> <span class="o">=</span>  <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">colorData</span><span class="p">[(</span><span class="n">heightLimit</span><span class="p">[</span><span class="n">line</span><span class="p">]):(</span><span class="n">heightLimit</span><span class="p">[</span><span class="n">line</span><span class="o">+</span><span class="mi">1</span><span class="p">]),(</span><span class="n">widthLimit</span><span class="p">[</span><span class="n">col</span><span class="p">]):(</span><span class="n">widthLimit</span><span class="p">[</span><span class="n">col</span><span class="o">+</span><span class="mi">1</span><span class="p">]),:])</span>
</span><span id="Image-681"><a href="#Image-681"><span class="linenos">681</span></a>                <span class="n">imgTemp</span> <span class="o">=</span> <span class="n">Image</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">),</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">),</span> <span class="n">cData</span><span class="p">,</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">linear</span><span class="p">,</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">colorSpace</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">scalingFactor</span><span class="p">)</span>
</span><span id="Image-682"><a href="#Image-682"><span class="linenos">682</span></a>                <span class="n">imgTemp</span><span class="o">.</span><span class="n">metadata</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">)</span>
</span><span id="Image-683"><a href="#Image-683"><span class="linenos">683</span></a>                <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">imgTemp</span><span class="p">)</span>
</span><span id="Image-684"><a href="#Image-684"><span class="linenos">684</span></a>            <span class="n">res</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>
</span><span id="Image-685"><a href="#Image-685"><span class="linenos">685</span></a>
</span><span id="Image-686"><a href="#Image-686"><span class="linenos">686</span></a>        <span class="k">return</span> <span class="n">res</span>
</span><span id="Image-687"><a href="#Image-687"><span class="linenos">687</span></a>
</span><span id="Image-688"><a href="#Image-688"><span class="linenos">688</span></a>    <span class="nd">@staticmethod</span>
</span><span id="Image-689"><a href="#Image-689"><span class="linenos">689</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">merge</span><span class="p">(</span><span class="n">imgList</span><span class="p">):</span>
</span><span id="Image-690"><a href="#Image-690"><span class="linenos">690</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Image-691"><a href="#Image-691"><span class="linenos">691</span></a><span class="sd">        Combine a 2D list of images into a single merged image.</span>
</span><span id="Image-692"><a href="#Image-692"><span class="linenos">692</span></a><span class="sd">        </span>
</span><span id="Image-693"><a href="#Image-693"><span class="linenos">693</span></a><span class="sd">        Reconstructs a complete image from sub-images that were previously split,</span>
</span><span id="Image-694"><a href="#Image-694"><span class="linenos">694</span></a><span class="sd">        assuming all sub-images have compatible dimensions and properties.</span>
</span><span id="Image-695"><a href="#Image-695"><span class="linenos">695</span></a>
</span><span id="Image-696"><a href="#Image-696"><span class="linenos">696</span></a><span class="sd">        Args:</span>
</span><span id="Image-697"><a href="#Image-697"><span class="linenos">697</span></a><span class="sd">            imgList (list): 2D list of Image objects to merge</span>
</span><span id="Image-698"><a href="#Image-698"><span class="linenos">698</span></a>
</span><span id="Image-699"><a href="#Image-699"><span class="linenos">699</span></a><span class="sd">        Returns:</span>
</span><span id="Image-700"><a href="#Image-700"><span class="linenos">700</span></a><span class="sd">            Image: Single merged image with combined pixel data</span>
</span><span id="Image-701"><a href="#Image-701"><span class="linenos">701</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Image-702"><a href="#Image-702"><span class="linenos">702</span></a>        <span class="n">totalWidth</span><span class="o">=</span> <span class="n">functools</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">:</span> <span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">,</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">img</span><span class="p">:</span> <span class="n">img</span><span class="o">.</span><span class="n">colorData</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">imgList</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span><span class="mi">0</span><span class="p">)</span>
</span><span id="Image-703"><a href="#Image-703"><span class="linenos">703</span></a>        <span class="n">totalHeight</span><span class="o">=</span> <span class="n">functools</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">:</span> <span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">,</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">imgList</span><span class="p">:</span> <span class="n">imgList</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">imgList</span><span class="p">),</span><span class="mi">0</span><span class="p">)</span>
</span><span id="Image-704"><a href="#Image-704"><span class="linenos">704</span></a>
</span><span id="Image-705"><a href="#Image-705"><span class="linenos">705</span></a>        <span class="n">cData</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">totalHeight</span><span class="p">,</span><span class="n">totalWidth</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
</span><span id="Image-706"><a href="#Image-706"><span class="linenos">706</span></a>
</span><span id="Image-707"><a href="#Image-707"><span class="linenos">707</span></a>        <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="Image-708"><a href="#Image-708"><span class="linenos">708</span></a>        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">imgList</span><span class="p">:</span>
</span><span id="Image-709"><a href="#Image-709"><span class="linenos">709</span></a>            <span class="n">x</span><span class="o">=</span><span class="mi">0</span>
</span><span id="Image-710"><a href="#Image-710"><span class="linenos">710</span></a>            <span class="k">for</span> <span class="n">img</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
</span><span id="Image-711"><a href="#Image-711"><span class="linenos">711</span></a>                <span class="n">cData</span><span class="p">[</span><span class="n">y</span><span class="p">:(</span><span class="n">y</span><span class="o">+</span><span class="n">img</span><span class="o">.</span><span class="n">colorData</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span><span class="n">x</span><span class="p">:(</span><span class="n">x</span><span class="o">+</span><span class="n">img</span><span class="o">.</span><span class="n">colorData</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]),:]</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">colorData</span>
</span><span id="Image-712"><a href="#Image-712"><span class="linenos">712</span></a>                <span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="o">+</span><span class="n">img</span><span class="o">.</span><span class="n">colorData</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="Image-713"><a href="#Image-713"><span class="linenos">713</span></a>            <span class="n">y</span> <span class="o">=</span> <span class="n">y</span> <span class="o">+</span> <span class="n">line</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">colorData</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="Image-714"><a href="#Image-714"><span class="linenos">714</span></a>        <span class="k">return</span> <span class="n">Image</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">imgList</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">path</span><span class="p">),</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">imgList</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="p">),</span> <span class="n">cData</span><span class="p">,</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">imgList</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">type</span><span class="p">),</span> <span class="n">imgList</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">linear</span><span class="p">,</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">imgList</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">colorSpace</span><span class="p">),</span> <span class="n">imgList</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">scalingFactor</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Core HDR image data structure with comprehensive processing capabilities.</p>

<p>This class represents the fundamental image object in the uHDR system, containing
pixel data, metadata, and all necessary information for HDR image processing.
It supports various image formats, color spaces, and provides methods for
image manipulation, analysis, and processing pipeline integration.</p>

<p>Attributes:
    path (str): Directory path to the image file
    name (str): Image filename with extension
    colorData (numpy.ndarray): Image pixel data as 3D array (height, width, channels)
    shape (tuple): Image dimensions (height, width, channels)
    type (imageType): Image type classification (SDR, ARW, HDR)
    linear (bool): Whether image data is in linear color space
    colorSpace (colour.models.RGB_COLOURSPACES): Current color space definition
    scalingFactor (float): Scaling factor for normalizing to [0,1] range
    metadata (<a href="metadata.html#metadata">hdrCore.metadata.metadata</a>): Associated metadata object
    histogram (Histogram): Image histogram data</p>

<p>Methods:
    isHDR: Check if image is HDR type
    process: Apply processing operations
    write: Save image and metadata to disk
    getChannel: Extract specific color channel
    getDynamicRange: Calculate image dynamic range
    buildHistogram: Generate image histogram
    plot: Display image with optional tone mapping
    split: Divide image into sub-images</p>

<p>Static Methods:
    read: Load image from file with format detection
    merge: Combine sub-images into single image
    buildLchColorData: Generate synthetic LCH color data</p>
</div>


                            <div id="Image.__init__" class="classattr">
                                        <input id="Image.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">Image</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">path</span>, </span><span class="param"><span class="n">name</span>, </span><span class="param"><span class="n">colorData</span>, </span><span class="param"><span class="nb">type</span>, </span><span class="param"><span class="n">linear</span>, </span><span class="param"><span class="n">colorspace</span>, </span><span class="param"><span class="n">scalingFactor</span><span class="o">=</span><span class="mf">1.0</span></span>)</span>

                <label class="view-source-button" for="Image.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Image.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Image.__init__-204"><a href="#Image.__init__-204"><span class="linenos">204</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">colorData</span><span class="p">,</span> <span class="nb">type</span><span class="p">,</span> <span class="n">linear</span><span class="p">,</span> <span class="n">colorspace</span><span class="p">,</span> <span class="n">scalingFactor</span><span class="o">=</span><span class="mf">1.0</span><span class="p">):</span>
</span><span id="Image.__init__-205"><a href="#Image.__init__-205"><span class="linenos">205</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Image.__init__-206"><a href="#Image.__init__-206"><span class="linenos">206</span></a><span class="sd">        Initialize a new Image object with specified parameters.</span>
</span><span id="Image.__init__-207"><a href="#Image.__init__-207"><span class="linenos">207</span></a><span class="sd">            </span>
</span><span id="Image.__init__-208"><a href="#Image.__init__-208"><span class="linenos">208</span></a><span class="sd">        Args:</span>
</span><span id="Image.__init__-209"><a href="#Image.__init__-209"><span class="linenos">209</span></a><span class="sd">            path (str): Directory path to the image file</span>
</span><span id="Image.__init__-210"><a href="#Image.__init__-210"><span class="linenos">210</span></a><span class="sd">            name (str): Image filename with extension</span>
</span><span id="Image.__init__-211"><a href="#Image.__init__-211"><span class="linenos">211</span></a><span class="sd">            colorData (numpy.ndarray): Pixel data array with shape (height, width, channels)</span>
</span><span id="Image.__init__-212"><a href="#Image.__init__-212"><span class="linenos">212</span></a><span class="sd">            type (imageType): Image type classification</span>
</span><span id="Image.__init__-213"><a href="#Image.__init__-213"><span class="linenos">213</span></a><span class="sd">            linear (bool): True if image data is in linear color space</span>
</span><span id="Image.__init__-214"><a href="#Image.__init__-214"><span class="linenos">214</span></a><span class="sd">            colorspace (colour.models.RGB_COLOURSPACES): Color space definition</span>
</span><span id="Image.__init__-215"><a href="#Image.__init__-215"><span class="linenos">215</span></a><span class="sd">            scalingFactor (float, optional): Scaling factor for [0,1] normalization (default: 1.0)</span>
</span><span id="Image.__init__-216"><a href="#Image.__init__-216"><span class="linenos">216</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Image.__init__-217"><a href="#Image.__init__-217"><span class="linenos">217</span></a>
</span><span id="Image.__init__-218"><a href="#Image.__init__-218"><span class="linenos">218</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">path</span>           <span class="o">=</span> <span class="n">path</span>                          <span class="c1"># path to file          (str)</span>
</span><span id="Image.__init__-219"><a href="#Image.__init__-219"><span class="linenos">219</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">name</span>           <span class="o">=</span> <span class="n">name</span>                          <span class="c1"># filename              (str)</span>
</span><span id="Image.__init__-220"><a href="#Image.__init__-220"><span class="linenos">220</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">colorData</span>      <span class="o">=</span> <span class="n">colorData</span>                     <span class="c1"># float color data      (numpy.ndarray)</span>
</span><span id="Image.__init__-221"><a href="#Image.__init__-221"><span class="linenos">221</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">shape</span>          <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">colorData</span><span class="o">.</span><span class="n">shape</span>          <span class="c1"># image size height,width, color channel number (tuple)</span>
</span><span id="Image.__init__-222"><a href="#Image.__init__-222"><span class="linenos">222</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">type</span>           <span class="o">=</span> <span class="nb">type</span>                          <span class="c1"># image type            (hdrCore.image.imageType)</span>
</span><span id="Image.__init__-223"><a href="#Image.__init__-223"><span class="linenos">223</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">linear</span>         <span class="o">=</span> <span class="n">linear</span>                        <span class="c1"># image in RGB linear   (bool)</span>
</span><span id="Image.__init__-224"><a href="#Image.__init__-224"><span class="linenos">224</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">colorSpace</span>     <span class="o">=</span> <span class="n">colorspace</span>                    <span class="c1"># colorSpace            (colour.models.RGB_COLOURSPACES)</span>
</span><span id="Image.__init__-225"><a href="#Image.__init__-225"><span class="linenos">225</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">scalingFactor</span>  <span class="o">=</span> <span class="n">scalingFactor</span>                 <span class="c1"># scaling to factor to range [0,1] (float)</span>
</span><span id="Image.__init__-226"><a href="#Image.__init__-226"><span class="linenos">226</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span>       <span class="o">=</span> <span class="kc">None</span>                          <span class="c1"># associated meta data  (hdrCore.metadata.metadata)   </span>
</span><span id="Image.__init__-227"><a href="#Image.__init__-227"><span class="linenos">227</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">histogram</span>      <span class="o">=</span> <span class="kc">None</span>                          <span class="c1"># histogram             (hdrCore.image.Histogram)</span>
</span></pre></div>


            <div class="docstring"><p>Initialize a new Image object with specified parameters.</p>

<p>Args:
    path (str): Directory path to the image file
    name (str): Image filename with extension
    colorData (numpy.ndarray): Pixel data array with shape (height, width, channels)
    type (imageType): Image type classification
    linear (bool): True if image data is in linear color space
    colorspace (colour.models.RGB_COLOURSPACES): Color space definition
    scalingFactor (float, optional): Scaling factor for [0,1] normalization (default: 1.0)</p>
</div>


                            </div>
                            <div id="Image.path" class="classattr">
                                <div class="attr variable">
            <span class="name">path</span>

        
    </div>
    <a class="headerlink" href="#Image.path"></a>
    
    

                            </div>
                            <div id="Image.name" class="classattr">
                                <div class="attr variable">
            <span class="name">name</span>

        
    </div>
    <a class="headerlink" href="#Image.name"></a>
    
    

                            </div>
                            <div id="Image.colorData" class="classattr">
                                <div class="attr variable">
            <span class="name">colorData</span>

        
    </div>
    <a class="headerlink" href="#Image.colorData"></a>
    
    

                            </div>
                            <div id="Image.shape" class="classattr">
                                <div class="attr variable">
            <span class="name">shape</span>

        
    </div>
    <a class="headerlink" href="#Image.shape"></a>
    
    

                            </div>
                            <div id="Image.type" class="classattr">
                                <div class="attr variable">
            <span class="name">type</span>

        
    </div>
    <a class="headerlink" href="#Image.type"></a>
    
    

                            </div>
                            <div id="Image.linear" class="classattr">
                                <div class="attr variable">
            <span class="name">linear</span>

        
    </div>
    <a class="headerlink" href="#Image.linear"></a>
    
    

                            </div>
                            <div id="Image.colorSpace" class="classattr">
                                <div class="attr variable">
            <span class="name">colorSpace</span>

        
    </div>
    <a class="headerlink" href="#Image.colorSpace"></a>
    
    

                            </div>
                            <div id="Image.scalingFactor" class="classattr">
                                <div class="attr variable">
            <span class="name">scalingFactor</span>

        
    </div>
    <a class="headerlink" href="#Image.scalingFactor"></a>
    
    

                            </div>
                            <div id="Image.metadata" class="classattr">
                                <div class="attr variable">
            <span class="name">metadata</span>

        
    </div>
    <a class="headerlink" href="#Image.metadata"></a>
    
    

                            </div>
                            <div id="Image.histogram" class="classattr">
                                <div class="attr variable">
            <span class="name">histogram</span>

        
    </div>
    <a class="headerlink" href="#Image.histogram"></a>
    
    

                            </div>
                            <div id="Image.isHDR" class="classattr">
                                        <input id="Image.isHDR-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">isHDR</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Image.isHDR-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Image.isHDR"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Image.isHDR-229"><a href="#Image.isHDR-229"><span class="linenos">229</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">isHDR</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Image.isHDR-230"><a href="#Image.isHDR-230"><span class="linenos">230</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Image.isHDR-231"><a href="#Image.isHDR-231"><span class="linenos">231</span></a><span class="sd">        Check if the image is of HDR type.</span>
</span><span id="Image.isHDR-232"><a href="#Image.isHDR-232"><span class="linenos">232</span></a><span class="sd">        </span>
</span><span id="Image.isHDR-233"><a href="#Image.isHDR-233"><span class="linenos">233</span></a><span class="sd">        Returns:</span>
</span><span id="Image.isHDR-234"><a href="#Image.isHDR-234"><span class="linenos">234</span></a><span class="sd">            bool: True if the image is HDR, False otherwise</span>
</span><span id="Image.isHDR-235"><a href="#Image.isHDR-235"><span class="linenos">235</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Image.isHDR-236"><a href="#Image.isHDR-236"><span class="linenos">236</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">imageType</span><span class="o">.</span><span class="n">HDR</span>
</span></pre></div>


            <div class="docstring"><p>Check if the image is of HDR type.</p>

<p>Returns:
    bool: True if the image is HDR, False otherwise</p>
</div>


                            </div>
                            <div id="Image.process" class="classattr">
                                        <input id="Image.process-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">process</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">process</span>, </span><span class="param"><span class="o">**</span><span class="n">kwargs</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Image.process-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Image.process"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Image.process-238"><a href="#Image.process-238"><span class="linenos">238</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">process</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">process</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span id="Image.process-239"><a href="#Image.process-239"><span class="linenos">239</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Image.process-240"><a href="#Image.process-240"><span class="linenos">240</span></a><span class="sd">        Apply a processing operation to the image.</span>
</span><span id="Image.process-241"><a href="#Image.process-241"><span class="linenos">241</span></a><span class="sd">        </span>
</span><span id="Image.process-242"><a href="#Image.process-242"><span class="linenos">242</span></a><span class="sd">        This method applies a Processing object to the current image and returns</span>
</span><span id="Image.process-243"><a href="#Image.process-243"><span class="linenos">243</span></a><span class="sd">        a new processed image. The processing operation is defined by the process</span>
</span><span id="Image.process-244"><a href="#Image.process-244"><span class="linenos">244</span></a><span class="sd">        parameter and its compute method.</span>
</span><span id="Image.process-245"><a href="#Image.process-245"><span class="linenos">245</span></a><span class="sd">        </span>
</span><span id="Image.process-246"><a href="#Image.process-246"><span class="linenos">246</span></a><span class="sd">        Args:</span>
</span><span id="Image.process-247"><a href="#Image.process-247"><span class="linenos">247</span></a><span class="sd">            process (Processing): Processing object with compute method</span>
</span><span id="Image.process-248"><a href="#Image.process-248"><span class="linenos">248</span></a><span class="sd">            **kwargs: Additional parameters passed to the processing operation</span>
</span><span id="Image.process-249"><a href="#Image.process-249"><span class="linenos">249</span></a><span class="sd">                </span>
</span><span id="Image.process-250"><a href="#Image.process-250"><span class="linenos">250</span></a><span class="sd">        Returns:</span>
</span><span id="Image.process-251"><a href="#Image.process-251"><span class="linenos">251</span></a><span class="sd">            Image: New image object with processing applied</span>
</span><span id="Image.process-252"><a href="#Image.process-252"><span class="linenos">252</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Image.process-253"><a href="#Image.process-253"><span class="linenos">253</span></a>        <span class="k">return</span> <span class="n">process</span><span class="o">.</span><span class="n">compute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Apply a processing operation to the image.</p>

<p>This method applies a Processing object to the current image and returns
a new processed image. The processing operation is defined by the process
parameter and its compute method.</p>

<p>Args:
    process (Processing): Processing object with compute method
    **kwargs: Additional parameters passed to the processing operation</p>

<p>Returns:
    Image: New image object with processing applied</p>
</div>


                            </div>
                            <div id="Image.read" class="classattr">
                                        <input id="Image.read-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-staticmethod">@staticmethod</div>

        <span class="def">def</span>
        <span class="name">read</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">filename</span>, </span><span class="param"><span class="n">thumb</span><span class="o">=</span><span class="kc">False</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Image.read-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Image.read"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Image.read-255"><a href="#Image.read-255"><span class="linenos">255</span></a>    <span class="nd">@staticmethod</span>
</span><span id="Image.read-256"><a href="#Image.read-256"><span class="linenos">256</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">read</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">thumb</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
</span><span id="Image.read-257"><a href="#Image.read-257"><span class="linenos">257</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Image.read-258"><a href="#Image.read-258"><span class="linenos">258</span></a><span class="sd">        Load an image from file with automatic format detection.</span>
</span><span id="Image.read-259"><a href="#Image.read-259"><span class="linenos">259</span></a><span class="sd">        </span>
</span><span id="Image.read-260"><a href="#Image.read-260"><span class="linenos">260</span></a><span class="sd">        This method provides comprehensive image loading with support for various</span>
</span><span id="Image.read-261"><a href="#Image.read-261"><span class="linenos">261</span></a><span class="sd">        formats including HDR (.hdr), RAW (.arw), and standard formats (.jpg).</span>
</span><span id="Image.read-262"><a href="#Image.read-262"><span class="linenos">262</span></a><span class="sd">        It handles thumbnail generation, metadata extraction, and color space</span>
</span><span id="Image.read-263"><a href="#Image.read-263"><span class="linenos">263</span></a><span class="sd">        configuration automatically.</span>
</span><span id="Image.read-264"><a href="#Image.read-264"><span class="linenos">264</span></a><span class="sd">        </span>
</span><span id="Image.read-265"><a href="#Image.read-265"><span class="linenos">265</span></a><span class="sd">        Args:</span>
</span><span id="Image.read-266"><a href="#Image.read-266"><span class="linenos">266</span></a><span class="sd">            filename (str): Complete path to the image file</span>
</span><span id="Image.read-267"><a href="#Image.read-267"><span class="linenos">267</span></a><span class="sd">            thumb (bool, optional): Whether to load/create thumbnail version (default: False)</span>
</span><span id="Image.read-268"><a href="#Image.read-268"><span class="linenos">268</span></a><span class="sd">                </span>
</span><span id="Image.read-269"><a href="#Image.read-269"><span class="linenos">269</span></a><span class="sd">        Returns:</span>
</span><span id="Image.read-270"><a href="#Image.read-270"><span class="linenos">270</span></a><span class="sd">            Image: Loaded image object with metadata and proper color space configuration</span>
</span><span id="Image.read-271"><a href="#Image.read-271"><span class="linenos">271</span></a><span class="sd">            </span>
</span><span id="Image.read-272"><a href="#Image.read-272"><span class="linenos">272</span></a><span class="sd">        Note:</span>
</span><span id="Image.read-273"><a href="#Image.read-273"><span class="linenos">273</span></a><span class="sd">            - For HDR images: Creates thumbnails in ./thumbnails/ directory when requested</span>
</span><span id="Image.read-274"><a href="#Image.read-274"><span class="linenos">274</span></a><span class="sd">            - For RAW images: Uses rawpy with sRGB output and camera white balance</span>
</span><span id="Image.read-275"><a href="#Image.read-275"><span class="linenos">275</span></a><span class="sd">            - Automatically loads existing metadata from .json files if available</span>
</span><span id="Image.read-276"><a href="#Image.read-276"><span class="linenos">276</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Image.read-277"><a href="#Image.read-277"><span class="linenos">277</span></a>
</span><span id="Image.read-278"><a href="#Image.read-278"><span class="linenos">278</span></a>        <span class="n">imgDouble</span><span class="p">,</span> <span class="n">imgDoubleFull</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
</span><span id="Image.read-279"><a href="#Image.read-279"><span class="linenos">279</span></a>        <span class="c1"># image name</span>
</span><span id="Image.read-280"><a href="#Image.read-280"><span class="linenos">280</span></a>        <span class="n">path</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">ext</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">filenamesplit</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
</span><span id="Image.read-281"><a href="#Image.read-281"><span class="linenos">281</span></a>
</span><span id="Image.read-282"><a href="#Image.read-282"><span class="linenos">282</span></a>        <span class="c1"># load raw file using rawpy</span>
</span><span id="Image.read-283"><a href="#Image.read-283"><span class="linenos">283</span></a>        <span class="k">if</span> <span class="n">ext</span><span class="o">==</span><span class="s2">&quot;arw&quot;</span><span class="p">:</span>
</span><span id="Image.read-284"><a href="#Image.read-284"><span class="linenos">284</span></a>            <span class="n">outBit</span> <span class="o">=</span> <span class="mi">16</span>
</span><span id="Image.read-285"><a href="#Image.read-285"><span class="linenos">285</span></a>            <span class="n">raw</span> <span class="o">=</span> <span class="n">rawpy</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
</span><span id="Image.read-286"><a href="#Image.read-286"><span class="linenos">286</span></a>            <span class="n">ppParams</span> <span class="o">=</span> <span class="n">rawpy</span><span class="o">.</span><span class="n">Params</span><span class="p">(</span><span class="n">demosaic_algorithm</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">half_size</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> 
</span><span id="Image.read-287"><a href="#Image.read-287"><span class="linenos">287</span></a>                                            <span class="n">four_color_rgb</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">dcb_iterations</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> 
</span><span id="Image.read-288"><a href="#Image.read-288"><span class="linenos">288</span></a>                                            <span class="n">dcb_enhance</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">fbdd_noise_reduction</span><span class="o">=</span><span class="n">rawpy</span><span class="o">.</span><span class="n">FBDDNoiseReductionMode</span><span class="o">.</span><span class="n">Off</span><span class="p">,</span> 
</span><span id="Image.read-289"><a href="#Image.read-289"><span class="linenos">289</span></a>                                            <span class="n">noise_thr</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">median_filter_passes</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> 
</span><span id="Image.read-290"><a href="#Image.read-290"><span class="linenos">290</span></a>                                            <span class="n">use_camera_wb</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>                                 <span class="c1"># default False</span>
</span><span id="Image.read-291"><a href="#Image.read-291"><span class="linenos">291</span></a>                                            <span class="n">use_auto_wb</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> 
</span><span id="Image.read-292"><a href="#Image.read-292"><span class="linenos">292</span></a>                                            <span class="n">user_wb</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
</span><span id="Image.read-293"><a href="#Image.read-293"><span class="linenos">293</span></a>                                            <span class="n">output_color</span><span class="o">=</span><span class="n">rawpy</span><span class="o">.</span><span class="n">ColorSpace</span><span class="o">.</span><span class="n">sRGB</span><span class="p">,</span>                 <span class="c1"># output in SRGB</span>
</span><span id="Image.read-294"><a href="#Image.read-294"><span class="linenos">294</span></a>                                            <span class="n">output_bps</span><span class="o">=</span><span class="n">outBit</span><span class="p">,</span>                                  <span class="c1"># default 8</span>
</span><span id="Image.read-295"><a href="#Image.read-295"><span class="linenos">295</span></a>                                            <span class="n">user_flip</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">user_black</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> 
</span><span id="Image.read-296"><a href="#Image.read-296"><span class="linenos">296</span></a>                                            <span class="n">user_sat</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">no_auto_bright</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> 
</span><span id="Image.read-297"><a href="#Image.read-297"><span class="linenos">297</span></a>                                            <span class="n">auto_bright_thr</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">adjust_maximum_thr</span><span class="o">=</span><span class="mf">0.75</span><span class="p">,</span> 
</span><span id="Image.read-298"><a href="#Image.read-298"><span class="linenos">298</span></a>                                            <span class="n">bright</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">highlight_mode</span><span class="o">=</span><span class="n">rawpy</span><span class="o">.</span><span class="n">HighlightMode</span><span class="o">.</span><span class="n">Clip</span><span class="p">,</span> 
</span><span id="Image.read-299"><a href="#Image.read-299"><span class="linenos">299</span></a>                                            <span class="n">exp_shift</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">exp_preserve_highlights</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span> 
</span><span id="Image.read-300"><a href="#Image.read-300"><span class="linenos">300</span></a>                                            <span class="n">no_auto_scale</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
</span><span id="Image.read-301"><a href="#Image.read-301"><span class="linenos">301</span></a>                                            <span class="n">gamma</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>                                         <span class="c1"># linear output</span>
</span><span id="Image.read-302"><a href="#Image.read-302"><span class="linenos">302</span></a>                                            <span class="n">chromatic_aberration</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">bad_pixels_path</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</span><span id="Image.read-303"><a href="#Image.read-303"><span class="linenos">303</span></a>            <span class="n">imgDouble</span> <span class="o">=</span> <span class="n">colour</span><span class="o">.</span><span class="n">utilities</span><span class="o">.</span><span class="n">as_float_array</span><span class="p">(</span><span class="n">raw</span><span class="o">.</span><span class="n">postprocess</span><span class="p">(</span><span class="n">ppParams</span><span class="p">))</span><span class="o">/</span><span class="p">(</span><span class="nb">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">16</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</span><span id="Image.read-304"><a href="#Image.read-304"><span class="linenos">304</span></a>            <span class="n">raw</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span><span id="Image.read-305"><a href="#Image.read-305"><span class="linenos">305</span></a>            <span class="n">scalingFactor</span><span class="p">,</span> <span class="nb">type</span><span class="p">,</span> <span class="n">linear</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span> <span class="n">imageType</span><span class="o">.</span><span class="n">ARW</span><span class="p">,</span> <span class="kc">True</span>
</span><span id="Image.read-306"><a href="#Image.read-306"><span class="linenos">306</span></a>
</span><span id="Image.read-307"><a href="#Image.read-307"><span class="linenos">307</span></a>        <span class="c1"># load jpg, tiff, hdr file using colour</span>
</span><span id="Image.read-308"><a href="#Image.read-308"><span class="linenos">308</span></a>        <span class="k">elif</span> <span class="n">ext</span><span class="o">==</span><span class="s2">&quot;jpg&quot;</span><span class="p">:</span>
</span><span id="Image.read-309"><a href="#Image.read-309"><span class="linenos">309</span></a>            <span class="n">imgDouble</span> <span class="o">=</span> <span class="n">colour</span><span class="o">.</span><span class="n">read_image</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">bit_depth</span><span class="o">=</span><span class="s1">&#39;float32&#39;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;Imageio&#39;</span><span class="p">)</span>
</span><span id="Image.read-310"><a href="#Image.read-310"><span class="linenos">310</span></a>            <span class="n">scalingFactor</span><span class="p">,</span> <span class="nb">type</span><span class="p">,</span> <span class="n">linear</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span> <span class="n">imageType</span><span class="o">.</span><span class="n">SDR</span><span class="p">,</span> <span class="kc">False</span>
</span><span id="Image.read-311"><a href="#Image.read-311"><span class="linenos">311</span></a>
</span><span id="Image.read-312"><a href="#Image.read-312"><span class="linenos">312</span></a>        <span class="c1"># post processing for HDR scaling to [ ,1]</span>
</span><span id="Image.read-313"><a href="#Image.read-313"><span class="linenos">313</span></a>        <span class="k">elif</span> <span class="n">ext</span> <span class="o">==</span><span class="s2">&quot;hdr&quot;</span><span class="p">:</span>
</span><span id="Image.read-314"><a href="#Image.read-314"><span class="linenos">314</span></a>            <span class="k">if</span> <span class="n">thumb</span><span class="p">:</span> 
</span><span id="Image.read-315"><a href="#Image.read-315"><span class="linenos">315</span></a>                <span class="c1"># do not read input only the thumbnail</span>
</span><span id="Image.read-316"><a href="#Image.read-316"><span class="linenos">316</span></a>                <span class="n">searchStr</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="s2">&quot;thumbnails&quot;</span><span class="p">,</span><span class="s2">&quot;_&quot;</span><span class="o">+</span><span class="n">name</span><span class="o">+</span><span class="s2">&quot;.&quot;</span><span class="o">+</span><span class="n">ext</span><span class="p">)</span>
</span><span id="Image.read-317"><a href="#Image.read-317"><span class="linenos">317</span></a>                <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">searchStr</span><span class="p">):</span> 
</span><span id="Image.read-318"><a href="#Image.read-318"><span class="linenos">318</span></a>                    <span class="n">imgDouble</span> <span class="o">=</span> <span class="n">colour</span><span class="o">.</span><span class="n">read_image</span><span class="p">(</span><span class="n">searchStr</span><span class="p">,</span> <span class="n">bit_depth</span><span class="o">=</span><span class="s1">&#39;float32&#39;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;Imageio&#39;</span><span class="p">)</span> <span class="c1"># &lt;--- read thumbnail of input file</span>
</span><span id="Image.read-319"><a href="#Image.read-319"><span class="linenos">319</span></a>
</span><span id="Image.read-320"><a href="#Image.read-320"><span class="linenos">320</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="Image.read-321"><a href="#Image.read-321"><span class="linenos">321</span></a>                    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="s2">&quot;thumbnails&quot;</span><span class="p">)):</span> <span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="s2">&quot;thumbnails&quot;</span><span class="p">))</span>
</span><span id="Image.read-322"><a href="#Image.read-322"><span class="linenos">322</span></a>
</span><span id="Image.read-323"><a href="#Image.read-323"><span class="linenos">323</span></a>                    <span class="c1"># read image and create thumbnail</span>
</span><span id="Image.read-324"><a href="#Image.read-324"><span class="linenos">324</span></a>                    <span class="n">imgDouble</span> <span class="o">=</span> <span class="n">colour</span><span class="o">.</span><span class="n">read_image</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">bit_depth</span><span class="o">=</span><span class="s1">&#39;float32&#39;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;Imageio&#39;</span><span class="p">)</span> <span class="c1"># &lt;--- read input file</span>
</span><span id="Image.read-325"><a href="#Image.read-325"><span class="linenos">325</span></a>
</span><span id="Image.read-326"><a href="#Image.read-326"><span class="linenos">326</span></a>                    <span class="c1"># resize to thumbnail size</span>
</span><span id="Image.read-327"><a href="#Image.read-327"><span class="linenos">327</span></a>                    <span class="n">iY</span><span class="p">,</span> <span class="n">iX</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">imgDouble</span><span class="o">.</span><span class="n">shape</span>
</span><span id="Image.read-328"><a href="#Image.read-328"><span class="linenos">328</span></a>                    <span class="n">maxX</span> <span class="o">=</span> <span class="n">processing</span><span class="o">.</span><span class="n">ProcessPipe</span><span class="o">.</span><span class="n">maxSize</span>
</span><span id="Image.read-329"><a href="#Image.read-329"><span class="linenos">329</span></a>                    <span class="n">factor</span> <span class="o">=</span> <span class="n">maxX</span><span class="o">/</span><span class="n">iX</span>
</span><span id="Image.read-330"><a href="#Image.read-330"><span class="linenos">330</span></a>                    <span class="n">imgDoubleFull</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">imgDouble</span><span class="p">)</span>
</span><span id="Image.read-331"><a href="#Image.read-331"><span class="linenos">331</span></a>                    <span class="n">imgThumbnail</span> <span class="o">=</span>  <span class="n">skimage</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="n">imgDouble</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">iY</span> <span class="o">*</span> <span class="n">factor</span><span class="p">),</span><span class="n">maxX</span> <span class="p">))</span>
</span><span id="Image.read-332"><a href="#Image.read-332"><span class="linenos">332</span></a>                    <span class="c1"># save thumbnail</span>
</span><span id="Image.read-333"><a href="#Image.read-333"><span class="linenos">333</span></a>                    <span class="n">colour</span><span class="o">.</span><span class="n">write_image</span><span class="p">(</span><span class="n">imgThumbnail</span><span class="p">,</span><span class="n">searchStr</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;Imageio&#39;</span><span class="p">)</span>
</span><span id="Image.read-334"><a href="#Image.read-334"><span class="linenos">334</span></a>
</span><span id="Image.read-335"><a href="#Image.read-335"><span class="linenos">335</span></a>                    <span class="n">imgDouble</span> <span class="o">=</span> <span class="n">imgThumbnail</span>
</span><span id="Image.read-336"><a href="#Image.read-336"><span class="linenos">336</span></a>
</span><span id="Image.read-337"><a href="#Image.read-337"><span class="linenos">337</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="Image.read-338"><a href="#Image.read-338"><span class="linenos">338</span></a>                <span class="c1"># thumb set to False, read input not the thumbnail</span>
</span><span id="Image.read-339"><a href="#Image.read-339"><span class="linenos">339</span></a>                <span class="n">imgDouble</span> <span class="o">=</span> <span class="n">colour</span><span class="o">.</span><span class="n">read_image</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">bit_depth</span><span class="o">=</span><span class="s1">&#39;float32&#39;</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;Imageio&#39;</span><span class="p">)</span>
</span><span id="Image.read-340"><a href="#Image.read-340"><span class="linenos">340</span></a>
</span><span id="Image.read-341"><a href="#Image.read-341"><span class="linenos">341</span></a>            <span class="nb">type</span> <span class="o">=</span> <span class="n">imageType</span><span class="o">.</span><span class="n">HDR</span>
</span><span id="Image.read-342"><a href="#Image.read-342"><span class="linenos">342</span></a>            <span class="n">linear</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="Image.read-343"><a href="#Image.read-343"><span class="linenos">343</span></a>            <span class="n">scalingFactor</span> <span class="o">=</span> <span class="mf">1.0</span>
</span><span id="Image.read-344"><a href="#Image.read-344"><span class="linenos">344</span></a>
</span><span id="Image.read-345"><a href="#Image.read-345"><span class="linenos">345</span></a>        <span class="c1"># create image object</span>
</span><span id="Image.read-346"><a href="#Image.read-346"><span class="linenos">346</span></a>        <span class="n">res</span> <span class="o">=</span>  <span class="n">Image</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">name</span><span class="o">+</span><span class="s1">&#39;.&#39;</span><span class="o">+</span><span class="n">ext</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">(</span><span class="n">imgDouble</span><span class="p">),</span><span class="nb">type</span><span class="p">,</span> <span class="n">linear</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">scalingFactor</span><span class="p">)</span>           <span class="c1"># colorspace = None will be set in metadata.metadata.build(res)</span>
</span><span id="Image.read-347"><a href="#Image.read-347"><span class="linenos">347</span></a>        <span class="n">res</span><span class="o">.</span><span class="n">metadata</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>                                                         <span class="c1"># build metadata (read if json file exists, else recover from exif data)</span>
</span><span id="Image.read-348"><a href="#Image.read-348"><span class="linenos">348</span></a>
</span><span id="Image.read-349"><a href="#Image.read-349"><span class="linenos">349</span></a>        <span class="c1"># update path</span>
</span><span id="Image.read-350"><a href="#Image.read-350"><span class="linenos">350</span></a>        <span class="n">res</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;path&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</span><span id="Image.read-351"><a href="#Image.read-351"><span class="linenos">351</span></a>        <span class="c1"># update size</span>
</span><span id="Image.read-352"><a href="#Image.read-352"><span class="linenos">352</span></a>        <span class="k">if</span> <span class="n">thumb</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">imgDoubleFull</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
</span><span id="Image.read-353"><a href="#Image.read-353"><span class="linenos">353</span></a>            <span class="n">h</span><span class="p">,</span><span class="n">w</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="n">imgDoubleFull</span><span class="o">.</span><span class="n">shape</span>
</span><span id="Image.read-354"><a href="#Image.read-354"><span class="linenos">354</span></a>            <span class="n">res</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;exif&#39;</span><span class="p">][</span><span class="s1">&#39;Image Width&#39;</span><span class="p">]</span>    <span class="o">=</span> <span class="n">w</span>
</span><span id="Image.read-355"><a href="#Image.read-355"><span class="linenos">355</span></a>            <span class="n">res</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;exif&#39;</span><span class="p">][</span><span class="s1">&#39;Image Height&#39;</span><span class="p">]</span>   <span class="o">=</span> <span class="n">h</span>
</span><span id="Image.read-356"><a href="#Image.read-356"><span class="linenos">356</span></a>
</span><span id="Image.read-357"><a href="#Image.read-357"><span class="linenos">357</span></a>        <span class="c1"># update image.colorSpace from metadata</span>
</span><span id="Image.read-358"><a href="#Image.read-358"><span class="linenos">358</span></a>        <span class="n">RGBcolorspace</span> <span class="o">=</span> <span class="n">ColorSpace</span><span class="o">.</span><span class="n">sRGB</span><span class="p">()</span> <span class="c1"># delfault color space</span>
</span><span id="Image.read-359"><a href="#Image.read-359"><span class="linenos">359</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="s1">&#39;sRGB&#39;</span> <span class="ow">in</span> <span class="n">res</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;exif&#39;</span><span class="p">][</span><span class="s1">&#39;Color Space&#39;</span><span class="p">]):</span>
</span><span id="Image.read-360"><a href="#Image.read-360"><span class="linenos">360</span></a>            <span class="n">res</span><span class="o">.</span><span class="n">colorSpace</span> <span class="o">=</span> <span class="n">RGBcolorspace</span> 
</span><span id="Image.read-361"><a href="#Image.read-361"><span class="linenos">361</span></a>        <span class="k">else</span><span class="p">:</span> <span class="c1"># &#39;sRGB&#39; in color space &lt;from exif&gt;</span>
</span><span id="Image.read-362"><a href="#Image.read-362"><span class="linenos">362</span></a>            <span class="n">res</span><span class="o">.</span><span class="n">colorSpace</span> <span class="o">=</span> <span class="n">RGBcolorspace</span> 
</span><span id="Image.read-363"><a href="#Image.read-363"><span class="linenos">363</span></a>
</span><span id="Image.read-364"><a href="#Image.read-364"><span class="linenos">364</span></a>        <span class="c1"># display ready image</span>
</span><span id="Image.read-365"><a href="#Image.read-365"><span class="linenos">365</span></a>        <span class="k">if</span> <span class="s1">&#39;display&#39;</span> <span class="ow">in</span> <span class="n">res</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="Image.read-366"><a href="#Image.read-366"><span class="linenos">366</span></a>            <span class="n">disp</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;display&#39;</span><span class="p">]</span>
</span><span id="Image.read-367"><a href="#Image.read-367"><span class="linenos">367</span></a>            <span class="k">if</span> <span class="n">disp</span> <span class="ow">in</span> <span class="n">pref</span><span class="o">.</span><span class="n">getHDRdisplays</span><span class="p">()</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="Image.read-368"><a href="#Image.read-368"><span class="linenos">368</span></a>                <span class="n">scaling</span> <span class="o">=</span> <span class="n">pref</span><span class="o">.</span><span class="n">getHDRdisplays</span><span class="p">()[</span><span class="n">disp</span><span class="p">][</span><span class="s1">&#39;scaling&#39;</span><span class="p">]</span>
</span><span id="Image.read-369"><a href="#Image.read-369"><span class="linenos">369</span></a>                <span class="n">res</span><span class="o">.</span><span class="n">colorData</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">colorData</span><span class="o">/</span><span class="n">scaling</span>  
</span><span id="Image.read-370"><a href="#Image.read-370"><span class="linenos">370</span></a>
</span><span id="Image.read-371"><a href="#Image.read-371"><span class="linenos">371</span></a>        <span class="k">return</span> <span class="n">res</span>
</span></pre></div>


            <div class="docstring"><p>Load an image from file with automatic format detection.</p>

<p>This method provides comprehensive image loading with support for various
formats including HDR (.hdr), RAW (.arw), and standard formats (.jpg).
It handles thumbnail generation, metadata extraction, and color space
configuration automatically.</p>

<p>Args:
    filename (str): Complete path to the image file
    thumb (bool, optional): Whether to load/create thumbnail version (default: False)</p>

<p>Returns:
    Image: Loaded image object with metadata and proper color space configuration</p>

<p>Note:
    - For HDR images: Creates thumbnails in ./thumbnails/ directory when requested
    - For RAW images: Uses rawpy with sRGB output and camera white balance
    - Automatically loads existing metadata from .json files if available</p>
</div>


                            </div>
                            <div id="Image.write" class="classattr">
                                        <input id="Image.write-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">write</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">filename</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Image.write-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Image.write"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Image.write-373"><a href="#Image.write-373"><span class="linenos">373</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">filename</span><span class="p">):</span>
</span><span id="Image.write-374"><a href="#Image.write-374"><span class="linenos">374</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Image.write-375"><a href="#Image.write-375"><span class="linenos">375</span></a><span class="sd">        Save the image and its metadata to disk.</span>
</span><span id="Image.write-376"><a href="#Image.write-376"><span class="linenos">376</span></a><span class="sd">        </span>
</span><span id="Image.write-377"><a href="#Image.write-377"><span class="linenos">377</span></a><span class="sd">        This method saves HDR images to disk along with their associated metadata</span>
</span><span id="Image.write-378"><a href="#Image.write-378"><span class="linenos">378</span></a><span class="sd">        in a JSON file. It updates the image&#39;s path and filename information</span>
</span><span id="Image.write-379"><a href="#Image.write-379"><span class="linenos">379</span></a><span class="sd">        before saving.</span>
</span><span id="Image.write-380"><a href="#Image.write-380"><span class="linenos">380</span></a>
</span><span id="Image.write-381"><a href="#Image.write-381"><span class="linenos">381</span></a><span class="sd">        Args:</span>
</span><span id="Image.write-382"><a href="#Image.write-382"><span class="linenos">382</span></a><span class="sd">            filename (str): Target filename for saving the image</span>
</span><span id="Image.write-383"><a href="#Image.write-383"><span class="linenos">383</span></a><span class="sd">            </span>
</span><span id="Image.write-384"><a href="#Image.write-384"><span class="linenos">384</span></a><span class="sd">        Note:</span>
</span><span id="Image.write-385"><a href="#Image.write-385"><span class="linenos">385</span></a><span class="sd">            Only HDR images can be written using this method. The metadata</span>
</span><span id="Image.write-386"><a href="#Image.write-386"><span class="linenos">386</span></a><span class="sd">            is automatically saved to a corresponding .json file.</span>
</span><span id="Image.write-387"><a href="#Image.write-387"><span class="linenos">387</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Image.write-388"><a href="#Image.write-388"><span class="linenos">388</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">isHDR</span><span class="p">():</span>
</span><span id="Image.write-389"><a href="#Image.write-389"><span class="linenos">389</span></a>
</span><span id="Image.write-390"><a href="#Image.write-390"><span class="linenos">390</span></a>            <span class="n">path</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">ext</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">filenamesplit</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
</span><span id="Image.write-391"><a href="#Image.write-391"><span class="linenos">391</span></a>            <span class="n">colour</span><span class="o">.</span><span class="n">write_image</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">colorData</span><span class="p">,</span><span class="n">filename</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">&#39;Imageio&#39;</span><span class="p">)</span>
</span><span id="Image.write-392"><a href="#Image.write-392"><span class="linenos">392</span></a>
</span><span id="Image.write-393"><a href="#Image.write-393"><span class="linenos">393</span></a>            <span class="c1"># update filename related metadata before saving</span>
</span><span id="Image.write-394"><a href="#Image.write-394"><span class="linenos">394</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">+</span><span class="s1">&#39;.&#39;</span><span class="o">+</span><span class="n">ext</span>
</span><span id="Image.write-395"><a href="#Image.write-395"><span class="linenos">395</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">path</span>  <span class="o">=</span> <span class="n">path</span>
</span><span id="Image.write-396"><a href="#Image.write-396"><span class="linenos">396</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">image</span> <span class="o">=</span> <span class="bp">self</span>
</span><span id="Image.write-397"><a href="#Image.write-397"><span class="linenos">397</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;filename&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">name</span><span class="o">+</span><span class="s1">&#39;.&#39;</span><span class="o">+</span><span class="n">ext</span>
</span><span id="Image.write-398"><a href="#Image.write-398"><span class="linenos">398</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;path&#39;</span><span class="p">]</span> <span class="o">=</span>     <span class="n">path</span>
</span><span id="Image.write-399"><a href="#Image.write-399"><span class="linenos">399</span></a>
</span><span id="Image.write-400"><a href="#Image.write-400"><span class="linenos">400</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Save the image and its metadata to disk.</p>

<p>This method saves HDR images to disk along with their associated metadata
in a JSON file. It updates the image's path and filename information
before saving.</p>

<p>Args:
    filename (str): Target filename for saving the image</p>

<p>Note:
    Only HDR images can be written using this method. The metadata
    is automatically saved to a corresponding .json file.</p>
</div>


                            </div>
                            <div id="Image.toOne" class="classattr">
                                        <input id="Image.toOne-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-staticmethod">@staticmethod</div>

        <span class="def">def</span>
        <span class="name">toOne</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">colorData</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Image.toOne-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Image.toOne"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Image.toOne-402"><a href="#Image.toOne-402"><span class="linenos">402</span></a>    <span class="nd">@staticmethod</span>
</span><span id="Image.toOne-403"><a href="#Image.toOne-403"><span class="linenos">403</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">toOne</span><span class="p">(</span><span class="n">colorData</span><span class="p">):</span>
</span><span id="Image.toOne-404"><a href="#Image.toOne-404"><span class="linenos">404</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Image.toOne-405"><a href="#Image.toOne-405"><span class="linenos">405</span></a><span class="sd">        Scale image color data to [0, 1] range based on maximum RGB values.</span>
</span><span id="Image.toOne-406"><a href="#Image.toOne-406"><span class="linenos">406</span></a><span class="sd">        </span>
</span><span id="Image.toOne-407"><a href="#Image.toOne-407"><span class="linenos">407</span></a><span class="sd">        This utility method normalizes image data by finding the maximum value</span>
</span><span id="Image.toOne-408"><a href="#Image.toOne-408"><span class="linenos">408</span></a><span class="sd">        across all RGB channels and scaling accordingly.</span>
</span><span id="Image.toOne-409"><a href="#Image.toOne-409"><span class="linenos">409</span></a>
</span><span id="Image.toOne-410"><a href="#Image.toOne-410"><span class="linenos">410</span></a><span class="sd">        Args:</span>
</span><span id="Image.toOne-411"><a href="#Image.toOne-411"><span class="linenos">411</span></a><span class="sd">            colorData (numpy.ndarray): Input image color data</span>
</span><span id="Image.toOne-412"><a href="#Image.toOne-412"><span class="linenos">412</span></a><span class="sd">                </span>
</span><span id="Image.toOne-413"><a href="#Image.toOne-413"><span class="linenos">413</span></a><span class="sd">        Returns:</span>
</span><span id="Image.toOne-414"><a href="#Image.toOne-414"><span class="linenos">414</span></a><span class="sd">            tuple: (scaled_color_data, scaling_factor)</span>
</span><span id="Image.toOne-415"><a href="#Image.toOne-415"><span class="linenos">415</span></a><span class="sd">                - scaled_color_data: Normalized image data in [0,1] range</span>
</span><span id="Image.toOne-416"><a href="#Image.toOne-416"><span class="linenos">416</span></a><span class="sd">                - scaling_factor: Applied scaling factor (1/max_value)</span>
</span><span id="Image.toOne-417"><a href="#Image.toOne-417"><span class="linenos">417</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Image.toOne-418"><a href="#Image.toOne-418"><span class="linenos">418</span></a>
</span><span id="Image.toOne-419"><a href="#Image.toOne-419"><span class="linenos">419</span></a>        <span class="n">imgVector</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">ndarray2vector</span><span class="p">(</span><span class="n">colorData</span><span class="p">)</span>
</span><span id="Image.toOne-420"><a href="#Image.toOne-420"><span class="linenos">420</span></a>        <span class="n">R</span><span class="p">,</span> <span class="n">G</span><span class="p">,</span> <span class="n">B</span> <span class="o">=</span> <span class="n">imgVector</span><span class="p">[:,</span><span class="mi">0</span><span class="p">],</span> <span class="n">imgVector</span><span class="p">[:,</span><span class="mi">1</span><span class="p">],</span> <span class="n">imgVector</span><span class="p">[:,</span><span class="mi">2</span><span class="p">]</span>
</span><span id="Image.toOne-421"><a href="#Image.toOne-421"><span class="linenos">421</span></a>        <span class="n">maxRGB</span> <span class="o">=</span> <span class="nb">max</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">amax</span><span class="p">(</span><span class="n">R</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">amax</span><span class="p">(</span><span class="n">G</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">amax</span><span class="p">(</span><span class="n">B</span><span class="p">)])</span> 
</span><span id="Image.toOne-422"><a href="#Image.toOne-422"><span class="linenos">422</span></a>
</span><span id="Image.toOne-423"><a href="#Image.toOne-423"><span class="linenos">423</span></a>        <span class="k">return</span> <span class="n">colorData</span><span class="o">/</span><span class="n">maxRGB</span><span class="p">,</span> <span class="mf">1.0</span><span class="o">/</span><span class="n">maxRGB</span>
</span></pre></div>


            <div class="docstring"><p>Scale image color data to [0, 1] range based on maximum RGB values.</p>

<p>This utility method normalizes image data by finding the maximum value
across all RGB channels and scaling accordingly.</p>

<p>Args:
    colorData (numpy.ndarray): Input image color data</p>

<p>Returns:
    tuple: (scaled_color_data, scaling_factor)
        - scaled_color_data: Normalized image data in [0,1] range
        - scaling_factor: Applied scaling factor (1/max_value)</p>
</div>


                            </div>
                            <div id="Image.getChannel" class="classattr">
                                        <input id="Image.getChannel-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">getChannel</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">channel</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Image.getChannel-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Image.getChannel"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Image.getChannel-425"><a href="#Image.getChannel-425"><span class="linenos">425</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getChannel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">channel</span><span class="p">):</span>
</span><span id="Image.getChannel-426"><a href="#Image.getChannel-426"><span class="linenos">426</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Image.getChannel-427"><a href="#Image.getChannel-427"><span class="linenos">427</span></a><span class="sd">        Extract a specific color channel from the image.</span>
</span><span id="Image.getChannel-428"><a href="#Image.getChannel-428"><span class="linenos">428</span></a><span class="sd">        </span>
</span><span id="Image.getChannel-429"><a href="#Image.getChannel-429"><span class="linenos">429</span></a><span class="sd">        This method extracts individual color channels (R, G, B, X, Y, Z, L, a, b)</span>
</span><span id="Image.getChannel-430"><a href="#Image.getChannel-430"><span class="linenos">430</span></a><span class="sd">        by converting to the appropriate color space and returning the requested channel.</span>
</span><span id="Image.getChannel-431"><a href="#Image.getChannel-431"><span class="linenos">431</span></a>
</span><span id="Image.getChannel-432"><a href="#Image.getChannel-432"><span class="linenos">432</span></a><span class="sd">        Args:</span>
</span><span id="Image.getChannel-433"><a href="#Image.getChannel-433"><span class="linenos">433</span></a><span class="sd">            channel (channel): Channel identifier (e.g., channel.sR, channel.Y, channel.L)</span>
</span><span id="Image.getChannel-434"><a href="#Image.getChannel-434"><span class="linenos">434</span></a><span class="sd">        </span>
</span><span id="Image.getChannel-435"><a href="#Image.getChannel-435"><span class="linenos">435</span></a><span class="sd">        Returns:</span>
</span><span id="Image.getChannel-436"><a href="#Image.getChannel-436"><span class="linenos">436</span></a><span class="sd">            numpy.ndarray or None: 2D array containing the channel data, or None for invalid channels</span>
</span><span id="Image.getChannel-437"><a href="#Image.getChannel-437"><span class="linenos">437</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Image.getChannel-438"><a href="#Image.getChannel-438"><span class="linenos">438</span></a>
</span><span id="Image.getChannel-439"><a href="#Image.getChannel-439"><span class="linenos">439</span></a>        <span class="c1"># take into account colorSpace</span>
</span><span id="Image.getChannel-440"><a href="#Image.getChannel-440"><span class="linenos">440</span></a>        <span class="n">destColor</span> <span class="o">=</span> <span class="n">channel</span><span class="o">.</span><span class="n">colorSpace</span><span class="p">()</span>
</span><span id="Image.getChannel-441"><a href="#Image.getChannel-441"><span class="linenos">441</span></a>        <span class="n">image</span> <span class="o">=</span> <span class="n">processing</span><span class="o">.</span><span class="n">ColorSpaceTransform</span><span class="p">()</span><span class="o">.</span><span class="n">compute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">dest</span><span class="o">=</span><span class="n">destColor</span><span class="p">)</span>
</span><span id="Image.getChannel-442"><a href="#Image.getChannel-442"><span class="linenos">442</span></a>
</span><span id="Image.getChannel-443"><a href="#Image.getChannel-443"><span class="linenos">443</span></a>        <span class="k">if</span> <span class="n">channel</span><span class="o">.</span><span class="n">getValue</span><span class="p">()</span> <span class="o">&lt;</span><span class="mi">3</span><span class="p">:</span>
</span><span id="Image.getChannel-444"><a href="#Image.getChannel-444"><span class="linenos">444</span></a>            <span class="k">return</span> <span class="n">image</span><span class="o">.</span><span class="n">colorData</span><span class="p">[:,:,</span><span class="n">channel</span><span class="o">.</span><span class="n">getValue</span><span class="p">()]</span>
</span><span id="Image.getChannel-445"><a href="#Image.getChannel-445"><span class="linenos">445</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Image.getChannel-446"><a href="#Image.getChannel-446"><span class="linenos">446</span></a>            <span class="k">return</span> <span class="kc">None</span>
</span></pre></div>


            <div class="docstring"><p>Extract a specific color channel from the image.</p>

<p>This method extracts individual color channels (R, G, B, X, Y, Z, L, a, b)
by converting to the appropriate color space and returning the requested channel.</p>

<p>Args:
    channel (channel): Channel identifier (e.g., <a href="#channel.sR">channel.sR</a>, <a href="#channel.Y">channel.Y</a>, <a href="#channel.L">channel.L</a>)</p>

<p>Returns:
    numpy.ndarray or None: 2D array containing the channel data, or None for invalid channels</p>
</div>


                            </div>
                            <div id="Image.getDynamicRange" class="classattr">
                                        <input id="Image.getDynamicRange-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">getDynamicRange</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">percentile</span><span class="o">=</span><span class="kc">None</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Image.getDynamicRange-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Image.getDynamicRange"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Image.getDynamicRange-448"><a href="#Image.getDynamicRange-448"><span class="linenos">448</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">getDynamicRange</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">percentile</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="Image.getDynamicRange-449"><a href="#Image.getDynamicRange-449"><span class="linenos">449</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Image.getDynamicRange-450"><a href="#Image.getDynamicRange-450"><span class="linenos">450</span></a><span class="sd">        Calculate the dynamic range of the image in stops.</span>
</span><span id="Image.getDynamicRange-451"><a href="#Image.getDynamicRange-451"><span class="linenos">451</span></a><span class="sd">        </span>
</span><span id="Image.getDynamicRange-452"><a href="#Image.getDynamicRange-452"><span class="linenos">452</span></a><span class="sd">        Computes the dynamic range by analyzing the Y (luminance) channel</span>
</span><span id="Image.getDynamicRange-453"><a href="#Image.getDynamicRange-453"><span class="linenos">453</span></a><span class="sd">        and calculating the log2 ratio between maximum and minimum values.</span>
</span><span id="Image.getDynamicRange-454"><a href="#Image.getDynamicRange-454"><span class="linenos">454</span></a>
</span><span id="Image.getDynamicRange-455"><a href="#Image.getDynamicRange-455"><span class="linenos">455</span></a><span class="sd">        Args:</span>
</span><span id="Image.getDynamicRange-456"><a href="#Image.getDynamicRange-456"><span class="linenos">456</span></a><span class="sd">            percentile (float, optional): Percentile for robust min/max calculation.</span>
</span><span id="Image.getDynamicRange-457"><a href="#Image.getDynamicRange-457"><span class="linenos">457</span></a><span class="sd">                                        If None, uses actual min/max excluding zeros.</span>
</span><span id="Image.getDynamicRange-458"><a href="#Image.getDynamicRange-458"><span class="linenos">458</span></a><span class="sd">                </span>
</span><span id="Image.getDynamicRange-459"><a href="#Image.getDynamicRange-459"><span class="linenos">459</span></a><span class="sd">        Returns:</span>
</span><span id="Image.getDynamicRange-460"><a href="#Image.getDynamicRange-460"><span class="linenos">460</span></a><span class="sd">            float: Dynamic range in stops (log2 scale)</span>
</span><span id="Image.getDynamicRange-461"><a href="#Image.getDynamicRange-461"><span class="linenos">461</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Image.getDynamicRange-462"><a href="#Image.getDynamicRange-462"><span class="linenos">462</span></a>
</span><span id="Image.getDynamicRange-463"><a href="#Image.getDynamicRange-463"><span class="linenos">463</span></a>        <span class="n">Y_min</span><span class="p">,</span><span class="n">Y_max</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
</span><span id="Image.getDynamicRange-464"><a href="#Image.getDynamicRange-464"><span class="linenos">464</span></a>        <span class="n">Y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getChannel</span><span class="p">(</span><span class="n">channel</span><span class="o">.</span><span class="n">Y</span><span class="p">)</span>
</span><span id="Image.getDynamicRange-465"><a href="#Image.getDynamicRange-465"><span class="linenos">465</span></a>
</span><span id="Image.getDynamicRange-466"><a href="#Image.getDynamicRange-466"><span class="linenos">466</span></a>        <span class="k">if</span> <span class="n">percentile</span> <span class="o">==</span> <span class="kc">None</span> <span class="p">:</span> <span class="n">Y_min</span><span class="p">,</span> <span class="n">Y_max</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">amin</span><span class="p">(</span><span class="n">Y</span><span class="p">[</span><span class="n">Y</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">]),</span> <span class="n">np</span><span class="o">.</span><span class="n">amax</span><span class="p">(</span><span class="n">Y</span><span class="p">)</span>                  <span class="c1"># use min and max</span>
</span><span id="Image.getDynamicRange-467"><a href="#Image.getDynamicRange-467"><span class="linenos">467</span></a>        <span class="k">else</span><span class="p">:</span> <span class="n">Y_min</span><span class="p">,</span> <span class="n">Y_max</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">percentile</span><span class="p">(</span><span class="n">Y</span><span class="p">[</span><span class="n">Y</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">],</span><span class="n">percentile</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">percentile</span><span class="p">(</span><span class="n">Y</span><span class="p">,</span><span class="mi">100</span><span class="o">-</span><span class="n">percentile</span><span class="p">)</span>   <span class="c1"># percentile</span>
</span><span id="Image.getDynamicRange-468"><a href="#Image.getDynamicRange-468"><span class="linenos">468</span></a>
</span><span id="Image.getDynamicRange-469"><a href="#Image.getDynamicRange-469"><span class="linenos">469</span></a>        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">log2</span><span class="p">(</span><span class="n">Y_max</span><span class="p">)</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">log2</span><span class="p">(</span><span class="n">Y_min</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Calculate the dynamic range of the image in stops.</p>

<p>Computes the dynamic range by analyzing the Y (luminance) channel
and calculating the log2 ratio between maximum and minimum values.</p>

<p>Args:
    percentile (float, optional): Percentile for robust min/max calculation.
                                If None, uses actual min/max excluding zeros.</p>

<p>Returns:
    float: Dynamic range in stops (log2 scale)</p>
</div>


                            </div>
                            <div id="Image.buildHistogram" class="classattr">
                                        <input id="Image.buildHistogram-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">buildHistogram</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">channel</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Image.buildHistogram-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Image.buildHistogram"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Image.buildHistogram-471"><a href="#Image.buildHistogram-471"><span class="linenos">471</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">buildHistogram</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">channel</span><span class="p">):</span>
</span><span id="Image.buildHistogram-472"><a href="#Image.buildHistogram-472"><span class="linenos">472</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Image.buildHistogram-473"><a href="#Image.buildHistogram-473"><span class="linenos">473</span></a><span class="sd">        Generate a histogram for the specified image channel.</span>
</span><span id="Image.buildHistogram-474"><a href="#Image.buildHistogram-474"><span class="linenos">474</span></a><span class="sd">        </span>
</span><span id="Image.buildHistogram-475"><a href="#Image.buildHistogram-475"><span class="linenos">475</span></a><span class="sd">        Creates and stores a histogram object for the given channel, which can</span>
</span><span id="Image.buildHistogram-476"><a href="#Image.buildHistogram-476"><span class="linenos">476</span></a><span class="sd">        be used for analysis and display purposes.</span>
</span><span id="Image.buildHistogram-477"><a href="#Image.buildHistogram-477"><span class="linenos">477</span></a>
</span><span id="Image.buildHistogram-478"><a href="#Image.buildHistogram-478"><span class="linenos">478</span></a><span class="sd">        Args:</span>
</span><span id="Image.buildHistogram-479"><a href="#Image.buildHistogram-479"><span class="linenos">479</span></a><span class="sd">            channel (channel): Channel to analyze for histogram generation</span>
</span><span id="Image.buildHistogram-480"><a href="#Image.buildHistogram-480"><span class="linenos">480</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Image.buildHistogram-481"><a href="#Image.buildHistogram-481"><span class="linenos">481</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">histogram</span> <span class="o">=</span> <span class="n">Histogram</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">channel</span><span class="p">,</span> <span class="n">nbBins</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="nb">range</span><span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">logSpace</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">isHDR</span><span class="p">())</span>
</span></pre></div>


            <div class="docstring"><p>Generate a histogram for the specified image channel.</p>

<p>Creates and stores a histogram object for the given channel, which can
be used for analysis and display purposes.</p>

<p>Args:
    channel (channel): Channel to analyze for histogram generation</p>
</div>


                            </div>
                            <div id="Image.plot" class="classattr">
                                        <input id="Image.plot-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">plot</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">ax</span>,</span><span class="param">	<span class="n">displayTitle</span><span class="o">=</span><span class="kc">False</span>,</span><span class="param">	<span class="n">title</span><span class="o">=</span><span class="kc">None</span>,</span><span class="param">	<span class="n">forceToneMapping</span><span class="o">=</span><span class="kc">True</span>,</span><span class="param">	<span class="n">TMO</span><span class="o">=</span><span class="kc">None</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Image.plot-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Image.plot"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Image.plot-483"><a href="#Image.plot-483"><span class="linenos">483</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">ax</span><span class="p">,</span><span class="n">displayTitle</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">title</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">forceToneMapping</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">TMO</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="Image.plot-484"><a href="#Image.plot-484"><span class="linenos">484</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Image.plot-485"><a href="#Image.plot-485"><span class="linenos">485</span></a><span class="sd">        Display the image on a matplotlib axis with optional tone mapping.</span>
</span><span id="Image.plot-486"><a href="#Image.plot-486"><span class="linenos">486</span></a><span class="sd">        </span>
</span><span id="Image.plot-487"><a href="#Image.plot-487"><span class="linenos">487</span></a><span class="sd">        This method handles proper display of both SDR and HDR images, applying</span>
</span><span id="Image.plot-488"><a href="#Image.plot-488"><span class="linenos">488</span></a><span class="sd">        tone mapping when necessary for HDR content.</span>
</span><span id="Image.plot-489"><a href="#Image.plot-489"><span class="linenos">489</span></a>
</span><span id="Image.plot-490"><a href="#Image.plot-490"><span class="linenos">490</span></a><span class="sd">        Args:</span>
</span><span id="Image.plot-491"><a href="#Image.plot-491"><span class="linenos">491</span></a><span class="sd">            ax (matplotlib.axes.Axes): Matplotlib axis for displaying the image</span>
</span><span id="Image.plot-492"><a href="#Image.plot-492"><span class="linenos">492</span></a><span class="sd">            displayTitle (bool, optional): Whether to show title (default: False)</span>
</span><span id="Image.plot-493"><a href="#Image.plot-493"><span class="linenos">493</span></a><span class="sd">            title (str, optional): Custom title text (default: auto-generated)</span>
</span><span id="Image.plot-494"><a href="#Image.plot-494"><span class="linenos">494</span></a><span class="sd">            forceToneMapping (bool, optional): Apply tone mapping to HDR images (default: True)</span>
</span><span id="Image.plot-495"><a href="#Image.plot-495"><span class="linenos">495</span></a><span class="sd">            TMO (Processing, optional): Custom tone mapping operator (default: CCTF encoding)</span>
</span><span id="Image.plot-496"><a href="#Image.plot-496"><span class="linenos">496</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Image.plot-497"><a href="#Image.plot-497"><span class="linenos">497</span></a>        <span class="c1"># default values</span>
</span><span id="Image.plot-498"><a href="#Image.plot-498"><span class="linenos">498</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">title</span><span class="p">:</span> <span class="n">title</span><span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="o">+</span><span class="s2">&quot;(&quot;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">colorSpace</span><span class="o">.</span><span class="n">name</span> <span class="o">+</span><span class="s2">&quot; | &quot;</span><span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;)&quot;</span>
</span><span id="Image.plot-499"><a href="#Image.plot-499"><span class="linenos">499</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">TMO</span><span class="p">:</span> <span class="n">TMO</span> <span class="o">=</span> <span class="n">processing</span><span class="o">.</span><span class="n">tmo_cctf</span><span class="p">()</span>
</span><span id="Image.plot-500"><a href="#Image.plot-500"><span class="linenos">500</span></a>        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">imageType</span><span class="o">.</span><span class="n">HDR</span><span class="p">))</span> <span class="ow">or</span> <span class="p">(</span><span class="ow">not</span>  <span class="n">forceToneMapping</span><span class="p">):</span> 
</span><span id="Image.plot-501"><a href="#Image.plot-501"><span class="linenos">501</span></a>            <span class="n">ax</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">colorData</span><span class="p">)</span>
</span><span id="Image.plot-502"><a href="#Image.plot-502"><span class="linenos">502</span></a>        <span class="k">else</span><span class="p">:</span> <span class="c1"># HDR and forceToneMapping</span>
</span><span id="Image.plot-503"><a href="#Image.plot-503"><span class="linenos">503</span></a>            <span class="n">ax</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">TMO</span><span class="p">)</span><span class="o">.</span><span class="n">process</span><span class="p">(</span><span class="n">processing</span><span class="o">.</span><span class="n">clip</span><span class="p">())</span><span class="o">.</span><span class="n">colorData</span><span class="p">)</span>
</span><span id="Image.plot-504"><a href="#Image.plot-504"><span class="linenos">504</span></a>            <span class="n">title</span> <span class="o">=</span> <span class="n">title</span><span class="o">+</span><span class="s2">&quot;[auto TMo]&quot;</span>
</span><span id="Image.plot-505"><a href="#Image.plot-505"><span class="linenos">505</span></a>        <span class="k">if</span> <span class="n">displayTitle</span><span class="p">:</span>  <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
</span><span id="Image.plot-506"><a href="#Image.plot-506"><span class="linenos">506</span></a>        <span class="n">ax</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s2">&quot;off&quot;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Display the image on a matplotlib axis with optional tone mapping.</p>

<p>This method handles proper display of both SDR and HDR images, applying
tone mapping when necessary for HDR content.</p>

<p>Args:
    ax (matplotlib.axes.Axes): Matplotlib axis for displaying the image
    displayTitle (bool, optional): Whether to show title (default: False)
    title (str, optional): Custom title text (default: auto-generated)
    forceToneMapping (bool, optional): Apply tone mapping to HDR images (default: True)
    TMO (Processing, optional): Custom tone mapping operator (default: CCTF encoding)</p>
</div>


                            </div>
                            <div id="Image.buildLchColorData" class="classattr">
                                        <input id="Image.buildLchColorData-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-staticmethod">@staticmethod</div>

        <span class="def">def</span>
        <span class="name">buildLchColorData</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">L</span>, </span><span class="param"><span class="n">c</span>, </span><span class="param"><span class="n">h</span>, </span><span class="param"><span class="n">size</span>, </span><span class="param"><span class="n">width</span>, </span><span class="param"><span class="n">height</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Image.buildLchColorData-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Image.buildLchColorData"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Image.buildLchColorData-529"><a href="#Image.buildLchColorData-529"><span class="linenos">529</span></a>    <span class="nd">@staticmethod</span>
</span><span id="Image.buildLchColorData-530"><a href="#Image.buildLchColorData-530"><span class="linenos">530</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">buildLchColorData</span><span class="p">(</span><span class="n">L</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">h</span><span class="p">,</span><span class="n">size</span><span class="p">,</span><span class="n">width</span><span class="p">,</span><span class="n">height</span><span class="p">):</span>
</span><span id="Image.buildLchColorData-531"><a href="#Image.buildLchColorData-531"><span class="linenos">531</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Image.buildLchColorData-532"><a href="#Image.buildLchColorData-532"><span class="linenos">532</span></a><span class="sd">        Generate synthetic LCH color data for visualization and testing.</span>
</span><span id="Image.buildLchColorData-533"><a href="#Image.buildLchColorData-533"><span class="linenos">533</span></a><span class="sd">        </span>
</span><span id="Image.buildLchColorData-534"><a href="#Image.buildLchColorData-534"><span class="linenos">534</span></a><span class="sd">        Creates artificial color data in LCH space with specified lightness,</span>
</span><span id="Image.buildLchColorData-535"><a href="#Image.buildLchColorData-535"><span class="linenos">535</span></a><span class="sd">        chroma, and hue ranges. Useful for color space visualization and</span>
</span><span id="Image.buildLchColorData-536"><a href="#Image.buildLchColorData-536"><span class="linenos">536</span></a><span class="sd">        testing color transformations.</span>
</span><span id="Image.buildLchColorData-537"><a href="#Image.buildLchColorData-537"><span class="linenos">537</span></a>
</span><span id="Image.buildLchColorData-538"><a href="#Image.buildLchColorData-538"><span class="linenos">538</span></a><span class="sd">        Args:</span>
</span><span id="Image.buildLchColorData-539"><a href="#Image.buildLchColorData-539"><span class="linenos">539</span></a><span class="sd">            L (tuple): Lightness range (min, max)</span>
</span><span id="Image.buildLchColorData-540"><a href="#Image.buildLchColorData-540"><span class="linenos">540</span></a><span class="sd">            c (tuple): Chroma range (min, max) </span>
</span><span id="Image.buildLchColorData-541"><a href="#Image.buildLchColorData-541"><span class="linenos">541</span></a><span class="sd">            h (tuple): Hue range (min, max)</span>
</span><span id="Image.buildLchColorData-542"><a href="#Image.buildLchColorData-542"><span class="linenos">542</span></a><span class="sd">            size (tuple): Output image dimensions (height, width)</span>
</span><span id="Image.buildLchColorData-543"><a href="#Image.buildLchColorData-543"><span class="linenos">543</span></a><span class="sd">            width (str): Primary axis for width (&#39;L&#39;, &#39;c&#39;, or &#39;h&#39;)</span>
</span><span id="Image.buildLchColorData-544"><a href="#Image.buildLchColorData-544"><span class="linenos">544</span></a><span class="sd">            height (str): Primary axis for height (&#39;L&#39;, &#39;c&#39;, or &#39;h&#39;)</span>
</span><span id="Image.buildLchColorData-545"><a href="#Image.buildLchColorData-545"><span class="linenos">545</span></a><span class="sd">                </span>
</span><span id="Image.buildLchColorData-546"><a href="#Image.buildLchColorData-546"><span class="linenos">546</span></a><span class="sd">        Returns:</span>
</span><span id="Image.buildLchColorData-547"><a href="#Image.buildLchColorData-547"><span class="linenos">547</span></a><span class="sd">            numpy.ndarray: Generated LCH color data with shape (height, width, 3)</span>
</span><span id="Image.buildLchColorData-548"><a href="#Image.buildLchColorData-548"><span class="linenos">548</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Image.buildLchColorData-549"><a href="#Image.buildLchColorData-549"><span class="linenos">549</span></a>
</span><span id="Image.buildLchColorData-550"><a href="#Image.buildLchColorData-550"><span class="linenos">550</span></a>        <span class="n">colorData</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="mi">3</span><span class="p">))</span>
</span><span id="Image.buildLchColorData-551"><a href="#Image.buildLchColorData-551"><span class="linenos">551</span></a>        <span class="n">Lmin</span><span class="p">,</span> <span class="n">Lmax</span> <span class="o">=</span> <span class="n">L</span> <span class="k">if</span> <span class="n">L</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">L</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">else</span> <span class="p">(</span><span class="n">L</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">L</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="Image.buildLchColorData-552"><a href="#Image.buildLchColorData-552"><span class="linenos">552</span></a>        <span class="n">cmin</span><span class="p">,</span> <span class="n">cmax</span> <span class="o">=</span> <span class="n">c</span> <span class="k">if</span> <span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">c</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">else</span> <span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</span><span id="Image.buildLchColorData-553"><a href="#Image.buildLchColorData-553"><span class="linenos">553</span></a>        <span class="n">hmin</span><span class="p">,</span> <span class="n">hmax</span> <span class="o">=</span> <span class="n">h</span>
</span><span id="Image.buildLchColorData-554"><a href="#Image.buildLchColorData-554"><span class="linenos">554</span></a>
</span><span id="Image.buildLchColorData-555"><a href="#Image.buildLchColorData-555"><span class="linenos">555</span></a>        <span class="n">xmin</span><span class="p">,</span> <span class="n">xmax</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="Image.buildLchColorData-556"><a href="#Image.buildLchColorData-556"><span class="linenos">556</span></a>        <span class="n">ymin</span><span class="p">,</span> <span class="n">ymax</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="Image.buildLchColorData-557"><a href="#Image.buildLchColorData-557"><span class="linenos">557</span></a>
</span><span id="Image.buildLchColorData-558"><a href="#Image.buildLchColorData-558"><span class="linenos">558</span></a>        <span class="k">if</span> <span class="n">width</span><span class="o">==</span><span class="s1">&#39;L&#39;</span><span class="p">:</span>
</span><span id="Image.buildLchColorData-559"><a href="#Image.buildLchColorData-559"><span class="linenos">559</span></a>            <span class="k">if</span> <span class="n">height</span><span class="o">==</span><span class="s1">&#39;c&#39;</span><span class="p">:</span>
</span><span id="Image.buildLchColorData-560"><a href="#Image.buildLchColorData-560"><span class="linenos">560</span></a>                <span class="c1">#     +-------------------------------+</span>
</span><span id="Image.buildLchColorData-561"><a href="#Image.buildLchColorData-561"><span class="linenos">561</span></a>                <span class="c1">#  c  |                               |</span>
</span><span id="Image.buildLchColorData-562"><a href="#Image.buildLchColorData-562"><span class="linenos">562</span></a>                <span class="c1">#     +-------------------------------+</span>
</span><span id="Image.buildLchColorData-563"><a href="#Image.buildLchColorData-563"><span class="linenos">563</span></a>                <span class="c1">#                Lightness</span>
</span><span id="Image.buildLchColorData-564"><a href="#Image.buildLchColorData-564"><span class="linenos">564</span></a>                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">xmin</span><span class="p">,</span><span class="n">xmax</span><span class="p">):</span>
</span><span id="Image.buildLchColorData-565"><a href="#Image.buildLchColorData-565"><span class="linenos">565</span></a>                    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ymin</span><span class="p">,</span><span class="n">ymax</span><span class="p">):</span>
</span><span id="Image.buildLchColorData-566"><a href="#Image.buildLchColorData-566"><span class="linenos">566</span></a>                        <span class="n">u</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="n">x</span><span class="o">/</span><span class="p">(</span><span class="n">xmax</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="n">y</span><span class="o">/</span><span class="p">(</span><span class="n">ymax</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</span><span id="Image.buildLchColorData-567"><a href="#Image.buildLchColorData-567"><span class="linenos">567</span></a>                        <span class="n">Lu</span> <span class="o">=</span> <span class="n">Lmin</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">u</span><span class="p">)</span><span class="o">+</span><span class="n">Lmax</span><span class="o">*</span><span class="n">u</span>
</span><span id="Image.buildLchColorData-568"><a href="#Image.buildLchColorData-568"><span class="linenos">568</span></a>                        <span class="n">cv</span> <span class="o">=</span> <span class="n">cmin</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">v</span><span class="p">)</span> <span class="o">+</span> <span class="n">cmax</span><span class="o">*</span><span class="n">v</span>
</span><span id="Image.buildLchColorData-569"><a href="#Image.buildLchColorData-569"><span class="linenos">569</span></a>                        <span class="n">hh</span> <span class="o">=</span> <span class="p">(</span><span class="n">hmin</span><span class="o">+</span><span class="n">hmax</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span>
</span><span id="Image.buildLchColorData-570"><a href="#Image.buildLchColorData-570"><span class="linenos">570</span></a>                        <span class="n">colorData</span><span class="p">[</span><span class="n">y</span><span class="p">,</span><span class="n">x</span><span class="p">,:]</span> <span class="o">=</span> <span class="p">[</span><span class="n">Lu</span><span class="p">,</span><span class="n">cv</span><span class="p">,</span><span class="n">hh</span><span class="p">]</span>
</span><span id="Image.buildLchColorData-571"><a href="#Image.buildLchColorData-571"><span class="linenos">571</span></a>            <span class="k">elif</span> <span class="n">height</span><span class="o">==</span><span class="s1">&#39;h&#39;</span><span class="p">:</span>
</span><span id="Image.buildLchColorData-572"><a href="#Image.buildLchColorData-572"><span class="linenos">572</span></a>                <span class="c1">#     +-------------------------------+</span>
</span><span id="Image.buildLchColorData-573"><a href="#Image.buildLchColorData-573"><span class="linenos">573</span></a>                <span class="c1">#  h  |                               |</span>
</span><span id="Image.buildLchColorData-574"><a href="#Image.buildLchColorData-574"><span class="linenos">574</span></a>                <span class="c1">#     +-------------------------------+</span>
</span><span id="Image.buildLchColorData-575"><a href="#Image.buildLchColorData-575"><span class="linenos">575</span></a>                <span class="c1">#                Lightness</span>
</span><span id="Image.buildLchColorData-576"><a href="#Image.buildLchColorData-576"><span class="linenos">576</span></a>                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">xmin</span><span class="p">,</span><span class="n">xmax</span><span class="p">):</span>
</span><span id="Image.buildLchColorData-577"><a href="#Image.buildLchColorData-577"><span class="linenos">577</span></a>                    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ymin</span><span class="p">,</span><span class="n">ymax</span><span class="p">):</span>
</span><span id="Image.buildLchColorData-578"><a href="#Image.buildLchColorData-578"><span class="linenos">578</span></a>                        <span class="n">u</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="n">x</span><span class="o">/</span><span class="p">(</span><span class="n">xmax</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="n">y</span><span class="o">/</span><span class="p">(</span><span class="n">ymax</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</span><span id="Image.buildLchColorData-579"><a href="#Image.buildLchColorData-579"><span class="linenos">579</span></a>                        <span class="n">Lu</span> <span class="o">=</span> <span class="n">Lmin</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">u</span><span class="p">)</span><span class="o">+</span><span class="n">Lmax</span><span class="o">*</span><span class="n">u</span>
</span><span id="Image.buildLchColorData-580"><a href="#Image.buildLchColorData-580"><span class="linenos">580</span></a>                        <span class="k">if</span> <span class="n">hmin</span> <span class="o">&lt;=</span> <span class="n">hmax</span><span class="p">:</span>
</span><span id="Image.buildLchColorData-581"><a href="#Image.buildLchColorData-581"><span class="linenos">581</span></a>                            <span class="n">hv</span> <span class="o">=</span> <span class="n">hmin</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">v</span><span class="p">)</span> <span class="o">+</span> <span class="n">hmax</span><span class="o">*</span><span class="n">v</span>
</span><span id="Image.buildLchColorData-582"><a href="#Image.buildLchColorData-582"><span class="linenos">582</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="Image.buildLchColorData-583"><a href="#Image.buildLchColorData-583"><span class="linenos">583</span></a>                            <span class="c1"># hmin = 340 / hmax=20 -&gt; hmin = hmin-360 &gt;&gt; hmin = -20, hmax =20</span>
</span><span id="Image.buildLchColorData-584"><a href="#Image.buildLchColorData-584"><span class="linenos">584</span></a>                            <span class="n">hv</span> <span class="o">=</span> <span class="p">(</span><span class="n">hmin</span><span class="o">-</span><span class="mi">360</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">v</span><span class="p">)</span> <span class="o">+</span> <span class="n">hmax</span><span class="o">*</span><span class="n">v</span>
</span><span id="Image.buildLchColorData-585"><a href="#Image.buildLchColorData-585"><span class="linenos">585</span></a>                            <span class="k">if</span> <span class="n">hv</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span> <span class="n">hv</span> <span class="o">=</span> <span class="mi">360</span> <span class="o">+</span><span class="n">hv</span>
</span><span id="Image.buildLchColorData-586"><a href="#Image.buildLchColorData-586"><span class="linenos">586</span></a>                        <span class="n">cc</span> <span class="o">=</span> <span class="p">(</span><span class="n">cmin</span><span class="o">+</span><span class="n">cmax</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span>
</span><span id="Image.buildLchColorData-587"><a href="#Image.buildLchColorData-587"><span class="linenos">587</span></a>                        <span class="n">colorData</span><span class="p">[</span><span class="n">y</span><span class="p">,</span><span class="n">x</span><span class="p">,:]</span> <span class="o">=</span> <span class="p">[</span><span class="n">Lu</span><span class="p">,</span><span class="n">cc</span><span class="p">,</span><span class="n">hv</span><span class="p">]</span>
</span><span id="Image.buildLchColorData-588"><a href="#Image.buildLchColorData-588"><span class="linenos">588</span></a>        <span class="k">elif</span> <span class="n">width</span><span class="o">==</span><span class="s1">&#39;c&#39;</span><span class="p">:</span>
</span><span id="Image.buildLchColorData-589"><a href="#Image.buildLchColorData-589"><span class="linenos">589</span></a>            <span class="k">if</span> <span class="n">height</span><span class="o">==</span><span class="s1">&#39;L&#39;</span><span class="p">:</span>
</span><span id="Image.buildLchColorData-590"><a href="#Image.buildLchColorData-590"><span class="linenos">590</span></a>                <span class="c1">#     +-------------------------------+</span>
</span><span id="Image.buildLchColorData-591"><a href="#Image.buildLchColorData-591"><span class="linenos">591</span></a>                <span class="c1">#  L  |                               |</span>
</span><span id="Image.buildLchColorData-592"><a href="#Image.buildLchColorData-592"><span class="linenos">592</span></a>                <span class="c1">#     +-------------------------------+</span>
</span><span id="Image.buildLchColorData-593"><a href="#Image.buildLchColorData-593"><span class="linenos">593</span></a>                <span class="c1">#                chroma</span>
</span><span id="Image.buildLchColorData-594"><a href="#Image.buildLchColorData-594"><span class="linenos">594</span></a>                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">xmin</span><span class="p">,</span><span class="n">xmax</span><span class="p">):</span>
</span><span id="Image.buildLchColorData-595"><a href="#Image.buildLchColorData-595"><span class="linenos">595</span></a>                    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ymin</span><span class="p">,</span><span class="n">ymax</span><span class="p">):</span>
</span><span id="Image.buildLchColorData-596"><a href="#Image.buildLchColorData-596"><span class="linenos">596</span></a>                        <span class="n">u</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="n">x</span><span class="o">/</span><span class="p">(</span><span class="n">xmax</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="n">y</span><span class="o">/</span><span class="p">(</span><span class="n">ymax</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</span><span id="Image.buildLchColorData-597"><a href="#Image.buildLchColorData-597"><span class="linenos">597</span></a>                        <span class="n">cu</span> <span class="o">=</span> <span class="n">cmin</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">u</span><span class="p">)</span> <span class="o">+</span> <span class="n">cmax</span><span class="o">*</span><span class="n">u</span>
</span><span id="Image.buildLchColorData-598"><a href="#Image.buildLchColorData-598"><span class="linenos">598</span></a>                        <span class="n">Lv</span> <span class="o">=</span> <span class="n">Lmin</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">v</span><span class="p">)</span><span class="o">+</span><span class="n">Lmax</span><span class="o">*</span><span class="n">v</span>
</span><span id="Image.buildLchColorData-599"><a href="#Image.buildLchColorData-599"><span class="linenos">599</span></a>                        <span class="n">hh</span> <span class="o">=</span> <span class="p">(</span><span class="n">hmin</span><span class="o">+</span><span class="n">hmax</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span>
</span><span id="Image.buildLchColorData-600"><a href="#Image.buildLchColorData-600"><span class="linenos">600</span></a>                        <span class="n">colorData</span><span class="p">[</span><span class="n">y</span><span class="p">,</span><span class="n">x</span><span class="p">,:]</span> <span class="o">=</span> <span class="p">[</span><span class="n">Lv</span><span class="p">,</span><span class="n">cu</span><span class="p">,</span><span class="n">hh</span><span class="p">]</span>
</span><span id="Image.buildLchColorData-601"><a href="#Image.buildLchColorData-601"><span class="linenos">601</span></a>            <span class="k">elif</span> <span class="n">height</span><span class="o">==</span><span class="s1">&#39;h&#39;</span><span class="p">:</span>
</span><span id="Image.buildLchColorData-602"><a href="#Image.buildLchColorData-602"><span class="linenos">602</span></a>                <span class="c1">#     +-------------------------------+</span>
</span><span id="Image.buildLchColorData-603"><a href="#Image.buildLchColorData-603"><span class="linenos">603</span></a>                <span class="c1">#  h  |                               |</span>
</span><span id="Image.buildLchColorData-604"><a href="#Image.buildLchColorData-604"><span class="linenos">604</span></a>                <span class="c1">#     +-------------------------------+</span>
</span><span id="Image.buildLchColorData-605"><a href="#Image.buildLchColorData-605"><span class="linenos">605</span></a>                <span class="c1">#                chroma</span>
</span><span id="Image.buildLchColorData-606"><a href="#Image.buildLchColorData-606"><span class="linenos">606</span></a>                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">xmin</span><span class="p">,</span><span class="n">xmax</span><span class="p">):</span>
</span><span id="Image.buildLchColorData-607"><a href="#Image.buildLchColorData-607"><span class="linenos">607</span></a>                    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ymin</span><span class="p">,</span><span class="n">ymax</span><span class="p">):</span>
</span><span id="Image.buildLchColorData-608"><a href="#Image.buildLchColorData-608"><span class="linenos">608</span></a>                        <span class="n">u</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="n">x</span><span class="o">/</span><span class="p">(</span><span class="n">xmax</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="n">y</span><span class="o">/</span><span class="p">(</span><span class="n">ymax</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</span><span id="Image.buildLchColorData-609"><a href="#Image.buildLchColorData-609"><span class="linenos">609</span></a>                        <span class="n">cu</span> <span class="o">=</span> <span class="n">cmin</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">u</span><span class="p">)</span> <span class="o">+</span> <span class="n">cmax</span><span class="o">*</span><span class="n">u</span>
</span><span id="Image.buildLchColorData-610"><a href="#Image.buildLchColorData-610"><span class="linenos">610</span></a>                        <span class="k">if</span> <span class="n">hmin</span> <span class="o">&lt;=</span> <span class="n">hmax</span><span class="p">:</span>
</span><span id="Image.buildLchColorData-611"><a href="#Image.buildLchColorData-611"><span class="linenos">611</span></a>                            <span class="n">hv</span> <span class="o">=</span> <span class="n">hmin</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">v</span><span class="p">)</span> <span class="o">+</span> <span class="n">hmax</span><span class="o">*</span><span class="n">v</span>
</span><span id="Image.buildLchColorData-612"><a href="#Image.buildLchColorData-612"><span class="linenos">612</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="Image.buildLchColorData-613"><a href="#Image.buildLchColorData-613"><span class="linenos">613</span></a>                            <span class="c1"># hmin = 340 / hmax=20 -&gt; hmin = hmin-360 &gt;&gt; hmin = -20, hmax =20</span>
</span><span id="Image.buildLchColorData-614"><a href="#Image.buildLchColorData-614"><span class="linenos">614</span></a>                            <span class="n">hv</span> <span class="o">=</span> <span class="p">(</span><span class="n">hmin</span><span class="o">-</span><span class="mi">360</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">v</span><span class="p">)</span> <span class="o">+</span> <span class="n">hmax</span><span class="o">*</span><span class="n">v</span>
</span><span id="Image.buildLchColorData-615"><a href="#Image.buildLchColorData-615"><span class="linenos">615</span></a>                            <span class="k">if</span> <span class="n">hv</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span> <span class="n">hv</span> <span class="o">=</span> <span class="mi">360</span> <span class="o">+</span><span class="n">hv</span>
</span><span id="Image.buildLchColorData-616"><a href="#Image.buildLchColorData-616"><span class="linenos">616</span></a>                        <span class="n">LL</span> <span class="o">=</span> <span class="p">(</span><span class="n">Lmin</span><span class="o">+</span><span class="n">Lmax</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span>
</span><span id="Image.buildLchColorData-617"><a href="#Image.buildLchColorData-617"><span class="linenos">617</span></a>                        <span class="n">colorData</span><span class="p">[</span><span class="n">y</span><span class="p">,</span><span class="n">x</span><span class="p">,:]</span> <span class="o">=</span> <span class="p">[</span><span class="n">LL</span><span class="p">,</span><span class="n">cu</span><span class="p">,</span><span class="n">hv</span><span class="p">]</span>
</span><span id="Image.buildLchColorData-618"><a href="#Image.buildLchColorData-618"><span class="linenos">618</span></a>        <span class="k">elif</span> <span class="n">width</span> <span class="o">==</span> <span class="s1">&#39;h&#39;</span><span class="p">:</span>
</span><span id="Image.buildLchColorData-619"><a href="#Image.buildLchColorData-619"><span class="linenos">619</span></a>            <span class="k">if</span> <span class="n">height</span><span class="o">==</span><span class="s1">&#39;L&#39;</span><span class="p">:</span>
</span><span id="Image.buildLchColorData-620"><a href="#Image.buildLchColorData-620"><span class="linenos">620</span></a>                <span class="c1">#     +-------------------------------+</span>
</span><span id="Image.buildLchColorData-621"><a href="#Image.buildLchColorData-621"><span class="linenos">621</span></a>                <span class="c1">#  L  |                               |</span>
</span><span id="Image.buildLchColorData-622"><a href="#Image.buildLchColorData-622"><span class="linenos">622</span></a>                <span class="c1">#     +-------------------------------+</span>
</span><span id="Image.buildLchColorData-623"><a href="#Image.buildLchColorData-623"><span class="linenos">623</span></a>                <span class="c1">#                hue</span>
</span><span id="Image.buildLchColorData-624"><a href="#Image.buildLchColorData-624"><span class="linenos">624</span></a>                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">xmin</span><span class="p">,</span><span class="n">xmax</span><span class="p">):</span>
</span><span id="Image.buildLchColorData-625"><a href="#Image.buildLchColorData-625"><span class="linenos">625</span></a>                    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ymin</span><span class="p">,</span><span class="n">ymax</span><span class="p">):</span>
</span><span id="Image.buildLchColorData-626"><a href="#Image.buildLchColorData-626"><span class="linenos">626</span></a>                        <span class="n">u</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="n">x</span><span class="o">/</span><span class="p">(</span><span class="n">xmax</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="n">y</span><span class="o">/</span><span class="p">(</span><span class="n">ymax</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</span><span id="Image.buildLchColorData-627"><a href="#Image.buildLchColorData-627"><span class="linenos">627</span></a>                        <span class="k">if</span> <span class="n">hmin</span> <span class="o">&lt;=</span> <span class="n">hmax</span><span class="p">:</span>
</span><span id="Image.buildLchColorData-628"><a href="#Image.buildLchColorData-628"><span class="linenos">628</span></a>                            <span class="n">hu</span> <span class="o">=</span> <span class="n">hmin</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">u</span><span class="p">)</span> <span class="o">+</span> <span class="n">hmax</span><span class="o">*</span><span class="n">u</span>
</span><span id="Image.buildLchColorData-629"><a href="#Image.buildLchColorData-629"><span class="linenos">629</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="Image.buildLchColorData-630"><a href="#Image.buildLchColorData-630"><span class="linenos">630</span></a>                            <span class="c1"># hmin = 340 / hmax=20 -&gt; hmin = hmin-360 &gt;&gt; hmin = -20, hmax =20</span>
</span><span id="Image.buildLchColorData-631"><a href="#Image.buildLchColorData-631"><span class="linenos">631</span></a>                            <span class="n">hu</span> <span class="o">=</span> <span class="p">(</span><span class="n">hmin</span><span class="o">-</span><span class="mi">360</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">u</span><span class="p">)</span> <span class="o">+</span> <span class="n">hmax</span><span class="o">*</span><span class="n">u</span>
</span><span id="Image.buildLchColorData-632"><a href="#Image.buildLchColorData-632"><span class="linenos">632</span></a>                            <span class="k">if</span> <span class="n">hu</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span> <span class="n">hv</span> <span class="o">=</span> <span class="mi">360</span> <span class="o">+</span><span class="n">hu</span>
</span><span id="Image.buildLchColorData-633"><a href="#Image.buildLchColorData-633"><span class="linenos">633</span></a>                        <span class="n">Lv</span> <span class="o">=</span> <span class="n">Lmin</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">v</span><span class="p">)</span><span class="o">+</span><span class="n">Lmax</span><span class="o">*</span><span class="n">v</span>
</span><span id="Image.buildLchColorData-634"><a href="#Image.buildLchColorData-634"><span class="linenos">634</span></a>                        <span class="n">cc</span> <span class="o">=</span> <span class="p">(</span><span class="n">cmin</span><span class="o">+</span><span class="n">cmax</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span>
</span><span id="Image.buildLchColorData-635"><a href="#Image.buildLchColorData-635"><span class="linenos">635</span></a>                        <span class="n">colorData</span><span class="p">[</span><span class="n">y</span><span class="p">,</span><span class="n">x</span><span class="p">,:]</span> <span class="o">=</span> <span class="p">[</span><span class="n">Lv</span><span class="p">,</span><span class="n">cc</span><span class="p">,</span><span class="n">hu</span><span class="p">]</span>
</span><span id="Image.buildLchColorData-636"><a href="#Image.buildLchColorData-636"><span class="linenos">636</span></a>            <span class="k">elif</span> <span class="n">height</span><span class="o">==</span><span class="s1">&#39;c&#39;</span><span class="p">:</span>
</span><span id="Image.buildLchColorData-637"><a href="#Image.buildLchColorData-637"><span class="linenos">637</span></a>                <span class="c1">#     +-------------------------------+</span>
</span><span id="Image.buildLchColorData-638"><a href="#Image.buildLchColorData-638"><span class="linenos">638</span></a>                <span class="c1">#  c  |                               |</span>
</span><span id="Image.buildLchColorData-639"><a href="#Image.buildLchColorData-639"><span class="linenos">639</span></a>                <span class="c1">#     +-------------------------------+</span>
</span><span id="Image.buildLchColorData-640"><a href="#Image.buildLchColorData-640"><span class="linenos">640</span></a>                <span class="c1">#                hue</span>
</span><span id="Image.buildLchColorData-641"><a href="#Image.buildLchColorData-641"><span class="linenos">641</span></a>                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">xmin</span><span class="p">,</span><span class="n">xmax</span><span class="p">):</span>
</span><span id="Image.buildLchColorData-642"><a href="#Image.buildLchColorData-642"><span class="linenos">642</span></a>                    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ymin</span><span class="p">,</span><span class="n">ymax</span><span class="p">):</span>
</span><span id="Image.buildLchColorData-643"><a href="#Image.buildLchColorData-643"><span class="linenos">643</span></a>                        <span class="n">u</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="n">x</span><span class="o">/</span><span class="p">(</span><span class="n">xmax</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="n">y</span><span class="o">/</span><span class="p">(</span><span class="n">ymax</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
</span><span id="Image.buildLchColorData-644"><a href="#Image.buildLchColorData-644"><span class="linenos">644</span></a>                        <span class="k">if</span> <span class="n">hmin</span> <span class="o">&lt;=</span> <span class="n">hmax</span><span class="p">:</span>
</span><span id="Image.buildLchColorData-645"><a href="#Image.buildLchColorData-645"><span class="linenos">645</span></a>                            <span class="n">hu</span> <span class="o">=</span> <span class="n">hmin</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">u</span><span class="p">)</span> <span class="o">+</span> <span class="n">hmax</span><span class="o">*</span><span class="n">u</span>
</span><span id="Image.buildLchColorData-646"><a href="#Image.buildLchColorData-646"><span class="linenos">646</span></a>                        <span class="k">else</span><span class="p">:</span>
</span><span id="Image.buildLchColorData-647"><a href="#Image.buildLchColorData-647"><span class="linenos">647</span></a>                            <span class="c1"># hmin = 340 / hmax=20 -&gt; hmin = hmin-360 &gt;&gt; hmin = -20, hmax =20</span>
</span><span id="Image.buildLchColorData-648"><a href="#Image.buildLchColorData-648"><span class="linenos">648</span></a>                            <span class="n">hu</span> <span class="o">=</span> <span class="p">(</span><span class="n">hmin</span><span class="o">-</span><span class="mi">360</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">u</span><span class="p">)</span> <span class="o">+</span> <span class="n">hmax</span><span class="o">*</span><span class="n">u</span>
</span><span id="Image.buildLchColorData-649"><a href="#Image.buildLchColorData-649"><span class="linenos">649</span></a>                            <span class="k">if</span> <span class="n">hu</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span> <span class="n">hv</span> <span class="o">=</span> <span class="mi">360</span> <span class="o">+</span><span class="n">hu</span>
</span><span id="Image.buildLchColorData-650"><a href="#Image.buildLchColorData-650"><span class="linenos">650</span></a>                        <span class="n">cv</span> <span class="o">=</span> <span class="n">cmin</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="o">-</span><span class="n">v</span><span class="p">)</span><span class="o">+</span><span class="n">cmax</span><span class="o">*</span><span class="n">v</span>
</span><span id="Image.buildLchColorData-651"><a href="#Image.buildLchColorData-651"><span class="linenos">651</span></a>                        <span class="n">LL</span> <span class="o">=</span> <span class="p">(</span><span class="n">Lmin</span><span class="o">+</span><span class="n">Lmax</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span>
</span><span id="Image.buildLchColorData-652"><a href="#Image.buildLchColorData-652"><span class="linenos">652</span></a>                        <span class="n">colorData</span><span class="p">[</span><span class="n">y</span><span class="p">,</span><span class="n">x</span><span class="p">,:]</span> <span class="o">=</span> <span class="p">[</span><span class="n">LL</span><span class="p">,</span><span class="n">cv</span><span class="p">,</span><span class="n">hu</span><span class="p">]</span>
</span><span id="Image.buildLchColorData-653"><a href="#Image.buildLchColorData-653"><span class="linenos">653</span></a>
</span><span id="Image.buildLchColorData-654"><a href="#Image.buildLchColorData-654"><span class="linenos">654</span></a>        <span class="k">return</span> <span class="n">colorData</span>
</span></pre></div>


            <div class="docstring"><p>Generate synthetic LCH color data for visualization and testing.</p>

<p>Creates artificial color data in LCH space with specified lightness,
chroma, and hue ranges. Useful for color space visualization and
testing color transformations.</p>

<p>Args:
    L (tuple): Lightness range (min, max)
    c (tuple): Chroma range (min, max) 
    h (tuple): Hue range (min, max)
    size (tuple): Output image dimensions (height, width)
    width (str): Primary axis for width ('L', 'c', or 'h')
    height (str): Primary axis for height ('L', 'c', or 'h')</p>

<p>Returns:
    numpy.ndarray: Generated LCH color data with shape (height, width, 3)</p>
</div>


                            </div>
                            <div id="Image.split" class="classattr">
                                        <input id="Image.split-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">split</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">widthSegment</span>, </span><span class="param"><span class="n">heightSegment</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Image.split-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Image.split"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Image.split-656"><a href="#Image.split-656"><span class="linenos">656</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">split</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">widthSegment</span><span class="p">,</span><span class="n">heightSegment</span><span class="p">):</span>
</span><span id="Image.split-657"><a href="#Image.split-657"><span class="linenos">657</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Image.split-658"><a href="#Image.split-658"><span class="linenos">658</span></a><span class="sd">        Divide the image into a grid of sub-images.</span>
</span><span id="Image.split-659"><a href="#Image.split-659"><span class="linenos">659</span></a><span class="sd">        </span>
</span><span id="Image.split-660"><a href="#Image.split-660"><span class="linenos">660</span></a><span class="sd">        Splits the current image into widthSegment × heightSegment sub-images,</span>
</span><span id="Image.split-661"><a href="#Image.split-661"><span class="linenos">661</span></a><span class="sd">        each maintaining the same properties as the original image.</span>
</span><span id="Image.split-662"><a href="#Image.split-662"><span class="linenos">662</span></a>
</span><span id="Image.split-663"><a href="#Image.split-663"><span class="linenos">663</span></a><span class="sd">        Args:</span>
</span><span id="Image.split-664"><a href="#Image.split-664"><span class="linenos">664</span></a><span class="sd">            widthSegment (int): Number of horizontal segments</span>
</span><span id="Image.split-665"><a href="#Image.split-665"><span class="linenos">665</span></a><span class="sd">            heightSegment (int): Number of vertical segments</span>
</span><span id="Image.split-666"><a href="#Image.split-666"><span class="linenos">666</span></a>
</span><span id="Image.split-667"><a href="#Image.split-667"><span class="linenos">667</span></a><span class="sd">        Returns:</span>
</span><span id="Image.split-668"><a href="#Image.split-668"><span class="linenos">668</span></a><span class="sd">            list: 2D list of Image objects representing the sub-images</span>
</span><span id="Image.split-669"><a href="#Image.split-669"><span class="linenos">669</span></a><span class="sd">                 Arranged as [row][column] where each element is an Image</span>
</span><span id="Image.split-670"><a href="#Image.split-670"><span class="linenos">670</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Image.split-671"><a href="#Image.split-671"><span class="linenos">671</span></a>        <span class="n">imageHeight</span><span class="p">,</span><span class="n">imageWidth</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">colorData</span><span class="o">.</span><span class="n">shape</span>
</span><span id="Image.split-672"><a href="#Image.split-672"><span class="linenos">672</span></a>        <span class="n">widthLimit</span> <span class="o">=</span> <span class="p">[(</span><span class="n">i</span><span class="o">*</span><span class="p">(</span><span class="n">imageWidth</span><span class="o">//</span><span class="n">widthSegment</span><span class="p">))</span>  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">widthSegment</span><span class="p">)]</span><span class="o">+</span><span class="p">[</span><span class="n">imageWidth</span><span class="p">]</span>
</span><span id="Image.split-673"><a href="#Image.split-673"><span class="linenos">673</span></a>        <span class="n">heightLimit</span> <span class="o">=</span> <span class="p">[(</span><span class="n">i</span><span class="o">*</span><span class="p">(</span><span class="n">imageHeight</span><span class="o">//</span><span class="n">heightSegment</span><span class="p">))</span>  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">widthSegment</span><span class="p">)]</span><span class="o">+</span><span class="p">[</span><span class="n">imageHeight</span><span class="p">]</span>
</span><span id="Image.split-674"><a href="#Image.split-674"><span class="linenos">674</span></a>
</span><span id="Image.split-675"><a href="#Image.split-675"><span class="linenos">675</span></a>        <span class="n">res</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Image.split-676"><a href="#Image.split-676"><span class="linenos">676</span></a>
</span><span id="Image.split-677"><a href="#Image.split-677"><span class="linenos">677</span></a>        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">heightSegment</span><span class="p">):</span>
</span><span id="Image.split-678"><a href="#Image.split-678"><span class="linenos">678</span></a>            <span class="n">lines</span> <span class="o">=</span> <span class="p">[]</span>
</span><span id="Image.split-679"><a href="#Image.split-679"><span class="linenos">679</span></a>            <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">widthSegment</span><span class="p">):</span>
</span><span id="Image.split-680"><a href="#Image.split-680"><span class="linenos">680</span></a>                <span class="n">cData</span> <span class="o">=</span>  <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">colorData</span><span class="p">[(</span><span class="n">heightLimit</span><span class="p">[</span><span class="n">line</span><span class="p">]):(</span><span class="n">heightLimit</span><span class="p">[</span><span class="n">line</span><span class="o">+</span><span class="mi">1</span><span class="p">]),(</span><span class="n">widthLimit</span><span class="p">[</span><span class="n">col</span><span class="p">]):(</span><span class="n">widthLimit</span><span class="p">[</span><span class="n">col</span><span class="o">+</span><span class="mi">1</span><span class="p">]),:])</span>
</span><span id="Image.split-681"><a href="#Image.split-681"><span class="linenos">681</span></a>                <span class="n">imgTemp</span> <span class="o">=</span> <span class="n">Image</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">),</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">),</span> <span class="n">cData</span><span class="p">,</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">type</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">linear</span><span class="p">,</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">colorSpace</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">scalingFactor</span><span class="p">)</span>
</span><span id="Image.split-682"><a href="#Image.split-682"><span class="linenos">682</span></a>                <span class="n">imgTemp</span><span class="o">.</span><span class="n">metadata</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">metadata</span><span class="p">)</span>
</span><span id="Image.split-683"><a href="#Image.split-683"><span class="linenos">683</span></a>                <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">imgTemp</span><span class="p">)</span>
</span><span id="Image.split-684"><a href="#Image.split-684"><span class="linenos">684</span></a>            <span class="n">res</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>
</span><span id="Image.split-685"><a href="#Image.split-685"><span class="linenos">685</span></a>
</span><span id="Image.split-686"><a href="#Image.split-686"><span class="linenos">686</span></a>        <span class="k">return</span> <span class="n">res</span>
</span></pre></div>


            <div class="docstring"><p>Divide the image into a grid of sub-images.</p>

<p>Splits the current image into widthSegment × heightSegment sub-images,
each maintaining the same properties as the original image.</p>

<p>Args:
    widthSegment (int): Number of horizontal segments
    heightSegment (int): Number of vertical segments</p>

<p>Returns:
    list: 2D list of Image objects representing the sub-images
         Arranged as [row][column] where each element is an Image</p>
</div>


                            </div>
                            <div id="Image.merge" class="classattr">
                                        <input id="Image.merge-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-staticmethod">@staticmethod</div>

        <span class="def">def</span>
        <span class="name">merge</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">imgList</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Image.merge-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Image.merge"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Image.merge-688"><a href="#Image.merge-688"><span class="linenos">688</span></a>    <span class="nd">@staticmethod</span>
</span><span id="Image.merge-689"><a href="#Image.merge-689"><span class="linenos">689</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">merge</span><span class="p">(</span><span class="n">imgList</span><span class="p">):</span>
</span><span id="Image.merge-690"><a href="#Image.merge-690"><span class="linenos">690</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Image.merge-691"><a href="#Image.merge-691"><span class="linenos">691</span></a><span class="sd">        Combine a 2D list of images into a single merged image.</span>
</span><span id="Image.merge-692"><a href="#Image.merge-692"><span class="linenos">692</span></a><span class="sd">        </span>
</span><span id="Image.merge-693"><a href="#Image.merge-693"><span class="linenos">693</span></a><span class="sd">        Reconstructs a complete image from sub-images that were previously split,</span>
</span><span id="Image.merge-694"><a href="#Image.merge-694"><span class="linenos">694</span></a><span class="sd">        assuming all sub-images have compatible dimensions and properties.</span>
</span><span id="Image.merge-695"><a href="#Image.merge-695"><span class="linenos">695</span></a>
</span><span id="Image.merge-696"><a href="#Image.merge-696"><span class="linenos">696</span></a><span class="sd">        Args:</span>
</span><span id="Image.merge-697"><a href="#Image.merge-697"><span class="linenos">697</span></a><span class="sd">            imgList (list): 2D list of Image objects to merge</span>
</span><span id="Image.merge-698"><a href="#Image.merge-698"><span class="linenos">698</span></a>
</span><span id="Image.merge-699"><a href="#Image.merge-699"><span class="linenos">699</span></a><span class="sd">        Returns:</span>
</span><span id="Image.merge-700"><a href="#Image.merge-700"><span class="linenos">700</span></a><span class="sd">            Image: Single merged image with combined pixel data</span>
</span><span id="Image.merge-701"><a href="#Image.merge-701"><span class="linenos">701</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Image.merge-702"><a href="#Image.merge-702"><span class="linenos">702</span></a>        <span class="n">totalWidth</span><span class="o">=</span> <span class="n">functools</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">:</span> <span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">,</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">img</span><span class="p">:</span> <span class="n">img</span><span class="o">.</span><span class="n">colorData</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">imgList</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span><span class="mi">0</span><span class="p">)</span>
</span><span id="Image.merge-703"><a href="#Image.merge-703"><span class="linenos">703</span></a>        <span class="n">totalHeight</span><span class="o">=</span> <span class="n">functools</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">:</span> <span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">,</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">imgList</span><span class="p">:</span> <span class="n">imgList</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">imgList</span><span class="p">),</span><span class="mi">0</span><span class="p">)</span>
</span><span id="Image.merge-704"><a href="#Image.merge-704"><span class="linenos">704</span></a>
</span><span id="Image.merge-705"><a href="#Image.merge-705"><span class="linenos">705</span></a>        <span class="n">cData</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">totalHeight</span><span class="p">,</span><span class="n">totalWidth</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
</span><span id="Image.merge-706"><a href="#Image.merge-706"><span class="linenos">706</span></a>
</span><span id="Image.merge-707"><a href="#Image.merge-707"><span class="linenos">707</span></a>        <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="Image.merge-708"><a href="#Image.merge-708"><span class="linenos">708</span></a>        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">imgList</span><span class="p">:</span>
</span><span id="Image.merge-709"><a href="#Image.merge-709"><span class="linenos">709</span></a>            <span class="n">x</span><span class="o">=</span><span class="mi">0</span>
</span><span id="Image.merge-710"><a href="#Image.merge-710"><span class="linenos">710</span></a>            <span class="k">for</span> <span class="n">img</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
</span><span id="Image.merge-711"><a href="#Image.merge-711"><span class="linenos">711</span></a>                <span class="n">cData</span><span class="p">[</span><span class="n">y</span><span class="p">:(</span><span class="n">y</span><span class="o">+</span><span class="n">img</span><span class="o">.</span><span class="n">colorData</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span><span class="n">x</span><span class="p">:(</span><span class="n">x</span><span class="o">+</span><span class="n">img</span><span class="o">.</span><span class="n">colorData</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]),:]</span> <span class="o">=</span> <span class="n">img</span><span class="o">.</span><span class="n">colorData</span>
</span><span id="Image.merge-712"><a href="#Image.merge-712"><span class="linenos">712</span></a>                <span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="o">+</span><span class="n">img</span><span class="o">.</span><span class="n">colorData</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</span><span id="Image.merge-713"><a href="#Image.merge-713"><span class="linenos">713</span></a>            <span class="n">y</span> <span class="o">=</span> <span class="n">y</span> <span class="o">+</span> <span class="n">line</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">colorData</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span><span id="Image.merge-714"><a href="#Image.merge-714"><span class="linenos">714</span></a>        <span class="k">return</span> <span class="n">Image</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">imgList</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">path</span><span class="p">),</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">imgList</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="p">),</span> <span class="n">cData</span><span class="p">,</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">imgList</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">type</span><span class="p">),</span> <span class="n">imgList</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">linear</span><span class="p">,</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">imgList</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">colorSpace</span><span class="p">),</span> <span class="n">imgList</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">scalingFactor</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Combine a 2D list of images into a single merged image.</p>

<p>Reconstructs a complete image from sub-images that were previously split,
assuming all sub-images have compatible dimensions and properties.</p>

<p>Args:
    imgList (list): 2D list of Image objects to merge</p>

<p>Returns:
    Image: Single merged image with combined pixel data</p>
</div>


                            </div>
                </section>
                <section id="ColorSpace">
                            <input id="ColorSpace-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">ColorSpace</span>:

                <label class="view-source-button" for="ColorSpace-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ColorSpace"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ColorSpace-718"><a href="#ColorSpace-718"><span class="linenos">718</span></a><span class="k">class</span><span class="w"> </span><span class="nc">ColorSpace</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
</span><span id="ColorSpace-719"><a href="#ColorSpace-719"><span class="linenos">719</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ColorSpace-720"><a href="#ColorSpace-720"><span class="linenos">720</span></a><span class="sd">    Color space definitions and factory methods for HDR imaging.</span>
</span><span id="ColorSpace-721"><a href="#ColorSpace-721"><span class="linenos">721</span></a><span class="sd">    </span>
</span><span id="ColorSpace-722"><a href="#ColorSpace-722"><span class="linenos">722</span></a><span class="sd">    This class provides static methods for creating and managing various color</span>
</span><span id="ColorSpace-723"><a href="#ColorSpace-723"><span class="linenos">723</span></a><span class="sd">    spaces used in HDR image processing. It serves as a centralized interface</span>
</span><span id="ColorSpace-724"><a href="#ColorSpace-724"><span class="linenos">724</span></a><span class="sd">    for color space creation and configuration.</span>
</span><span id="ColorSpace-725"><a href="#ColorSpace-725"><span class="linenos">725</span></a><span class="sd">    </span>
</span><span id="ColorSpace-726"><a href="#ColorSpace-726"><span class="linenos">726</span></a><span class="sd">    Static Methods:</span>
</span><span id="ColorSpace-727"><a href="#ColorSpace-727"><span class="linenos">727</span></a><span class="sd">        Lab: Create Lab color space definition</span>
</span><span id="ColorSpace-728"><a href="#ColorSpace-728"><span class="linenos">728</span></a><span class="sd">        Lch: Create LCH color space definition  </span>
</span><span id="ColorSpace-729"><a href="#ColorSpace-729"><span class="linenos">729</span></a><span class="sd">        sRGB: Create standard sRGB color space</span>
</span><span id="ColorSpace-730"><a href="#ColorSpace-730"><span class="linenos">730</span></a><span class="sd">        scRGB: Create extended sRGB color space for HDR</span>
</span><span id="ColorSpace-731"><a href="#ColorSpace-731"><span class="linenos">731</span></a><span class="sd">        XYZ: Create XYZ color space definition</span>
</span><span id="ColorSpace-732"><a href="#ColorSpace-732"><span class="linenos">732</span></a><span class="sd">        build: Factory method for creating color spaces by name</span>
</span><span id="ColorSpace-733"><a href="#ColorSpace-733"><span class="linenos">733</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="ColorSpace-734"><a href="#ColorSpace-734"><span class="linenos">734</span></a>
</span><span id="ColorSpace-735"><a href="#ColorSpace-735"><span class="linenos">735</span></a>    <span class="nd">@staticmethod</span>
</span><span id="ColorSpace-736"><a href="#ColorSpace-736"><span class="linenos">736</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">Lab</span><span class="p">():</span>
</span><span id="ColorSpace-737"><a href="#ColorSpace-737"><span class="linenos">737</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ColorSpace-738"><a href="#ColorSpace-738"><span class="linenos">738</span></a><span class="sd">        Create a Lab color space definition for HDR processing.</span>
</span><span id="ColorSpace-739"><a href="#ColorSpace-739"><span class="linenos">739</span></a><span class="sd">        </span>
</span><span id="ColorSpace-740"><a href="#ColorSpace-740"><span class="linenos">740</span></a><span class="sd">        Returns:</span>
</span><span id="ColorSpace-741"><a href="#ColorSpace-741"><span class="linenos">741</span></a><span class="sd">            colour.RGB_Colourspace: Lab color space configuration</span>
</span><span id="ColorSpace-742"><a href="#ColorSpace-742"><span class="linenos">742</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ColorSpace-743"><a href="#ColorSpace-743"><span class="linenos">743</span></a>        <span class="k">return</span> <span class="n">colour</span><span class="o">.</span><span class="n">RGB_Colourspace</span><span class="p">(</span><span class="s1">&#39;Lab&#39;</span><span class="p">,</span> <span class="n">primaries</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.73470</span><span class="p">,</span> <span class="mf">0.26530</span><span class="p">,</span> <span class="mf">0.00000</span><span class="p">,</span> <span class="mf">1.00000</span><span class="p">,</span> <span class="mf">0.00010</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.07700</span><span class="p">]),</span> <span class="n">whitepoint</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.32168</span><span class="p">,</span> <span class="mf">0.33767</span><span class="p">]))</span>
</span><span id="ColorSpace-744"><a href="#ColorSpace-744"><span class="linenos">744</span></a>     
</span><span id="ColorSpace-745"><a href="#ColorSpace-745"><span class="linenos">745</span></a>    <span class="nd">@staticmethod</span>                                 
</span><span id="ColorSpace-746"><a href="#ColorSpace-746"><span class="linenos">746</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">Lch</span><span class="p">():</span>
</span><span id="ColorSpace-747"><a href="#ColorSpace-747"><span class="linenos">747</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ColorSpace-748"><a href="#ColorSpace-748"><span class="linenos">748</span></a><span class="sd">        Create an LCH color space definition for HDR processing.</span>
</span><span id="ColorSpace-749"><a href="#ColorSpace-749"><span class="linenos">749</span></a><span class="sd">        </span>
</span><span id="ColorSpace-750"><a href="#ColorSpace-750"><span class="linenos">750</span></a><span class="sd">        Returns:</span>
</span><span id="ColorSpace-751"><a href="#ColorSpace-751"><span class="linenos">751</span></a><span class="sd">            colour.RGB_Colourspace: LCH color space configuration</span>
</span><span id="ColorSpace-752"><a href="#ColorSpace-752"><span class="linenos">752</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ColorSpace-753"><a href="#ColorSpace-753"><span class="linenos">753</span></a>        <span class="k">return</span> <span class="n">colour</span><span class="o">.</span><span class="n">RGB_Colourspace</span><span class="p">(</span><span class="s1">&#39;Lch&#39;</span><span class="p">,</span> <span class="n">primaries</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.73470</span><span class="p">,</span> <span class="mf">0.26530</span><span class="p">,</span> <span class="mf">0.00000</span><span class="p">,</span> <span class="mf">1.00000</span><span class="p">,</span> <span class="mf">0.00010</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.07700</span><span class="p">]),</span> <span class="n">whitepoint</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.32168</span><span class="p">,</span> <span class="mf">0.33767</span><span class="p">]))</span>
</span><span id="ColorSpace-754"><a href="#ColorSpace-754"><span class="linenos">754</span></a>
</span><span id="ColorSpace-755"><a href="#ColorSpace-755"><span class="linenos">755</span></a>    <span class="nd">@staticmethod</span>
</span><span id="ColorSpace-756"><a href="#ColorSpace-756"><span class="linenos">756</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">sRGB</span><span class="p">():</span>
</span><span id="ColorSpace-757"><a href="#ColorSpace-757"><span class="linenos">757</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ColorSpace-758"><a href="#ColorSpace-758"><span class="linenos">758</span></a><span class="sd">        Create a standard sRGB color space definition.</span>
</span><span id="ColorSpace-759"><a href="#ColorSpace-759"><span class="linenos">759</span></a><span class="sd">        </span>
</span><span id="ColorSpace-760"><a href="#ColorSpace-760"><span class="linenos">760</span></a><span class="sd">        Returns:</span>
</span><span id="ColorSpace-761"><a href="#ColorSpace-761"><span class="linenos">761</span></a><span class="sd">            colour.RGB_Colourspace: sRGB color space configuration</span>
</span><span id="ColorSpace-762"><a href="#ColorSpace-762"><span class="linenos">762</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ColorSpace-763"><a href="#ColorSpace-763"><span class="linenos">763</span></a>        <span class="k">return</span> <span class="n">colour</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">RGB_COLOURSPACES</span><span class="p">[</span><span class="s1">&#39;sRGB&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="ColorSpace-764"><a href="#ColorSpace-764"><span class="linenos">764</span></a>
</span><span id="ColorSpace-765"><a href="#ColorSpace-765"><span class="linenos">765</span></a>    <span class="nd">@staticmethod</span>
</span><span id="ColorSpace-766"><a href="#ColorSpace-766"><span class="linenos">766</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">scRGB</span><span class="p">():</span>
</span><span id="ColorSpace-767"><a href="#ColorSpace-767"><span class="linenos">767</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ColorSpace-768"><a href="#ColorSpace-768"><span class="linenos">768</span></a><span class="sd">        Create an extended sRGB color space for HDR content.</span>
</span><span id="ColorSpace-769"><a href="#ColorSpace-769"><span class="linenos">769</span></a><span class="sd">        </span>
</span><span id="ColorSpace-770"><a href="#ColorSpace-770"><span class="linenos">770</span></a><span class="sd">        This variant of sRGB removes the gamma correction for HDR processing,</span>
</span><span id="ColorSpace-771"><a href="#ColorSpace-771"><span class="linenos">771</span></a><span class="sd">        providing linear RGB values with extended range.</span>
</span><span id="ColorSpace-772"><a href="#ColorSpace-772"><span class="linenos">772</span></a><span class="sd">        </span>
</span><span id="ColorSpace-773"><a href="#ColorSpace-773"><span class="linenos">773</span></a><span class="sd">        Returns:</span>
</span><span id="ColorSpace-774"><a href="#ColorSpace-774"><span class="linenos">774</span></a><span class="sd">            colour.RGB_Colourspace: Extended sRGB color space for HDR</span>
</span><span id="ColorSpace-775"><a href="#ColorSpace-775"><span class="linenos">775</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ColorSpace-776"><a href="#ColorSpace-776"><span class="linenos">776</span></a>        <span class="n">colorSpace</span> <span class="o">=</span> <span class="n">colour</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">RGB_COLOURSPACES</span><span class="p">[</span><span class="s1">&#39;sRGB&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="ColorSpace-777"><a href="#ColorSpace-777"><span class="linenos">777</span></a>        <span class="n">colorSpace</span><span class="o">.</span><span class="n">cctf_decoding</span><span class="o">=</span><span class="kc">None</span>
</span><span id="ColorSpace-778"><a href="#ColorSpace-778"><span class="linenos">778</span></a>        <span class="k">return</span> <span class="n">colorSpace</span>
</span><span id="ColorSpace-779"><a href="#ColorSpace-779"><span class="linenos">779</span></a>
</span><span id="ColorSpace-780"><a href="#ColorSpace-780"><span class="linenos">780</span></a>    <span class="nd">@staticmethod</span>
</span><span id="ColorSpace-781"><a href="#ColorSpace-781"><span class="linenos">781</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">XYZ</span><span class="p">():</span>
</span><span id="ColorSpace-782"><a href="#ColorSpace-782"><span class="linenos">782</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ColorSpace-783"><a href="#ColorSpace-783"><span class="linenos">783</span></a><span class="sd">        Create an XYZ color space definition.</span>
</span><span id="ColorSpace-784"><a href="#ColorSpace-784"><span class="linenos">784</span></a><span class="sd">        </span>
</span><span id="ColorSpace-785"><a href="#ColorSpace-785"><span class="linenos">785</span></a><span class="sd">        Returns:</span>
</span><span id="ColorSpace-786"><a href="#ColorSpace-786"><span class="linenos">786</span></a><span class="sd">            colour.RGB_Colourspace: XYZ color space configuration</span>
</span><span id="ColorSpace-787"><a href="#ColorSpace-787"><span class="linenos">787</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ColorSpace-788"><a href="#ColorSpace-788"><span class="linenos">788</span></a>        <span class="k">return</span> <span class="n">colour</span><span class="o">.</span><span class="n">RGB_Colourspace</span><span class="p">(</span><span class="s1">&#39;XYZ&#39;</span><span class="p">,</span> <span class="n">primaries</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.73470</span><span class="p">,</span> <span class="mf">0.26530</span><span class="p">,</span> <span class="mf">0.00000</span><span class="p">,</span> <span class="mf">1.00000</span><span class="p">,</span> <span class="mf">0.00010</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.07700</span><span class="p">]),</span> <span class="n">whitepoint</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.32168</span><span class="p">,</span> <span class="mf">0.33767</span><span class="p">]))</span>
</span><span id="ColorSpace-789"><a href="#ColorSpace-789"><span class="linenos">789</span></a>
</span><span id="ColorSpace-790"><a href="#ColorSpace-790"><span class="linenos">790</span></a>    <span class="nd">@staticmethod</span>
</span><span id="ColorSpace-791"><a href="#ColorSpace-791"><span class="linenos">791</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">build</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;sRGB&#39;</span><span class="p">):</span>
</span><span id="ColorSpace-792"><a href="#ColorSpace-792"><span class="linenos">792</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ColorSpace-793"><a href="#ColorSpace-793"><span class="linenos">793</span></a><span class="sd">        Factory method to create color spaces by name.</span>
</span><span id="ColorSpace-794"><a href="#ColorSpace-794"><span class="linenos">794</span></a><span class="sd">        </span>
</span><span id="ColorSpace-795"><a href="#ColorSpace-795"><span class="linenos">795</span></a><span class="sd">        Args:</span>
</span><span id="ColorSpace-796"><a href="#ColorSpace-796"><span class="linenos">796</span></a><span class="sd">            name (str, optional): Color space name (&#39;sRGB&#39;, &#39;scRGB&#39;, &#39;Lab&#39;, &#39;Lch&#39;, &#39;XYZ&#39;)</span>
</span><span id="ColorSpace-797"><a href="#ColorSpace-797"><span class="linenos">797</span></a><span class="sd">                                 Defaults to &#39;sRGB&#39;</span>
</span><span id="ColorSpace-798"><a href="#ColorSpace-798"><span class="linenos">798</span></a><span class="sd">        </span>
</span><span id="ColorSpace-799"><a href="#ColorSpace-799"><span class="linenos">799</span></a><span class="sd">        Returns:</span>
</span><span id="ColorSpace-800"><a href="#ColorSpace-800"><span class="linenos">800</span></a><span class="sd">            colour.RGB_Colourspace or None: Requested color space or None if unknown</span>
</span><span id="ColorSpace-801"><a href="#ColorSpace-801"><span class="linenos">801</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ColorSpace-802"><a href="#ColorSpace-802"><span class="linenos">802</span></a>        <span class="n">cs</span>  <span class="o">=</span> <span class="kc">None</span>
</span><span id="ColorSpace-803"><a href="#ColorSpace-803"><span class="linenos">803</span></a>        <span class="k">if</span> <span class="n">name</span><span class="o">==</span> <span class="s1">&#39;sRGB&#39;</span><span class="p">:</span> <span class="n">cs</span> <span class="o">=</span>  <span class="n">ColorSpace</span><span class="o">.</span><span class="n">sRGB</span><span class="p">()</span>
</span><span id="ColorSpace-804"><a href="#ColorSpace-804"><span class="linenos">804</span></a>        <span class="k">if</span> <span class="n">name</span><span class="o">==</span> <span class="s1">&#39;scRGB&#39;</span><span class="p">:</span> <span class="n">cs</span> <span class="o">=</span>  <span class="n">ColorSpace</span><span class="o">.</span><span class="n">scRGB</span><span class="p">()</span>
</span><span id="ColorSpace-805"><a href="#ColorSpace-805"><span class="linenos">805</span></a>        <span class="k">if</span> <span class="n">name</span><span class="o">==</span> <span class="s1">&#39;Lab&#39;</span> <span class="p">:</span> <span class="n">cs</span> <span class="o">=</span>  <span class="n">ColorSpace</span><span class="o">.</span><span class="n">Lab</span><span class="p">()</span>
</span><span id="ColorSpace-806"><a href="#ColorSpace-806"><span class="linenos">806</span></a>        <span class="k">if</span> <span class="n">name</span><span class="o">==</span> <span class="s1">&#39;Lch&#39;</span> <span class="p">:</span> <span class="n">cs</span> <span class="o">=</span>  <span class="n">ColorSpace</span><span class="o">.</span><span class="n">Lch</span><span class="p">()</span>
</span><span id="ColorSpace-807"><a href="#ColorSpace-807"><span class="linenos">807</span></a>        <span class="k">if</span> <span class="n">name</span><span class="o">==</span> <span class="s1">&#39;XYZ&#39;</span> <span class="p">:</span> <span class="n">cs</span> <span class="o">=</span>  <span class="n">ColorSpace</span><span class="o">.</span><span class="n">XYZ</span><span class="p">()</span>
</span><span id="ColorSpace-808"><a href="#ColorSpace-808"><span class="linenos">808</span></a>        <span class="k">return</span> <span class="n">cs</span> 
</span></pre></div>


            <div class="docstring"><p>Color space definitions and factory methods for HDR imaging.</p>

<p>This class provides static methods for creating and managing various color
spaces used in HDR image processing. It serves as a centralized interface
for color space creation and configuration.</p>

<p>Static Methods:
    Lab: Create Lab color space definition
    Lch: Create LCH color space definition<br />
    sRGB: Create standard sRGB color space
    scRGB: Create extended sRGB color space for HDR
    XYZ: Create XYZ color space definition
    build: Factory method for creating color spaces by name</p>
</div>


                            <div id="ColorSpace.Lab" class="classattr">
                                        <input id="ColorSpace.Lab-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-staticmethod">@staticmethod</div>

        <span class="def">def</span>
        <span class="name">Lab</span><span class="signature pdoc-code condensed">(<span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ColorSpace.Lab-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ColorSpace.Lab"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ColorSpace.Lab-735"><a href="#ColorSpace.Lab-735"><span class="linenos">735</span></a>    <span class="nd">@staticmethod</span>
</span><span id="ColorSpace.Lab-736"><a href="#ColorSpace.Lab-736"><span class="linenos">736</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">Lab</span><span class="p">():</span>
</span><span id="ColorSpace.Lab-737"><a href="#ColorSpace.Lab-737"><span class="linenos">737</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ColorSpace.Lab-738"><a href="#ColorSpace.Lab-738"><span class="linenos">738</span></a><span class="sd">        Create a Lab color space definition for HDR processing.</span>
</span><span id="ColorSpace.Lab-739"><a href="#ColorSpace.Lab-739"><span class="linenos">739</span></a><span class="sd">        </span>
</span><span id="ColorSpace.Lab-740"><a href="#ColorSpace.Lab-740"><span class="linenos">740</span></a><span class="sd">        Returns:</span>
</span><span id="ColorSpace.Lab-741"><a href="#ColorSpace.Lab-741"><span class="linenos">741</span></a><span class="sd">            colour.RGB_Colourspace: Lab color space configuration</span>
</span><span id="ColorSpace.Lab-742"><a href="#ColorSpace.Lab-742"><span class="linenos">742</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ColorSpace.Lab-743"><a href="#ColorSpace.Lab-743"><span class="linenos">743</span></a>        <span class="k">return</span> <span class="n">colour</span><span class="o">.</span><span class="n">RGB_Colourspace</span><span class="p">(</span><span class="s1">&#39;Lab&#39;</span><span class="p">,</span> <span class="n">primaries</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.73470</span><span class="p">,</span> <span class="mf">0.26530</span><span class="p">,</span> <span class="mf">0.00000</span><span class="p">,</span> <span class="mf">1.00000</span><span class="p">,</span> <span class="mf">0.00010</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.07700</span><span class="p">]),</span> <span class="n">whitepoint</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.32168</span><span class="p">,</span> <span class="mf">0.33767</span><span class="p">]))</span>
</span></pre></div>


            <div class="docstring"><p>Create a Lab color space definition for HDR processing.</p>

<p>Returns:
    colour.RGB_Colourspace: Lab color space configuration</p>
</div>


                            </div>
                            <div id="ColorSpace.Lch" class="classattr">
                                        <input id="ColorSpace.Lch-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-staticmethod">@staticmethod</div>

        <span class="def">def</span>
        <span class="name">Lch</span><span class="signature pdoc-code condensed">(<span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ColorSpace.Lch-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ColorSpace.Lch"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ColorSpace.Lch-745"><a href="#ColorSpace.Lch-745"><span class="linenos">745</span></a>    <span class="nd">@staticmethod</span>                                 
</span><span id="ColorSpace.Lch-746"><a href="#ColorSpace.Lch-746"><span class="linenos">746</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">Lch</span><span class="p">():</span>
</span><span id="ColorSpace.Lch-747"><a href="#ColorSpace.Lch-747"><span class="linenos">747</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ColorSpace.Lch-748"><a href="#ColorSpace.Lch-748"><span class="linenos">748</span></a><span class="sd">        Create an LCH color space definition for HDR processing.</span>
</span><span id="ColorSpace.Lch-749"><a href="#ColorSpace.Lch-749"><span class="linenos">749</span></a><span class="sd">        </span>
</span><span id="ColorSpace.Lch-750"><a href="#ColorSpace.Lch-750"><span class="linenos">750</span></a><span class="sd">        Returns:</span>
</span><span id="ColorSpace.Lch-751"><a href="#ColorSpace.Lch-751"><span class="linenos">751</span></a><span class="sd">            colour.RGB_Colourspace: LCH color space configuration</span>
</span><span id="ColorSpace.Lch-752"><a href="#ColorSpace.Lch-752"><span class="linenos">752</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ColorSpace.Lch-753"><a href="#ColorSpace.Lch-753"><span class="linenos">753</span></a>        <span class="k">return</span> <span class="n">colour</span><span class="o">.</span><span class="n">RGB_Colourspace</span><span class="p">(</span><span class="s1">&#39;Lch&#39;</span><span class="p">,</span> <span class="n">primaries</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.73470</span><span class="p">,</span> <span class="mf">0.26530</span><span class="p">,</span> <span class="mf">0.00000</span><span class="p">,</span> <span class="mf">1.00000</span><span class="p">,</span> <span class="mf">0.00010</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.07700</span><span class="p">]),</span> <span class="n">whitepoint</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.32168</span><span class="p">,</span> <span class="mf">0.33767</span><span class="p">]))</span>
</span></pre></div>


            <div class="docstring"><p>Create an LCH color space definition for HDR processing.</p>

<p>Returns:
    colour.RGB_Colourspace: LCH color space configuration</p>
</div>


                            </div>
                            <div id="ColorSpace.sRGB" class="classattr">
                                        <input id="ColorSpace.sRGB-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-staticmethod">@staticmethod</div>

        <span class="def">def</span>
        <span class="name">sRGB</span><span class="signature pdoc-code condensed">(<span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ColorSpace.sRGB-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ColorSpace.sRGB"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ColorSpace.sRGB-755"><a href="#ColorSpace.sRGB-755"><span class="linenos">755</span></a>    <span class="nd">@staticmethod</span>
</span><span id="ColorSpace.sRGB-756"><a href="#ColorSpace.sRGB-756"><span class="linenos">756</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">sRGB</span><span class="p">():</span>
</span><span id="ColorSpace.sRGB-757"><a href="#ColorSpace.sRGB-757"><span class="linenos">757</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ColorSpace.sRGB-758"><a href="#ColorSpace.sRGB-758"><span class="linenos">758</span></a><span class="sd">        Create a standard sRGB color space definition.</span>
</span><span id="ColorSpace.sRGB-759"><a href="#ColorSpace.sRGB-759"><span class="linenos">759</span></a><span class="sd">        </span>
</span><span id="ColorSpace.sRGB-760"><a href="#ColorSpace.sRGB-760"><span class="linenos">760</span></a><span class="sd">        Returns:</span>
</span><span id="ColorSpace.sRGB-761"><a href="#ColorSpace.sRGB-761"><span class="linenos">761</span></a><span class="sd">            colour.RGB_Colourspace: sRGB color space configuration</span>
</span><span id="ColorSpace.sRGB-762"><a href="#ColorSpace.sRGB-762"><span class="linenos">762</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ColorSpace.sRGB-763"><a href="#ColorSpace.sRGB-763"><span class="linenos">763</span></a>        <span class="k">return</span> <span class="n">colour</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">RGB_COLOURSPACES</span><span class="p">[</span><span class="s1">&#39;sRGB&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span></pre></div>


            <div class="docstring"><p>Create a standard sRGB color space definition.</p>

<p>Returns:
    colour.RGB_Colourspace: sRGB color space configuration</p>
</div>


                            </div>
                            <div id="ColorSpace.scRGB" class="classattr">
                                        <input id="ColorSpace.scRGB-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-staticmethod">@staticmethod</div>

        <span class="def">def</span>
        <span class="name">scRGB</span><span class="signature pdoc-code condensed">(<span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ColorSpace.scRGB-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ColorSpace.scRGB"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ColorSpace.scRGB-765"><a href="#ColorSpace.scRGB-765"><span class="linenos">765</span></a>    <span class="nd">@staticmethod</span>
</span><span id="ColorSpace.scRGB-766"><a href="#ColorSpace.scRGB-766"><span class="linenos">766</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">scRGB</span><span class="p">():</span>
</span><span id="ColorSpace.scRGB-767"><a href="#ColorSpace.scRGB-767"><span class="linenos">767</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ColorSpace.scRGB-768"><a href="#ColorSpace.scRGB-768"><span class="linenos">768</span></a><span class="sd">        Create an extended sRGB color space for HDR content.</span>
</span><span id="ColorSpace.scRGB-769"><a href="#ColorSpace.scRGB-769"><span class="linenos">769</span></a><span class="sd">        </span>
</span><span id="ColorSpace.scRGB-770"><a href="#ColorSpace.scRGB-770"><span class="linenos">770</span></a><span class="sd">        This variant of sRGB removes the gamma correction for HDR processing,</span>
</span><span id="ColorSpace.scRGB-771"><a href="#ColorSpace.scRGB-771"><span class="linenos">771</span></a><span class="sd">        providing linear RGB values with extended range.</span>
</span><span id="ColorSpace.scRGB-772"><a href="#ColorSpace.scRGB-772"><span class="linenos">772</span></a><span class="sd">        </span>
</span><span id="ColorSpace.scRGB-773"><a href="#ColorSpace.scRGB-773"><span class="linenos">773</span></a><span class="sd">        Returns:</span>
</span><span id="ColorSpace.scRGB-774"><a href="#ColorSpace.scRGB-774"><span class="linenos">774</span></a><span class="sd">            colour.RGB_Colourspace: Extended sRGB color space for HDR</span>
</span><span id="ColorSpace.scRGB-775"><a href="#ColorSpace.scRGB-775"><span class="linenos">775</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ColorSpace.scRGB-776"><a href="#ColorSpace.scRGB-776"><span class="linenos">776</span></a>        <span class="n">colorSpace</span> <span class="o">=</span> <span class="n">colour</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">RGB_COLOURSPACES</span><span class="p">[</span><span class="s1">&#39;sRGB&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
</span><span id="ColorSpace.scRGB-777"><a href="#ColorSpace.scRGB-777"><span class="linenos">777</span></a>        <span class="n">colorSpace</span><span class="o">.</span><span class="n">cctf_decoding</span><span class="o">=</span><span class="kc">None</span>
</span><span id="ColorSpace.scRGB-778"><a href="#ColorSpace.scRGB-778"><span class="linenos">778</span></a>        <span class="k">return</span> <span class="n">colorSpace</span>
</span></pre></div>


            <div class="docstring"><p>Create an extended sRGB color space for HDR content.</p>

<p>This variant of sRGB removes the gamma correction for HDR processing,
providing linear RGB values with extended range.</p>

<p>Returns:
    colour.RGB_Colourspace: Extended sRGB color space for HDR</p>
</div>


                            </div>
                            <div id="ColorSpace.XYZ" class="classattr">
                                        <input id="ColorSpace.XYZ-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-staticmethod">@staticmethod</div>

        <span class="def">def</span>
        <span class="name">XYZ</span><span class="signature pdoc-code condensed">(<span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ColorSpace.XYZ-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ColorSpace.XYZ"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ColorSpace.XYZ-780"><a href="#ColorSpace.XYZ-780"><span class="linenos">780</span></a>    <span class="nd">@staticmethod</span>
</span><span id="ColorSpace.XYZ-781"><a href="#ColorSpace.XYZ-781"><span class="linenos">781</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">XYZ</span><span class="p">():</span>
</span><span id="ColorSpace.XYZ-782"><a href="#ColorSpace.XYZ-782"><span class="linenos">782</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ColorSpace.XYZ-783"><a href="#ColorSpace.XYZ-783"><span class="linenos">783</span></a><span class="sd">        Create an XYZ color space definition.</span>
</span><span id="ColorSpace.XYZ-784"><a href="#ColorSpace.XYZ-784"><span class="linenos">784</span></a><span class="sd">        </span>
</span><span id="ColorSpace.XYZ-785"><a href="#ColorSpace.XYZ-785"><span class="linenos">785</span></a><span class="sd">        Returns:</span>
</span><span id="ColorSpace.XYZ-786"><a href="#ColorSpace.XYZ-786"><span class="linenos">786</span></a><span class="sd">            colour.RGB_Colourspace: XYZ color space configuration</span>
</span><span id="ColorSpace.XYZ-787"><a href="#ColorSpace.XYZ-787"><span class="linenos">787</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ColorSpace.XYZ-788"><a href="#ColorSpace.XYZ-788"><span class="linenos">788</span></a>        <span class="k">return</span> <span class="n">colour</span><span class="o">.</span><span class="n">RGB_Colourspace</span><span class="p">(</span><span class="s1">&#39;XYZ&#39;</span><span class="p">,</span> <span class="n">primaries</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.73470</span><span class="p">,</span> <span class="mf">0.26530</span><span class="p">,</span> <span class="mf">0.00000</span><span class="p">,</span> <span class="mf">1.00000</span><span class="p">,</span> <span class="mf">0.00010</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.07700</span><span class="p">]),</span> <span class="n">whitepoint</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.32168</span><span class="p">,</span> <span class="mf">0.33767</span><span class="p">]))</span>
</span></pre></div>


            <div class="docstring"><p>Create an XYZ color space definition.</p>

<p>Returns:
    colour.RGB_Colourspace: XYZ color space configuration</p>
</div>


                            </div>
                            <div id="ColorSpace.build" class="classattr">
                                        <input id="ColorSpace.build-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-staticmethod">@staticmethod</div>

        <span class="def">def</span>
        <span class="name">build</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">name</span><span class="o">=</span><span class="s1">&#39;sRGB&#39;</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="ColorSpace.build-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#ColorSpace.build"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="ColorSpace.build-790"><a href="#ColorSpace.build-790"><span class="linenos">790</span></a>    <span class="nd">@staticmethod</span>
</span><span id="ColorSpace.build-791"><a href="#ColorSpace.build-791"><span class="linenos">791</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">build</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;sRGB&#39;</span><span class="p">):</span>
</span><span id="ColorSpace.build-792"><a href="#ColorSpace.build-792"><span class="linenos">792</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="ColorSpace.build-793"><a href="#ColorSpace.build-793"><span class="linenos">793</span></a><span class="sd">        Factory method to create color spaces by name.</span>
</span><span id="ColorSpace.build-794"><a href="#ColorSpace.build-794"><span class="linenos">794</span></a><span class="sd">        </span>
</span><span id="ColorSpace.build-795"><a href="#ColorSpace.build-795"><span class="linenos">795</span></a><span class="sd">        Args:</span>
</span><span id="ColorSpace.build-796"><a href="#ColorSpace.build-796"><span class="linenos">796</span></a><span class="sd">            name (str, optional): Color space name (&#39;sRGB&#39;, &#39;scRGB&#39;, &#39;Lab&#39;, &#39;Lch&#39;, &#39;XYZ&#39;)</span>
</span><span id="ColorSpace.build-797"><a href="#ColorSpace.build-797"><span class="linenos">797</span></a><span class="sd">                                 Defaults to &#39;sRGB&#39;</span>
</span><span id="ColorSpace.build-798"><a href="#ColorSpace.build-798"><span class="linenos">798</span></a><span class="sd">        </span>
</span><span id="ColorSpace.build-799"><a href="#ColorSpace.build-799"><span class="linenos">799</span></a><span class="sd">        Returns:</span>
</span><span id="ColorSpace.build-800"><a href="#ColorSpace.build-800"><span class="linenos">800</span></a><span class="sd">            colour.RGB_Colourspace or None: Requested color space or None if unknown</span>
</span><span id="ColorSpace.build-801"><a href="#ColorSpace.build-801"><span class="linenos">801</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="ColorSpace.build-802"><a href="#ColorSpace.build-802"><span class="linenos">802</span></a>        <span class="n">cs</span>  <span class="o">=</span> <span class="kc">None</span>
</span><span id="ColorSpace.build-803"><a href="#ColorSpace.build-803"><span class="linenos">803</span></a>        <span class="k">if</span> <span class="n">name</span><span class="o">==</span> <span class="s1">&#39;sRGB&#39;</span><span class="p">:</span> <span class="n">cs</span> <span class="o">=</span>  <span class="n">ColorSpace</span><span class="o">.</span><span class="n">sRGB</span><span class="p">()</span>
</span><span id="ColorSpace.build-804"><a href="#ColorSpace.build-804"><span class="linenos">804</span></a>        <span class="k">if</span> <span class="n">name</span><span class="o">==</span> <span class="s1">&#39;scRGB&#39;</span><span class="p">:</span> <span class="n">cs</span> <span class="o">=</span>  <span class="n">ColorSpace</span><span class="o">.</span><span class="n">scRGB</span><span class="p">()</span>
</span><span id="ColorSpace.build-805"><a href="#ColorSpace.build-805"><span class="linenos">805</span></a>        <span class="k">if</span> <span class="n">name</span><span class="o">==</span> <span class="s1">&#39;Lab&#39;</span> <span class="p">:</span> <span class="n">cs</span> <span class="o">=</span>  <span class="n">ColorSpace</span><span class="o">.</span><span class="n">Lab</span><span class="p">()</span>
</span><span id="ColorSpace.build-806"><a href="#ColorSpace.build-806"><span class="linenos">806</span></a>        <span class="k">if</span> <span class="n">name</span><span class="o">==</span> <span class="s1">&#39;Lch&#39;</span> <span class="p">:</span> <span class="n">cs</span> <span class="o">=</span>  <span class="n">ColorSpace</span><span class="o">.</span><span class="n">Lch</span><span class="p">()</span>
</span><span id="ColorSpace.build-807"><a href="#ColorSpace.build-807"><span class="linenos">807</span></a>        <span class="k">if</span> <span class="n">name</span><span class="o">==</span> <span class="s1">&#39;XYZ&#39;</span> <span class="p">:</span> <span class="n">cs</span> <span class="o">=</span>  <span class="n">ColorSpace</span><span class="o">.</span><span class="n">XYZ</span><span class="p">()</span>
</span><span id="ColorSpace.build-808"><a href="#ColorSpace.build-808"><span class="linenos">808</span></a>        <span class="k">return</span> <span class="n">cs</span> 
</span></pre></div>


            <div class="docstring"><p>Factory method to create color spaces by name.</p>

<p>Args:
    name (str, optional): Color space name ('sRGB', 'scRGB', 'Lab', 'Lch', 'XYZ')
                         Defaults to 'sRGB'</p>

<p>Returns:
    colour.RGB_Colourspace or None: Requested color space or None if unknown</p>
</div>


                            </div>
                </section>
                <section id="Histogram">
                            <input id="Histogram-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Histogram</span>:

                <label class="view-source-button" for="Histogram-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Histogram"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Histogram-812"><a href="#Histogram-812"><span class="linenos">812</span></a><span class="k">class</span><span class="w"> </span><span class="nc">Histogram</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
</span><span id="Histogram-813"><a href="#Histogram-813"><span class="linenos">813</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Histogram-814"><a href="#Histogram-814"><span class="linenos">814</span></a><span class="sd">    Image histogram computation and analysis for HDR imaging.</span>
</span><span id="Histogram-815"><a href="#Histogram-815"><span class="linenos">815</span></a><span class="sd">    </span>
</span><span id="Histogram-816"><a href="#Histogram-816"><span class="linenos">816</span></a><span class="sd">    This class provides comprehensive histogram generation and analysis capabilities</span>
</span><span id="Histogram-817"><a href="#Histogram-817"><span class="linenos">817</span></a><span class="sd">    for HDR images, supporting both linear and logarithmic scales for different</span>
</span><span id="Histogram-818"><a href="#Histogram-818"><span class="linenos">818</span></a><span class="sd">    dynamic ranges.</span>
</span><span id="Histogram-819"><a href="#Histogram-819"><span class="linenos">819</span></a><span class="sd">    </span>
</span><span id="Histogram-820"><a href="#Histogram-820"><span class="linenos">820</span></a><span class="sd">    Attributes:</span>
</span><span id="Histogram-821"><a href="#Histogram-821"><span class="linenos">821</span></a><span class="sd">        name (str): Descriptive name for the histogram</span>
</span><span id="Histogram-822"><a href="#Histogram-822"><span class="linenos">822</span></a><span class="sd">        channel (channel): Color channel analyzed</span>
</span><span id="Histogram-823"><a href="#Histogram-823"><span class="linenos">823</span></a><span class="sd">        histValue (numpy.ndarray): Histogram bin values</span>
</span><span id="Histogram-824"><a href="#Histogram-824"><span class="linenos">824</span></a><span class="sd">        edgeValue (numpy.ndarray): Histogram bin edges</span>
</span><span id="Histogram-825"><a href="#Histogram-825"><span class="linenos">825</span></a><span class="sd">        logSpace (bool): Whether histogram uses logarithmic spacing</span>
</span><span id="Histogram-826"><a href="#Histogram-826"><span class="linenos">826</span></a><span class="sd">    </span>
</span><span id="Histogram-827"><a href="#Histogram-827"><span class="linenos">827</span></a><span class="sd">    Methods:</span>
</span><span id="Histogram-828"><a href="#Histogram-828"><span class="linenos">828</span></a><span class="sd">        normalise: Normalize histogram values</span>
</span><span id="Histogram-829"><a href="#Histogram-829"><span class="linenos">829</span></a><span class="sd">        plot: Display histogram on matplotlib axis</span>
</span><span id="Histogram-830"><a href="#Histogram-830"><span class="linenos">830</span></a><span class="sd">        toNumpy: Convert histogram to numpy array</span>
</span><span id="Histogram-831"><a href="#Histogram-831"><span class="linenos">831</span></a><span class="sd">        </span>
</span><span id="Histogram-832"><a href="#Histogram-832"><span class="linenos">832</span></a><span class="sd">    Static Methods:</span>
</span><span id="Histogram-833"><a href="#Histogram-833"><span class="linenos">833</span></a><span class="sd">        build: Generate histogram from image and channel</span>
</span><span id="Histogram-834"><a href="#Histogram-834"><span class="linenos">834</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="Histogram-835"><a href="#Histogram-835"><span class="linenos">835</span></a>    
</span><span id="Histogram-836"><a href="#Histogram-836"><span class="linenos">836</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">histValue</span><span class="p">,</span><span class="n">edgeValue</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">channel</span><span class="p">,</span><span class="n">logSpace</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="Histogram-837"><a href="#Histogram-837"><span class="linenos">837</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Histogram-838"><a href="#Histogram-838"><span class="linenos">838</span></a><span class="sd">        Initialize a histogram object with computed values.</span>
</span><span id="Histogram-839"><a href="#Histogram-839"><span class="linenos">839</span></a>
</span><span id="Histogram-840"><a href="#Histogram-840"><span class="linenos">840</span></a><span class="sd">        Args:</span>
</span><span id="Histogram-841"><a href="#Histogram-841"><span class="linenos">841</span></a><span class="sd">            histValue (numpy.ndarray): Histogram bin counts</span>
</span><span id="Histogram-842"><a href="#Histogram-842"><span class="linenos">842</span></a><span class="sd">            edgeValue (numpy.ndarray): Histogram bin edge positions</span>
</span><span id="Histogram-843"><a href="#Histogram-843"><span class="linenos">843</span></a><span class="sd">            name (str): Descriptive name for the histogram</span>
</span><span id="Histogram-844"><a href="#Histogram-844"><span class="linenos">844</span></a><span class="sd">            channel (channel): Color channel that was analyzed</span>
</span><span id="Histogram-845"><a href="#Histogram-845"><span class="linenos">845</span></a><span class="sd">            logSpace (bool, optional): Whether bins use logarithmic spacing (default: False)</span>
</span><span id="Histogram-846"><a href="#Histogram-846"><span class="linenos">846</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Histogram-847"><a href="#Histogram-847"><span class="linenos">847</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">name</span>           <span class="o">=</span> <span class="n">name</span>
</span><span id="Histogram-848"><a href="#Histogram-848"><span class="linenos">848</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">channel</span>        <span class="o">=</span> <span class="n">channel</span>
</span><span id="Histogram-849"><a href="#Histogram-849"><span class="linenos">849</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">histValue</span>      <span class="o">=</span> <span class="n">histValue</span>
</span><span id="Histogram-850"><a href="#Histogram-850"><span class="linenos">850</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">edgeValue</span>      <span class="o">=</span> <span class="n">edgeValue</span>
</span><span id="Histogram-851"><a href="#Histogram-851"><span class="linenos">851</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logSpace</span>       <span class="o">=</span> <span class="n">logSpace</span>    
</span><span id="Histogram-852"><a href="#Histogram-852"><span class="linenos">852</span></a>
</span><span id="Histogram-853"><a href="#Histogram-853"><span class="linenos">853</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Histogram-854"><a href="#Histogram-854"><span class="linenos">854</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Histogram-855"><a href="#Histogram-855"><span class="linenos">855</span></a><span class="sd">        Generate a detailed string representation of the histogram.</span>
</span><span id="Histogram-856"><a href="#Histogram-856"><span class="linenos">856</span></a><span class="sd">        </span>
</span><span id="Histogram-857"><a href="#Histogram-857"><span class="linenos">857</span></a><span class="sd">        Returns:</span>
</span><span id="Histogram-858"><a href="#Histogram-858"><span class="linenos">858</span></a><span class="sd">            str: Comprehensive histogram description</span>
</span><span id="Histogram-859"><a href="#Histogram-859"><span class="linenos">859</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Histogram-860"><a href="#Histogram-860"><span class="linenos">860</span></a>        <span class="n">res</span> <span class="o">=</span>   <span class="s2">&quot;&lt;class Histogram: </span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> \
</span><span id="Histogram-861"><a href="#Histogram-861"><span class="linenos">861</span></a>                <span class="s2">&quot;t name:&quot;</span>               <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>                 <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>  <span class="o">+</span> \
</span><span id="Histogram-862"><a href="#Histogram-862"><span class="linenos">862</span></a>                <span class="s2">&quot;</span><span class="se">\t</span><span class="s2"> nb bins: &quot;</span>        <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">histValue</span><span class="p">))</span>    <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>  <span class="o">+</span> \
</span><span id="Histogram-863"><a href="#Histogram-863"><span class="linenos">863</span></a>                <span class="s2">&quot;</span><span class="se">\t</span><span class="s2"> channel: &quot;</span>        <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">channel</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>      <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>  <span class="o">+</span> \
</span><span id="Histogram-864"><a href="#Histogram-864"><span class="linenos">864</span></a>                <span class="s2">&quot;</span><span class="se">\t</span><span class="s2"> logSpace: &quot;</span>       <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">logSpace</span><span class="p">)</span>          <span class="o">+</span> <span class="s2">&quot;&gt;&quot;</span>  
</span><span id="Histogram-865"><a href="#Histogram-865"><span class="linenos">865</span></a>        <span class="k">return</span> <span class="n">res</span>
</span><span id="Histogram-866"><a href="#Histogram-866"><span class="linenos">866</span></a>
</span><span id="Histogram-867"><a href="#Histogram-867"><span class="linenos">867</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Histogram-868"><a href="#Histogram-868"><span class="linenos">868</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Histogram-869"><a href="#Histogram-869"><span class="linenos">869</span></a><span class="sd">        Generate a human-readable string representation.</span>
</span><span id="Histogram-870"><a href="#Histogram-870"><span class="linenos">870</span></a><span class="sd">        </span>
</span><span id="Histogram-871"><a href="#Histogram-871"><span class="linenos">871</span></a><span class="sd">        Returns:</span>
</span><span id="Histogram-872"><a href="#Histogram-872"><span class="linenos">872</span></a><span class="sd">            str: Same as __repr__ for consistency</span>
</span><span id="Histogram-873"><a href="#Histogram-873"><span class="linenos">873</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Histogram-874"><a href="#Histogram-874"><span class="linenos">874</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="fm">__repr__</span><span class="p">()</span>
</span><span id="Histogram-875"><a href="#Histogram-875"><span class="linenos">875</span></a>
</span><span id="Histogram-876"><a href="#Histogram-876"><span class="linenos">876</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">normalise</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">norm</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="Histogram-877"><a href="#Histogram-877"><span class="linenos">877</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Histogram-878"><a href="#Histogram-878"><span class="linenos">878</span></a><span class="sd">        Normalize histogram values according to specified norm.</span>
</span><span id="Histogram-879"><a href="#Histogram-879"><span class="linenos">879</span></a>
</span><span id="Histogram-880"><a href="#Histogram-880"><span class="linenos">880</span></a><span class="sd">        Args:</span>
</span><span id="Histogram-881"><a href="#Histogram-881"><span class="linenos">881</span></a><span class="sd">            norm (str, optional): Normalization method (&#39;probability&#39; or &#39;dot&#39;)</span>
</span><span id="Histogram-882"><a href="#Histogram-882"><span class="linenos">882</span></a><span class="sd">                                 Defaults to &#39;probability&#39;</span>
</span><span id="Histogram-883"><a href="#Histogram-883"><span class="linenos">883</span></a><span class="sd">                </span>
</span><span id="Histogram-884"><a href="#Histogram-884"><span class="linenos">884</span></a><span class="sd">        Returns:</span>
</span><span id="Histogram-885"><a href="#Histogram-885"><span class="linenos">885</span></a><span class="sd">            Histogram: New normalized histogram object</span>
</span><span id="Histogram-886"><a href="#Histogram-886"><span class="linenos">886</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Histogram-887"><a href="#Histogram-887"><span class="linenos">887</span></a>        <span class="n">res</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="Histogram-888"><a href="#Histogram-888"><span class="linenos">888</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">norm</span><span class="p">:</span> <span class="n">norm</span> <span class="o">=</span> <span class="s1">&#39;probability&#39;</span>
</span><span id="Histogram-889"><a href="#Histogram-889"><span class="linenos">889</span></a>        <span class="k">if</span> <span class="n">norm</span> <span class="o">==</span> <span class="s1">&#39;probability&#39;</span><span class="p">:</span>
</span><span id="Histogram-890"><a href="#Histogram-890"><span class="linenos">890</span></a>            <span class="nb">sum</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">histValue</span><span class="p">)</span>
</span><span id="Histogram-891"><a href="#Histogram-891"><span class="linenos">891</span></a>            <span class="n">res</span><span class="o">.</span><span class="n">histValue</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">histValue</span><span class="o">/</span><span class="nb">sum</span>
</span><span id="Histogram-892"><a href="#Histogram-892"><span class="linenos">892</span></a>        <span class="k">elif</span> <span class="n">norm</span> <span class="o">==</span> <span class="s1">&#39;dot&#39;</span><span class="p">:</span>
</span><span id="Histogram-893"><a href="#Histogram-893"><span class="linenos">893</span></a>            <span class="n">dot2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">histValue</span><span class="p">,</span><span class="n">res</span><span class="o">.</span><span class="n">histValue</span><span class="p">)</span>
</span><span id="Histogram-894"><a href="#Histogram-894"><span class="linenos">894</span></a>            <span class="n">res</span><span class="o">.</span><span class="n">histValue</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">histValue</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">dot2</span><span class="p">)</span>
</span><span id="Histogram-895"><a href="#Histogram-895"><span class="linenos">895</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Histogram-896"><a href="#Histogram-896"><span class="linenos">896</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;WARNING[Histogram.normalise(&quot;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="s2">&quot;): unknown norm:&quot;</span><span class="p">,</span> <span class="n">norm</span><span class="p">,</span><span class="s2">&quot;!]&quot;</span><span class="p">)</span>
</span><span id="Histogram-897"><a href="#Histogram-897"><span class="linenos">897</span></a>        <span class="k">return</span> <span class="n">res</span>
</span><span id="Histogram-898"><a href="#Histogram-898"><span class="linenos">898</span></a>
</span><span id="Histogram-899"><a href="#Histogram-899"><span class="linenos">899</span></a>    <span class="nd">@staticmethod</span>
</span><span id="Histogram-900"><a href="#Histogram-900"><span class="linenos">900</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">build</span><span class="p">(</span><span class="n">img</span><span class="p">,</span><span class="n">channel</span><span class="p">,</span><span class="n">nbBins</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span><span class="nb">range</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">logSpace</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="Histogram-901"><a href="#Histogram-901"><span class="linenos">901</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Histogram-902"><a href="#Histogram-902"><span class="linenos">902</span></a><span class="sd">        Generate a histogram from an image channel.</span>
</span><span id="Histogram-903"><a href="#Histogram-903"><span class="linenos">903</span></a>
</span><span id="Histogram-904"><a href="#Histogram-904"><span class="linenos">904</span></a><span class="sd">        Args:</span>
</span><span id="Histogram-905"><a href="#Histogram-905"><span class="linenos">905</span></a><span class="sd">            img (Image): Source image for histogram generation</span>
</span><span id="Histogram-906"><a href="#Histogram-906"><span class="linenos">906</span></a><span class="sd">            channel (channel): Color channel to analyze</span>
</span><span id="Histogram-907"><a href="#Histogram-907"><span class="linenos">907</span></a><span class="sd">            nbBins (int, optional): Number of histogram bins (default: 100)</span>
</span><span id="Histogram-908"><a href="#Histogram-908"><span class="linenos">908</span></a><span class="sd">            range (tuple, optional): Value range for histogram (min, max)</span>
</span><span id="Histogram-909"><a href="#Histogram-909"><span class="linenos">909</span></a><span class="sd">                                   If None, determined automatically</span>
</span><span id="Histogram-910"><a href="#Histogram-910"><span class="linenos">910</span></a><span class="sd">            logSpace (bool or str, optional): Use logarithmic bin spacing</span>
</span><span id="Histogram-911"><a href="#Histogram-911"><span class="linenos">911</span></a><span class="sd">                                            &#39;auto&#39; determines from image type</span>
</span><span id="Histogram-912"><a href="#Histogram-912"><span class="linenos">912</span></a><span class="sd">                </span>
</span><span id="Histogram-913"><a href="#Histogram-913"><span class="linenos">913</span></a><span class="sd">        Returns:</span>
</span><span id="Histogram-914"><a href="#Histogram-914"><span class="linenos">914</span></a><span class="sd">            Histogram: Generated histogram object with computed values</span>
</span><span id="Histogram-915"><a href="#Histogram-915"><span class="linenos">915</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Histogram-916"><a href="#Histogram-916"><span class="linenos">916</span></a>        <span class="c1"># logSpace</span>
</span><span id="Histogram-917"><a href="#Histogram-917"><span class="linenos">917</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">logSpace</span><span class="p">,(</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">str</span><span class="p">)):</span> <span class="n">logSpace</span> <span class="o">=</span> <span class="s1">&#39;auto&#39;</span>
</span><span id="Histogram-918"><a href="#Histogram-918"><span class="linenos">918</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">logSpace</span><span class="p">,</span><span class="nb">str</span><span class="p">):</span>
</span><span id="Histogram-919"><a href="#Histogram-919"><span class="linenos">919</span></a>            <span class="k">if</span> <span class="n">logSpace</span><span class="o">==</span><span class="s1">&#39;auto&#39;</span><span class="p">:</span>
</span><span id="Histogram-920"><a href="#Histogram-920"><span class="linenos">920</span></a>                <span class="k">if</span> <span class="n">img</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">image</span><span class="o">.</span><span class="n">imageType</span><span class="o">.</span><span class="n">imageType</span><span class="o">.</span><span class="n">SDR</span> <span class="p">:</span> <span class="n">logSpace</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="Histogram-921"><a href="#Histogram-921"><span class="linenos">921</span></a>                <span class="k">if</span> <span class="n">img</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">image</span><span class="o">.</span><span class="n">imageType</span><span class="o">.</span><span class="n">imageType</span><span class="o">.</span><span class="n">HDR</span> <span class="p">:</span> <span class="n">logSpace</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="Histogram-922"><a href="#Histogram-922"><span class="linenos">922</span></a>            <span class="k">else</span><span class="p">:</span> <span class="n">logSpace</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="Histogram-923"><a href="#Histogram-923"><span class="linenos">923</span></a>
</span><span id="Histogram-924"><a href="#Histogram-924"><span class="linenos">924</span></a>        <span class="n">channelVector</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">ndarray2vector</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">getChannel</span><span class="p">(</span><span class="n">channel</span><span class="p">))</span>
</span><span id="Histogram-925"><a href="#Histogram-925"><span class="linenos">925</span></a>        <span class="c1"># range</span>
</span><span id="Histogram-926"><a href="#Histogram-926"><span class="linenos">926</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">range</span><span class="p">:</span> 
</span><span id="Histogram-927"><a href="#Histogram-927"><span class="linenos">927</span></a>            <span class="k">if</span> <span class="n">channel</span><span class="o">.</span><span class="n">colorSpace</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;Lab&#39;</span><span class="p">:</span>
</span><span id="Histogram-928"><a href="#Histogram-928"><span class="linenos">928</span></a>                <span class="nb">range</span><span class="o">=</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">100.0</span><span class="p">)</span>
</span><span id="Histogram-929"><a href="#Histogram-929"><span class="linenos">929</span></a>            <span class="k">elif</span> <span class="n">channel</span><span class="o">.</span><span class="n">colorSpace</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;sRGB&#39;</span><span class="ow">or</span> <span class="n">channel</span><span class="o">.</span><span class="n">colorSpace</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;XYZ&#39;</span><span class="p">:</span>
</span><span id="Histogram-930"><a href="#Histogram-930"><span class="linenos">930</span></a>                <span class="nb">range</span><span class="o">=</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">1.0</span><span class="p">)</span>
</span><span id="Histogram-931"><a href="#Histogram-931"><span class="linenos">931</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="Histogram-932"><a href="#Histogram-932"><span class="linenos">932</span></a>                <span class="nb">range</span><span class="o">=</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">1.0</span><span class="p">)</span>
</span><span id="Histogram-933"><a href="#Histogram-933"><span class="linenos">933</span></a>
</span><span id="Histogram-934"><a href="#Histogram-934"><span class="linenos">934</span></a>        <span class="c1"># compute bins</span>
</span><span id="Histogram-935"><a href="#Histogram-935"><span class="linenos">935</span></a>        <span class="k">if</span> <span class="n">logSpace</span><span class="p">:</span>
</span><span id="Histogram-936"><a href="#Histogram-936"><span class="linenos">936</span></a>            <span class="n">minChannel</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">amin</span><span class="p">(</span><span class="n">channelVector</span><span class="p">)</span>
</span><span id="Histogram-937"><a href="#Histogram-937"><span class="linenos">937</span></a>            <span class="n">maxChannel</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">amax</span><span class="p">(</span><span class="n">channelVector</span><span class="p">)</span>
</span><span id="Histogram-938"><a href="#Histogram-938"><span class="linenos">938</span></a>            <span class="c1">#bins</span>
</span><span id="Histogram-939"><a href="#Histogram-939"><span class="linenos">939</span></a>            <span class="n">bins</span> <span class="o">=</span> <span class="mi">10</span> <span class="o">**</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">minChannel</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">maxChannel</span><span class="p">),</span> <span class="n">nbBins</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
</span><span id="Histogram-940"><a href="#Histogram-940"><span class="linenos">940</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Histogram-941"><a href="#Histogram-941"><span class="linenos">941</span></a>            <span class="n">bins</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="nb">range</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="nb">range</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">nbBins</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
</span><span id="Histogram-942"><a href="#Histogram-942"><span class="linenos">942</span></a>
</span><span id="Histogram-943"><a href="#Histogram-943"><span class="linenos">943</span></a>        <span class="n">nphist</span><span class="p">,</span> <span class="n">npedges</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">histogram</span><span class="p">(</span><span class="n">channelVector</span><span class="p">,</span> <span class="n">bins</span><span class="p">)</span>
</span><span id="Histogram-944"><a href="#Histogram-944"><span class="linenos">944</span></a>
</span><span id="Histogram-945"><a href="#Histogram-945"><span class="linenos">945</span></a>        <span class="n">nphist</span> <span class="o">=</span> <span class="n">nphist</span><span class="o">/</span><span class="n">channelVector</span><span class="o">.</span><span class="n">shape</span>
</span><span id="Histogram-946"><a href="#Histogram-946"><span class="linenos">946</span></a>        <span class="k">return</span> <span class="n">Histogram</span><span class="p">(</span><span class="n">nphist</span><span class="p">,</span> 
</span><span id="Histogram-947"><a href="#Histogram-947"><span class="linenos">947</span></a>                         <span class="n">npedges</span><span class="p">,</span> 
</span><span id="Histogram-948"><a href="#Histogram-948"><span class="linenos">948</span></a>                         <span class="s1">&#39;hist_&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">channel</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;_&#39;</span><span class="o">+</span><span class="n">img</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> 
</span><span id="Histogram-949"><a href="#Histogram-949"><span class="linenos">949</span></a>                         <span class="n">channel</span><span class="p">,</span>
</span><span id="Histogram-950"><a href="#Histogram-950"><span class="linenos">950</span></a>                         <span class="n">logSpace</span> <span class="o">=</span> <span class="n">logSpace</span>
</span><span id="Histogram-951"><a href="#Histogram-951"><span class="linenos">951</span></a>                         <span class="p">)</span>
</span><span id="Histogram-952"><a href="#Histogram-952"><span class="linenos">952</span></a>
</span><span id="Histogram-953"><a href="#Histogram-953"><span class="linenos">953</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">ax</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">,</span><span class="n">shortName</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">title</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
</span><span id="Histogram-954"><a href="#Histogram-954"><span class="linenos">954</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Histogram-955"><a href="#Histogram-955"><span class="linenos">955</span></a><span class="sd">        Display the histogram on a matplotlib axis.</span>
</span><span id="Histogram-956"><a href="#Histogram-956"><span class="linenos">956</span></a>
</span><span id="Histogram-957"><a href="#Histogram-957"><span class="linenos">957</span></a><span class="sd">        Args:</span>
</span><span id="Histogram-958"><a href="#Histogram-958"><span class="linenos">958</span></a><span class="sd">            ax (matplotlib.axes.Axes): Matplotlib axis for plotting</span>
</span><span id="Histogram-959"><a href="#Histogram-959"><span class="linenos">959</span></a><span class="sd">            color (str, optional): Plot color (default: &#39;r&#39;)</span>
</span><span id="Histogram-960"><a href="#Histogram-960"><span class="linenos">960</span></a><span class="sd">            shortName (bool, optional): Use abbreviated name (default: True)</span>
</span><span id="Histogram-961"><a href="#Histogram-961"><span class="linenos">961</span></a><span class="sd">            title (bool, optional): Show title (default: True)</span>
</span><span id="Histogram-962"><a href="#Histogram-962"><span class="linenos">962</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Histogram-963"><a href="#Histogram-963"><span class="linenos">963</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">color</span> <span class="p">:</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;r&#39;</span>
</span><span id="Histogram-964"><a href="#Histogram-964"><span class="linenos">964</span></a>        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">edgeValue</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span><span class="bp">self</span><span class="o">.</span><span class="n">histValue</span><span class="p">,</span><span class="n">color</span><span class="p">)</span>
</span><span id="Histogram-965"><a href="#Histogram-965"><span class="linenos">965</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">logSpace</span><span class="p">:</span> <span class="n">ax</span><span class="o">.</span><span class="n">set_xscale</span><span class="p">(</span><span class="s2">&quot;log&quot;</span><span class="p">)</span>
</span><span id="Histogram-966"><a href="#Histogram-966"><span class="linenos">966</span></a>        <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="s2">&quot;(H(&quot;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">channel</span><span class="o">.</span><span class="n">name</span><span class="o">+</span><span class="s2">&quot;))&quot;</span><span class="k">if</span> <span class="n">shortName</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="o">+</span><span class="s2">&quot;(Histogram:&quot;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">channel</span><span class="o">.</span><span class="n">name</span><span class="o">+</span><span class="s2">&quot;)&quot;</span>
</span><span id="Histogram-967"><a href="#Histogram-967"><span class="linenos">967</span></a>        <span class="k">if</span> <span class="n">title</span><span class="p">:</span> <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span id="Histogram-968"><a href="#Histogram-968"><span class="linenos">968</span></a>
</span><span id="Histogram-969"><a href="#Histogram-969"><span class="linenos">969</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">toNumpy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Histogram-970"><a href="#Histogram-970"><span class="linenos">970</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Histogram-971"><a href="#Histogram-971"><span class="linenos">971</span></a><span class="sd">        Convert histogram values to numpy array.</span>
</span><span id="Histogram-972"><a href="#Histogram-972"><span class="linenos">972</span></a><span class="sd">        </span>
</span><span id="Histogram-973"><a href="#Histogram-973"><span class="linenos">973</span></a><span class="sd">        Returns:</span>
</span><span id="Histogram-974"><a href="#Histogram-974"><span class="linenos">974</span></a><span class="sd">            numpy.ndarray: Histogram bin values as numpy array</span>
</span><span id="Histogram-975"><a href="#Histogram-975"><span class="linenos">975</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Histogram-976"><a href="#Histogram-976"><span class="linenos">976</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">histValue</span>
</span></pre></div>


            <div class="docstring"><p>Image histogram computation and analysis for HDR imaging.</p>

<p>This class provides comprehensive histogram generation and analysis capabilities
for HDR images, supporting both linear and logarithmic scales for different
dynamic ranges.</p>

<p>Attributes:
    name (str): Descriptive name for the histogram
    channel (channel): Color channel analyzed
    histValue (numpy.ndarray): Histogram bin values
    edgeValue (numpy.ndarray): Histogram bin edges
    logSpace (bool): Whether histogram uses logarithmic spacing</p>

<p>Methods:
    normalise: Normalize histogram values
    plot: Display histogram on matplotlib axis
    toNumpy: Convert histogram to numpy array</p>

<p>Static Methods:
    build: Generate histogram from image and channel</p>
</div>


                            <div id="Histogram.__init__" class="classattr">
                                        <input id="Histogram.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">Histogram</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">histValue</span>, </span><span class="param"><span class="n">edgeValue</span>, </span><span class="param"><span class="n">name</span>, </span><span class="param"><span class="n">channel</span>, </span><span class="param"><span class="n">logSpace</span><span class="o">=</span><span class="kc">False</span></span>)</span>

                <label class="view-source-button" for="Histogram.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Histogram.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Histogram.__init__-836"><a href="#Histogram.__init__-836"><span class="linenos">836</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">histValue</span><span class="p">,</span><span class="n">edgeValue</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">channel</span><span class="p">,</span><span class="n">logSpace</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
</span><span id="Histogram.__init__-837"><a href="#Histogram.__init__-837"><span class="linenos">837</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Histogram.__init__-838"><a href="#Histogram.__init__-838"><span class="linenos">838</span></a><span class="sd">        Initialize a histogram object with computed values.</span>
</span><span id="Histogram.__init__-839"><a href="#Histogram.__init__-839"><span class="linenos">839</span></a>
</span><span id="Histogram.__init__-840"><a href="#Histogram.__init__-840"><span class="linenos">840</span></a><span class="sd">        Args:</span>
</span><span id="Histogram.__init__-841"><a href="#Histogram.__init__-841"><span class="linenos">841</span></a><span class="sd">            histValue (numpy.ndarray): Histogram bin counts</span>
</span><span id="Histogram.__init__-842"><a href="#Histogram.__init__-842"><span class="linenos">842</span></a><span class="sd">            edgeValue (numpy.ndarray): Histogram bin edge positions</span>
</span><span id="Histogram.__init__-843"><a href="#Histogram.__init__-843"><span class="linenos">843</span></a><span class="sd">            name (str): Descriptive name for the histogram</span>
</span><span id="Histogram.__init__-844"><a href="#Histogram.__init__-844"><span class="linenos">844</span></a><span class="sd">            channel (channel): Color channel that was analyzed</span>
</span><span id="Histogram.__init__-845"><a href="#Histogram.__init__-845"><span class="linenos">845</span></a><span class="sd">            logSpace (bool, optional): Whether bins use logarithmic spacing (default: False)</span>
</span><span id="Histogram.__init__-846"><a href="#Histogram.__init__-846"><span class="linenos">846</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Histogram.__init__-847"><a href="#Histogram.__init__-847"><span class="linenos">847</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">name</span>           <span class="o">=</span> <span class="n">name</span>
</span><span id="Histogram.__init__-848"><a href="#Histogram.__init__-848"><span class="linenos">848</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">channel</span>        <span class="o">=</span> <span class="n">channel</span>
</span><span id="Histogram.__init__-849"><a href="#Histogram.__init__-849"><span class="linenos">849</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">histValue</span>      <span class="o">=</span> <span class="n">histValue</span>
</span><span id="Histogram.__init__-850"><a href="#Histogram.__init__-850"><span class="linenos">850</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">edgeValue</span>      <span class="o">=</span> <span class="n">edgeValue</span>
</span><span id="Histogram.__init__-851"><a href="#Histogram.__init__-851"><span class="linenos">851</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">logSpace</span>       <span class="o">=</span> <span class="n">logSpace</span>    
</span></pre></div>


            <div class="docstring"><p>Initialize a histogram object with computed values.</p>

<p>Args:
    histValue (numpy.ndarray): Histogram bin counts
    edgeValue (numpy.ndarray): Histogram bin edge positions
    name (str): Descriptive name for the histogram
    channel (channel): Color channel that was analyzed
    logSpace (bool, optional): Whether bins use logarithmic spacing (default: False)</p>
</div>


                            </div>
                            <div id="Histogram.name" class="classattr">
                                <div class="attr variable">
            <span class="name">name</span>

        
    </div>
    <a class="headerlink" href="#Histogram.name"></a>
    
    

                            </div>
                            <div id="Histogram.channel" class="classattr">
                                <div class="attr variable">
            <span class="name">channel</span>

        
    </div>
    <a class="headerlink" href="#Histogram.channel"></a>
    
    

                            </div>
                            <div id="Histogram.histValue" class="classattr">
                                <div class="attr variable">
            <span class="name">histValue</span>

        
    </div>
    <a class="headerlink" href="#Histogram.histValue"></a>
    
    

                            </div>
                            <div id="Histogram.edgeValue" class="classattr">
                                <div class="attr variable">
            <span class="name">edgeValue</span>

        
    </div>
    <a class="headerlink" href="#Histogram.edgeValue"></a>
    
    

                            </div>
                            <div id="Histogram.logSpace" class="classattr">
                                <div class="attr variable">
            <span class="name">logSpace</span>

        
    </div>
    <a class="headerlink" href="#Histogram.logSpace"></a>
    
    

                            </div>
                            <div id="Histogram.normalise" class="classattr">
                                        <input id="Histogram.normalise-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">normalise</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">norm</span><span class="o">=</span><span class="kc">None</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Histogram.normalise-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Histogram.normalise"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Histogram.normalise-876"><a href="#Histogram.normalise-876"><span class="linenos">876</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">normalise</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">norm</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="Histogram.normalise-877"><a href="#Histogram.normalise-877"><span class="linenos">877</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Histogram.normalise-878"><a href="#Histogram.normalise-878"><span class="linenos">878</span></a><span class="sd">        Normalize histogram values according to specified norm.</span>
</span><span id="Histogram.normalise-879"><a href="#Histogram.normalise-879"><span class="linenos">879</span></a>
</span><span id="Histogram.normalise-880"><a href="#Histogram.normalise-880"><span class="linenos">880</span></a><span class="sd">        Args:</span>
</span><span id="Histogram.normalise-881"><a href="#Histogram.normalise-881"><span class="linenos">881</span></a><span class="sd">            norm (str, optional): Normalization method (&#39;probability&#39; or &#39;dot&#39;)</span>
</span><span id="Histogram.normalise-882"><a href="#Histogram.normalise-882"><span class="linenos">882</span></a><span class="sd">                                 Defaults to &#39;probability&#39;</span>
</span><span id="Histogram.normalise-883"><a href="#Histogram.normalise-883"><span class="linenos">883</span></a><span class="sd">                </span>
</span><span id="Histogram.normalise-884"><a href="#Histogram.normalise-884"><span class="linenos">884</span></a><span class="sd">        Returns:</span>
</span><span id="Histogram.normalise-885"><a href="#Histogram.normalise-885"><span class="linenos">885</span></a><span class="sd">            Histogram: New normalized histogram object</span>
</span><span id="Histogram.normalise-886"><a href="#Histogram.normalise-886"><span class="linenos">886</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Histogram.normalise-887"><a href="#Histogram.normalise-887"><span class="linenos">887</span></a>        <span class="n">res</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span id="Histogram.normalise-888"><a href="#Histogram.normalise-888"><span class="linenos">888</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">norm</span><span class="p">:</span> <span class="n">norm</span> <span class="o">=</span> <span class="s1">&#39;probability&#39;</span>
</span><span id="Histogram.normalise-889"><a href="#Histogram.normalise-889"><span class="linenos">889</span></a>        <span class="k">if</span> <span class="n">norm</span> <span class="o">==</span> <span class="s1">&#39;probability&#39;</span><span class="p">:</span>
</span><span id="Histogram.normalise-890"><a href="#Histogram.normalise-890"><span class="linenos">890</span></a>            <span class="nb">sum</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">histValue</span><span class="p">)</span>
</span><span id="Histogram.normalise-891"><a href="#Histogram.normalise-891"><span class="linenos">891</span></a>            <span class="n">res</span><span class="o">.</span><span class="n">histValue</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">histValue</span><span class="o">/</span><span class="nb">sum</span>
</span><span id="Histogram.normalise-892"><a href="#Histogram.normalise-892"><span class="linenos">892</span></a>        <span class="k">elif</span> <span class="n">norm</span> <span class="o">==</span> <span class="s1">&#39;dot&#39;</span><span class="p">:</span>
</span><span id="Histogram.normalise-893"><a href="#Histogram.normalise-893"><span class="linenos">893</span></a>            <span class="n">dot2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">res</span><span class="o">.</span><span class="n">histValue</span><span class="p">,</span><span class="n">res</span><span class="o">.</span><span class="n">histValue</span><span class="p">)</span>
</span><span id="Histogram.normalise-894"><a href="#Histogram.normalise-894"><span class="linenos">894</span></a>            <span class="n">res</span><span class="o">.</span><span class="n">histValue</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">histValue</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">dot2</span><span class="p">)</span>
</span><span id="Histogram.normalise-895"><a href="#Histogram.normalise-895"><span class="linenos">895</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Histogram.normalise-896"><a href="#Histogram.normalise-896"><span class="linenos">896</span></a>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;WARNING[Histogram.normalise(&quot;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="s2">&quot;): unknown norm:&quot;</span><span class="p">,</span> <span class="n">norm</span><span class="p">,</span><span class="s2">&quot;!]&quot;</span><span class="p">)</span>
</span><span id="Histogram.normalise-897"><a href="#Histogram.normalise-897"><span class="linenos">897</span></a>        <span class="k">return</span> <span class="n">res</span>
</span></pre></div>


            <div class="docstring"><p>Normalize histogram values according to specified norm.</p>

<p>Args:
    norm (str, optional): Normalization method ('probability' or 'dot')
                         Defaults to 'probability'</p>

<p>Returns:
    Histogram: New normalized histogram object</p>
</div>


                            </div>
                            <div id="Histogram.build" class="classattr">
                                        <input id="Histogram.build-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
                    <div class="decorator decorator-staticmethod">@staticmethod</div>

        <span class="def">def</span>
        <span class="name">build</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">img</span>, </span><span class="param"><span class="n">channel</span>, </span><span class="param"><span class="n">nbBins</span><span class="o">=</span><span class="mi">100</span>, </span><span class="param"><span class="nb">range</span><span class="o">=</span><span class="kc">None</span>, </span><span class="param"><span class="n">logSpace</span><span class="o">=</span><span class="kc">None</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Histogram.build-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Histogram.build"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Histogram.build-899"><a href="#Histogram.build-899"><span class="linenos">899</span></a>    <span class="nd">@staticmethod</span>
</span><span id="Histogram.build-900"><a href="#Histogram.build-900"><span class="linenos">900</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">build</span><span class="p">(</span><span class="n">img</span><span class="p">,</span><span class="n">channel</span><span class="p">,</span><span class="n">nbBins</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span><span class="nb">range</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">logSpace</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="Histogram.build-901"><a href="#Histogram.build-901"><span class="linenos">901</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Histogram.build-902"><a href="#Histogram.build-902"><span class="linenos">902</span></a><span class="sd">        Generate a histogram from an image channel.</span>
</span><span id="Histogram.build-903"><a href="#Histogram.build-903"><span class="linenos">903</span></a>
</span><span id="Histogram.build-904"><a href="#Histogram.build-904"><span class="linenos">904</span></a><span class="sd">        Args:</span>
</span><span id="Histogram.build-905"><a href="#Histogram.build-905"><span class="linenos">905</span></a><span class="sd">            img (Image): Source image for histogram generation</span>
</span><span id="Histogram.build-906"><a href="#Histogram.build-906"><span class="linenos">906</span></a><span class="sd">            channel (channel): Color channel to analyze</span>
</span><span id="Histogram.build-907"><a href="#Histogram.build-907"><span class="linenos">907</span></a><span class="sd">            nbBins (int, optional): Number of histogram bins (default: 100)</span>
</span><span id="Histogram.build-908"><a href="#Histogram.build-908"><span class="linenos">908</span></a><span class="sd">            range (tuple, optional): Value range for histogram (min, max)</span>
</span><span id="Histogram.build-909"><a href="#Histogram.build-909"><span class="linenos">909</span></a><span class="sd">                                   If None, determined automatically</span>
</span><span id="Histogram.build-910"><a href="#Histogram.build-910"><span class="linenos">910</span></a><span class="sd">            logSpace (bool or str, optional): Use logarithmic bin spacing</span>
</span><span id="Histogram.build-911"><a href="#Histogram.build-911"><span class="linenos">911</span></a><span class="sd">                                            &#39;auto&#39; determines from image type</span>
</span><span id="Histogram.build-912"><a href="#Histogram.build-912"><span class="linenos">912</span></a><span class="sd">                </span>
</span><span id="Histogram.build-913"><a href="#Histogram.build-913"><span class="linenos">913</span></a><span class="sd">        Returns:</span>
</span><span id="Histogram.build-914"><a href="#Histogram.build-914"><span class="linenos">914</span></a><span class="sd">            Histogram: Generated histogram object with computed values</span>
</span><span id="Histogram.build-915"><a href="#Histogram.build-915"><span class="linenos">915</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Histogram.build-916"><a href="#Histogram.build-916"><span class="linenos">916</span></a>        <span class="c1"># logSpace</span>
</span><span id="Histogram.build-917"><a href="#Histogram.build-917"><span class="linenos">917</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">logSpace</span><span class="p">,(</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">str</span><span class="p">)):</span> <span class="n">logSpace</span> <span class="o">=</span> <span class="s1">&#39;auto&#39;</span>
</span><span id="Histogram.build-918"><a href="#Histogram.build-918"><span class="linenos">918</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">logSpace</span><span class="p">,</span><span class="nb">str</span><span class="p">):</span>
</span><span id="Histogram.build-919"><a href="#Histogram.build-919"><span class="linenos">919</span></a>            <span class="k">if</span> <span class="n">logSpace</span><span class="o">==</span><span class="s1">&#39;auto&#39;</span><span class="p">:</span>
</span><span id="Histogram.build-920"><a href="#Histogram.build-920"><span class="linenos">920</span></a>                <span class="k">if</span> <span class="n">img</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">image</span><span class="o">.</span><span class="n">imageType</span><span class="o">.</span><span class="n">imageType</span><span class="o">.</span><span class="n">SDR</span> <span class="p">:</span> <span class="n">logSpace</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="Histogram.build-921"><a href="#Histogram.build-921"><span class="linenos">921</span></a>                <span class="k">if</span> <span class="n">img</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">image</span><span class="o">.</span><span class="n">imageType</span><span class="o">.</span><span class="n">imageType</span><span class="o">.</span><span class="n">HDR</span> <span class="p">:</span> <span class="n">logSpace</span> <span class="o">=</span> <span class="kc">True</span>
</span><span id="Histogram.build-922"><a href="#Histogram.build-922"><span class="linenos">922</span></a>            <span class="k">else</span><span class="p">:</span> <span class="n">logSpace</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="Histogram.build-923"><a href="#Histogram.build-923"><span class="linenos">923</span></a>
</span><span id="Histogram.build-924"><a href="#Histogram.build-924"><span class="linenos">924</span></a>        <span class="n">channelVector</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">ndarray2vector</span><span class="p">(</span><span class="n">img</span><span class="o">.</span><span class="n">getChannel</span><span class="p">(</span><span class="n">channel</span><span class="p">))</span>
</span><span id="Histogram.build-925"><a href="#Histogram.build-925"><span class="linenos">925</span></a>        <span class="c1"># range</span>
</span><span id="Histogram.build-926"><a href="#Histogram.build-926"><span class="linenos">926</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">range</span><span class="p">:</span> 
</span><span id="Histogram.build-927"><a href="#Histogram.build-927"><span class="linenos">927</span></a>            <span class="k">if</span> <span class="n">channel</span><span class="o">.</span><span class="n">colorSpace</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;Lab&#39;</span><span class="p">:</span>
</span><span id="Histogram.build-928"><a href="#Histogram.build-928"><span class="linenos">928</span></a>                <span class="nb">range</span><span class="o">=</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">100.0</span><span class="p">)</span>
</span><span id="Histogram.build-929"><a href="#Histogram.build-929"><span class="linenos">929</span></a>            <span class="k">elif</span> <span class="n">channel</span><span class="o">.</span><span class="n">colorSpace</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;sRGB&#39;</span><span class="ow">or</span> <span class="n">channel</span><span class="o">.</span><span class="n">colorSpace</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;XYZ&#39;</span><span class="p">:</span>
</span><span id="Histogram.build-930"><a href="#Histogram.build-930"><span class="linenos">930</span></a>                <span class="nb">range</span><span class="o">=</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">1.0</span><span class="p">)</span>
</span><span id="Histogram.build-931"><a href="#Histogram.build-931"><span class="linenos">931</span></a>            <span class="k">else</span><span class="p">:</span>
</span><span id="Histogram.build-932"><a href="#Histogram.build-932"><span class="linenos">932</span></a>                <span class="nb">range</span><span class="o">=</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">1.0</span><span class="p">)</span>
</span><span id="Histogram.build-933"><a href="#Histogram.build-933"><span class="linenos">933</span></a>
</span><span id="Histogram.build-934"><a href="#Histogram.build-934"><span class="linenos">934</span></a>        <span class="c1"># compute bins</span>
</span><span id="Histogram.build-935"><a href="#Histogram.build-935"><span class="linenos">935</span></a>        <span class="k">if</span> <span class="n">logSpace</span><span class="p">:</span>
</span><span id="Histogram.build-936"><a href="#Histogram.build-936"><span class="linenos">936</span></a>            <span class="n">minChannel</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">amin</span><span class="p">(</span><span class="n">channelVector</span><span class="p">)</span>
</span><span id="Histogram.build-937"><a href="#Histogram.build-937"><span class="linenos">937</span></a>            <span class="n">maxChannel</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">amax</span><span class="p">(</span><span class="n">channelVector</span><span class="p">)</span>
</span><span id="Histogram.build-938"><a href="#Histogram.build-938"><span class="linenos">938</span></a>            <span class="c1">#bins</span>
</span><span id="Histogram.build-939"><a href="#Histogram.build-939"><span class="linenos">939</span></a>            <span class="n">bins</span> <span class="o">=</span> <span class="mi">10</span> <span class="o">**</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">minChannel</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">maxChannel</span><span class="p">),</span> <span class="n">nbBins</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
</span><span id="Histogram.build-940"><a href="#Histogram.build-940"><span class="linenos">940</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Histogram.build-941"><a href="#Histogram.build-941"><span class="linenos">941</span></a>            <span class="n">bins</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="nb">range</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="nb">range</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">nbBins</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
</span><span id="Histogram.build-942"><a href="#Histogram.build-942"><span class="linenos">942</span></a>
</span><span id="Histogram.build-943"><a href="#Histogram.build-943"><span class="linenos">943</span></a>        <span class="n">nphist</span><span class="p">,</span> <span class="n">npedges</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">histogram</span><span class="p">(</span><span class="n">channelVector</span><span class="p">,</span> <span class="n">bins</span><span class="p">)</span>
</span><span id="Histogram.build-944"><a href="#Histogram.build-944"><span class="linenos">944</span></a>
</span><span id="Histogram.build-945"><a href="#Histogram.build-945"><span class="linenos">945</span></a>        <span class="n">nphist</span> <span class="o">=</span> <span class="n">nphist</span><span class="o">/</span><span class="n">channelVector</span><span class="o">.</span><span class="n">shape</span>
</span><span id="Histogram.build-946"><a href="#Histogram.build-946"><span class="linenos">946</span></a>        <span class="k">return</span> <span class="n">Histogram</span><span class="p">(</span><span class="n">nphist</span><span class="p">,</span> 
</span><span id="Histogram.build-947"><a href="#Histogram.build-947"><span class="linenos">947</span></a>                         <span class="n">npedges</span><span class="p">,</span> 
</span><span id="Histogram.build-948"><a href="#Histogram.build-948"><span class="linenos">948</span></a>                         <span class="s1">&#39;hist_&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">channel</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;_&#39;</span><span class="o">+</span><span class="n">img</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> 
</span><span id="Histogram.build-949"><a href="#Histogram.build-949"><span class="linenos">949</span></a>                         <span class="n">channel</span><span class="p">,</span>
</span><span id="Histogram.build-950"><a href="#Histogram.build-950"><span class="linenos">950</span></a>                         <span class="n">logSpace</span> <span class="o">=</span> <span class="n">logSpace</span>
</span><span id="Histogram.build-951"><a href="#Histogram.build-951"><span class="linenos">951</span></a>                         <span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Generate a histogram from an image channel.</p>

<p>Args:
    img (Image): Source image for histogram generation
    channel (channel): Color channel to analyze
    nbBins (int, optional): Number of histogram bins (default: 100)
    range (tuple, optional): Value range for histogram (min, max)
                           If None, determined automatically
    logSpace (bool or str, optional): Use logarithmic bin spacing
                                    'auto' determines from image type</p>

<p>Returns:
    Histogram: Generated histogram object with computed values</p>
</div>


                            </div>
                            <div id="Histogram.plot" class="classattr">
                                        <input id="Histogram.plot-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">plot</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">ax</span>, </span><span class="param"><span class="n">color</span><span class="o">=</span><span class="s1">&#39;r&#39;</span>, </span><span class="param"><span class="n">shortName</span><span class="o">=</span><span class="kc">True</span>, </span><span class="param"><span class="n">title</span><span class="o">=</span><span class="kc">True</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Histogram.plot-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Histogram.plot"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Histogram.plot-953"><a href="#Histogram.plot-953"><span class="linenos">953</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">ax</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">,</span><span class="n">shortName</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">title</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
</span><span id="Histogram.plot-954"><a href="#Histogram.plot-954"><span class="linenos">954</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Histogram.plot-955"><a href="#Histogram.plot-955"><span class="linenos">955</span></a><span class="sd">        Display the histogram on a matplotlib axis.</span>
</span><span id="Histogram.plot-956"><a href="#Histogram.plot-956"><span class="linenos">956</span></a>
</span><span id="Histogram.plot-957"><a href="#Histogram.plot-957"><span class="linenos">957</span></a><span class="sd">        Args:</span>
</span><span id="Histogram.plot-958"><a href="#Histogram.plot-958"><span class="linenos">958</span></a><span class="sd">            ax (matplotlib.axes.Axes): Matplotlib axis for plotting</span>
</span><span id="Histogram.plot-959"><a href="#Histogram.plot-959"><span class="linenos">959</span></a><span class="sd">            color (str, optional): Plot color (default: &#39;r&#39;)</span>
</span><span id="Histogram.plot-960"><a href="#Histogram.plot-960"><span class="linenos">960</span></a><span class="sd">            shortName (bool, optional): Use abbreviated name (default: True)</span>
</span><span id="Histogram.plot-961"><a href="#Histogram.plot-961"><span class="linenos">961</span></a><span class="sd">            title (bool, optional): Show title (default: True)</span>
</span><span id="Histogram.plot-962"><a href="#Histogram.plot-962"><span class="linenos">962</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Histogram.plot-963"><a href="#Histogram.plot-963"><span class="linenos">963</span></a>        <span class="k">if</span> <span class="ow">not</span> <span class="n">color</span> <span class="p">:</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;r&#39;</span>
</span><span id="Histogram.plot-964"><a href="#Histogram.plot-964"><span class="linenos">964</span></a>        <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">edgeValue</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span><span class="bp">self</span><span class="o">.</span><span class="n">histValue</span><span class="p">,</span><span class="n">color</span><span class="p">)</span>
</span><span id="Histogram.plot-965"><a href="#Histogram.plot-965"><span class="linenos">965</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">logSpace</span><span class="p">:</span> <span class="n">ax</span><span class="o">.</span><span class="n">set_xscale</span><span class="p">(</span><span class="s2">&quot;log&quot;</span><span class="p">)</span>
</span><span id="Histogram.plot-966"><a href="#Histogram.plot-966"><span class="linenos">966</span></a>        <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="s2">&quot;(H(&quot;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">channel</span><span class="o">.</span><span class="n">name</span><span class="o">+</span><span class="s2">&quot;))&quot;</span><span class="k">if</span> <span class="n">shortName</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="o">+</span><span class="s2">&quot;(Histogram:&quot;</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">channel</span><span class="o">.</span><span class="n">name</span><span class="o">+</span><span class="s2">&quot;)&quot;</span>
</span><span id="Histogram.plot-967"><a href="#Histogram.plot-967"><span class="linenos">967</span></a>        <span class="k">if</span> <span class="n">title</span><span class="p">:</span> <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Display the histogram on a matplotlib axis.</p>

<p>Args:
    ax (matplotlib.axes.Axes): Matplotlib axis for plotting
    color (str, optional): Plot color (default: 'r')
    shortName (bool, optional): Use abbreviated name (default: True)
    title (bool, optional): Show title (default: True)</p>
</div>


                            </div>
                            <div id="Histogram.toNumpy" class="classattr">
                                        <input id="Histogram.toNumpy-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">toNumpy</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="Histogram.toNumpy-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Histogram.toNumpy"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Histogram.toNumpy-969"><a href="#Histogram.toNumpy-969"><span class="linenos">969</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">toNumpy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span id="Histogram.toNumpy-970"><a href="#Histogram.toNumpy-970"><span class="linenos">970</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
</span><span id="Histogram.toNumpy-971"><a href="#Histogram.toNumpy-971"><span class="linenos">971</span></a><span class="sd">        Convert histogram values to numpy array.</span>
</span><span id="Histogram.toNumpy-972"><a href="#Histogram.toNumpy-972"><span class="linenos">972</span></a><span class="sd">        </span>
</span><span id="Histogram.toNumpy-973"><a href="#Histogram.toNumpy-973"><span class="linenos">973</span></a><span class="sd">        Returns:</span>
</span><span id="Histogram.toNumpy-974"><a href="#Histogram.toNumpy-974"><span class="linenos">974</span></a><span class="sd">            numpy.ndarray: Histogram bin values as numpy array</span>
</span><span id="Histogram.toNumpy-975"><a href="#Histogram.toNumpy-975"><span class="linenos">975</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Histogram.toNumpy-976"><a href="#Histogram.toNumpy-976"><span class="linenos">976</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">histValue</span>
</span></pre></div>


            <div class="docstring"><p>Convert histogram values to numpy array.</p>

<p>Returns:
    numpy.ndarray: Histogram bin values as numpy array</p>
</div>


                            </div>
                </section>
    </main>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let search, searchErr;

    async function initialize() {
        try {
            search = await new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.type = "text/javascript";
                script.async = true;
                script.onload = () => resolve(window.pdocSearch);
                script.onerror = (e) => reject(e);
                script.src = "../search.js";
                document.getElementsByTagName("head")[0].appendChild(script);
            });
        } catch (e) {
            console.error("Cannot fetch pdoc search index");
            searchErr = "Cannot fetch search index.";
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const term = getSearchTerm();
            if (!term) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!search) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = search(term);

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(term)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(term)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `../${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.kind) {
                    case "function":
                        if (doc.fullname.endsWith(".__init__")) {
                            heading = `<span class="name">${doc.fullname.replace(/\.__init__$/, "")}</span>${doc.signature}`;
                        } else {
                            heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span>${doc.signature}`;
                        }
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        if (doc.bases)
                            heading += `<wbr>(<span class="base">${doc.bases}</span>)`;
                        heading += `:`;
                        break;
                    case "variable":
                        heading = `<span class="name">${doc.fullname}</span>`;
                        if (doc.annotation)
                            heading += `<span class="annotation">${doc.annotation}</span>`;
                        if (doc.default_value)
                            heading += `<span class="default_value"> = ${doc.default_value}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.kind}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>